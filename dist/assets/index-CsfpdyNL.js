function Uw(e,n){for(var s=0;s<n.length;s++){const i=n[s];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const c=Object.getOwnPropertyDescriptor(i,r);c&&Object.defineProperty(e,r,c.get?c:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}})();function fh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Jd={exports:{}},Fl={};var Iv;function $w(){if(Iv)return Fl;Iv=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(i,r,c){var u=null;if(c!==void 0&&(u=""+c),r.key!==void 0&&(u=""+r.key),"key"in r){c={};for(var d in r)d!=="key"&&(c[d]=r[d])}else c=r;return r=c.ref,{$$typeof:e,type:i,key:u,ref:r!==void 0?r:null,props:c}}return Fl.Fragment=n,Fl.jsx=s,Fl.jsxs=s,Fl}var Bv;function Hw(){return Bv||(Bv=1,Jd.exports=$w()),Jd.exports}var m=Hw(),ef={exports:{}},je={};var Lv;function Zw(){if(Lv)return je;Lv=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function S(M){return M===null||typeof M!="object"?null:(M=b&&M[b]||M["@@iterator"],typeof M=="function"?M:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,C={};function O(M,z,ee){this.props=M,this.context=z,this.refs=C,this.updater=ee||T}O.prototype.isReactComponent={},O.prototype.setState=function(M,z){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,z,"setState")},O.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function R(){}R.prototype=O.prototype;function I(M,z,ee){this.props=M,this.context=z,this.refs=C,this.updater=ee||T}var B=I.prototype=new R;B.constructor=I,E(B,O.prototype),B.isPureReactComponent=!0;var q=Array.isArray;function N(){}var j={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function K(M,z,ee){var oe=ee.ref;return{$$typeof:e,type:M,key:z,ref:oe!==void 0?oe:null,props:ee}}function re(M,z){return K(M.type,z,M.props)}function he(M){return typeof M=="object"&&M!==null&&M.$$typeof===e}function se(M){var z={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ee){return z[ee]})}var Z=/\/+/g;function le(M,z){return typeof M=="object"&&M!==null&&M.key!=null?se(""+M.key):z.toString(36)}function Q(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(N,N):(M.status="pending",M.then(function(z){M.status==="pending"&&(M.status="fulfilled",M.value=z)},function(z){M.status==="pending"&&(M.status="rejected",M.reason=z)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function L(M,z,ee,oe,ue){var ce=typeof M;(ce==="undefined"||ce==="boolean")&&(M=null);var ye=!1;if(M===null)ye=!0;else switch(ce){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(M.$$typeof){case e:case n:ye=!0;break;case y:return ye=M._init,L(ye(M._payload),z,ee,oe,ue)}}if(ye)return ue=ue(M),ye=oe===""?"."+le(M,0):oe,q(ue)?(ee="",ye!=null&&(ee=ye.replace(Z,"$&/")+"/"),L(ue,z,ee,"",function(_e){return _e})):ue!=null&&(he(ue)&&(ue=re(ue,ee+(ue.key==null||M&&M.key===ue.key?"":(""+ue.key).replace(Z,"$&/")+"/")+ye)),z.push(ue)),1;ye=0;var be=oe===""?".":oe+":";if(q(M))for(var ge=0;ge<M.length;ge++)oe=M[ge],ce=be+le(oe,ge),ye+=L(oe,z,ee,ce,ue);else if(ge=S(M),typeof ge=="function")for(M=ge.call(M),ge=0;!(oe=M.next()).done;)oe=oe.value,ce=be+le(oe,ge++),ye+=L(oe,z,ee,ce,ue);else if(ce==="object"){if(typeof M.then=="function")return L(Q(M),z,ee,oe,ue);throw z=String(M),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return ye}function Y(M,z,ee){if(M==null)return M;var oe=[],ue=0;return L(M,oe,"","",function(ce){return z.call(ee,ce,ue++)}),oe}function ae(M){if(M._status===-1){var z=M._result;z=z(),z.then(function(ee){(M._status===0||M._status===-1)&&(M._status=1,M._result=ee)},function(ee){(M._status===0||M._status===-1)&&(M._status=2,M._result=ee)}),M._status===-1&&(M._status=0,M._result=z)}if(M._status===1)return M._result.default;throw M._result}var k=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},G={map:Y,forEach:function(M,z,ee){Y(M,function(){z.apply(this,arguments)},ee)},count:function(M){var z=0;return Y(M,function(){z++}),z},toArray:function(M){return Y(M,function(z){return z})||[]},only:function(M){if(!he(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return je.Activity=v,je.Children=G,je.Component=O,je.Fragment=s,je.Profiler=r,je.PureComponent=I,je.StrictMode=i,je.Suspense=g,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,je.__COMPILER_RUNTIME={__proto__:null,c:function(M){return j.H.useMemoCache(M)}},je.cache=function(M){return function(){return M.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(M,z,ee){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var oe=E({},M.props),ue=M.key;if(z!=null)for(ce in z.key!==void 0&&(ue=""+z.key),z)!D.call(z,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&z.ref===void 0||(oe[ce]=z[ce]);var ce=arguments.length-2;if(ce===1)oe.children=ee;else if(1<ce){for(var ye=Array(ce),be=0;be<ce;be++)ye[be]=arguments[be+2];oe.children=ye}return K(M.type,ue,oe)},je.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},je.createElement=function(M,z,ee){var oe,ue={},ce=null;if(z!=null)for(oe in z.key!==void 0&&(ce=""+z.key),z)D.call(z,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(ue[oe]=z[oe]);var ye=arguments.length-2;if(ye===1)ue.children=ee;else if(1<ye){for(var be=Array(ye),ge=0;ge<ye;ge++)be[ge]=arguments[ge+2];ue.children=be}if(M&&M.defaultProps)for(oe in ye=M.defaultProps,ye)ue[oe]===void 0&&(ue[oe]=ye[oe]);return K(M,ce,ue)},je.createRef=function(){return{current:null}},je.forwardRef=function(M){return{$$typeof:d,render:M}},je.isValidElement=he,je.lazy=function(M){return{$$typeof:y,_payload:{_status:-1,_result:M},_init:ae}},je.memo=function(M,z){return{$$typeof:p,type:M,compare:z===void 0?null:z}},je.startTransition=function(M){var z=j.T,ee={};j.T=ee;try{var oe=M(),ue=j.S;ue!==null&&ue(ee,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(N,k)}catch(ce){k(ce)}finally{z!==null&&ee.types!==null&&(z.types=ee.types),j.T=z}},je.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},je.use=function(M){return j.H.use(M)},je.useActionState=function(M,z,ee){return j.H.useActionState(M,z,ee)},je.useCallback=function(M,z){return j.H.useCallback(M,z)},je.useContext=function(M){return j.H.useContext(M)},je.useDebugValue=function(){},je.useDeferredValue=function(M,z){return j.H.useDeferredValue(M,z)},je.useEffect=function(M,z){return j.H.useEffect(M,z)},je.useEffectEvent=function(M){return j.H.useEffectEvent(M)},je.useId=function(){return j.H.useId()},je.useImperativeHandle=function(M,z,ee){return j.H.useImperativeHandle(M,z,ee)},je.useInsertionEffect=function(M,z){return j.H.useInsertionEffect(M,z)},je.useLayoutEffect=function(M,z){return j.H.useLayoutEffect(M,z)},je.useMemo=function(M,z){return j.H.useMemo(M,z)},je.useOptimistic=function(M,z){return j.H.useOptimistic(M,z)},je.useReducer=function(M,z,ee){return j.H.useReducer(M,z,ee)},je.useRef=function(M){return j.H.useRef(M)},je.useState=function(M){return j.H.useState(M)},je.useSyncExternalStore=function(M,z,ee){return j.H.useSyncExternalStore(M,z,ee)},je.useTransition=function(){return j.H.useTransition()},je.version="19.2.4",je}var qv;function hh(){return qv||(qv=1,ef.exports=Zw()),ef.exports}var w=hh();const Xt=fh(w),B0=Uw({__proto__:null,default:Xt},[w]);var tf={exports:{}},Yl={},nf={exports:{}},af={};var Uv;function Fw(){return Uv||(Uv=1,(function(e){function n(L,Y){var ae=L.length;L.push(Y);e:for(;0<ae;){var k=ae-1>>>1,G=L[k];if(0<r(G,Y))L[k]=Y,L[ae]=G,ae=k;else break e}}function s(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var Y=L[0],ae=L.pop();if(ae!==Y){L[0]=ae;e:for(var k=0,G=L.length,M=G>>>1;k<M;){var z=2*(k+1)-1,ee=L[z],oe=z+1,ue=L[oe];if(0>r(ee,ae))oe<G&&0>r(ue,ee)?(L[k]=ue,L[oe]=ae,k=oe):(L[k]=ee,L[z]=ae,k=z);else if(oe<G&&0>r(ue,ae))L[k]=ue,L[oe]=ae,k=oe;else break e}}return Y}function r(L,Y){var ae=L.sortIndex-Y.sortIndex;return ae!==0?ae:L.id-Y.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var g=[],p=[],y=1,v=null,b=3,S=!1,T=!1,E=!1,C=!1,O=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;function B(L){for(var Y=s(p);Y!==null;){if(Y.callback===null)i(p);else if(Y.startTime<=L)i(p),Y.sortIndex=Y.expirationTime,n(g,Y);else break;Y=s(p)}}function q(L){if(E=!1,B(L),!T)if(s(g)!==null)T=!0,N||(N=!0,se());else{var Y=s(p);Y!==null&&Q(q,Y.startTime-L)}}var N=!1,j=-1,D=5,K=-1;function re(){return C?!0:!(e.unstable_now()-K<D)}function he(){if(C=!1,N){var L=e.unstable_now();K=L;var Y=!0;try{e:{T=!1,E&&(E=!1,R(j),j=-1),S=!0;var ae=b;try{t:{for(B(L),v=s(g);v!==null&&!(v.expirationTime>L&&re());){var k=v.callback;if(typeof k=="function"){v.callback=null,b=v.priorityLevel;var G=k(v.expirationTime<=L);if(L=e.unstable_now(),typeof G=="function"){v.callback=G,B(L),Y=!0;break t}v===s(g)&&i(g),B(L)}else i(g);v=s(g)}if(v!==null)Y=!0;else{var M=s(p);M!==null&&Q(q,M.startTime-L),Y=!1}}break e}finally{v=null,b=ae,S=!1}Y=void 0}}finally{Y?se():N=!1}}}var se;if(typeof I=="function")se=function(){I(he)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,le=Z.port2;Z.port1.onmessage=he,se=function(){le.postMessage(null)}}else se=function(){O(he,0)};function Q(L,Y){j=O(function(){L(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(L){switch(b){case 1:case 2:case 3:var Y=3;break;default:Y=b}var ae=b;b=Y;try{return L()}finally{b=ae}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(L,Y){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var ae=b;b=L;try{return Y()}finally{b=ae}},e.unstable_scheduleCallback=function(L,Y,ae){var k=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?k+ae:k):ae=k,L){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=ae+G,L={id:y++,callback:Y,priorityLevel:L,startTime:ae,expirationTime:G,sortIndex:-1},ae>k?(L.sortIndex=ae,n(p,L),s(g)===null&&L===s(p)&&(E?(R(j),j=-1):E=!0,Q(q,ae-k))):(L.sortIndex=G,n(g,L),T||S||(T=!0,N||(N=!0,se()))),L},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(L){var Y=b;return function(){var ae=b;b=Y;try{return L.apply(this,arguments)}finally{b=ae}}}})(af)),af}var $v;function Yw(){return $v||($v=1,nf.exports=Fw()),nf.exports}var sf={exports:{}},hn={};var Hv;function Gw(){if(Hv)return hn;Hv=1;var e=hh();function n(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},r=Symbol.for("react.portal");function c(g,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:g,containerInfo:p,implementation:y}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,hn.createPortal=function(g,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(n(299));return c(g,p,null,y)},hn.flushSync=function(g){var p=u.T,y=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=p,i.p=y,i.d.f()}},hn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(g,p))},hn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},hn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:S}):y==="script"&&i.d.X(g,{crossOrigin:v,integrity:b,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},hn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);i.d.M(g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(g)},hn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin);i.d.L(g,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},hn.preloadModule=function(g,p){if(typeof g=="string")if(p){var y=d(p.as,p.crossOrigin);i.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(g)},hn.requestFormReset=function(g){i.d.r(g)},hn.unstable_batchedUpdates=function(g,p){return g(p)},hn.useFormState=function(g,p,y){return u.H.useFormState(g,p,y)},hn.useFormStatus=function(){return u.H.useHostTransitionStatus()},hn.version="19.2.4",hn}var Zv;function L0(){if(Zv)return sf.exports;Zv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),sf.exports=Gw(),sf.exports}var Fv;function Vw(){if(Fv)return Yl;Fv=1;var e=Yw(),n=hh(),s=L0();function i(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var a=t,l=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(l=a.return),t=a.return;while(t)}return a.tag===3?l:null}function u(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function d(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(i(188))}function p(t){var a=t.alternate;if(!a){if(a=c(t),a===null)throw Error(i(188));return a!==t?null:t}for(var l=t,o=a;;){var f=l.return;if(f===null)break;var h=f.alternate;if(h===null){if(o=f.return,o!==null){l=o;continue}break}if(f.child===h.child){for(h=f.child;h;){if(h===l)return g(f),t;if(h===o)return g(f),a;h=h.sibling}throw Error(i(188))}if(l.return!==o.return)l=f,o=h;else{for(var x=!1,_=f.child;_;){if(_===l){x=!0,l=f,o=h;break}if(_===o){x=!0,o=f,l=h;break}_=_.sibling}if(!x){for(_=h.child;_;){if(_===l){x=!0,l=h,o=f;break}if(_===o){x=!0,o=h,l=f;break}_=_.sibling}if(!x)throw Error(i(189))}}if(l.alternate!==o)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?t:a}function y(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=y(t),a!==null)return a;t=t.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),I=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),he=Symbol.iterator;function se(t){return t===null||typeof t!="object"?null:(t=he&&t[he]||t["@@iterator"],typeof t=="function"?t:null)}var Z=Symbol.for("react.client.reference");function le(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Z?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case E:return"Fragment";case O:return"Profiler";case C:return"StrictMode";case q:return"Suspense";case N:return"SuspenseList";case K:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case T:return"Portal";case I:return t.displayName||"Context";case R:return(t._context.displayName||"Context")+".Consumer";case B:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j:return a=t.displayName||null,a!==null?a:le(t.type)||"Memo";case D:a=t._payload,t=t._init;try{return le(t(a))}catch{}}return null}var Q=Array.isArray,L=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},k=[],G=-1;function M(t){return{current:t}}function z(t){0>G||(t.current=k[G],k[G]=null,G--)}function ee(t,a){G++,k[G]=t.current,t.current=a}var oe=M(null),ue=M(null),ce=M(null),ye=M(null);function be(t,a){switch(ee(ce,a),ee(ue,t),ee(oe,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?lv(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=lv(a),t=rv(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}z(oe),ee(oe,t)}function ge(){z(oe),z(ue),z(ce)}function _e(t){t.memoizedState!==null&&ee(ye,t);var a=oe.current,l=rv(a,t.type);a!==l&&(ee(ue,t),ee(oe,l))}function Be(t){ue.current===t&&(z(oe),z(ue)),ye.current===t&&(z(ye),Ul._currentValue=ae)}var it,Rt;function ct(t){if(it===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);it=a&&a[1]||"",Rt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+it+t+Rt}var Gt=!1;function ht(t,a){if(!t||Gt)return"";Gt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(a){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(V){var F=V}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(V){F=V}t.call(ie.prototype)}}else{try{throw Error()}catch(V){F=V}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(V){if(V&&F&&typeof V.stack=="string")return[V.stack,F.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=o.DetermineComponentFrameRoot(),x=h[0],_=h[1];if(x&&_){var A=x.split(`
`),H=_.split(`
`);for(f=o=0;o<A.length&&!A[o].includes("DetermineComponentFrameRoot");)o++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(o===A.length||f===H.length)for(o=A.length-1,f=H.length-1;1<=o&&0<=f&&A[o]!==H[f];)f--;for(;1<=o&&0<=f;o--,f--)if(A[o]!==H[f]){if(o!==1||f!==1)do if(o--,f--,0>f||A[o]!==H[f]){var J=`
`+A[o].replace(" at new "," at ");return t.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",t.displayName)),J}while(1<=o&&0<=f);break}}}finally{Gt=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?ct(l):""}function Jt(t,a){switch(t.tag){case 26:case 27:case 5:return ct(t.type);case 16:return ct("Lazy");case 13:return t.child!==a&&a!==null?ct("Suspense Fallback"):ct("Suspense");case 19:return ct("SuspenseList");case 0:case 15:return ht(t.type,!1);case 11:return ht(t.type.render,!1);case 1:return ht(t.type,!0);case 31:return ct("Activity");default:return""}}function en(t){try{var a="",l=null;do a+=Jt(t,l),l=t,t=t.return;while(t);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Ht=Object.prototype.hasOwnProperty,de=e.unstable_scheduleCallback,ze=e.unstable_cancelCallback,De=e.unstable_shouldYield,We=e.unstable_requestPaint,Ce=e.unstable_now,Zt=e.unstable_getCurrentPriorityLevel,Mn=e.unstable_ImmediatePriority,tn=e.unstable_UserBlockingPriority,W=e.unstable_NormalPriority,me=e.unstable_LowPriority,Ge=e.unstable_IdlePriority,Ye=e.log,cn=e.unstable_setDisableYieldValue,un=null,ut=null;function zt(t){if(typeof Ye=="function"&&cn(t),ut&&typeof ut.setStrictMode=="function")try{ut.setStrictMode(un,t)}catch{}}var kt=Math.clz32?Math.clz32:Vs,tl=Math.log,Gs=Math.LN2;function Vs(t){return t>>>=0,t===0?32:31-(tl(t)/Gs|0)|0}var ha=256,pt=262144,Et=4194304;function X(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function fe(t,a,l){var o=t.pendingLanes;if(o===0)return 0;var f=0,h=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var _=o&134217727;return _!==0?(o=_&~h,o!==0?f=X(o):(x&=_,x!==0?f=X(x):l||(l=_&~t,l!==0&&(f=X(l))))):(_=o&~h,_!==0?f=X(_):x!==0?f=X(x):l||(l=o&~t,l!==0&&(f=X(l)))),f===0?0:a!==0&&a!==f&&(a&h)===0&&(h=f&-f,l=a&-a,h>=l||h===32&&(l&4194048)!==0)?a:f}function Me(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Ae(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xe(){var t=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),t}function Tt(t){for(var a=[],l=0;31>l;l++)a.push(t);return a}function Le(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Pe(t,a,l,o,f,h){var x=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var _=t.entanglements,A=t.expirationTimes,H=t.hiddenUpdates;for(l=x&~l;0<l;){var J=31-kt(l),ie=1<<J;_[J]=0,A[J]=-1;var F=H[J];if(F!==null)for(H[J]=null,J=0;J<F.length;J++){var V=F[J];V!==null&&(V.lane&=-536870913)}l&=~ie}o!==0&&xt(t,o,0),h!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=h&~(x&~a))}function xt(t,a,l){t.pendingLanes|=a,t.suspendedLanes&=~a;var o=31-kt(a);t.entangledLanes|=a,t.entanglements[o]=t.entanglements[o]|1073741824|l&261930}function mt(t,a){var l=t.entangledLanes|=a;for(t=t.entanglements;l;){var o=31-kt(l),f=1<<o;f&a|t[o]&a&&(t[o]|=a),l&=~f}}function we(t,a){var l=a&-a;return l=(l&42)!==0?1:Nn(l),(l&(t.suspendedLanes|a))!==0?0:l}function Nn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function dn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Te(){var t=Y.p;return t!==0?t:(t=window.event,t===void 0?32:Dv(t.type))}function fn(t,a){var l=Y.p;try{return Y.p=t,a()}finally{Y.p=l}}var Qe=Math.random().toString(36).slice(2),Pt="__reactFiber$"+Qe,nn="__reactProps$"+Qe,ma="__reactContainer$"+Qe,Ks="__reactEvents$"+Qe,br="__reactListeners$"+Qe,xr="__reactHandles$"+Qe,nl="__reactResources$"+Qe,qa="__reactMarker$"+Qe;function Fc(t){delete t[Pt],delete t[nn],delete t[Ks],delete t[br],delete t[xr]}function Ws(t){var a=t[Pt];if(a)return a;for(var l=t.parentNode;l;){if(a=l[ma]||l[Pt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(t=mv(t);t!==null;){if(l=t[Pt])return l;t=mv(t)}return a}t=l,l=t.parentNode}return null}function Xs(t){if(t=t[Pt]||t[ma]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function al(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(i(33))}function Qs(t){var a=t[nl];return a||(a=t[nl]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Vt(t){t[qa]=!0}var Vh=new Set,Kh={};function ws(t,a){Js(t,a),Js(t+"Capture",a)}function Js(t,a){for(Kh[t]=a,t=0;t<a.length;t++)Vh.add(a[t])}var kS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Wh={},Xh={};function AS(t){return Ht.call(Xh,t)?!0:Ht.call(Wh,t)?!1:kS.test(t)?Xh[t]=!0:(Wh[t]=!0,!1)}function Sr(t,a,l){if(AS(a))if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var o=a.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+l)}}function wr(t,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+l)}}function ga(t,a,l,o){if(o===null)t.removeAttribute(l);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(a,l,""+o)}}function Bn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qh(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function OS(t,a,l){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,h=o.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return f.call(this)},set:function(x){l=""+x,h.call(this,x)}}),Object.defineProperty(t,a,{enumerable:o.enumerable}),{getValue:function(){return l},setValue:function(x){l=""+x},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Yc(t){if(!t._valueTracker){var a=Qh(t)?"checked":"value";t._valueTracker=OS(t,a,""+t[a])}}function Jh(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var l=a.getValue(),o="";return t&&(o=Qh(t)?t.checked?"true":"false":t.value),t=o,t!==l?(a.setValue(t),!0):!1}function _r(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var zS=/[\n"\\]/g;function Ln(t){return t.replace(zS,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Gc(t,a,l,o,f,h,x,_){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),a!=null?x==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Bn(a)):t.value!==""+Bn(a)&&(t.value=""+Bn(a)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),a!=null?Vc(t,x,Bn(a)):l!=null?Vc(t,x,Bn(l)):o!=null&&t.removeAttribute("value"),f==null&&h!=null&&(t.defaultChecked=!!h),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.name=""+Bn(_):t.removeAttribute("name")}function em(t,a,l,o,f,h,x,_){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.type=h),a!=null||l!=null){if(!(h!=="submit"&&h!=="reset"||a!=null)){Yc(t);return}l=l!=null?""+Bn(l):"",a=a!=null?""+Bn(a):l,_||a===t.value||(t.value=a),t.defaultValue=a}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=_?t.checked:!!o,t.defaultChecked=!!o,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),Yc(t)}function Vc(t,a,l){a==="number"&&_r(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function ei(t,a,l,o){if(t=t.options,a){a={};for(var f=0;f<l.length;f++)a["$"+l[f]]=!0;for(l=0;l<t.length;l++)f=a.hasOwnProperty("$"+t[l].value),t[l].selected!==f&&(t[l].selected=f),f&&o&&(t[l].defaultSelected=!0)}else{for(l=""+Bn(l),a=null,f=0;f<t.length;f++){if(t[f].value===l){t[f].selected=!0,o&&(t[f].defaultSelected=!0);return}a!==null||t[f].disabled||(a=t[f])}a!==null&&(a.selected=!0)}}function tm(t,a,l){if(a!=null&&(a=""+Bn(a),a!==t.value&&(t.value=a),l==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=l!=null?""+Bn(l):""}function nm(t,a,l,o){if(a==null){if(o!=null){if(l!=null)throw Error(i(92));if(Q(o)){if(1<o.length)throw Error(i(93));o=o[0]}l=o}l==null&&(l=""),a=l}l=Bn(a),t.defaultValue=l,o=t.textContent,o===l&&o!==""&&o!==null&&(t.value=o),Yc(t)}function ti(t,a){if(a){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=a;return}}t.textContent=a}var PS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function am(t,a,l){var o=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?o?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":o?t.setProperty(a,l):typeof l!="number"||l===0||PS.has(a)?a==="float"?t.cssFloat=l:t[a]=(""+l).trim():t[a]=l+"px"}function sm(t,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(t=t.style,l!=null){for(var o in l)!l.hasOwnProperty(o)||a!=null&&a.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var f in a)o=a[f],a.hasOwnProperty(f)&&l[f]!==o&&am(t,f,o)}else for(var h in a)a.hasOwnProperty(h)&&am(t,h,a[h])}function Kc(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var IS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),BS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Er(t){return BS.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function pa(){}var Wc=null;function Xc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ni=null,ai=null;function im(t){var a=Xs(t);if(a&&(t=a.stateNode)){var l=t[nn]||null;e:switch(t=a.stateNode,a.type){case"input":if(Gc(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ln(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var o=l[a];if(o!==t&&o.form===t.form){var f=o[nn]||null;if(!f)throw Error(i(90));Gc(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<l.length;a++)o=l[a],o.form===t.form&&Jh(o)}break e;case"textarea":tm(t,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&ei(t,!!l.multiple,a,!1)}}}var Qc=!1;function lm(t,a,l){if(Qc)return t(a,l);Qc=!0;try{var o=t(a);return o}finally{if(Qc=!1,(ni!==null||ai!==null)&&(fo(),ni&&(a=ni,t=ai,ai=ni=null,im(a),t)))for(a=0;a<t.length;a++)im(t[a])}}function sl(t,a){var l=t.stateNode;if(l===null)return null;var o=l[nn]||null;if(o===null)return null;l=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jc=!1;if(va)try{var il={};Object.defineProperty(il,"passive",{get:function(){Jc=!0}}),window.addEventListener("test",il,il),window.removeEventListener("test",il,il)}catch{Jc=!1}var Ua=null,eu=null,Tr=null;function rm(){if(Tr)return Tr;var t,a=eu,l=a.length,o,f="value"in Ua?Ua.value:Ua.textContent,h=f.length;for(t=0;t<l&&a[t]===f[t];t++);var x=l-t;for(o=1;o<=x&&a[l-o]===f[h-o];o++);return Tr=f.slice(t,1<o?1-o:void 0)}function Mr(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function Nr(){return!0}function om(){return!1}function vn(t){function a(l,o,f,h,x){this._reactName=l,this._targetInst=f,this.type=o,this.nativeEvent=h,this.target=x,this.currentTarget=null;for(var _ in t)t.hasOwnProperty(_)&&(l=t[_],this[_]=l?l(h):h[_]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Nr:om,this.isPropagationStopped=om,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Nr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Nr)},persist:function(){},isPersistent:Nr}),a}var _s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jr=vn(_s),ll=v({},_s,{view:0,detail:0}),LS=vn(ll),tu,nu,rl,Cr=v({},ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:su,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rl&&(rl&&t.type==="mousemove"?(tu=t.screenX-rl.screenX,nu=t.screenY-rl.screenY):nu=tu=0,rl=t),tu)},movementY:function(t){return"movementY"in t?t.movementY:nu}}),cm=vn(Cr),qS=v({},Cr,{dataTransfer:0}),US=vn(qS),$S=v({},ll,{relatedTarget:0}),au=vn($S),HS=v({},_s,{animationName:0,elapsedTime:0,pseudoElement:0}),ZS=vn(HS),FS=v({},_s,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YS=vn(FS),GS=v({},_s,{data:0}),um=vn(GS),VS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XS(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=WS[t])?!!a[t]:!1}function su(){return XS}var QS=v({},ll,{key:function(t){if(t.key){var a=VS[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Mr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?KS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:su,charCode:function(t){return t.type==="keypress"?Mr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),JS=vn(QS),e1=v({},Cr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dm=vn(e1),t1=v({},ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:su}),n1=vn(t1),a1=v({},_s,{propertyName:0,elapsedTime:0,pseudoElement:0}),s1=vn(a1),i1=v({},Cr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),l1=vn(i1),r1=v({},_s,{newState:0,oldState:0}),o1=vn(r1),c1=[9,13,27,32],iu=va&&"CompositionEvent"in window,ol=null;va&&"documentMode"in document&&(ol=document.documentMode);var u1=va&&"TextEvent"in window&&!ol,fm=va&&(!iu||ol&&8<ol&&11>=ol),hm=" ",mm=!1;function gm(t,a){switch(t){case"keyup":return c1.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var si=!1;function d1(t,a){switch(t){case"compositionend":return pm(a);case"keypress":return a.which!==32?null:(mm=!0,hm);case"textInput":return t=a.data,t===hm&&mm?null:t;default:return null}}function f1(t,a){if(si)return t==="compositionend"||!iu&&gm(t,a)?(t=rm(),Tr=eu=Ua=null,si=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return fm&&a.locale!=="ko"?null:a.data;default:return null}}var h1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vm(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!h1[t.type]:a==="textarea"}function ym(t,a,l,o){ni?ai?ai.push(o):ai=[o]:ni=o,a=bo(a,"onChange"),0<a.length&&(l=new jr("onChange","change",null,l,o),t.push({event:l,listeners:a}))}var cl=null,ul=null;function m1(t){ev(t,0)}function Dr(t){var a=al(t);if(Jh(a))return t}function bm(t,a){if(t==="change")return a}var xm=!1;if(va){var lu;if(va){var ru="oninput"in document;if(!ru){var Sm=document.createElement("div");Sm.setAttribute("oninput","return;"),ru=typeof Sm.oninput=="function"}lu=ru}else lu=!1;xm=lu&&(!document.documentMode||9<document.documentMode)}function wm(){cl&&(cl.detachEvent("onpropertychange",_m),ul=cl=null)}function _m(t){if(t.propertyName==="value"&&Dr(ul)){var a=[];ym(a,ul,t,Xc(t)),lm(m1,a)}}function g1(t,a,l){t==="focusin"?(wm(),cl=a,ul=l,cl.attachEvent("onpropertychange",_m)):t==="focusout"&&wm()}function p1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dr(ul)}function v1(t,a){if(t==="click")return Dr(a)}function y1(t,a){if(t==="input"||t==="change")return Dr(a)}function b1(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var jn=typeof Object.is=="function"?Object.is:b1;function dl(t,a){if(jn(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var l=Object.keys(t),o=Object.keys(a);if(l.length!==o.length)return!1;for(o=0;o<l.length;o++){var f=l[o];if(!Ht.call(a,f)||!jn(t[f],a[f]))return!1}return!0}function Em(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Tm(t,a){var l=Em(t);t=0;for(var o;l;){if(l.nodeType===3){if(o=t+l.textContent.length,t<=a&&o>=a)return{node:l,offset:a-t};t=o}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Em(l)}}function Mm(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Mm(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function Nm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=_r(t.document);a instanceof t.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)t=a.contentWindow;else break;a=_r(t.document)}return a}function ou(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var x1=va&&"documentMode"in document&&11>=document.documentMode,ii=null,cu=null,fl=null,uu=!1;function jm(t,a,l){var o=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;uu||ii==null||ii!==_r(o)||(o=ii,"selectionStart"in o&&ou(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),fl&&dl(fl,o)||(fl=o,o=bo(cu,"onSelect"),0<o.length&&(a=new jr("onSelect","select",null,a,l),t.push({event:a,listeners:o}),a.target=ii)))}function Es(t,a){var l={};return l[t.toLowerCase()]=a.toLowerCase(),l["Webkit"+t]="webkit"+a,l["Moz"+t]="moz"+a,l}var li={animationend:Es("Animation","AnimationEnd"),animationiteration:Es("Animation","AnimationIteration"),animationstart:Es("Animation","AnimationStart"),transitionrun:Es("Transition","TransitionRun"),transitionstart:Es("Transition","TransitionStart"),transitioncancel:Es("Transition","TransitionCancel"),transitionend:Es("Transition","TransitionEnd")},du={},Cm={};va&&(Cm=document.createElement("div").style,"AnimationEvent"in window||(delete li.animationend.animation,delete li.animationiteration.animation,delete li.animationstart.animation),"TransitionEvent"in window||delete li.transitionend.transition);function Ts(t){if(du[t])return du[t];if(!li[t])return t;var a=li[t],l;for(l in a)if(a.hasOwnProperty(l)&&l in Cm)return du[t]=a[l];return t}var Dm=Ts("animationend"),Rm=Ts("animationiteration"),km=Ts("animationstart"),S1=Ts("transitionrun"),w1=Ts("transitionstart"),_1=Ts("transitioncancel"),Am=Ts("transitionend"),Om=new Map,fu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");fu.push("scrollEnd");function Wn(t,a){Om.set(t,a),ws(a,[t])}var Rr=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},qn=[],ri=0,hu=0;function kr(){for(var t=ri,a=hu=ri=0;a<t;){var l=qn[a];qn[a++]=null;var o=qn[a];qn[a++]=null;var f=qn[a];qn[a++]=null;var h=qn[a];if(qn[a++]=null,o!==null&&f!==null){var x=o.pending;x===null?f.next=f:(f.next=x.next,x.next=f),o.pending=f}h!==0&&zm(l,f,h)}}function Ar(t,a,l,o){qn[ri++]=t,qn[ri++]=a,qn[ri++]=l,qn[ri++]=o,hu|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function mu(t,a,l,o){return Ar(t,a,l,o),Or(t)}function Ms(t,a){return Ar(t,null,null,a),Or(t)}function zm(t,a,l){t.lanes|=l;var o=t.alternate;o!==null&&(o.lanes|=l);for(var f=!1,h=t.return;h!==null;)h.childLanes|=l,o=h.alternate,o!==null&&(o.childLanes|=l),h.tag===22&&(t=h.stateNode,t===null||t._visibility&1||(f=!0)),t=h,h=h.return;return t.tag===3?(h=t.stateNode,f&&a!==null&&(f=31-kt(l),t=h.hiddenUpdates,o=t[f],o===null?t[f]=[a]:o.push(a),a.lane=l|536870912),h):null}function Or(t){if(50<Ol)throw Ol=0,_d=null,Error(i(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var oi={};function E1(t,a,l,o){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,a,l,o){return new E1(t,a,l,o)}function gu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ya(t,a){var l=t.alternate;return l===null?(l=Cn(t.tag,a,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=a,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,a=t.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function Pm(t,a){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,a=l.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function zr(t,a,l,o,f,h){var x=0;if(o=t,typeof t=="function")gu(t)&&(x=1);else if(typeof t=="string")x=Cw(t,l,oe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case K:return t=Cn(31,l,a,f),t.elementType=K,t.lanes=h,t;case E:return Ns(l.children,f,h,a);case C:x=8,f|=24;break;case O:return t=Cn(12,l,a,f|2),t.elementType=O,t.lanes=h,t;case q:return t=Cn(13,l,a,f),t.elementType=q,t.lanes=h,t;case N:return t=Cn(19,l,a,f),t.elementType=N,t.lanes=h,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case I:x=10;break e;case R:x=9;break e;case B:x=11;break e;case j:x=14;break e;case D:x=16,o=null;break e}x=29,l=Error(i(130,t===null?"null":typeof t,"")),o=null}return a=Cn(x,l,a,f),a.elementType=t,a.type=o,a.lanes=h,a}function Ns(t,a,l,o){return t=Cn(7,t,o,a),t.lanes=l,t}function pu(t,a,l){return t=Cn(6,t,null,a),t.lanes=l,t}function Im(t){var a=Cn(18,null,null,0);return a.stateNode=t,a}function vu(t,a,l){return a=Cn(4,t.children!==null?t.children:[],t.key,a),a.lanes=l,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Bm=new WeakMap;function Un(t,a){if(typeof t=="object"&&t!==null){var l=Bm.get(t);return l!==void 0?l:(a={value:t,source:a,stack:en(a)},Bm.set(t,a),a)}return{value:t,source:a,stack:en(a)}}var ci=[],ui=0,Pr=null,hl=0,$n=[],Hn=0,$a=null,la=1,ra="";function ba(t,a){ci[ui++]=hl,ci[ui++]=Pr,Pr=t,hl=a}function Lm(t,a,l){$n[Hn++]=la,$n[Hn++]=ra,$n[Hn++]=$a,$a=t;var o=la;t=ra;var f=32-kt(o)-1;o&=~(1<<f),l+=1;var h=32-kt(a)+f;if(30<h){var x=f-f%5;h=(o&(1<<x)-1).toString(32),o>>=x,f-=x,la=1<<32-kt(a)+f|l<<f|o,ra=h+t}else la=1<<h|l<<f|o,ra=t}function yu(t){t.return!==null&&(ba(t,1),Lm(t,1,0))}function bu(t){for(;t===Pr;)Pr=ci[--ui],ci[ui]=null,hl=ci[--ui],ci[ui]=null;for(;t===$a;)$a=$n[--Hn],$n[Hn]=null,ra=$n[--Hn],$n[Hn]=null,la=$n[--Hn],$n[Hn]=null}function qm(t,a){$n[Hn++]=la,$n[Hn++]=ra,$n[Hn++]=$a,la=a.id,ra=a.overflow,$a=t}var an=null,vt=null,Ze=!1,Ha=null,Zn=!1,xu=Error(i(519));function Za(t){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ml(Un(a,t)),xu}function Um(t){var a=t.stateNode,l=t.type,o=t.memoizedProps;switch(a[Pt]=t,a[nn]=o,l){case"dialog":Ue("cancel",a),Ue("close",a);break;case"iframe":case"object":case"embed":Ue("load",a);break;case"video":case"audio":for(l=0;l<Pl.length;l++)Ue(Pl[l],a);break;case"source":Ue("error",a);break;case"img":case"image":case"link":Ue("error",a),Ue("load",a);break;case"details":Ue("toggle",a);break;case"input":Ue("invalid",a),em(a,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ue("invalid",a);break;case"textarea":Ue("invalid",a),nm(a,o.value,o.defaultValue,o.children)}l=o.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||o.suppressHydrationWarning===!0||sv(a.textContent,l)?(o.popover!=null&&(Ue("beforetoggle",a),Ue("toggle",a)),o.onScroll!=null&&Ue("scroll",a),o.onScrollEnd!=null&&Ue("scrollend",a),o.onClick!=null&&(a.onclick=pa),a=!0):a=!1,a||Za(t,!0)}function $m(t){for(an=t.return;an;)switch(an.tag){case 5:case 31:case 13:Zn=!1;return;case 27:case 3:Zn=!0;return;default:an=an.return}}function di(t){if(t!==an)return!1;if(!Ze)return $m(t),Ze=!0,!1;var a=t.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||Bd(t.type,t.memoizedProps)),l=!l),l&&vt&&Za(t),$m(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));vt=hv(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));vt=hv(t)}else a===27?(a=vt,ss(t.type)?(t=Hd,Hd=null,vt=t):vt=a):vt=an?Yn(t.stateNode.nextSibling):null;return!0}function js(){vt=an=null,Ze=!1}function Su(){var t=Ha;return t!==null&&(Sn===null?Sn=t:Sn.push.apply(Sn,t),Ha=null),t}function ml(t){Ha===null?Ha=[t]:Ha.push(t)}var wu=M(null),Cs=null,xa=null;function Fa(t,a,l){ee(wu,a._currentValue),a._currentValue=l}function Sa(t){t._currentValue=wu.current,z(wu)}function _u(t,a,l){for(;t!==null;){var o=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),t===l)break;t=t.return}}function Eu(t,a,l,o){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var h=f.dependencies;if(h!==null){var x=f.child;h=h.firstContext;e:for(;h!==null;){var _=h;h=f;for(var A=0;A<a.length;A++)if(_.context===a[A]){h.lanes|=l,_=h.alternate,_!==null&&(_.lanes|=l),_u(h.return,l,t),o||(x=null);break e}h=_.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(i(341));x.lanes|=l,h=x.alternate,h!==null&&(h.lanes|=l),_u(x,l,t),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===t){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function fi(t,a,l,o){t=null;for(var f=a,h=!1;f!==null;){if(!h){if((f.flags&524288)!==0)h=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var _=f.type;jn(f.pendingProps.value,x.value)||(t!==null?t.push(_):t=[_])}}else if(f===ye.current){if(x=f.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Ul):t=[Ul])}f=f.return}t!==null&&Eu(a,t,l,o),a.flags|=262144}function Ir(t){for(t=t.firstContext;t!==null;){if(!jn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ds(t){Cs=t,xa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function sn(t){return Hm(Cs,t)}function Br(t,a){return Cs===null&&Ds(t),Hm(t,a)}function Hm(t,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},xa===null){if(t===null)throw Error(i(308));xa=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else xa=xa.next=a;return l}var T1=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(l,o){t.push(o)}};this.abort=function(){a.aborted=!0,t.forEach(function(l){return l()})}},M1=e.unstable_scheduleCallback,N1=e.unstable_NormalPriority,It={$$typeof:I,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Tu(){return{controller:new T1,data:new Map,refCount:0}}function gl(t){t.refCount--,t.refCount===0&&M1(N1,function(){t.controller.abort()})}var pl=null,Mu=0,hi=0,mi=null;function j1(t,a){if(pl===null){var l=pl=[];Mu=0,hi=Cd(),mi={status:"pending",value:void 0,then:function(o){l.push(o)}}}return Mu++,a.then(Zm,Zm),a}function Zm(){if(--Mu===0&&pl!==null){mi!==null&&(mi.status="fulfilled");var t=pl;pl=null,hi=0,mi=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function C1(t,a){var l=[],o={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return t.then(function(){o.status="fulfilled",o.value=a;for(var f=0;f<l.length;f++)(0,l[f])(a)},function(f){for(o.status="rejected",o.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),o}var Fm=L.S;L.S=function(t,a){jp=Ce(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&j1(t,a),Fm!==null&&Fm(t,a)};var Rs=M(null);function Nu(){var t=Rs.current;return t!==null?t:dt.pooledCache}function Lr(t,a){a===null?ee(Rs,Rs.current):ee(Rs,a.pool)}function Ym(){var t=Nu();return t===null?null:{parent:It._currentValue,pool:t}}var gi=Error(i(460)),ju=Error(i(474)),qr=Error(i(542)),Ur={then:function(){}};function Gm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Vm(t,a,l){switch(l=t[l],l===void 0?t.push(a):l!==a&&(a.then(pa,pa),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Wm(t),t;default:if(typeof a.status=="string")a.then(pa,pa);else{if(t=dt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=a,t.status="pending",t.then(function(o){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=o}},function(o){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=o}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Wm(t),t}throw As=a,gi}}function ks(t){try{var a=t._init;return a(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(As=l,gi):l}}var As=null;function Km(){if(As===null)throw Error(i(459));var t=As;return As=null,t}function Wm(t){if(t===gi||t===qr)throw Error(i(483))}var pi=null,vl=0;function $r(t){var a=vl;return vl+=1,pi===null&&(pi=[]),Vm(pi,t,a)}function yl(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Hr(t,a){throw a.$$typeof===b?Error(i(525)):(t=Object.prototype.toString.call(a),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function Xm(t){function a(U,P){if(t){var $=U.deletions;$===null?(U.deletions=[P],U.flags|=16):$.push(P)}}function l(U,P){if(!t)return null;for(;P!==null;)a(U,P),P=P.sibling;return null}function o(U){for(var P=new Map;U!==null;)U.key!==null?P.set(U.key,U):P.set(U.index,U),U=U.sibling;return P}function f(U,P){return U=ya(U,P),U.index=0,U.sibling=null,U}function h(U,P,$){return U.index=$,t?($=U.alternate,$!==null?($=$.index,$<P?(U.flags|=67108866,P):$):(U.flags|=67108866,P)):(U.flags|=1048576,P)}function x(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function _(U,P,$,te){return P===null||P.tag!==6?(P=pu($,U.mode,te),P.return=U,P):(P=f(P,$),P.return=U,P)}function A(U,P,$,te){var xe=$.type;return xe===E?J(U,P,$.props.children,te,$.key):P!==null&&(P.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===D&&ks(xe)===P.type)?(P=f(P,$.props),yl(P,$),P.return=U,P):(P=zr($.type,$.key,$.props,null,U.mode,te),yl(P,$),P.return=U,P)}function H(U,P,$,te){return P===null||P.tag!==4||P.stateNode.containerInfo!==$.containerInfo||P.stateNode.implementation!==$.implementation?(P=vu($,U.mode,te),P.return=U,P):(P=f(P,$.children||[]),P.return=U,P)}function J(U,P,$,te,xe){return P===null||P.tag!==7?(P=Ns($,U.mode,te,xe),P.return=U,P):(P=f(P,$),P.return=U,P)}function ie(U,P,$){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=pu(""+P,U.mode,$),P.return=U,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case S:return $=zr(P.type,P.key,P.props,null,U.mode,$),yl($,P),$.return=U,$;case T:return P=vu(P,U.mode,$),P.return=U,P;case D:return P=ks(P),ie(U,P,$)}if(Q(P)||se(P))return P=Ns(P,U.mode,$,null),P.return=U,P;if(typeof P.then=="function")return ie(U,$r(P),$);if(P.$$typeof===I)return ie(U,Br(U,P),$);Hr(U,P)}return null}function F(U,P,$,te){var xe=P!==null?P.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return xe!==null?null:_(U,P,""+$,te);if(typeof $=="object"&&$!==null){switch($.$$typeof){case S:return $.key===xe?A(U,P,$,te):null;case T:return $.key===xe?H(U,P,$,te):null;case D:return $=ks($),F(U,P,$,te)}if(Q($)||se($))return xe!==null?null:J(U,P,$,te,null);if(typeof $.then=="function")return F(U,P,$r($),te);if($.$$typeof===I)return F(U,P,Br(U,$),te);Hr(U,$)}return null}function V(U,P,$,te,xe){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return U=U.get($)||null,_(P,U,""+te,xe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case S:return U=U.get(te.key===null?$:te.key)||null,A(P,U,te,xe);case T:return U=U.get(te.key===null?$:te.key)||null,H(P,U,te,xe);case D:return te=ks(te),V(U,P,$,te,xe)}if(Q(te)||se(te))return U=U.get($)||null,J(P,U,te,xe,null);if(typeof te.then=="function")return V(U,P,$,$r(te),xe);if(te.$$typeof===I)return V(U,P,$,Br(P,te),xe);Hr(P,te)}return null}function pe(U,P,$,te){for(var xe=null,Ve=null,ve=P,Oe=P=0,He=null;ve!==null&&Oe<$.length;Oe++){ve.index>Oe?(He=ve,ve=null):He=ve.sibling;var Ke=F(U,ve,$[Oe],te);if(Ke===null){ve===null&&(ve=He);break}t&&ve&&Ke.alternate===null&&a(U,ve),P=h(Ke,P,Oe),Ve===null?xe=Ke:Ve.sibling=Ke,Ve=Ke,ve=He}if(Oe===$.length)return l(U,ve),Ze&&ba(U,Oe),xe;if(ve===null){for(;Oe<$.length;Oe++)ve=ie(U,$[Oe],te),ve!==null&&(P=h(ve,P,Oe),Ve===null?xe=ve:Ve.sibling=ve,Ve=ve);return Ze&&ba(U,Oe),xe}for(ve=o(ve);Oe<$.length;Oe++)He=V(ve,U,Oe,$[Oe],te),He!==null&&(t&&He.alternate!==null&&ve.delete(He.key===null?Oe:He.key),P=h(He,P,Oe),Ve===null?xe=He:Ve.sibling=He,Ve=He);return t&&ve.forEach(function(cs){return a(U,cs)}),Ze&&ba(U,Oe),xe}function Ee(U,P,$,te){if($==null)throw Error(i(151));for(var xe=null,Ve=null,ve=P,Oe=P=0,He=null,Ke=$.next();ve!==null&&!Ke.done;Oe++,Ke=$.next()){ve.index>Oe?(He=ve,ve=null):He=ve.sibling;var cs=F(U,ve,Ke.value,te);if(cs===null){ve===null&&(ve=He);break}t&&ve&&cs.alternate===null&&a(U,ve),P=h(cs,P,Oe),Ve===null?xe=cs:Ve.sibling=cs,Ve=cs,ve=He}if(Ke.done)return l(U,ve),Ze&&ba(U,Oe),xe;if(ve===null){for(;!Ke.done;Oe++,Ke=$.next())Ke=ie(U,Ke.value,te),Ke!==null&&(P=h(Ke,P,Oe),Ve===null?xe=Ke:Ve.sibling=Ke,Ve=Ke);return Ze&&ba(U,Oe),xe}for(ve=o(ve);!Ke.done;Oe++,Ke=$.next())Ke=V(ve,U,Oe,Ke.value,te),Ke!==null&&(t&&Ke.alternate!==null&&ve.delete(Ke.key===null?Oe:Ke.key),P=h(Ke,P,Oe),Ve===null?xe=Ke:Ve.sibling=Ke,Ve=Ke);return t&&ve.forEach(function(qw){return a(U,qw)}),Ze&&ba(U,Oe),xe}function ot(U,P,$,te){if(typeof $=="object"&&$!==null&&$.type===E&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case S:e:{for(var xe=$.key;P!==null;){if(P.key===xe){if(xe=$.type,xe===E){if(P.tag===7){l(U,P.sibling),te=f(P,$.props.children),te.return=U,U=te;break e}}else if(P.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===D&&ks(xe)===P.type){l(U,P.sibling),te=f(P,$.props),yl(te,$),te.return=U,U=te;break e}l(U,P);break}else a(U,P);P=P.sibling}$.type===E?(te=Ns($.props.children,U.mode,te,$.key),te.return=U,U=te):(te=zr($.type,$.key,$.props,null,U.mode,te),yl(te,$),te.return=U,U=te)}return x(U);case T:e:{for(xe=$.key;P!==null;){if(P.key===xe)if(P.tag===4&&P.stateNode.containerInfo===$.containerInfo&&P.stateNode.implementation===$.implementation){l(U,P.sibling),te=f(P,$.children||[]),te.return=U,U=te;break e}else{l(U,P);break}else a(U,P);P=P.sibling}te=vu($,U.mode,te),te.return=U,U=te}return x(U);case D:return $=ks($),ot(U,P,$,te)}if(Q($))return pe(U,P,$,te);if(se($)){if(xe=se($),typeof xe!="function")throw Error(i(150));return $=xe.call($),Ee(U,P,$,te)}if(typeof $.then=="function")return ot(U,P,$r($),te);if($.$$typeof===I)return ot(U,P,Br(U,$),te);Hr(U,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,P!==null&&P.tag===6?(l(U,P.sibling),te=f(P,$),te.return=U,U=te):(l(U,P),te=pu($,U.mode,te),te.return=U,U=te),x(U)):l(U,P)}return function(U,P,$,te){try{vl=0;var xe=ot(U,P,$,te);return pi=null,xe}catch(ve){if(ve===gi||ve===qr)throw ve;var Ve=Cn(29,ve,null,U.mode);return Ve.lanes=te,Ve.return=U,Ve}}}var Os=Xm(!0),Qm=Xm(!1),Ya=!1;function Cu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Du(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ga(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Va(t,a,l){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Je&2)!==0){var f=o.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),o.pending=a,a=Or(t),zm(t,null,l),a}return Ar(t,o,a,l),Or(t)}function bl(t,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var o=a.lanes;o&=t.pendingLanes,l|=o,a.lanes=l,mt(t,l)}}function Ru(t,a){var l=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,l===o)){var f=null,h=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};h===null?f=h=x:h=h.next=x,l=l.next}while(l!==null);h===null?f=h=a:h=h.next=a}else f=h=a;l={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:h,shared:o.shared,callbacks:o.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=a:t.next=a,l.lastBaseUpdate=a}var ku=!1;function xl(){if(ku){var t=mi;if(t!==null)throw t}}function Sl(t,a,l,o){ku=!1;var f=t.updateQueue;Ya=!1;var h=f.firstBaseUpdate,x=f.lastBaseUpdate,_=f.shared.pending;if(_!==null){f.shared.pending=null;var A=_,H=A.next;A.next=null,x===null?h=H:x.next=H,x=A;var J=t.alternate;J!==null&&(J=J.updateQueue,_=J.lastBaseUpdate,_!==x&&(_===null?J.firstBaseUpdate=H:_.next=H,J.lastBaseUpdate=A))}if(h!==null){var ie=f.baseState;x=0,J=H=A=null,_=h;do{var F=_.lane&-536870913,V=F!==_.lane;if(V?($e&F)===F:(o&F)===F){F!==0&&F===hi&&(ku=!0),J!==null&&(J=J.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var pe=t,Ee=_;F=a;var ot=l;switch(Ee.tag){case 1:if(pe=Ee.payload,typeof pe=="function"){ie=pe.call(ot,ie,F);break e}ie=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Ee.payload,F=typeof pe=="function"?pe.call(ot,ie,F):pe,F==null)break e;ie=v({},ie,F);break e;case 2:Ya=!0}}F=_.callback,F!==null&&(t.flags|=64,V&&(t.flags|=8192),V=f.callbacks,V===null?f.callbacks=[F]:V.push(F))}else V={lane:F,tag:_.tag,payload:_.payload,callback:_.callback,next:null},J===null?(H=J=V,A=ie):J=J.next=V,x|=F;if(_=_.next,_===null){if(_=f.shared.pending,_===null)break;V=_,_=V.next,V.next=null,f.lastBaseUpdate=V,f.shared.pending=null}}while(!0);J===null&&(A=ie),f.baseState=A,f.firstBaseUpdate=H,f.lastBaseUpdate=J,h===null&&(f.shared.lanes=0),Ja|=x,t.lanes=x,t.memoizedState=ie}}function Jm(t,a){if(typeof t!="function")throw Error(i(191,t));t.call(a)}function eg(t,a){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)Jm(l[t],a)}var vi=M(null),Zr=M(0);function tg(t,a){t=Da,ee(Zr,t),ee(vi,a),Da=t|a.baseLanes}function Au(){ee(Zr,Da),ee(vi,vi.current)}function Ou(){Da=Zr.current,z(vi),z(Zr)}var Dn=M(null),Fn=null;function Ka(t){var a=t.alternate;ee(At,At.current&1),ee(Dn,t),Fn===null&&(a===null||vi.current!==null||a.memoizedState!==null)&&(Fn=t)}function zu(t){ee(At,At.current),ee(Dn,t),Fn===null&&(Fn=t)}function ng(t){t.tag===22?(ee(At,At.current),ee(Dn,t),Fn===null&&(Fn=t)):Wa()}function Wa(){ee(At,At.current),ee(Dn,Dn.current)}function Rn(t){z(Dn),Fn===t&&(Fn=null),z(At)}var At=M(0);function Fr(t){for(var a=t;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Ud(l)||$d(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var wa=0,Re=null,lt=null,Bt=null,Yr=!1,yi=!1,zs=!1,Gr=0,wl=0,bi=null,D1=0;function Nt(){throw Error(i(321))}function Pu(t,a){if(a===null)return!1;for(var l=0;l<a.length&&l<t.length;l++)if(!jn(t[l],a[l]))return!1;return!0}function Iu(t,a,l,o,f,h){return wa=h,Re=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,L.H=t===null||t.memoizedState===null?Lg:Qu,zs=!1,h=l(o,f),zs=!1,yi&&(h=sg(a,l,o,f)),ag(t),h}function ag(t){L.H=Tl;var a=lt!==null&&lt.next!==null;if(wa=0,Bt=lt=Re=null,Yr=!1,wl=0,bi=null,a)throw Error(i(300));t===null||Lt||(t=t.dependencies,t!==null&&Ir(t)&&(Lt=!0))}function sg(t,a,l,o){Re=t;var f=0;do{if(yi&&(bi=null),wl=0,yi=!1,25<=f)throw Error(i(301));if(f+=1,Bt=lt=null,t.updateQueue!=null){var h=t.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}L.H=qg,h=a(l,o)}while(yi);return h}function R1(){var t=L.H,a=t.useState()[0];return a=typeof a.then=="function"?_l(a):a,t=t.useState()[0],(lt!==null?lt.memoizedState:null)!==t&&(Re.flags|=1024),a}function Bu(){var t=Gr!==0;return Gr=0,t}function Lu(t,a,l){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~l}function qu(t){if(Yr){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Yr=!1}wa=0,Bt=lt=Re=null,yi=!1,wl=Gr=0,bi=null}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Re.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function Ot(){if(lt===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var a=Bt===null?Re.memoizedState:Bt.next;if(a!==null)Bt=a,lt=t;else{if(t===null)throw Re.alternate===null?Error(i(467)):Error(i(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Bt===null?Re.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function Vr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _l(t){var a=wl;return wl+=1,bi===null&&(bi=[]),t=Vm(bi,t,a),a=Re,(Bt===null?a.memoizedState:Bt.next)===null&&(a=a.alternate,L.H=a===null||a.memoizedState===null?Lg:Qu),t}function Kr(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return _l(t);if(t.$$typeof===I)return sn(t)}throw Error(i(438,String(t)))}function Uu(t){var a=null,l=Re.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var o=Re.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(a={data:o.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Vr(),Re.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(t),o=0;o<t;o++)l[o]=re;return a.index++,l}function _a(t,a){return typeof a=="function"?a(t):a}function Wr(t){var a=Ot();return $u(a,lt,t)}function $u(t,a,l){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=l;var f=t.baseQueue,h=o.pending;if(h!==null){if(f!==null){var x=f.next;f.next=h.next,h.next=x}a.baseQueue=f=h,o.pending=null}if(h=t.baseState,f===null)t.memoizedState=h;else{a=f.next;var _=x=null,A=null,H=a,J=!1;do{var ie=H.lane&-536870913;if(ie!==H.lane?($e&ie)===ie:(wa&ie)===ie){var F=H.revertLane;if(F===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ie===hi&&(J=!0);else if((wa&F)===F){H=H.next,F===hi&&(J=!0);continue}else ie={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},A===null?(_=A=ie,x=h):A=A.next=ie,Re.lanes|=F,Ja|=F;ie=H.action,zs&&l(h,ie),h=H.hasEagerState?H.eagerState:l(h,ie)}else F={lane:ie,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},A===null?(_=A=F,x=h):A=A.next=F,Re.lanes|=ie,Ja|=ie;H=H.next}while(H!==null&&H!==a);if(A===null?x=h:A.next=_,!jn(h,t.memoizedState)&&(Lt=!0,J&&(l=mi,l!==null)))throw l;t.memoizedState=h,t.baseState=x,t.baseQueue=A,o.lastRenderedState=h}return f===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Hu(t){var a=Ot(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=t;var o=l.dispatch,f=l.pending,h=a.memoizedState;if(f!==null){l.pending=null;var x=f=f.next;do h=t(h,x.action),x=x.next;while(x!==f);jn(h,a.memoizedState)||(Lt=!0),a.memoizedState=h,a.baseQueue===null&&(a.baseState=h),l.lastRenderedState=h}return[h,o]}function ig(t,a,l){var o=Re,f=Ot(),h=Ze;if(h){if(l===void 0)throw Error(i(407));l=l()}else l=a();var x=!jn((lt||f).memoizedState,l);if(x&&(f.memoizedState=l,Lt=!0),f=f.queue,Yu(og.bind(null,o,f,t),[t]),f.getSnapshot!==a||x||Bt!==null&&Bt.memoizedState.tag&1){if(o.flags|=2048,xi(9,{destroy:void 0},rg.bind(null,o,f,l,a),null),dt===null)throw Error(i(349));h||(wa&127)!==0||lg(o,a,l)}return l}function lg(t,a,l){t.flags|=16384,t={getSnapshot:a,value:l},a=Re.updateQueue,a===null?(a=Vr(),Re.updateQueue=a,a.stores=[t]):(l=a.stores,l===null?a.stores=[t]:l.push(t))}function rg(t,a,l,o){a.value=l,a.getSnapshot=o,cg(a)&&ug(t)}function og(t,a,l){return l(function(){cg(a)&&ug(t)})}function cg(t){var a=t.getSnapshot;t=t.value;try{var l=a();return!jn(t,l)}catch{return!0}}function ug(t){var a=Ms(t,2);a!==null&&wn(a,t,2)}function Zu(t){var a=mn();if(typeof t=="function"){var l=t;if(t=l(),zs){zt(!0);try{l()}finally{zt(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:t},a}function dg(t,a,l,o){return t.baseState=l,$u(t,lt,typeof o=="function"?o:_a)}function k1(t,a,l,o,f){if(Jr(t))throw Error(i(485));if(t=a.action,t!==null){var h={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){h.listeners.push(x)}};L.T!==null?l(!0):h.isTransition=!1,o(h),l=a.pending,l===null?(h.next=a.pending=h,fg(a,h)):(h.next=l.next,a.pending=l.next=h)}}function fg(t,a){var l=a.action,o=a.payload,f=t.state;if(a.isTransition){var h=L.T,x={};L.T=x;try{var _=l(f,o),A=L.S;A!==null&&A(x,_),hg(t,a,_)}catch(H){Fu(t,a,H)}finally{h!==null&&x.types!==null&&(h.types=x.types),L.T=h}}else try{h=l(f,o),hg(t,a,h)}catch(H){Fu(t,a,H)}}function hg(t,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(o){mg(t,a,o)},function(o){return Fu(t,a,o)}):mg(t,a,l)}function mg(t,a,l){a.status="fulfilled",a.value=l,gg(a),t.state=l,a=t.pending,a!==null&&(l=a.next,l===a?t.pending=null:(l=l.next,a.next=l,fg(t,l)))}function Fu(t,a,l){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do a.status="rejected",a.reason=l,gg(a),a=a.next;while(a!==o)}t.action=null}function gg(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function pg(t,a){return a}function vg(t,a){if(Ze){var l=dt.formState;if(l!==null){e:{var o=Re;if(Ze){if(vt){t:{for(var f=vt,h=Zn;f.nodeType!==8;){if(!h){f=null;break t}if(f=Yn(f.nextSibling),f===null){f=null;break t}}h=f.data,f=h==="F!"||h==="F"?f:null}if(f){vt=Yn(f.nextSibling),o=f.data==="F!";break e}}Za(o)}o=!1}o&&(a=l[0])}}return l=mn(),l.memoizedState=l.baseState=a,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pg,lastRenderedState:a},l.queue=o,l=Pg.bind(null,Re,o),o.dispatch=l,o=Zu(!1),h=Xu.bind(null,Re,!1,o.queue),o=mn(),f={state:a,dispatch:null,action:t,pending:null},o.queue=f,l=k1.bind(null,Re,f,h,l),f.dispatch=l,o.memoizedState=t,[a,l,!1]}function yg(t){var a=Ot();return bg(a,lt,t)}function bg(t,a,l){if(a=$u(t,a,pg)[0],t=Wr(_a)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var o=_l(a)}catch(x){throw x===gi?qr:x}else o=a;a=Ot();var f=a.queue,h=f.dispatch;return l!==a.memoizedState&&(Re.flags|=2048,xi(9,{destroy:void 0},A1.bind(null,f,l),null)),[o,h,t]}function A1(t,a){t.action=a}function xg(t){var a=Ot(),l=lt;if(l!==null)return bg(a,l,t);Ot(),a=a.memoizedState,l=Ot();var o=l.queue.dispatch;return l.memoizedState=t,[a,o,!1]}function xi(t,a,l,o){return t={tag:t,create:l,deps:o,inst:a,next:null},a=Re.updateQueue,a===null&&(a=Vr(),Re.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=t.next=t:(o=l.next,l.next=t,t.next=o,a.lastEffect=t),t}function Sg(){return Ot().memoizedState}function Xr(t,a,l,o){var f=mn();Re.flags|=t,f.memoizedState=xi(1|a,{destroy:void 0},l,o===void 0?null:o)}function Qr(t,a,l,o){var f=Ot();o=o===void 0?null:o;var h=f.memoizedState.inst;lt!==null&&o!==null&&Pu(o,lt.memoizedState.deps)?f.memoizedState=xi(a,h,l,o):(Re.flags|=t,f.memoizedState=xi(1|a,h,l,o))}function wg(t,a){Xr(8390656,8,t,a)}function Yu(t,a){Qr(2048,8,t,a)}function O1(t){Re.flags|=4;var a=Re.updateQueue;if(a===null)a=Vr(),Re.updateQueue=a,a.events=[t];else{var l=a.events;l===null?a.events=[t]:l.push(t)}}function _g(t){var a=Ot().memoizedState;return O1({ref:a,nextImpl:t}),function(){if((Je&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function Eg(t,a){return Qr(4,2,t,a)}function Tg(t,a){return Qr(4,4,t,a)}function Mg(t,a){if(typeof a=="function"){t=t();var l=a(t);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Ng(t,a,l){l=l!=null?l.concat([t]):null,Qr(4,4,Mg.bind(null,a,t),l)}function Gu(){}function jg(t,a){var l=Ot();a=a===void 0?null:a;var o=l.memoizedState;return a!==null&&Pu(a,o[1])?o[0]:(l.memoizedState=[t,a],t)}function Cg(t,a){var l=Ot();a=a===void 0?null:a;var o=l.memoizedState;if(a!==null&&Pu(a,o[1]))return o[0];if(o=t(),zs){zt(!0);try{t()}finally{zt(!1)}}return l.memoizedState=[o,a],o}function Vu(t,a,l){return l===void 0||(wa&1073741824)!==0&&($e&261930)===0?t.memoizedState=a:(t.memoizedState=l,t=Dp(),Re.lanes|=t,Ja|=t,l)}function Dg(t,a,l,o){return jn(l,a)?l:vi.current!==null?(t=Vu(t,l,o),jn(t,a)||(Lt=!0),t):(wa&42)===0||(wa&1073741824)!==0&&($e&261930)===0?(Lt=!0,t.memoizedState=l):(t=Dp(),Re.lanes|=t,Ja|=t,a)}function Rg(t,a,l,o,f){var h=Y.p;Y.p=h!==0&&8>h?h:8;var x=L.T,_={};L.T=_,Xu(t,!1,a,l);try{var A=f(),H=L.S;if(H!==null&&H(_,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var J=C1(A,o);El(t,a,J,On(t))}else El(t,a,o,On(t))}catch(ie){El(t,a,{then:function(){},status:"rejected",reason:ie},On())}finally{Y.p=h,x!==null&&_.types!==null&&(x.types=_.types),L.T=x}}function z1(){}function Ku(t,a,l,o){if(t.tag!==5)throw Error(i(476));var f=kg(t).queue;Rg(t,f,a,ae,l===null?z1:function(){return Ag(t),l(o)})}function kg(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:ae},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:l},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function Ag(t){var a=kg(t);a.next===null&&(a=t.alternate.memoizedState),El(t,a.next.queue,{},On())}function Wu(){return sn(Ul)}function Og(){return Ot().memoizedState}function zg(){return Ot().memoizedState}function P1(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var l=On();t=Ga(l);var o=Va(a,t,l);o!==null&&(wn(o,a,l),bl(o,a,l)),a={cache:Tu()},t.payload=a;return}a=a.return}}function I1(t,a,l){var o=On();l={lane:o,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Jr(t)?Ig(a,l):(l=mu(t,a,l,o),l!==null&&(wn(l,t,o),Bg(l,a,o)))}function Pg(t,a,l){var o=On();El(t,a,l,o)}function El(t,a,l,o){var f={lane:o,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Jr(t))Ig(a,f);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=a.lastRenderedReducer,h!==null))try{var x=a.lastRenderedState,_=h(x,l);if(f.hasEagerState=!0,f.eagerState=_,jn(_,x))return Ar(t,a,f,0),dt===null&&kr(),!1}catch{}if(l=mu(t,a,f,o),l!==null)return wn(l,t,o),Bg(l,a,o),!0}return!1}function Xu(t,a,l,o){if(o={lane:2,revertLane:Cd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Jr(t)){if(a)throw Error(i(479))}else a=mu(t,l,o,2),a!==null&&wn(a,t,2)}function Jr(t){var a=t.alternate;return t===Re||a!==null&&a===Re}function Ig(t,a){yi=Yr=!0;var l=t.pending;l===null?a.next=a:(a.next=l.next,l.next=a),t.pending=a}function Bg(t,a,l){if((l&4194048)!==0){var o=a.lanes;o&=t.pendingLanes,l|=o,a.lanes=l,mt(t,l)}}var Tl={readContext:sn,use:Kr,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt};Tl.useEffectEvent=Nt;var Lg={readContext:sn,use:Kr,useCallback:function(t,a){return mn().memoizedState=[t,a===void 0?null:a],t},useContext:sn,useEffect:wg,useImperativeHandle:function(t,a,l){l=l!=null?l.concat([t]):null,Xr(4194308,4,Mg.bind(null,a,t),l)},useLayoutEffect:function(t,a){return Xr(4194308,4,t,a)},useInsertionEffect:function(t,a){Xr(4,2,t,a)},useMemo:function(t,a){var l=mn();a=a===void 0?null:a;var o=t();if(zs){zt(!0);try{t()}finally{zt(!1)}}return l.memoizedState=[o,a],o},useReducer:function(t,a,l){var o=mn();if(l!==void 0){var f=l(a);if(zs){zt(!0);try{l(a)}finally{zt(!1)}}}else f=a;return o.memoizedState=o.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},o.queue=t,t=t.dispatch=I1.bind(null,Re,t),[o.memoizedState,t]},useRef:function(t){var a=mn();return t={current:t},a.memoizedState=t},useState:function(t){t=Zu(t);var a=t.queue,l=Pg.bind(null,Re,a);return a.dispatch=l,[t.memoizedState,l]},useDebugValue:Gu,useDeferredValue:function(t,a){var l=mn();return Vu(l,t,a)},useTransition:function(){var t=Zu(!1);return t=Rg.bind(null,Re,t.queue,!0,!1),mn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,l){var o=Re,f=mn();if(Ze){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),dt===null)throw Error(i(349));($e&127)!==0||lg(o,a,l)}f.memoizedState=l;var h={value:l,getSnapshot:a};return f.queue=h,wg(og.bind(null,o,h,t),[t]),o.flags|=2048,xi(9,{destroy:void 0},rg.bind(null,o,h,l,a),null),l},useId:function(){var t=mn(),a=dt.identifierPrefix;if(Ze){var l=ra,o=la;l=(o&~(1<<32-kt(o)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Gr++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=D1++,a="_"+a+"r_"+l.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:Wu,useFormState:vg,useActionState:vg,useOptimistic:function(t){var a=mn();a.memoizedState=a.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Xu.bind(null,Re,!0,l),l.dispatch=a,[t,a]},useMemoCache:Uu,useCacheRefresh:function(){return mn().memoizedState=P1.bind(null,Re)},useEffectEvent:function(t){var a=mn(),l={impl:t};return a.memoizedState=l,function(){if((Je&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Qu={readContext:sn,use:Kr,useCallback:jg,useContext:sn,useEffect:Yu,useImperativeHandle:Ng,useInsertionEffect:Eg,useLayoutEffect:Tg,useMemo:Cg,useReducer:Wr,useRef:Sg,useState:function(){return Wr(_a)},useDebugValue:Gu,useDeferredValue:function(t,a){var l=Ot();return Dg(l,lt.memoizedState,t,a)},useTransition:function(){var t=Wr(_a)[0],a=Ot().memoizedState;return[typeof t=="boolean"?t:_l(t),a]},useSyncExternalStore:ig,useId:Og,useHostTransitionStatus:Wu,useFormState:yg,useActionState:yg,useOptimistic:function(t,a){var l=Ot();return dg(l,lt,t,a)},useMemoCache:Uu,useCacheRefresh:zg};Qu.useEffectEvent=_g;var qg={readContext:sn,use:Kr,useCallback:jg,useContext:sn,useEffect:Yu,useImperativeHandle:Ng,useInsertionEffect:Eg,useLayoutEffect:Tg,useMemo:Cg,useReducer:Hu,useRef:Sg,useState:function(){return Hu(_a)},useDebugValue:Gu,useDeferredValue:function(t,a){var l=Ot();return lt===null?Vu(l,t,a):Dg(l,lt.memoizedState,t,a)},useTransition:function(){var t=Hu(_a)[0],a=Ot().memoizedState;return[typeof t=="boolean"?t:_l(t),a]},useSyncExternalStore:ig,useId:Og,useHostTransitionStatus:Wu,useFormState:xg,useActionState:xg,useOptimistic:function(t,a){var l=Ot();return lt!==null?dg(l,lt,t,a):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:Uu,useCacheRefresh:zg};qg.useEffectEvent=_g;function Ju(t,a,l,o){a=t.memoizedState,l=l(o,a),l=l==null?a:v({},a,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var ed={enqueueSetState:function(t,a,l){t=t._reactInternals;var o=On(),f=Ga(o);f.payload=a,l!=null&&(f.callback=l),a=Va(t,f,o),a!==null&&(wn(a,t,o),bl(a,t,o))},enqueueReplaceState:function(t,a,l){t=t._reactInternals;var o=On(),f=Ga(o);f.tag=1,f.payload=a,l!=null&&(f.callback=l),a=Va(t,f,o),a!==null&&(wn(a,t,o),bl(a,t,o))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var l=On(),o=Ga(l);o.tag=2,a!=null&&(o.callback=a),a=Va(t,o,l),a!==null&&(wn(a,t,l),bl(a,t,l))}};function Ug(t,a,l,o,f,h,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,h,x):a.prototype&&a.prototype.isPureReactComponent?!dl(l,o)||!dl(f,h):!0}function $g(t,a,l,o){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,o),a.state!==t&&ed.enqueueReplaceState(a,a.state,null)}function Ps(t,a){var l=a;if("ref"in a){l={};for(var o in a)o!=="ref"&&(l[o]=a[o])}if(t=t.defaultProps){l===a&&(l=v({},l));for(var f in t)l[f]===void 0&&(l[f]=t[f])}return l}function Hg(t){Rr(t)}function Zg(t){console.error(t)}function Fg(t){Rr(t)}function eo(t,a){try{var l=t.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(o){setTimeout(function(){throw o})}}function Yg(t,a,l){try{var o=t.onCaughtError;o(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function td(t,a,l){return l=Ga(l),l.tag=3,l.payload={element:null},l.callback=function(){eo(t,a)},l}function Gg(t){return t=Ga(t),t.tag=3,t}function Vg(t,a,l,o){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var h=o.value;t.payload=function(){return f(h)},t.callback=function(){Yg(a,l,o)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){Yg(a,l,o),typeof f!="function"&&(es===null?es=new Set([this]):es.add(this));var _=o.stack;this.componentDidCatch(o.value,{componentStack:_!==null?_:""})})}function B1(t,a,l,o,f){if(l.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(a=l.alternate,a!==null&&fi(a,l,f,!0),l=Dn.current,l!==null){switch(l.tag){case 31:case 13:return Fn===null?ho():l.alternate===null&&jt===0&&(jt=3),l.flags&=-257,l.flags|=65536,l.lanes=f,o===Ur?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([o]):a.add(o),Md(t,o,f)),!1;case 22:return l.flags|=65536,o===Ur?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([o])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([o]):l.add(o)),Md(t,o,f)),!1}throw Error(i(435,l.tag))}return Md(t,o,f),ho(),!1}if(Ze)return a=Dn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,o!==xu&&(t=Error(i(422),{cause:o}),ml(Un(t,l)))):(o!==xu&&(a=Error(i(423),{cause:o}),ml(Un(a,l))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,o=Un(o,l),f=td(t.stateNode,o,f),Ru(t,f),jt!==4&&(jt=2)),!1;var h=Error(i(520),{cause:o});if(h=Un(h,l),Al===null?Al=[h]:Al.push(h),jt!==4&&(jt=2),a===null)return!0;o=Un(o,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,t=f&-f,l.lanes|=t,t=td(l.stateNode,o,t),Ru(l,t),!1;case 1:if(a=l.type,h=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(es===null||!es.has(h))))return l.flags|=65536,f&=-f,l.lanes|=f,f=Gg(f),Vg(f,t,l,o),Ru(l,f),!1}l=l.return}while(l!==null);return!1}var nd=Error(i(461)),Lt=!1;function ln(t,a,l,o){a.child=t===null?Qm(a,null,l,o):Os(a,t.child,l,o)}function Kg(t,a,l,o,f){l=l.render;var h=a.ref;if("ref"in o){var x={};for(var _ in o)_!=="ref"&&(x[_]=o[_])}else x=o;return Ds(a),o=Iu(t,a,l,x,h,f),_=Bu(),t!==null&&!Lt?(Lu(t,a,f),Ea(t,a,f)):(Ze&&_&&yu(a),a.flags|=1,ln(t,a,o,f),a.child)}function Wg(t,a,l,o,f){if(t===null){var h=l.type;return typeof h=="function"&&!gu(h)&&h.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=h,Xg(t,a,h,o,f)):(t=zr(l.type,null,o,a,a.mode,f),t.ref=a.ref,t.return=a,a.child=t)}if(h=t.child,!ud(t,f)){var x=h.memoizedProps;if(l=l.compare,l=l!==null?l:dl,l(x,o)&&t.ref===a.ref)return Ea(t,a,f)}return a.flags|=1,t=ya(h,o),t.ref=a.ref,t.return=a,a.child=t}function Xg(t,a,l,o,f){if(t!==null){var h=t.memoizedProps;if(dl(h,o)&&t.ref===a.ref)if(Lt=!1,a.pendingProps=o=h,ud(t,f))(t.flags&131072)!==0&&(Lt=!0);else return a.lanes=t.lanes,Ea(t,a,f)}return ad(t,a,l,o,f)}function Qg(t,a,l,o){var f=o.children,h=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((a.flags&128)!==0){if(h=h!==null?h.baseLanes|l:l,t!==null){for(o=a.child=t.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~h}else o=0,a.child=null;return Jg(t,a,h,l,o)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Lr(a,h!==null?h.cachePool:null),h!==null?tg(a,h):Au(),ng(a);else return o=a.lanes=536870912,Jg(t,a,h!==null?h.baseLanes|l:l,l,o)}else h!==null?(Lr(a,h.cachePool),tg(a,h),Wa(),a.memoizedState=null):(t!==null&&Lr(a,null),Au(),Wa());return ln(t,a,f,l),a.child}function Ml(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Jg(t,a,l,o,f){var h=Nu();return h=h===null?null:{parent:It._currentValue,pool:h},a.memoizedState={baseLanes:l,cachePool:h},t!==null&&Lr(a,null),Au(),ng(a),t!==null&&fi(t,a,o,!0),a.childLanes=f,null}function to(t,a){return a=ao({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function ep(t,a,l){return Os(a,t.child,null,l),t=to(a,a.pendingProps),t.flags|=2,Rn(a),a.memoizedState=null,t}function L1(t,a,l){var o=a.pendingProps,f=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(Ze){if(o.mode==="hidden")return t=to(a,o),a.lanes=536870912,Ml(null,t);if(zu(a),(t=vt)?(t=fv(t,Zn),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:$a!==null?{id:la,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},l=Im(t),l.return=a,a.child=l,an=a,vt=null)):t=null,t===null)throw Za(a);return a.lanes=536870912,null}return to(a,o)}var h=t.memoizedState;if(h!==null){var x=h.dehydrated;if(zu(a),f)if(a.flags&256)a.flags&=-257,a=ep(t,a,l);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(i(558));else if(Lt||fi(t,a,l,!1),f=(l&t.childLanes)!==0,Lt||f){if(o=dt,o!==null&&(x=we(o,l),x!==0&&x!==h.retryLane))throw h.retryLane=x,Ms(t,x),wn(o,t,x),nd;ho(),a=ep(t,a,l)}else t=h.treeContext,vt=Yn(x.nextSibling),an=a,Ze=!0,Ha=null,Zn=!1,t!==null&&qm(a,t),a=to(a,o),a.flags|=4096;return a}return t=ya(t.child,{mode:o.mode,children:o.children}),t.ref=a.ref,a.child=t,t.return=a,t}function no(t,a){var l=a.ref;if(l===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(t===null||t.ref!==l)&&(a.flags|=4194816)}}function ad(t,a,l,o,f){return Ds(a),l=Iu(t,a,l,o,void 0,f),o=Bu(),t!==null&&!Lt?(Lu(t,a,f),Ea(t,a,f)):(Ze&&o&&yu(a),a.flags|=1,ln(t,a,l,f),a.child)}function tp(t,a,l,o,f,h){return Ds(a),a.updateQueue=null,l=sg(a,o,l,f),ag(t),o=Bu(),t!==null&&!Lt?(Lu(t,a,h),Ea(t,a,h)):(Ze&&o&&yu(a),a.flags|=1,ln(t,a,l,h),a.child)}function np(t,a,l,o,f){if(Ds(a),a.stateNode===null){var h=oi,x=l.contextType;typeof x=="object"&&x!==null&&(h=sn(x)),h=new l(o,h),a.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=ed,a.stateNode=h,h._reactInternals=a,h=a.stateNode,h.props=o,h.state=a.memoizedState,h.refs={},Cu(a),x=l.contextType,h.context=typeof x=="object"&&x!==null?sn(x):oi,h.state=a.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(Ju(a,l,x,o),h.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(x=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),x!==h.state&&ed.enqueueReplaceState(h,h.state,null),Sl(a,o,h,f),xl(),h.state=a.memoizedState),typeof h.componentDidMount=="function"&&(a.flags|=4194308),o=!0}else if(t===null){h=a.stateNode;var _=a.memoizedProps,A=Ps(l,_);h.props=A;var H=h.context,J=l.contextType;x=oi,typeof J=="object"&&J!==null&&(x=sn(J));var ie=l.getDerivedStateFromProps;J=typeof ie=="function"||typeof h.getSnapshotBeforeUpdate=="function",_=a.pendingProps!==_,J||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_||H!==x)&&$g(a,h,o,x),Ya=!1;var F=a.memoizedState;h.state=F,Sl(a,o,h,f),xl(),H=a.memoizedState,_||F!==H||Ya?(typeof ie=="function"&&(Ju(a,l,ie,o),H=a.memoizedState),(A=Ya||Ug(a,l,A,o,F,H,x))?(J||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(a.flags|=4194308)):(typeof h.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=H),h.props=o,h.state=H,h.context=x,o=A):(typeof h.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{h=a.stateNode,Du(t,a),x=a.memoizedProps,J=Ps(l,x),h.props=J,ie=a.pendingProps,F=h.context,H=l.contextType,A=oi,typeof H=="object"&&H!==null&&(A=sn(H)),_=l.getDerivedStateFromProps,(H=typeof _=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(x!==ie||F!==A)&&$g(a,h,o,A),Ya=!1,F=a.memoizedState,h.state=F,Sl(a,o,h,f),xl();var V=a.memoizedState;x!==ie||F!==V||Ya||t!==null&&t.dependencies!==null&&Ir(t.dependencies)?(typeof _=="function"&&(Ju(a,l,_,o),V=a.memoizedState),(J=Ya||Ug(a,l,J,o,F,V,A)||t!==null&&t.dependencies!==null&&Ir(t.dependencies))?(H||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,V,A),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,V,A)),typeof h.componentDidUpdate=="function"&&(a.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof h.componentDidUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(a.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=V),h.props=o,h.state=V,h.context=A,o=J):(typeof h.componentDidUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(a.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(a.flags|=1024),o=!1)}return h=o,no(t,a),o=(a.flags&128)!==0,h||o?(h=a.stateNode,l=o&&typeof l.getDerivedStateFromError!="function"?null:h.render(),a.flags|=1,t!==null&&o?(a.child=Os(a,t.child,null,f),a.child=Os(a,null,l,f)):ln(t,a,l,f),a.memoizedState=h.state,t=a.child):t=Ea(t,a,f),t}function ap(t,a,l,o){return js(),a.flags|=256,ln(t,a,l,o),a.child}var sd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function id(t){return{baseLanes:t,cachePool:Ym()}}function ld(t,a,l){return t=t!==null?t.childLanes&~l:0,a&&(t|=An),t}function sp(t,a,l){var o=a.pendingProps,f=!1,h=(a.flags&128)!==0,x;if((x=h)||(x=t!==null&&t.memoizedState===null?!1:(At.current&2)!==0),x&&(f=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,t===null){if(Ze){if(f?Ka(a):Wa(),(t=vt)?(t=fv(t,Zn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:$a!==null?{id:la,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},l=Im(t),l.return=a,a.child=l,an=a,vt=null)):t=null,t===null)throw Za(a);return $d(t)?a.lanes=32:a.lanes=536870912,null}var _=o.children;return o=o.fallback,f?(Wa(),f=a.mode,_=ao({mode:"hidden",children:_},f),o=Ns(o,f,l,null),_.return=a,o.return=a,_.sibling=o,a.child=_,o=a.child,o.memoizedState=id(l),o.childLanes=ld(t,x,l),a.memoizedState=sd,Ml(null,o)):(Ka(a),rd(a,_))}var A=t.memoizedState;if(A!==null&&(_=A.dehydrated,_!==null)){if(h)a.flags&256?(Ka(a),a.flags&=-257,a=od(t,a,l)):a.memoizedState!==null?(Wa(),a.child=t.child,a.flags|=128,a=null):(Wa(),_=o.fallback,f=a.mode,o=ao({mode:"visible",children:o.children},f),_=Ns(_,f,l,null),_.flags|=2,o.return=a,_.return=a,o.sibling=_,a.child=o,Os(a,t.child,null,l),o=a.child,o.memoizedState=id(l),o.childLanes=ld(t,x,l),a.memoizedState=sd,a=Ml(null,o));else if(Ka(a),$d(_)){if(x=_.nextSibling&&_.nextSibling.dataset,x)var H=x.dgst;x=H,o=Error(i(419)),o.stack="",o.digest=x,ml({value:o,source:null,stack:null}),a=od(t,a,l)}else if(Lt||fi(t,a,l,!1),x=(l&t.childLanes)!==0,Lt||x){if(x=dt,x!==null&&(o=we(x,l),o!==0&&o!==A.retryLane))throw A.retryLane=o,Ms(t,o),wn(x,t,o),nd;Ud(_)||ho(),a=od(t,a,l)}else Ud(_)?(a.flags|=192,a.child=t.child,a=null):(t=A.treeContext,vt=Yn(_.nextSibling),an=a,Ze=!0,Ha=null,Zn=!1,t!==null&&qm(a,t),a=rd(a,o.children),a.flags|=4096);return a}return f?(Wa(),_=o.fallback,f=a.mode,A=t.child,H=A.sibling,o=ya(A,{mode:"hidden",children:o.children}),o.subtreeFlags=A.subtreeFlags&65011712,H!==null?_=ya(H,_):(_=Ns(_,f,l,null),_.flags|=2),_.return=a,o.return=a,o.sibling=_,a.child=o,Ml(null,o),o=a.child,_=t.child.memoizedState,_===null?_=id(l):(f=_.cachePool,f!==null?(A=It._currentValue,f=f.parent!==A?{parent:A,pool:A}:f):f=Ym(),_={baseLanes:_.baseLanes|l,cachePool:f}),o.memoizedState=_,o.childLanes=ld(t,x,l),a.memoizedState=sd,Ml(t.child,o)):(Ka(a),l=t.child,t=l.sibling,l=ya(l,{mode:"visible",children:o.children}),l.return=a,l.sibling=null,t!==null&&(x=a.deletions,x===null?(a.deletions=[t],a.flags|=16):x.push(t)),a.child=l,a.memoizedState=null,l)}function rd(t,a){return a=ao({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function ao(t,a){return t=Cn(22,t,null,a),t.lanes=0,t}function od(t,a,l){return Os(a,t.child,null,l),t=rd(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function ip(t,a,l){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a),_u(t.return,a,l)}function cd(t,a,l,o,f,h){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:l,tailMode:f,treeForkCount:h}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=o,x.tail=l,x.tailMode=f,x.treeForkCount=h)}function lp(t,a,l){var o=a.pendingProps,f=o.revealOrder,h=o.tail;o=o.children;var x=At.current,_=(x&2)!==0;if(_?(x=x&1|2,a.flags|=128):x&=1,ee(At,x),ln(t,a,o,l),o=Ze?hl:0,!_&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ip(t,l,a);else if(t.tag===19)ip(t,l,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(l=a.child,f=null;l!==null;)t=l.alternate,t!==null&&Fr(t)===null&&(f=l),l=l.sibling;l=f,l===null?(f=a.child,a.child=null):(f=l.sibling,l.sibling=null),cd(a,!1,f,l,h,o);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=a.child,a.child=null;f!==null;){if(t=f.alternate,t!==null&&Fr(t)===null){a.child=f;break}t=f.sibling,f.sibling=l,l=f,f=t}cd(a,!0,l,null,h,o);break;case"together":cd(a,!1,null,null,void 0,o);break;default:a.memoizedState=null}return a.child}function Ea(t,a,l){if(t!==null&&(a.dependencies=t.dependencies),Ja|=a.lanes,(l&a.childLanes)===0)if(t!==null){if(fi(t,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(i(153));if(a.child!==null){for(t=a.child,l=ya(t,t.pendingProps),a.child=l,l.return=a;t.sibling!==null;)t=t.sibling,l=l.sibling=ya(t,t.pendingProps),l.return=a;l.sibling=null}return a.child}function ud(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Ir(t)))}function q1(t,a,l){switch(a.tag){case 3:be(a,a.stateNode.containerInfo),Fa(a,It,t.memoizedState.cache),js();break;case 27:case 5:_e(a);break;case 4:be(a,a.stateNode.containerInfo);break;case 10:Fa(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,zu(a),null;break;case 13:var o=a.memoizedState;if(o!==null)return o.dehydrated!==null?(Ka(a),a.flags|=128,null):(l&a.child.childLanes)!==0?sp(t,a,l):(Ka(a),t=Ea(t,a,l),t!==null?t.sibling:null);Ka(a);break;case 19:var f=(t.flags&128)!==0;if(o=(l&a.childLanes)!==0,o||(fi(t,a,l,!1),o=(l&a.childLanes)!==0),f){if(o)return lp(t,a,l);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ee(At,At.current),o)break;return null;case 22:return a.lanes=0,Qg(t,a,l,a.pendingProps);case 24:Fa(a,It,t.memoizedState.cache)}return Ea(t,a,l)}function rp(t,a,l){if(t!==null)if(t.memoizedProps!==a.pendingProps)Lt=!0;else{if(!ud(t,l)&&(a.flags&128)===0)return Lt=!1,q1(t,a,l);Lt=(t.flags&131072)!==0}else Lt=!1,Ze&&(a.flags&1048576)!==0&&Lm(a,hl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var o=a.pendingProps;if(t=ks(a.elementType),a.type=t,typeof t=="function")gu(t)?(o=Ps(t,o),a.tag=1,a=np(null,a,t,o,l)):(a.tag=0,a=ad(null,a,t,o,l));else{if(t!=null){var f=t.$$typeof;if(f===B){a.tag=11,a=Kg(null,a,t,o,l);break e}else if(f===j){a.tag=14,a=Wg(null,a,t,o,l);break e}}throw a=le(t)||t,Error(i(306,a,""))}}return a;case 0:return ad(t,a,a.type,a.pendingProps,l);case 1:return o=a.type,f=Ps(o,a.pendingProps),np(t,a,o,f,l);case 3:e:{if(be(a,a.stateNode.containerInfo),t===null)throw Error(i(387));o=a.pendingProps;var h=a.memoizedState;f=h.element,Du(t,a),Sl(a,o,null,l);var x=a.memoizedState;if(o=x.cache,Fa(a,It,o),o!==h.cache&&Eu(a,[It],l,!0),xl(),o=x.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=h,a.memoizedState=h,a.flags&256){a=ap(t,a,o,l);break e}else if(o!==f){f=Un(Error(i(424)),a),ml(f),a=ap(t,a,o,l);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,vt=Yn(t.firstChild),an=a,Ze=!0,Ha=null,Zn=!0,l=Qm(a,null,o,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(js(),o===f){a=Ea(t,a,l);break e}ln(t,a,o,l)}a=a.child}return a;case 26:return no(t,a),t===null?(l=yv(a.type,null,a.pendingProps,null))?a.memoizedState=l:Ze||(l=a.type,t=a.pendingProps,o=xo(ce.current).createElement(l),o[Pt]=a,o[nn]=t,rn(o,l,t),Vt(o),a.stateNode=o):a.memoizedState=yv(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return _e(a),t===null&&Ze&&(o=a.stateNode=gv(a.type,a.pendingProps,ce.current),an=a,Zn=!0,f=vt,ss(a.type)?(Hd=f,vt=Yn(o.firstChild)):vt=f),ln(t,a,a.pendingProps.children,l),no(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Ze&&((f=o=vt)&&(o=pw(o,a.type,a.pendingProps,Zn),o!==null?(a.stateNode=o,an=a,vt=Yn(o.firstChild),Zn=!1,f=!0):f=!1),f||Za(a)),_e(a),f=a.type,h=a.pendingProps,x=t!==null?t.memoizedProps:null,o=h.children,Bd(f,h)?o=null:x!==null&&Bd(f,x)&&(a.flags|=32),a.memoizedState!==null&&(f=Iu(t,a,R1,null,null,l),Ul._currentValue=f),no(t,a),ln(t,a,o,l),a.child;case 6:return t===null&&Ze&&((t=l=vt)&&(l=vw(l,a.pendingProps,Zn),l!==null?(a.stateNode=l,an=a,vt=null,t=!0):t=!1),t||Za(a)),null;case 13:return sp(t,a,l);case 4:return be(a,a.stateNode.containerInfo),o=a.pendingProps,t===null?a.child=Os(a,null,o,l):ln(t,a,o,l),a.child;case 11:return Kg(t,a,a.type,a.pendingProps,l);case 7:return ln(t,a,a.pendingProps,l),a.child;case 8:return ln(t,a,a.pendingProps.children,l),a.child;case 12:return ln(t,a,a.pendingProps.children,l),a.child;case 10:return o=a.pendingProps,Fa(a,a.type,o.value),ln(t,a,o.children,l),a.child;case 9:return f=a.type._context,o=a.pendingProps.children,Ds(a),f=sn(f),o=o(f),a.flags|=1,ln(t,a,o,l),a.child;case 14:return Wg(t,a,a.type,a.pendingProps,l);case 15:return Xg(t,a,a.type,a.pendingProps,l);case 19:return lp(t,a,l);case 31:return L1(t,a,l);case 22:return Qg(t,a,l,a.pendingProps);case 24:return Ds(a),o=sn(It),t===null?(f=Nu(),f===null&&(f=dt,h=Tu(),f.pooledCache=h,h.refCount++,h!==null&&(f.pooledCacheLanes|=l),f=h),a.memoizedState={parent:o,cache:f},Cu(a),Fa(a,It,f)):((t.lanes&l)!==0&&(Du(t,a),Sl(a,null,null,l),xl()),f=t.memoizedState,h=a.memoizedState,f.parent!==o?(f={parent:o,cache:o},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),Fa(a,It,o)):(o=h.cache,Fa(a,It,o),o!==f.cache&&Eu(a,[It],l,!0))),ln(t,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Ta(t){t.flags|=4}function dd(t,a,l,o,f){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Op())t.flags|=8192;else throw As=Ur,ju}else t.flags&=-16777217}function op(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!_v(a))if(Op())t.flags|=8192;else throw As=Ur,ju}function so(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Xe():536870912,t.lanes|=a,Ei|=a)}function Nl(t,a){if(!Ze)switch(t.tailMode){case"hidden":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var o=null;l!==null;)l.alternate!==null&&(o=l),l=l.sibling;o===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function yt(t){var a=t.alternate!==null&&t.alternate.child===t.child,l=0,o=0;if(a)for(var f=t.child;f!==null;)l|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)l|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=o,t.childLanes=l,a}function U1(t,a,l){var o=a.pendingProps;switch(bu(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(a),null;case 1:return yt(a),null;case 3:return l=a.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),Sa(It),ge(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(di(a)?Ta(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,Su())),yt(a),null;case 26:var f=a.type,h=a.memoizedState;return t===null?(Ta(a),h!==null?(yt(a),op(a,h)):(yt(a),dd(a,f,null,o,l))):h?h!==t.memoizedState?(Ta(a),yt(a),op(a,h)):(yt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==o&&Ta(a),yt(a),dd(a,f,t,o,l)),null;case 27:if(Be(a),l=ce.current,f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Ta(a);else{if(!o){if(a.stateNode===null)throw Error(i(166));return yt(a),null}t=oe.current,di(a)?Um(a):(t=gv(f,o,l),a.stateNode=t,Ta(a))}return yt(a),null;case 5:if(Be(a),f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Ta(a);else{if(!o){if(a.stateNode===null)throw Error(i(166));return yt(a),null}if(h=oe.current,di(a))Um(a);else{var x=xo(ce.current);switch(h){case 1:h=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:h=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":h=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":h=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":h=x.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof o.is=="string"?x.createElement("select",{is:o.is}):x.createElement("select"),o.multiple?h.multiple=!0:o.size&&(h.size=o.size);break;default:h=typeof o.is=="string"?x.createElement(f,{is:o.is}):x.createElement(f)}}h[Pt]=a,h[nn]=o;e:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)h.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break e;for(;x.sibling===null;){if(x.return===null||x.return===a)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=h;e:switch(rn(h,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ta(a)}}return yt(a),dd(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,l),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==o&&Ta(a);else{if(typeof o!="string"&&a.stateNode===null)throw Error(i(166));if(t=ce.current,di(a)){if(t=a.stateNode,l=a.memoizedProps,o=null,f=an,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}t[Pt]=a,t=!!(t.nodeValue===l||o!==null&&o.suppressHydrationWarning===!0||sv(t.nodeValue,l)),t||Za(a,!0)}else t=xo(t).createTextNode(o),t[Pt]=a,a.stateNode=t}return yt(a),null;case 31:if(l=a.memoizedState,t===null||t.memoizedState!==null){if(o=di(a),l!==null){if(t===null){if(!o)throw Error(i(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[Pt]=a}else js(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;yt(a),t=!1}else l=Su(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return a.flags&256?(Rn(a),a):(Rn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return yt(a),null;case 13:if(o=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=di(a),o!==null&&o.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Pt]=a}else js(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;yt(a),f=!1}else f=Su(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(Rn(a),a):(Rn(a),null)}return Rn(a),(a.flags&128)!==0?(a.lanes=l,a):(l=o!==null,t=t!==null&&t.memoizedState!==null,l&&(o=a.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==f&&(o.flags|=2048)),l!==t&&l&&(a.child.flags|=8192),so(a,a.updateQueue),yt(a),null);case 4:return ge(),t===null&&Ad(a.stateNode.containerInfo),yt(a),null;case 10:return Sa(a.type),yt(a),null;case 19:if(z(At),o=a.memoizedState,o===null)return yt(a),null;if(f=(a.flags&128)!==0,h=o.rendering,h===null)if(f)Nl(o,!1);else{if(jt!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(h=Fr(t),h!==null){for(a.flags|=128,Nl(o,!1),t=h.updateQueue,a.updateQueue=t,so(a,t),a.subtreeFlags=0,t=l,l=a.child;l!==null;)Pm(l,t),l=l.sibling;return ee(At,At.current&1|2),Ze&&ba(a,o.treeForkCount),a.child}t=t.sibling}o.tail!==null&&Ce()>co&&(a.flags|=128,f=!0,Nl(o,!1),a.lanes=4194304)}else{if(!f)if(t=Fr(h),t!==null){if(a.flags|=128,f=!0,t=t.updateQueue,a.updateQueue=t,so(a,t),Nl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!h.alternate&&!Ze)return yt(a),null}else 2*Ce()-o.renderingStartTime>co&&l!==536870912&&(a.flags|=128,f=!0,Nl(o,!1),a.lanes=4194304);o.isBackwards?(h.sibling=a.child,a.child=h):(t=o.last,t!==null?t.sibling=h:a.child=h,o.last=h)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ce(),t.sibling=null,l=At.current,ee(At,f?l&1|2:l&1),Ze&&ba(a,o.treeForkCount),t):(yt(a),null);case 22:case 23:return Rn(a),Ou(),o=a.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(a.flags|=8192):o&&(a.flags|=8192),o?(l&536870912)!==0&&(a.flags&128)===0&&(yt(a),a.subtreeFlags&6&&(a.flags|=8192)):yt(a),l=a.updateQueue,l!==null&&so(a,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==l&&(a.flags|=2048),t!==null&&z(Rs),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Sa(It),yt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function $1(t,a){switch(bu(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Sa(It),ge(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Be(a),null;case 31:if(a.memoizedState!==null){if(Rn(a),a.alternate===null)throw Error(i(340));js()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(Rn(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(i(340));js()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return z(At),null;case 4:return ge(),null;case 10:return Sa(a.type),null;case 22:case 23:return Rn(a),Ou(),t!==null&&z(Rs),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Sa(It),null;case 25:return null;default:return null}}function cp(t,a){switch(bu(a),a.tag){case 3:Sa(It),ge();break;case 26:case 27:case 5:Be(a);break;case 4:ge();break;case 31:a.memoizedState!==null&&Rn(a);break;case 13:Rn(a);break;case 19:z(At);break;case 10:Sa(a.type);break;case 22:case 23:Rn(a),Ou(),t!==null&&z(Rs);break;case 24:Sa(It)}}function jl(t,a){try{var l=a.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var f=o.next;l=f;do{if((l.tag&t)===t){o=void 0;var h=l.create,x=l.inst;o=h(),x.destroy=o}l=l.next}while(l!==f)}}catch(_){at(a,a.return,_)}}function Xa(t,a,l){try{var o=a.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var h=f.next;o=h;do{if((o.tag&t)===t){var x=o.inst,_=x.destroy;if(_!==void 0){x.destroy=void 0,f=a;var A=l,H=_;try{H()}catch(J){at(f,A,J)}}}o=o.next}while(o!==h)}}catch(J){at(a,a.return,J)}}function up(t){var a=t.updateQueue;if(a!==null){var l=t.stateNode;try{eg(a,l)}catch(o){at(t,t.return,o)}}}function dp(t,a,l){l.props=Ps(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(o){at(t,a,o)}}function Cl(t,a){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof l=="function"?t.refCleanup=l(o):l.current=o}}catch(f){at(t,a,f)}}function oa(t,a){var l=t.ref,o=t.refCleanup;if(l!==null)if(typeof o=="function")try{o()}catch(f){at(t,a,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){at(t,a,f)}else l.current=null}function fp(t){var a=t.type,l=t.memoizedProps,o=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&o.focus();break e;case"img":l.src?o.src=l.src:l.srcSet&&(o.srcset=l.srcSet)}}catch(f){at(t,t.return,f)}}function fd(t,a,l){try{var o=t.stateNode;uw(o,t.type,l,a),o[nn]=a}catch(f){at(t,t.return,f)}}function hp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ss(t.type)||t.tag===4}function hd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ss(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function md(t,a,l){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(t),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=pa));else if(o!==4&&(o===27&&ss(t.type)&&(l=t.stateNode,a=null),t=t.child,t!==null))for(md(t,a,l),t=t.sibling;t!==null;)md(t,a,l),t=t.sibling}function io(t,a,l){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?l.insertBefore(t,a):l.appendChild(t);else if(o!==4&&(o===27&&ss(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(io(t,a,l),t=t.sibling;t!==null;)io(t,a,l),t=t.sibling}function mp(t){var a=t.stateNode,l=t.memoizedProps;try{for(var o=t.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);rn(a,o,l),a[Pt]=t,a[nn]=l}catch(h){at(t,t.return,h)}}var Ma=!1,qt=!1,gd=!1,gp=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function H1(t,a){if(t=t.containerInfo,Pd=No,t=Nm(t),ou(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var o=l.getSelection&&l.getSelection();if(o&&o.rangeCount!==0){l=o.anchorNode;var f=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{l.nodeType,h.nodeType}catch{l=null;break e}var x=0,_=-1,A=-1,H=0,J=0,ie=t,F=null;t:for(;;){for(var V;ie!==l||f!==0&&ie.nodeType!==3||(_=x+f),ie!==h||o!==0&&ie.nodeType!==3||(A=x+o),ie.nodeType===3&&(x+=ie.nodeValue.length),(V=ie.firstChild)!==null;)F=ie,ie=V;for(;;){if(ie===t)break t;if(F===l&&++H===f&&(_=x),F===h&&++J===o&&(A=x),(V=ie.nextSibling)!==null)break;ie=F,F=ie.parentNode}ie=V}l=_===-1||A===-1?null:{start:_,end:A}}else l=null}l=l||{start:0,end:0}}else l=null;for(Id={focusedElem:t,selectionRange:l},No=!1,Kt=a;Kt!==null;)if(a=Kt,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Kt=t;else for(;Kt!==null;){switch(a=Kt,h=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)f=t[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&h!==null){t=void 0,l=a,f=h.memoizedProps,h=h.memoizedState,o=l.stateNode;try{var pe=Ps(l.type,f);t=o.getSnapshotBeforeUpdate(pe,h),o.__reactInternalSnapshotBeforeUpdate=t}catch(Ee){at(l,l.return,Ee)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,l=t.nodeType,l===9)qd(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":qd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=a.sibling,t!==null){t.return=a.return,Kt=t;break}Kt=a.return}}function pp(t,a,l){var o=l.flags;switch(l.tag){case 0:case 11:case 15:ja(t,l),o&4&&jl(5,l);break;case 1:if(ja(t,l),o&4)if(t=l.stateNode,a===null)try{t.componentDidMount()}catch(x){at(l,l.return,x)}else{var f=Ps(l.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(f,a,t.__reactInternalSnapshotBeforeUpdate)}catch(x){at(l,l.return,x)}}o&64&&up(l),o&512&&Cl(l,l.return);break;case 3:if(ja(t,l),o&64&&(t=l.updateQueue,t!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{eg(t,a)}catch(x){at(l,l.return,x)}}break;case 27:a===null&&o&4&&mp(l);case 26:case 5:ja(t,l),a===null&&o&4&&fp(l),o&512&&Cl(l,l.return);break;case 12:ja(t,l);break;case 31:ja(t,l),o&4&&bp(t,l);break;case 13:ja(t,l),o&4&&xp(t,l),o&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=Q1.bind(null,l),yw(t,l))));break;case 22:if(o=l.memoizedState!==null||Ma,!o){a=a!==null&&a.memoizedState!==null||qt,f=Ma;var h=qt;Ma=o,(qt=a)&&!h?Ca(t,l,(l.subtreeFlags&8772)!==0):ja(t,l),Ma=f,qt=h}break;case 30:break;default:ja(t,l)}}function vp(t){var a=t.alternate;a!==null&&(t.alternate=null,vp(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Fc(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var St=null,yn=!1;function Na(t,a,l){for(l=l.child;l!==null;)yp(t,a,l),l=l.sibling}function yp(t,a,l){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(un,l)}catch{}switch(l.tag){case 26:qt||oa(l,a),Na(t,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:qt||oa(l,a);var o=St,f=yn;ss(l.type)&&(St=l.stateNode,yn=!1),Na(t,a,l),Bl(l.stateNode),St=o,yn=f;break;case 5:qt||oa(l,a);case 6:if(o=St,f=yn,St=null,Na(t,a,l),St=o,yn=f,St!==null)if(yn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(l.stateNode)}catch(h){at(l,a,h)}else try{St.removeChild(l.stateNode)}catch(h){at(l,a,h)}break;case 18:St!==null&&(yn?(t=St,uv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),ki(t)):uv(St,l.stateNode));break;case 4:o=St,f=yn,St=l.stateNode.containerInfo,yn=!0,Na(t,a,l),St=o,yn=f;break;case 0:case 11:case 14:case 15:Xa(2,l,a),qt||Xa(4,l,a),Na(t,a,l);break;case 1:qt||(oa(l,a),o=l.stateNode,typeof o.componentWillUnmount=="function"&&dp(l,a,o)),Na(t,a,l);break;case 21:Na(t,a,l);break;case 22:qt=(o=qt)||l.memoizedState!==null,Na(t,a,l),qt=o;break;default:Na(t,a,l)}}function bp(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ki(t)}catch(l){at(a,a.return,l)}}}function xp(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ki(t)}catch(l){at(a,a.return,l)}}function Z1(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new gp),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new gp),a;default:throw Error(i(435,t.tag))}}function lo(t,a){var l=Z1(t);a.forEach(function(o){if(!l.has(o)){l.add(o);var f=J1.bind(null,t,o);o.then(f,f)}})}function bn(t,a){var l=a.deletions;if(l!==null)for(var o=0;o<l.length;o++){var f=l[o],h=t,x=a,_=x;e:for(;_!==null;){switch(_.tag){case 27:if(ss(_.type)){St=_.stateNode,yn=!1;break e}break;case 5:St=_.stateNode,yn=!1;break e;case 3:case 4:St=_.stateNode.containerInfo,yn=!0;break e}_=_.return}if(St===null)throw Error(i(160));yp(h,x,f),St=null,yn=!1,h=f.alternate,h!==null&&(h.return=null),f.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Sp(a,t),a=a.sibling}var Xn=null;function Sp(t,a){var l=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:bn(a,t),xn(t),o&4&&(Xa(3,t,t.return),jl(3,t),Xa(5,t,t.return));break;case 1:bn(a,t),xn(t),o&512&&(qt||l===null||oa(l,l.return)),o&64&&Ma&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?o:l.concat(o))));break;case 26:var f=Xn;if(bn(a,t),xn(t),o&512&&(qt||l===null||oa(l,l.return)),o&4){var h=l!==null?l.memoizedState:null;if(o=t.memoizedState,l===null)if(o===null)if(t.stateNode===null){e:{o=t.type,l=t.memoizedProps,f=f.ownerDocument||f;t:switch(o){case"title":h=f.getElementsByTagName("title")[0],(!h||h[qa]||h[Pt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=f.createElement(o),f.head.insertBefore(h,f.querySelector("head > title"))),rn(h,o,l),h[Pt]=t,Vt(h),o=h;break e;case"link":var x=Sv("link","href",f).get(o+(l.href||""));if(x){for(var _=0;_<x.length;_++)if(h=x[_],h.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&h.getAttribute("rel")===(l.rel==null?null:l.rel)&&h.getAttribute("title")===(l.title==null?null:l.title)&&h.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(_,1);break t}}h=f.createElement(o),rn(h,o,l),f.head.appendChild(h);break;case"meta":if(x=Sv("meta","content",f).get(o+(l.content||""))){for(_=0;_<x.length;_++)if(h=x[_],h.getAttribute("content")===(l.content==null?null:""+l.content)&&h.getAttribute("name")===(l.name==null?null:l.name)&&h.getAttribute("property")===(l.property==null?null:l.property)&&h.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&h.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(_,1);break t}}h=f.createElement(o),rn(h,o,l),f.head.appendChild(h);break;default:throw Error(i(468,o))}h[Pt]=t,Vt(h),o=h}t.stateNode=o}else wv(f,t.type,t.stateNode);else t.stateNode=xv(f,o,t.memoizedProps);else h!==o?(h===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):h.count--,o===null?wv(f,t.type,t.stateNode):xv(f,o,t.memoizedProps)):o===null&&t.stateNode!==null&&fd(t,t.memoizedProps,l.memoizedProps)}break;case 27:bn(a,t),xn(t),o&512&&(qt||l===null||oa(l,l.return)),l!==null&&o&4&&fd(t,t.memoizedProps,l.memoizedProps);break;case 5:if(bn(a,t),xn(t),o&512&&(qt||l===null||oa(l,l.return)),t.flags&32){f=t.stateNode;try{ti(f,"")}catch(pe){at(t,t.return,pe)}}o&4&&t.stateNode!=null&&(f=t.memoizedProps,fd(t,f,l!==null?l.memoizedProps:f)),o&1024&&(gd=!0);break;case 6:if(bn(a,t),xn(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,l=t.stateNode;try{l.nodeValue=o}catch(pe){at(t,t.return,pe)}}break;case 3:if(_o=null,f=Xn,Xn=So(a.containerInfo),bn(a,t),Xn=f,xn(t),o&4&&l!==null&&l.memoizedState.isDehydrated)try{ki(a.containerInfo)}catch(pe){at(t,t.return,pe)}gd&&(gd=!1,wp(t));break;case 4:o=Xn,Xn=So(t.stateNode.containerInfo),bn(a,t),xn(t),Xn=o;break;case 12:bn(a,t),xn(t);break;case 31:bn(a,t),xn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,lo(t,o)));break;case 13:bn(a,t),xn(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(oo=Ce()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,lo(t,o)));break;case 22:f=t.memoizedState!==null;var A=l!==null&&l.memoizedState!==null,H=Ma,J=qt;if(Ma=H||f,qt=J||A,bn(a,t),qt=J,Ma=H,xn(t),o&8192)e:for(a=t.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(l===null||A||Ma||qt||Is(t)),l=null,a=t;;){if(a.tag===5||a.tag===26){if(l===null){A=l=a;try{if(h=A.stateNode,f)x=h.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{_=A.stateNode;var ie=A.memoizedProps.style,F=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;_.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(pe){at(A,A.return,pe)}}}else if(a.tag===6){if(l===null){A=a;try{A.stateNode.nodeValue=f?"":A.memoizedProps}catch(pe){at(A,A.return,pe)}}}else if(a.tag===18){if(l===null){A=a;try{var V=A.stateNode;f?dv(V,!0):dv(A.stateNode,!1)}catch(pe){at(A,A.return,pe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}o&4&&(o=t.updateQueue,o!==null&&(l=o.retryQueue,l!==null&&(o.retryQueue=null,lo(t,l))));break;case 19:bn(a,t),xn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,lo(t,o)));break;case 30:break;case 21:break;default:bn(a,t),xn(t)}}function xn(t){var a=t.flags;if(a&2){try{for(var l,o=t.return;o!==null;){if(hp(o)){l=o;break}o=o.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var f=l.stateNode,h=hd(t);io(t,h,f);break;case 5:var x=l.stateNode;l.flags&32&&(ti(x,""),l.flags&=-33);var _=hd(t);io(t,_,x);break;case 3:case 4:var A=l.stateNode.containerInfo,H=hd(t);md(t,H,A);break;default:throw Error(i(161))}}catch(J){at(t,t.return,J)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function wp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;wp(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function ja(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)pp(t,a.alternate,a),a=a.sibling}function Is(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Xa(4,a,a.return),Is(a);break;case 1:oa(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&dp(a,a.return,l),Is(a);break;case 27:Bl(a.stateNode);case 26:case 5:oa(a,a.return),Is(a);break;case 22:a.memoizedState===null&&Is(a);break;case 30:Is(a);break;default:Is(a)}t=t.sibling}}function Ca(t,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var o=a.alternate,f=t,h=a,x=h.flags;switch(h.tag){case 0:case 11:case 15:Ca(f,h,l),jl(4,h);break;case 1:if(Ca(f,h,l),o=h,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){at(o,o.return,H)}if(o=h,f=o.updateQueue,f!==null){var _=o.stateNode;try{var A=f.shared.hiddenCallbacks;if(A!==null)for(f.shared.hiddenCallbacks=null,f=0;f<A.length;f++)Jm(A[f],_)}catch(H){at(o,o.return,H)}}l&&x&64&&up(h),Cl(h,h.return);break;case 27:mp(h);case 26:case 5:Ca(f,h,l),l&&o===null&&x&4&&fp(h),Cl(h,h.return);break;case 12:Ca(f,h,l);break;case 31:Ca(f,h,l),l&&x&4&&bp(f,h);break;case 13:Ca(f,h,l),l&&x&4&&xp(f,h);break;case 22:h.memoizedState===null&&Ca(f,h,l),Cl(h,h.return);break;case 30:break;default:Ca(f,h,l)}a=a.sibling}}function pd(t,a){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&gl(l))}function vd(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&gl(t))}function Qn(t,a,l,o){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)_p(t,a,l,o),a=a.sibling}function _p(t,a,l,o){var f=a.flags;switch(a.tag){case 0:case 11:case 15:Qn(t,a,l,o),f&2048&&jl(9,a);break;case 1:Qn(t,a,l,o);break;case 3:Qn(t,a,l,o),f&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&gl(t)));break;case 12:if(f&2048){Qn(t,a,l,o),t=a.stateNode;try{var h=a.memoizedProps,x=h.id,_=h.onPostCommit;typeof _=="function"&&_(x,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(A){at(a,a.return,A)}}else Qn(t,a,l,o);break;case 31:Qn(t,a,l,o);break;case 13:Qn(t,a,l,o);break;case 23:break;case 22:h=a.stateNode,x=a.alternate,a.memoizedState!==null?h._visibility&2?Qn(t,a,l,o):Dl(t,a):h._visibility&2?Qn(t,a,l,o):(h._visibility|=2,Si(t,a,l,o,(a.subtreeFlags&10256)!==0||!1)),f&2048&&pd(x,a);break;case 24:Qn(t,a,l,o),f&2048&&vd(a.alternate,a);break;default:Qn(t,a,l,o)}}function Si(t,a,l,o,f){for(f=f&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var h=t,x=a,_=l,A=o,H=x.flags;switch(x.tag){case 0:case 11:case 15:Si(h,x,_,A,f),jl(8,x);break;case 23:break;case 22:var J=x.stateNode;x.memoizedState!==null?J._visibility&2?Si(h,x,_,A,f):Dl(h,x):(J._visibility|=2,Si(h,x,_,A,f)),f&&H&2048&&pd(x.alternate,x);break;case 24:Si(h,x,_,A,f),f&&H&2048&&vd(x.alternate,x);break;default:Si(h,x,_,A,f)}a=a.sibling}}function Dl(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=t,o=a,f=o.flags;switch(o.tag){case 22:Dl(l,o),f&2048&&pd(o.alternate,o);break;case 24:Dl(l,o),f&2048&&vd(o.alternate,o);break;default:Dl(l,o)}a=a.sibling}}var Rl=8192;function wi(t,a,l){if(t.subtreeFlags&Rl)for(t=t.child;t!==null;)Ep(t,a,l),t=t.sibling}function Ep(t,a,l){switch(t.tag){case 26:wi(t,a,l),t.flags&Rl&&t.memoizedState!==null&&Dw(l,Xn,t.memoizedState,t.memoizedProps);break;case 5:wi(t,a,l);break;case 3:case 4:var o=Xn;Xn=So(t.stateNode.containerInfo),wi(t,a,l),Xn=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Rl,Rl=16777216,wi(t,a,l),Rl=o):wi(t,a,l));break;default:wi(t,a,l)}}function Tp(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function kl(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var o=a[l];Kt=o,Np(o,t)}Tp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Mp(t),t=t.sibling}function Mp(t){switch(t.tag){case 0:case 11:case 15:kl(t),t.flags&2048&&Xa(9,t,t.return);break;case 3:kl(t);break;case 12:kl(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,ro(t)):kl(t);break;default:kl(t)}}function ro(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var o=a[l];Kt=o,Np(o,t)}Tp(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Xa(8,a,a.return),ro(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,ro(a));break;default:ro(a)}t=t.sibling}}function Np(t,a){for(;Kt!==null;){var l=Kt;switch(l.tag){case 0:case 11:case 15:Xa(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var o=l.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:gl(l.memoizedState.cache)}if(o=l.child,o!==null)o.return=l,Kt=o;else e:for(l=t;Kt!==null;){o=Kt;var f=o.sibling,h=o.return;if(vp(o),o===l){Kt=null;break e}if(f!==null){f.return=h,Kt=f;break e}Kt=h}}}var F1={getCacheForType:function(t){var a=sn(It),l=a.data.get(t);return l===void 0&&(l=t(),a.data.set(t,l)),l},cacheSignal:function(){return sn(It).controller.signal}},Y1=typeof WeakMap=="function"?WeakMap:Map,Je=0,dt=null,qe=null,$e=0,nt=0,kn=null,Qa=!1,_i=!1,yd=!1,Da=0,jt=0,Ja=0,Bs=0,bd=0,An=0,Ei=0,Al=null,Sn=null,xd=!1,oo=0,jp=0,co=1/0,uo=null,es=null,Ft=0,ts=null,Ti=null,Ra=0,Sd=0,wd=null,Cp=null,Ol=0,_d=null;function On(){return(Je&2)!==0&&$e!==0?$e&-$e:L.T!==null?Cd():Te()}function Dp(){if(An===0)if(($e&536870912)===0||Ze){var t=pt;pt<<=1,(pt&3932160)===0&&(pt=262144),An=t}else An=536870912;return t=Dn.current,t!==null&&(t.flags|=32),An}function wn(t,a,l){(t===dt&&(nt===2||nt===9)||t.cancelPendingCommit!==null)&&(Mi(t,0),ns(t,$e,An,!1)),Le(t,l),((Je&2)===0||t!==dt)&&(t===dt&&((Je&2)===0&&(Bs|=l),jt===4&&ns(t,$e,An,!1)),ca(t))}function Rp(t,a,l){if((Je&6)!==0)throw Error(i(327));var o=!l&&(a&127)===0&&(a&t.expiredLanes)===0||Me(t,a),f=o?K1(t,a):Td(t,a,!0),h=o;do{if(f===0){_i&&!o&&ns(t,a,0,!1);break}else{if(l=t.current.alternate,h&&!G1(l)){f=Td(t,a,!1),h=!1;continue}if(f===2){if(h=a,t.errorRecoveryDisabledLanes&h)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var _=t;f=Al;var A=_.current.memoizedState.isDehydrated;if(A&&(Mi(_,x).flags|=256),x=Td(_,x,!1),x!==2){if(yd&&!A){_.errorRecoveryDisabledLanes|=h,Bs|=h,f=4;break e}h=Sn,Sn=f,h!==null&&(Sn===null?Sn=h:Sn.push.apply(Sn,h))}f=x}if(h=!1,f!==2)continue}}if(f===1){Mi(t,0),ns(t,a,0,!0);break}e:{switch(o=t,h=f,h){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:ns(o,a,An,!Qa);break e;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(f=oo+300-Ce(),10<f)){if(ns(o,a,An,!Qa),fe(o,0,!0)!==0)break e;Ra=a,o.timeoutHandle=ov(kp.bind(null,o,l,Sn,uo,xd,a,An,Bs,Ei,Qa,h,"Throttled",-0,0),f);break e}kp(o,l,Sn,uo,xd,a,An,Bs,Ei,Qa,h,null,-0,0)}}break}while(!0);ca(t)}function kp(t,a,l,o,f,h,x,_,A,H,J,ie,F,V){if(t.timeoutHandle=-1,ie=a.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pa},Ep(a,h,ie);var pe=(h&62914560)===h?oo-Ce():(h&4194048)===h?jp-Ce():0;if(pe=Rw(ie,pe),pe!==null){Ra=h,t.cancelPendingCommit=pe(qp.bind(null,t,a,h,l,o,f,x,_,A,J,ie,null,F,V)),ns(t,h,x,!H);return}}qp(t,a,h,l,o,f,x,_,A)}function G1(t){for(var a=t;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var o=0;o<l.length;o++){var f=l[o],h=f.getSnapshot;f=f.value;try{if(!jn(h(),f))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ns(t,a,l,o){a&=~bd,a&=~Bs,t.suspendedLanes|=a,t.pingedLanes&=~a,o&&(t.warmLanes|=a),o=t.expirationTimes;for(var f=a;0<f;){var h=31-kt(f),x=1<<h;o[h]=-1,f&=~x}l!==0&&xt(t,l,a)}function fo(){return(Je&6)===0?(zl(0),!1):!0}function Ed(){if(qe!==null){if(nt===0)var t=qe.return;else t=qe,xa=Cs=null,qu(t),pi=null,vl=0,t=qe;for(;t!==null;)cp(t.alternate,t),t=t.return;qe=null}}function Mi(t,a){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,hw(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),Ra=0,Ed(),dt=t,qe=l=ya(t.current,null),$e=a,nt=0,kn=null,Qa=!1,_i=Me(t,a),yd=!1,Ei=An=bd=Bs=Ja=jt=0,Sn=Al=null,xd=!1,(a&8)!==0&&(a|=a&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=a;0<o;){var f=31-kt(o),h=1<<f;a|=t[f],o&=~h}return Da=a,kr(),l}function Ap(t,a){Re=null,L.H=Tl,a===gi||a===qr?(a=Km(),nt=3):a===ju?(a=Km(),nt=4):nt=a===nd?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,kn=a,qe===null&&(jt=1,eo(t,Un(a,t.current)))}function Op(){var t=Dn.current;return t===null?!0:($e&4194048)===$e?Fn===null:($e&62914560)===$e||($e&536870912)!==0?t===Fn:!1}function zp(){var t=L.H;return L.H=Tl,t===null?Tl:t}function Pp(){var t=L.A;return L.A=F1,t}function ho(){jt=4,Qa||($e&4194048)!==$e&&Dn.current!==null||(_i=!0),(Ja&134217727)===0&&(Bs&134217727)===0||dt===null||ns(dt,$e,An,!1)}function Td(t,a,l){var o=Je;Je|=2;var f=zp(),h=Pp();(dt!==t||$e!==a)&&(uo=null,Mi(t,a)),a=!1;var x=jt;e:do try{if(nt!==0&&qe!==null){var _=qe,A=kn;switch(nt){case 8:Ed(),x=6;break e;case 3:case 2:case 9:case 6:Dn.current===null&&(a=!0);var H=nt;if(nt=0,kn=null,Ni(t,_,A,H),l&&_i){x=0;break e}break;default:H=nt,nt=0,kn=null,Ni(t,_,A,H)}}V1(),x=jt;break}catch(J){Ap(t,J)}while(!0);return a&&t.shellSuspendCounter++,xa=Cs=null,Je=o,L.H=f,L.A=h,qe===null&&(dt=null,$e=0,kr()),x}function V1(){for(;qe!==null;)Ip(qe)}function K1(t,a){var l=Je;Je|=2;var o=zp(),f=Pp();dt!==t||$e!==a?(uo=null,co=Ce()+500,Mi(t,a)):_i=Me(t,a);e:do try{if(nt!==0&&qe!==null){a=qe;var h=kn;t:switch(nt){case 1:nt=0,kn=null,Ni(t,a,h,1);break;case 2:case 9:if(Gm(h)){nt=0,kn=null,Bp(a);break}a=function(){nt!==2&&nt!==9||dt!==t||(nt=7),ca(t)},h.then(a,a);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:Gm(h)?(nt=0,kn=null,Bp(a)):(nt=0,kn=null,Ni(t,a,h,7));break;case 5:var x=null;switch(qe.tag){case 26:x=qe.memoizedState;case 5:case 27:var _=qe;if(x?_v(x):_.stateNode.complete){nt=0,kn=null;var A=_.sibling;if(A!==null)qe=A;else{var H=_.return;H!==null?(qe=H,mo(H)):qe=null}break t}}nt=0,kn=null,Ni(t,a,h,5);break;case 6:nt=0,kn=null,Ni(t,a,h,6);break;case 8:Ed(),jt=6;break e;default:throw Error(i(462))}}W1();break}catch(J){Ap(t,J)}while(!0);return xa=Cs=null,L.H=o,L.A=f,Je=l,qe!==null?0:(dt=null,$e=0,kr(),jt)}function W1(){for(;qe!==null&&!De();)Ip(qe)}function Ip(t){var a=rp(t.alternate,t,Da);t.memoizedProps=t.pendingProps,a===null?mo(t):qe=a}function Bp(t){var a=t,l=a.alternate;switch(a.tag){case 15:case 0:a=tp(l,a,a.pendingProps,a.type,void 0,$e);break;case 11:a=tp(l,a,a.pendingProps,a.type.render,a.ref,$e);break;case 5:qu(a);default:cp(l,a),a=qe=Pm(a,Da),a=rp(l,a,Da)}t.memoizedProps=t.pendingProps,a===null?mo(t):qe=a}function Ni(t,a,l,o){xa=Cs=null,qu(a),pi=null,vl=0;var f=a.return;try{if(B1(t,f,a,l,$e)){jt=1,eo(t,Un(l,t.current)),qe=null;return}}catch(h){if(f!==null)throw qe=f,h;jt=1,eo(t,Un(l,t.current)),qe=null;return}a.flags&32768?(Ze||o===1?t=!0:_i||($e&536870912)!==0?t=!1:(Qa=t=!0,(o===2||o===9||o===3||o===6)&&(o=Dn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Lp(a,t)):mo(a)}function mo(t){var a=t;do{if((a.flags&32768)!==0){Lp(a,Qa);return}t=a.return;var l=U1(a.alternate,a,Da);if(l!==null){qe=l;return}if(a=a.sibling,a!==null){qe=a;return}qe=a=t}while(a!==null);jt===0&&(jt=5)}function Lp(t,a){do{var l=$1(t.alternate,t);if(l!==null){l.flags&=32767,qe=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(t=t.sibling,t!==null)){qe=t;return}qe=t=l}while(t!==null);jt=6,qe=null}function qp(t,a,l,o,f,h,x,_,A){t.cancelPendingCommit=null;do go();while(Ft!==0);if((Je&6)!==0)throw Error(i(327));if(a!==null){if(a===t.current)throw Error(i(177));if(h=a.lanes|a.childLanes,h|=hu,Pe(t,l,h,x,_,A),t===dt&&(qe=dt=null,$e=0),Ti=a,ts=t,Ra=l,Sd=h,wd=f,Cp=o,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ew(W,function(){return Fp(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||o){o=L.T,L.T=null,f=Y.p,Y.p=2,x=Je,Je|=4;try{H1(t,a,l)}finally{Je=x,Y.p=f,L.T=o}}Ft=1,Up(),$p(),Hp()}}function Up(){if(Ft===1){Ft=0;var t=ts,a=Ti,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=L.T,L.T=null;var o=Y.p;Y.p=2;var f=Je;Je|=4;try{Sp(a,t);var h=Id,x=Nm(t.containerInfo),_=h.focusedElem,A=h.selectionRange;if(x!==_&&_&&_.ownerDocument&&Mm(_.ownerDocument.documentElement,_)){if(A!==null&&ou(_)){var H=A.start,J=A.end;if(J===void 0&&(J=H),"selectionStart"in _)_.selectionStart=H,_.selectionEnd=Math.min(J,_.value.length);else{var ie=_.ownerDocument||document,F=ie&&ie.defaultView||window;if(F.getSelection){var V=F.getSelection(),pe=_.textContent.length,Ee=Math.min(A.start,pe),ot=A.end===void 0?Ee:Math.min(A.end,pe);!V.extend&&Ee>ot&&(x=ot,ot=Ee,Ee=x);var U=Tm(_,Ee),P=Tm(_,ot);if(U&&P&&(V.rangeCount!==1||V.anchorNode!==U.node||V.anchorOffset!==U.offset||V.focusNode!==P.node||V.focusOffset!==P.offset)){var $=ie.createRange();$.setStart(U.node,U.offset),V.removeAllRanges(),Ee>ot?(V.addRange($),V.extend(P.node,P.offset)):($.setEnd(P.node,P.offset),V.addRange($))}}}}for(ie=[],V=_;V=V.parentNode;)V.nodeType===1&&ie.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<ie.length;_++){var te=ie[_];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}No=!!Pd,Id=Pd=null}finally{Je=f,Y.p=o,L.T=l}}t.current=a,Ft=2}}function $p(){if(Ft===2){Ft=0;var t=ts,a=Ti,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=L.T,L.T=null;var o=Y.p;Y.p=2;var f=Je;Je|=4;try{pp(t,a.alternate,a)}finally{Je=f,Y.p=o,L.T=l}}Ft=3}}function Hp(){if(Ft===4||Ft===3){Ft=0,We();var t=ts,a=Ti,l=Ra,o=Cp;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ft=5:(Ft=0,Ti=ts=null,Zp(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(es=null),dn(l),a=a.stateNode,ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(un,a,void 0,(a.current.flags&128)===128)}catch{}if(o!==null){a=L.T,f=Y.p,Y.p=2,L.T=null;try{for(var h=t.onRecoverableError,x=0;x<o.length;x++){var _=o[x];h(_.value,{componentStack:_.stack})}}finally{L.T=a,Y.p=f}}(Ra&3)!==0&&go(),ca(t),f=t.pendingLanes,(l&261930)!==0&&(f&42)!==0?t===_d?Ol++:(Ol=0,_d=t):Ol=0,zl(0)}}function Zp(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,gl(a)))}function go(){return Up(),$p(),Hp(),Fp()}function Fp(){if(Ft!==5)return!1;var t=ts,a=Sd;Sd=0;var l=dn(Ra),o=L.T,f=Y.p;try{Y.p=32>l?32:l,L.T=null,l=wd,wd=null;var h=ts,x=Ra;if(Ft=0,Ti=ts=null,Ra=0,(Je&6)!==0)throw Error(i(331));var _=Je;if(Je|=4,Mp(h.current),_p(h,h.current,x,l),Je=_,zl(0,!1),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(un,h)}catch{}return!0}finally{Y.p=f,L.T=o,Zp(t,a)}}function Yp(t,a,l){a=Un(l,a),a=td(t.stateNode,a,2),t=Va(t,a,2),t!==null&&(Le(t,2),ca(t))}function at(t,a,l){if(t.tag===3)Yp(t,t,l);else for(;a!==null;){if(a.tag===3){Yp(a,t,l);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(es===null||!es.has(o))){t=Un(l,t),l=Gg(2),o=Va(a,l,2),o!==null&&(Vg(l,o,a,t),Le(o,2),ca(o));break}}a=a.return}}function Md(t,a,l){var o=t.pingCache;if(o===null){o=t.pingCache=new Y1;var f=new Set;o.set(a,f)}else f=o.get(a),f===void 0&&(f=new Set,o.set(a,f));f.has(l)||(yd=!0,f.add(l),t=X1.bind(null,t,a,l),a.then(t,t))}function X1(t,a,l){var o=t.pingCache;o!==null&&o.delete(a),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,dt===t&&($e&l)===l&&(jt===4||jt===3&&($e&62914560)===$e&&300>Ce()-oo?(Je&2)===0&&Mi(t,0):bd|=l,Ei===$e&&(Ei=0)),ca(t)}function Gp(t,a){a===0&&(a=Xe()),t=Ms(t,a),t!==null&&(Le(t,a),ca(t))}function Q1(t){var a=t.memoizedState,l=0;a!==null&&(l=a.retryLane),Gp(t,l)}function J1(t,a){var l=0;switch(t.tag){case 31:case 13:var o=t.stateNode,f=t.memoizedState;f!==null&&(l=f.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(a),Gp(t,l)}function ew(t,a){return de(t,a)}var po=null,ji=null,Nd=!1,vo=!1,jd=!1,as=0;function ca(t){t!==ji&&t.next===null&&(ji===null?po=ji=t:ji=ji.next=t),vo=!0,Nd||(Nd=!0,nw())}function zl(t,a){if(!jd&&vo){jd=!0;do for(var l=!1,o=po;o!==null;){if(t!==0){var f=o.pendingLanes;if(f===0)var h=0;else{var x=o.suspendedLanes,_=o.pingedLanes;h=(1<<31-kt(42|t)+1)-1,h&=f&~(x&~_),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(l=!0,Xp(o,h))}else h=$e,h=fe(o,o===dt?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(h&3)===0||Me(o,h)||(l=!0,Xp(o,h));o=o.next}while(l);jd=!1}}function tw(){Vp()}function Vp(){vo=Nd=!1;var t=0;as!==0&&fw()&&(t=as);for(var a=Ce(),l=null,o=po;o!==null;){var f=o.next,h=Kp(o,a);h===0?(o.next=null,l===null?po=f:l.next=f,f===null&&(ji=l)):(l=o,(t!==0||(h&3)!==0)&&(vo=!0)),o=f}Ft!==0&&Ft!==5||zl(t),as!==0&&(as=0)}function Kp(t,a){for(var l=t.suspendedLanes,o=t.pingedLanes,f=t.expirationTimes,h=t.pendingLanes&-62914561;0<h;){var x=31-kt(h),_=1<<x,A=f[x];A===-1?((_&l)===0||(_&o)!==0)&&(f[x]=Ae(_,a)):A<=a&&(t.expiredLanes|=_),h&=~_}if(a=dt,l=$e,l=fe(t,t===a?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,l===0||t===a&&(nt===2||nt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&ze(o),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||Me(t,l)){if(a=l&-l,a===t.callbackPriority)return a;switch(o!==null&&ze(o),dn(l)){case 2:case 8:l=tn;break;case 32:l=W;break;case 268435456:l=Ge;break;default:l=W}return o=Wp.bind(null,t),l=de(l,o),t.callbackPriority=a,t.callbackNode=l,a}return o!==null&&o!==null&&ze(o),t.callbackPriority=2,t.callbackNode=null,2}function Wp(t,a){if(Ft!==0&&Ft!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(go()&&t.callbackNode!==l)return null;var o=$e;return o=fe(t,t===dt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Rp(t,o,a),Kp(t,Ce()),t.callbackNode!=null&&t.callbackNode===l?Wp.bind(null,t):null)}function Xp(t,a){if(go())return null;Rp(t,a,!0)}function nw(){mw(function(){(Je&6)!==0?de(Mn,tw):Vp()})}function Cd(){if(as===0){var t=hi;t===0&&(t=ha,ha<<=1,(ha&261888)===0&&(ha=256)),as=t}return as}function Qp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Er(""+t)}function Jp(t,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,t.id&&l.setAttribute("form",t.id),a.parentNode.insertBefore(l,a),t=new FormData(t),l.parentNode.removeChild(l),t}function aw(t,a,l,o,f){if(a==="submit"&&l&&l.stateNode===f){var h=Qp((f[nn]||null).action),x=o.submitter;x&&(a=(a=x[nn]||null)?Qp(a.formAction):x.getAttribute("formAction"),a!==null&&(h=a,x=null));var _=new jr("action","action",null,o,f);t.push({event:_,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(as!==0){var A=x?Jp(f,x):new FormData(f);Ku(l,{pending:!0,data:A,method:f.method,action:h},null,A)}}else typeof h=="function"&&(_.preventDefault(),A=x?Jp(f,x):new FormData(f),Ku(l,{pending:!0,data:A,method:f.method,action:h},h,A))},currentTarget:f}]})}}for(var Dd=0;Dd<fu.length;Dd++){var Rd=fu[Dd],sw=Rd.toLowerCase(),iw=Rd[0].toUpperCase()+Rd.slice(1);Wn(sw,"on"+iw)}Wn(Dm,"onAnimationEnd"),Wn(Rm,"onAnimationIteration"),Wn(km,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(S1,"onTransitionRun"),Wn(w1,"onTransitionStart"),Wn(_1,"onTransitionCancel"),Wn(Am,"onTransitionEnd"),Js("onMouseEnter",["mouseout","mouseover"]),Js("onMouseLeave",["mouseout","mouseover"]),Js("onPointerEnter",["pointerout","pointerover"]),Js("onPointerLeave",["pointerout","pointerover"]),ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ws("onBeforeInput",["compositionend","keypress","textInput","paste"]),ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pl));function ev(t,a){a=(a&4)!==0;for(var l=0;l<t.length;l++){var o=t[l],f=o.event;o=o.listeners;e:{var h=void 0;if(a)for(var x=o.length-1;0<=x;x--){var _=o[x],A=_.instance,H=_.currentTarget;if(_=_.listener,A!==h&&f.isPropagationStopped())break e;h=_,f.currentTarget=H;try{h(f)}catch(J){Rr(J)}f.currentTarget=null,h=A}else for(x=0;x<o.length;x++){if(_=o[x],A=_.instance,H=_.currentTarget,_=_.listener,A!==h&&f.isPropagationStopped())break e;h=_,f.currentTarget=H;try{h(f)}catch(J){Rr(J)}f.currentTarget=null,h=A}}}}function Ue(t,a){var l=a[Ks];l===void 0&&(l=a[Ks]=new Set);var o=t+"__bubble";l.has(o)||(tv(a,t,2,!1),l.add(o))}function kd(t,a,l){var o=0;a&&(o|=4),tv(l,t,o,a)}var yo="_reactListening"+Math.random().toString(36).slice(2);function Ad(t){if(!t[yo]){t[yo]=!0,Vh.forEach(function(l){l!=="selectionchange"&&(lw.has(l)||kd(l,!1,t),kd(l,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[yo]||(a[yo]=!0,kd("selectionchange",!1,a))}}function tv(t,a,l,o){switch(Dv(a)){case 2:var f=Ow;break;case 8:f=zw;break;default:f=Vd}l=f.bind(null,a,l,t),f=void 0,!Jc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),o?f!==void 0?t.addEventListener(a,l,{capture:!0,passive:f}):t.addEventListener(a,l,!0):f!==void 0?t.addEventListener(a,l,{passive:f}):t.addEventListener(a,l,!1)}function Od(t,a,l,o,f){var h=o;if((a&1)===0&&(a&2)===0&&o!==null)e:for(;;){if(o===null)return;var x=o.tag;if(x===3||x===4){var _=o.stateNode.containerInfo;if(_===f)break;if(x===4)for(x=o.return;x!==null;){var A=x.tag;if((A===3||A===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;_!==null;){if(x=Ws(_),x===null)return;if(A=x.tag,A===5||A===6||A===26||A===27){o=h=x;continue e}_=_.parentNode}}o=o.return}lm(function(){var H=h,J=Xc(l),ie=[];e:{var F=Om.get(t);if(F!==void 0){var V=jr,pe=t;switch(t){case"keypress":if(Mr(l)===0)break e;case"keydown":case"keyup":V=JS;break;case"focusin":pe="focus",V=au;break;case"focusout":pe="blur",V=au;break;case"beforeblur":case"afterblur":V=au;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=cm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=US;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=n1;break;case Dm:case Rm:case km:V=ZS;break;case Am:V=s1;break;case"scroll":case"scrollend":V=LS;break;case"wheel":V=l1;break;case"copy":case"cut":case"paste":V=YS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=dm;break;case"toggle":case"beforetoggle":V=o1}var Ee=(a&4)!==0,ot=!Ee&&(t==="scroll"||t==="scrollend"),U=Ee?F!==null?F+"Capture":null:F;Ee=[];for(var P=H,$;P!==null;){var te=P;if($=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||$===null||U===null||(te=sl(P,U),te!=null&&Ee.push(Il(P,te,$))),ot)break;P=P.return}0<Ee.length&&(F=new V(F,pe,null,l,J),ie.push({event:F,listeners:Ee}))}}if((a&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",V=t==="mouseout"||t==="pointerout",F&&l!==Wc&&(pe=l.relatedTarget||l.fromElement)&&(Ws(pe)||pe[ma]))break e;if((V||F)&&(F=J.window===J?J:(F=J.ownerDocument)?F.defaultView||F.parentWindow:window,V?(pe=l.relatedTarget||l.toElement,V=H,pe=pe?Ws(pe):null,pe!==null&&(ot=c(pe),Ee=pe.tag,pe!==ot||Ee!==5&&Ee!==27&&Ee!==6)&&(pe=null)):(V=null,pe=H),V!==pe)){if(Ee=cm,te="onMouseLeave",U="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(Ee=dm,te="onPointerLeave",U="onPointerEnter",P="pointer"),ot=V==null?F:al(V),$=pe==null?F:al(pe),F=new Ee(te,P+"leave",V,l,J),F.target=ot,F.relatedTarget=$,te=null,Ws(J)===H&&(Ee=new Ee(U,P+"enter",pe,l,J),Ee.target=$,Ee.relatedTarget=ot,te=Ee),ot=te,V&&pe)t:{for(Ee=rw,U=V,P=pe,$=0,te=U;te;te=Ee(te))$++;te=0;for(var xe=P;xe;xe=Ee(xe))te++;for(;0<$-te;)U=Ee(U),$--;for(;0<te-$;)P=Ee(P),te--;for(;$--;){if(U===P||P!==null&&U===P.alternate){Ee=U;break t}U=Ee(U),P=Ee(P)}Ee=null}else Ee=null;V!==null&&nv(ie,F,V,Ee,!1),pe!==null&&ot!==null&&nv(ie,ot,pe,Ee,!0)}}e:{if(F=H?al(H):window,V=F.nodeName&&F.nodeName.toLowerCase(),V==="select"||V==="input"&&F.type==="file")var Ve=bm;else if(vm(F))if(xm)Ve=y1;else{Ve=p1;var ve=g1}else V=F.nodeName,!V||V.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?H&&Kc(H.elementType)&&(Ve=bm):Ve=v1;if(Ve&&(Ve=Ve(t,H))){ym(ie,Ve,l,J);break e}ve&&ve(t,F,H),t==="focusout"&&H&&F.type==="number"&&H.memoizedProps.value!=null&&Vc(F,"number",F.value)}switch(ve=H?al(H):window,t){case"focusin":(vm(ve)||ve.contentEditable==="true")&&(ii=ve,cu=H,fl=null);break;case"focusout":fl=cu=ii=null;break;case"mousedown":uu=!0;break;case"contextmenu":case"mouseup":case"dragend":uu=!1,jm(ie,l,J);break;case"selectionchange":if(x1)break;case"keydown":case"keyup":jm(ie,l,J)}var Oe;if(iu)e:{switch(t){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else si?gm(t,l)&&(He="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(He="onCompositionStart");He&&(fm&&l.locale!=="ko"&&(si||He!=="onCompositionStart"?He==="onCompositionEnd"&&si&&(Oe=rm()):(Ua=J,eu="value"in Ua?Ua.value:Ua.textContent,si=!0)),ve=bo(H,He),0<ve.length&&(He=new um(He,t,null,l,J),ie.push({event:He,listeners:ve}),Oe?He.data=Oe:(Oe=pm(l),Oe!==null&&(He.data=Oe)))),(Oe=u1?d1(t,l):f1(t,l))&&(He=bo(H,"onBeforeInput"),0<He.length&&(ve=new um("onBeforeInput","beforeinput",null,l,J),ie.push({event:ve,listeners:He}),ve.data=Oe)),aw(ie,t,H,l,J)}ev(ie,a)})}function Il(t,a,l){return{instance:t,listener:a,currentTarget:l}}function bo(t,a){for(var l=a+"Capture",o=[];t!==null;){var f=t,h=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||h===null||(f=sl(t,l),f!=null&&o.unshift(Il(t,f,h)),f=sl(t,a),f!=null&&o.push(Il(t,f,h))),t.tag===3)return o;t=t.return}return[]}function rw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function nv(t,a,l,o,f){for(var h=a._reactName,x=[];l!==null&&l!==o;){var _=l,A=_.alternate,H=_.stateNode;if(_=_.tag,A!==null&&A===o)break;_!==5&&_!==26&&_!==27||H===null||(A=H,f?(H=sl(l,h),H!=null&&x.unshift(Il(l,H,A))):f||(H=sl(l,h),H!=null&&x.push(Il(l,H,A)))),l=l.return}x.length!==0&&t.push({event:a,listeners:x})}var ow=/\r\n?/g,cw=/\u0000|\uFFFD/g;function av(t){return(typeof t=="string"?t:""+t).replace(ow,`
`).replace(cw,"")}function sv(t,a){return a=av(a),av(t)===a}function rt(t,a,l,o,f,h){switch(l){case"children":typeof o=="string"?a==="body"||a==="textarea"&&o===""||ti(t,o):(typeof o=="number"||typeof o=="bigint")&&a!=="body"&&ti(t,""+o);break;case"className":wr(t,"class",o);break;case"tabIndex":wr(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":wr(t,l,o);break;case"style":sm(t,o,h);break;case"data":if(a!=="object"){wr(t,"data",o);break}case"src":case"href":if(o===""&&(a!=="a"||l!=="href")){t.removeAttribute(l);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(l);break}o=Er(""+o),t.setAttribute(l,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(l==="formAction"?(a!=="input"&&rt(t,a,"name",f.name,f,null),rt(t,a,"formEncType",f.formEncType,f,null),rt(t,a,"formMethod",f.formMethod,f,null),rt(t,a,"formTarget",f.formTarget,f,null)):(rt(t,a,"encType",f.encType,f,null),rt(t,a,"method",f.method,f,null),rt(t,a,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(l);break}o=Er(""+o),t.setAttribute(l,o);break;case"onClick":o!=null&&(t.onclick=pa);break;case"onScroll":o!=null&&Ue("scroll",t);break;case"onScrollEnd":o!=null&&Ue("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(l=o.__html,l!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=l}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}l=Er(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(l,""+o):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":o===!0?t.setAttribute(l,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(l,o):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(l,o):t.removeAttribute(l);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(l):t.setAttribute(l,o);break;case"popover":Ue("beforetoggle",t),Ue("toggle",t),Sr(t,"popover",o);break;case"xlinkActuate":ga(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ga(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ga(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ga(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ga(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ga(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ga(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ga(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ga(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Sr(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=IS.get(l)||l,Sr(t,l,o))}}function zd(t,a,l,o,f,h){switch(l){case"style":sm(t,o,h);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(l=o.__html,l!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=l}}break;case"children":typeof o=="string"?ti(t,o):(typeof o=="number"||typeof o=="bigint")&&ti(t,""+o);break;case"onScroll":o!=null&&Ue("scroll",t);break;case"onScrollEnd":o!=null&&Ue("scrollend",t);break;case"onClick":o!=null&&(t.onclick=pa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Kh.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),a=l.slice(2,f?l.length-7:void 0),h=t[nn]||null,h=h!=null?h[l]:null,typeof h=="function"&&t.removeEventListener(a,h,f),typeof o=="function")){typeof h!="function"&&h!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(a,o,f);break e}l in t?t[l]=o:o===!0?t.setAttribute(l,""):Sr(t,l,o)}}}function rn(t,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",t),Ue("load",t);var o=!1,f=!1,h;for(h in l)if(l.hasOwnProperty(h)){var x=l[h];if(x!=null)switch(h){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:rt(t,a,h,x,l,null)}}f&&rt(t,a,"srcSet",l.srcSet,l,null),o&&rt(t,a,"src",l.src,l,null);return;case"input":Ue("invalid",t);var _=h=x=f=null,A=null,H=null;for(o in l)if(l.hasOwnProperty(o)){var J=l[o];if(J!=null)switch(o){case"name":f=J;break;case"type":x=J;break;case"checked":A=J;break;case"defaultChecked":H=J;break;case"value":h=J;break;case"defaultValue":_=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,a));break;default:rt(t,a,o,J,l,null)}}em(t,h,_,A,H,x,f,!1);return;case"select":Ue("invalid",t),o=x=h=null;for(f in l)if(l.hasOwnProperty(f)&&(_=l[f],_!=null))switch(f){case"value":h=_;break;case"defaultValue":x=_;break;case"multiple":o=_;default:rt(t,a,f,_,l,null)}a=h,l=x,t.multiple=!!o,a!=null?ei(t,!!o,a,!1):l!=null&&ei(t,!!o,l,!0);return;case"textarea":Ue("invalid",t),h=f=o=null;for(x in l)if(l.hasOwnProperty(x)&&(_=l[x],_!=null))switch(x){case"value":o=_;break;case"defaultValue":f=_;break;case"children":h=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:rt(t,a,x,_,l,null)}nm(t,o,f,h);return;case"option":for(A in l)l.hasOwnProperty(A)&&(o=l[A],o!=null)&&(A==="selected"?t.selected=o&&typeof o!="function"&&typeof o!="symbol":rt(t,a,A,o,l,null));return;case"dialog":Ue("beforetoggle",t),Ue("toggle",t),Ue("cancel",t),Ue("close",t);break;case"iframe":case"object":Ue("load",t);break;case"video":case"audio":for(o=0;o<Pl.length;o++)Ue(Pl[o],t);break;case"image":Ue("error",t),Ue("load",t);break;case"details":Ue("toggle",t);break;case"embed":case"source":case"link":Ue("error",t),Ue("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in l)if(l.hasOwnProperty(H)&&(o=l[H],o!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:rt(t,a,H,o,l,null)}return;default:if(Kc(a)){for(J in l)l.hasOwnProperty(J)&&(o=l[J],o!==void 0&&zd(t,a,J,o,l,void 0));return}}for(_ in l)l.hasOwnProperty(_)&&(o=l[_],o!=null&&rt(t,a,_,o,l,null))}function uw(t,a,l,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,h=null,x=null,_=null,A=null,H=null,J=null;for(V in l){var ie=l[V];if(l.hasOwnProperty(V)&&ie!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":A=ie;default:o.hasOwnProperty(V)||rt(t,a,V,null,o,ie)}}for(var F in o){var V=o[F];if(ie=l[F],o.hasOwnProperty(F)&&(V!=null||ie!=null))switch(F){case"type":h=V;break;case"name":f=V;break;case"checked":H=V;break;case"defaultChecked":J=V;break;case"value":x=V;break;case"defaultValue":_=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,a));break;default:V!==ie&&rt(t,a,F,V,o,ie)}}Gc(t,x,_,A,H,J,h,f);return;case"select":V=x=_=F=null;for(h in l)if(A=l[h],l.hasOwnProperty(h)&&A!=null)switch(h){case"value":break;case"multiple":V=A;default:o.hasOwnProperty(h)||rt(t,a,h,null,o,A)}for(f in o)if(h=o[f],A=l[f],o.hasOwnProperty(f)&&(h!=null||A!=null))switch(f){case"value":F=h;break;case"defaultValue":_=h;break;case"multiple":x=h;default:h!==A&&rt(t,a,f,h,o,A)}a=_,l=x,o=V,F!=null?ei(t,!!l,F,!1):!!o!=!!l&&(a!=null?ei(t,!!l,a,!0):ei(t,!!l,l?[]:"",!1));return;case"textarea":V=F=null;for(_ in l)if(f=l[_],l.hasOwnProperty(_)&&f!=null&&!o.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:rt(t,a,_,null,o,f)}for(x in o)if(f=o[x],h=l[x],o.hasOwnProperty(x)&&(f!=null||h!=null))switch(x){case"value":F=f;break;case"defaultValue":V=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==h&&rt(t,a,x,f,o,h)}tm(t,F,V);return;case"option":for(var pe in l)F=l[pe],l.hasOwnProperty(pe)&&F!=null&&!o.hasOwnProperty(pe)&&(pe==="selected"?t.selected=!1:rt(t,a,pe,null,o,F));for(A in o)F=o[A],V=l[A],o.hasOwnProperty(A)&&F!==V&&(F!=null||V!=null)&&(A==="selected"?t.selected=F&&typeof F!="function"&&typeof F!="symbol":rt(t,a,A,F,o,V));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in l)F=l[Ee],l.hasOwnProperty(Ee)&&F!=null&&!o.hasOwnProperty(Ee)&&rt(t,a,Ee,null,o,F);for(H in o)if(F=o[H],V=l[H],o.hasOwnProperty(H)&&F!==V&&(F!=null||V!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,a));break;default:rt(t,a,H,F,o,V)}return;default:if(Kc(a)){for(var ot in l)F=l[ot],l.hasOwnProperty(ot)&&F!==void 0&&!o.hasOwnProperty(ot)&&zd(t,a,ot,void 0,o,F);for(J in o)F=o[J],V=l[J],!o.hasOwnProperty(J)||F===V||F===void 0&&V===void 0||zd(t,a,J,F,o,V);return}}for(var U in l)F=l[U],l.hasOwnProperty(U)&&F!=null&&!o.hasOwnProperty(U)&&rt(t,a,U,null,o,F);for(ie in o)F=o[ie],V=l[ie],!o.hasOwnProperty(ie)||F===V||F==null&&V==null||rt(t,a,ie,F,o,V)}function iv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function dw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,l=performance.getEntriesByType("resource"),o=0;o<l.length;o++){var f=l[o],h=f.transferSize,x=f.initiatorType,_=f.duration;if(h&&_&&iv(x)){for(x=0,_=f.responseEnd,o+=1;o<l.length;o++){var A=l[o],H=A.startTime;if(H>_)break;var J=A.transferSize,ie=A.initiatorType;J&&iv(ie)&&(A=A.responseEnd,x+=J*(A<_?1:(_-H)/(A-H)))}if(--o,a+=8*(h+x)/(f.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Pd=null,Id=null;function xo(t){return t.nodeType===9?t:t.ownerDocument}function lv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rv(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Bd(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ld=null;function fw(){var t=window.event;return t&&t.type==="popstate"?t===Ld?!1:(Ld=t,!0):(Ld=null,!1)}var ov=typeof setTimeout=="function"?setTimeout:void 0,hw=typeof clearTimeout=="function"?clearTimeout:void 0,cv=typeof Promise=="function"?Promise:void 0,mw=typeof queueMicrotask=="function"?queueMicrotask:typeof cv<"u"?function(t){return cv.resolve(null).then(t).catch(gw)}:ov;function gw(t){setTimeout(function(){throw t})}function ss(t){return t==="head"}function uv(t,a){var l=a,o=0;do{var f=l.nextSibling;if(t.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(o===0){t.removeChild(f),ki(a);return}o--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")o++;else if(l==="html")Bl(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,Bl(l);for(var h=l.firstChild;h;){var x=h.nextSibling,_=h.nodeName;h[qa]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&h.rel.toLowerCase()==="stylesheet"||l.removeChild(h),h=x}}else l==="body"&&Bl(t.ownerDocument.body);l=f}while(l);ki(a)}function dv(t,a){var l=t;t=0;do{var o=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),o&&o.nodeType===8)if(l=o.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=o}while(l)}function qd(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":qd(l),Fc(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function pw(t,a,l,o){for(;t.nodeType===1;){var f=l;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[qa])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(h=t.getAttribute("rel"),h==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(h!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(h=t.getAttribute("src"),(h!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&h&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var h=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===h)return t}else return t;if(t=Yn(t.nextSibling),t===null)break}return null}function vw(t,a,l){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=Yn(t.nextSibling),t===null))return null;return t}function fv(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Yn(t.nextSibling),t===null))return null;return t}function Ud(t){return t.data==="$?"||t.data==="$~"}function $d(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function yw(t,a){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||l.readyState!=="loading")a();else{var o=function(){a(),l.removeEventListener("DOMContentLoaded",o)};l.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Yn(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var Hd=null;function hv(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(a===0)return Yn(t.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}t=t.nextSibling}return null}function mv(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return t;a--}else l!=="/$"&&l!=="/&"||a++}t=t.previousSibling}return null}function gv(t,a,l){switch(a=xo(l),t){case"html":if(t=a.documentElement,!t)throw Error(i(452));return t;case"head":if(t=a.head,!t)throw Error(i(453));return t;case"body":if(t=a.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Bl(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Fc(t)}var Gn=new Map,pv=new Set;function So(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ka=Y.d;Y.d={f:bw,r:xw,D:Sw,C:ww,L:_w,m:Ew,X:Mw,S:Tw,M:Nw};function bw(){var t=ka.f(),a=fo();return t||a}function xw(t){var a=Xs(t);a!==null&&a.tag===5&&a.type==="form"?Ag(a):ka.r(t)}var Ci=typeof document>"u"?null:document;function vv(t,a,l){var o=Ci;if(o&&typeof a=="string"&&a){var f=Ln(a);f='link[rel="'+t+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),pv.has(f)||(pv.add(f),t={rel:t,crossOrigin:l,href:a},o.querySelector(f)===null&&(a=o.createElement("link"),rn(a,"link",t),Vt(a),o.head.appendChild(a)))}}function Sw(t){ka.D(t),vv("dns-prefetch",t,null)}function ww(t,a){ka.C(t,a),vv("preconnect",t,a)}function _w(t,a,l){ka.L(t,a,l);var o=Ci;if(o&&t&&a){var f='link[rel="preload"][as="'+Ln(a)+'"]';a==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+Ln(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+Ln(l.imageSizes)+'"]')):f+='[href="'+Ln(t)+'"]';var h=f;switch(a){case"style":h=Di(t);break;case"script":h=Ri(t)}Gn.has(h)||(t=v({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:t,as:a},l),Gn.set(h,t),o.querySelector(f)!==null||a==="style"&&o.querySelector(Ll(h))||a==="script"&&o.querySelector(ql(h))||(a=o.createElement("link"),rn(a,"link",t),Vt(a),o.head.appendChild(a)))}}function Ew(t,a){ka.m(t,a);var l=Ci;if(l&&t){var o=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+Ln(o)+'"][href="'+Ln(t)+'"]',h=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Ri(t)}if(!Gn.has(h)&&(t=v({rel:"modulepreload",href:t},a),Gn.set(h,t),l.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ql(h)))return}o=l.createElement("link"),rn(o,"link",t),Vt(o),l.head.appendChild(o)}}}function Tw(t,a,l){ka.S(t,a,l);var o=Ci;if(o&&t){var f=Qs(o).hoistableStyles,h=Di(t);a=a||"default";var x=f.get(h);if(!x){var _={loading:0,preload:null};if(x=o.querySelector(Ll(h)))_.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":a},l),(l=Gn.get(h))&&Zd(t,l);var A=x=o.createElement("link");Vt(A),rn(A,"link",t),A._p=new Promise(function(H,J){A.onload=H,A.onerror=J}),A.addEventListener("load",function(){_.loading|=1}),A.addEventListener("error",function(){_.loading|=2}),_.loading|=4,wo(x,a,o)}x={type:"stylesheet",instance:x,count:1,state:_},f.set(h,x)}}}function Mw(t,a){ka.X(t,a);var l=Ci;if(l&&t){var o=Qs(l).hoistableScripts,f=Ri(t),h=o.get(f);h||(h=l.querySelector(ql(f)),h||(t=v({src:t,async:!0},a),(a=Gn.get(f))&&Fd(t,a),h=l.createElement("script"),Vt(h),rn(h,"link",t),l.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(f,h))}}function Nw(t,a){ka.M(t,a);var l=Ci;if(l&&t){var o=Qs(l).hoistableScripts,f=Ri(t),h=o.get(f);h||(h=l.querySelector(ql(f)),h||(t=v({src:t,async:!0,type:"module"},a),(a=Gn.get(f))&&Fd(t,a),h=l.createElement("script"),Vt(h),rn(h,"link",t),l.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(f,h))}}function yv(t,a,l,o){var f=(f=ce.current)?So(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Di(l.href),l=Qs(f).hoistableStyles,o=l.get(a),o||(o={type:"style",instance:null,count:0,state:null},l.set(a,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=Di(l.href);var h=Qs(f).hoistableStyles,x=h.get(t);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(t,x),(h=f.querySelector(Ll(t)))&&!h._p&&(x.instance=h,x.state.loading=5),Gn.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Gn.set(t,l),h||jw(f,t,l,x.state))),a&&o===null)throw Error(i(528,""));return x}if(a&&o!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ri(l),l=Qs(f).hoistableScripts,o=l.get(a),o||(o={type:"script",instance:null,count:0,state:null},l.set(a,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Di(t){return'href="'+Ln(t)+'"'}function Ll(t){return'link[rel="stylesheet"]['+t+"]"}function bv(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function jw(t,a,l,o){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=t.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),rn(a,"link",l),Vt(a),t.head.appendChild(a))}function Ri(t){return'[src="'+Ln(t)+'"]'}function ql(t){return"script[async]"+t}function xv(t,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var o=t.querySelector('style[data-href~="'+Ln(l.href)+'"]');if(o)return a.instance=o,Vt(o),o;var f=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Vt(o),rn(o,"style",f),wo(o,l.precedence,t),a.instance=o;case"stylesheet":f=Di(l.href);var h=t.querySelector(Ll(f));if(h)return a.state.loading|=4,a.instance=h,Vt(h),h;o=bv(l),(f=Gn.get(f))&&Zd(o,f),h=(t.ownerDocument||t).createElement("link"),Vt(h);var x=h;return x._p=new Promise(function(_,A){x.onload=_,x.onerror=A}),rn(h,"link",o),a.state.loading|=4,wo(h,l.precedence,t),a.instance=h;case"script":return h=Ri(l.src),(f=t.querySelector(ql(h)))?(a.instance=f,Vt(f),f):(o=l,(f=Gn.get(h))&&(o=v({},l),Fd(o,f)),t=t.ownerDocument||t,f=t.createElement("script"),Vt(f),rn(f,"link",o),t.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(o=a.instance,a.state.loading|=4,wo(o,l.precedence,t));return a.instance}function wo(t,a,l){for(var o=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,h=f,x=0;x<o.length;x++){var _=o[x];if(_.dataset.precedence===a)h=_;else if(h!==f)break}h?h.parentNode.insertBefore(t,h.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(t,a.firstChild))}function Zd(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Fd(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var _o=null;function Sv(t,a,l){if(_o===null){var o=new Map,f=_o=new Map;f.set(l,o)}else f=_o,o=f.get(l),o||(o=new Map,f.set(l,o));if(o.has(t))return o;for(o.set(t,null),l=l.getElementsByTagName(t),f=0;f<l.length;f++){var h=l[f];if(!(h[qa]||h[Pt]||t==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var x=h.getAttribute(a)||"";x=t+x;var _=o.get(x);_?_.push(h):o.set(x,[h])}}return o}function wv(t,a,l){t=t.ownerDocument||t,t.head.insertBefore(l,a==="title"?t.querySelector("head > title"):null)}function Cw(t,a,l){if(l===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function _v(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Dw(t,a,l,o){if(l.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=Di(o.href),h=a.querySelector(Ll(f));if(h){a=h._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=Eo.bind(t),a.then(t,t)),l.state.loading|=4,l.instance=h,Vt(h);return}h=a.ownerDocument||a,o=bv(o),(f=Gn.get(f))&&Zd(o,f),h=h.createElement("link"),Vt(h);var x=h;x._p=new Promise(function(_,A){x.onload=_,x.onerror=A}),rn(h,"link",o),l.instance=h}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=Eo.bind(t),a.addEventListener("load",l),a.addEventListener("error",l))}}var Yd=0;function Rw(t,a){return t.stylesheets&&t.count===0&&Mo(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var o=setTimeout(function(){if(t.stylesheets&&Mo(t,t.stylesheets),t.unsuspend){var h=t.unsuspend;t.unsuspend=null,h()}},6e4+a);0<t.imgBytes&&Yd===0&&(Yd=62500*dw());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Mo(t,t.stylesheets),t.unsuspend)){var h=t.unsuspend;t.unsuspend=null,h()}},(t.imgBytes>Yd?50:800)+a);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function Eo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Mo(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var To=null;function Mo(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,To=new Map,a.forEach(kw,t),To=null,Eo.call(t))}function kw(t,a){if(!(a.state.loading&4)){var l=To.get(t);if(l)var o=l.get(null);else{l=new Map,To.set(t,l);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<f.length;h++){var x=f[h];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),o=x)}o&&l.set(null,o)}f=a.instance,x=f.getAttribute("data-precedence"),h=l.get(x)||o,h===o&&l.set(null,f),l.set(x,f),this.count++,o=Eo.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),h?h.parentNode.insertBefore(f,h.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),a.state.loading|=4}}var Ul={$$typeof:I,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function Aw(t,a,l,o,f,h,x,_,A){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tt(0),this.hiddenUpdates=Tt(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=h,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function Ev(t,a,l,o,f,h,x,_,A,H,J,ie){return t=new Aw(t,a,l,x,A,H,J,ie,_),a=1,h===!0&&(a|=24),h=Cn(3,null,null,a),t.current=h,h.stateNode=t,a=Tu(),a.refCount++,t.pooledCache=a,a.refCount++,h.memoizedState={element:o,isDehydrated:l,cache:a},Cu(h),t}function Tv(t){return t?(t=oi,t):oi}function Mv(t,a,l,o,f,h){f=Tv(f),o.context===null?o.context=f:o.pendingContext=f,o=Ga(a),o.payload={element:l},h=h===void 0?null:h,h!==null&&(o.callback=h),l=Va(t,o,a),l!==null&&(wn(l,t,a),bl(l,t,a))}function Nv(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<a?l:a}}function Gd(t,a){Nv(t,a),(t=t.alternate)&&Nv(t,a)}function jv(t){if(t.tag===13||t.tag===31){var a=Ms(t,67108864);a!==null&&wn(a,t,67108864),Gd(t,67108864)}}function Cv(t){if(t.tag===13||t.tag===31){var a=On();a=Nn(a);var l=Ms(t,a);l!==null&&wn(l,t,a),Gd(t,a)}}var No=!0;function Ow(t,a,l,o){var f=L.T;L.T=null;var h=Y.p;try{Y.p=2,Vd(t,a,l,o)}finally{Y.p=h,L.T=f}}function zw(t,a,l,o){var f=L.T;L.T=null;var h=Y.p;try{Y.p=8,Vd(t,a,l,o)}finally{Y.p=h,L.T=f}}function Vd(t,a,l,o){if(No){var f=Kd(o);if(f===null)Od(t,a,o,jo,l),Rv(t,o);else if(Iw(f,t,a,l,o))o.stopPropagation();else if(Rv(t,o),a&4&&-1<Pw.indexOf(t)){for(;f!==null;){var h=Xs(f);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var x=X(h.pendingLanes);if(x!==0){var _=h;for(_.pendingLanes|=2,_.entangledLanes|=2;x;){var A=1<<31-kt(x);_.entanglements[1]|=A,x&=~A}ca(h),(Je&6)===0&&(co=Ce()+500,zl(0))}}break;case 31:case 13:_=Ms(h,2),_!==null&&wn(_,h,2),fo(),Gd(h,2)}if(h=Kd(o),h===null&&Od(t,a,o,jo,l),h===f)break;f=h}f!==null&&o.stopPropagation()}else Od(t,a,o,null,l)}}function Kd(t){return t=Xc(t),Wd(t)}var jo=null;function Wd(t){if(jo=null,t=Ws(t),t!==null){var a=c(t);if(a===null)t=null;else{var l=a.tag;if(l===13){if(t=u(a),t!==null)return t;t=null}else if(l===31){if(t=d(a),t!==null)return t;t=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return jo=t,null}function Dv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Zt()){case Mn:return 2;case tn:return 8;case W:case me:return 32;case Ge:return 268435456;default:return 32}default:return 32}}var Xd=!1,is=null,ls=null,rs=null,$l=new Map,Hl=new Map,os=[],Pw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rv(t,a){switch(t){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":ls=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":$l.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hl.delete(a.pointerId)}}function Zl(t,a,l,o,f,h){return t===null||t.nativeEvent!==h?(t={blockedOn:a,domEventName:l,eventSystemFlags:o,nativeEvent:h,targetContainers:[f]},a!==null&&(a=Xs(a),a!==null&&jv(a)),t):(t.eventSystemFlags|=o,a=t.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),t)}function Iw(t,a,l,o,f){switch(a){case"focusin":return is=Zl(is,t,a,l,o,f),!0;case"dragenter":return ls=Zl(ls,t,a,l,o,f),!0;case"mouseover":return rs=Zl(rs,t,a,l,o,f),!0;case"pointerover":var h=f.pointerId;return $l.set(h,Zl($l.get(h)||null,t,a,l,o,f)),!0;case"gotpointercapture":return h=f.pointerId,Hl.set(h,Zl(Hl.get(h)||null,t,a,l,o,f)),!0}return!1}function kv(t){var a=Ws(t.target);if(a!==null){var l=c(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){t.blockedOn=a,fn(t.priority,function(){Cv(l)});return}}else if(a===31){if(a=d(l),a!==null){t.blockedOn=a,fn(t.priority,function(){Cv(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Co(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var l=Kd(t.nativeEvent);if(l===null){l=t.nativeEvent;var o=new l.constructor(l.type,l);Wc=o,l.target.dispatchEvent(o),Wc=null}else return a=Xs(l),a!==null&&jv(a),t.blockedOn=l,!1;a.shift()}return!0}function Av(t,a,l){Co(t)&&l.delete(a)}function Bw(){Xd=!1,is!==null&&Co(is)&&(is=null),ls!==null&&Co(ls)&&(ls=null),rs!==null&&Co(rs)&&(rs=null),$l.forEach(Av),Hl.forEach(Av)}function Do(t,a){t.blockedOn===a&&(t.blockedOn=null,Xd||(Xd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Bw)))}var Ro=null;function Ov(t){Ro!==t&&(Ro=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Ro===t&&(Ro=null);for(var a=0;a<t.length;a+=3){var l=t[a],o=t[a+1],f=t[a+2];if(typeof o!="function"){if(Wd(o||l)===null)continue;break}var h=Xs(l);h!==null&&(t.splice(a,3),a-=3,Ku(h,{pending:!0,data:f,method:l.method,action:o},o,f))}}))}function ki(t){function a(A){return Do(A,t)}is!==null&&Do(is,t),ls!==null&&Do(ls,t),rs!==null&&Do(rs,t),$l.forEach(a),Hl.forEach(a);for(var l=0;l<os.length;l++){var o=os[l];o.blockedOn===t&&(o.blockedOn=null)}for(;0<os.length&&(l=os[0],l.blockedOn===null);)kv(l),l.blockedOn===null&&os.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(o=0;o<l.length;o+=3){var f=l[o],h=l[o+1],x=f[nn]||null;if(typeof h=="function")x||Ov(l);else if(x){var _=null;if(h&&h.hasAttribute("formAction")){if(f=h,x=h[nn]||null)_=x.formAction;else if(Wd(f)!==null)continue}else _=x.action;typeof _=="function"?l[o+1]=_:(l.splice(o,3),o-=3),Ov(l)}}}function zv(){function t(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function a(){f!==null&&(f(),f=null),o||setTimeout(l,20)}function l(){if(!o&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),f!==null&&(f(),f=null)}}}function Qd(t){this._internalRoot=t}ko.prototype.render=Qd.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,o=On();Mv(l,o,t,a,null,null)},ko.prototype.unmount=Qd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Mv(t.current,2,null,t,null,null),fo(),a[ma]=null}};function ko(t){this._internalRoot=t}ko.prototype.unstable_scheduleHydration=function(t){if(t){var a=Te();t={blockedOn:null,target:t,priority:a};for(var l=0;l<os.length&&a!==0&&a<os[l].priority;l++);os.splice(l,0,t),l===0&&kv(t)}};var Pv=n.version;if(Pv!=="19.2.4")throw Error(i(527,Pv,"19.2.4"));Y.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=p(a),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var Lw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ao=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ao.isDisabled&&Ao.supportsFiber)try{un=Ao.inject(Lw),ut=Ao}catch{}}return Yl.createRoot=function(t,a){if(!r(t))throw Error(i(299));var l=!1,o="",f=Hg,h=Zg,x=Fg;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(h=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Ev(t,1,!1,null,null,l,o,null,f,h,x,zv),t[ma]=a.current,Ad(t),new Qd(a)},Yl.hydrateRoot=function(t,a,l){if(!r(t))throw Error(i(299));var o=!1,f="",h=Hg,x=Zg,_=Fg,A=null;return l!=null&&(l.unstable_strictMode===!0&&(o=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(h=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(_=l.onRecoverableError),l.formState!==void 0&&(A=l.formState)),a=Ev(t,1,!0,a,l??null,o,f,A,h,x,_,zv),a.context=Tv(null),l=a.current,o=On(),o=Nn(o),f=Ga(o),f.callback=null,Va(l,f,o),l=o,a.current.lanes=l,Le(a,l),ca(a),t[ma]=a.current,Ad(t),new ko(a)},Yl.version="19.2.4",Yl}var Yv;function Kw(){if(Yv)return tf.exports;Yv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),tf.exports=Vw(),tf.exports}var Ww=Kw(),Pa=L0();const Xw=fh(Pa),_c=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Qi(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function mh(e){return"nodeType"in e}function En(e){var n,s;return e?Qi(e)?e:mh(e)&&(n=(s=e.ownerDocument)==null?void 0:s.defaultView)!=null?n:window:window}function gh(e){const{Document:n}=En(e);return e instanceof n}function mr(e){return Qi(e)?!1:e instanceof En(e).HTMLElement}function q0(e){return e instanceof En(e).SVGElement}function Ji(e){return e?Qi(e)?e.document:mh(e)?gh(e)?e:mr(e)||q0(e)?e.ownerDocument:document:document:document}const ps=_c?w.useLayoutEffect:w.useEffect;function ph(e){const n=w.useRef(e);return ps(()=>{n.current=e}),w.useCallback(function(){for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return n.current==null?void 0:n.current(...i)},[])}function Qw(){const e=w.useRef(null),n=w.useCallback((i,r)=>{e.current=setInterval(i,r)},[]),s=w.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,s]}function ar(e,n){n===void 0&&(n=[e]);const s=w.useRef(e);return ps(()=>{s.current!==e&&(s.current=e)},n),s}function gr(e,n){const s=w.useRef();return w.useMemo(()=>{const i=e(s.current);return s.current=i,i},[...n])}function nc(e){const n=ph(e),s=w.useRef(null),i=w.useCallback(r=>{r!==s.current&&n?.(r,s.current),s.current=r},[]);return[s,i]}function If(e){const n=w.useRef();return w.useEffect(()=>{n.current=e},[e]),n.current}let lf={};function Ec(e,n){return w.useMemo(()=>{if(n)return n;const s=lf[e]==null?0:lf[e]+1;return lf[e]=s,e+"-"+s},[e,n])}function U0(e){return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),r=1;r<s;r++)i[r-1]=arguments[r];return i.reduce((c,u)=>{const d=Object.entries(u);for(const[g,p]of d){const y=c[g];y!=null&&(c[g]=y+e*p)}return c},{...n})}}const Hi=U0(1),sr=U0(-1);function Jw(e){return"clientX"in e&&"clientY"in e}function $0(e){if(!e)return!1;const{KeyboardEvent:n}=En(e.target);return n&&e instanceof n}function e_(e){if(!e)return!1;const{TouchEvent:n}=En(e.target);return n&&e instanceof n}function Bf(e){if(e_(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:s}=e.touches[0];return{x:n,y:s}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:s}=e.changedTouches[0];return{x:n,y:s}}}return Jw(e)?{x:e.clientX,y:e.clientY}:null}const ac=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:s}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(s?Math.round(s):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:s}=e;return"scaleX("+n+") scaleY("+s+")"}},Transform:{toString(e){if(e)return[ac.Translate.toString(e),ac.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:s,easing:i}=e;return n+" "+s+"ms "+i}}}),Gv="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function t_(e){return e.matches(Gv)?e:e.querySelector(Gv)}const n_={display:"none"};function a_(e){let{id:n,value:s}=e;return Xt.createElement("div",{id:n,style:n_},s)}function s_(e){let{id:n,announcement:s,ariaLiveType:i="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Xt.createElement("div",{id:n,style:r,role:"status","aria-live":i,"aria-atomic":!0},s)}function i_(){const[e,n]=w.useState("");return{announce:w.useCallback(i=>{i!=null&&n(i)},[]),announcement:e}}const H0=w.createContext(null);function l_(e){const n=w.useContext(H0);w.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function r_(){const[e]=w.useState(()=>new Set),n=w.useCallback(i=>(e.add(i),()=>e.delete(i)),[e]);return[w.useCallback(i=>{let{type:r,event:c}=i;e.forEach(u=>{var d;return(d=u[r])==null?void 0:d.call(u,c)})},[e]),n]}const o_={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},c_={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was moved over droppable area "+s.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was dropped over droppable area "+s.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function u_(e){let{announcements:n=c_,container:s,hiddenTextDescribedById:i,screenReaderInstructions:r=o_}=e;const{announce:c,announcement:u}=i_(),d=Ec("DndLiveRegion"),[g,p]=w.useState(!1);if(w.useEffect(()=>{p(!0)},[]),l_(w.useMemo(()=>({onDragStart(v){let{active:b}=v;c(n.onDragStart({active:b}))},onDragMove(v){let{active:b,over:S}=v;n.onDragMove&&c(n.onDragMove({active:b,over:S}))},onDragOver(v){let{active:b,over:S}=v;c(n.onDragOver({active:b,over:S}))},onDragEnd(v){let{active:b,over:S}=v;c(n.onDragEnd({active:b,over:S}))},onDragCancel(v){let{active:b,over:S}=v;c(n.onDragCancel({active:b,over:S}))}}),[c,n])),!g)return null;const y=Xt.createElement(Xt.Fragment,null,Xt.createElement(a_,{id:i,value:r.draggable}),Xt.createElement(s_,{id:d,announcement:u}));return s?Pa.createPortal(y,s):y}var Yt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Yt||(Yt={}));function sc(){}function Vv(e,n){return w.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function d_(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return w.useMemo(()=>[...n].filter(i=>i!=null),[...n])}const sa=Object.freeze({x:0,y:0});function Z0(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function F0(e,n){let{data:{value:s}}=e,{data:{value:i}}=n;return s-i}function f_(e,n){let{data:{value:s}}=e,{data:{value:i}}=n;return i-s}function Kv(e){let{left:n,top:s,height:i,width:r}=e;return[{x:n,y:s},{x:n+r,y:s},{x:n,y:s+i},{x:n+r,y:s+i}]}function Y0(e,n){if(!e||e.length===0)return null;const[s]=e;return s[n]}function Wv(e,n,s){return n===void 0&&(n=e.left),s===void 0&&(s=e.top),{x:n+e.width*.5,y:s+e.height*.5}}const h_=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:i}=e;const r=Wv(n,n.left,n.top),c=[];for(const u of i){const{id:d}=u,g=s.get(d);if(g){const p=Z0(Wv(g),r);c.push({id:d,data:{droppableContainer:u,value:p}})}}return c.sort(F0)},m_=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:i}=e;const r=Kv(n),c=[];for(const u of i){const{id:d}=u,g=s.get(d);if(g){const p=Kv(g),y=r.reduce((b,S,T)=>b+Z0(p[T],S),0),v=Number((y/4).toFixed(4));c.push({id:d,data:{droppableContainer:u,value:v}})}}return c.sort(F0)};function g_(e,n){const s=Math.max(n.top,e.top),i=Math.max(n.left,e.left),r=Math.min(n.left+n.width,e.left+e.width),c=Math.min(n.top+n.height,e.top+e.height),u=r-i,d=c-s;if(i<r&&s<c){const g=n.width*n.height,p=e.width*e.height,y=u*d,v=y/(g+p-y);return Number(v.toFixed(4))}return 0}const p_=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:i}=e;const r=[];for(const c of i){const{id:u}=c,d=s.get(u);if(d){const g=g_(d,n);g>0&&r.push({id:u,data:{droppableContainer:c,value:g}})}}return r.sort(f_)};function v_(e,n,s){return{...e,scaleX:n&&s?n.width/s.width:1,scaleY:n&&s?n.height/s.height:1}}function G0(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:sa}function y_(e){return function(s){for(var i=arguments.length,r=new Array(i>1?i-1:0),c=1;c<i;c++)r[c-1]=arguments[c];return r.reduce((u,d)=>({...u,top:u.top+e*d.y,bottom:u.bottom+e*d.y,left:u.left+e*d.x,right:u.right+e*d.x}),{...s})}}const b_=y_(1);function x_(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function S_(e,n,s){const i=x_(n);if(!i)return e;const{scaleX:r,scaleY:c,x:u,y:d}=i,g=e.left-u-(1-r)*parseFloat(s),p=e.top-d-(1-c)*parseFloat(s.slice(s.indexOf(" ")+1)),y=r?e.width/r:e.width,v=c?e.height/c:e.height;return{width:y,height:v,top:p,right:g+y,bottom:p+v,left:g}}const w_={ignoreTransform:!1};function pr(e,n){n===void 0&&(n=w_);let s=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:p,transformOrigin:y}=En(e).getComputedStyle(e);p&&(s=S_(s,p,y))}const{top:i,left:r,width:c,height:u,bottom:d,right:g}=s;return{top:i,left:r,width:c,height:u,bottom:d,right:g}}function Xv(e){return pr(e,{ignoreTransform:!0})}function __(e){const n=e.innerWidth,s=e.innerHeight;return{top:0,left:0,right:n,bottom:s,width:n,height:s}}function E_(e,n){return n===void 0&&(n=En(e).getComputedStyle(e)),n.position==="fixed"}function T_(e,n){n===void 0&&(n=En(e).getComputedStyle(e));const s=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const c=n[r];return typeof c=="string"?s.test(c):!1})}function Tc(e,n){const s=[];function i(r){if(n!=null&&s.length>=n||!r)return s;if(gh(r)&&r.scrollingElement!=null&&!s.includes(r.scrollingElement))return s.push(r.scrollingElement),s;if(!mr(r)||q0(r)||s.includes(r))return s;const c=En(e).getComputedStyle(r);return r!==e&&T_(r,c)&&s.push(r),E_(r,c)?s:i(r.parentNode)}return e?i(e):s}function V0(e){const[n]=Tc(e,1);return n??null}function rf(e){return!_c||!e?null:Qi(e)?e:mh(e)?gh(e)||e===Ji(e).scrollingElement?window:mr(e)?e:null:null}function K0(e){return Qi(e)?e.scrollX:e.scrollLeft}function W0(e){return Qi(e)?e.scrollY:e.scrollTop}function Lf(e){return{x:K0(e),y:W0(e)}}var Wt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Wt||(Wt={}));function X0(e){return!_c||!e?!1:e===document.scrollingElement}function Q0(e){const n={x:0,y:0},s=X0(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-s.width,y:e.scrollHeight-s.height},r=e.scrollTop<=n.y,c=e.scrollLeft<=n.x,u=e.scrollTop>=i.y,d=e.scrollLeft>=i.x;return{isTop:r,isLeft:c,isBottom:u,isRight:d,maxScroll:i,minScroll:n}}const M_={x:.2,y:.2};function N_(e,n,s,i,r){let{top:c,left:u,right:d,bottom:g}=s;i===void 0&&(i=10),r===void 0&&(r=M_);const{isTop:p,isBottom:y,isLeft:v,isRight:b}=Q0(e),S={x:0,y:0},T={x:0,y:0},E={height:n.height*r.y,width:n.width*r.x};return!p&&c<=n.top+E.height?(S.y=Wt.Backward,T.y=i*Math.abs((n.top+E.height-c)/E.height)):!y&&g>=n.bottom-E.height&&(S.y=Wt.Forward,T.y=i*Math.abs((n.bottom-E.height-g)/E.height)),!b&&d>=n.right-E.width?(S.x=Wt.Forward,T.x=i*Math.abs((n.right-E.width-d)/E.width)):!v&&u<=n.left+E.width&&(S.x=Wt.Backward,T.x=i*Math.abs((n.left+E.width-u)/E.width)),{direction:S,speed:T}}function j_(e){if(e===document.scrollingElement){const{innerWidth:c,innerHeight:u}=window;return{top:0,left:0,right:c,bottom:u,width:c,height:u}}const{top:n,left:s,right:i,bottom:r}=e.getBoundingClientRect();return{top:n,left:s,right:i,bottom:r,width:e.clientWidth,height:e.clientHeight}}function J0(e){return e.reduce((n,s)=>Hi(n,Lf(s)),sa)}function C_(e){return e.reduce((n,s)=>n+K0(s),0)}function D_(e){return e.reduce((n,s)=>n+W0(s),0)}function R_(e,n){if(n===void 0&&(n=pr),!e)return;const{top:s,left:i,bottom:r,right:c}=n(e);V0(e)&&(r<=0||c<=0||s>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const k_=[["x",["left","right"],C_],["y",["top","bottom"],D_]];class vh{constructor(n,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=Tc(s),r=J0(i);this.rect={...n},this.width=n.width,this.height=n.height;for(const[c,u,d]of k_)for(const g of u)Object.defineProperty(this,g,{get:()=>{const p=d(i),y=r[c]-p;return this.rect[g]+y},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ql{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(s=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...s)})},this.target=n}add(n,s,i){var r;(r=this.target)==null||r.addEventListener(n,s,i),this.listeners.push([n,s,i])}}function A_(e){const{EventTarget:n}=En(e);return e instanceof n?e:Ji(e)}function of(e,n){const s=Math.abs(e.x),i=Math.abs(e.y);return typeof n=="number"?Math.sqrt(s**2+i**2)>n:"x"in n&&"y"in n?s>n.x&&i>n.y:"x"in n?s>n.x:"y"in n?i>n.y:!1}var Vn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Vn||(Vn={}));function Qv(e){e.preventDefault()}function O_(e){e.stopPropagation()}var Fe;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Fe||(Fe={}));const eb={start:[Fe.Space,Fe.Enter],cancel:[Fe.Esc],end:[Fe.Space,Fe.Enter,Fe.Tab]},z_=(e,n)=>{let{currentCoordinates:s}=n;switch(e.code){case Fe.Right:return{...s,x:s.x+25};case Fe.Left:return{...s,x:s.x-25};case Fe.Down:return{...s,y:s.y+25};case Fe.Up:return{...s,y:s.y-25}}};class yh{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:s}}=n;this.props=n,this.listeners=new Ql(Ji(s)),this.windowListeners=new Ql(En(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vn.Resize,this.handleCancel),this.windowListeners.add(Vn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:s}=this.props,i=n.node.current;i&&R_(i),s(sa)}handleKeyDown(n){if($0(n)){const{active:s,context:i,options:r}=this.props,{keyboardCodes:c=eb,coordinateGetter:u=z_,scrollBehavior:d="smooth"}=r,{code:g}=n;if(c.end.includes(g)){this.handleEnd(n);return}if(c.cancel.includes(g)){this.handleCancel(n);return}const{collisionRect:p}=i.current,y=p?{x:p.left,y:p.top}:sa;this.referenceCoordinates||(this.referenceCoordinates=y);const v=u(n,{active:s,context:i.current,currentCoordinates:y});if(v){const b=sr(v,y),S={x:0,y:0},{scrollableAncestors:T}=i.current;for(const E of T){const C=n.code,{isTop:O,isRight:R,isLeft:I,isBottom:B,maxScroll:q,minScroll:N}=Q0(E),j=j_(E),D={x:Math.min(C===Fe.Right?j.right-j.width/2:j.right,Math.max(C===Fe.Right?j.left:j.left+j.width/2,v.x)),y:Math.min(C===Fe.Down?j.bottom-j.height/2:j.bottom,Math.max(C===Fe.Down?j.top:j.top+j.height/2,v.y))},K=C===Fe.Right&&!R||C===Fe.Left&&!I,re=C===Fe.Down&&!B||C===Fe.Up&&!O;if(K&&D.x!==v.x){const he=E.scrollLeft+b.x,se=C===Fe.Right&&he<=q.x||C===Fe.Left&&he>=N.x;if(se&&!b.y){E.scrollTo({left:he,behavior:d});return}se?S.x=E.scrollLeft-he:S.x=C===Fe.Right?E.scrollLeft-q.x:E.scrollLeft-N.x,S.x&&E.scrollBy({left:-S.x,behavior:d});break}else if(re&&D.y!==v.y){const he=E.scrollTop+b.y,se=C===Fe.Down&&he<=q.y||C===Fe.Up&&he>=N.y;if(se&&!b.x){E.scrollTo({top:he,behavior:d});return}se?S.y=E.scrollTop-he:S.y=C===Fe.Down?E.scrollTop-q.y:E.scrollTop-N.y,S.y&&E.scrollBy({top:-S.y,behavior:d});break}}this.handleMove(n,Hi(sr(v,this.referenceCoordinates),S))}}}handleMove(n,s){const{onMove:i}=this.props;n.preventDefault(),i(s)}handleEnd(n){const{onEnd:s}=this.props;n.preventDefault(),this.detach(),s()}handleCancel(n){const{onCancel:s}=this.props;n.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}yh.activators=[{eventName:"onKeyDown",handler:(e,n,s)=>{let{keyboardCodes:i=eb,onActivation:r}=n,{active:c}=s;const{code:u}=e.nativeEvent;if(i.start.includes(u)){const d=c.activatorNode.current;return d&&e.target!==d?!1:(e.preventDefault(),r?.({event:e.nativeEvent}),!0)}return!1}}];function Jv(e){return!!(e&&"distance"in e)}function ey(e){return!!(e&&"delay"in e)}class bh{constructor(n,s,i){var r;i===void 0&&(i=A_(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=s;const{event:c}=n,{target:u}=c;this.props=n,this.events=s,this.document=Ji(u),this.documentListeners=new Ql(this.document),this.listeners=new Ql(i),this.windowListeners=new Ql(En(u)),this.initialCoordinates=(r=Bf(c))!=null?r:sa,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:s,bypassActivationConstraint:i}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(Vn.Resize,this.handleCancel),this.windowListeners.add(Vn.DragStart,Qv),this.windowListeners.add(Vn.VisibilityChange,this.handleCancel),this.windowListeners.add(Vn.ContextMenu,Qv),this.documentListeners.add(Vn.Keydown,this.handleKeydown),s){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ey(s)){this.timeoutId=setTimeout(this.handleStart,s.delay),this.handlePending(s);return}if(Jv(s)){this.handlePending(s);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,s){const{active:i,onPending:r}=this.props;r(i,n,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:n}=this,{onStart:s}=this.props;n&&(this.activated=!0,this.documentListeners.add(Vn.Click,O_,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vn.SelectionChange,this.removeTextSelection),s(n))}handleMove(n){var s;const{activated:i,initialCoordinates:r,props:c}=this,{onMove:u,options:{activationConstraint:d}}=c;if(!r)return;const g=(s=Bf(n))!=null?s:sa,p=sr(r,g);if(!i&&d){if(Jv(d)){if(d.tolerance!=null&&of(p,d.tolerance))return this.handleCancel();if(of(p,d.distance))return this.handleStart()}if(ey(d)&&of(p,d.tolerance))return this.handleCancel();this.handlePending(d,p);return}n.cancelable&&n.preventDefault(),u(g)}handleEnd(){const{onAbort:n,onEnd:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleCancel(){const{onAbort:n,onCancel:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleKeydown(n){n.code===Fe.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const P_={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class xh extends bh{constructor(n){const{event:s}=n,i=Ji(s.target);super(n,P_,i)}}xh.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:i}=n;return!s.isPrimary||s.button!==0?!1:(i?.({event:s}),!0)}}];const I_={move:{name:"mousemove"},end:{name:"mouseup"}};var qf;(function(e){e[e.RightClick=2]="RightClick"})(qf||(qf={}));class B_ extends bh{constructor(n){super(n,I_,Ji(n.event.target))}}B_.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:i}=n;return s.button===qf.RightClick?!1:(i?.({event:s}),!0)}}];const cf={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class L_ extends bh{constructor(n){super(n,cf)}static setup(){return window.addEventListener(cf.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(cf.move.name,n)};function n(){}}}L_.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:i}=n;const{touches:r}=s;return r.length>1?!1:(i?.({event:s}),!0)}}];var Jl;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Jl||(Jl={}));var ic;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(ic||(ic={}));function q_(e){let{acceleration:n,activator:s=Jl.Pointer,canScroll:i,draggingRect:r,enabled:c,interval:u=5,order:d=ic.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:y,delta:v,threshold:b}=e;const S=$_({delta:v,disabled:!c}),[T,E]=Qw(),C=w.useRef({x:0,y:0}),O=w.useRef({x:0,y:0}),R=w.useMemo(()=>{switch(s){case Jl.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Jl.DraggableRect:return r}},[s,r,g]),I=w.useRef(null),B=w.useCallback(()=>{const N=I.current;if(!N)return;const j=C.current.x*O.current.x,D=C.current.y*O.current.y;N.scrollBy(j,D)},[]),q=w.useMemo(()=>d===ic.TreeOrder?[...p].reverse():p,[d,p]);w.useEffect(()=>{if(!c||!p.length||!R){E();return}for(const N of q){if(i?.(N)===!1)continue;const j=p.indexOf(N),D=y[j];if(!D)continue;const{direction:K,speed:re}=N_(N,D,R,n,b);for(const he of["x","y"])S[he][K[he]]||(re[he]=0,K[he]=0);if(re.x>0||re.y>0){E(),I.current=N,T(B,u),C.current=re,O.current=K;return}}C.current={x:0,y:0},O.current={x:0,y:0},E()},[n,B,i,E,c,u,JSON.stringify(R),JSON.stringify(S),T,p,q,y,JSON.stringify(b)])}const U_={x:{[Wt.Backward]:!1,[Wt.Forward]:!1},y:{[Wt.Backward]:!1,[Wt.Forward]:!1}};function $_(e){let{delta:n,disabled:s}=e;const i=If(n);return gr(r=>{if(s||!i||!r)return U_;const c={x:Math.sign(n.x-i.x),y:Math.sign(n.y-i.y)};return{x:{[Wt.Backward]:r.x[Wt.Backward]||c.x===-1,[Wt.Forward]:r.x[Wt.Forward]||c.x===1},y:{[Wt.Backward]:r.y[Wt.Backward]||c.y===-1,[Wt.Forward]:r.y[Wt.Forward]||c.y===1}}},[s,n,i])}function H_(e,n){const s=n!=null?e.get(n):void 0,i=s?s.node.current:null;return gr(r=>{var c;return n==null?null:(c=i??r)!=null?c:null},[i,n])}function Z_(e,n){return w.useMemo(()=>e.reduce((s,i)=>{const{sensor:r}=i,c=r.activators.map(u=>({eventName:u.eventName,handler:n(u.handler,i)}));return[...s,...c]},[]),[e,n])}var ir;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ir||(ir={}));var Uf;(function(e){e.Optimized="optimized"})(Uf||(Uf={}));const ty=new Map;function F_(e,n){let{dragging:s,dependencies:i,config:r}=n;const[c,u]=w.useState(null),{frequency:d,measure:g,strategy:p}=r,y=w.useRef(e),v=C(),b=ar(v),S=w.useCallback(function(O){O===void 0&&(O=[]),!b.current&&u(R=>R===null?O:R.concat(O.filter(I=>!R.includes(I))))},[b]),T=w.useRef(null),E=gr(O=>{if(v&&!s)return ty;if(!O||O===ty||y.current!==e||c!=null){const R=new Map;for(let I of e){if(!I)continue;if(c&&c.length>0&&!c.includes(I.id)&&I.rect.current){R.set(I.id,I.rect.current);continue}const B=I.node.current,q=B?new vh(g(B),B):null;I.rect.current=q,q&&R.set(I.id,q)}return R}return O},[e,c,s,v,g]);return w.useEffect(()=>{y.current=e},[e]),w.useEffect(()=>{v||S()},[s,v]),w.useEffect(()=>{c&&c.length>0&&u(null)},[JSON.stringify(c)]),w.useEffect(()=>{v||typeof d!="number"||T.current!==null||(T.current=setTimeout(()=>{S(),T.current=null},d))},[d,v,S,...i]),{droppableRects:E,measureDroppableContainers:S,measuringScheduled:c!=null};function C(){switch(p){case ir.Always:return!1;case ir.BeforeDragging:return s;default:return!s}}}function tb(e,n){return gr(s=>e?s||(typeof n=="function"?n(e):e):null,[n,e])}function Y_(e,n){return tb(e,n)}function G_(e){let{callback:n,disabled:s}=e;const i=ph(n),r=w.useMemo(()=>{if(s||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(i)},[i,s]);return w.useEffect(()=>()=>r?.disconnect(),[r]),r}function Mc(e){let{callback:n,disabled:s}=e;const i=ph(n),r=w.useMemo(()=>{if(s||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(i)},[s]);return w.useEffect(()=>()=>r?.disconnect(),[r]),r}function V_(e){return new vh(pr(e),e)}function ny(e,n,s){n===void 0&&(n=V_);const[i,r]=w.useState(null);function c(){r(g=>{if(!e)return null;if(e.isConnected===!1){var p;return(p=g??s)!=null?p:null}const y=n(e);return JSON.stringify(g)===JSON.stringify(y)?g:y})}const u=G_({callback(g){if(e)for(const p of g){const{type:y,target:v}=p;if(y==="childList"&&v instanceof HTMLElement&&v.contains(e)){c();break}}}}),d=Mc({callback:c});return ps(()=>{c(),e?(d?.observe(e),u?.observe(document.body,{childList:!0,subtree:!0})):(d?.disconnect(),u?.disconnect())},[e]),i}function K_(e){const n=tb(e);return G0(e,n)}const ay=[];function W_(e){const n=w.useRef(e),s=gr(i=>e?i&&i!==ay&&e&&n.current&&e.parentNode===n.current.parentNode?i:Tc(e):ay,[e]);return w.useEffect(()=>{n.current=e},[e]),s}function X_(e){const[n,s]=w.useState(null),i=w.useRef(e),r=w.useCallback(c=>{const u=rf(c.target);u&&s(d=>d?(d.set(u,Lf(u)),new Map(d)):null)},[]);return w.useEffect(()=>{const c=i.current;if(e!==c){u(c);const d=e.map(g=>{const p=rf(g);return p?(p.addEventListener("scroll",r,{passive:!0}),[p,Lf(p)]):null}).filter(g=>g!=null);s(d.length?new Map(d):null),i.current=e}return()=>{u(e),u(c)};function u(d){d.forEach(g=>{const p=rf(g);p?.removeEventListener("scroll",r)})}},[r,e]),w.useMemo(()=>e.length?n?Array.from(n.values()).reduce((c,u)=>Hi(c,u),sa):J0(e):sa,[e,n])}function sy(e,n){n===void 0&&(n=[]);const s=w.useRef(null);return w.useEffect(()=>{s.current=null},n),w.useEffect(()=>{const i=e!==sa;i&&!s.current&&(s.current=e),!i&&s.current&&(s.current=null)},[e]),s.current?sr(e,s.current):sa}function Q_(e){w.useEffect(()=>{if(!_c)return;const n=e.map(s=>{let{sensor:i}=s;return i.setup==null?void 0:i.setup()});return()=>{for(const s of n)s?.()}},e.map(n=>{let{sensor:s}=n;return s}))}function J_(e,n){return w.useMemo(()=>e.reduce((s,i)=>{let{eventName:r,handler:c}=i;return s[r]=u=>{c(u,n)},s},{}),[e,n])}function nb(e){return w.useMemo(()=>e?__(e):null,[e])}const iy=[];function eE(e,n){n===void 0&&(n=pr);const[s]=e,i=nb(s?En(s):null),[r,c]=w.useState(iy);function u(){c(()=>e.length?e.map(g=>X0(g)?i:new vh(n(g),g)):iy)}const d=Mc({callback:u});return ps(()=>{d?.disconnect(),u(),e.forEach(g=>d?.observe(g))},[e]),r}function tE(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return mr(n)?n:e}function nE(e){let{measure:n}=e;const[s,i]=w.useState(null),r=w.useCallback(p=>{for(const{target:y}of p)if(mr(y)){i(v=>{const b=n(y);return v?{...v,width:b.width,height:b.height}:b});break}},[n]),c=Mc({callback:r}),u=w.useCallback(p=>{const y=tE(p);c?.disconnect(),y&&c?.observe(y),i(y?n(y):null)},[n,c]),[d,g]=nc(u);return w.useMemo(()=>({nodeRef:d,rect:s,setRef:g}),[s,d,g])}const aE=[{sensor:xh,options:{}},{sensor:yh,options:{}}],sE={current:{}},Xo={draggable:{measure:Xv},droppable:{measure:Xv,strategy:ir.WhileDragging,frequency:Uf.Optimized},dragOverlay:{measure:pr}};class er extends Map{get(n){var s;return n!=null&&(s=super.get(n))!=null?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:s}=n;return!s})}getNodeFor(n){var s,i;return(s=(i=this.get(n))==null?void 0:i.node.current)!=null?s:void 0}}const iE={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new er,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:sc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Xo,measureDroppableContainers:sc,windowRect:null,measuringScheduled:!1},lE={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:sc,draggableNodes:new Map,over:null,measureDroppableContainers:sc},Nc=w.createContext(lE),rE=w.createContext(iE);function oE(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new er}}}function cE(e,n){switch(n.type){case Yt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case Yt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case Yt.DragEnd:case Yt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Yt.RegisterDroppable:{const{element:s}=n,{id:i}=s,r=new er(e.droppable.containers);return r.set(i,s),{...e,droppable:{...e.droppable,containers:r}}}case Yt.SetDroppableDisabled:{const{id:s,key:i,disabled:r}=n,c=e.droppable.containers.get(s);if(!c||i!==c.key)return e;const u=new er(e.droppable.containers);return u.set(s,{...c,disabled:r}),{...e,droppable:{...e.droppable,containers:u}}}case Yt.UnregisterDroppable:{const{id:s,key:i}=n,r=e.droppable.containers.get(s);if(!r||i!==r.key)return e;const c=new er(e.droppable.containers);return c.delete(s),{...e,droppable:{...e.droppable,containers:c}}}default:return e}}function uE(e){let{disabled:n}=e;const{active:s,activatorEvent:i,draggableNodes:r}=w.useContext(Nc),c=If(i),u=If(s?.id);return w.useEffect(()=>{if(!n&&!i&&c&&u!=null){if(!$0(c)||document.activeElement===c.target)return;const d=r.get(u);if(!d)return;const{activatorNode:g,node:p}=d;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const y of[g.current,p.current]){if(!y)continue;const v=t_(y);if(v){v.focus();break}}})}},[i,n,r,u,c]),null}function dE(e,n){let{transform:s,...i}=n;return e!=null&&e.length?e.reduce((r,c)=>c({transform:r,...i}),s):s}function fE(e){return w.useMemo(()=>({draggable:{...Xo.draggable,...e?.draggable},droppable:{...Xo.droppable,...e?.droppable},dragOverlay:{...Xo.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function hE(e){let{activeNode:n,measure:s,initialRect:i,config:r=!0}=e;const c=w.useRef(!1),{x:u,y:d}=typeof r=="boolean"?{x:r,y:r}:r;ps(()=>{if(!u&&!d||!n){c.current=!1;return}if(c.current||!i)return;const p=n?.node.current;if(!p||p.isConnected===!1)return;const y=s(p),v=G0(y,i);if(u||(v.x=0),d||(v.y=0),c.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const b=V0(p);b&&b.scrollBy({top:v.y,left:v.x})}},[n,u,d,i,s])}const ab=w.createContext({...sa,scaleX:1,scaleY:1});var ds;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ds||(ds={}));const mE=w.memo(function(n){var s,i,r,c;let{id:u,accessibility:d,autoScroll:g=!0,children:p,sensors:y=aE,collisionDetection:v=p_,measuring:b,modifiers:S,...T}=n;const E=w.useReducer(cE,void 0,oE),[C,O]=E,[R,I]=r_(),[B,q]=w.useState(ds.Uninitialized),N=B===ds.Initialized,{draggable:{active:j,nodes:D,translate:K},droppable:{containers:re}}=C,he=j!=null?D.get(j):null,se=w.useRef({initial:null,translated:null}),Z=w.useMemo(()=>{var Et;return j!=null?{id:j,data:(Et=he?.data)!=null?Et:sE,rect:se}:null},[j,he]),le=w.useRef(null),[Q,L]=w.useState(null),[Y,ae]=w.useState(null),k=ar(T,Object.values(T)),G=Ec("DndDescribedBy",u),M=w.useMemo(()=>re.getEnabled(),[re]),z=fE(b),{droppableRects:ee,measureDroppableContainers:oe,measuringScheduled:ue}=F_(M,{dragging:N,dependencies:[K.x,K.y],config:z.droppable}),ce=H_(D,j),ye=w.useMemo(()=>Y?Bf(Y):null,[Y]),be=pt(),ge=Y_(ce,z.draggable.measure);hE({activeNode:j!=null?D.get(j):null,config:be.layoutShiftCompensation,initialRect:ge,measure:z.draggable.measure});const _e=ny(ce,z.draggable.measure,ge),Be=ny(ce?ce.parentElement:null),it=w.useRef({activatorEvent:null,active:null,activeNode:ce,collisionRect:null,collisions:null,droppableRects:ee,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:re,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Rt=re.getNodeFor((s=it.current.over)==null?void 0:s.id),ct=nE({measure:z.dragOverlay.measure}),Gt=(i=ct.nodeRef.current)!=null?i:ce,ht=N?(r=ct.rect)!=null?r:_e:null,Jt=!!(ct.nodeRef.current&&ct.rect),en=K_(Jt?null:_e),Ht=nb(Gt?En(Gt):null),de=W_(N?Rt??ce:null),ze=eE(de),De=dE(S,{transform:{x:K.x-en.x,y:K.y-en.y,scaleX:1,scaleY:1},activatorEvent:Y,active:Z,activeNodeRect:_e,containerNodeRect:Be,draggingNodeRect:ht,over:it.current.over,overlayNodeRect:ct.rect,scrollableAncestors:de,scrollableAncestorRects:ze,windowRect:Ht}),We=ye?Hi(ye,K):null,Ce=X_(de),Zt=sy(Ce),Mn=sy(Ce,[_e]),tn=Hi(De,Zt),W=ht?b_(ht,De):null,me=Z&&W?v({active:Z,collisionRect:W,droppableRects:ee,droppableContainers:M,pointerCoordinates:We}):null,Ge=Y0(me,"id"),[Ye,cn]=w.useState(null),un=Jt?De:Hi(De,Mn),ut=v_(un,(c=Ye?.rect)!=null?c:null,_e),zt=w.useRef(null),kt=w.useCallback((Et,X)=>{let{sensor:fe,options:Me}=X;if(le.current==null)return;const Ae=D.get(le.current);if(!Ae)return;const Xe=Et.nativeEvent,Tt=new fe({active:le.current,activeNode:Ae,event:Xe,options:Me,context:it,onAbort(Pe){if(!D.get(Pe))return;const{onDragAbort:mt}=k.current,we={id:Pe};mt?.(we),R({type:"onDragAbort",event:we})},onPending(Pe,xt,mt,we){if(!D.get(Pe))return;const{onDragPending:dn}=k.current,Te={id:Pe,constraint:xt,initialCoordinates:mt,offset:we};dn?.(Te),R({type:"onDragPending",event:Te})},onStart(Pe){const xt=le.current;if(xt==null)return;const mt=D.get(xt);if(!mt)return;const{onDragStart:we}=k.current,Nn={activatorEvent:Xe,active:{id:xt,data:mt.data,rect:se}};Pa.unstable_batchedUpdates(()=>{we?.(Nn),q(ds.Initializing),O({type:Yt.DragStart,initialCoordinates:Pe,active:xt}),R({type:"onDragStart",event:Nn}),L(zt.current),ae(Xe)})},onMove(Pe){O({type:Yt.DragMove,coordinates:Pe})},onEnd:Le(Yt.DragEnd),onCancel:Le(Yt.DragCancel)});zt.current=Tt;function Le(Pe){return async function(){const{active:mt,collisions:we,over:Nn,scrollAdjustedTranslate:dn}=it.current;let Te=null;if(mt&&dn){const{cancelDrop:fn}=k.current;Te={activatorEvent:Xe,active:mt,collisions:we,delta:dn,over:Nn},Pe===Yt.DragEnd&&typeof fn=="function"&&await Promise.resolve(fn(Te))&&(Pe=Yt.DragCancel)}le.current=null,Pa.unstable_batchedUpdates(()=>{O({type:Pe}),q(ds.Uninitialized),cn(null),L(null),ae(null),zt.current=null;const fn=Pe===Yt.DragEnd?"onDragEnd":"onDragCancel";if(Te){const Qe=k.current[fn];Qe?.(Te),R({type:fn,event:Te})}})}}},[D]),tl=w.useCallback((Et,X)=>(fe,Me)=>{const Ae=fe.nativeEvent,Xe=D.get(Me);if(le.current!==null||!Xe||Ae.dndKit||Ae.defaultPrevented)return;const Tt={active:Xe};Et(fe,X.options,Tt)===!0&&(Ae.dndKit={capturedBy:X.sensor},le.current=Me,kt(fe,X))},[D,kt]),Gs=Z_(y,tl);Q_(y),ps(()=>{_e&&B===ds.Initializing&&q(ds.Initialized)},[_e,B]),w.useEffect(()=>{const{onDragMove:Et}=k.current,{active:X,activatorEvent:fe,collisions:Me,over:Ae}=it.current;if(!X||!fe)return;const Xe={active:X,activatorEvent:fe,collisions:Me,delta:{x:tn.x,y:tn.y},over:Ae};Pa.unstable_batchedUpdates(()=>{Et?.(Xe),R({type:"onDragMove",event:Xe})})},[tn.x,tn.y]),w.useEffect(()=>{const{active:Et,activatorEvent:X,collisions:fe,droppableContainers:Me,scrollAdjustedTranslate:Ae}=it.current;if(!Et||le.current==null||!X||!Ae)return;const{onDragOver:Xe}=k.current,Tt=Me.get(Ge),Le=Tt&&Tt.rect.current?{id:Tt.id,rect:Tt.rect.current,data:Tt.data,disabled:Tt.disabled}:null,Pe={active:Et,activatorEvent:X,collisions:fe,delta:{x:Ae.x,y:Ae.y},over:Le};Pa.unstable_batchedUpdates(()=>{cn(Le),Xe?.(Pe),R({type:"onDragOver",event:Pe})})},[Ge]),ps(()=>{it.current={activatorEvent:Y,active:Z,activeNode:ce,collisionRect:W,collisions:me,droppableRects:ee,draggableNodes:D,draggingNode:Gt,draggingNodeRect:ht,droppableContainers:re,over:Ye,scrollableAncestors:de,scrollAdjustedTranslate:tn},se.current={initial:ht,translated:W}},[Z,ce,me,W,D,Gt,ht,ee,re,Ye,de,tn]),q_({...be,delta:K,draggingRect:W,pointerCoordinates:We,scrollableAncestors:de,scrollableAncestorRects:ze});const Vs=w.useMemo(()=>({active:Z,activeNode:ce,activeNodeRect:_e,activatorEvent:Y,collisions:me,containerNodeRect:Be,dragOverlay:ct,draggableNodes:D,droppableContainers:re,droppableRects:ee,over:Ye,measureDroppableContainers:oe,scrollableAncestors:de,scrollableAncestorRects:ze,measuringConfiguration:z,measuringScheduled:ue,windowRect:Ht}),[Z,ce,_e,Y,me,Be,ct,D,re,ee,Ye,oe,de,ze,z,ue,Ht]),ha=w.useMemo(()=>({activatorEvent:Y,activators:Gs,active:Z,activeNodeRect:_e,ariaDescribedById:{draggable:G},dispatch:O,draggableNodes:D,over:Ye,measureDroppableContainers:oe}),[Y,Gs,Z,_e,O,G,D,Ye,oe]);return Xt.createElement(H0.Provider,{value:I},Xt.createElement(Nc.Provider,{value:ha},Xt.createElement(rE.Provider,{value:Vs},Xt.createElement(ab.Provider,{value:ut},p)),Xt.createElement(uE,{disabled:d?.restoreFocus===!1})),Xt.createElement(u_,{...d,hiddenTextDescribedById:G}));function pt(){const Et=Q?.autoScrollEnabled===!1,X=typeof g=="object"?g.enabled===!1:g===!1,fe=N&&!Et&&!X;return typeof g=="object"?{...g,enabled:fe}:{enabled:fe}}}),gE=w.createContext(null),ly="button",pE="Draggable";function sb(e){let{id:n,data:s,disabled:i=!1,attributes:r}=e;const c=Ec(pE),{activators:u,activatorEvent:d,active:g,activeNodeRect:p,ariaDescribedById:y,draggableNodes:v,over:b}=w.useContext(Nc),{role:S=ly,roleDescription:T="draggable",tabIndex:E=0}=r??{},C=g?.id===n,O=w.useContext(C?ab:gE),[R,I]=nc(),[B,q]=nc(),N=J_(u,n),j=ar(s);ps(()=>(v.set(n,{id:n,key:c,node:R,activatorNode:B,data:j}),()=>{const K=v.get(n);K&&K.key===c&&v.delete(n)}),[v,n]);const D=w.useMemo(()=>({role:S,tabIndex:E,"aria-disabled":i,"aria-pressed":C&&S===ly?!0:void 0,"aria-roledescription":T,"aria-describedby":y.draggable}),[i,S,E,C,T,y.draggable]);return{active:g,activatorEvent:d,activeNodeRect:p,attributes:D,isDragging:C,listeners:i?void 0:N,node:R,over:b,setNodeRef:I,setActivatorNodeRef:q,transform:O}}const vE="Droppable",yE={timeout:25};function ib(e){let{data:n,disabled:s=!1,id:i,resizeObserverConfig:r}=e;const c=Ec(vE),{active:u,dispatch:d,over:g,measureDroppableContainers:p}=w.useContext(Nc),y=w.useRef({disabled:s}),v=w.useRef(!1),b=w.useRef(null),S=w.useRef(null),{disabled:T,updateMeasurementsFor:E,timeout:C}={...yE,...r},O=ar(E??i),R=w.useCallback(()=>{if(!v.current){v.current=!0;return}S.current!=null&&clearTimeout(S.current),S.current=setTimeout(()=>{p(Array.isArray(O.current)?O.current:[O.current]),S.current=null},C)},[C]),I=Mc({callback:R,disabled:T||!u}),B=w.useCallback((D,K)=>{I&&(K&&(I.unobserve(K),v.current=!1),D&&I.observe(D))},[I]),[q,N]=nc(B),j=ar(n);return w.useEffect(()=>{!I||!q.current||(I.disconnect(),v.current=!1,I.observe(q.current))},[q,I]),w.useEffect(()=>(d({type:Yt.RegisterDroppable,element:{id:i,key:c,disabled:s,node:q,rect:b,data:j}}),()=>d({type:Yt.UnregisterDroppable,key:c,id:i})),[i]),w.useEffect(()=>{s!==y.current.disabled&&(d({type:Yt.SetDroppableDisabled,id:i,key:c,disabled:s}),y.current.disabled=s)},[i,c,s,d]),{active:u,rect:b,isOver:g?.id===i,node:q,over:g,setNodeRef:N}}function lc(e){if(!e)return!1;const n=e.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const bE=[Fe.Down,Fe.Right,Fe.Up,Fe.Left],xE=(e,n)=>{let{context:{active:s,collisionRect:i,droppableRects:r,droppableContainers:c,over:u,scrollableAncestors:d}}=n;if(bE.includes(e.code)){if(e.preventDefault(),!s||!i)return;const g=[];c.getEnabled().forEach(v=>{if(!v||v!=null&&v.disabled)return;const b=r.get(v.id);if(b)switch(e.code){case Fe.Down:i.top<b.top&&g.push(v);break;case Fe.Up:i.top>b.top&&g.push(v);break;case Fe.Left:i.left>b.left&&g.push(v);break;case Fe.Right:i.left<b.left&&g.push(v);break}});const p=m_({collisionRect:i,droppableRects:r,droppableContainers:g});let y=Y0(p,"id");if(y===u?.id&&p.length>1&&(y=p[1].id),y!=null){const v=c.get(s.id),b=c.get(y),S=b?r.get(b.id):null,T=b?.node.current;if(T&&S&&v&&b){const C=Tc(T).some((N,j)=>d[j]!==N),O=lb(v,b),R=SE(v,b),I=C||!O?{x:0,y:0}:{x:R?i.width-S.width:0,y:R?i.height-S.height:0},B={x:S.left,y:S.top};return I.x&&I.y?B:sr(B,I)}}}};function lb(e,n){return!lc(e)||!lc(n)?!1:e.data.current.sortable.containerId===n.data.current.sortable.containerId}function SE(e,n){return!lc(e)||!lc(n)||!lb(e,n)?!1:e.data.current.sortable.index<n.data.current.sortable.index}const ry=e=>Symbol.iterator in e,oy=e=>"entries"in e,cy=(e,n)=>{const s=e instanceof Map?e:new Map(e.entries()),i=n instanceof Map?n:new Map(n.entries());if(s.size!==i.size)return!1;for(const[r,c]of s)if(!i.has(r)||!Object.is(c,i.get(r)))return!1;return!0},wE=(e,n)=>{const s=e[Symbol.iterator](),i=n[Symbol.iterator]();let r=s.next(),c=i.next();for(;!r.done&&!c.done;){if(!Object.is(r.value,c.value))return!1;r=s.next(),c=i.next()}return!!r.done&&!!c.done};function _E(e,n){return Object.is(e,n)?!0:typeof e!="object"||e===null||typeof n!="object"||n===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(n)?!1:ry(e)&&ry(n)?oy(e)&&oy(n)?cy(e,n):wE(e,n):cy({entries:()=>Object.entries(e)},{entries:()=>Object.entries(n)})}function EE(e){const n=Xt.useRef(void 0);return s=>{const i=e(s);return _E(n.current,i)?n.current:n.current=i}}const TE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ME=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,s,i)=>i?i.toUpperCase():s.toLowerCase()),uy=e=>{const n=ME(e);return n.charAt(0).toUpperCase()+n.slice(1)},rb=(...e)=>e.filter((n,s,i)=>!!n&&n.trim()!==""&&i.indexOf(n)===s).join(" ").trim(),NE=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};var jE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const CE=w.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:r="",children:c,iconNode:u,...d},g)=>w.createElement("svg",{ref:g,...jE,width:n,height:n,stroke:e,strokeWidth:i?Number(s)*24/Number(n):s,className:rb("lucide",r),...!c&&!NE(d)&&{"aria-hidden":"true"},...d},[...u.map(([p,y])=>w.createElement(p,y)),...Array.isArray(c)?c:[c]]));const Qt=(e,n)=>{const s=w.forwardRef(({className:i,...r},c)=>w.createElement(CE,{ref:c,iconNode:n,className:rb(`lucide-${TE(uy(e))}`,`lucide-${e}`,i),...r}));return s.displayName=uy(e),s};const DE=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],RE=Qt("copy",DE);const kE=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],AE=Qt("external-link",kE);const OE=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],zE=Qt("git-branch",OE);const PE=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],IE=Qt("grip-vertical",PE);const BE=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],LE=Qt("hammer",BE);const qE=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Sh=Qt("link-2",qE);const UE=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ob=Qt("lock",UE);const $E=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],HE=Qt("pin",$E);const ZE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],FE=Qt("plus",ZE);const YE=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],GE=Qt("search",YE);const VE=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],dy=Qt("sliders-horizontal",VE);const KE=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],WE=Qt("sparkles",KE);const XE=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],cb=Qt("trash-2",XE);const QE=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]],ub=Qt("tree-pine",QE);const JE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],eT=Qt("triangle-alert",JE);const tT=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],nT=Qt("undo-2",tT);const aT=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],sT=Qt("upload",aT);const iT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],lT=Qt("x",iT),db="build-solver:theme-mode",fb="minimal";function rT(e){return e==="classic"?"classic":fb}function hb(){return typeof window>"u"?fb:rT(window.localStorage.getItem(db))}function oT(e){typeof window>"u"||window.localStorage.setItem(db,e)}function mb(e){typeof document>"u"||(document.documentElement.dataset.wbTheme=e)}const vs=["helmet","chestplate","leggings","boots","ring","bracelet","necklace","weapon"],tt=["helmet","chestplate","leggings","boots","ring1","ring2","bracelet","necklace","weapon"],fa=e=>e==="ring1"||e==="ring2"?"ring":e,rc=e=>{switch(e){case"ring1":return"Ring 1";case"ring2":return"Ring 2";default:return e.charAt(0).toUpperCase()+e.slice(1)}};function wh(e){return e==="weapon"?"Weapon":e.charAt(0).toUpperCase()+e.slice(1)}const gb={spear:"Warrior",dagger:"Assassin",wand:"Mage",bow:"Archer",relik:"Shaman"};function oc(e){return gb[e]??null}function cT(e,n){return e in gb?"weapon":vs.includes(e)?e:n==="weapon"?"weapon":e==="ring"?"ring":null}function pb(e,n){return!n||!e.classReq?!0:e.classReq===n}function uT(e,n){return e.level<=n}const dT=["hp","hpBonus","hprRaw","hprPct","mr","ms","ls","sdPct","sdRaw","mdPct","mdRaw","poison","spd","atkTier","averageDps","strReq","dexReq","intReq","defReq","agiReq","str","dex","int","def","agi","eDef","tDef","wDef","fDef","aDef","eDamPct","tDamPct","wDamPct","fDamPct","aDamPct","damPct","rDamPct","nDamPct","slots","lvl","spPct1","spRaw1","spPct2","spRaw2","spPct3","spRaw3","spPct4","spRaw4"];function ke(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const n=Number(e);if(Number.isFinite(n))return n}return 0}function zn(e){return typeof e=="string"?e:""}function fT(e){return Array.isArray(e)?e.filter(n=>typeof n=="string"):[]}function hT(e,n){const s=zn(e).trim();if(!s)return oc(n);switch(s.toLowerCase()){case"warrior":return"Warrior";case"assassin":return"Assassin";case"mage":return"Mage";case"archer":return"Archer";case"shaman":return"Shaman";default:return oc(n)}}function mT(e){return{hp:ke(e.hp),hpBonus:ke(e.hpBonus),hprRaw:ke(e.hprRaw),hprPct:ke(e.hprPct),mr:ke(e.mr),ms:ke(e.ms),ls:ke(e.ls),sdPct:ke(e.sdPct),sdRaw:ke(e.sdRaw),mdPct:ke(e.mdPct),mdRaw:ke(e.mdRaw),poison:ke(e.poison),spd:ke(e.spd),atkTier:ke(e.atkTier),baseDps:ke(e.averageDps),reqStr:ke(e.strReq),reqDex:ke(e.dexReq),reqInt:ke(e.intReq),reqDef:ke(e.defReq),reqAgi:ke(e.agiReq),spStr:ke(e.str),spDex:ke(e.dex),spInt:ke(e.int),spDef:ke(e.def),spAgi:ke(e.agi),eDef:ke(e.eDef),tDef:ke(e.tDef),wDef:ke(e.wDef),fDef:ke(e.fDef),aDef:ke(e.aDef),eDamPct:ke(e.eDamPct),tDamPct:ke(e.tDamPct),wDamPct:ke(e.wDamPct),fDamPct:ke(e.fDamPct),aDamPct:ke(e.aDamPct),damPct:ke(e.damPct),rDamPct:ke(e.rDamPct),nDamPct:ke(e.nDamPct)}}function gT(e){const n={};for(const s of dT)n[s]=ke(e[s]);return n.reqTotal=n.strReq+n.dexReq+n.intReq+n.defReq+n.agiReq,n.skillPointTotal=n.str+n.dex+n.int+n.def+n.agi,n.offenseScore=n.averageDps+n.sdPct*1.4+n.mdPct*1.15+n.sdRaw*.12+n.mdRaw*.12+(n.damPct+n.rDamPct+n.nDamPct)*.8+(n.eDamPct+n.tDamPct+n.wDamPct+n.fDamPct+n.aDamPct)*.5+n.atkTier*7+n.poison*.03,n.ehpProxy=n.hp+n.hpBonus+(n.eDef+n.tDef+n.wDef+n.fDef+n.aDef)*.45+n.hprRaw*1.2+n.hprPct*2.5,n.utilityScore=n.spd*1.8+n.mr*8+n.ms*7+n.ls*6,n.sumSpPct=n.spPct1+n.spPct2+n.spPct3+n.spPct4,n.sumSpRaw=n.spRaw1+n.spRaw2+n.spRaw3+n.spRaw4,n}function pT(e){if(typeof e.remapID<"u")return null;const n=zn(e.type).toLowerCase(),s=zn(e.category).toLowerCase(),i=cT(n,s);if(!i)return null;const r=zn(e.displayName)||zn(e.name),c=zn(e.tier)||"Normal",u=ke(e.lvl),d=fT(e.majorIds),g=mT(e),p=gT(e),y={baseDps:g.baseDps,offense:p.offenseScore,ehpProxy:p.ehpProxy,utility:p.utilityScore,skillPointTotal:p.skillPointTotal,reqTotal:p.reqTotal},v=[r,zn(e.name),zn(e.lore),n,c,s,zn(e.classReq),...d];return{id:ke(e.id),name:zn(e.name),displayName:r,category:i,type:n,sourceCategory:s,tier:c,level:u,classReq:hT(e.classReq,n),majorIds:d,powderSlots:ke(e.slots),atkSpd:zn(e.atkSpd),restricted:zn(e.restrict)!=="",deprecated:zn(e.restrict).toUpperCase()==="DEPRECATED",numeric:g,numericIndex:p,searchText:v.filter(Boolean).join(" ").toLowerCase(),majorIdsText:d.join(" ").toLowerCase(),roughScoreFields:y,legacyRaw:e}}function vT(e,n,s){if(!Number.isFinite(s))return;const i=e[n];if(!i){e[n]={min:s,max:s};return}i.min=Math.min(i.min,s),i.max=Math.max(i.max,s)}function yT(e){const n=e.items.map(pT).filter(E=>E!==null);n.sort((E,C)=>E.displayName.localeCompare(C.displayName));const s=new Map,i=new Map,r=new Map,c=new Map(vs.map(E=>[E,[]])),u=new Set,d=new Set,g=new Set,p=new Set,y={},v=new Map;for(const E of n){s.set(E.id,E),i.set(E.displayName.toLowerCase(),E.id),r.has(E.type)||r.set(E.type,[]),r.get(E.type).push(E.id),c.get(E.category).push(E.id),u.add(E.tier),d.add(E.type),E.classReq&&g.add(E.classReq);for(const C of E.majorIds)C&&p.add(C);for(const[C,O]of Object.entries(E.numericIndex))vT(y,C,O)}const b=e.sets??{},S=new Map;for(const[E,C]of Object.entries(b)){const O=C?.bonuses;if(!Array.isArray(O))continue;const R=[];O.forEach((B,q)=>{B&&typeof B=="object"&&B.illegal&&R.push(q+1)}),R.length>0&&v.set(E,{illegalCounts:R});const I=C?.items;if(Array.isArray(I))for(const B of I)typeof B=="string"&&S.set(B.toLowerCase(),E)}const T=new Map;for(const[E,C]of S){const O=i.get(E);O!=null&&T.set(O,C)}return{version:String(e.version??"unknown"),items:n,itemsById:s,itemIdByName:i,itemsByType:r,itemsByCategory:c,facetsMeta:{categories:[...vs],types:[...d].sort(),tiers:[...u].sort(),classReqs:[...g].sort(),majorIds:[...p].sort(),numericRanges:y},setsMeta:v,itemSetName:T}}class bT{snapshotPromise=null;async getCatalog(){return this.snapshotPromise||(this.snapshotPromise=this.loadCatalog()),this.snapshotPromise}async getItemById(n){return(await this.getCatalog()).itemsById.get(n)}async loadCatalog(){const n=await this.fetchCompressPayload();return yT(n)}async fetchCompressPayload(){const n=c=>{if(typeof window>"u")return c;const u=window.location.href.split("?")[0].replace(/\/[^/]*$/,"/")||window.location.origin+"/";return new URL(c,u).href},s=[n("compress.json"),n("./compress.json"),"./compress.json","../compress.json","compress.json"];let i=null;const r=[];for(const c of s)try{const u=await fetch(c,{cache:"force-cache"});if(!u.ok)throw new Error(`Failed to fetch ${c}: ${u.status}`);const d=await u.json();if(!d?.items||!Array.isArray(d.items))throw new Error(`Invalid compress payload from ${c}`);return d}catch(u){i=u,r.push(u instanceof Error?u.message:`Failed to fetch ${c}`)}throw i instanceof Error?new Error(`Unable to load compress.json. Tried: ${s.join(", ")}. Last error: ${i.message}`):new Error(`Unable to load compress.json. Tried: ${s.join(", ")}. Failures: ${r.join(" | ")}`)}}const xT=new bT;function ne(e,n,s){function i(d,g){if(d._zod||Object.defineProperty(d,"_zod",{value:{def:g,constr:u,traits:new Set},enumerable:!1}),d._zod.traits.has(e))return;d._zod.traits.add(e),n(d,g);const p=u.prototype,y=Object.keys(p);for(let v=0;v<y.length;v++){const b=y[v];b in d||(d[b]=p[b].bind(d))}}const r=s?.Parent??Object;class c extends r{}Object.defineProperty(c,"name",{value:e});function u(d){var g;const p=s?.Parent?new c:this;i(p,d),(g=p._zod).deferred??(g.deferred=[]);for(const y of p._zod.deferred)y();return p}return Object.defineProperty(u,"init",{value:i}),Object.defineProperty(u,Symbol.hasInstance,{value:d=>s?.Parent&&d instanceof s.Parent?!0:d?._zod?.traits?.has(e)}),Object.defineProperty(u,"name",{value:e}),u}class Zi extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class vb extends Error{constructor(n){super(`Encountered unidirectional transform during encode: ${n}`),this.name="ZodEncodeError"}}const yb={};function ys(e){return yb}function bb(e){const n=Object.values(e).filter(i=>typeof i=="number");return Object.entries(e).filter(([i,r])=>n.indexOf(+i)===-1).map(([i,r])=>r)}function $f(e,n){return typeof n=="bigint"?n.toString():n}function _h(e){return{get value(){{const n=e();return Object.defineProperty(this,"value",{value:n}),n}}}}function Eh(e){return e==null}function Th(e){const n=e.startsWith("^")?1:0,s=e.endsWith("$")?e.length-1:e.length;return e.slice(n,s)}function ST(e,n){const s=(e.toString().split(".")[1]||"").length,i=n.toString();let r=(i.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(i)){const g=i.match(/\d?e-(\d?)/);g?.[1]&&(r=Number.parseInt(g[1]))}const c=s>r?s:r,u=Number.parseInt(e.toFixed(c).replace(".","")),d=Number.parseInt(n.toFixed(c).replace(".",""));return u%d/10**c}const fy=Symbol("evaluating");function st(e,n,s){let i;Object.defineProperty(e,n,{get(){if(i!==fy)return i===void 0&&(i=fy,i=s()),i},set(r){Object.defineProperty(e,n,{value:r})},configurable:!0})}function Fs(e,n,s){Object.defineProperty(e,n,{value:s,writable:!0,enumerable:!0,configurable:!0})}function xs(...e){const n={};for(const s of e){const i=Object.getOwnPropertyDescriptors(s);Object.assign(n,i)}return Object.defineProperties({},n)}function hy(e){return JSON.stringify(e)}function wT(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const xb="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function cc(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const _T=_h(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Wi(e){if(cc(e)===!1)return!1;const n=e.constructor;if(n===void 0||typeof n!="function")return!0;const s=n.prototype;return!(cc(s)===!1||Object.prototype.hasOwnProperty.call(s,"isPrototypeOf")===!1)}function Sb(e){return Wi(e)?{...e}:Array.isArray(e)?[...e]:e}const ET=new Set(["string","number","symbol"]);function jc(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ss(e,n,s){const i=new e._zod.constr(n??e._zod.def);return(!n||s?.parent)&&(i._zod.parent=e),i}function Se(e){const n=e;if(!n)return{};if(typeof n=="string")return{error:()=>n};if(n?.message!==void 0){if(n?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");n.error=n.message}return delete n.message,typeof n.error=="string"?{...n,error:()=>n.error}:n}function TT(e){return Object.keys(e).filter(n=>e[n]._zod.optin==="optional"&&e[n]._zod.optout==="optional")}const MT={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function NT(e,n){const s=e._zod.def,i=s.checks;if(i&&i.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const c=xs(e._zod.def,{get shape(){const u={};for(const d in n){if(!(d in s.shape))throw new Error(`Unrecognized key: "${d}"`);n[d]&&(u[d]=s.shape[d])}return Fs(this,"shape",u),u},checks:[]});return Ss(e,c)}function jT(e,n){const s=e._zod.def,i=s.checks;if(i&&i.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const c=xs(e._zod.def,{get shape(){const u={...e._zod.def.shape};for(const d in n){if(!(d in s.shape))throw new Error(`Unrecognized key: "${d}"`);n[d]&&delete u[d]}return Fs(this,"shape",u),u},checks:[]});return Ss(e,c)}function CT(e,n){if(!Wi(n))throw new Error("Invalid input to extend: expected a plain object");const s=e._zod.def.checks;if(s&&s.length>0){const c=e._zod.def.shape;for(const u in n)if(Object.getOwnPropertyDescriptor(c,u)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const r=xs(e._zod.def,{get shape(){const c={...e._zod.def.shape,...n};return Fs(this,"shape",c),c}});return Ss(e,r)}function DT(e,n){if(!Wi(n))throw new Error("Invalid input to safeExtend: expected a plain object");const s=xs(e._zod.def,{get shape(){const i={...e._zod.def.shape,...n};return Fs(this,"shape",i),i}});return Ss(e,s)}function RT(e,n){const s=xs(e._zod.def,{get shape(){const i={...e._zod.def.shape,...n._zod.def.shape};return Fs(this,"shape",i),i},get catchall(){return n._zod.def.catchall},checks:[]});return Ss(e,s)}function kT(e,n,s){const r=n._zod.def.checks;if(r&&r.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const u=xs(n._zod.def,{get shape(){const d=n._zod.def.shape,g={...d};if(s)for(const p in s){if(!(p in d))throw new Error(`Unrecognized key: "${p}"`);s[p]&&(g[p]=e?new e({type:"optional",innerType:d[p]}):d[p])}else for(const p in d)g[p]=e?new e({type:"optional",innerType:d[p]}):d[p];return Fs(this,"shape",g),g},checks:[]});return Ss(n,u)}function AT(e,n,s){const i=xs(n._zod.def,{get shape(){const r=n._zod.def.shape,c={...r};if(s)for(const u in s){if(!(u in c))throw new Error(`Unrecognized key: "${u}"`);s[u]&&(c[u]=new e({type:"nonoptional",innerType:r[u]}))}else for(const u in r)c[u]=new e({type:"nonoptional",innerType:r[u]});return Fs(this,"shape",c),c}});return Ss(n,i)}function qi(e,n=0){if(e.aborted===!0)return!0;for(let s=n;s<e.issues.length;s++)if(e.issues[s]?.continue!==!0)return!0;return!1}function Ui(e,n){return n.map(s=>{var i;return(i=s).path??(i.path=[]),s.path.unshift(e),s})}function Oo(e){return typeof e=="string"?e:e?.message}function bs(e,n,s){const i={...e,path:e.path??[]};if(!e.message){const r=Oo(e.inst?._zod.def?.error?.(e))??Oo(n?.error?.(e))??Oo(s.customError?.(e))??Oo(s.localeError?.(e))??"Invalid input";i.message=r}return delete i.inst,delete i.continue,n?.reportInput||delete i.input,i}function Mh(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function lr(...e){const[n,s,i]=e;return typeof n=="string"?{message:n,code:"custom",input:s,inst:i}:{...n}}const wb=(e,n)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:n,enumerable:!1}),e.message=JSON.stringify(n,$f,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},_b=ne("$ZodError",wb),Eb=ne("$ZodError",wb,{Parent:Error});function OT(e,n=s=>s.message){const s={},i=[];for(const r of e.issues)r.path.length>0?(s[r.path[0]]=s[r.path[0]]||[],s[r.path[0]].push(n(r))):i.push(n(r));return{formErrors:i,fieldErrors:s}}function zT(e,n=s=>s.message){const s={_errors:[]},i=r=>{for(const c of r.issues)if(c.code==="invalid_union"&&c.errors.length)c.errors.map(u=>i({issues:u}));else if(c.code==="invalid_key")i({issues:c.issues});else if(c.code==="invalid_element")i({issues:c.issues});else if(c.path.length===0)s._errors.push(n(c));else{let u=s,d=0;for(;d<c.path.length;){const g=c.path[d];d===c.path.length-1?(u[g]=u[g]||{_errors:[]},u[g]._errors.push(n(c))):u[g]=u[g]||{_errors:[]},u=u[g],d++}}};return i(e),s}const Nh=e=>(n,s,i,r)=>{const c=i?Object.assign(i,{async:!1}):{async:!1},u=n._zod.run({value:s,issues:[]},c);if(u instanceof Promise)throw new Zi;if(u.issues.length){const d=new(r?.Err??e)(u.issues.map(g=>bs(g,c,ys())));throw xb(d,r?.callee),d}return u.value},jh=e=>async(n,s,i,r)=>{const c=i?Object.assign(i,{async:!0}):{async:!0};let u=n._zod.run({value:s,issues:[]},c);if(u instanceof Promise&&(u=await u),u.issues.length){const d=new(r?.Err??e)(u.issues.map(g=>bs(g,c,ys())));throw xb(d,r?.callee),d}return u.value},Cc=e=>(n,s,i)=>{const r=i?{...i,async:!1}:{async:!1},c=n._zod.run({value:s,issues:[]},r);if(c instanceof Promise)throw new Zi;return c.issues.length?{success:!1,error:new(e??_b)(c.issues.map(u=>bs(u,r,ys())))}:{success:!0,data:c.value}},PT=Cc(Eb),Dc=e=>async(n,s,i)=>{const r=i?Object.assign(i,{async:!0}):{async:!0};let c=n._zod.run({value:s,issues:[]},r);return c instanceof Promise&&(c=await c),c.issues.length?{success:!1,error:new e(c.issues.map(u=>bs(u,r,ys())))}:{success:!0,data:c.value}},IT=Dc(Eb),BT=e=>(n,s,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Nh(e)(n,s,r)},LT=e=>(n,s,i)=>Nh(e)(n,s,i),qT=e=>async(n,s,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return jh(e)(n,s,r)},UT=e=>async(n,s,i)=>jh(e)(n,s,i),$T=e=>(n,s,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Cc(e)(n,s,r)},HT=e=>(n,s,i)=>Cc(e)(n,s,i),ZT=e=>async(n,s,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Dc(e)(n,s,r)},FT=e=>async(n,s,i)=>Dc(e)(n,s,i),YT=/^[cC][^\s-]{8,}$/,GT=/^[0-9a-z]+$/,VT=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,KT=/^[0-9a-vA-V]{20}$/,WT=/^[A-Za-z0-9]{27}$/,XT=/^[a-zA-Z0-9_-]{21}$/,QT=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,JT=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,my=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,eM=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,tM="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function nM(){return new RegExp(tM,"u")}const aM=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,sM=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,iM=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,lM=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,rM=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Tb=/^[A-Za-z0-9_-]*$/,oM=/^\+[1-9]\d{6,14}$/,Mb="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",cM=new RegExp(`^${Mb}$`);function Nb(e){const n="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${n}`:e.precision===0?`${n}:[0-5]\\d`:`${n}:[0-5]\\d\\.\\d{${e.precision}}`:`${n}(?::[0-5]\\d(?:\\.\\d+)?)?`}function uM(e){return new RegExp(`^${Nb(e)}$`)}function dM(e){const n=Nb({precision:e.precision}),s=["Z"];e.local&&s.push(""),e.offset&&s.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${n}(?:${s.join("|")})`;return new RegExp(`^${Mb}T(?:${i})$`)}const fM=e=>{const n=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${n}$`)},hM=/^-?\d+$/,jb=/^-?\d+(?:\.\d+)?$/,mM=/^(?:true|false)$/i,gM=/^[^A-Z]*$/,pM=/^[^a-z]*$/,Tn=ne("$ZodCheck",(e,n)=>{var s;e._zod??(e._zod={}),e._zod.def=n,(s=e._zod).onattach??(s.onattach=[])}),Cb={number:"number",bigint:"bigint",object:"date"},Db=ne("$ZodCheckLessThan",(e,n)=>{Tn.init(e,n);const s=Cb[typeof n.value];e._zod.onattach.push(i=>{const r=i._zod.bag,c=(n.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;n.value<c&&(n.inclusive?r.maximum=n.value:r.exclusiveMaximum=n.value)}),e._zod.check=i=>{(n.inclusive?i.value<=n.value:i.value<n.value)||i.issues.push({origin:s,code:"too_big",maximum:typeof n.value=="object"?n.value.getTime():n.value,input:i.value,inclusive:n.inclusive,inst:e,continue:!n.abort})}}),Rb=ne("$ZodCheckGreaterThan",(e,n)=>{Tn.init(e,n);const s=Cb[typeof n.value];e._zod.onattach.push(i=>{const r=i._zod.bag,c=(n.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;n.value>c&&(n.inclusive?r.minimum=n.value:r.exclusiveMinimum=n.value)}),e._zod.check=i=>{(n.inclusive?i.value>=n.value:i.value>n.value)||i.issues.push({origin:s,code:"too_small",minimum:typeof n.value=="object"?n.value.getTime():n.value,input:i.value,inclusive:n.inclusive,inst:e,continue:!n.abort})}}),vM=ne("$ZodCheckMultipleOf",(e,n)=>{Tn.init(e,n),e._zod.onattach.push(s=>{var i;(i=s._zod.bag).multipleOf??(i.multipleOf=n.value)}),e._zod.check=s=>{if(typeof s.value!=typeof n.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof s.value=="bigint"?s.value%n.value===BigInt(0):ST(s.value,n.value)===0)||s.issues.push({origin:typeof s.value,code:"not_multiple_of",divisor:n.value,input:s.value,inst:e,continue:!n.abort})}}),yM=ne("$ZodCheckNumberFormat",(e,n)=>{Tn.init(e,n),n.format=n.format||"float64";const s=n.format?.includes("int"),i=s?"int":"number",[r,c]=MT[n.format];e._zod.onattach.push(u=>{const d=u._zod.bag;d.format=n.format,d.minimum=r,d.maximum=c,s&&(d.pattern=hM)}),e._zod.check=u=>{const d=u.value;if(s){if(!Number.isInteger(d)){u.issues.push({expected:i,format:n.format,code:"invalid_type",continue:!1,input:d,inst:e});return}if(!Number.isSafeInteger(d)){d>0?u.issues.push({input:d,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,inclusive:!0,continue:!n.abort}):u.issues.push({input:d,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,inclusive:!0,continue:!n.abort});return}}d<r&&u.issues.push({origin:"number",input:d,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!n.abort}),d>c&&u.issues.push({origin:"number",input:d,code:"too_big",maximum:c,inclusive:!0,inst:e,continue:!n.abort})}}),bM=ne("$ZodCheckMaxLength",(e,n)=>{var s;Tn.init(e,n),(s=e._zod.def).when??(s.when=i=>{const r=i.value;return!Eh(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag.maximum??Number.POSITIVE_INFINITY;n.maximum<r&&(i._zod.bag.maximum=n.maximum)}),e._zod.check=i=>{const r=i.value;if(r.length<=n.maximum)return;const u=Mh(r);i.issues.push({origin:u,code:"too_big",maximum:n.maximum,inclusive:!0,input:r,inst:e,continue:!n.abort})}}),xM=ne("$ZodCheckMinLength",(e,n)=>{var s;Tn.init(e,n),(s=e._zod.def).when??(s.when=i=>{const r=i.value;return!Eh(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;n.minimum>r&&(i._zod.bag.minimum=n.minimum)}),e._zod.check=i=>{const r=i.value;if(r.length>=n.minimum)return;const u=Mh(r);i.issues.push({origin:u,code:"too_small",minimum:n.minimum,inclusive:!0,input:r,inst:e,continue:!n.abort})}}),SM=ne("$ZodCheckLengthEquals",(e,n)=>{var s;Tn.init(e,n),(s=e._zod.def).when??(s.when=i=>{const r=i.value;return!Eh(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag;r.minimum=n.length,r.maximum=n.length,r.length=n.length}),e._zod.check=i=>{const r=i.value,c=r.length;if(c===n.length)return;const u=Mh(r),d=c>n.length;i.issues.push({origin:u,...d?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!n.abort})}}),Rc=ne("$ZodCheckStringFormat",(e,n)=>{var s,i;Tn.init(e,n),e._zod.onattach.push(r=>{const c=r._zod.bag;c.format=n.format,n.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(n.pattern))}),n.pattern?(s=e._zod).check??(s.check=r=>{n.pattern.lastIndex=0,!n.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:n.format,input:r.value,...n.pattern?{pattern:n.pattern.toString()}:{},inst:e,continue:!n.abort})}):(i=e._zod).check??(i.check=()=>{})}),wM=ne("$ZodCheckRegex",(e,n)=>{Rc.init(e,n),e._zod.check=s=>{n.pattern.lastIndex=0,!n.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:"regex",input:s.value,pattern:n.pattern.toString(),inst:e,continue:!n.abort})}}),_M=ne("$ZodCheckLowerCase",(e,n)=>{n.pattern??(n.pattern=gM),Rc.init(e,n)}),EM=ne("$ZodCheckUpperCase",(e,n)=>{n.pattern??(n.pattern=pM),Rc.init(e,n)}),TM=ne("$ZodCheckIncludes",(e,n)=>{Tn.init(e,n);const s=jc(n.includes),i=new RegExp(typeof n.position=="number"?`^.{${n.position}}${s}`:s);n.pattern=i,e._zod.onattach.push(r=>{const c=r._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(i)}),e._zod.check=r=>{r.value.includes(n.includes,n.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:n.includes,input:r.value,inst:e,continue:!n.abort})}}),MM=ne("$ZodCheckStartsWith",(e,n)=>{Tn.init(e,n);const s=new RegExp(`^${jc(n.prefix)}.*`);n.pattern??(n.pattern=s),e._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(s)}),e._zod.check=i=>{i.value.startsWith(n.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:n.prefix,input:i.value,inst:e,continue:!n.abort})}}),NM=ne("$ZodCheckEndsWith",(e,n)=>{Tn.init(e,n);const s=new RegExp(`.*${jc(n.suffix)}$`);n.pattern??(n.pattern=s),e._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(s)}),e._zod.check=i=>{i.value.endsWith(n.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:n.suffix,input:i.value,inst:e,continue:!n.abort})}}),jM=ne("$ZodCheckOverwrite",(e,n)=>{Tn.init(e,n),e._zod.check=s=>{s.value=n.tx(s.value)}});class CM{constructor(n=[]){this.content=[],this.indent=0,this&&(this.args=n)}indented(n){this.indent+=1,n(this),this.indent-=1}write(n){if(typeof n=="function"){n(this,{execution:"sync"}),n(this,{execution:"async"});return}const i=n.split(`
`).filter(u=>u),r=Math.min(...i.map(u=>u.length-u.trimStart().length)),c=i.map(u=>u.slice(r)).map(u=>" ".repeat(this.indent*2)+u);for(const u of c)this.content.push(u)}compile(){const n=Function,s=this?.args,r=[...(this?.content??[""]).map(c=>`  ${c}`)];return new n(...s,r.join(`
`))}}const DM={major:4,minor:3,patch:6},Ct=ne("$ZodType",(e,n)=>{var s;e??(e={}),e._zod.def=n,e._zod.bag=e._zod.bag||{},e._zod.version=DM;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const r of i)for(const c of r._zod.onattach)c(e);if(i.length===0)(s=e._zod).deferred??(s.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const r=(u,d,g)=>{let p=qi(u),y;for(const v of d){if(v._zod.def.when){if(!v._zod.def.when(u))continue}else if(p)continue;const b=u.issues.length,S=v._zod.check(u);if(S instanceof Promise&&g?.async===!1)throw new Zi;if(y||S instanceof Promise)y=(y??Promise.resolve()).then(async()=>{await S,u.issues.length!==b&&(p||(p=qi(u,b)))});else{if(u.issues.length===b)continue;p||(p=qi(u,b))}}return y?y.then(()=>u):u},c=(u,d,g)=>{if(qi(u))return u.aborted=!0,u;const p=r(d,i,g);if(p instanceof Promise){if(g.async===!1)throw new Zi;return p.then(y=>e._zod.parse(y,g))}return e._zod.parse(p,g)};e._zod.run=(u,d)=>{if(d.skipChecks)return e._zod.parse(u,d);if(d.direction==="backward"){const p=e._zod.parse({value:u.value,issues:[]},{...d,skipChecks:!0});return p instanceof Promise?p.then(y=>c(y,u,d)):c(p,u,d)}const g=e._zod.parse(u,d);if(g instanceof Promise){if(d.async===!1)throw new Zi;return g.then(p=>r(p,i,d))}return r(g,i,d)}}st(e,"~standard",()=>({validate:r=>{try{const c=PT(e,r);return c.success?{value:c.data}:{issues:c.error?.issues}}catch{return IT(e,r).then(u=>u.success?{value:u.data}:{issues:u.error?.issues})}},vendor:"zod",version:1}))}),Ch=ne("$ZodString",(e,n)=>{Ct.init(e,n),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??fM(e._zod.bag),e._zod.parse=(s,i)=>{if(n.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),_t=ne("$ZodStringFormat",(e,n)=>{Rc.init(e,n),Ch.init(e,n)}),RM=ne("$ZodGUID",(e,n)=>{n.pattern??(n.pattern=JT),_t.init(e,n)}),kM=ne("$ZodUUID",(e,n)=>{if(n.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[n.version];if(i===void 0)throw new Error(`Invalid UUID version: "${n.version}"`);n.pattern??(n.pattern=my(i))}else n.pattern??(n.pattern=my());_t.init(e,n)}),AM=ne("$ZodEmail",(e,n)=>{n.pattern??(n.pattern=eM),_t.init(e,n)}),OM=ne("$ZodURL",(e,n)=>{_t.init(e,n),e._zod.check=s=>{try{const i=s.value.trim(),r=new URL(i);n.hostname&&(n.hostname.lastIndex=0,n.hostname.test(r.hostname)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:n.hostname.source,input:s.value,inst:e,continue:!n.abort})),n.protocol&&(n.protocol.lastIndex=0,n.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:n.protocol.source,input:s.value,inst:e,continue:!n.abort})),n.normalize?s.value=r.href:s.value=i;return}catch{s.issues.push({code:"invalid_format",format:"url",input:s.value,inst:e,continue:!n.abort})}}}),zM=ne("$ZodEmoji",(e,n)=>{n.pattern??(n.pattern=nM()),_t.init(e,n)}),PM=ne("$ZodNanoID",(e,n)=>{n.pattern??(n.pattern=XT),_t.init(e,n)}),IM=ne("$ZodCUID",(e,n)=>{n.pattern??(n.pattern=YT),_t.init(e,n)}),BM=ne("$ZodCUID2",(e,n)=>{n.pattern??(n.pattern=GT),_t.init(e,n)}),LM=ne("$ZodULID",(e,n)=>{n.pattern??(n.pattern=VT),_t.init(e,n)}),qM=ne("$ZodXID",(e,n)=>{n.pattern??(n.pattern=KT),_t.init(e,n)}),UM=ne("$ZodKSUID",(e,n)=>{n.pattern??(n.pattern=WT),_t.init(e,n)}),$M=ne("$ZodISODateTime",(e,n)=>{n.pattern??(n.pattern=dM(n)),_t.init(e,n)}),HM=ne("$ZodISODate",(e,n)=>{n.pattern??(n.pattern=cM),_t.init(e,n)}),ZM=ne("$ZodISOTime",(e,n)=>{n.pattern??(n.pattern=uM(n)),_t.init(e,n)}),FM=ne("$ZodISODuration",(e,n)=>{n.pattern??(n.pattern=QT),_t.init(e,n)}),YM=ne("$ZodIPv4",(e,n)=>{n.pattern??(n.pattern=aM),_t.init(e,n),e._zod.bag.format="ipv4"}),GM=ne("$ZodIPv6",(e,n)=>{n.pattern??(n.pattern=sM),_t.init(e,n),e._zod.bag.format="ipv6",e._zod.check=s=>{try{new URL(`http://[${s.value}]`)}catch{s.issues.push({code:"invalid_format",format:"ipv6",input:s.value,inst:e,continue:!n.abort})}}}),VM=ne("$ZodCIDRv4",(e,n)=>{n.pattern??(n.pattern=iM),_t.init(e,n)}),KM=ne("$ZodCIDRv6",(e,n)=>{n.pattern??(n.pattern=lM),_t.init(e,n),e._zod.check=s=>{const i=s.value.split("/");try{if(i.length!==2)throw new Error;const[r,c]=i;if(!c)throw new Error;const u=Number(c);if(`${u}`!==c)throw new Error;if(u<0||u>128)throw new Error;new URL(`http://[${r}]`)}catch{s.issues.push({code:"invalid_format",format:"cidrv6",input:s.value,inst:e,continue:!n.abort})}}});function kb(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const WM=ne("$ZodBase64",(e,n)=>{n.pattern??(n.pattern=rM),_t.init(e,n),e._zod.bag.contentEncoding="base64",e._zod.check=s=>{kb(s.value)||s.issues.push({code:"invalid_format",format:"base64",input:s.value,inst:e,continue:!n.abort})}});function XM(e){if(!Tb.test(e))return!1;const n=e.replace(/[-_]/g,i=>i==="-"?"+":"/"),s=n.padEnd(Math.ceil(n.length/4)*4,"=");return kb(s)}const QM=ne("$ZodBase64URL",(e,n)=>{n.pattern??(n.pattern=Tb),_t.init(e,n),e._zod.bag.contentEncoding="base64url",e._zod.check=s=>{XM(s.value)||s.issues.push({code:"invalid_format",format:"base64url",input:s.value,inst:e,continue:!n.abort})}}),JM=ne("$ZodE164",(e,n)=>{n.pattern??(n.pattern=oM),_t.init(e,n)});function eN(e,n=null){try{const s=e.split(".");if(s.length!==3)return!1;const[i]=s;if(!i)return!1;const r=JSON.parse(atob(i));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||n&&(!("alg"in r)||r.alg!==n))}catch{return!1}}const tN=ne("$ZodJWT",(e,n)=>{_t.init(e,n),e._zod.check=s=>{eN(s.value,n.alg)||s.issues.push({code:"invalid_format",format:"jwt",input:s.value,inst:e,continue:!n.abort})}}),Ab=ne("$ZodNumber",(e,n)=>{Ct.init(e,n),e._zod.pattern=e._zod.bag.pattern??jb,e._zod.parse=(s,i)=>{if(n.coerce)try{s.value=Number(s.value)}catch{}const r=s.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return s;const c=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return s.issues.push({expected:"number",code:"invalid_type",input:r,inst:e,...c?{received:c}:{}}),s}}),nN=ne("$ZodNumberFormat",(e,n)=>{yM.init(e,n),Ab.init(e,n)}),aN=ne("$ZodBoolean",(e,n)=>{Ct.init(e,n),e._zod.pattern=mM,e._zod.parse=(s,i)=>{if(n.coerce)try{s.value=!!s.value}catch{}const r=s.value;return typeof r=="boolean"||s.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:e}),s}}),sN=ne("$ZodUnknown",(e,n)=>{Ct.init(e,n),e._zod.parse=s=>s}),iN=ne("$ZodNever",(e,n)=>{Ct.init(e,n),e._zod.parse=(s,i)=>(s.issues.push({expected:"never",code:"invalid_type",input:s.value,inst:e}),s)});function gy(e,n,s){e.issues.length&&n.issues.push(...Ui(s,e.issues)),n.value[s]=e.value}const lN=ne("$ZodArray",(e,n)=>{Ct.init(e,n),e._zod.parse=(s,i)=>{const r=s.value;if(!Array.isArray(r))return s.issues.push({expected:"array",code:"invalid_type",input:r,inst:e}),s;s.value=Array(r.length);const c=[];for(let u=0;u<r.length;u++){const d=r[u],g=n.element._zod.run({value:d,issues:[]},i);g instanceof Promise?c.push(g.then(p=>gy(p,s,u))):gy(g,s,u)}return c.length?Promise.all(c).then(()=>s):s}});function uc(e,n,s,i,r){if(e.issues.length){if(r&&!(s in i))return;n.issues.push(...Ui(s,e.issues))}e.value===void 0?s in i&&(n.value[s]=void 0):n.value[s]=e.value}function Ob(e){const n=Object.keys(e.shape);for(const i of n)if(!e.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const s=TT(e.shape);return{...e,keys:n,keySet:new Set(n),numKeys:n.length,optionalKeys:new Set(s)}}function zb(e,n,s,i,r,c){const u=[],d=r.keySet,g=r.catchall._zod,p=g.def.type,y=g.optout==="optional";for(const v in n){if(d.has(v))continue;if(p==="never"){u.push(v);continue}const b=g.run({value:n[v],issues:[]},i);b instanceof Promise?e.push(b.then(S=>uc(S,s,v,n,y))):uc(b,s,v,n,y)}return u.length&&s.issues.push({code:"unrecognized_keys",keys:u,input:n,inst:c}),e.length?Promise.all(e).then(()=>s):s}const rN=ne("$ZodObject",(e,n)=>{if(Ct.init(e,n),!Object.getOwnPropertyDescriptor(n,"shape")?.get){const d=n.shape;Object.defineProperty(n,"shape",{get:()=>{const g={...d};return Object.defineProperty(n,"shape",{value:g}),g}})}const i=_h(()=>Ob(n));st(e._zod,"propValues",()=>{const d=n.shape,g={};for(const p in d){const y=d[p]._zod;if(y.values){g[p]??(g[p]=new Set);for(const v of y.values)g[p].add(v)}}return g});const r=cc,c=n.catchall;let u;e._zod.parse=(d,g)=>{u??(u=i.value);const p=d.value;if(!r(p))return d.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),d;d.value={};const y=[],v=u.shape;for(const b of u.keys){const S=v[b],T=S._zod.optout==="optional",E=S._zod.run({value:p[b],issues:[]},g);E instanceof Promise?y.push(E.then(C=>uc(C,d,b,p,T))):uc(E,d,b,p,T)}return c?zb(y,p,d,g,i.value,e):y.length?Promise.all(y).then(()=>d):d}}),oN=ne("$ZodObjectJIT",(e,n)=>{rN.init(e,n);const s=e._zod.parse,i=_h(()=>Ob(n)),r=b=>{const S=new CM(["shape","payload","ctx"]),T=i.value,E=I=>{const B=hy(I);return`shape[${B}]._zod.run({ value: input[${B}], issues: [] }, ctx)`};S.write("const input = payload.value;");const C=Object.create(null);let O=0;for(const I of T.keys)C[I]=`key_${O++}`;S.write("const newResult = {};");for(const I of T.keys){const B=C[I],q=hy(I),j=b[I]?._zod?.optout==="optional";S.write(`const ${B} = ${E(I)};`),j?S.write(`
        if (${B}.issues.length) {
          if (${q} in input) {
            payload.issues = payload.issues.concat(${B}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${q}, ...iss.path] : [${q}]
            })));
          }
        }
        
        if (${B}.value === undefined) {
          if (${q} in input) {
            newResult[${q}] = undefined;
          }
        } else {
          newResult[${q}] = ${B}.value;
        }
        
      `):S.write(`
        if (${B}.issues.length) {
          payload.issues = payload.issues.concat(${B}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${q}, ...iss.path] : [${q}]
          })));
        }
        
        if (${B}.value === undefined) {
          if (${q} in input) {
            newResult[${q}] = undefined;
          }
        } else {
          newResult[${q}] = ${B}.value;
        }
        
      `)}S.write("payload.value = newResult;"),S.write("return payload;");const R=S.compile();return(I,B)=>R(b,I,B)};let c;const u=cc,d=!yb.jitless,p=d&&_T.value,y=n.catchall;let v;e._zod.parse=(b,S)=>{v??(v=i.value);const T=b.value;return u(T)?d&&p&&S?.async===!1&&S.jitless!==!0?(c||(c=r(n.shape)),b=c(b,S),y?zb([],T,b,S,v,e):b):s(b,S):(b.issues.push({expected:"object",code:"invalid_type",input:T,inst:e}),b)}});function py(e,n,s,i){for(const c of e)if(c.issues.length===0)return n.value=c.value,n;const r=e.filter(c=>!qi(c));return r.length===1?(n.value=r[0].value,r[0]):(n.issues.push({code:"invalid_union",input:n.value,inst:s,errors:e.map(c=>c.issues.map(u=>bs(u,i,ys())))}),n)}const cN=ne("$ZodUnion",(e,n)=>{Ct.init(e,n),st(e._zod,"optin",()=>n.options.some(r=>r._zod.optin==="optional")?"optional":void 0),st(e._zod,"optout",()=>n.options.some(r=>r._zod.optout==="optional")?"optional":void 0),st(e._zod,"values",()=>{if(n.options.every(r=>r._zod.values))return new Set(n.options.flatMap(r=>Array.from(r._zod.values)))}),st(e._zod,"pattern",()=>{if(n.options.every(r=>r._zod.pattern)){const r=n.options.map(c=>c._zod.pattern);return new RegExp(`^(${r.map(c=>Th(c.source)).join("|")})$`)}});const s=n.options.length===1,i=n.options[0]._zod.run;e._zod.parse=(r,c)=>{if(s)return i(r,c);let u=!1;const d=[];for(const g of n.options){const p=g._zod.run({value:r.value,issues:[]},c);if(p instanceof Promise)d.push(p),u=!0;else{if(p.issues.length===0)return p;d.push(p)}}return u?Promise.all(d).then(g=>py(g,r,e,c)):py(d,r,e,c)}}),uN=ne("$ZodIntersection",(e,n)=>{Ct.init(e,n),e._zod.parse=(s,i)=>{const r=s.value,c=n.left._zod.run({value:r,issues:[]},i),u=n.right._zod.run({value:r,issues:[]},i);return c instanceof Promise||u instanceof Promise?Promise.all([c,u]).then(([g,p])=>vy(s,g,p)):vy(s,c,u)}});function Hf(e,n){if(e===n)return{valid:!0,data:e};if(e instanceof Date&&n instanceof Date&&+e==+n)return{valid:!0,data:e};if(Wi(e)&&Wi(n)){const s=Object.keys(n),i=Object.keys(e).filter(c=>s.indexOf(c)!==-1),r={...e,...n};for(const c of i){const u=Hf(e[c],n[c]);if(!u.valid)return{valid:!1,mergeErrorPath:[c,...u.mergeErrorPath]};r[c]=u.data}return{valid:!0,data:r}}if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return{valid:!1,mergeErrorPath:[]};const s=[];for(let i=0;i<e.length;i++){const r=e[i],c=n[i],u=Hf(r,c);if(!u.valid)return{valid:!1,mergeErrorPath:[i,...u.mergeErrorPath]};s.push(u.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}function vy(e,n,s){const i=new Map;let r;for(const d of n.issues)if(d.code==="unrecognized_keys"){r??(r=d);for(const g of d.keys)i.has(g)||i.set(g,{}),i.get(g).l=!0}else e.issues.push(d);for(const d of s.issues)if(d.code==="unrecognized_keys")for(const g of d.keys)i.has(g)||i.set(g,{}),i.get(g).r=!0;else e.issues.push(d);const c=[...i].filter(([,d])=>d.l&&d.r).map(([d])=>d);if(c.length&&r&&e.issues.push({...r,keys:c}),qi(e))return e;const u=Hf(n.value,s.value);if(!u.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(u.mergeErrorPath)}`);return e.value=u.data,e}const dN=ne("$ZodRecord",(e,n)=>{Ct.init(e,n),e._zod.parse=(s,i)=>{const r=s.value;if(!Wi(r))return s.issues.push({expected:"record",code:"invalid_type",input:r,inst:e}),s;const c=[],u=n.keyType._zod.values;if(u){s.value={};const d=new Set;for(const p of u)if(typeof p=="string"||typeof p=="number"||typeof p=="symbol"){d.add(typeof p=="number"?p.toString():p);const y=n.valueType._zod.run({value:r[p],issues:[]},i);y instanceof Promise?c.push(y.then(v=>{v.issues.length&&s.issues.push(...Ui(p,v.issues)),s.value[p]=v.value})):(y.issues.length&&s.issues.push(...Ui(p,y.issues)),s.value[p]=y.value)}let g;for(const p in r)d.has(p)||(g=g??[],g.push(p));g&&g.length>0&&s.issues.push({code:"unrecognized_keys",input:r,inst:e,keys:g})}else{s.value={};for(const d of Reflect.ownKeys(r)){if(d==="__proto__")continue;let g=n.keyType._zod.run({value:d,issues:[]},i);if(g instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof d=="string"&&jb.test(d)&&g.issues.length){const v=n.keyType._zod.run({value:Number(d),issues:[]},i);if(v instanceof Promise)throw new Error("Async schemas not supported in object keys currently");v.issues.length===0&&(g=v)}if(g.issues.length){n.mode==="loose"?s.value[d]=r[d]:s.issues.push({code:"invalid_key",origin:"record",issues:g.issues.map(v=>bs(v,i,ys())),input:d,path:[d],inst:e});continue}const y=n.valueType._zod.run({value:r[d],issues:[]},i);y instanceof Promise?c.push(y.then(v=>{v.issues.length&&s.issues.push(...Ui(d,v.issues)),s.value[g.value]=v.value})):(y.issues.length&&s.issues.push(...Ui(d,y.issues)),s.value[g.value]=y.value)}}return c.length?Promise.all(c).then(()=>s):s}}),fN=ne("$ZodEnum",(e,n)=>{Ct.init(e,n);const s=bb(n.entries),i=new Set(s);e._zod.values=i,e._zod.pattern=new RegExp(`^(${s.filter(r=>ET.has(typeof r)).map(r=>typeof r=="string"?jc(r):r.toString()).join("|")})$`),e._zod.parse=(r,c)=>{const u=r.value;return i.has(u)||r.issues.push({code:"invalid_value",values:s,input:u,inst:e}),r}}),hN=ne("$ZodTransform",(e,n)=>{Ct.init(e,n),e._zod.parse=(s,i)=>{if(i.direction==="backward")throw new vb(e.constructor.name);const r=n.transform(s.value,s);if(i.async)return(r instanceof Promise?r:Promise.resolve(r)).then(u=>(s.value=u,s));if(r instanceof Promise)throw new Zi;return s.value=r,s}});function yy(e,n){return e.issues.length&&n===void 0?{issues:[],value:void 0}:e}const Pb=ne("$ZodOptional",(e,n)=>{Ct.init(e,n),e._zod.optin="optional",e._zod.optout="optional",st(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,void 0]):void 0),st(e._zod,"pattern",()=>{const s=n.innerType._zod.pattern;return s?new RegExp(`^(${Th(s.source)})?$`):void 0}),e._zod.parse=(s,i)=>{if(n.innerType._zod.optin==="optional"){const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(c=>yy(c,s.value)):yy(r,s.value)}return s.value===void 0?s:n.innerType._zod.run(s,i)}}),mN=ne("$ZodExactOptional",(e,n)=>{Pb.init(e,n),st(e._zod,"values",()=>n.innerType._zod.values),st(e._zod,"pattern",()=>n.innerType._zod.pattern),e._zod.parse=(s,i)=>n.innerType._zod.run(s,i)}),gN=ne("$ZodNullable",(e,n)=>{Ct.init(e,n),st(e._zod,"optin",()=>n.innerType._zod.optin),st(e._zod,"optout",()=>n.innerType._zod.optout),st(e._zod,"pattern",()=>{const s=n.innerType._zod.pattern;return s?new RegExp(`^(${Th(s.source)}|null)$`):void 0}),st(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,null]):void 0),e._zod.parse=(s,i)=>s.value===null?s:n.innerType._zod.run(s,i)}),pN=ne("$ZodDefault",(e,n)=>{Ct.init(e,n),e._zod.optin="optional",st(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(s,i)=>{if(i.direction==="backward")return n.innerType._zod.run(s,i);if(s.value===void 0)return s.value=n.defaultValue,s;const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(c=>by(c,n)):by(r,n)}});function by(e,n){return e.value===void 0&&(e.value=n.defaultValue),e}const vN=ne("$ZodPrefault",(e,n)=>{Ct.init(e,n),e._zod.optin="optional",st(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(s,i)=>(i.direction==="backward"||s.value===void 0&&(s.value=n.defaultValue),n.innerType._zod.run(s,i))}),yN=ne("$ZodNonOptional",(e,n)=>{Ct.init(e,n),st(e._zod,"values",()=>{const s=n.innerType._zod.values;return s?new Set([...s].filter(i=>i!==void 0)):void 0}),e._zod.parse=(s,i)=>{const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(c=>xy(c,e)):xy(r,e)}});function xy(e,n){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:n}),e}const bN=ne("$ZodCatch",(e,n)=>{Ct.init(e,n),st(e._zod,"optin",()=>n.innerType._zod.optin),st(e._zod,"optout",()=>n.innerType._zod.optout),st(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(s,i)=>{if(i.direction==="backward")return n.innerType._zod.run(s,i);const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(c=>(s.value=c.value,c.issues.length&&(s.value=n.catchValue({...s,error:{issues:c.issues.map(u=>bs(u,i,ys()))},input:s.value}),s.issues=[]),s)):(s.value=r.value,r.issues.length&&(s.value=n.catchValue({...s,error:{issues:r.issues.map(c=>bs(c,i,ys()))},input:s.value}),s.issues=[]),s)}}),xN=ne("$ZodPipe",(e,n)=>{Ct.init(e,n),st(e._zod,"values",()=>n.in._zod.values),st(e._zod,"optin",()=>n.in._zod.optin),st(e._zod,"optout",()=>n.out._zod.optout),st(e._zod,"propValues",()=>n.in._zod.propValues),e._zod.parse=(s,i)=>{if(i.direction==="backward"){const c=n.out._zod.run(s,i);return c instanceof Promise?c.then(u=>zo(u,n.in,i)):zo(c,n.in,i)}const r=n.in._zod.run(s,i);return r instanceof Promise?r.then(c=>zo(c,n.out,i)):zo(r,n.out,i)}});function zo(e,n,s){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:e.value,issues:e.issues},s)}const SN=ne("$ZodReadonly",(e,n)=>{Ct.init(e,n),st(e._zod,"propValues",()=>n.innerType._zod.propValues),st(e._zod,"values",()=>n.innerType._zod.values),st(e._zod,"optin",()=>n.innerType?._zod?.optin),st(e._zod,"optout",()=>n.innerType?._zod?.optout),e._zod.parse=(s,i)=>{if(i.direction==="backward")return n.innerType._zod.run(s,i);const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(Sy):Sy(r)}});function Sy(e){return e.value=Object.freeze(e.value),e}const wN=ne("$ZodCustom",(e,n)=>{Tn.init(e,n),Ct.init(e,n),e._zod.parse=(s,i)=>s,e._zod.check=s=>{const i=s.value,r=n.fn(i);if(r instanceof Promise)return r.then(c=>wy(c,s,i,e));wy(r,s,i,e)}});function wy(e,n,s,i){if(!e){const r={code:"custom",input:s,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(r.params=i._zod.def.params),n.issues.push(lr(r))}}var _y;class _N{constructor(){this._map=new WeakMap,this._idmap=new Map}add(n,...s){const i=s[0];return this._map.set(n,i),i&&typeof i=="object"&&"id"in i&&this._idmap.set(i.id,n),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(n){const s=this._map.get(n);return s&&typeof s=="object"&&"id"in s&&this._idmap.delete(s.id),this._map.delete(n),this}get(n){const s=n._zod.parent;if(s){const i={...this.get(s)??{}};delete i.id;const r={...i,...this._map.get(n)};return Object.keys(r).length?r:void 0}return this._map.get(n)}has(n){return this._map.has(n)}}function EN(){return new _N}(_y=globalThis).__zod_globalRegistry??(_y.__zod_globalRegistry=EN());const Wl=globalThis.__zod_globalRegistry;function TN(e,n){return new e({type:"string",...Se(n)})}function MN(e,n){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Se(n)})}function Ey(e,n){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Se(n)})}function NN(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Se(n)})}function jN(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Se(n)})}function CN(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Se(n)})}function DN(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Se(n)})}function RN(e,n){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Se(n)})}function kN(e,n){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Se(n)})}function AN(e,n){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Se(n)})}function ON(e,n){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Se(n)})}function zN(e,n){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Se(n)})}function PN(e,n){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Se(n)})}function IN(e,n){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Se(n)})}function BN(e,n){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Se(n)})}function LN(e,n){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Se(n)})}function qN(e,n){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Se(n)})}function UN(e,n){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Se(n)})}function $N(e,n){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Se(n)})}function HN(e,n){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Se(n)})}function ZN(e,n){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Se(n)})}function FN(e,n){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Se(n)})}function YN(e,n){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Se(n)})}function GN(e,n){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Se(n)})}function VN(e,n){return new e({type:"string",format:"date",check:"string_format",...Se(n)})}function KN(e,n){return new e({type:"string",format:"time",check:"string_format",precision:null,...Se(n)})}function WN(e,n){return new e({type:"string",format:"duration",check:"string_format",...Se(n)})}function XN(e,n){return new e({type:"number",checks:[],...Se(n)})}function QN(e,n){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Se(n)})}function JN(e,n){return new e({type:"boolean",...Se(n)})}function e2(e){return new e({type:"unknown"})}function t2(e,n){return new e({type:"never",...Se(n)})}function Ty(e,n){return new Db({check:"less_than",...Se(n),value:e,inclusive:!1})}function uf(e,n){return new Db({check:"less_than",...Se(n),value:e,inclusive:!0})}function My(e,n){return new Rb({check:"greater_than",...Se(n),value:e,inclusive:!1})}function df(e,n){return new Rb({check:"greater_than",...Se(n),value:e,inclusive:!0})}function Ny(e,n){return new vM({check:"multiple_of",...Se(n),value:e})}function Ib(e,n){return new bM({check:"max_length",...Se(n),maximum:e})}function dc(e,n){return new xM({check:"min_length",...Se(n),minimum:e})}function Bb(e,n){return new SM({check:"length_equals",...Se(n),length:e})}function n2(e,n){return new wM({check:"string_format",format:"regex",...Se(n),pattern:e})}function a2(e){return new _M({check:"string_format",format:"lowercase",...Se(e)})}function s2(e){return new EM({check:"string_format",format:"uppercase",...Se(e)})}function i2(e,n){return new TM({check:"string_format",format:"includes",...Se(n),includes:e})}function l2(e,n){return new MM({check:"string_format",format:"starts_with",...Se(n),prefix:e})}function r2(e,n){return new NM({check:"string_format",format:"ends_with",...Se(n),suffix:e})}function el(e){return new jM({check:"overwrite",tx:e})}function o2(e){return el(n=>n.normalize(e))}function c2(){return el(e=>e.trim())}function u2(){return el(e=>e.toLowerCase())}function d2(){return el(e=>e.toUpperCase())}function f2(){return el(e=>wT(e))}function h2(e,n,s){return new e({type:"array",element:n,...Se(s)})}function m2(e,n,s){return new e({type:"custom",check:"custom",fn:n,...Se(s)})}function g2(e){const n=p2(s=>(s.addIssue=i=>{if(typeof i=="string")s.issues.push(lr(i,s.value,n._zod.def));else{const r=i;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=s.value),r.inst??(r.inst=n),r.continue??(r.continue=!n._zod.def.abort),s.issues.push(lr(r))}},e(s.value,s)));return n}function p2(e,n){const s=new Tn({check:"custom",...Se(n)});return s._zod.check=e,s}function Lb(e){let n=e?.target??"draft-2020-12";return n==="draft-4"&&(n="draft-04"),n==="draft-7"&&(n="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??Wl,target:n,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function $t(e,n,s={path:[],schemaPath:[]}){var i;const r=e._zod.def,c=n.seen.get(e);if(c)return c.count++,s.schemaPath.includes(e)&&(c.cycle=s.path),c.schema;const u={schema:{},count:1,cycle:void 0,path:s.path};n.seen.set(e,u);const d=e._zod.toJSONSchema?.();if(d)u.schema=d;else{const y={...s,schemaPath:[...s.schemaPath,e],path:s.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(n,u.schema,y);else{const b=u.schema,S=n.processors[r.type];if(!S)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${r.type}`);S(e,n,b,y)}const v=e._zod.parent;v&&(u.ref||(u.ref=v),$t(v,n,y),n.seen.get(v).isParent=!0)}const g=n.metadataRegistry.get(e);return g&&Object.assign(u.schema,g),n.io==="input"&&pn(e)&&(delete u.schema.examples,delete u.schema.default),n.io==="input"&&u.schema._prefault&&((i=u.schema).default??(i.default=u.schema._prefault)),delete u.schema._prefault,n.seen.get(e).schema}function qb(e,n){const s=e.seen.get(n);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=new Map;for(const u of e.seen.entries()){const d=e.metadataRegistry.get(u[0])?.id;if(d){const g=i.get(d);if(g&&g!==u[0])throw new Error(`Duplicate schema id "${d}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);i.set(d,u[0])}}const r=u=>{const d=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const v=e.external.registry.get(u[0])?.id,b=e.external.uri??(T=>T);if(v)return{ref:b(v)};const S=u[1].defId??u[1].schema.id??`schema${e.counter++}`;return u[1].defId=S,{defId:S,ref:`${b("__shared")}#/${d}/${S}`}}if(u[1]===s)return{ref:"#"};const p=`#/${d}/`,y=u[1].schema.id??`__schema${e.counter++}`;return{defId:y,ref:p+y}},c=u=>{if(u[1].schema.$ref)return;const d=u[1],{ref:g,defId:p}=r(u);d.def={...d.schema},p&&(d.defId=p);const y=d.schema;for(const v in y)delete y[v];y.$ref=g};if(e.cycles==="throw")for(const u of e.seen.entries()){const d=u[1];if(d.cycle)throw new Error(`Cycle detected: #/${d.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const u of e.seen.entries()){const d=u[1];if(n===u[0]){c(u);continue}if(e.external){const p=e.external.registry.get(u[0])?.id;if(n!==u[0]&&p){c(u);continue}}if(e.metadataRegistry.get(u[0])?.id){c(u);continue}if(d.cycle){c(u);continue}if(d.count>1&&e.reused==="ref"){c(u);continue}}}function Ub(e,n){const s=e.seen.get(n);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=u=>{const d=e.seen.get(u);if(d.ref===null)return;const g=d.def??d.schema,p={...g},y=d.ref;if(d.ref=null,y){i(y);const b=e.seen.get(y),S=b.schema;if(S.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(g.allOf=g.allOf??[],g.allOf.push(S)):Object.assign(g,S),Object.assign(g,p),u._zod.parent===y)for(const E in g)E==="$ref"||E==="allOf"||E in p||delete g[E];if(S.$ref&&b.def)for(const E in g)E==="$ref"||E==="allOf"||E in b.def&&JSON.stringify(g[E])===JSON.stringify(b.def[E])&&delete g[E]}const v=u._zod.parent;if(v&&v!==y){i(v);const b=e.seen.get(v);if(b?.schema.$ref&&(g.$ref=b.schema.$ref,b.def))for(const S in g)S==="$ref"||S==="allOf"||S in b.def&&JSON.stringify(g[S])===JSON.stringify(b.def[S])&&delete g[S]}e.override({zodSchema:u,jsonSchema:g,path:d.path??[]})};for(const u of[...e.seen.entries()].reverse())i(u[0]);const r={};if(e.target==="draft-2020-12"?r.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?r.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?r.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const u=e.external.registry.get(n)?.id;if(!u)throw new Error("Schema is missing an `id` property");r.$id=e.external.uri(u)}Object.assign(r,s.def??s.schema);const c=e.external?.defs??{};for(const u of e.seen.entries()){const d=u[1];d.def&&d.defId&&(c[d.defId]=d.def)}e.external||Object.keys(c).length>0&&(e.target==="draft-2020-12"?r.$defs=c:r.definitions=c);try{const u=JSON.parse(JSON.stringify(r));return Object.defineProperty(u,"~standard",{value:{...n["~standard"],jsonSchema:{input:fc(n,"input",e.processors),output:fc(n,"output",e.processors)}},enumerable:!1,writable:!1}),u}catch{throw new Error("Error converting schema to JSON.")}}function pn(e,n){const s=n??{seen:new Set};if(s.seen.has(e))return!1;s.seen.add(e);const i=e._zod.def;if(i.type==="transform")return!0;if(i.type==="array")return pn(i.element,s);if(i.type==="set")return pn(i.valueType,s);if(i.type==="lazy")return pn(i.getter(),s);if(i.type==="promise"||i.type==="optional"||i.type==="nonoptional"||i.type==="nullable"||i.type==="readonly"||i.type==="default"||i.type==="prefault")return pn(i.innerType,s);if(i.type==="intersection")return pn(i.left,s)||pn(i.right,s);if(i.type==="record"||i.type==="map")return pn(i.keyType,s)||pn(i.valueType,s);if(i.type==="pipe")return pn(i.in,s)||pn(i.out,s);if(i.type==="object"){for(const r in i.shape)if(pn(i.shape[r],s))return!0;return!1}if(i.type==="union"){for(const r of i.options)if(pn(r,s))return!0;return!1}if(i.type==="tuple"){for(const r of i.items)if(pn(r,s))return!0;return!!(i.rest&&pn(i.rest,s))}return!1}const v2=(e,n={})=>s=>{const i=Lb({...s,processors:n});return $t(e,i),qb(i,e),Ub(i,e)},fc=(e,n,s={})=>i=>{const{libraryOptions:r,target:c}=i??{},u=Lb({...r??{},target:c,io:n,processors:s});return $t(e,u),qb(u,e),Ub(u,e)},y2={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},b2=(e,n,s,i)=>{const r=s;r.type="string";const{minimum:c,maximum:u,format:d,patterns:g,contentEncoding:p}=e._zod.bag;if(typeof c=="number"&&(r.minLength=c),typeof u=="number"&&(r.maxLength=u),d&&(r.format=y2[d]??d,r.format===""&&delete r.format,d==="time"&&delete r.format),p&&(r.contentEncoding=p),g&&g.size>0){const y=[...g];y.length===1?r.pattern=y[0].source:y.length>1&&(r.allOf=[...y.map(v=>({...n.target==="draft-07"||n.target==="draft-04"||n.target==="openapi-3.0"?{type:"string"}:{},pattern:v.source}))])}},x2=(e,n,s,i)=>{const r=s,{minimum:c,maximum:u,format:d,multipleOf:g,exclusiveMaximum:p,exclusiveMinimum:y}=e._zod.bag;typeof d=="string"&&d.includes("int")?r.type="integer":r.type="number",typeof y=="number"&&(n.target==="draft-04"||n.target==="openapi-3.0"?(r.minimum=y,r.exclusiveMinimum=!0):r.exclusiveMinimum=y),typeof c=="number"&&(r.minimum=c,typeof y=="number"&&n.target!=="draft-04"&&(y>=c?delete r.minimum:delete r.exclusiveMinimum)),typeof p=="number"&&(n.target==="draft-04"||n.target==="openapi-3.0"?(r.maximum=p,r.exclusiveMaximum=!0):r.exclusiveMaximum=p),typeof u=="number"&&(r.maximum=u,typeof p=="number"&&n.target!=="draft-04"&&(p<=u?delete r.maximum:delete r.exclusiveMaximum)),typeof g=="number"&&(r.multipleOf=g)},S2=(e,n,s,i)=>{s.type="boolean"},w2=(e,n,s,i)=>{s.not={}},_2=(e,n,s,i)=>{},E2=(e,n,s,i)=>{const r=e._zod.def,c=bb(r.entries);c.every(u=>typeof u=="number")&&(s.type="number"),c.every(u=>typeof u=="string")&&(s.type="string"),s.enum=c},T2=(e,n,s,i)=>{if(n.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},M2=(e,n,s,i)=>{if(n.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},N2=(e,n,s,i)=>{const r=s,c=e._zod.def,{minimum:u,maximum:d}=e._zod.bag;typeof u=="number"&&(r.minItems=u),typeof d=="number"&&(r.maxItems=d),r.type="array",r.items=$t(c.element,n,{...i,path:[...i.path,"items"]})},j2=(e,n,s,i)=>{const r=s,c=e._zod.def;r.type="object",r.properties={};const u=c.shape;for(const p in u)r.properties[p]=$t(u[p],n,{...i,path:[...i.path,"properties",p]});const d=new Set(Object.keys(u)),g=new Set([...d].filter(p=>{const y=c.shape[p]._zod;return n.io==="input"?y.optin===void 0:y.optout===void 0}));g.size>0&&(r.required=Array.from(g)),c.catchall?._zod.def.type==="never"?r.additionalProperties=!1:c.catchall?c.catchall&&(r.additionalProperties=$t(c.catchall,n,{...i,path:[...i.path,"additionalProperties"]})):n.io==="output"&&(r.additionalProperties=!1)},C2=(e,n,s,i)=>{const r=e._zod.def,c=r.inclusive===!1,u=r.options.map((d,g)=>$t(d,n,{...i,path:[...i.path,c?"oneOf":"anyOf",g]}));c?s.oneOf=u:s.anyOf=u},D2=(e,n,s,i)=>{const r=e._zod.def,c=$t(r.left,n,{...i,path:[...i.path,"allOf",0]}),u=$t(r.right,n,{...i,path:[...i.path,"allOf",1]}),d=p=>"allOf"in p&&Object.keys(p).length===1,g=[...d(c)?c.allOf:[c],...d(u)?u.allOf:[u]];s.allOf=g},R2=(e,n,s,i)=>{const r=s,c=e._zod.def;r.type="object";const u=c.keyType,g=u._zod.bag?.patterns;if(c.mode==="loose"&&g&&g.size>0){const y=$t(c.valueType,n,{...i,path:[...i.path,"patternProperties","*"]});r.patternProperties={};for(const v of g)r.patternProperties[v.source]=y}else(n.target==="draft-07"||n.target==="draft-2020-12")&&(r.propertyNames=$t(c.keyType,n,{...i,path:[...i.path,"propertyNames"]})),r.additionalProperties=$t(c.valueType,n,{...i,path:[...i.path,"additionalProperties"]});const p=u._zod.values;if(p){const y=[...p].filter(v=>typeof v=="string"||typeof v=="number");y.length>0&&(r.required=y)}},k2=(e,n,s,i)=>{const r=e._zod.def,c=$t(r.innerType,n,i),u=n.seen.get(e);n.target==="openapi-3.0"?(u.ref=r.innerType,s.nullable=!0):s.anyOf=[c,{type:"null"}]},A2=(e,n,s,i)=>{const r=e._zod.def;$t(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType},O2=(e,n,s,i)=>{const r=e._zod.def;$t(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType,s.default=JSON.parse(JSON.stringify(r.defaultValue))},z2=(e,n,s,i)=>{const r=e._zod.def;$t(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType,n.io==="input"&&(s._prefault=JSON.parse(JSON.stringify(r.defaultValue)))},P2=(e,n,s,i)=>{const r=e._zod.def;$t(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType;let u;try{u=r.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}s.default=u},I2=(e,n,s,i)=>{const r=e._zod.def,c=n.io==="input"?r.in._zod.def.type==="transform"?r.out:r.in:r.out;$t(c,n,i);const u=n.seen.get(e);u.ref=c},B2=(e,n,s,i)=>{const r=e._zod.def;$t(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType,s.readOnly=!0},$b=(e,n,s,i)=>{const r=e._zod.def;$t(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType},L2=ne("ZodISODateTime",(e,n)=>{$M.init(e,n),Mt.init(e,n)});function q2(e){return GN(L2,e)}const U2=ne("ZodISODate",(e,n)=>{HM.init(e,n),Mt.init(e,n)});function $2(e){return VN(U2,e)}const H2=ne("ZodISOTime",(e,n)=>{ZM.init(e,n),Mt.init(e,n)});function Z2(e){return KN(H2,e)}const F2=ne("ZodISODuration",(e,n)=>{FM.init(e,n),Mt.init(e,n)});function Y2(e){return WN(F2,e)}const G2=(e,n)=>{_b.init(e,n),e.name="ZodError",Object.defineProperties(e,{format:{value:s=>zT(e,s)},flatten:{value:s=>OT(e,s)},addIssue:{value:s=>{e.issues.push(s),e.message=JSON.stringify(e.issues,$f,2)}},addIssues:{value:s=>{e.issues.push(...s),e.message=JSON.stringify(e.issues,$f,2)}},isEmpty:{get(){return e.issues.length===0}}})},Kn=ne("ZodError",G2,{Parent:Error}),V2=Nh(Kn),K2=jh(Kn),W2=Cc(Kn),X2=Dc(Kn),Q2=BT(Kn),J2=LT(Kn),ej=qT(Kn),tj=UT(Kn),nj=$T(Kn),aj=HT(Kn),sj=ZT(Kn),ij=FT(Kn),Dt=ne("ZodType",(e,n)=>(Ct.init(e,n),Object.assign(e["~standard"],{jsonSchema:{input:fc(e,"input"),output:fc(e,"output")}}),e.toJSONSchema=v2(e,{}),e.def=n,e.type=n.type,Object.defineProperty(e,"_def",{value:n}),e.check=(...s)=>e.clone(xs(n,{checks:[...n.checks??[],...s.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]}),{parent:!0}),e.with=e.check,e.clone=(s,i)=>Ss(e,s,i),e.brand=()=>e,e.register=((s,i)=>(s.add(e,i),e)),e.parse=(s,i)=>V2(e,s,i,{callee:e.parse}),e.safeParse=(s,i)=>W2(e,s,i),e.parseAsync=async(s,i)=>K2(e,s,i,{callee:e.parseAsync}),e.safeParseAsync=async(s,i)=>X2(e,s,i),e.spa=e.safeParseAsync,e.encode=(s,i)=>Q2(e,s,i),e.decode=(s,i)=>J2(e,s,i),e.encodeAsync=async(s,i)=>ej(e,s,i),e.decodeAsync=async(s,i)=>tj(e,s,i),e.safeEncode=(s,i)=>nj(e,s,i),e.safeDecode=(s,i)=>aj(e,s,i),e.safeEncodeAsync=async(s,i)=>sj(e,s,i),e.safeDecodeAsync=async(s,i)=>ij(e,s,i),e.refine=(s,i)=>e.check(Qj(s,i)),e.superRefine=s=>e.check(Jj(s)),e.overwrite=s=>e.check(el(s)),e.optional=()=>Ry(e),e.exactOptional=()=>Lj(e),e.nullable=()=>ky(e),e.nullish=()=>Ry(ky(e)),e.nonoptional=s=>Fj(e,s),e.array=()=>Pn(e),e.or=s=>kj([e,s]),e.and=s=>Oj(e,s),e.transform=s=>Ay(e,Ij(s)),e.default=s=>$j(e,s),e.prefault=s=>Zj(e,s),e.catch=s=>Gj(e,s),e.pipe=s=>Ay(e,s),e.readonly=()=>Wj(e),e.describe=s=>{const i=e.clone();return Wl.add(i,{description:s}),i},Object.defineProperty(e,"description",{get(){return Wl.get(e)?.description},configurable:!0}),e.meta=(...s)=>{if(s.length===0)return Wl.get(e);const i=e.clone();return Wl.add(i,s[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=s=>s(e),e)),Hb=ne("_ZodString",(e,n)=>{Ch.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(i,r,c)=>b2(e,i,r);const s=e._zod.bag;e.format=s.format??null,e.minLength=s.minimum??null,e.maxLength=s.maximum??null,e.regex=(...i)=>e.check(n2(...i)),e.includes=(...i)=>e.check(i2(...i)),e.startsWith=(...i)=>e.check(l2(...i)),e.endsWith=(...i)=>e.check(r2(...i)),e.min=(...i)=>e.check(dc(...i)),e.max=(...i)=>e.check(Ib(...i)),e.length=(...i)=>e.check(Bb(...i)),e.nonempty=(...i)=>e.check(dc(1,...i)),e.lowercase=i=>e.check(a2(i)),e.uppercase=i=>e.check(s2(i)),e.trim=()=>e.check(c2()),e.normalize=(...i)=>e.check(o2(...i)),e.toLowerCase=()=>e.check(u2()),e.toUpperCase=()=>e.check(d2()),e.slugify=()=>e.check(f2())}),lj=ne("ZodString",(e,n)=>{Ch.init(e,n),Hb.init(e,n),e.email=s=>e.check(MN(rj,s)),e.url=s=>e.check(RN(oj,s)),e.jwt=s=>e.check(YN(_j,s)),e.emoji=s=>e.check(kN(cj,s)),e.guid=s=>e.check(Ey(jy,s)),e.uuid=s=>e.check(NN(Po,s)),e.uuidv4=s=>e.check(jN(Po,s)),e.uuidv6=s=>e.check(CN(Po,s)),e.uuidv7=s=>e.check(DN(Po,s)),e.nanoid=s=>e.check(AN(uj,s)),e.guid=s=>e.check(Ey(jy,s)),e.cuid=s=>e.check(ON(dj,s)),e.cuid2=s=>e.check(zN(fj,s)),e.ulid=s=>e.check(PN(hj,s)),e.base64=s=>e.check(HN(xj,s)),e.base64url=s=>e.check(ZN(Sj,s)),e.xid=s=>e.check(IN(mj,s)),e.ksuid=s=>e.check(BN(gj,s)),e.ipv4=s=>e.check(LN(pj,s)),e.ipv6=s=>e.check(qN(vj,s)),e.cidrv4=s=>e.check(UN(yj,s)),e.cidrv6=s=>e.check($N(bj,s)),e.e164=s=>e.check(FN(wj,s)),e.datetime=s=>e.check(q2(s)),e.date=s=>e.check($2(s)),e.time=s=>e.check(Z2(s)),e.duration=s=>e.check(Y2(s))});function _n(e){return TN(lj,e)}const Mt=ne("ZodStringFormat",(e,n)=>{_t.init(e,n),Hb.init(e,n)}),rj=ne("ZodEmail",(e,n)=>{AM.init(e,n),Mt.init(e,n)}),jy=ne("ZodGUID",(e,n)=>{RM.init(e,n),Mt.init(e,n)}),Po=ne("ZodUUID",(e,n)=>{kM.init(e,n),Mt.init(e,n)}),oj=ne("ZodURL",(e,n)=>{OM.init(e,n),Mt.init(e,n)}),cj=ne("ZodEmoji",(e,n)=>{zM.init(e,n),Mt.init(e,n)}),uj=ne("ZodNanoID",(e,n)=>{PM.init(e,n),Mt.init(e,n)}),dj=ne("ZodCUID",(e,n)=>{IM.init(e,n),Mt.init(e,n)}),fj=ne("ZodCUID2",(e,n)=>{BM.init(e,n),Mt.init(e,n)}),hj=ne("ZodULID",(e,n)=>{LM.init(e,n),Mt.init(e,n)}),mj=ne("ZodXID",(e,n)=>{qM.init(e,n),Mt.init(e,n)}),gj=ne("ZodKSUID",(e,n)=>{UM.init(e,n),Mt.init(e,n)}),pj=ne("ZodIPv4",(e,n)=>{YM.init(e,n),Mt.init(e,n)}),vj=ne("ZodIPv6",(e,n)=>{GM.init(e,n),Mt.init(e,n)}),yj=ne("ZodCIDRv4",(e,n)=>{VM.init(e,n),Mt.init(e,n)}),bj=ne("ZodCIDRv6",(e,n)=>{KM.init(e,n),Mt.init(e,n)}),xj=ne("ZodBase64",(e,n)=>{WM.init(e,n),Mt.init(e,n)}),Sj=ne("ZodBase64URL",(e,n)=>{QM.init(e,n),Mt.init(e,n)}),wj=ne("ZodE164",(e,n)=>{JM.init(e,n),Mt.init(e,n)}),_j=ne("ZodJWT",(e,n)=>{tN.init(e,n),Mt.init(e,n)}),Zb=ne("ZodNumber",(e,n)=>{Ab.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(i,r,c)=>x2(e,i,r),e.gt=(i,r)=>e.check(My(i,r)),e.gte=(i,r)=>e.check(df(i,r)),e.min=(i,r)=>e.check(df(i,r)),e.lt=(i,r)=>e.check(Ty(i,r)),e.lte=(i,r)=>e.check(uf(i,r)),e.max=(i,r)=>e.check(uf(i,r)),e.int=i=>e.check(Cy(i)),e.safe=i=>e.check(Cy(i)),e.positive=i=>e.check(My(0,i)),e.nonnegative=i=>e.check(df(0,i)),e.negative=i=>e.check(Ty(0,i)),e.nonpositive=i=>e.check(uf(0,i)),e.multipleOf=(i,r)=>e.check(Ny(i,r)),e.step=(i,r)=>e.check(Ny(i,r)),e.finite=()=>e;const s=e._zod.bag;e.minValue=Math.max(s.minimum??Number.NEGATIVE_INFINITY,s.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(s.maximum??Number.POSITIVE_INFINITY,s.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(s.format??"").includes("int")||Number.isSafeInteger(s.multipleOf??.5),e.isFinite=!0,e.format=s.format??null});function ta(e){return XN(Zb,e)}const Ej=ne("ZodNumberFormat",(e,n)=>{nN.init(e,n),Zb.init(e,n)});function Cy(e){return QN(Ej,e)}const Tj=ne("ZodBoolean",(e,n)=>{aN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>S2(e,s,i)});function Xl(e){return JN(Tj,e)}const Mj=ne("ZodUnknown",(e,n)=>{sN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>_2()});function Dy(){return e2(Mj)}const Nj=ne("ZodNever",(e,n)=>{iN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>w2(e,s,i)});function jj(e){return t2(Nj,e)}const Cj=ne("ZodArray",(e,n)=>{lN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>N2(e,s,i,r),e.element=n.element,e.min=(s,i)=>e.check(dc(s,i)),e.nonempty=s=>e.check(dc(1,s)),e.max=(s,i)=>e.check(Ib(s,i)),e.length=(s,i)=>e.check(Bb(s,i)),e.unwrap=()=>e.element});function Pn(e,n){return h2(Cj,e,n)}const Dj=ne("ZodObject",(e,n)=>{oN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>j2(e,s,i,r),st(e,"shape",()=>n.shape),e.keyof=()=>hc(Object.keys(e._zod.def.shape)),e.catchall=s=>e.clone({...e._zod.def,catchall:s}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Dy()}),e.loose=()=>e.clone({...e._zod.def,catchall:Dy()}),e.strict=()=>e.clone({...e._zod.def,catchall:jj()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=s=>CT(e,s),e.safeExtend=s=>DT(e,s),e.merge=s=>RT(e,s),e.pick=s=>NT(e,s),e.omit=s=>jT(e,s),e.partial=(...s)=>kT(Fb,e,s[0]),e.required=(...s)=>AT(Yb,e,s[0])});function rr(e,n){const s={type:"object",shape:e??{},...Se(n)};return new Dj(s)}const Rj=ne("ZodUnion",(e,n)=>{cN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>C2(e,s,i,r),e.options=n.options});function kj(e,n){return new Rj({type:"union",options:e,...Se(n)})}const Aj=ne("ZodIntersection",(e,n)=>{uN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>D2(e,s,i,r)});function Oj(e,n){return new Aj({type:"intersection",left:e,right:n})}const zj=ne("ZodRecord",(e,n)=>{dN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>R2(e,s,i,r),e.keyType=n.keyType,e.valueType=n.valueType});function tr(e,n,s){return new zj({type:"record",keyType:e,valueType:n,...Se(s)})}const Zf=ne("ZodEnum",(e,n)=>{fN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(i,r,c)=>E2(e,i,r),e.enum=n.entries,e.options=Object.values(n.entries);const s=new Set(Object.keys(n.entries));e.extract=(i,r)=>{const c={};for(const u of i)if(s.has(u))c[u]=n.entries[u];else throw new Error(`Key ${u} not found in enum`);return new Zf({...n,checks:[],...Se(r),entries:c})},e.exclude=(i,r)=>{const c={...n.entries};for(const u of i)if(s.has(u))delete c[u];else throw new Error(`Key ${u} not found in enum`);return new Zf({...n,checks:[],...Se(r),entries:c})}});function hc(e,n){const s=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new Zf({type:"enum",entries:s,...Se(n)})}const Pj=ne("ZodTransform",(e,n)=>{hN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>M2(e,s),e._zod.parse=(s,i)=>{if(i.direction==="backward")throw new vb(e.constructor.name);s.addIssue=c=>{if(typeof c=="string")s.issues.push(lr(c,s.value,n));else{const u=c;u.fatal&&(u.continue=!1),u.code??(u.code="custom"),u.input??(u.input=s.value),u.inst??(u.inst=e),s.issues.push(lr(u))}};const r=n.transform(s.value,s);return r instanceof Promise?r.then(c=>(s.value=c,s)):(s.value=r,s)}});function Ij(e){return new Pj({type:"transform",transform:e})}const Fb=ne("ZodOptional",(e,n)=>{Pb.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>$b(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function Ry(e){return new Fb({type:"optional",innerType:e})}const Bj=ne("ZodExactOptional",(e,n)=>{mN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>$b(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function Lj(e){return new Bj({type:"optional",innerType:e})}const qj=ne("ZodNullable",(e,n)=>{gN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>k2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function ky(e){return new qj({type:"nullable",innerType:e})}const Uj=ne("ZodDefault",(e,n)=>{pN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>O2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function $j(e,n){return new Uj({type:"default",innerType:e,get defaultValue(){return typeof n=="function"?n():Sb(n)}})}const Hj=ne("ZodPrefault",(e,n)=>{vN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>z2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function Zj(e,n){return new Hj({type:"prefault",innerType:e,get defaultValue(){return typeof n=="function"?n():Sb(n)}})}const Yb=ne("ZodNonOptional",(e,n)=>{yN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>A2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function Fj(e,n){return new Yb({type:"nonoptional",innerType:e,...Se(n)})}const Yj=ne("ZodCatch",(e,n)=>{bN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>P2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Gj(e,n){return new Yj({type:"catch",innerType:e,catchValue:typeof n=="function"?n:()=>n})}const Vj=ne("ZodPipe",(e,n)=>{xN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>I2(e,s,i,r),e.in=n.in,e.out=n.out});function Ay(e,n){return new Vj({type:"pipe",in:e,out:n})}const Kj=ne("ZodReadonly",(e,n)=>{SN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>B2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function Wj(e){return new Kj({type:"readonly",innerType:e})}const Xj=ne("ZodCustom",(e,n)=>{wN.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>T2(e,s)});function Qj(e,n={}){return m2(Xj,e,n)}function Jj(e){return g2(e)}const eC=["list","grid"],Oa={text:"",categories:[],types:[],tiers:[],classReqs:[],majorIds:[],numericRanges:{},exclusionRanges:{},onlyWearableAtLevel:106,onlyClassCompatible:!1,excludeRestricted:!1,sortKeys:["relevance"],sortDescending:!0,viewMode:"list",resultsBelowBuild:!0},Oy=rr({min:ta().finite().optional(),max:ta().finite().optional()}),tC=rr({text:_n().catch(Oa.text),categories:Pn(_n()).catch([]),types:Pn(_n()).catch([]),tiers:Pn(_n()).catch([]),classReqs:Pn(hc(["Warrior","Assassin","Mage","Archer","Shaman"])).catch([]),majorIds:Pn(_n()).catch([]),numericRanges:tr(_n(),Oy).catch({}),exclusionRanges:tr(_n(),Oy).catch({}),onlyWearableAtLevel:ta().int().min(1).max(106).nullable().catch(106),onlyClassCompatible:Xl().catch(!1),excludeRestricted:Xl().catch(!1),sortKeys:Pn(_n()).catch(["relevance"]),sortDescending:Xl().catch(!0),viewMode:hc(eC).catch("list"),resultsBelowBuild:Xl().catch(!0)});function Gb(e){const n=e,s=tC.parse(e),i=Array.isArray(s.sortKeys)&&s.sortKeys.length>0?s.sortKeys:typeof n?.sort=="string"?[n.sort]:["relevance"];return{text:s.text,categories:s.categories,types:s.types,tiers:s.tiers,classReqs:s.classReqs,majorIds:s.majorIds,numericRanges:s.numericRanges,exclusionRanges:s.exclusionRanges??{},onlyWearableAtLevel:s.onlyWearableAtLevel,onlyClassCompatible:s.onlyClassCompatible,excludeRestricted:s.excludeRestricted,sortKeys:i,sortDescending:s.sortDescending,viewMode:s.viewMode,resultsBelowBuild:!!s.resultsBelowBuild}}function nC(e){return!!(e.text.trim()!==""||e.categories.length>0||e.types.length>0||e.tiers.length>0||e.classReqs.length>0||e.majorIds.length>0||e.numericRanges&&Object.keys(e.numericRanges).length>0||e.exclusionRanges&&Object.keys(e.exclusionRanges).length>0)}function aC(e,n){return Gb({...e,...n,numericRanges:n.numericRanges!==void 0?n.numericRanges:e.numericRanges,exclusionRanges:n.exclusionRanges!==void 0?n.exclusionRanges:e.exclusionRanges??{}})}const sC="ENTRIES",Vb="KEYS",Kb="VALUES",on="";class ff{constructor(n,s){const i=n._tree,r=Array.from(i.keys());this.set=n,this._type=s,this._path=r.length>0?[{node:i,keys:r}]:[]}next(){const n=this.dive();return this.backtrack(),n}dive(){if(this._path.length===0)return{done:!0,value:void 0};const{node:n,keys:s}=Ai(this._path);if(Ai(s)===on)return{done:!1,value:this.result()};const i=n.get(Ai(s));return this._path.push({node:i,keys:Array.from(i.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;const n=Ai(this._path).keys;n.pop(),!(n.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:n})=>Ai(n)).filter(n=>n!==on).join("")}value(){return Ai(this._path).node.get(on)}result(){switch(this._type){case Kb:return this.value();case Vb:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const Ai=e=>e[e.length-1],iC=(e,n,s)=>{const i=new Map;if(n===void 0)return i;const r=n.length+1,c=r+s,u=new Uint8Array(c*r).fill(s+1);for(let d=0;d<r;++d)u[d]=d;for(let d=1;d<c;++d)u[d*r]=d;return Wb(e,n,s,i,u,1,r,""),i},Wb=(e,n,s,i,r,c,u,d)=>{const g=c*u;e:for(const p of e.keys())if(p===on){const y=r[g-1];y<=s&&i.set(d,[e.get(p),y])}else{let y=c;for(let v=0;v<p.length;++v,++y){const b=p[v],S=u*y,T=S-u;let E=r[S];const C=Math.max(0,y-s-1),O=Math.min(u-1,y+s);for(let R=C;R<O;++R){const I=b!==n[R],B=r[T+R]+ +I,q=r[T+R+1]+1,N=r[S+R]+1,j=r[S+R+1]=Math.min(B,q,N);j<E&&(E=j)}if(E>s)continue e}Wb(e.get(p),n,s,i,r,y,u,d+p)}};class fs{constructor(n=new Map,s=""){this._size=void 0,this._tree=n,this._prefix=s}atPrefix(n){if(!n.startsWith(this._prefix))throw new Error("Mismatched prefix");const[s,i]=mc(this._tree,n.slice(this._prefix.length));if(s===void 0){const[r,c]=Dh(i);for(const u of r.keys())if(u!==on&&u.startsWith(c)){const d=new Map;return d.set(u.slice(c.length),r.get(u)),new fs(d,n)}}return new fs(s,n)}clear(){this._size=void 0,this._tree.clear()}delete(n){return this._size=void 0,lC(this._tree,n)}entries(){return new ff(this,sC)}forEach(n){for(const[s,i]of this)n(s,i,this)}fuzzyGet(n,s){return iC(this._tree,n,s)}get(n){const s=Ff(this._tree,n);return s!==void 0?s.get(on):void 0}has(n){const s=Ff(this._tree,n);return s!==void 0&&s.has(on)}keys(){return new ff(this,Vb)}set(n,s){if(typeof n!="string")throw new Error("key must be a string");return this._size=void 0,hf(this._tree,n).set(on,s),this}get size(){if(this._size)return this._size;this._size=0;const n=this.entries();for(;!n.next().done;)this._size+=1;return this._size}update(n,s){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;const i=hf(this._tree,n);return i.set(on,s(i.get(on))),this}fetch(n,s){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;const i=hf(this._tree,n);let r=i.get(on);return r===void 0&&i.set(on,r=s()),r}values(){return new ff(this,Kb)}[Symbol.iterator](){return this.entries()}static from(n){const s=new fs;for(const[i,r]of n)s.set(i,r);return s}static fromObject(n){return fs.from(Object.entries(n))}}const mc=(e,n,s=[])=>{if(n.length===0||e==null)return[e,s];for(const i of e.keys())if(i!==on&&n.startsWith(i))return s.push([e,i]),mc(e.get(i),n.slice(i.length),s);return s.push([e,n]),mc(void 0,"",s)},Ff=(e,n)=>{if(n.length===0||e==null)return e;for(const s of e.keys())if(s!==on&&n.startsWith(s))return Ff(e.get(s),n.slice(s.length))},hf=(e,n)=>{const s=n.length;e:for(let i=0;e&&i<s;){for(const c of e.keys())if(c!==on&&n[i]===c[0]){const u=Math.min(s-i,c.length);let d=1;for(;d<u&&n[i+d]===c[d];)++d;const g=e.get(c);if(d===c.length)e=g;else{const p=new Map;p.set(c.slice(d),g),e.set(n.slice(i,i+d),p),e.delete(c),e=p}i+=d;continue e}const r=new Map;return e.set(n.slice(i),r),r}return e},lC=(e,n)=>{const[s,i]=mc(e,n);if(s!==void 0){if(s.delete(on),s.size===0)Xb(i);else if(s.size===1){const[r,c]=s.entries().next().value;Qb(i,r,c)}}},Xb=e=>{if(e.length===0)return;const[n,s]=Dh(e);if(n.delete(s),n.size===0)Xb(e.slice(0,-1));else if(n.size===1){const[i,r]=n.entries().next().value;i!==on&&Qb(e.slice(0,-1),i,r)}},Qb=(e,n,s)=>{if(e.length===0)return;const[i,r]=Dh(e);i.set(r+n,s),i.delete(r)},Dh=e=>e[e.length-1],Rh="or",Jb="and",rC="and_not";class Fi{constructor(n){if(n?.fields==null)throw new Error('MiniSearch: option "fields" must be provided');const s=n.autoVacuum==null||n.autoVacuum===!0?pf:n.autoVacuum;this._options={...gf,...n,autoVacuum:s,searchOptions:{...zy,...n.searchOptions||{}},autoSuggestOptions:{...fC,...n.autoSuggestOptions||{}}},this._index=new fs,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=Gf,this.addFields(this._options.fields)}add(n){const{extractField:s,stringifyField:i,tokenize:r,processTerm:c,fields:u,idField:d}=this._options,g=s(n,d);if(g==null)throw new Error(`MiniSearch: document does not have ID field "${d}"`);if(this._idToShortId.has(g))throw new Error(`MiniSearch: duplicate ID ${g}`);const p=this.addDocumentId(g);this.saveStoredFields(p,n);for(const y of u){const v=s(n,y);if(v==null)continue;const b=r(i(v,y),y),S=this._fieldIds[y],T=new Set(b).size;this.addFieldLength(p,S,this._documentCount-1,T);for(const E of b){const C=c(E,y);if(Array.isArray(C))for(const O of C)this.addTerm(S,p,O);else C&&this.addTerm(S,p,C)}}}addAll(n){for(const s of n)this.add(s)}addAllAsync(n,s={}){const{chunkSize:i=10}=s,r={chunk:[],promise:Promise.resolve()},{chunk:c,promise:u}=n.reduce(({chunk:d,promise:g},p,y)=>(d.push(p),(y+1)%i===0?{chunk:[],promise:g.then(()=>new Promise(v=>setTimeout(v,0))).then(()=>this.addAll(d))}:{chunk:d,promise:g}),r);return u.then(()=>this.addAll(c))}remove(n){const{tokenize:s,processTerm:i,extractField:r,stringifyField:c,fields:u,idField:d}=this._options,g=r(n,d);if(g==null)throw new Error(`MiniSearch: document does not have ID field "${d}"`);const p=this._idToShortId.get(g);if(p==null)throw new Error(`MiniSearch: cannot remove document with ID ${g}: it is not in the index`);for(const y of u){const v=r(n,y);if(v==null)continue;const b=s(c(v,y),y),S=this._fieldIds[y],T=new Set(b).size;this.removeFieldLength(p,S,this._documentCount,T);for(const E of b){const C=i(E,y);if(Array.isArray(C))for(const O of C)this.removeTerm(S,p,O);else C&&this.removeTerm(S,p,C)}}this._storedFields.delete(p),this._documentIds.delete(p),this._idToShortId.delete(g),this._fieldLength.delete(p),this._documentCount-=1}removeAll(n){if(n)for(const s of n)this.remove(s);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new fs,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(n){const s=this._idToShortId.get(n);if(s==null)throw new Error(`MiniSearch: cannot discard document with ID ${n}: it is not in the index`);this._idToShortId.delete(n),this._documentIds.delete(s),this._storedFields.delete(s),(this._fieldLength.get(s)||[]).forEach((i,r)=>{this.removeFieldLength(s,r,this._documentCount,i)}),this._fieldLength.delete(s),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;const{minDirtFactor:n,minDirtCount:s,batchSize:i,batchWait:r}=this._options.autoVacuum;this.conditionalVacuum({batchSize:i,batchWait:r},{minDirtCount:s,minDirtFactor:n})}discardAll(n){const s=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const i of n)this.discard(i)}finally{this._options.autoVacuum=s}this.maybeAutoVacuum()}replace(n){const{idField:s,extractField:i}=this._options,r=i(n,s);this.discard(r),this.add(n)}vacuum(n={}){return this.conditionalVacuum(n)}conditionalVacuum(n,s){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&s,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{const i=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=Gf,this.performVacuuming(n,i)}),this._enqueuedVacuum)):this.vacuumConditionsMet(s)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(n),this._currentVacuum)}async performVacuuming(n,s){const i=this._dirtCount;if(this.vacuumConditionsMet(s)){const r=n.batchSize||Yf.batchSize,c=n.batchWait||Yf.batchWait;let u=1;for(const[d,g]of this._index){for(const[p,y]of g)for(const[v]of y)this._documentIds.has(v)||(y.size<=1?g.delete(p):y.delete(v));this._index.get(d).size===0&&this._index.delete(d),u%r===0&&await new Promise(p=>setTimeout(p,c)),u+=1}this._dirtCount-=i}await null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null}vacuumConditionsMet(n){if(n==null)return!0;let{minDirtCount:s,minDirtFactor:i}=n;return s=s||pf.minDirtCount,i=i||pf.minDirtFactor,this.dirtCount>=s&&this.dirtFactor>=i}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(n){return this._idToShortId.has(n)}getStoredFields(n){const s=this._idToShortId.get(n);if(s!=null)return this._storedFields.get(s)}search(n,s={}){const{searchOptions:i}=this._options,r={...i,...s},c=this.executeQuery(n,s),u=[];for(const[d,{score:g,terms:p,match:y}]of c){const v=p.length||1,b={id:this._documentIds.get(d),score:g*v,terms:Object.keys(y),queryTerms:p,match:y};Object.assign(b,this._storedFields.get(d)),(r.filter==null||r.filter(b))&&u.push(b)}return n===Fi.wildcard&&r.boostDocument==null||u.sort(Iy),u}autoSuggest(n,s={}){s={...this._options.autoSuggestOptions,...s};const i=new Map;for(const{score:c,terms:u}of this.search(n,s)){const d=u.join(" "),g=i.get(d);g!=null?(g.score+=c,g.count+=1):i.set(d,{score:c,terms:u,count:1})}const r=[];for(const[c,{score:u,terms:d,count:g}]of i)r.push({suggestion:c,terms:d,score:u/g});return r.sort(Iy),r}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(n,s){if(s==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(n),s)}static async loadJSONAsync(n,s){if(s==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(n),s)}static getDefault(n){if(gf.hasOwnProperty(n))return mf(gf,n);throw new Error(`MiniSearch: unknown option "${n}"`)}static loadJS(n,s){const{index:i,documentIds:r,fieldLength:c,storedFields:u,serializationVersion:d}=n,g=this.instantiateMiniSearch(n,s);g._documentIds=Io(r),g._fieldLength=Io(c),g._storedFields=Io(u);for(const[p,y]of g._documentIds)g._idToShortId.set(y,p);for(const[p,y]of i){const v=new Map;for(const b of Object.keys(y)){let S=y[b];d===1&&(S=S.ds),v.set(parseInt(b,10),Io(S))}g._index.set(p,v)}return g}static async loadJSAsync(n,s){const{index:i,documentIds:r,fieldLength:c,storedFields:u,serializationVersion:d}=n,g=this.instantiateMiniSearch(n,s);g._documentIds=await Bo(r),g._fieldLength=await Bo(c),g._storedFields=await Bo(u);for(const[y,v]of g._documentIds)g._idToShortId.set(v,y);let p=0;for(const[y,v]of i){const b=new Map;for(const S of Object.keys(v)){let T=v[S];d===1&&(T=T.ds),b.set(parseInt(S,10),await Bo(T))}++p%1e3===0&&await ex(0),g._index.set(y,b)}return g}static instantiateMiniSearch(n,s){const{documentCount:i,nextId:r,fieldIds:c,averageFieldLength:u,dirtCount:d,serializationVersion:g}=n;if(g!==1&&g!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const p=new Fi(s);return p._documentCount=i,p._nextId=r,p._idToShortId=new Map,p._fieldIds=c,p._avgFieldLength=u,p._dirtCount=d||0,p._index=new fs,p}executeQuery(n,s={}){if(n===Fi.wildcard)return this.executeWildcardQuery(s);if(typeof n!="string"){const b={...s,...n,queries:void 0},S=n.queries.map(T=>this.executeQuery(T,b));return this.combineResults(S,b.combineWith)}const{tokenize:i,processTerm:r,searchOptions:c}=this._options,u={tokenize:i,processTerm:r,...c,...s},{tokenize:d,processTerm:g}=u,v=d(n).flatMap(b=>g(b)).filter(b=>!!b).map(dC(u)).map(b=>this.executeQuerySpec(b,u));return this.combineResults(v,u.combineWith)}executeQuerySpec(n,s){const i={...this._options.searchOptions,...s},r=(i.fields||this._options.fields).reduce((E,C)=>({...E,[C]:mf(i.boost,C)||1}),{}),{boostDocument:c,weights:u,maxFuzzy:d,bm25:g}=i,{fuzzy:p,prefix:y}={...zy.weights,...u},v=this._index.get(n.term),b=this.termResults(n.term,n.term,1,n.termBoost,v,r,c,g);let S,T;if(n.prefix&&(S=this._index.atPrefix(n.term)),n.fuzzy){const E=n.fuzzy===!0?.2:n.fuzzy,C=E<1?Math.min(d,Math.round(n.term.length*E)):E;C&&(T=this._index.fuzzyGet(n.term,C))}if(S)for(const[E,C]of S){const O=E.length-n.term.length;if(!O)continue;T?.delete(E);const R=y*E.length/(E.length+.3*O);this.termResults(n.term,E,R,n.termBoost,C,r,c,g,b)}if(T)for(const E of T.keys()){const[C,O]=T.get(E);if(!O)continue;const R=p*E.length/(E.length+O);this.termResults(n.term,E,R,n.termBoost,C,r,c,g,b)}return b}executeWildcardQuery(n){const s=new Map,i={...this._options.searchOptions,...n};for(const[r,c]of this._documentIds){const u=i.boostDocument?i.boostDocument(c,"",this._storedFields.get(r)):1;s.set(r,{score:u,terms:[],match:{}})}return s}combineResults(n,s=Rh){if(n.length===0)return new Map;const i=s.toLowerCase(),r=oC[i];if(!r)throw new Error(`Invalid combination operator: ${s}`);return n.reduce(r)||new Map}toJSON(){const n=[];for(const[s,i]of this._index){const r={};for(const[c,u]of i)r[c]=Object.fromEntries(u);n.push([s,r])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:n,serializationVersion:2}}termResults(n,s,i,r,c,u,d,g,p=new Map){if(c==null)return p;for(const y of Object.keys(u)){const v=u[y],b=this._fieldIds[y],S=c.get(b);if(S==null)continue;let T=S.size;const E=this._avgFieldLength[b];for(const C of S.keys()){if(!this._documentIds.has(C)){this.removeTerm(b,C,s),T-=1;continue}const O=d?d(this._documentIds.get(C),s,this._storedFields.get(C)):1;if(!O)continue;const R=S.get(C),I=this._fieldLength.get(C)[b],B=uC(R,T,this._documentCount,I,E,g),q=i*r*v*O*B,N=p.get(C);if(N){N.score+=q,hC(N.terms,n);const j=mf(N.match,s);j?j.push(y):N.match[s]=[y]}else p.set(C,{score:q,terms:[n],match:{[s]:[y]}})}}return p}addTerm(n,s,i){const r=this._index.fetch(i,By);let c=r.get(n);if(c==null)c=new Map,c.set(s,1),r.set(n,c);else{const u=c.get(s);c.set(s,(u||0)+1)}}removeTerm(n,s,i){if(!this._index.has(i)){this.warnDocumentChanged(s,n,i);return}const r=this._index.fetch(i,By),c=r.get(n);c==null||c.get(s)==null?this.warnDocumentChanged(s,n,i):c.get(s)<=1?c.size<=1?r.delete(n):c.delete(s):c.set(s,c.get(s)-1),this._index.get(i).size===0&&this._index.delete(i)}warnDocumentChanged(n,s,i){for(const r of Object.keys(this._fieldIds))if(this._fieldIds[r]===s){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(n)} has changed before removal: term "${i}" was not present in field "${r}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(n){const s=this._nextId;return this._idToShortId.set(n,s),this._documentIds.set(s,n),this._documentCount+=1,this._nextId+=1,s}addFields(n){for(let s=0;s<n.length;s++)this._fieldIds[n[s]]=s}addFieldLength(n,s,i,r){let c=this._fieldLength.get(n);c==null&&this._fieldLength.set(n,c=[]),c[s]=r;const d=(this._avgFieldLength[s]||0)*i+r;this._avgFieldLength[s]=d/(i+1)}removeFieldLength(n,s,i,r){if(i===1){this._avgFieldLength[s]=0;return}const c=this._avgFieldLength[s]*i-r;this._avgFieldLength[s]=c/(i-1)}saveStoredFields(n,s){const{storeFields:i,extractField:r}=this._options;if(i==null||i.length===0)return;let c=this._storedFields.get(n);c==null&&this._storedFields.set(n,c={});for(const u of i){const d=r(s,u);d!==void 0&&(c[u]=d)}}}Fi.wildcard=Symbol("*");const mf=(e,n)=>Object.prototype.hasOwnProperty.call(e,n)?e[n]:void 0,oC={[Rh]:(e,n)=>{for(const s of n.keys()){const i=e.get(s);if(i==null)e.set(s,n.get(s));else{const{score:r,terms:c,match:u}=n.get(s);i.score=i.score+r,i.match=Object.assign(i.match,u),Py(i.terms,c)}}return e},[Jb]:(e,n)=>{const s=new Map;for(const i of n.keys()){const r=e.get(i);if(r==null)continue;const{score:c,terms:u,match:d}=n.get(i);Py(r.terms,u),s.set(i,{score:r.score+c,terms:r.terms,match:Object.assign(r.match,d)})}return s},[rC]:(e,n)=>{for(const s of n.keys())e.delete(s);return e}},cC={k:1.2,b:.7,d:.5},uC=(e,n,s,i,r,c)=>{const{k:u,b:d,d:g}=c;return Math.log(1+(s-n+.5)/(n+.5))*(g+e*(u+1)/(e+u*(1-d+d*i/r)))},dC=e=>(n,s,i)=>{const r=typeof e.fuzzy=="function"?e.fuzzy(n,s,i):e.fuzzy||!1,c=typeof e.prefix=="function"?e.prefix(n,s,i):e.prefix===!0,u=typeof e.boostTerm=="function"?e.boostTerm(n,s,i):1;return{term:n,fuzzy:r,prefix:c,termBoost:u}},gf={idField:"id",extractField:(e,n)=>e[n],stringifyField:(e,n)=>e.toString(),tokenize:e=>e.split(mC),processTerm:e=>e.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(e,n)=>{typeof console?.[e]=="function"&&console[e](n)},autoVacuum:!0},zy={combineWith:Rh,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:cC},fC={combineWith:Jb,prefix:(e,n,s)=>n===s.length-1},Yf={batchSize:1e3,batchWait:10},Gf={minDirtFactor:.1,minDirtCount:20},pf={...Yf,...Gf},hC=(e,n)=>{e.includes(n)||e.push(n)},Py=(e,n)=>{for(const s of n)e.includes(s)||e.push(s)},Iy=({score:e},{score:n})=>n-e,By=()=>new Map,Io=e=>{const n=new Map;for(const s of Object.keys(e))n.set(parseInt(s,10),e[s]);return n},Bo=async e=>{const n=new Map;let s=0;for(const i of Object.keys(e))n.set(parseInt(i,10),e[i]),++s%1e3===0&&await ex(0);return n},ex=e=>new Promise(n=>setTimeout(n,e)),mC=/[\n\r\p{Z}\p{P}]+/u;function tx(e,n){return n==="level"?e.level:n==="powderSlots"||n==="slots"?e.powderSlots:n==="baseDps"?e.roughScoreFields.baseDps:e.numericIndex[n]??0}function gC(e,n){return n.length===0||n.includes(e.category)}function Ly(e,n){return n.length===0?!0:e?n.includes(e):!1}function pC(e,n){for(const[s,i]of Object.entries(n.numericRanges)){if(!i)continue;const r=tx(e,s);if(typeof i.min=="number"&&r<i.min||typeof i.max=="number"&&r>i.max)return!1}return!0}function vC(e,n){for(const[s,i]of Object.entries(n.exclusionRanges??{})){if(!i)continue;const r=tx(e,s);if(typeof i.max=="number"&&r>i.max||typeof i.min=="number"&&r<i.min)return!1}return!0}function yC(e,n){if(n.excludeRestricted&&(e.restricted||e.deprecated)||n.onlyWearableAtLevel!==null&&!uT(e,n.onlyWearableAtLevel))return!1;if(n.onlyClassCompatible){const s=n.classReqs[0]??null;if(!pb(e,s))return!1}return!0}function bC(e,n){return n.length===0?!0:e.majorIds.length===0?!1:n.every(s=>e.majorIds.includes(s))}function xC(e,n){return!(!gC(e,n.categories)||!Ly(e.type,n.types)||!Ly(e.tier,n.tiers)||n.classReqs.length>0&&(e.classReq===null||!n.classReqs.includes(e.classReq))||!bC(e,n.majorIds)||!pC(e,n)||!vC(e,n)||!yC(e,n))}function qy(e,n){return n==="relevance"?0:n==="level"?e.level:n==="powderSlots"||n==="slots"?e.powderSlots:n==="baseDps"?e.roughScoreFields.baseDps:e.numericIndex[n]??0}function SC(e,n,s){const i=n.trim().toLowerCase();if(!i)return 0;const r=e.displayName.toLowerCase();return r===i?s+5e3:r.startsWith(i)?s+3e3:r.includes(i)?s+1200:e.searchText.includes(i)?s+300:s}function wC(e,n,s){const i=s.sortDescending?-1:1,r=s.sortKeys?.length?s.sortKeys:["relevance"];for(const c of r)if(c==="relevance"){if(e.relevance!==n.relevance)return(e.relevance>n.relevance?-1:1)*(s.sortDescending?1:-1)}else{const u=qy(e.item,c),d=qy(n.item,c);if(u!==d)return u<d?-i:i}return e.item.displayName.localeCompare(n.item.displayName)}function _C(){return{categories:{},types:{},tiers:{},majorIds:{}}}function vf(e,n){n&&(e[n]=(e[n]??0)+1)}class EC{miniSearch;itemsById;allItems;constructor(n){this.allItems=n,this.itemsById=new Map(n.map(s=>[s.id,s])),this.miniSearch=new Fi({fields:["displayName","searchText","majorIdsText"],storeFields:["id"],idField:"id",searchOptions:{boost:{displayName:6,searchText:2,majorIdsText:2},prefix:!0,fuzzy:.2,combineWith:"OR"}}),this.miniSearch.addAll(n.map(s=>({id:s.id,displayName:s.displayName,searchText:s.searchText,majorIdsText:s.majorIdsText})))}search(n){const s=n.text.trim(),i=s?this.miniSearch.search(s,{prefix:!0,fuzzy:.2,boost:{displayName:8,searchText:2,majorIdsText:2}}):[],r=new Map;for(const p of i){const y=this.itemsById.get(p.id);y&&r.set(y.id,SC(y,s,Number(p.score??0)))}const c=s?[...this.allItems]:this.allItems,u=[],d=_C();for(const p of c){const y=r.get(p.id)??0;if(!(s&&y===0&&!p.searchText.includes(s.toLowerCase()))&&xC(p,n)){u.push({item:p,relevance:y}),d.categories[p.category]=(d.categories[p.category]??0)+1,vf(d.types,p.type),vf(d.tiers,p.tier);for(const v of p.majorIds)vf(d.majorIds,v)}}u.sort((p,y)=>wC(p,y,n));const g=u.map(({item:p,relevance:y})=>({id:p.id,relevance:y}));return{total:g.length,rows:g,facetCounts:d}}}class TC{worker=null;fallbackEngine=null;requestId=0;pending=new Map;initialized=!1;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL(""+new URL("search-worker-Dray3ejl.js",import.meta.url).href,import.meta.url),{type:"module"}),this.worker.onmessage=n=>{const s=n.data,i=this.pending.get(s.requestId);i&&(this.pending.delete(s.requestId),s.type==="error"?i.reject(new Error(s.message)):s.type==="ready"?i.resolve(void 0):i.resolve(s.result))},this.worker.onerror=n=>{console.error(n),this.worker?.terminate(),this.worker=null})}async init(n){if(!this.initialized){if(this.worker){await this.send({type:"init",items:n}),this.initialized=!0;return}this.fallbackEngine=new EC(n),this.initialized=!0}}async search(n){if(!this.initialized)throw new Error("SearchWorkerClient.init() must be called before search()");if(this.worker)return this.send({type:"search",state:n});if(!this.fallbackEngine)throw new Error("Fallback search engine unavailable");return this.fallbackEngine.search(n)}dispose(){this.worker?.terminate(),this.worker=null,this.fallbackEngine=null,this.pending.clear()}send(n){if(!this.worker)return Promise.reject(new Error("Search worker unavailable"));const s=++this.requestId;return new Promise((i,r)=>{this.pending.set(s,{resolve:i,reject:r}),this.worker.postMessage({...n,requestId:s})})}}function Oi(e,n,s){let i=s.initialDeps??[],r,c=!0;function u(){var d,g,p;let y;s.key&&((d=s.debug)!=null&&d.call(s))&&(y=Date.now());const v=e();if(!(v.length!==i.length||v.some((T,E)=>i[E]!==T)))return r;i=v;let S;if(s.key&&((g=s.debug)!=null&&g.call(s))&&(S=Date.now()),r=n(...v),s.key&&((p=s.debug)!=null&&p.call(s))){const T=Math.round((Date.now()-y)*100)/100,E=Math.round((Date.now()-S)*100)/100,C=E/16,O=(R,I)=>{for(R=String(R);R.length<I;)R=" "+R;return R};console.info(`%c ${O(E,5)} /${O(T,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*C,120))}deg 100% 31%);`,s?.key)}return s?.onChange&&!(c&&s.skipInitialOnChange)&&s.onChange(r),c=!1,r}return u.updateDeps=d=>{i=d},u}function Uy(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const MC=(e,n)=>Math.abs(e-n)<1.01,NC=(e,n,s)=>{let i;return function(...r){e.clearTimeout(i),i=e.setTimeout(()=>n.apply(this,r),s)}},$y=e=>{const{offsetWidth:n,offsetHeight:s}=e;return{width:n,height:s}},jC=e=>e,CC=e=>{const n=Math.max(e.startIndex-e.overscan,0),s=Math.min(e.endIndex+e.overscan,e.count-1),i=[];for(let r=n;r<=s;r++)i.push(r);return i},DC=(e,n)=>{const s=e.scrollElement;if(!s)return;const i=e.targetWindow;if(!i)return;const r=u=>{const{width:d,height:g}=u;n({width:Math.round(d),height:Math.round(g)})};if(r($y(s)),!i.ResizeObserver)return()=>{};const c=new i.ResizeObserver(u=>{const d=()=>{const g=u[0];if(g?.borderBoxSize){const p=g.borderBoxSize[0];if(p){r({width:p.inlineSize,height:p.blockSize});return}}r($y(s))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(d):d()});return c.observe(s,{box:"border-box"}),()=>{c.unobserve(s)}},Hy={passive:!0},Zy=typeof window>"u"?!0:"onscrollend"in window,RC=(e,n)=>{const s=e.scrollElement;if(!s)return;const i=e.targetWindow;if(!i)return;let r=0;const c=e.options.useScrollendEvent&&Zy?()=>{}:NC(i,()=>{n(r,!1)},e.options.isScrollingResetDelay),u=y=>()=>{const{horizontal:v,isRtl:b}=e.options;r=v?s.scrollLeft*(b&&-1||1):s.scrollTop,c(),n(r,y)},d=u(!0),g=u(!1);s.addEventListener("scroll",d,Hy);const p=e.options.useScrollendEvent&&Zy;return p&&s.addEventListener("scrollend",g,Hy),()=>{s.removeEventListener("scroll",d),p&&s.removeEventListener("scrollend",g)}},kC=(e,n,s)=>{if(n?.borderBoxSize){const i=n.borderBoxSize[0];if(i)return Math.round(i[s.options.horizontal?"inlineSize":"blockSize"])}return e[s.options.horizontal?"offsetWidth":"offsetHeight"]},AC=(e,{adjustments:n=0,behavior:s},i)=>{var r,c;const u=e+n;(c=(r=i.scrollElement)==null?void 0:r.scrollTo)==null||c.call(r,{[i.options.horizontal?"left":"top"]:u,behavior:s})};class OC{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let s=null;const i=()=>s||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:s=new this.targetWindow.ResizeObserver(r=>{r.forEach(c=>{const u=()=>{this._measureElement(c.target,c)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(u):u()})}));return{disconnect:()=>{var r;(r=i())==null||r.disconnect(),s=null},observe:r=>{var c;return(c=i())==null?void 0:c.observe(r,{box:"border-box"})},unobserve:r=>{var c;return(c=i())==null?void 0:c.unobserve(r)}}})(),this.range=null,this.setOptions=s=>{Object.entries(s).forEach(([i,r])=>{typeof r>"u"&&delete s[i]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:jC,rangeExtractor:CC,onChange:()=>{},measureElement:kC,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...s}},this.notify=s=>{var i,r;(r=(i=this.options).onChange)==null||r.call(i,this,s)},this.maybeNotify=Oi(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),s=>{this.notify(s)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(s=>s()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var s;const i=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==i){if(this.cleanup(),!i){this.maybeNotify();return}this.scrollElement=i,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((s=this.scrollElement)==null?void 0:s.window)??null,this.elementsCache.forEach(r=>{this.observer.observe(r)}),this.unsubs.push(this.options.observeElementRect(this,r=>{this.scrollRect=r,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(r,c)=>{this.scrollAdjustments=0,this.scrollDirection=c?this.getScrollOffset()<r?"forward":"backward":null,this.scrollOffset=r,this.isScrolling=c,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(s,i)=>{const r=new Map,c=new Map;for(let u=i-1;u>=0;u--){const d=s[u];if(r.has(d.lane))continue;const g=c.get(d.lane);if(g==null||d.end>g.end?c.set(d.lane,d):d.end<g.end&&r.set(d.lane,!0),r.size===this.options.lanes)break}return c.size===this.options.lanes?Array.from(c.values()).sort((u,d)=>u.end===d.end?u.index-d.index:u.end-d.end)[0]:void 0},this.getMeasurementOptions=Oi(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(s,i,r,c,u,d)=>(this.prevLanes!==void 0&&this.prevLanes!==d&&(this.lanesChangedFlag=!0),this.prevLanes=d,this.pendingMeasuredCacheIndexes=[],{count:s,paddingStart:i,scrollMargin:r,getItemKey:c,enabled:u,lanes:d}),{key:!1}),this.getMeasurements=Oi(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:s,paddingStart:i,scrollMargin:r,getItemKey:c,enabled:u,lanes:d},g)=>{if(!u)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>s)for(const b of this.laneAssignments.keys())b>=s&&this.laneAssignments.delete(b);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(b=>{this.itemSizeCache.set(b.key,b.size)}));const p=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===s&&(this.lanesSettling=!1);const y=this.measurementsCache.slice(0,p),v=new Array(d).fill(void 0);for(let b=0;b<p;b++){const S=y[b];S&&(v[S.lane]=b)}for(let b=p;b<s;b++){const S=c(b),T=this.laneAssignments.get(b);let E,C;if(T!==void 0&&this.options.lanes>1){E=T;const B=v[E],q=B!==void 0?y[B]:void 0;C=q?q.end+this.options.gap:i+r}else{const B=this.options.lanes===1?y[b-1]:this.getFurthestMeasurement(y,b);C=B?B.end+this.options.gap:i+r,E=B?B.lane:b%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(b,E)}const O=g.get(S),R=typeof O=="number"?O:this.options.estimateSize(b),I=C+R;y[b]={index:b,start:C,size:R,end:I,key:S,lane:E},v[E]=b}return this.measurementsCache=y,y},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Oi(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(s,i,r,c)=>this.range=s.length>0&&i>0?zC({measurements:s,outerSize:i,scrollOffset:r,lanes:c}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Oi(()=>{let s=null,i=null;const r=this.calculateRange();return r&&(s=r.startIndex,i=r.endIndex),this.maybeNotify.updateDeps([this.isScrolling,s,i]),[this.options.rangeExtractor,this.options.overscan,this.options.count,s,i]},(s,i,r,c,u)=>c===null||u===null?[]:s({startIndex:c,endIndex:u,overscan:i,count:r}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=s=>{const i=this.options.indexAttribute,r=s.getAttribute(i);return r?parseInt(r,10):(console.warn(`Missing attribute name '${i}={index}' on measured element.`),-1)},this._measureElement=(s,i)=>{const r=this.indexFromElement(s),c=this.measurementsCache[r];if(!c)return;const u=c.key,d=this.elementsCache.get(u);d!==s&&(d&&this.observer.unobserve(d),this.observer.observe(s),this.elementsCache.set(u,s)),s.isConnected&&this.resizeItem(r,this.options.measureElement(s,i,this))},this.resizeItem=(s,i)=>{const r=this.measurementsCache[s];if(!r)return;const c=this.itemSizeCache.get(r.key)??r.size,u=i-c;u!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(r,u,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=u,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,i)),this.notify(!1))},this.measureElement=s=>{if(!s){this.elementsCache.forEach((i,r)=>{i.isConnected||(this.observer.unobserve(i),this.elementsCache.delete(r))});return}this._measureElement(s,void 0)},this.getVirtualItems=Oi(()=>[this.getVirtualIndexes(),this.getMeasurements()],(s,i)=>{const r=[];for(let c=0,u=s.length;c<u;c++){const d=s[c],g=i[d];r.push(g)}return r},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=s=>{const i=this.getMeasurements();if(i.length!==0)return Uy(i[nx(0,i.length-1,r=>Uy(i[r]).start,s)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const s=this.scrollElement.document.documentElement;return this.options.horizontal?s.scrollWidth-this.scrollElement.innerWidth:s.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(s,i,r=0)=>{if(!this.scrollElement)return 0;const c=this.getSize(),u=this.getScrollOffset();i==="auto"&&(i=s>=u+c?"end":"start"),i==="center"?s+=(r-c)/2:i==="end"&&(s-=c);const d=this.getMaxScrollOffset();return Math.max(Math.min(d,s),0)},this.getOffsetForIndex=(s,i="auto")=>{s=Math.max(0,Math.min(s,this.options.count-1));const r=this.measurementsCache[s];if(!r)return;const c=this.getSize(),u=this.getScrollOffset();if(i==="auto")if(r.end>=u+c-this.options.scrollPaddingEnd)i="end";else if(r.start<=u+this.options.scrollPaddingStart)i="start";else return[u,i];if(i==="end"&&s===this.options.count-1)return[this.getMaxScrollOffset(),i];const d=i==="end"?r.end+this.options.scrollPaddingEnd:r.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(d,i,r.size),i]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(s,{align:i="start",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(s,i),{adjustments:void 0,behavior:r})},this.scrollToIndex=(s,{align:i="auto",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),s=Math.max(0,Math.min(s,this.options.count-1)),this.currentScrollToIndex=s;let c=0;const u=10,d=p=>{if(!this.targetWindow)return;const y=this.getOffsetForIndex(s,p);if(!y){console.warn("Failed to get offset for index:",s);return}const[v,b]=y;this._scrollToOffset(v,{adjustments:void 0,behavior:r}),this.targetWindow.requestAnimationFrame(()=>{const S=()=>{if(this.currentScrollToIndex!==s)return;const T=this.getScrollOffset(),E=this.getOffsetForIndex(s,b);if(!E){console.warn("Failed to get offset for index:",s);return}MC(E[0],T)||g(b)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(S):S()})},g=p=>{this.targetWindow&&this.currentScrollToIndex===s&&(c++,c<u?this.targetWindow.requestAnimationFrame(()=>d(p)):console.warn(`Failed to scroll to index ${s} after ${u} attempts.`))};d(i)},this.scrollBy=(s,{behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+s,{adjustments:void 0,behavior:i})},this.getTotalSize=()=>{var s;const i=this.getMeasurements();let r;if(i.length===0)r=this.options.paddingStart;else if(this.options.lanes===1)r=((s=i[i.length-1])==null?void 0:s.end)??0;else{const c=Array(this.options.lanes).fill(null);let u=i.length-1;for(;u>=0&&c.some(d=>d===null);){const d=i[u];c[d.lane]===null&&(c[d.lane]=d.end),u--}r=Math.max(...c.filter(d=>d!==null))}return Math.max(r-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(s,{adjustments:i,behavior:r})=>{this.options.scrollToFn(s,{behavior:r,adjustments:i},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(n)}}const nx=(e,n,s,i)=>{for(;e<=n;){const r=(e+n)/2|0,c=s(r);if(c<i)e=r+1;else if(c>i)n=r-1;else return r}return e>0?e-1:0};function zC({measurements:e,outerSize:n,scrollOffset:s,lanes:i}){const r=e.length-1,c=g=>e[g].start;if(e.length<=i)return{startIndex:0,endIndex:r};let u=nx(0,r,c,s),d=u;if(i===1)for(;d<r&&e[d].end<s+n;)d++;else if(i>1){const g=Array(i).fill(0);for(;d<r&&g.some(y=>y<s+n);){const y=e[d];g[y.lane]=y.end,d++}const p=Array(i).fill(s+n);for(;u>=0&&p.some(y=>y>=s);){const y=e[u];p[y.lane]=y.start,u--}u=Math.max(0,u-u%i),d=Math.min(r,d+(i-1-d%i))}return{startIndex:u,endIndex:d}}const Fy=typeof document<"u"?w.useLayoutEffect:w.useEffect;function PC({useFlushSync:e=!0,...n}){const s=w.useReducer(()=>({}),{})[1],i={...n,onChange:(c,u)=>{var d;e&&u?Pa.flushSync(s):s(),(d=n.onChange)==null||d.call(n,c,u)}},[r]=w.useState(()=>new OC(i));return r.setOptions(i),Fy(()=>r._didMount(),[]),Fy(()=>r._willUpdate()),r}function IC(e){return PC({observeElementRect:DC,observeElementOffset:RC,scrollToFn:AC,...e})}const BC={relevance:"Relevance",level:"Combat Level",baseDps:"Base DPS",slots:"Powder Slots",hp:"Health",hpBonus:"Health Bonus",hprRaw:"Raw Health Regen",hprPct:"Health Regen %",mr:"Mana Regen",ms:"Mana Steal",ls:"Life Steal",sdPct:"Spell Damage %",sdRaw:"Spell Damage Raw",mdPct:"Melee Damage %",mdRaw:"Melee Damage Raw",poison:"Poison",spd:"Walk Speed Bonus",atkTier:"Attack Speed Bonus",averageDps:"Average DPS",str:"Strength",dex:"Dexterity",int:"Intelligence",def:"Defense",agi:"Agility",strReq:"Strength Min",dexReq:"Dexterity Min",intReq:"Intelligence Min",defReq:"Defense Min",agiReq:"Agility Min",eDef:"Earth Defense",tDef:"Thunder Defense",wDef:"Water Defense",fDef:"Fire Defense",aDef:"Air Defense",eDamPct:"Earth Damage %",tDamPct:"Thunder Damage %",wDamPct:"Water Damage %",fDamPct:"Fire Damage %",aDamPct:"Air Damage %",damPct:"Damage %",rDamPct:"Elemental Damage %",nDamPct:"Neutral Damage %",lvl:"Combat Level",reqTotal:"Req Total",skillPointTotal:"Skill Point Total",offenseScore:"Offense Score",ehpProxy:"EHP Proxy",utilityScore:"Utility Score",spPct1:"1st Spell Cost %",spRaw1:"1st Spell Cost Raw",spPct2:"2nd Spell Cost %",spRaw2:"2nd Spell Cost Raw",spPct3:"3rd Spell Cost %",spRaw3:"3rd Spell Cost Raw",spPct4:"4th Spell Cost %",spRaw4:"4th Spell Cost Raw",sumSpPct:"Sum Spell Cost %",sumSpRaw:"Sum Spell Cost Raw"};function Ut(e){return BC[e]??e}function gs(e,n,{checkForDefaultPrevented:s=!0}={}){return function(r){if(e?.(r),s===!1||!r.defaultPrevented)return n?.(r)}}function Yy(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function ax(...e){return n=>{let s=!1;const i=e.map(r=>{const c=Yy(r,n);return!s&&typeof c=="function"&&(s=!0),c});if(s)return()=>{for(let r=0;r<i.length;r++){const c=i[r];typeof c=="function"?c():Yy(e[r],null)}}}}function Ys(...e){return w.useCallback(ax(...e),e)}function LC(e,n){const s=w.createContext(n),i=c=>{const{children:u,...d}=c,g=w.useMemo(()=>d,Object.values(d));return m.jsx(s.Provider,{value:g,children:u})};i.displayName=e+"Provider";function r(c){const u=w.useContext(s);if(u)return u;if(n!==void 0)return n;throw new Error(`\`${c}\` must be used within \`${e}\``)}return[i,r]}function qC(e,n=[]){let s=[];function i(c,u){const d=w.createContext(u),g=s.length;s=[...s,u];const p=v=>{const{scope:b,children:S,...T}=v,E=b?.[e]?.[g]||d,C=w.useMemo(()=>T,Object.values(T));return m.jsx(E.Provider,{value:C,children:S})};p.displayName=c+"Provider";function y(v,b){const S=b?.[e]?.[g]||d,T=w.useContext(S);if(T)return T;if(u!==void 0)return u;throw new Error(`\`${v}\` must be used within \`${c}\``)}return[p,y]}const r=()=>{const c=s.map(u=>w.createContext(u));return function(d){const g=d?.[e]||c;return w.useMemo(()=>({[`__scope${e}`]:{...d,[e]:g}}),[d,g])}};return r.scopeName=e,[i,UC(r,...n)]}function UC(...e){const n=e[0];if(e.length===1)return n;const s=()=>{const i=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(c){const u=i.reduce((d,{useScope:g,scopeName:p})=>{const v=g(c)[`__scope${p}`];return{...d,...v}},{});return w.useMemo(()=>({[`__scope${n.scopeName}`]:u}),[u])}};return s.scopeName=n.scopeName,s}var or=globalThis?.document?w.useLayoutEffect:()=>{},$C=B0[" useId ".trim().toString()]||(()=>{}),HC=0;function yf(e){const[n,s]=w.useState($C());return or(()=>{s(i=>i??String(HC++))},[e]),e||(n?`radix-${n}`:"")}var ZC=B0[" useInsertionEffect ".trim().toString()]||or;function FC({prop:e,defaultProp:n,onChange:s=()=>{},caller:i}){const[r,c,u]=YC({defaultProp:n,onChange:s}),d=e!==void 0,g=d?e:r;{const y=w.useRef(e!==void 0);w.useEffect(()=>{const v=y.current;v!==d&&console.warn(`${i} is changing from ${v?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),y.current=d},[d,i])}const p=w.useCallback(y=>{if(d){const v=GC(y)?y(e):y;v!==e&&u.current?.(v)}else c(y)},[d,e,c,u]);return[g,p]}function YC({defaultProp:e,onChange:n}){const[s,i]=w.useState(e),r=w.useRef(s),c=w.useRef(n);return ZC(()=>{c.current=n},[n]),w.useEffect(()=>{r.current!==s&&(c.current?.(s),r.current=s)},[s,r]),[s,i,c]}function GC(e){return typeof e=="function"}function sx(e){const n=VC(e),s=w.forwardRef((i,r)=>{const{children:c,...u}=i,d=w.Children.toArray(c),g=d.find(WC);if(g){const p=g.props.children,y=d.map(v=>v===g?w.Children.count(p)>1?w.Children.only(null):w.isValidElement(p)?p.props.children:null:v);return m.jsx(n,{...u,ref:r,children:w.isValidElement(p)?w.cloneElement(p,void 0,y):null})}return m.jsx(n,{...u,ref:r,children:c})});return s.displayName=`${e}.Slot`,s}function VC(e){const n=w.forwardRef((s,i)=>{const{children:r,...c}=s;if(w.isValidElement(r)){const u=QC(r),d=XC(c,r.props);return r.type!==w.Fragment&&(d.ref=i?ax(i,u):u),w.cloneElement(r,d)}return w.Children.count(r)>1?w.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var KC=Symbol("radix.slottable");function WC(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===KC}function XC(e,n){const s={...n};for(const i in n){const r=e[i],c=n[i];/^on[A-Z]/.test(i)?r&&c?s[i]=(...d)=>{const g=c(...d);return r(...d),g}:r&&(s[i]=r):i==="style"?s[i]={...r,...c}:i==="className"&&(s[i]=[r,c].filter(Boolean).join(" "))}return{...e,...s}}function QC(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var JC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],La=JC.reduce((e,n)=>{const s=sx(`Primitive.${n}`),i=w.forwardRef((r,c)=>{const{asChild:u,...d}=r,g=u?s:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(g,{...d,ref:c})});return i.displayName=`Primitive.${n}`,{...e,[n]:i}},{});function eD(e,n){e&&Pa.flushSync(()=>e.dispatchEvent(n))}function cr(e){const n=w.useRef(e);return w.useEffect(()=>{n.current=e}),w.useMemo(()=>(...s)=>n.current?.(...s),[])}function tD(e,n=globalThis?.document){const s=cr(e);w.useEffect(()=>{const i=r=>{r.key==="Escape"&&s(r)};return n.addEventListener("keydown",i,{capture:!0}),()=>n.removeEventListener("keydown",i,{capture:!0})},[s,n])}var nD="DismissableLayer",Vf="dismissableLayer.update",aD="dismissableLayer.pointerDownOutside",sD="dismissableLayer.focusOutside",Gy,ix=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),lx=w.forwardRef((e,n)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:c,onInteractOutside:u,onDismiss:d,...g}=e,p=w.useContext(ix),[y,v]=w.useState(null),b=y?.ownerDocument??globalThis?.document,[,S]=w.useState({}),T=Ys(n,j=>v(j)),E=Array.from(p.layers),[C]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),O=E.indexOf(C),R=y?E.indexOf(y):-1,I=p.layersWithOutsidePointerEventsDisabled.size>0,B=R>=O,q=rD(j=>{const D=j.target,K=[...p.branches].some(re=>re.contains(D));!B||K||(r?.(j),u?.(j),j.defaultPrevented||d?.())},b),N=oD(j=>{const D=j.target;[...p.branches].some(re=>re.contains(D))||(c?.(j),u?.(j),j.defaultPrevented||d?.())},b);return tD(j=>{R===p.layers.size-1&&(i?.(j),!j.defaultPrevented&&d&&(j.preventDefault(),d()))},b),w.useEffect(()=>{if(y)return s&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(Gy=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(y)),p.layers.add(y),Vy(),()=>{s&&p.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=Gy)}},[y,b,s,p]),w.useEffect(()=>()=>{y&&(p.layers.delete(y),p.layersWithOutsidePointerEventsDisabled.delete(y),Vy())},[y,p]),w.useEffect(()=>{const j=()=>S({});return document.addEventListener(Vf,j),()=>document.removeEventListener(Vf,j)},[]),m.jsx(La.div,{...g,ref:T,style:{pointerEvents:I?B?"auto":"none":void 0,...e.style},onFocusCapture:gs(e.onFocusCapture,N.onFocusCapture),onBlurCapture:gs(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:gs(e.onPointerDownCapture,q.onPointerDownCapture)})});lx.displayName=nD;var iD="DismissableLayerBranch",lD=w.forwardRef((e,n)=>{const s=w.useContext(ix),i=w.useRef(null),r=Ys(n,i);return w.useEffect(()=>{const c=i.current;if(c)return s.branches.add(c),()=>{s.branches.delete(c)}},[s.branches]),m.jsx(La.div,{...e,ref:r})});lD.displayName=iD;function rD(e,n=globalThis?.document){const s=cr(e),i=w.useRef(!1),r=w.useRef(()=>{});return w.useEffect(()=>{const c=d=>{if(d.target&&!i.current){let g=function(){rx(aD,s,p,{discrete:!0})};const p={originalEvent:d};d.pointerType==="touch"?(n.removeEventListener("click",r.current),r.current=g,n.addEventListener("click",r.current,{once:!0})):g()}else n.removeEventListener("click",r.current);i.current=!1},u=window.setTimeout(()=>{n.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(u),n.removeEventListener("pointerdown",c),n.removeEventListener("click",r.current)}},[n,s]),{onPointerDownCapture:()=>i.current=!0}}function oD(e,n=globalThis?.document){const s=cr(e),i=w.useRef(!1);return w.useEffect(()=>{const r=c=>{c.target&&!i.current&&rx(sD,s,{originalEvent:c},{discrete:!1})};return n.addEventListener("focusin",r),()=>n.removeEventListener("focusin",r)},[n,s]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function Vy(){const e=new CustomEvent(Vf);document.dispatchEvent(e)}function rx(e,n,s,{discrete:i}){const r=s.originalEvent.target,c=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});n&&r.addEventListener(e,n,{once:!0}),i?eD(r,c):r.dispatchEvent(c)}var bf="focusScope.autoFocusOnMount",xf="focusScope.autoFocusOnUnmount",Ky={bubbles:!1,cancelable:!0},cD="FocusScope",ox=w.forwardRef((e,n)=>{const{loop:s=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:c,...u}=e,[d,g]=w.useState(null),p=cr(r),y=cr(c),v=w.useRef(null),b=Ys(n,E=>g(E)),S=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(i){let E=function(I){if(S.paused||!d)return;const B=I.target;d.contains(B)?v.current=B:us(v.current,{select:!0})},C=function(I){if(S.paused||!d)return;const B=I.relatedTarget;B!==null&&(d.contains(B)||us(v.current,{select:!0}))},O=function(I){if(document.activeElement===document.body)for(const q of I)q.removedNodes.length>0&&us(d)};document.addEventListener("focusin",E),document.addEventListener("focusout",C);const R=new MutationObserver(O);return d&&R.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",E),document.removeEventListener("focusout",C),R.disconnect()}}},[i,d,S.paused]),w.useEffect(()=>{if(d){Xy.add(S);const E=document.activeElement;if(!d.contains(E)){const O=new CustomEvent(bf,Ky);d.addEventListener(bf,p),d.dispatchEvent(O),O.defaultPrevented||(uD(gD(cx(d)),{select:!0}),document.activeElement===E&&us(d))}return()=>{d.removeEventListener(bf,p),setTimeout(()=>{const O=new CustomEvent(xf,Ky);d.addEventListener(xf,y),d.dispatchEvent(O),O.defaultPrevented||us(E??document.body,{select:!0}),d.removeEventListener(xf,y),Xy.remove(S)},0)}}},[d,p,y,S]);const T=w.useCallback(E=>{if(!s&&!i||S.paused)return;const C=E.key==="Tab"&&!E.altKey&&!E.ctrlKey&&!E.metaKey,O=document.activeElement;if(C&&O){const R=E.currentTarget,[I,B]=dD(R);I&&B?!E.shiftKey&&O===B?(E.preventDefault(),s&&us(I,{select:!0})):E.shiftKey&&O===I&&(E.preventDefault(),s&&us(B,{select:!0})):O===R&&E.preventDefault()}},[s,i,S.paused]);return m.jsx(La.div,{tabIndex:-1,...u,ref:b,onKeyDown:T})});ox.displayName=cD;function uD(e,{select:n=!1}={}){const s=document.activeElement;for(const i of e)if(us(i,{select:n}),document.activeElement!==s)return}function dD(e){const n=cx(e),s=Wy(n,e),i=Wy(n.reverse(),e);return[s,i]}function cx(e){const n=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)n.push(s.currentNode);return n}function Wy(e,n){for(const s of e)if(!fD(s,{upTo:n}))return s}function fD(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function hD(e){return e instanceof HTMLInputElement&&"select"in e}function us(e,{select:n=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&hD(e)&&n&&e.select()}}var Xy=mD();function mD(){let e=[];return{add(n){const s=e[0];n!==s&&s?.pause(),e=Qy(e,n),e.unshift(n)},remove(n){e=Qy(e,n),e[0]?.resume()}}}function Qy(e,n){const s=[...e],i=s.indexOf(n);return i!==-1&&s.splice(i,1),s}function gD(e){return e.filter(n=>n.tagName!=="A")}var pD="Portal",ux=w.forwardRef((e,n)=>{const{container:s,...i}=e,[r,c]=w.useState(!1);or(()=>c(!0),[]);const u=s||r&&globalThis?.document?.body;return u?Xw.createPortal(m.jsx(La.div,{...i,ref:n}),u):null});ux.displayName=pD;function vD(e,n){return w.useReducer((s,i)=>n[s][i]??s,e)}var kc=e=>{const{present:n,children:s}=e,i=yD(n),r=typeof s=="function"?s({present:i.isPresent}):w.Children.only(s),c=Ys(i.ref,bD(r));return typeof s=="function"||i.isPresent?w.cloneElement(r,{ref:c}):null};kc.displayName="Presence";function yD(e){const[n,s]=w.useState(),i=w.useRef(null),r=w.useRef(e),c=w.useRef("none"),u=e?"mounted":"unmounted",[d,g]=vD(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const p=Lo(i.current);c.current=d==="mounted"?p:"none"},[d]),or(()=>{const p=i.current,y=r.current;if(y!==e){const b=c.current,S=Lo(p);e?g("MOUNT"):S==="none"||p?.display==="none"?g("UNMOUNT"):g(y&&b!==S?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,g]),or(()=>{if(n){let p;const y=n.ownerDocument.defaultView??window,v=S=>{const E=Lo(i.current).includes(CSS.escape(S.animationName));if(S.target===n&&E&&(g("ANIMATION_END"),!r.current)){const C=n.style.animationFillMode;n.style.animationFillMode="forwards",p=y.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=C)})}},b=S=>{S.target===n&&(c.current=Lo(i.current))};return n.addEventListener("animationstart",b),n.addEventListener("animationcancel",v),n.addEventListener("animationend",v),()=>{y.clearTimeout(p),n.removeEventListener("animationstart",b),n.removeEventListener("animationcancel",v),n.removeEventListener("animationend",v)}}else g("ANIMATION_END")},[n,g]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:w.useCallback(p=>{i.current=p?getComputedStyle(p):null,s(p)},[])}}function Lo(e){return e?.animationName||"none"}function bD(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var Sf=0;function xD(){w.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Jy()),document.body.insertAdjacentElement("beforeend",e[1]??Jy()),Sf++,()=>{Sf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),Sf--}},[])}function Jy(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var da=function(){return da=Object.assign||function(n){for(var s,i=1,r=arguments.length;i<r;i++){s=arguments[i];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(n[c]=s[c])}return n},da.apply(this,arguments)};function dx(e,n){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(s[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(s[i[r]]=e[i[r]]);return s}function SD(e,n,s){if(s||arguments.length===2)for(var i=0,r=n.length,c;i<r;i++)(c||!(i in n))&&(c||(c=Array.prototype.slice.call(n,0,i)),c[i]=n[i]);return e.concat(c||Array.prototype.slice.call(n))}var Qo="right-scroll-bar-position",Jo="width-before-scroll-bar",wD="with-scroll-bars-hidden",_D="--removed-body-scroll-bar-size";function wf(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function ED(e,n){var s=w.useState(function(){return{value:e,callback:n,facade:{get current(){return s.value},set current(i){var r=s.value;r!==i&&(s.value=i,s.callback(i,r))}}}})[0];return s.callback=n,s.facade}var TD=typeof window<"u"?w.useLayoutEffect:w.useEffect,e0=new WeakMap;function MD(e,n){var s=ED(null,function(i){return e.forEach(function(r){return wf(r,i)})});return TD(function(){var i=e0.get(s);if(i){var r=new Set(i),c=new Set(e),u=s.current;r.forEach(function(d){c.has(d)||wf(d,null)}),c.forEach(function(d){r.has(d)||wf(d,u)})}e0.set(s,e)},[e]),s}function ND(e){return e}function jD(e,n){n===void 0&&(n=ND);var s=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(c){var u=n(c,i);return s.push(u),function(){s=s.filter(function(d){return d!==u})}},assignSyncMedium:function(c){for(i=!0;s.length;){var u=s;s=[],u.forEach(c)}s={push:function(d){return c(d)},filter:function(){return s}}},assignMedium:function(c){i=!0;var u=[];if(s.length){var d=s;s=[],d.forEach(c),u=s}var g=function(){var y=u;u=[],y.forEach(c)},p=function(){return Promise.resolve().then(g)};p(),s={push:function(y){u.push(y),p()},filter:function(y){return u=u.filter(y),s}}}};return r}function CD(e){e===void 0&&(e={});var n=jD(null);return n.options=da({async:!0,ssr:!1},e),n}var fx=function(e){var n=e.sideCar,s=dx(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=n.read();if(!i)throw new Error("Sidecar medium not found");return w.createElement(i,da({},s))};fx.isSideCarExport=!0;function DD(e,n){return e.useMedium(n),fx}var hx=CD(),_f=function(){},Ac=w.forwardRef(function(e,n){var s=w.useRef(null),i=w.useState({onScrollCapture:_f,onWheelCapture:_f,onTouchMoveCapture:_f}),r=i[0],c=i[1],u=e.forwardProps,d=e.children,g=e.className,p=e.removeScrollBar,y=e.enabled,v=e.shards,b=e.sideCar,S=e.noRelative,T=e.noIsolation,E=e.inert,C=e.allowPinchZoom,O=e.as,R=O===void 0?"div":O,I=e.gapMode,B=dx(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),q=b,N=MD([s,n]),j=da(da({},B),r);return w.createElement(w.Fragment,null,y&&w.createElement(q,{sideCar:hx,removeScrollBar:p,shards:v,noRelative:S,noIsolation:T,inert:E,setCallbacks:c,allowPinchZoom:!!C,lockRef:s,gapMode:I}),u?w.cloneElement(w.Children.only(d),da(da({},j),{ref:N})):w.createElement(R,da({},j,{className:g,ref:N}),d))});Ac.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ac.classNames={fullWidth:Jo,zeroRight:Qo};var RD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function kD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=RD();return n&&e.setAttribute("nonce",n),e}function AD(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function OD(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var zD=function(){var e=0,n=null;return{add:function(s){e==0&&(n=kD())&&(AD(n,s),OD(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},PD=function(){var e=zD();return function(n,s){w.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&s])}},mx=function(){var e=PD(),n=function(s){var i=s.styles,r=s.dynamic;return e(i,r),null};return n},ID={left:0,top:0,right:0,gap:0},Ef=function(e){return parseInt(e||"",10)||0},BD=function(e){var n=window.getComputedStyle(document.body),s=n[e==="padding"?"paddingLeft":"marginLeft"],i=n[e==="padding"?"paddingTop":"marginTop"],r=n[e==="padding"?"paddingRight":"marginRight"];return[Ef(s),Ef(i),Ef(r)]},LD=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return ID;var n=BD(e),s=document.documentElement.clientWidth,i=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,i-s+n[2]-n[0])}},qD=mx(),Yi="data-scroll-locked",UD=function(e,n,s,i){var r=e.left,c=e.top,u=e.right,d=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(wD,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(d,"px ").concat(i,`;
  }
  body[`).concat(Yi,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(i,";"),s==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(i,`;
    `),s==="padding"&&"padding-right: ".concat(d,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qo,` {
    right: `).concat(d,"px ").concat(i,`;
  }
  
  .`).concat(Jo,` {
    margin-right: `).concat(d,"px ").concat(i,`;
  }
  
  .`).concat(Qo," .").concat(Qo,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Jo," .").concat(Jo,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Yi,`] {
    `).concat(_D,": ").concat(d,`px;
  }
`)},t0=function(){var e=parseInt(document.body.getAttribute(Yi)||"0",10);return isFinite(e)?e:0},$D=function(){w.useEffect(function(){return document.body.setAttribute(Yi,(t0()+1).toString()),function(){var e=t0()-1;e<=0?document.body.removeAttribute(Yi):document.body.setAttribute(Yi,e.toString())}},[])},HD=function(e){var n=e.noRelative,s=e.noImportant,i=e.gapMode,r=i===void 0?"margin":i;$D();var c=w.useMemo(function(){return LD(r)},[r]);return w.createElement(qD,{styles:UD(c,!n,r,s?"":"!important")})},Kf=!1;if(typeof window<"u")try{var qo=Object.defineProperty({},"passive",{get:function(){return Kf=!0,!0}});window.addEventListener("test",qo,qo),window.removeEventListener("test",qo,qo)}catch{Kf=!1}var zi=Kf?{passive:!1}:!1,ZD=function(e){return e.tagName==="TEXTAREA"},gx=function(e,n){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[n]!=="hidden"&&!(s.overflowY===s.overflowX&&!ZD(e)&&s[n]==="visible")},FD=function(e){return gx(e,"overflowY")},YD=function(e){return gx(e,"overflowX")},n0=function(e,n){var s=n.ownerDocument,i=n;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=px(e,i);if(r){var c=vx(e,i),u=c[1],d=c[2];if(u>d)return!0}i=i.parentNode}while(i&&i!==s.body);return!1},GD=function(e){var n=e.scrollTop,s=e.scrollHeight,i=e.clientHeight;return[n,s,i]},VD=function(e){var n=e.scrollLeft,s=e.scrollWidth,i=e.clientWidth;return[n,s,i]},px=function(e,n){return e==="v"?FD(n):YD(n)},vx=function(e,n){return e==="v"?GD(n):VD(n)},KD=function(e,n){return e==="h"&&n==="rtl"?-1:1},WD=function(e,n,s,i,r){var c=KD(e,window.getComputedStyle(n).direction),u=c*i,d=s.target,g=n.contains(d),p=!1,y=u>0,v=0,b=0;do{if(!d)break;var S=vx(e,d),T=S[0],E=S[1],C=S[2],O=E-C-c*T;(T||O)&&px(e,d)&&(v+=O,b+=T);var R=d.parentNode;d=R&&R.nodeType===Node.DOCUMENT_FRAGMENT_NODE?R.host:R}while(!g&&d!==document.body||g&&(n.contains(d)||n===d));return(y&&Math.abs(v)<1||!y&&Math.abs(b)<1)&&(p=!0),p},Uo=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},a0=function(e){return[e.deltaX,e.deltaY]},s0=function(e){return e&&"current"in e?e.current:e},XD=function(e,n){return e[0]===n[0]&&e[1]===n[1]},QD=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},JD=0,Pi=[];function eR(e){var n=w.useRef([]),s=w.useRef([0,0]),i=w.useRef(),r=w.useState(JD++)[0],c=w.useState(mx)[0],u=w.useRef(e);w.useEffect(function(){u.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var E=SD([e.lockRef.current],(e.shards||[]).map(s0),!0).filter(Boolean);return E.forEach(function(C){return C.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),E.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var d=w.useCallback(function(E,C){if("touches"in E&&E.touches.length===2||E.type==="wheel"&&E.ctrlKey)return!u.current.allowPinchZoom;var O=Uo(E),R=s.current,I="deltaX"in E?E.deltaX:R[0]-O[0],B="deltaY"in E?E.deltaY:R[1]-O[1],q,N=E.target,j=Math.abs(I)>Math.abs(B)?"h":"v";if("touches"in E&&j==="h"&&N.type==="range")return!1;var D=window.getSelection(),K=D&&D.anchorNode,re=K?K===N||K.contains(N):!1;if(re)return!1;var he=n0(j,N);if(!he)return!0;if(he?q=j:(q=j==="v"?"h":"v",he=n0(j,N)),!he)return!1;if(!i.current&&"changedTouches"in E&&(I||B)&&(i.current=q),!q)return!0;var se=i.current||q;return WD(se,C,E,se==="h"?I:B)},[]),g=w.useCallback(function(E){var C=E;if(!(!Pi.length||Pi[Pi.length-1]!==c)){var O="deltaY"in C?a0(C):Uo(C),R=n.current.filter(function(q){return q.name===C.type&&(q.target===C.target||C.target===q.shadowParent)&&XD(q.delta,O)})[0];if(R&&R.should){C.cancelable&&C.preventDefault();return}if(!R){var I=(u.current.shards||[]).map(s0).filter(Boolean).filter(function(q){return q.contains(C.target)}),B=I.length>0?d(C,I[0]):!u.current.noIsolation;B&&C.cancelable&&C.preventDefault()}}},[]),p=w.useCallback(function(E,C,O,R){var I={name:E,delta:C,target:O,should:R,shadowParent:tR(O)};n.current.push(I),setTimeout(function(){n.current=n.current.filter(function(B){return B!==I})},1)},[]),y=w.useCallback(function(E){s.current=Uo(E),i.current=void 0},[]),v=w.useCallback(function(E){p(E.type,a0(E),E.target,d(E,e.lockRef.current))},[]),b=w.useCallback(function(E){p(E.type,Uo(E),E.target,d(E,e.lockRef.current))},[]);w.useEffect(function(){return Pi.push(c),e.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:b}),document.addEventListener("wheel",g,zi),document.addEventListener("touchmove",g,zi),document.addEventListener("touchstart",y,zi),function(){Pi=Pi.filter(function(E){return E!==c}),document.removeEventListener("wheel",g,zi),document.removeEventListener("touchmove",g,zi),document.removeEventListener("touchstart",y,zi)}},[]);var S=e.removeScrollBar,T=e.inert;return w.createElement(w.Fragment,null,T?w.createElement(c,{styles:QD(r)}):null,S?w.createElement(HD,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function tR(e){for(var n=null;e!==null;)e instanceof ShadowRoot&&(n=e.host,e=e.host),e=e.parentNode;return n}const nR=DD(hx,eR);var yx=w.forwardRef(function(e,n){return w.createElement(Ac,da({},e,{ref:n,sideCar:nR}))});yx.classNames=Ac.classNames;var aR=function(e){if(typeof document>"u")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},Ii=new WeakMap,$o=new WeakMap,Ho={},Tf=0,bx=function(e){return e&&(e.host||bx(e.parentNode))},sR=function(e,n){return n.map(function(s){if(e.contains(s))return s;var i=bx(s);return i&&e.contains(i)?i:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},iR=function(e,n,s,i){var r=sR(n,Array.isArray(e)?e:[e]);Ho[s]||(Ho[s]=new WeakMap);var c=Ho[s],u=[],d=new Set,g=new Set(r),p=function(v){!v||d.has(v)||(d.add(v),p(v.parentNode))};r.forEach(p);var y=function(v){!v||g.has(v)||Array.prototype.forEach.call(v.children,function(b){if(d.has(b))y(b);else try{var S=b.getAttribute(i),T=S!==null&&S!=="false",E=(Ii.get(b)||0)+1,C=(c.get(b)||0)+1;Ii.set(b,E),c.set(b,C),u.push(b),E===1&&T&&$o.set(b,!0),C===1&&b.setAttribute(s,"true"),T||b.setAttribute(i,"true")}catch(O){console.error("aria-hidden: cannot operate on ",b,O)}})};return y(n),d.clear(),Tf++,function(){u.forEach(function(v){var b=Ii.get(v)-1,S=c.get(v)-1;Ii.set(v,b),c.set(v,S),b||($o.has(v)||v.removeAttribute(i),$o.delete(v)),S||v.removeAttribute(s)}),Tf--,Tf||(Ii=new WeakMap,Ii=new WeakMap,$o=new WeakMap,Ho={})}},lR=function(e,n,s){s===void 0&&(s="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),r=aR(e);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),iR(i,r,s,"aria-hidden")):function(){return null}},Oc="Dialog",[xx]=qC(Oc),[rR,ia]=xx(Oc),Sx=e=>{const{__scopeDialog:n,children:s,open:i,defaultOpen:r,onOpenChange:c,modal:u=!0}=e,d=w.useRef(null),g=w.useRef(null),[p,y]=FC({prop:i,defaultProp:r??!1,onChange:c,caller:Oc});return m.jsx(rR,{scope:n,triggerRef:d,contentRef:g,contentId:yf(),titleId:yf(),descriptionId:yf(),open:p,onOpenChange:y,onOpenToggle:w.useCallback(()=>y(v=>!v),[y]),modal:u,children:s})};Sx.displayName=Oc;var wx="DialogTrigger",oR=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=ia(wx,s),c=Ys(n,r.triggerRef);return m.jsx(La.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":Oh(r.open),...i,ref:c,onClick:gs(e.onClick,r.onOpenToggle)})});oR.displayName=wx;var kh="DialogPortal",[cR,_x]=xx(kh,{forceMount:void 0}),Ex=e=>{const{__scopeDialog:n,forceMount:s,children:i,container:r}=e,c=ia(kh,n);return m.jsx(cR,{scope:n,forceMount:s,children:w.Children.map(i,u=>m.jsx(kc,{present:s||c.open,children:m.jsx(ux,{asChild:!0,container:r,children:u})}))})};Ex.displayName=kh;var gc="DialogOverlay",Tx=w.forwardRef((e,n)=>{const s=_x(gc,e.__scopeDialog),{forceMount:i=s.forceMount,...r}=e,c=ia(gc,e.__scopeDialog);return c.modal?m.jsx(kc,{present:i||c.open,children:m.jsx(dR,{...r,ref:n})}):null});Tx.displayName=gc;var uR=sx("DialogOverlay.RemoveScroll"),dR=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=ia(gc,s);return m.jsx(yx,{as:uR,allowPinchZoom:!0,shards:[r.contentRef],children:m.jsx(La.div,{"data-state":Oh(r.open),...i,ref:n,style:{pointerEvents:"auto",...i.style}})})}),$s="DialogContent",Mx=w.forwardRef((e,n)=>{const s=_x($s,e.__scopeDialog),{forceMount:i=s.forceMount,...r}=e,c=ia($s,e.__scopeDialog);return m.jsx(kc,{present:i||c.open,children:c.modal?m.jsx(fR,{...r,ref:n}):m.jsx(hR,{...r,ref:n})})});Mx.displayName=$s;var fR=w.forwardRef((e,n)=>{const s=ia($s,e.__scopeDialog),i=w.useRef(null),r=Ys(n,s.contentRef,i);return w.useEffect(()=>{const c=i.current;if(c)return lR(c)},[]),m.jsx(Nx,{...e,ref:r,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:gs(e.onCloseAutoFocus,c=>{c.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:gs(e.onPointerDownOutside,c=>{const u=c.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0;(u.button===2||d)&&c.preventDefault()}),onFocusOutside:gs(e.onFocusOutside,c=>c.preventDefault())})}),hR=w.forwardRef((e,n)=>{const s=ia($s,e.__scopeDialog),i=w.useRef(!1),r=w.useRef(!1);return m.jsx(Nx,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{e.onCloseAutoFocus?.(c),c.defaultPrevented||(i.current||s.triggerRef.current?.focus(),c.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:c=>{e.onInteractOutside?.(c),c.defaultPrevented||(i.current=!0,c.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const u=c.target;s.triggerRef.current?.contains(u)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&r.current&&c.preventDefault()}})}),Nx=w.forwardRef((e,n)=>{const{__scopeDialog:s,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:c,...u}=e,d=ia($s,s),g=w.useRef(null),p=Ys(n,g);return xD(),m.jsxs(m.Fragment,{children:[m.jsx(ox,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:c,children:m.jsx(lx,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":Oh(d.open),...u,ref:p,onDismiss:()=>d.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx(mR,{titleId:d.titleId}),m.jsx(pR,{contentRef:g,descriptionId:d.descriptionId})]})]})}),Ah="DialogTitle",jx=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=ia(Ah,s);return m.jsx(La.h2,{id:r.titleId,...i,ref:n})});jx.displayName=Ah;var Cx="DialogDescription",Dx=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=ia(Cx,s);return m.jsx(La.p,{id:r.descriptionId,...i,ref:n})});Dx.displayName=Cx;var Rx="DialogClose",kx=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=ia(Rx,s);return m.jsx(La.button,{type:"button",...i,ref:n,onClick:gs(e.onClick,()=>r.onOpenChange(!1))})});kx.displayName=Rx;function Oh(e){return e?"open":"closed"}var Ax="DialogTitleWarning",[YO,Ox]=LC(Ax,{contentName:$s,titleName:Ah,docsSlug:"dialog"}),mR=({titleId:e})=>{const n=Ox(Ax),s=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return w.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},gR="DialogDescriptionWarning",pR=({contentRef:e,descriptionId:n})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Ox(gR).contentName}}.`;return w.useEffect(()=>{const r=e.current?.getAttribute("aria-describedby");n&&r&&(document.getElementById(n)||console.warn(i))},[i,e,n]),null},vR=Sx,yR=Ex,bR=Tx,xR=Mx,SR=jx,wR=Dx,_R=kx;function zx(e){var n,s,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(n=0;n<r;n++)e[n]&&(s=zx(e[n]))&&(i&&(i+=" "),i+=s)}else for(s in e)e[s]&&(i&&(i+=" "),i+=s);return i}function ER(){for(var e,n,s=0,i="",r=arguments.length;s<r;s++)(e=arguments[s])&&(n=zx(e))&&(i&&(i+=" "),i+=n);return i}function gt(...e){return ER(e)}function Ne(e){return m.jsx("button",{type:e.type??"button",onClick:e.onClick,className:gt("wb-button",e.className,e.disabled&&"opacity-50 cursor-not-allowed"),"data-variant":e.variant==="default"?void 0:e.variant,title:e.title,disabled:e.disabled,children:e.children})}function Gi(e){return m.jsxs("section",{className:gt("wb-panel rounded-2xl",e.className),children:[(e.title||e.headerRight)&&m.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-[var(--wb-border-muted)] px-4 py-3",children:[m.jsx("div",{className:"text-sm font-semibold tracking-wide text-[var(--wb-text)]",children:e.title}),e.headerRight?m.jsx("div",{className:"flex items-center gap-2",children:e.headerRight}):null]}),m.jsx("div",{className:"min-h-0",children:e.children})]})}function Ie(e){return m.jsx("label",{className:gt("mb-1 block text-xs font-medium uppercase tracking-wide text-[var(--wb-muted)]",e.className),children:e.children})}function et(e){return m.jsx("button",{type:"button",className:gt("wb-chip",e.className,e.disabled&&"opacity-50 cursor-not-allowed"),"data-active":e.active?"true":"false",onClick:e.disabled?void 0:e.onClick,title:e.title,disabled:e.disabled,children:e.children})}function Zo(e){const n=e.delta,s=n==null?"":n>0?"wb-text-success":n<0?"wb-text-danger":"text-[var(--wb-muted)]";return m.jsxs("div",{className:gt("wb-card p-3",e.className),children:[m.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:e.label}),m.jsx("div",{className:gt("mt-1 text-lg font-semibold",e.valueClassName),children:e.value}),n!=null?m.jsxs("div",{className:gt("mt-1 text-xs",s),children:[n>0?"+":"",Math.round(n)]}):null]})}function Vi(e){return m.jsx("div",{className:gt("wb-scrollbar min-h-0 overflow-auto",e.className),children:e.children})}function zh(e){return m.jsx(vR,{open:e.open,onOpenChange:e.onOpenChange,children:m.jsxs(yR,{children:[m.jsx(bR,{className:"fixed inset-0 z-40 backdrop-blur-sm",style:{background:"var(--wb-overlay)"}}),m.jsxs(xR,{className:gt("wb-panel fixed left-1/2 top-1/2 z-50 w-[min(95vw,1100px)] -translate-x-1/2 -translate-y-1/2 rounded-2xl shadow-2xl",e.className),children:[m.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-[var(--wb-border-muted)] px-5 py-4",children:[m.jsxs("div",{children:[m.jsx(SR,{className:"text-base font-semibold",children:e.title}),e.description?m.jsx(wR,{className:"mt-1 text-sm text-[var(--wb-muted)]",children:e.description}):null]}),m.jsx(_R,{asChild:!0,children:m.jsx("button",{className:"wb-icon-button","aria-label":"Close",children:m.jsx(lT,{size:16})})})]}),m.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:e.children}),e.footer?m.jsx("div",{className:"border-t border-[var(--wb-border-muted)] px-5 py-4",children:e.footer}):null]})]})})}function za(e){return m.jsxs("div",{children:[m.jsx(Ie,{children:e.label}),m.jsx("input",{className:"wb-input",type:"number",value:e.value??"",min:e.min,max:e.max,step:e.step??1,placeholder:e.placeholder,onChange:n=>{const s=n.target.value.trim();e.onChange(s===""?null:Number(s))}})]})}const TR={bow:"0 0",spear:"9.090909090909088% 0",wand:"18.181818181818183% 0",dagger:"27.27272727272727% 0",relik:"36.36363636363637% 0",helmet:"45.45454545454546% 0",chestplate:"54.54545454545454% 0",leggings:"63.63636363636363% 0",boots:"72.72727272727272% 0",ring:"81.81818181818181% 0",bracelet:"90.90909090909092% 0",necklace:"100% 0"};function MR(e){return e.category==="weapon"?e.type:e.category}function NR(e){const n=MR(e.item),s=TR[n],i="./media/items/new.png";return s?m.jsx("div",{className:"wb-surface-strong relative h-9 w-9 shrink-0 overflow-hidden rounded-lg",title:`${e.item.type} icon`,children:m.jsx("div",{"aria-hidden":!0,className:"absolute inset-[3px] rounded-[6px]",style:{backgroundImage:`url(${i})`,backgroundPosition:s,backgroundSize:"1200% 100%",backgroundRepeat:"no-repeat",imageRendering:"pixelated"}})}):m.jsx("div",{className:"wb-surface-strong flex h-9 w-9 items-center justify-center rounded-lg text-xs text-[var(--wb-muted)]",children:"?"})}function jR(e){switch(e){case"Mythic":return"wb-tier-mythic";case"Fabled":return"wb-tier-fabled";case"Legendary":return"wb-tier-legendary";case"Rare":return"wb-tier-rare";case"Unique":return"wb-tier-unique";case"Set":return"wb-tier-set";default:return"wb-tier-normal"}}function Px(e){const n=[{label:"Strength",value:e.numeric.reqStr},{label:"Dexterity",value:e.numeric.reqDex},{label:"Intelligence",value:e.numeric.reqInt},{label:"Defense",value:e.numeric.reqDef},{label:"Agility",value:e.numeric.reqAgi}].filter(s=>s.value>0);return n.length===0?null:n.map(s=>`${s.label} ${s.value}`).join(", ")}function Ix(e){const n=[{label:"Strength",value:e.numeric.spStr},{label:"Dexterity",value:e.numeric.spDex},{label:"Intelligence",value:e.numeric.spInt},{label:"Defense",value:e.numeric.spDef},{label:"Agility",value:e.numeric.spAgi}].filter(s=>s.value!==0);return n.length===0?null:n.map(s=>`${s.label} ${s.value>0?"+":""}${s.value}`).join(", ")}function Bx(e){const n=e.legacyRaw,s=[["Neutral",typeof n.nDam=="string"?n.nDam:""],["Earth",typeof n.eDam=="string"?n.eDam:""],["Thunder",typeof n.tDam=="string"?n.tDam:""],["Water",typeof n.wDam=="string"?n.wDam:""],["Fire",typeof n.fDam=="string"?n.fDam:""],["Air",typeof n.aDam=="string"?n.aDam:""]].filter(([,i])=>i&&i!=="0-0");return s.length===0?null:s.map(([i,r])=>`${i}: ${r}`).join("  ")}const CR=new Set(["reqTotal","skillPointTotal","offenseScore","ehpProxy","utilityScore","sumSpPct","sumSpRaw","strReq","dexReq","intReq","defReq","agiReq","str","dex","int","def","agi"]);function Lx(e){const n=[];for(const[s,i]of Object.entries(e.numericIndex)){if(CR.has(s))continue;const r=typeof i=="number"?i:0;r!==0&&n.push({key:s,value:r})}return e.powderSlots>0&&!n.some(s=>s.key==="slots")&&n.push({key:"slots",value:e.powderSlots}),n.sort((s,i)=>Ut(s.key).localeCompare(Ut(i.key))),n}function qx(e,n){return Number.isInteger(n)?String(n):n.toFixed(1).replace(/\.0$/,"")}function Ux(e){return e>0?"positive":e<0?"negative":"neutral"}function DR(e){const{item:n}=e,s=Px(n),i=Ix(n),r=Bx(n),c=Lx(n),u=e.dense??!1;return m.jsxs("div",{className:gt("space-y-1.5",u?"text-[11px]":"text-xs"),children:[(s||i)&&m.jsxs("div",{className:"flex flex-wrap gap-1.5 text-[11px]",children:[s?m.jsxs("span",{className:"wb-pill","data-tone":"req",children:[m.jsx("span",{className:"font-semibold",children:"Req"}),m.jsx("span",{className:"ml-1",children:s})]}):null,i?m.jsxs("span",{className:"wb-pill","data-tone":"bonus",children:[m.jsx("span",{className:"font-semibold",children:"SP"}),m.jsx("span",{className:"ml-1",children:i})]}):null]}),c.length>0?m.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(({key:d,value:g})=>m.jsxs("span",{className:"wb-pill text-[11px]","data-tone":Ux(g),children:[m.jsx("span",{className:gt((g>0||g<0)&&"font-semibold"),children:qx(d,g)}),m.jsx("span",{className:"ml-1 opacity-90",children:Ut(d)})]},d))}):null,r?m.jsx("div",{className:"wb-surface-strong flex flex-wrap gap-1.5 rounded px-2 py-1.5 text-[11px] leading-relaxed text-[var(--wb-muted)]",children:r.split(/\s{2,}/).map((d,g)=>m.jsx("span",{className:"whitespace-nowrap",children:d},g))}):null,m.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[m.jsxs("div",{className:"wb-surface-strong rounded px-2 py-1",children:[Ut("baseDps")," ",Math.round(n.roughScoreFields.baseDps)]}),m.jsxs("div",{className:"wb-surface-strong rounded px-2 py-1",children:[Ut("ehpProxy")," ",Math.round(n.roughScoreFields.ehpProxy)]}),m.jsxs("div",{className:"wb-surface-strong rounded px-2 py-1",children:[Ut("offenseScore")," ",Math.round(n.roughScoreFields.offense)]}),m.jsxs("div",{className:"wb-surface-strong rounded px-2 py-1",children:[Ut("skillPointTotal")," ",Math.round(n.roughScoreFields.skillPointTotal)]})]}),n.majorIds.length>0?m.jsxs("div",{className:"break-words text-[var(--wb-muted)]",children:["Major IDs: ",n.majorIds.join(", ")]}):null]})}function zc(e){const n=sb({id:e.dragData?`drag:${e.dragData.kind}:${e.item.id}:${e.dragData.sourceSlot??e.dragData.sourceCategory??""}`:`item:${e.item.id}`,data:e.dragData?{dragItem:e.dragData}:void 0}),s=e.dragData?{transform:ac.Translate.toString(n.transform),opacity:n.isDragging?.45:1}:void 0,i=e.showDetails?Px(e.item):null,r=e.showDetails?Ix(e.item):null,c=e.showDetails?Bx(e.item):null,u=e.showDetails?Lx(e.item):[];return m.jsxs("div",{ref:e.dragData?n.setNodeRef:void 0,style:s,className:gt("wb-card",e.dense?"p-2":e.compact?"p-2.5":"p-3",n.isDragging&&"ring-2 ring-[var(--wb-success-border)]"),onMouseEnter:()=>e.onHover?.(!0),onMouseLeave:()=>e.onHover?.(!1),children:[m.jsxs("div",{className:gt("flex items-start gap-2",e.dense&&"gap-1.5"),children:[e.dragData?m.jsx("button",{type:"button",...n.listeners,...n.attributes,className:"wb-icon-button mt-0.5","aria-label":`Drag ${e.item.displayName}`,children:m.jsx(IE,{size:14})}):null,m.jsx(NR,{item:e.item}),m.jsxs("div",{className:"min-w-0 flex-1",children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[m.jsx("div",{className:gt("break-words text-sm font-semibold leading-tight",jR(e.item.tier)),children:e.item.displayName}),e.badge?m.jsx("span",{className:"wb-chip",children:e.badge}):null,e.locked?m.jsxs("span",{className:"wb-chip inline-flex items-center gap-1",children:[m.jsx(ob,{size:11})," Locked"]}):null]}),m.jsxs("div",{className:gt("mt-1 flex flex-wrap gap-y-1 text-[var(--wb-muted)]",e.dense?"gap-x-2 text-xs":"gap-x-3 text-xs"),children:[m.jsx("span",{children:e.item.type}),m.jsxs("span",{children:["Lv ",e.item.level]}),e.dense?null:m.jsx("span",{children:e.item.tier}),!e.dense&&e.item.classReq?m.jsx("span",{children:e.item.classReq}):null,!e.dense&&e.item.majorIds.length>0?m.jsxs("span",{children:["MID ",e.item.majorIds.length]}):null,e.dense&&e.item.majorIds.length>0?m.jsxs("span",{children:["M",e.item.majorIds.length]}):null]}),e.showDetails?m.jsxs("div",{className:gt("mt-2 space-y-1",e.dense?"text-[11px]":"text-xs"),children:[(i||r)&&m.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[i?m.jsxs("span",{className:"wb-pill","data-tone":"req",children:[m.jsx("span",{className:"font-semibold",children:"Req"}),m.jsx("span",{className:"ml-1",children:i})]}):null,r?m.jsxs("span",{className:"wb-pill","data-tone":"bonus",children:[m.jsx("span",{className:"font-semibold",children:"SP"}),m.jsx("span",{className:"ml-1",children:r})]}):null]}),u.length>0?m.jsx("div",{className:"flex flex-wrap gap-1",children:u.map(({key:d,value:g})=>m.jsxs("span",{className:"wb-pill text-[11px]","data-tone":Ux(g),children:[m.jsx("span",{className:gt((g>0||g<0)&&"font-semibold"),children:qx(d,g)}),m.jsx("span",{className:"ml-1 opacity-90",children:Ut(d)})]},d))}):null,c?m.jsx("div",{className:"wb-surface-strong flex flex-wrap gap-1.5 rounded px-2 py-1.5 text-[11px] leading-relaxed text-[var(--wb-muted)]",children:c.split(/\s{2,}/).map((d,g)=>m.jsx("span",{className:"whitespace-nowrap",children:d},g))}):null,e.item.majorIds.length>0?m.jsxs("div",{className:"break-words text-[var(--wb-muted)]",children:["Major IDs: ",e.item.majorIds.join(", ")]}):null]}):null,e.compact?null:m.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs",children:[m.jsxs("div",{className:"wb-surface-strong rounded-lg px-2 py-1",children:[Ut("baseDps")," ",Math.round(e.item.roughScoreFields.baseDps)]}),m.jsxs("div",{className:"wb-surface-strong rounded-lg px-2 py-1",children:[Ut("ehpProxy")," ",Math.round(e.item.roughScoreFields.ehpProxy)]}),m.jsxs("div",{className:"wb-surface-strong rounded-lg px-2 py-1",children:[Ut("offenseScore")," ",Math.round(e.item.roughScoreFields.offense)]}),m.jsxs("div",{className:"wb-surface-strong rounded-lg px-2 py-1",children:[Ut("skillPointTotal")," ",Math.round(e.item.roughScoreFields.skillPointTotal)]})]})]})]}),(e.onPin||e.onEquip||e.onRemove)&&m.jsxs("div",{className:gt("mt-2 flex flex-wrap",e.dense?"gap-1":"gap-2"),children:[e.onPin?m.jsxs(Ne,{className:gt("text-xs",e.dense?"px-1.5 py-0.5":"px-2 py-1"),variant:"ghost",onClick:e.onPin,children:[m.jsx(HE,{size:12,className:"mr-1 inline"}),"Pin"]}):null,e.onEquip?m.jsxs(Ne,{className:gt("text-xs",e.dense?"px-1.5 py-0.5":"px-2 py-1"),onClick:e.onEquip,children:[m.jsx(FE,{size:12,className:"mr-1 inline"}),"Equip"]}):null,e.onRemove?m.jsx(Ne,{className:gt("text-xs",e.dense?"px-1.5 py-0.5":"px-2 py-1"),variant:"ghost",onClick:e.onRemove,children:"Remove"}):null]})]})}const $x="workbench-search-presets:v2";function RR(){try{const e=window.localStorage.getItem($x);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}}function kR(e){window.localStorage.setItem($x,JSON.stringify(e))}function i0(e,n){return e.includes(n)?e.filter(s=>s!==n):[...e,n]}const AR=220,OR=200,Gl=50;function zR(e){const n=e.catalog.itemsById.get(e.itemId);if(!n)return null;const s=e.selectedSlot!=null&&fa(e.selectedSlot)===n.category;return m.jsx("div",{className:"relative",onMouseEnter:i=>e.onHoverForStats(e.itemId,i.currentTarget.getBoundingClientRect()),onMouseLeave:()=>e.onHoverForStats(null,null),children:m.jsx(zc,{item:n,compact:!0,dense:!0,showDetails:!1,dragData:{kind:"search",itemId:n.id},onPin:()=>e.onPin(n.id),onEquip:()=>e.onEquip(n.id),onHover:i=>e.onHover(i?n.id:null,i?e.selectedSlot:null),badge:s?`Fits ${e.selectedSlot}`:void 0})})}function Hx(e){const n=w.useRef(null),s=e.result?.rows??[],i=w.useDeferredValue(s),[r,c]=w.useState(0),[u,d]=w.useState(null),g=w.useRef(null),p=i.length,y=Math.max(1,Math.ceil(p/Gl)),v=Math.min(r,Math.max(0,y-1)),b=i.slice(v*Gl,(v+1)*Gl);w.useEffect(()=>{c(0)},[e.result]);const S=K=>{g.current&&(window.clearTimeout(g.current),g.current=null),d(K)},T=()=>{g.current=window.setTimeout(()=>d(null),120)},E=!e.state.resultsBelowBuild,C=E?1:3,O=E?AR:OR,R=Math.ceil(b.length/C),I=IC({count:R,getScrollElement:()=>n.current,estimateSize:()=>O,measureElement:K=>K.getBoundingClientRect().height,overscan:4}),B=u?e.catalog.itemsById.get(u.itemId):null,q=e.result!=null||e.loading,N=e.loading?"Searching...":e.result?`${e.result.total.toLocaleString()} results`:"Search or filter to see items",j=p===0?0:v*Gl+1,D=Math.min((v+1)*Gl,p);return m.jsxs("div",{className:"min-h-0 flex-1",children:[m.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2 text-xs text-[var(--wb-muted)]",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{children:N}),q&&p>0?m.jsx("span",{className:"shrink-0",children:y>1?m.jsxs(m.Fragment,{children:[m.jsx("button",{type:"button",className:"wb-inline-button mr-1",onClick:()=>c(K=>Math.max(0,K-1)),disabled:v<=0,title:"Previous page",children:""}),m.jsxs("span",{children:[j.toLocaleString(),"",D.toLocaleString()]}),m.jsx("button",{type:"button",className:"wb-inline-button ml-1",onClick:()=>c(K=>Math.min(y-1,K+1)),disabled:v>=y-1,title:"Next page",children:""})]}):null}):null]}),q?m.jsxs("span",{children:[(e.state.sortKeys??["relevance"]).map(K=>Ut(K)).join("  "),e.state.sortDescending?" ":" "]}):null]}),m.jsx("div",{ref:n,className:gt("wb-scrollbar wb-surface overflow-auto rounded-xl",e.embedded?"min-h-[160px] flex-1":"h-[calc(100vh-26rem)]"),children:q?b.length===0?m.jsx("div",{className:"flex min-h-[120px] flex-col items-center justify-center gap-1 px-4 py-6 text-center text-sm text-[var(--wb-muted)]",children:m.jsx("span",{children:"No items match your filters."})}):m.jsx("div",{style:{height:I.getTotalSize(),position:"relative"},children:I.getVirtualItems().map(K=>{const re=K.index*C,he=b.slice(re,re+C);return m.jsx("div",{"data-index":K.index,ref:I.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${K.start}px)`,padding:"6px 8px"},className:E?"grid grid-cols-1":"grid grid-cols-2 gap-2 xl:grid-cols-3",children:he.map(se=>m.jsx(zR,{catalog:e.catalog,itemId:se.id,selectedSlot:e.selectedSlot,onPin:e.onPin,onEquip:e.onEquip,onHover:e.onHover,onHoverForStats:(Z,le)=>{Z!=null&&le?S({itemId:Z,rect:le}):T()}},se.id))},K.key)})}):m.jsx("div",{className:"flex min-h-[120px] flex-col items-center justify-center gap-1 px-4 py-6 text-center text-sm text-[var(--wb-muted)]",children:m.jsx("span",{children:"Enter a search term, select categories, or apply filters above to see items."})})}),B&&u?Pa.createPortal(m.jsxs("div",{className:"fixed z-[100] w-72 max-h-[80vh] overflow-auto rounded-xl border border-[var(--wb-border)] bg-[var(--wb-panel)] p-2.5 shadow-xl",style:{left:Math.min(u.rect.right+8,window.innerWidth-296),top:u.rect.top},onMouseEnter:()=>{g.current&&(window.clearTimeout(g.current),g.current=null)},onMouseLeave:()=>d(null),children:[m.jsx("div",{className:"mb-1.5 break-words text-xs font-semibold text-[var(--wb-text)]",children:B.displayName}),m.jsx(DR,{item:B,dense:!0})]}),document.body):null]})}function PR(e){const[n,s]=w.useState(()=>typeof window>"u"?[]:RR()),i=w.useMemo(()=>e.catalog.facetsMeta.majorIds.slice(0,20),[e.catalog]),r=e.result?.facetCounts,c=w.useMemo(()=>["relevance","level","baseDps",...Object.keys(e.catalog.facetsMeta.numericRanges).filter(y=>!["relevance","level","baseDps"].includes(y)).sort((y,v)=>Ut(y).localeCompare(Ut(v)))],[e.catalog.facetsMeta.numericRanges]),u=w.useMemo(()=>{const g=Object.keys(e.catalog.facetsMeta.numericRanges);return[...["level","baseDps","slots"].filter(y=>!g.includes(y)),...g].sort((y,v)=>Ut(y).localeCompare(Ut(v)))},[e.catalog.facetsMeta.numericRanges]);w.useEffect(()=>{typeof window<"u"&&kR(n)},[n]);const d=g=>e.setState(aC(e.state,g));return m.jsx(Gi,{className:"flex min-h-0 flex-col",title:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(GE,{size:15}),"Advanced Item Search"]}),headerRight:null,children:m.jsxs("div",{className:"flex min-h-0 flex-col gap-3 p-3",children:[m.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-end",children:[m.jsxs("div",{className:"min-w-0 flex-1",children:[m.jsx(Ie,{children:"Search Text"}),m.jsx("input",{className:"wb-input",placeholder:"Name, lore, major ID...",value:e.state.text,onChange:g=>d({text:g.target.value})})]}),m.jsx(Ne,{variant:"primary",className:"shrink-0",onClick:e.onSearch,disabled:e.loading,title:"Run search with current filters",children:e.loading?"Searching":"Show items"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Ie,{className:"mb-0 shrink-0",children:"Results"}),m.jsx(et,{active:e.state.resultsBelowBuild,onClick:()=>d({resultsBelowBuild:!e.state.resultsBelowBuild}),title:"Toggle: show below Workbench or in sidebar",children:e.state.resultsBelowBuild?"Below build":"In sidebar"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{children:[m.jsx(Ie,{children:"Sort by"}),m.jsxs("div",{className:"flex flex-col gap-1",children:[(e.state.sortKeys??["relevance"]).map((g,p)=>m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("select",{className:"wb-select flex-1",value:g,onChange:y=>{const v=[...e.state.sortKeys??["relevance"]];v[p]=y.target.value,d({sortKeys:v})},children:c.map(y=>m.jsx("option",{value:y,children:Ut(y)},y))}),m.jsx(Ne,{variant:"ghost",className:"shrink-0 px-1",onClick:()=>{const y=(e.state.sortKeys??["relevance"]).filter((v,b)=>b!==p);y.length===0&&y.push("relevance"),d({sortKeys:y})},title:"Remove sort",children:""})]},p)),m.jsx(Ne,{variant:"ghost",className:"self-start text-xs",onClick:()=>{const g=e.state.sortKeys??["relevance"],p=c.find(y=>!g.includes(y))??c[0];d({sortKeys:[...g,p]})},disabled:(e.state.sortKeys??["relevance"]).length>=8,children:"+ Add sort level"})]})]}),m.jsxs("div",{children:[m.jsx(Ie,{children:"View"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(et,{active:e.state.viewMode==="list",onClick:()=>d({viewMode:"list"}),children:"List"}),m.jsx(et,{active:e.state.viewMode==="grid",onClick:()=>d({viewMode:"grid"}),children:"Grid"}),m.jsx(et,{active:e.state.sortDescending,onClick:()=>d({sortDescending:!e.state.sortDescending}),title:"Toggle descending",children:e.state.sortDescending?"Desc":"Asc"})]})]})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"mb-2 flex items-center gap-2 text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:[m.jsx(dy,{size:13}),"Category"]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:vs.map(g=>m.jsxs(et,{active:e.state.categories.includes(g),onClick:()=>d({categories:i0(e.state.categories,g)}),children:[wh(g),r?.categories[g]?` (${r.categories[g]})`:""]},g))})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{children:[m.jsx(Ie,{children:"Wearable At Level"}),m.jsx("input",{className:"wb-input",type:"number",min:1,max:106,value:e.state.onlyWearableAtLevel??"",onChange:g=>{const p=g.target.value.trim();d({onlyWearableAtLevel:p?Number(p):null})}})]}),m.jsxs("div",{children:[m.jsx(Ie,{children:"Class Filter"}),m.jsxs("select",{className:"wb-select",value:e.state.classReqs[0]??"",onChange:g=>{const p=g.target.value;d({classReqs:p?[p]:[]})},children:[m.jsx("option",{value:"",children:"Any"}),e.catalog.facetsMeta.classReqs.map(g=>m.jsx("option",{value:g,children:g},g))]})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsx(et,{active:e.state.onlyClassCompatible,onClick:()=>d({onlyClassCompatible:!e.state.onlyClassCompatible}),children:"Only class-compatible"}),m.jsx(et,{active:e.state.excludeRestricted,onClick:()=>d({excludeRestricted:!e.state.excludeRestricted}),children:"Exclude restricted"})]}),m.jsxs("details",{className:"group",children:[m.jsxs("summary",{className:"cursor-pointer text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)] flex items-center gap-2",children:[m.jsx(dy,{size:13}),"Advanced ID Filters"]}),m.jsxs("div",{className:"mt-3 grid gap-2",children:[m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Set min/max for any ID (e.g. mr, sdPct, ehpProxy). Items outside ranges are excluded."}),Object.entries(e.state.numericRanges).map(([g,p])=>{const y=g==="powderSlots"?"slots":g==="level"?"lvl":g==="baseDps"?"averageDps":g,v=e.catalog.facetsMeta.numericRanges[y],b=p??{};return m.jsxs("div",{className:"flex flex-wrap items-end gap-2 rounded-lg border border-[var(--wb-border-muted)] p-2",children:[m.jsxs("div",{className:"min-w-[120px] flex-1",children:[m.jsx(Ie,{children:"ID"}),m.jsx("select",{className:"wb-select w-full",value:g,onChange:S=>{const T={...e.state.numericRanges};delete T[g],T[S.target.value]=b,d({numericRanges:T})},children:u.map(S=>m.jsx("option",{value:S,disabled:S!==g&&S in e.state.numericRanges,children:Ut(S)},S))})]}),m.jsxs("div",{className:"min-w-[70px]",children:[m.jsx(Ie,{children:"Min"}),m.jsx("input",{className:"wb-input w-full",type:"number",placeholder:v?String(Math.floor(v.min)):"min",value:b.min??"",onChange:S=>{const T=S.target.value.trim();d({numericRanges:{...e.state.numericRanges,[g]:{...b,min:T===""?void 0:Number(T)}}})}})]}),m.jsxs("div",{className:"min-w-[70px]",children:[m.jsx(Ie,{children:"Max"}),m.jsx("input",{className:"wb-input w-full",type:"number",placeholder:v?String(Math.ceil(v.max)):"max",value:b.max??"",onChange:S=>{const T=S.target.value.trim();d({numericRanges:{...e.state.numericRanges,[g]:{...b,max:T===""?void 0:Number(T)}}})}})]}),m.jsx(Ne,{variant:"ghost",className:"shrink-0",onClick:()=>{const S={...e.state.numericRanges};delete S[g],d({numericRanges:S})},children:"Remove"})]},g)}),m.jsx(Ne,{variant:"ghost",onClick:()=>{const g=new Set(Object.keys(e.state.numericRanges)),p=u.find(y=>!g.has(y));p&&d({numericRanges:{...e.state.numericRanges,[p]:{}}})},disabled:u.every(g=>g in e.state.numericRanges),children:"Add ID Filter"})]})]}),m.jsxs("details",{className:"group",children:[m.jsx("summary",{className:"cursor-pointer text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)] flex items-center gap-2",children:"Exclusion (IDs to avoid)"}),m.jsxs("div",{className:"mt-3 grid gap-2",children:[m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Exclude items that exceed max (or are below min). E.g. mr max 20 = exclude items with mana regen > 20."}),Object.entries(e.state.exclusionRanges??{}).map(([g,p])=>{const y=g==="powderSlots"?"slots":g==="level"?"lvl":g==="baseDps"?"averageDps":g,v=e.catalog.facetsMeta.numericRanges[y],b=p??{};return m.jsxs("div",{className:"flex flex-wrap items-end gap-2 rounded-lg border border-[var(--wb-border-muted)] border-amber-500/30 p-2",children:[m.jsxs("div",{className:"min-w-[120px] flex-1",children:[m.jsx(Ie,{children:"Avoid ID"}),m.jsx("select",{className:"wb-select w-full",value:g,onChange:S=>{const T={...e.state.exclusionRanges??{}};delete T[g],T[S.target.value]=b,d({exclusionRanges:T})},children:u.map(S=>m.jsx("option",{value:S,disabled:S!==g&&S in(e.state.exclusionRanges??{}),children:Ut(S)},S))})]}),m.jsxs("div",{className:"min-w-[70px]",children:[m.jsx(Ie,{children:"Max (exclude if >)"}),m.jsx("input",{className:"wb-input w-full",type:"number",placeholder:v?String(Math.ceil(v.max)):"max",value:b.max??"",onChange:S=>{const T=S.target.value.trim();d({exclusionRanges:{...e.state.exclusionRanges??{},[g]:{...b,max:T===""?void 0:Number(T)}}})}})]}),m.jsxs("div",{className:"min-w-[70px]",children:[m.jsx(Ie,{children:"Min (exclude if <)"}),m.jsx("input",{className:"wb-input w-full",type:"number",placeholder:"min",value:b.min??"",onChange:S=>{const T=S.target.value.trim();d({exclusionRanges:{...e.state.exclusionRanges??{},[g]:{...b,min:T===""?void 0:Number(T)}}})}})]}),m.jsx(Ne,{variant:"ghost",className:"shrink-0",onClick:()=>{const S={...e.state.exclusionRanges??{}};delete S[g],d({exclusionRanges:S})},children:"Remove"})]},g)}),m.jsx(Ne,{variant:"ghost",onClick:()=>{const g=new Set(Object.keys(e.state.exclusionRanges??{})),p=u.find(y=>!g.has(y));p&&d({exclusionRanges:{...e.state.exclusionRanges??{},[p]:{}}})},disabled:u.every(g=>g in(e.state.exclusionRanges??{})),children:"Add exclusion"})]})]}),m.jsxs("div",{children:[m.jsx(Ie,{children:"Major IDs (quick picks)"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(g=>m.jsx(et,{active:e.state.majorIds.includes(g),onClick:()=>d({majorIds:i0(e.state.majorIds,g)}),title:g,children:g},g))})]}),m.jsxs("div",{className:"wb-card p-2",children:[m.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Filter Presets"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(Ne,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>{const g=window.prompt("Preset name?")?.trim();if(!g)return;const p=[{name:g,state:e.state},...n.filter(y=>y.name.toLowerCase()!==g.toLowerCase())].slice(0,20);s(p)},children:"Save"}),m.jsx(Ne,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.setState(Oa),children:"Reset"})]})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:n.length===0?m.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:"No saved presets yet."}):n.map(g=>m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(et,{onClick:()=>e.setState(g.state),children:g.name}),m.jsx("button",{className:"wb-inline-button border border-[var(--wb-border)] px-1.5 py-0.5 text-xs",onClick:()=>s(p=>p.filter(y=>y.name!==g.name)),title:`Delete ${g.name}`,children:"x"})]},g.name))})]}),e.state.resultsBelowBuild?null:m.jsx(Hx,{catalog:e.catalog,result:e.result,selectedSlot:e.selectedSlot,state:e.state,loading:e.loading,onPin:e.onPin,onEquip:e.onEquip,onHover:e.onHover})]})})}const IR={slotStatus:{},warnings:{messages:[]},aggregated:{hpTotal:0,hprTotal:0,mr:0,ms:0,ls:0,speed:0,skillPoints:{str:0,dex:0,int:0,def:0,agi:0},skillReqs:{str:0,dex:0,int:0,def:0,agi:0},defenses:{e:0,t:0,w:0,f:0,a:0},offense:{baseDps:0,spellPct:0,spellRaw:0,meleePct:0,meleeRaw:0,elemDamPct:0,genericDamPct:0,offenseScore:0}},derived:{dpsProxy:0,spellProxy:0,meleeProxy:0,ehpProxy:0,reqTotal:0,skillPointTotal:0,legacyBaseDps:0,legacyEhp:0,legacyEhpNoAgi:0,skillpointFeasible:!0,assignedSkillPointsRequired:0}};function Wf(e){let n=Number.isFinite(e)?e:0;if(n<=0)return 0;n>=150&&(n=150);const s=.9908;return s/(1-s)*(1-Math.pow(s,n))/100}const BR=.867,LR=.951,qR=90;function UR(e){return Math.max(1,Math.min(106,Math.round(e||1)))*5+5}function $R(e){const n=Math.max(1,Math.min(106,Math.round(e||1)));return n>=101?200:(n-1)*2}function HR(e){switch(e){case"relik":return .6;case"bow":return .7;case"wand":return .8;case"dagger":case"spear":return 1;default:return 1}}function ZR(e){const n=Math.max(5,e.totalHp),s=Wf(e.defSkillPoints)*BR,i=Wf(e.agiSkillPoints)*LR,c=2-HR(e.weaponType),d=(100-qR)/100*i+(1-i)*(1-s),g=1-s,p=n/Math.max(1e-9,d)/Math.max(1e-9,c),y=n/Math.max(1e-9,g)/Math.max(1e-9,c);return{withAgi:p,noAgi:y}}function FR(e){return[e.numeric.reqStr,e.numeric.reqDex,e.numeric.reqInt,e.numeric.reqDef,e.numeric.reqAgi]}function YR(e){return[e.numeric.spStr,e.numeric.spDex,e.numeric.spInt,e.numeric.spDef,e.numeric.spAgi]}function GR(e,n){return[e[0]+n[0],e[1]+n[1],e[2]+n[2],e[3]+n[3],e[4]+n[4]]}function VR(e){return e[0]+e[1]+e[2]+e[3]+e[4]}function l0(e,n){for(let s=0;s<5;s++)if(e[s]>n[s])return!1;return!0}function KR(e,n){for(const s of e)if(l0(s.assigned,n.assigned))return;for(let s=e.length-1;s>=0;s--)l0(n.assigned,e[s].assigned)&&e.splice(s,1);e.push(n)}function WR(e,n,s={}){if(e.length===0)return{feasible:!0,assignedTotal:0,assignedByStat:[0,0,0,0,0]};const i=$R(n),r=s.extraBaseSkillPoints??[0,0,0,0,0],c=e.length,u=e.map(FR),d=e.map(YR),g=1<<c,p=Array.from({length:g},()=>[0,0,0,0,0]);for(let T=1;T<g;T++){const E=T&-T,C=Math.log2(E)|0;p[T]=GR(p[T^E],d[C])}const y=new Array(g);y[0]=[{assigned:[0,0,0,0,0],assignedTotal:0}];for(let T=0;T<g;T++){const E=y[T];if(!E||E.length===0)continue;const C=p[T];for(const O of E)for(let R=0;R<c;R++){if((T&1<<R)!==0)continue;const I=[...O.assigned];let B=!0;for(let D=0;D<5;D++){const K=O.assigned[D]+C[D]+(r[D]??0),re=u[R][D];if(re>K&&(I[D]+=re-K),I[D]>100){B=!1;break}}if(!B)continue;const q=VR(I);if(q>i)continue;const N=T|1<<R,j=y[N]??=[];KR(j,{assigned:I,assignedTotal:q})}}const v=y[g-1];if(!v||v.length===0)return{feasible:!1,assignedTotal:1/0,assignedByStat:null};let b=1/0,S=null;for(const T of v)T.assignedTotal<b&&(b=T.assignedTotal,S=[...T.assigned]);return{feasible:Number.isFinite(b),assignedTotal:b,assignedByStat:Number.isFinite(b)?S:null}}function Pc(e,n,s,i={}){const r=[];for(const c of tt){const u=e[c];if(u==null)continue;const d=n.itemsById.get(u);d&&r.push(d)}return WR(r,s,i)}function XR(e,n){const s={};for(const i of tt){const r=e.slots[i];if(r==null)continue;const c=n.itemsById.get(r);c&&(s[i]=c)}return s}function ur(e,n,s={}){const i=XR(e,n),r=structuredClone(IR),c=r.warnings.messages;let u=null;for(const se of tt){const Z=i[se];if(!Z)continue;se==="weapon"&&(u=Z.type),r.aggregated.hpTotal+=Z.numeric.hp+Z.numeric.hpBonus,r.aggregated.hprTotal+=Z.numeric.hprRaw+Z.numeric.hprPct,r.aggregated.mr+=Z.numeric.mr,r.aggregated.ms+=Z.numeric.ms,r.aggregated.ls+=Z.numeric.ls,r.aggregated.speed+=Z.numeric.spd,r.aggregated.skillPoints.str+=Z.numeric.spStr,r.aggregated.skillPoints.dex+=Z.numeric.spDex,r.aggregated.skillPoints.int+=Z.numeric.spInt,r.aggregated.skillPoints.def+=Z.numeric.spDef,r.aggregated.skillPoints.agi+=Z.numeric.spAgi,r.aggregated.skillReqs.str=Math.max(r.aggregated.skillReqs.str,Z.numeric.reqStr),r.aggregated.skillReqs.dex=Math.max(r.aggregated.skillReqs.dex,Z.numeric.reqDex),r.aggregated.skillReqs.int=Math.max(r.aggregated.skillReqs.int,Z.numeric.reqInt),r.aggregated.skillReqs.def=Math.max(r.aggregated.skillReqs.def,Z.numeric.reqDef),r.aggregated.skillReqs.agi=Math.max(r.aggregated.skillReqs.agi,Z.numeric.reqAgi),r.aggregated.defenses.e+=Z.numeric.eDef,r.aggregated.defenses.t+=Z.numeric.tDef,r.aggregated.defenses.w+=Z.numeric.wDef,r.aggregated.defenses.f+=Z.numeric.fDef,r.aggregated.defenses.a+=Z.numeric.aDef,r.aggregated.offense.baseDps+=Z.numeric.baseDps,r.aggregated.offense.spellPct+=Z.numeric.sdPct,r.aggregated.offense.spellRaw+=Z.numeric.sdRaw,r.aggregated.offense.meleePct+=Z.numeric.mdPct,r.aggregated.offense.meleeRaw+=Z.numeric.mdRaw,r.aggregated.offense.elemDamPct+=Z.numeric.eDamPct+Z.numeric.tDamPct+Z.numeric.wDamPct+Z.numeric.fDamPct+Z.numeric.aDamPct,r.aggregated.offense.genericDamPct+=Z.numeric.damPct+Z.numeric.rDamPct+Z.numeric.nDamPct,r.aggregated.offense.offenseScore+=Z.roughScoreFields.offense;const le=Z.classReq,Q=!le||!e.characterClass||le===e.characterClass,L=Z.level<=e.level,Y=Z.numeric.reqStr<=100&&Z.numeric.reqDex<=100&&Z.numeric.reqInt<=100&&Z.numeric.reqDef<=100&&Z.numeric.reqAgi<=100;r.slotStatus[se]={classOk:Q,levelOk:L,skillReqsMet:Y}}!e.characterClass&&u&&(e.characterClass=oc(u));for(const se of tt){const Z=i[se];Z&&(fa(se)!==Z.category&&c.push(`${se} contains incompatible item type (${Z.type}).`),Z.level>e.level&&c.push(`${Z.displayName} requires level ${Z.level}.`),e.characterClass&&Z.classReq&&Z.classReq!==e.characterClass&&c.push(`${Z.displayName} requires ${Z.classReq}.`),(Z.restricted||Z.deprecated)&&c.push(`${Z.displayName} is restricted/deprecated.`))}const d=r.aggregated.skillReqs.str+r.aggregated.skillReqs.dex+r.aggregated.skillReqs.int+r.aggregated.skillReqs.def+r.aggregated.skillReqs.agi,g=r.aggregated.skillPoints.str+r.aggregated.skillPoints.dex+r.aggregated.skillPoints.int+r.aggregated.skillPoints.def+r.aggregated.skillPoints.agi,p=Pc(e.slots,n,e.level,s.skillpointFeasibility),{spellPct:y,spellRaw:v,meleePct:b,meleeRaw:S,baseDps:T,elemDamPct:E,genericDamPct:C}=r.aggregated.offense,O=r.aggregated.skillPoints,I=1+Wf(O.str),B=(T*(1+(y+E+C)/100)+v)*I,q=(T*(1+(b+E+C)/100)+S)*I,N=q+B+r.aggregated.speed*.8,j=r.aggregated.defenses.e+r.aggregated.defenses.t+r.aggregated.defenses.w+r.aggregated.defenses.f+r.aggregated.defenses.a,D=r.aggregated.hpTotal+j*.45+r.aggregated.hprTotal*2+Math.max(0,r.aggregated.skillPoints.def)*12+Math.max(0,r.aggregated.skillPoints.agi)*10,K=r.aggregated.offense.baseDps,re=UR(e.level)+r.aggregated.hpTotal,he=ZR({totalHp:re,defSkillPoints:r.aggregated.skillPoints.def,agiSkillPoints:r.aggregated.skillPoints.agi,weaponType:u});return r.derived={dpsProxy:N,spellProxy:B,meleeProxy:q,ehpProxy:D,reqTotal:d,skillPointTotal:g,legacyBaseDps:K,legacyEhp:he.withAgi,legacyEhpNoAgi:he.noAgi,skillpointFeasible:p.feasible,assignedSkillPointsRequired:Number.isFinite(p.assignedTotal)?p.assignedTotal:0},p.feasible||c.push(`Skill requirements are not satisfiable at level ${e.level} (estimated assigned SP exceeds available or equip order is invalid).`),r}function QR(e,n){return{dpsProxy:n.derived.dpsProxy-e.derived.dpsProxy,ehpProxy:n.derived.ehpProxy-e.derived.ehpProxy,legacyBaseDps:n.derived.legacyBaseDps-e.derived.legacyBaseDps,legacyEhp:n.derived.legacyEhp-e.derived.legacyEhp,hpTotal:n.aggregated.hpTotal-e.aggregated.hpTotal,speed:n.aggregated.speed-e.aggregated.speed,skillPointTotal:n.derived.skillPointTotal-e.derived.skillPointTotal}}function wt(e){return Number.isFinite(e)?Math.round(e).toLocaleString():"-"}function JR(e){const n=e.snapshot.slots.weapon;return n==null?null:e.catalog.itemsById.get(n)??null}function ek(e){const n=e.snapshot.comparePreview;if(n.itemId!=null){const i=e.catalog.itemsById.get(n.itemId);if(i){const r=n.slot?`Compare Preview  ${rc(n.slot)}`:"Compare Preview";return{item:i,source:r}}}if(e.snapshot.selectedSlot){const i=e.snapshot.slots[e.snapshot.selectedSlot];if(i!=null){const r=e.catalog.itemsById.get(i);if(r)return{item:r,source:`Selected Slot  ${rc(e.snapshot.selectedSlot)}`}}}const s=JR(e);return s?{item:s,source:"Equipped Weapon"}:null}function tk(e){const[n,s]=w.useState(!1),i=e.compareSummary?QR(e.summary,e.compareSummary):null,r=e.spellPreview?.melee??null,c=ek(e);return m.jsx(Gi,{className:"flex min-h-0 flex-col",title:"Live Build Summary",headerRight:null,children:m.jsxs("div",{className:"flex flex-col gap-3 p-3",children:[c?m.jsxs("div",{className:"wb-card p-2.5",children:[m.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-xs uppercase tracking-wide text-[var(--wb-muted)]",children:"Focused Item"}),m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:c.source})]}),m.jsx(Ne,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>s(u=>!u),children:n?"Hide Stats":"Show Stats"})]}),m.jsx(zc,{item:c.item,compact:!0,dense:!0,showDetails:n})]}):m.jsx("div",{className:"wb-surface rounded-xl p-3 text-xs text-[var(--wb-muted)]",children:"Select or hover an item to inspect it here."}),e.abilityTreeSummary?m.jsxs("div",{className:"wb-banner p-3 text-xs","data-tone":e.abilityTreeSummary.hasErrors?"warning":"success",children:[m.jsxs("div",{className:"mb-1 flex items-center justify-between gap-2",children:[m.jsxs("div",{className:"font-semibold",children:["Ability Tree (",e.abilityTreeSummary.className,")"]}),m.jsx(Ne,{variant:"ghost",className:"px-2 py-1 text-xs",onClick:e.actions.onOpenAbilityTree,children:"Edit"})]}),m.jsxs("div",{children:["AP ",e.abilityTreeSummary.apUsed,"/",e.abilityTreeSummary.apCap,"  ",e.abilityTreeSummary.selectedCount," abilities selected"]}),e.abilityTreeSummary.hasErrors?m.jsx("div",{className:"mt-1",children:"Tree has validation issues (dependencies/blockers/AP)."}):null]}):null,m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Melee DPS"}),m.jsxs("div",{className:"mt-1 flex items-end justify-between gap-2",children:[m.jsx("div",{className:"wb-text-offense text-xl font-semibold",children:wt(r?.dps??e.summary.derived.legacyBaseDps)}),i?.legacyBaseDps!=null?m.jsxs("div",{className:["text-xs",i.legacyBaseDps>0?"wb-text-success":i.legacyBaseDps<0?"wb-text-danger":"text-[var(--wb-muted)]"].join(" "),children:[i.legacyBaseDps>0?"+":"",Math.round(i.legacyBaseDps).toLocaleString()]}):null]}),m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:[r?`Legacy melee DPS (${r.attackSpeedTier})  Per Attack ${wt(r.perAttackAverage)}`:"Legacy melee DPS preview unavailable (equip a weapon and valid ability tree selection)."," "," Melee % / Raw ",m.jsx("span",{className:"wb-text-offense",children:wt(e.summary.aggregated.offense.meleePct)})," / ",m.jsx("span",{className:"wb-text-offense",children:wt(e.summary.aggregated.offense.meleeRaw)})]})]}),e.spellPreview?m.jsxs("div",{className:"wb-card p-3",children:[m.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Spells (ATree)"}),m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[e.spellPreview.spells.length," entries"]})]}),e.spellPreview.notes.length>0?m.jsx("div",{className:"wb-banner mb-2 p-2 text-xs","data-tone":"warning",children:e.spellPreview.notes.join(" ")}):null,e.spellPreview.spells.length===0?m.jsx("div",{className:"rounded-lg border border-dashed border-[var(--wb-border-muted)] p-2 text-xs text-[var(--wb-muted)]",children:"No spell damage entries yet. Select active ability-tree spell nodes (roots / spell upgrades)."}):m.jsx(Vi,{className:"max-h-[36vh] lg:max-h-[44vh]",children:m.jsx("div",{className:"grid gap-2 pr-1",children:e.spellPreview.spells.map(u=>m.jsxs("div",{className:"wb-surface rounded-lg p-2",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs",children:[m.jsxs("div",{className:"font-semibold",children:[u.name,m.jsxs("span",{className:"ml-1 text-[var(--wb-muted)]",children:["(",u.displayPartName,")"]})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("div",{className:u.isHealing?"wb-text-defense":"wb-text-offense",children:[Math.round(u.averageDisplayValue).toLocaleString()," ",u.isHealing?"heal":"avg dmg"]}),u.manaCost!=null?m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[u.manaCost.toFixed(2)," mana"]}):null]})]}),m.jsx("div",{className:"mt-1 grid gap-1 text-xs text-[var(--wb-muted)]",children:u.parts.filter(d=>d.display).map(d=>m.jsxs("div",{className:"flex items-center justify-between gap-2",children:[m.jsx("span",{className:"truncate",children:d.name}),m.jsx("span",{className:d.type==="heal"?"wb-text-defense":"wb-text-offense",children:Math.round(d.averageTotal??0).toLocaleString()})]},d.name))})]},`${u.baseSpell}-${u.name}`))})})]}):null,m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsx(Zo,{label:"Base DPS",value:wt(e.summary.derived.legacyBaseDps),delta:i?.legacyBaseDps??null,valueClassName:"wb-text-offense"}),m.jsx(Zo,{label:"Effective HP",value:wt(e.summary.derived.legacyEhp),delta:i?.legacyEhp??null,valueClassName:"wb-text-defense"}),m.jsx(Zo,{label:"Req Total",value:wt(e.summary.derived.reqTotal)}),m.jsx(Zo,{label:"SP Total",value:wt(e.summary.derived.skillPointTotal),delta:i?.skillPointTotal??null})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[m.jsxs("div",{className:"wb-surface rounded-xl px-3 py-2",children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"SP Feasibility:"})," ",m.jsx("span",{className:e.summary.derived.skillpointFeasible?"wb-text-success":"wb-text-danger",children:e.summary.derived.skillpointFeasible?"Wearable":"Invalid / Not Wearable"})]}),m.jsxs("div",{className:"wb-surface rounded-xl px-3 py-2",children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Assigned SP Needed:"})," ",m.jsx("span",{children:wt(e.summary.derived.assignedSkillPointsRequired)})]})]}),e.compareSummary&&e.compareSlot?m.jsxs("div",{className:"wb-banner p-3 text-xs","data-tone":"success",children:["Compare preview for ",m.jsx("b",{children:rc(e.compareSlot)})]}):null,m.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"text-xs uppercase tracking-wide text-[var(--wb-muted)]",children:"Offense"}),m.jsxs("div",{className:"mt-2 grid gap-1 text-xs",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Legacy Base DPS:"})," ",m.jsx("span",{className:"wb-text-offense font-medium",children:wt(e.summary.derived.legacyBaseDps)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Heuristic DPS Proxy:"})," ",m.jsx("span",{className:"wb-text-offense",children:wt(e.summary.derived.dpsProxy)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Spell % / Raw:"})," ",m.jsx("span",{className:"wb-text-offense",children:wt(e.summary.aggregated.offense.spellPct)})," / ",m.jsx("span",{className:"wb-text-offense",children:wt(e.summary.aggregated.offense.spellRaw)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Melee % / Raw:"})," ",m.jsx("span",{className:"wb-text-offense",children:wt(e.summary.aggregated.offense.meleePct)})," / ",m.jsx("span",{className:"wb-text-offense",children:wt(e.summary.aggregated.offense.meleeRaw)})]})]})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"text-xs uppercase tracking-wide text-[var(--wb-muted)]",children:"Defense & Utility"}),m.jsxs("div",{className:"mt-2 grid gap-1 text-xs",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Legacy EHP (AGI):"})," ",m.jsx("span",{className:"wb-text-defense font-medium",children:wt(e.summary.derived.legacyEhp)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Legacy EHP (No AGI):"})," ",m.jsx("span",{className:"wb-text-defense",children:wt(e.summary.derived.legacyEhpNoAgi)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Heuristic EHP Proxy:"})," ",m.jsx("span",{className:"wb-text-defense",children:wt(e.summary.derived.ehpProxy)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"HP Total:"})," ",m.jsx("span",{className:"wb-text-defense",children:wt(e.summary.aggregated.hpTotal)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"HPR Total:"})," ",wt(e.summary.aggregated.hprTotal)]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"MR / MS / LS:"})," ",wt(e.summary.aggregated.mr)," / ",wt(e.summary.aggregated.ms)," / ",wt(e.summary.aggregated.ls)]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Walk Speed:"})," ",wt(e.summary.aggregated.speed)]})]})]})]}),m.jsx("div",{className:"wb-surface rounded-xl p-3 text-xs text-[var(--wb-muted)]",children:"Workbench primary KPIs use legacy-compatible metrics (Base DPS + Effective HP). Ability tree editing is now in Workbench, but these summary metrics still exclude ability-tree effects for now. Proxy values are still used internally for search/Build Solver heuristics."}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Warnings"}),e.summary.warnings.messages.length===0?m.jsx("div",{className:"wb-surface rounded-xl p-3 text-xs wb-text-success",children:"No active warnings."}):m.jsx(Vi,{className:"max-h-32",children:m.jsx("div",{className:"grid gap-2",children:e.summary.warnings.messages.map((u,d)=>m.jsx("div",{className:"wb-banner p-2 text-xs","data-tone":"warning",children:u},`${u}-${d}`))})})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs(Ne,{variant:"ghost",className:"justify-start",onClick:e.actions.onCopyLegacyLink,disabled:!e.snapshot.legacyHash,children:[m.jsx(Sh,{size:14,className:"mr-2"}),"Legacy Link"]}),m.jsxs(Ne,{variant:"ghost",className:"justify-start",onClick:e.actions.onOpenLegacyBuilder,children:[m.jsx(AE,{size:14,className:"mr-2"}),"Open Legacy"]})]})]})})}function nk(e){const{info:n}=e;return m.jsx("div",{className:"wb-banner px-3 py-2","data-tone":"accent",children:m.jsxs("div",{className:"flex items-center justify-between gap-2",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"text-xs font-semibold",children:["Crafted ",n.type.charAt(0).toUpperCase()+n.type.slice(1)]}),m.jsxs("div",{className:"mt-0.5 text-[10px] text-[var(--wb-muted)]",children:["Lv. ",n.lvl," | ",n.hash.slice(0,20),"..."]})]}),m.jsx(Ne,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:e.onClear,title:"Remove crafted item",children:m.jsx(cb,{size:12})})]})})}function r0(e){const{isOver:n,setNodeRef:s}=ib({id:`slot:${e.slot}`,data:{droppableType:"slot",slot:e.slot}}),i=e.store.slots[e.slot],r=i!=null?e.catalog.itemsById.get(i):void 0,c=e.store.craftedSlots[e.slot],u=sb({id:r?`slot-item:${e.slot}:${r.id}`:`slot-empty:${e.slot}`,data:r?{dragItem:{kind:"slot",itemId:r.id,sourceSlot:e.slot}}:void 0,disabled:!r});return m.jsxs("div",{ref:s,className:gt("rounded-xl border p-2",n?"border-emerald-400/70 bg-emerald-400/8":"wb-surface-strong"),onMouseEnter:()=>e.store.setSelectedSlot(e.slot),children:[m.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:rc(e.slot)}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(Ne,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.toggleLock(e.slot),title:"Lock slot",children:m.jsx(ob,{size:12,className:gt(e.store.locks[e.slot]&&"wb-text-success")})}),m.jsx(Ne,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.moveSlotToBin(e.slot),title:"Move to bin",children:m.jsx(nT,{size:12})})]})]}),r?m.jsx("div",{ref:u.setNodeRef,style:{transform:ac.Translate.toString(u.transform),opacity:u.isDragging?.45:1},...u.listeners,...u.attributes,children:m.jsx(zc,{item:r,compact:!0,dense:!0,showDetails:e.showItemDetails,dragData:{kind:"slot",itemId:r.id,sourceSlot:e.slot},locked:e.store.locks[e.slot],onHover:d=>e.onHoverItem?.(d?r.id:null,d?e.slot:null)})}):c?m.jsx(nk,{info:c,onClear:()=>e.store.clearCraftedSlot(e.slot)}):m.jsxs("div",{className:"wb-placeholder rounded-lg px-3 py-3 text-center text-xs",children:["Drop a ",fa(e.slot)," item here"]})]})}function o0(e){const{isOver:n,setNodeRef:s}=ib({id:`bin:${e.category}`,data:{droppableType:"bin",category:e.category}}),i=e.store.binsByCategory[e.category].map(r=>e.catalog.itemsById.get(r)).filter(r=>!!r);return m.jsxs("div",{className:"flex min-w-0 flex-col gap-1.5",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2",children:[m.jsxs("div",{className:"text-xs font-semibold",children:[wh(e.category)," Bin"]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:i.length}),m.jsxs(Ne,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.clearCategory(e.category),children:[m.jsx(cb,{size:12,className:"mr-1 inline"}),"Clear"]})]})]}),m.jsx("div",{ref:s,className:gt("wb-grid-backdrop min-h-20 rounded-xl border p-1.5",n?"border-emerald-400/70 bg-emerald-400/8":"wb-surface"),children:i.length===0?m.jsxs("div",{className:"p-2 text-[11px] text-[var(--wb-muted)]",children:["Drop items here for ",e.category,"."]}):m.jsx("div",{className:"grid max-h-40 gap-1.5 overflow-auto pr-0.5 wb-scrollbar",children:i.map(r=>m.jsx(zc,{item:r,compact:!0,dense:!0,showDetails:e.showItemDetails,dragData:{kind:"bin",itemId:r.id,sourceCategory:e.category},onRemove:()=>e.store.removePinnedItem(e.category,r.id),onHover:c=>{const u=e.store.selectedSlot&&fa(e.store.selectedSlot)===e.category?e.store.selectedSlot:null;e.onHoverItem?.(c?r.id:null,c?u:null)}},`${e.category}-${r.id}`))})})]})}function ak(e){const[n,s]=w.useState(!1),i=w.useMemo(()=>[["helmet","chestplate","leggings","boots"],["ring1","ring2","bracelet","necklace"]],[]),r=w.useMemo(()=>[{key:"armor",title:"Armor Shelf",categories:["helmet","chestplate","leggings","boots"]},{key:"accessories",title:"Accessory Shelf",categories:["ring","bracelet","necklace"]},{key:"weapon",title:"Weapon Shelf",categories:["weapon"]}].filter(c=>c.key!=="weapon"),[]);return m.jsx(Gi,{className:"flex min-h-0 flex-col",title:"Build",headerRight:m.jsxs(m.Fragment,{children:[m.jsx(Ne,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.undo(),children:"Undo"}),m.jsx(Ne,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.redo(),children:"Redo"}),m.jsx(Ne,{className:"px-2 py-1 text-xs",variant:n?"primary":"ghost",onClick:()=>s(c=>!c),children:n?"Hide Details":"Item Details"}),m.jsx(Ne,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.clearAll(),children:"Clear All"})]}),children:m.jsxs("div",{className:"grid min-h-0 flex-1 grid-rows-[auto_1fr_auto] gap-2 p-2.5",children:[m.jsxs("div",{className:"grid gap-1.5 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)_minmax(0,1.05fr)]",children:[i.map((c,u)=>m.jsx("div",{className:"grid gap-1.5",children:c.map(d=>m.jsx(r0,{slot:d,catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem},d))},u)),m.jsxs("div",{className:"grid content-start gap-1.5",children:[m.jsx(r0,{slot:"weapon",catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem}),m.jsxs("div",{className:"wb-surface rounded-xl p-2",children:[m.jsxs("div",{className:"mb-1.5 flex items-center justify-between gap-2",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Weapon Shelf"}),m.jsx("div",{className:"text-[11px] text-[var(--wb-muted)]",children:"Pinned weapon candidates"})]}),m.jsx(o0,{category:"weapon",catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem})]})]})]}),m.jsx(Vi,{className:"min-h-0 pr-1",children:m.jsx("div",{className:"grid gap-3",children:r.map(c=>m.jsxs("div",{className:"grid gap-1.5",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:c.title}),m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:c.categories.map(wh).join("  ")})]}),m.jsx("div",{className:gt("grid gap-2",c.categories.length===1?"grid-cols-1":c.categories.length===3?"lg:grid-cols-3":"md:grid-cols-2 xl:grid-cols-4"),children:c.categories.map(u=>m.jsx(o0,{category:u,catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem},u))})]},c.key))})}),e.searchResults?m.jsx("div",{className:"wb-surface flex min-h-[220px] max-h-[40vh] min-w-0 flex-col overflow-hidden rounded-xl",children:e.searchResults}):null,m.jsx("div",{className:"wb-surface rounded-xl p-2",children:m.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-3",children:[m.jsxs(Ne,{variant:"ghost",className:"justify-start",onClick:e.onShareWorkbench,children:[m.jsx(Sh,{size:14,className:"mr-2"}),"Share"]}),m.jsxs(Ne,{variant:"ghost",className:"justify-start",onClick:e.onExportWorkbench,children:[m.jsx(RE,{size:14,className:"mr-2"}),"Export"]}),m.jsxs(Ne,{variant:"ghost",className:"justify-start",onClick:e.onImportWorkbench,children:[m.jsx(sT,{size:14,className:"mr-2"}),"Import"]})]})})]})})}function ec(e){if(!e)return null;const n=e.startsWith("#")?e.slice(1):e;return n.trim()?n:null}function c0(e){const n=ec(e),s=typeof window<"u"?new URL("builder/",window.location.href).href:"builder/";return n?`${s}#${n}`:s}const sk=[["helmet","helmet-choice"],["chestplate","chestplate-choice"],["leggings","leggings-choice"],["boots","boots-choice"],["ring1","ring1-choice"],["ring2","ring2-choice"],["bracelet","bracelet-choice"],["necklace","necklace-choice"],["weapon","weapon-choice"]];function u0(e){const n=e.trim();if(!n)return null;if(n.startsWith("#"))return ec(n);try{const s=new URL(n,window.location.origin);return ec(s.hash)}catch{return ec(n)}}class ik{isSupported(n){return u0(n)!==null}async encodeLegacyHash(n){if(n.legacyHash)return n.legacyHash;throw new Error("Legacy hash encoding is only available for imported legacy builds in Workbench v1. Use Workbench share link or open legacy builder for full encode.")}async decodeLegacyHash(n){const s=u0(n);if(!s)throw new Error("No legacy hash found to decode");if(typeof document>"u")return{legacyHash:s,level:null,slots:{}};const i=document.createElement("iframe");i.style.position="fixed",i.style.left="-99999px",i.style.width="1200px",i.style.height="900px",i.style.opacity="0",i.src=`../builder/#${s}`,document.body.appendChild(i);const r=3e4,c=Date.now();try{return await new Promise((d,g)=>{const p=window.setInterval(()=>{try{if(!i.contentDocument)return;const y=i.contentDocument,v=y.getElementById("weapon-choice"),b=y.getElementById("level-choice");if(!v||!b){Date.now()-c>r&&(window.clearInterval(p),g(new Error("Timed out waiting for legacy builder UI")));return}const S={};for(const[O,R]of sk){const B=y.getElementById(R)?.value?.trim();B&&(S[O]=B)}if(!S.weapon&&Date.now()-c<2e3)return;const E=b.value?.trim(),C=E?Number(E):null;window.clearInterval(p),d({legacyHash:s,level:Number.isFinite(C??NaN)?C:null,slots:S,sourceUrl:i.src})}catch(y){window.clearInterval(p),g(y)}},250)})}finally{i.remove()}}}const Mf=new ik,d0=e=>{let n;const s=new Set,i=(p,y)=>{const v=typeof p=="function"?p(n):p;if(!Object.is(v,n)){const b=n;n=y??(typeof v!="object"||v===null)?v:Object.assign({},n,v),s.forEach(S=>S(n,b))}},r=()=>n,d={setState:i,getState:r,getInitialState:()=>g,subscribe:p=>(s.add(p),()=>s.delete(p))},g=n=e(i,r,d);return d},lk=(e=>e?d0(e):d0),rk=e=>e;function ok(e,n=rk){const s=Xt.useSyncExternalStore(e.subscribe,Xt.useCallback(()=>n(e.getState()),[e,n]),Xt.useCallback(()=>n(e.getInitialState()),[e,n]));return Xt.useDebugValue(s),s}const ck=e=>{const n=lk(e),s=i=>ok(n,i);return Object.assign(s,n),s},uk=(e=>ck);var Zx=Symbol.for("immer-nothing"),f0=Symbol.for("immer-draftable"),In=Symbol.for("immer-state");function na(e,...n){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var dr=Object.getPrototypeOf;function Xi(e){return!!e&&!!e[In]}function Hs(e){return e?Fx(e)||Array.isArray(e)||!!e[f0]||!!e.constructor?.[f0]||vr(e)||Bc(e):!1}var dk=Object.prototype.constructor.toString(),h0=new WeakMap;function Fx(e){if(!e||typeof e!="object")return!1;const n=Object.getPrototypeOf(e);if(n===null||n===Object.prototype)return!0;const s=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;if(s===Object)return!0;if(typeof s!="function")return!1;let i=h0.get(s);return i===void 0&&(i=Function.toString.call(s),h0.set(s,i)),i===dk}function pc(e,n,s=!0){Ic(e)===0?(s?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{n(r,e[r],e)}):e.forEach((i,r)=>n(r,i,e))}function Ic(e){const n=e[In];return n?n.type_:Array.isArray(e)?1:vr(e)?2:Bc(e)?3:0}function Xf(e,n){return Ic(e)===2?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function Yx(e,n,s){const i=Ic(e);i===2?e.set(n,s):i===3?e.add(s):e[n]=s}function fk(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}function vr(e){return e instanceof Map}function Bc(e){return e instanceof Set}function qs(e){return e.copy_||e.base_}function Qf(e,n){if(vr(e))return new Map(e);if(Bc(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const s=Fx(e);if(n===!0||n==="class_only"&&!s){const i=Object.getOwnPropertyDescriptors(e);delete i[In];let r=Reflect.ownKeys(i);for(let c=0;c<r.length;c++){const u=r[c],d=i[u];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(i[u]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[u]})}return Object.create(dr(e),i)}else{const i=dr(e);if(i!==null&&s)return{...e};const r=Object.create(i);return Object.assign(r,e)}}function Ph(e,n=!1){return Lc(e)||Xi(e)||!Hs(e)||(Ic(e)>1&&Object.defineProperties(e,{set:Fo,add:Fo,clear:Fo,delete:Fo}),Object.freeze(e),n&&Object.values(e).forEach(s=>Ph(s,!0))),e}function hk(){na(2)}var Fo={value:hk};function Lc(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var mk={};function Zs(e){const n=mk[e];return n||na(0,e),n}var fr;function Gx(){return fr}function gk(e,n){return{drafts_:[],parent_:e,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function m0(e,n){n&&(Zs("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=n)}function Jf(e){eh(e),e.drafts_.forEach(pk),e.drafts_=null}function eh(e){e===fr&&(fr=e.parent_)}function g0(e){return fr=gk(fr,e)}function pk(e){const n=e[In];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function p0(e,n){n.unfinalizedDrafts_=n.drafts_.length;const s=n.drafts_[0];return e!==void 0&&e!==s?(s[In].modified_&&(Jf(n),na(4)),Hs(e)&&(e=vc(n,e),n.parent_||yc(n,e)),n.patches_&&Zs("Patches").generateReplacementPatches_(s[In].base_,e,n.patches_,n.inversePatches_)):e=vc(n,s,[]),Jf(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),e!==Zx?e:void 0}function vc(e,n,s){if(Lc(n))return n;const i=e.immer_.shouldUseStrictIteration(),r=n[In];if(!r)return pc(n,(c,u)=>v0(e,r,n,c,u,s),i),n;if(r.scope_!==e)return n;if(!r.modified_)return yc(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const c=r.copy_;let u=c,d=!1;r.type_===3&&(u=new Set(c),c.clear(),d=!0),pc(u,(g,p)=>v0(e,r,c,g,p,s,d),i),yc(e,c,!1),s&&e.patches_&&Zs("Patches").generatePatches_(r,s,e.patches_,e.inversePatches_)}return r.copy_}function v0(e,n,s,i,r,c,u){if(r==null||typeof r!="object"&&!u)return;const d=Lc(r);if(!(d&&!u)){if(Xi(r)){const g=c&&n&&n.type_!==3&&!Xf(n.assigned_,i)?c.concat(i):void 0,p=vc(e,r,g);if(Yx(s,i,p),Xi(p))e.canAutoFreeze_=!1;else return}else u&&s.add(r);if(Hs(r)&&!d){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||n&&n.base_&&n.base_[i]===r&&d)return;vc(e,r),(!n||!n.scope_.parent_)&&typeof i!="symbol"&&(vr(s)?s.has(i):Object.prototype.propertyIsEnumerable.call(s,i))&&yc(e,r)}}}function yc(e,n,s=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ph(n,s)}function vk(e,n){const s=Array.isArray(e),i={type_:s?1:0,scope_:n?n.scope_:Gx(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,c=Ih;s&&(r=[i],c=hr);const{revoke:u,proxy:d}=Proxy.revocable(r,c);return i.draft_=d,i.revoke_=u,d}var Ih={get(e,n){if(n===In)return e;const s=qs(e);if(!Xf(s,n))return yk(e,s,n);const i=s[n];return e.finalized_||!Hs(i)?i:i===Nf(e.base_,n)?(jf(e),e.copy_[n]=nh(i,e)):i},has(e,n){return n in qs(e)},ownKeys(e){return Reflect.ownKeys(qs(e))},set(e,n,s){const i=Vx(qs(e),n);if(i?.set)return i.set.call(e.draft_,s),!0;if(!e.modified_){const r=Nf(qs(e),n),c=r?.[In];if(c&&c.base_===s)return e.copy_[n]=s,e.assigned_[n]=!1,!0;if(fk(s,r)&&(s!==void 0||Xf(e.base_,n)))return!0;jf(e),th(e)}return e.copy_[n]===s&&(s!==void 0||n in e.copy_)||Number.isNaN(s)&&Number.isNaN(e.copy_[n])||(e.copy_[n]=s,e.assigned_[n]=!0),!0},deleteProperty(e,n){return Nf(e.base_,n)!==void 0||n in e.base_?(e.assigned_[n]=!1,jf(e),th(e)):delete e.assigned_[n],e.copy_&&delete e.copy_[n],!0},getOwnPropertyDescriptor(e,n){const s=qs(e),i=Reflect.getOwnPropertyDescriptor(s,n);return i&&{writable:!0,configurable:e.type_!==1||n!=="length",enumerable:i.enumerable,value:s[n]}},defineProperty(){na(11)},getPrototypeOf(e){return dr(e.base_)},setPrototypeOf(){na(12)}},hr={};pc(Ih,(e,n)=>{hr[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});hr.deleteProperty=function(e,n){return hr.set.call(this,e,n,void 0)};hr.set=function(e,n,s){return Ih.set.call(this,e[0],n,s,e[0])};function Nf(e,n){const s=e[In];return(s?qs(s):e)[n]}function yk(e,n,s){const i=Vx(n,s);return i?"value"in i?i.value:i.get?.call(e.draft_):void 0}function Vx(e,n){if(!(n in e))return;let s=dr(e);for(;s;){const i=Object.getOwnPropertyDescriptor(s,n);if(i)return i;s=dr(s)}}function th(e){e.modified_||(e.modified_=!0,e.parent_&&th(e.parent_))}function jf(e){e.copy_||(e.copy_=Qf(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var bk=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(n,s,i)=>{if(typeof n=="function"&&typeof s!="function"){const c=s;s=n;const u=this;return function(g=c,...p){return u.produce(g,y=>s.call(this,y,...p))}}typeof s!="function"&&na(6),i!==void 0&&typeof i!="function"&&na(7);let r;if(Hs(n)){const c=g0(this),u=nh(n,void 0);let d=!0;try{r=s(u),d=!1}finally{d?Jf(c):eh(c)}return m0(c,i),p0(r,c)}else if(!n||typeof n!="object"){if(r=s(n),r===void 0&&(r=n),r===Zx&&(r=void 0),this.autoFreeze_&&Ph(r,!0),i){const c=[],u=[];Zs("Patches").generateReplacementPatches_(n,r,c,u),i(c,u)}return r}else na(1,n)},this.produceWithPatches=(n,s)=>{if(typeof n=="function")return(u,...d)=>this.produceWithPatches(u,g=>n(g,...d));let i,r;return[this.produce(n,s,(u,d)=>{i=u,r=d}),i,r]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Hs(e)||na(8),Xi(e)&&(e=xk(e));const n=g0(this),s=nh(e,void 0);return s[In].isManual_=!0,eh(n),s}finishDraft(e,n){const s=e&&e[In];(!s||!s.isManual_)&&na(9);const{scope_:i}=s;return m0(i,n),p0(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let s;for(s=n.length-1;s>=0;s--){const r=n[s];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}s>-1&&(n=n.slice(s+1));const i=Zs("Patches").applyPatches_;return Xi(e)?i(e,n):this.produce(e,r=>i(r,n))}};function nh(e,n){const s=vr(e)?Zs("MapSet").proxyMap_(e,n):Bc(e)?Zs("MapSet").proxySet_(e,n):vk(e,n);return(n?n.scope_:Gx()).drafts_.push(s),s}function xk(e){return Xi(e)||na(10,e),Kx(e)}function Kx(e){if(!Hs(e)||Lc(e))return e;const n=e[In];let s,i=!0;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,s=Qf(e,n.scope_.immer_.useStrictShallowCopy_),i=n.scope_.immer_.shouldUseStrictIteration()}else s=Qf(e,!0);return pc(s,(r,c)=>{Yx(s,r,Kx(c))},i),n&&(n.finalized_=!1),s}var Sk=new bk,wk=Sk.produce;const _k=e=>(n,s,i)=>(i.setState=(r,c,...u)=>{const d=typeof r=="function"?wk(r):r;return n(d,c,...u)},e(i.setState,s,i)),Ek=_k,tc={itemId:null,slot:null};function Wx(){return Object.fromEntries(tt.map(e=>[e,null]))}function Xx(){return Object.fromEntries(vs.map(e=>[e,[]]))}function Tk(){return Object.fromEntries(tt.map(e=>[e,!1]))}function y0(){return{slots:Wx(),craftedSlots:{},binsByCategory:Xx(),locks:Tk(),level:106,characterClass:null,selectedSlot:"weapon",comparePreview:{...tc},legacyHash:null}}function ah(e){return{slots:{...e.slots},craftedSlots:{...e.craftedSlots},binsByCategory:Object.fromEntries(vs.map(n=>[n,[...e.binsByCategory[n]]])),locks:{...e.locks},level:e.level,characterClass:e.characterClass,selectedSlot:e.selectedSlot,comparePreview:{...e.comparePreview},legacyHash:e.legacyHash}}function gn(e){e.undoStack.push(ah(e)),e.undoStack.length>100&&e.undoStack.shift(),e.redoStack=[]}function Cf(e,n){e.slots={...n.slots},e.craftedSlots={...n.craftedSlots},e.binsByCategory=Object.fromEntries(vs.map(s=>[s,[...n.binsByCategory[s]]])),e.locks={...n.locks},e.level=n.level,e.characterClass=n.characterClass,e.selectedSlot=n.selectedSlot,e.comparePreview={...n.comparePreview},e.legacyHash=n.legacyHash}function Df(e,n){e.includes(n)||e.unshift(n)}const Yo=uk()(Ek((e,n)=>({...y0(),undoStack:[],redoStack:[],setLevel(s){e(i=>{gn(i),i.level=Math.min(106,Math.max(1,Math.round(s)))})},setCharacterClass(s){e(i=>{gn(i),i.characterClass=s})},setSelectedSlot(s){e(i=>{i.selectedSlot=s})},setComparePreview(s){e(i=>{if(!s){i.comparePreview={...tc};return}i.comparePreview={itemId:s.itemId??i.comparePreview.itemId,slot:s.slot??i.comparePreview.slot}})},pinItem(s,i){e(r=>{gn(r),Df(r.binsByCategory[s],i)})},removePinnedItem(s,i){e(r=>{gn(r),r.binsByCategory[s]=r.binsByCategory[s].filter(c=>c!==i)})},clearCategory(s){e(i=>{gn(i),i.binsByCategory[s]=[]})},clearAll(){e(s=>{gn(s),s.slots=Wx(),s.craftedSlots={},s.binsByCategory=Xx(),s.comparePreview={...tc},s.legacyHash=null})},equipItem(s,i){e(r=>{gn(r),r.slots[s]=i,delete r.craftedSlots[s],r.selectedSlot=s})},moveSlotToBin(s){e(i=>{const r=i.slots[s];if(r==null)return;gn(i);const c=fa(s);Df(i.binsByCategory[c],r),i.slots[s]=null})},swapSlots(s,i){e(r=>{gn(r);const c=r.slots[s];r.slots[s]=r.slots[i],r.slots[i]=c})},assignDraggedItemToSlot({targetSlot:s,source:i,itemId:r,sourceCategory:c,sourceSlot:u}){e(d=>{gn(d);const g=d.slots[s];d.slots[s]=r,delete d.craftedSlots[s],d.selectedSlot=s,i==="bin"&&c&&(d.binsByCategory[c]=d.binsByCategory[c].filter(p=>p!==r)),i==="slot"&&u&&u!==s&&(d.slots[u]=g??null)})},assignDraggedItemToBin({targetCategory:s,source:i,itemId:r,sourceCategory:c,sourceSlot:u}){e(d=>{gn(d),i==="bin"&&c&&(d.binsByCategory[c]=d.binsByCategory[c].filter(g=>g!==r)),i==="slot"&&u&&(d.slots[u]=null),Df(d.binsByCategory[s],r)})},toggleLock(s){e(i=>{gn(i),i.locks[s]=!i.locks[s]})},equipCraftedItem(s,i){e(r=>{gn(r),r.slots[s]=null,r.craftedSlots[s]=i,r.selectedSlot=s})},clearCraftedSlot(s){e(i=>{gn(i),delete i.craftedSlots[s]})},undo(){const s=n(),i=s.undoStack[s.undoStack.length-1];i&&e(r=>{const c=ah(r);r.undoStack.pop(),r.redoStack.push(c),Cf(r,i)})},redo(){const s=n(),i=s.redoStack[s.redoStack.length-1];i&&e(r=>{const c=ah(r);r.redoStack.pop(),r.undoStack.push(c),Cf(r,i)})},hydrateSnapshot(s){e(i=>{const r=y0(),c={...r,...s,slots:{...r.slots,...s.slots??{}},craftedSlots:{...r.craftedSlots,...s.craftedSlots??{}},locks:{...r.locks,...s.locks??{}},binsByCategory:{...r.binsByCategory,...s.binsByCategory??{}},comparePreview:{...r.comparePreview,...s.comparePreview??{}}};Cf(i,c),i.undoStack=[],i.redoStack=[]})},loadCandidate(s){e(i=>{gn(i),i.slots={...s},i.comparePreview={...tc}})},setLegacyHash(s){e(i=>{i.legacyHash=s})}})));var Rf={exports:{}},b0;function Mk(){return b0||(b0=1,(function(e){var n=(function(){var s=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",c={};function u(g,p){if(!c[g]){c[g]={};for(var y=0;y<g.length;y++)c[g][g.charAt(y)]=y}return c[g][p]}var d={compressToBase64:function(g){if(g==null)return"";var p=d._compress(g,6,function(y){return i.charAt(y)});switch(p.length%4){default:case 0:return p;case 1:return p+"===";case 2:return p+"==";case 3:return p+"="}},decompressFromBase64:function(g){return g==null?"":g==""?null:d._decompress(g.length,32,function(p){return u(i,g.charAt(p))})},compressToUTF16:function(g){return g==null?"":d._compress(g,15,function(p){return s(p+32)})+" "},decompressFromUTF16:function(g){return g==null?"":g==""?null:d._decompress(g.length,16384,function(p){return g.charCodeAt(p)-32})},compressToUint8Array:function(g){for(var p=d.compress(g),y=new Uint8Array(p.length*2),v=0,b=p.length;v<b;v++){var S=p.charCodeAt(v);y[v*2]=S>>>8,y[v*2+1]=S%256}return y},decompressFromUint8Array:function(g){if(g==null)return d.decompress(g);for(var p=new Array(g.length/2),y=0,v=p.length;y<v;y++)p[y]=g[y*2]*256+g[y*2+1];var b=[];return p.forEach(function(S){b.push(s(S))}),d.decompress(b.join(""))},compressToEncodedURIComponent:function(g){return g==null?"":d._compress(g,6,function(p){return r.charAt(p)})},decompressFromEncodedURIComponent:function(g){return g==null?"":g==""?null:(g=g.replace(/ /g,"+"),d._decompress(g.length,32,function(p){return u(r,g.charAt(p))}))},compress:function(g){return d._compress(g,16,function(p){return s(p)})},_compress:function(g,p,y){if(g==null)return"";var v,b,S={},T={},E="",C="",O="",R=2,I=3,B=2,q=[],N=0,j=0,D;for(D=0;D<g.length;D+=1)if(E=g.charAt(D),Object.prototype.hasOwnProperty.call(S,E)||(S[E]=I++,T[E]=!0),C=O+E,Object.prototype.hasOwnProperty.call(S,C))O=C;else{if(Object.prototype.hasOwnProperty.call(T,O)){if(O.charCodeAt(0)<256){for(v=0;v<B;v++)N=N<<1,j==p-1?(j=0,q.push(y(N)),N=0):j++;for(b=O.charCodeAt(0),v=0;v<8;v++)N=N<<1|b&1,j==p-1?(j=0,q.push(y(N)),N=0):j++,b=b>>1}else{for(b=1,v=0;v<B;v++)N=N<<1|b,j==p-1?(j=0,q.push(y(N)),N=0):j++,b=0;for(b=O.charCodeAt(0),v=0;v<16;v++)N=N<<1|b&1,j==p-1?(j=0,q.push(y(N)),N=0):j++,b=b>>1}R--,R==0&&(R=Math.pow(2,B),B++),delete T[O]}else for(b=S[O],v=0;v<B;v++)N=N<<1|b&1,j==p-1?(j=0,q.push(y(N)),N=0):j++,b=b>>1;R--,R==0&&(R=Math.pow(2,B),B++),S[C]=I++,O=String(E)}if(O!==""){if(Object.prototype.hasOwnProperty.call(T,O)){if(O.charCodeAt(0)<256){for(v=0;v<B;v++)N=N<<1,j==p-1?(j=0,q.push(y(N)),N=0):j++;for(b=O.charCodeAt(0),v=0;v<8;v++)N=N<<1|b&1,j==p-1?(j=0,q.push(y(N)),N=0):j++,b=b>>1}else{for(b=1,v=0;v<B;v++)N=N<<1|b,j==p-1?(j=0,q.push(y(N)),N=0):j++,b=0;for(b=O.charCodeAt(0),v=0;v<16;v++)N=N<<1|b&1,j==p-1?(j=0,q.push(y(N)),N=0):j++,b=b>>1}R--,R==0&&(R=Math.pow(2,B),B++),delete T[O]}else for(b=S[O],v=0;v<B;v++)N=N<<1|b&1,j==p-1?(j=0,q.push(y(N)),N=0):j++,b=b>>1;R--,R==0&&(R=Math.pow(2,B),B++)}for(b=2,v=0;v<B;v++)N=N<<1|b&1,j==p-1?(j=0,q.push(y(N)),N=0):j++,b=b>>1;for(;;)if(N=N<<1,j==p-1){q.push(y(N));break}else j++;return q.join("")},decompress:function(g){return g==null?"":g==""?null:d._decompress(g.length,32768,function(p){return g.charCodeAt(p)})},_decompress:function(g,p,y){var v=[],b=4,S=4,T=3,E="",C=[],O,R,I,B,q,N,j,D={val:y(0),position:p,index:1};for(O=0;O<3;O+=1)v[O]=O;for(I=0,q=Math.pow(2,2),N=1;N!=q;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=y(D.index++)),I|=(B>0?1:0)*N,N<<=1;switch(I){case 0:for(I=0,q=Math.pow(2,8),N=1;N!=q;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=y(D.index++)),I|=(B>0?1:0)*N,N<<=1;j=s(I);break;case 1:for(I=0,q=Math.pow(2,16),N=1;N!=q;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=y(D.index++)),I|=(B>0?1:0)*N,N<<=1;j=s(I);break;case 2:return""}for(v[3]=j,R=j,C.push(j);;){if(D.index>g)return"";for(I=0,q=Math.pow(2,T),N=1;N!=q;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=y(D.index++)),I|=(B>0?1:0)*N,N<<=1;switch(j=I){case 0:for(I=0,q=Math.pow(2,8),N=1;N!=q;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=y(D.index++)),I|=(B>0?1:0)*N,N<<=1;v[S++]=s(I),j=S-1,b--;break;case 1:for(I=0,q=Math.pow(2,16),N=1;N!=q;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=y(D.index++)),I|=(B>0?1:0)*N,N<<=1;v[S++]=s(I),j=S-1,b--;break;case 2:return C.join("")}if(b==0&&(b=Math.pow(2,T),T++),v[j])E=v[j];else if(j===S)E=R+R.charAt(0);else return null;C.push(E),v[S++]=R+E.charAt(0),b--,R=E,b==0&&(b=Math.pow(2,T),T++)}}};return d})();e!=null?e.exports=n:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return n})})(Rf)),Rf.exports}var Nk=Mk();const Qx=fh(Nk),sh={helmet:"h",chestplate:"c",leggings:"l",boots:"b",ring1:"r1",ring2:"r2",bracelet:"br",necklace:"n",weapon:"w"},Go=Object.fromEntries(Object.entries(sh).map(([e,n])=>[n,e])),jk=rr({slots:tr(_n(),ta().int().nullable()).optional(),binsByCategory:tr(_n(),Pn(ta().int())).optional(),locks:tr(_n(),Xl()).optional(),level:ta().int().min(1).max(106).optional(),characterClass:hc(["Warrior","Assassin","Mage","Archer","Shaman"]).nullable().optional(),selectedSlot:_n().nullable().optional(),legacyHash:_n().nullable().optional()}).passthrough(),Ck=rr({version:_n().nullable().optional(),selectedByClass:rr({Warrior:Pn(ta().int()).optional(),Assassin:Pn(ta().int()).optional(),Mage:Pn(ta().int()).optional(),Archer:Pn(ta().int()).optional(),Shaman:Pn(ta().int()).optional()}).partial().default({})});function Dk(e){const n=e.replace(/-/g,"+").replace(/_/g,"/").padEnd(Math.ceil(e.length/4)*4,"="),s=atob(n),i=Uint8Array.from(s,r=>r.charCodeAt(0));return new TextDecoder().decode(i)}function Jx(e){const n=Qx.decompressFromEncodedURIComponent(e);if(n!=null&&n!=="")return n;try{return Dk(e)}catch{return null}}function eS(e){return Qx.compressToEncodedURIComponent(e)}function x0(e){try{return JSON.parse(e)}catch{return null}}function tS(e){const n=e.searchParams.get("q")??"",s=e.searchParams.get("sort"),i=s?s.split(",").map(O=>O.trim()).filter(Boolean):[],r=e.searchParams.get("sdesc"),c=e.searchParams.get("view"),u=e.searchParams.get("wearLevel"),d=e.searchParams.get("classCompat"),g=e.searchParams.get("excludeRestricted"),p=(e.searchParams.get("cats")??"").split(",").map(O=>O.trim()).filter(Boolean),y=(e.searchParams.get("types")??"").split(",").map(O=>O.trim()).filter(Boolean),v=(e.searchParams.get("tiers")??"").split(",").map(O=>O.trim()).filter(Boolean),b=(e.searchParams.get("classReqs")??"").split(",").map(O=>O.trim()).filter(Boolean),S=(e.searchParams.get("majorIds")??"").split(",").map(O=>O.trim()).filter(Boolean),T=x0(e.searchParams.get("ranges")??"")??{},E=x0(e.searchParams.get("excludeRanges")??"")??{},C=e.searchParams.get("resultsBelow");return Gb({...Oa,text:n,sortKeys:i.length>0?i:Oa.sortKeys,sortDescending:r===null?Oa.sortDescending:r!=="0",viewMode:c??Oa.viewMode,onlyWearableAtLevel:u?Number(u):Oa.onlyWearableAtLevel,onlyClassCompatible:d==="1",excludeRestricted:g===null?!1:g!=="0",categories:p,types:y,tiers:v,classReqs:b,majorIds:S,numericRanges:T,exclusionRanges:E,resultsBelowBuild:C===null?Oa.resultsBelowBuild:C==="1"})}function Rk(e){const n=e.s??e.slots,s=e.k??e.locks,i=e.l??e.level,r=e.c??e.characterClass,c=e.h??e.legacyHash;let u=e.selectedSlot;typeof u=="string"&&Go[u]&&(u=Go[u]);const d=e.binsByCategory;if(n&&typeof n=="object"){const g={};for(const[p,y]of Object.entries(n)){const v=Go[p]??p;g[v]=typeof y=="number"||y===null?y:null}e={...e,slots:g}}if(s&&typeof s=="object"){const g={};for(const[p,y]of Object.entries(s)){const v=Go[p]??p;g[v]=!!y}e={...e,locks:g}}return i!==void 0&&(e={...e,level:i}),r!==void 0&&(e={...e,characterClass:r}),c!==void 0&&(e={...e,legacyHash:c}),u!==void 0&&(e={...e,selectedSlot:u}),d!==void 0&&(e={...e,binsByCategory:d}),e}function nS(e){const n=e.searchParams.get("wb");if(!n)return null;try{const s=Jx(n);if(!s)return null;const i=JSON.parse(s),r=Rk(i),c=jk.parse(r),u=Object.fromEntries(tt.map(p=>[p,c.slots?.[p]??null])),d=Object.fromEntries(vs.map(p=>[p,c.binsByCategory?.[p]??[]])),g=Object.fromEntries(tt.map(p=>[p,!!c.locks?.[p]]));return{slots:u,binsByCategory:d,locks:g,level:c.level,characterClass:c.characterClass??null,selectedSlot:c.selectedSlot??void 0,legacyHash:c.legacyHash??null}}catch{return null}}function aS(e){const n=e.searchParams.get("atree");if(!n)return null;try{const s=Jx(n);if(!s)return null;const i=JSON.parse(s),r=Ck.parse({version:i.v??i.version,selectedByClass:i.s??i.selectedByClass});return{version:r.version??null,selectedByClass:r.selectedByClass}}catch{return null}}function kk(e=window.location){const n=new URL(e.href),s=n.hash?n.hash.slice(1):null;return{search:tS(n),workbenchPatch:nS(n),legacyHash:s||null,mode:n.searchParams.get("mode"),abilityTree:aS(n)}}function sS(e){const n={};for(const[r,c]of Object.entries(e.slots)){const u=sh[r]??r;n[u]=c}const s={};for(const[r,c]of Object.entries(e.locks))c&&(s[sh[r]??r]=!0);const i={s:n,k:Object.keys(s).length>0?s:void 0,l:e.level,c:e.characterClass,h:e.legacyHash};return eS(JSON.stringify(i))}function S0(e){const n=new URL(window.location.origin+window.location.pathname),s=n.searchParams;s.set("wb",sS(e.workbenchSnapshot)),e.abilityTreeState&&Object.keys(e.abilityTreeState.selectedByClass??{}).length>0?s.set("atree",eS(JSON.stringify({v:e.abilityTreeState.version??null,s:e.abilityTreeState.selectedByClass}))):s.delete("atree"),e.mode?s.set("mode",e.mode):s.delete("mode");const i=e.legacyHash??e.workbenchSnapshot.legacyHash;n.hash=i?`#${i}`:"",e.replace?window.history.replaceState({},"",n):window.history.pushState({},"",n)}const ua={legacyBaseDps:1,legacyEhp:.7,dpsProxy:1,spellProxy:0,meleeProxy:0,ehpProxy:.6,speed:.4,sustain:.35,skillPointTotal:.15,reqTotalPenalty:.2},Jn={characterClass:null,level:106,mustIncludeIds:[],excludedIds:[],lockedSlots:{},target:{},allowedTiers:[],requiredMajorIds:[],excludedMajorIds:[],weaponAttackSpeeds:[],attackSpeedConstraintMode:"or",skillpointFeasibilityMode:"no_tomes",minPowderSlots:null,onlyPinnedItems:!1,weights:ua,topN:50,topKPerSlot:80,beamWidth:350,maxStates:12e4,useExhaustiveSmallPool:!0,exhaustiveStateLimit:25e4,allowRestricted:!0};function Ak(e){return e.aggregated.hprTotal*.9+e.aggregated.mr*14+e.aggregated.ms*10+e.aggregated.ls*9}function Ok(e,n){let s=0;const{target:i}=n;return typeof i.minLegacyBaseDps=="number"&&e.derived.legacyBaseDps<i.minLegacyBaseDps&&(s+=(i.minLegacyBaseDps-e.derived.legacyBaseDps)*4),typeof i.minLegacyEhp=="number"&&e.derived.legacyEhp<i.minLegacyEhp&&(s+=(i.minLegacyEhp-e.derived.legacyEhp)*.8),typeof i.minDpsProxy=="number"&&e.derived.dpsProxy<i.minDpsProxy&&(s+=(i.minDpsProxy-e.derived.dpsProxy)*4),typeof i.minEhpProxy=="number"&&e.derived.ehpProxy<i.minEhpProxy&&(s+=(i.minEhpProxy-e.derived.ehpProxy)*1.1),typeof i.minMr=="number"&&e.aggregated.mr<i.minMr&&(s+=(i.minMr-e.aggregated.mr)*45),typeof i.minMs=="number"&&e.aggregated.ms<i.minMs&&(s+=(i.minMs-e.aggregated.ms)*35),typeof i.minSpeed=="number"&&e.aggregated.speed<i.minSpeed&&(s+=(i.minSpeed-e.aggregated.speed)*12),typeof i.minSkillPointTotal=="number"&&e.derived.skillPointTotal<i.minSkillPointTotal&&(s+=(i.minSkillPointTotal-e.derived.skillPointTotal)*15),typeof i.maxReqTotal=="number"&&e.derived.reqTotal>i.maxReqTotal&&(s+=(e.derived.reqTotal-i.maxReqTotal)*8),s}function Bh(e,n,s){const i=Ak(e),r=e.derived.reqTotal*n.reqTotalPenalty,c=Ok(e,s),u={legacyBaseDps:e.derived.legacyBaseDps*n.legacyBaseDps,legacyEhp:e.derived.legacyEhp*n.legacyEhp,dpsProxy:e.derived.dpsProxy*n.dpsProxy,spellProxy:e.derived.spellProxy*n.spellProxy,meleeProxy:e.derived.meleeProxy*n.meleeProxy,ehpProxy:e.derived.ehpProxy*n.ehpProxy,speed:e.aggregated.speed*n.speed,sustain:i*n.sustain,skillPointTotal:e.derived.skillPointTotal*n.skillPointTotal,reqPenalty:r,thresholdPenalty:c};return{score:u.legacyBaseDps+u.legacyEhp+u.dpsProxy+u.spellProxy+u.meleeProxy+u.ehpProxy+u.speed+u.sustain+u.skillPointTotal-u.reqPenalty-u.thresholdPenalty,breakdown:u}}function zk(e,n){const s=new Map;for(const i of tt){const r=e[i];if(r==null)continue;const c=n.itemSetName.get(r);c&&s.set(c,(s.get(c)??0)+1)}return s}function qc(e,n,s){const i=s.itemSetName.get(e);if(!i)return!1;const r=s.setsMeta.get(i);if(!r)return!1;let c=0;for(const u of tt){const d=n[u];d!=null&&s.itemSetName.get(d)===i&&c++}return r.illegalCounts.includes(c+1)}const Pk=[0,0,0,0,0],Ik=[1,1,1,1,1],w0=["str","dex","int","def","agi"],Ia=["SUPER_SLOW","VERY_SLOW","SLOW","NORMAL","FAST","VERY_FAST","SUPER_FAST"];function Uc(e){return e.skillpointFeasibilityMode==="guild_rainbow"?Ik:Pk}function Ba(e){return Math.round(e.numeric.atkTier||0)}function Lh(e,n){switch(n){case"str":return Math.max(0,e.numeric.spStr);case"dex":return Math.max(0,e.numeric.spDex);case"int":return Math.max(0,e.numeric.spInt);case"def":return Math.max(0,e.numeric.spDef);case"agi":return Math.max(0,e.numeric.spAgi)}}function Bk(e,n){switch(n){case"str":return e.numeric.reqStr;case"dex":return e.numeric.reqDex;case"int":return e.numeric.reqInt;case"def":return e.numeric.reqDef;case"agi":return e.numeric.reqAgi}}function Lk(e,n){if(n.length===0)return 0;let s=0;for(const i of n)s+=Lh(e,i)*10,s-=Math.max(0,Bk(e,i))*.7;return s-=Math.max(0,e.roughScoreFields.reqTotal)*.12,s}function aa(e){return{...e}}function qk(e,n){const s=e.weapon;if(s==null)return null;const i=n.itemsById.get(s);if(!i)return null;const r=Ia.indexOf(i.atkSpd);if(r<0)return null;let c=0;for(const d of tt){const g=e[d];if(g==null)continue;const p=n.itemsById.get(g);p&&(c+=Ba(p))}const u=Math.max(0,Math.min(Ia.length-1,r+c));return Ia[u]}function qh(e,n){let s=0;for(const i of tt){const r=e[i];if(r==null)continue;const c=n.itemsById.get(r);c&&(s+=Ba(c))}return s}function Uk(e,n,s){if(s.weaponAttackSpeeds.length===0)return null;const i=e.weapon;if(i==null)return null;const r=n.itemsById.get(i);if(!r)return null;const c=Ia.indexOf(r.atkSpd);if(c<0)return null;const u=[...new Set(s.weaponAttackSpeeds.map(y=>Ia.indexOf(y)).filter(y=>y>=0))].sort((y,v)=>y-v);if(u.length===0)return null;const d=qh(e,n),g=Math.max(0,Math.min(Ia.length-1,c+d));let p=0;if(!u.includes(g)){const y=u.reduce((v,b)=>Math.abs(b-g)<Math.abs(v-g)?b:v,u[0]);p=y>g?1:y<g?-1:0}return{baseSpeedIndex:c,fixedAtkTierTotal:d,allowedFinalIndices:u,allowedFinalIndexSet:new Set(u),preferredDirection:p}}function bc(e,n,s){const i=new Array(e.length+1).fill(0),r=new Array(e.length+1).fill(0);for(let c=e.length-1;c>=0;c--){const u=n.get(e[c])??[];let d=0,g=0;if(u.length>0){d=1/0,g=-1/0;for(const p of u){const y=s.itemsById.get(p.id),v=y?Ba(y):0;v<d&&(d=v),v>g&&(g=v)}Number.isFinite(d)||(d=0),Number.isFinite(g)||(g=0)}i[c]=i[c+1]+d,r[c]=r[c+1]+g}return{minSuffix:i,maxSuffix:r}}function $k(e,n,s,i){const r=e.fixedAtkTierTotal+n+s,c=e.fixedAtkTierTotal+n+i,u=Math.min(r,c),d=Math.max(r,c);for(let g=u;g<=d;g++){const p=Math.max(0,Math.min(Ia.length-1,e.baseSpeedIndex+g));if(e.allowedFinalIndexSet.has(p))return!0}return!1}function hs(e,n,s=0,i=0){if(!e||!e.preferredDirection)return 0;const r=e.fixedAtkTierTotal+(n??0),c=Math.max(0,Math.min(Ia.length-1,e.baseSpeedIndex+r+s)),u=Math.max(0,Math.min(Ia.length-1,e.baseSpeedIndex+r+i)),d=Math.min(c,u),g=Math.max(c,u);let p=1/0,y=0;for(let b=d;b<=g;b++){let S=1/0;for(const T of e.allowedFinalIndices){const E=Math.abs(T-b);E<S&&(S=E)}S<p&&(p=S),S>y&&(y=S)}if(!Number.isFinite(p)||y===0)return 0;const v=e.preferredDirection>0?d:-g;return-y*1e3-p*100+v}function Hk(e,n,s,i){const{target:r}=n,c=$c(n,{includeAttackTier:!1}),u=[];if(typeof r.minLegacyBaseDps=="number"&&e.derived.legacyBaseDps<r.minLegacyBaseDps&&u.push(`minLegacyBaseDps (${e.derived.legacyBaseDps} < ${r.minLegacyBaseDps})`),typeof r.minLegacyEhp=="number"&&e.derived.legacyEhp<r.minLegacyEhp&&u.push(`minLegacyEhp (${e.derived.legacyEhp} < ${r.minLegacyEhp})`),typeof r.minDpsProxy=="number"&&e.derived.dpsProxy<r.minDpsProxy&&u.push(`minDpsProxy (${e.derived.dpsProxy} < ${r.minDpsProxy})`),typeof r.minEhpProxy=="number"&&e.derived.ehpProxy<r.minEhpProxy&&u.push(`minEhpProxy (${e.derived.ehpProxy} < ${r.minEhpProxy})`),typeof r.minMr=="number"&&e.aggregated.mr<r.minMr&&u.push(`minMr (${e.aggregated.mr} < ${r.minMr})`),typeof r.minMs=="number"&&e.aggregated.ms<r.minMs&&u.push(`minMs (${e.aggregated.ms} < ${r.minMs})`),typeof r.minSpeed=="number"&&e.aggregated.speed<r.minSpeed&&u.push(`minSpeed (${e.aggregated.speed} < ${r.minSpeed})`),typeof r.minSkillPointTotal=="number"&&e.derived.skillPointTotal<r.minSkillPointTotal&&u.push(`minSkillPointTotal (${e.derived.skillPointTotal} < ${r.minSkillPointTotal})`),typeof r.maxReqTotal=="number"&&e.derived.reqTotal>r.maxReqTotal&&u.push(`maxReqTotal (${e.derived.reqTotal} > ${r.maxReqTotal})`),c.length>0&&s&&i)for(const d of c){const g=d.key;let p=0;for(const y of tt){const v=s[y];if(v==null)continue;const b=i.itemsById.get(v);b&&(p+=b.numericIndex[g]??0)}typeof d.min=="number"&&p<d.min&&u.push(`${g} (${p} < ${d.min})`),typeof d.max=="number"&&p>d.max&&u.push(`${g} (${p} > ${d.max})`)}return u.length>0?{ok:!1,failedChecks:u}:{ok:!0}}function Uh(e,n,s,i){const r=[...new Set(s.mustIncludeIds)];for(const g of r){let p=!1;for(const y of tt)if(e[y]===g){p=!0;break}if(!p)return{ok:!1,reason:"item",failedChecks:[`mustIncludeMissing (${g})`]}}for(const g of tt){const p=e[g];if(p==null)continue;const y=n.itemsById.get(p);if(!y)return{ok:!1,reason:"item"};if(!$h(y,s))return{ok:!1,reason:"item"}}const c=zk(e,n);for(const[g,p]of c){const y=n.setsMeta.get(g);if(y&&y.illegalCounts.includes(p))return{ok:!1,reason:"item"}}const u=eA({constraints:s,slots:e,catalog:n,atkTierRequirement:oS(rS(s))});if(u.configured&&!u.ok)return{ok:!1,reason:"attackSpeed",failedChecks:u.failedChecks};const d=Hk(i,s,e,n);return d.ok?{ok:!0}:{ok:!1,reason:"thresholds",failedChecks:d.failedChecks}}function $h(e,n){return!(!n.allowRestricted&&(e.restricted||e.deprecated)||e.level>n.level||!pb(e,n.characterClass)||n.excludedIds.includes(e.id)||n.allowedTiers.length>0&&!n.allowedTiers.includes(e.tier)||n.minPowderSlots!=null&&e.powderSlots<n.minPowderSlots||n.excludedMajorIds.length>0&&n.excludedMajorIds.some(s=>e.majorIds.includes(s)))}const Aa=2.5;function ih(e,n){const s={...n};return typeof e.minLegacyBaseDps=="number"&&(s.legacyBaseDps=Math.max(s.legacyBaseDps,ua.legacyBaseDps*Aa)),typeof e.minLegacyEhp=="number"&&(s.legacyEhp=Math.max(s.legacyEhp,ua.legacyEhp*Aa)),typeof e.minDpsProxy=="number"&&(s.dpsProxy=Math.max(s.dpsProxy,ua.dpsProxy*Aa)),typeof e.minEhpProxy=="number"&&(s.ehpProxy=Math.max(s.ehpProxy,ua.ehpProxy*Aa)),(typeof e.minMr=="number"||typeof e.minMs=="number")&&(s.sustain=Math.max(s.sustain,ua.sustain*Aa)),typeof e.minSpeed=="number"&&(s.speed=Math.max(s.speed,ua.speed*Aa)),typeof e.minSkillPointTotal=="number"&&(s.skillPointTotal=Math.max(s.skillPointTotal,ua.skillPointTotal*Aa)),typeof e.maxReqTotal=="number"&&(s.reqTotalPenalty=Math.max(s.reqTotalPenalty,ua.reqTotalPenalty*Aa)),(e.customNumericRanges?.length??0)>0&&(s.sustain=Math.max(s.sustain,ua.sustain*Aa)),s}const Zk=3,Fk=2,Yk=14;function Gk(e,n){let s=e.numeric.baseDps*n.weights.legacyBaseDps+e.roughScoreFields.ehpProxy*n.weights.legacyEhp+e.roughScoreFields.offense*n.weights.dpsProxy+e.roughScoreFields.ehpProxy*n.weights.ehpProxy+e.numeric.spd*n.weights.speed+e.roughScoreFields.utility*n.weights.sustain+e.roughScoreFields.skillPointTotal*n.weights.skillPointTotal-e.roughScoreFields.reqTotal*n.weights.reqTotalPenalty;const i=n.target.customNumericRanges??[],c=i.some(u=>typeof u.min=="number")?Yk:Zk;for(const u of i){const d=u.key?.trim();if(!d)continue;const g=e.numericIndex[d]??0;typeof u.min=="number"&&(s+=g*c),typeof u.max=="number"&&(s-=g*Fk)}return s}function Ki(e){const n=e.ring1??0,s=e.ring2??0,[i,r]=n<=s?[n,s]:[s,n];return[e.helmet??0,e.chestplate??0,e.leggings??0,e.boots??0,i,r,e.bracelet??0,e.necklace??0,e.weapon??0].join("|")}function iS(e,n,s,i=.6){const r=Math.max(1,s),c=[],u=new Set,d=Math.max(1,Math.min(r,Math.round(r*i)));let g=0,p=0;const y=v=>{const b=`${v.orderIndex}|${Ki(v.slots)}`;return u.has(b)?!1:(u.add(b),c.push(v),!0)};for(;c.length<r&&(g<e.length||p<n.length);){if(c.length<d&&g<e.length){y(e[g]),g++;continue}if(p<n.length){y(n[p]),p++;continue}if(g<e.length){y(e[g]),g++;continue}break}return c}function lS(e,n){return fa(n)===e.category}function Vk(e,n,s){const i=aa(e),r=[...new Set(s.mustIncludeIds)];for(const c of r){const u=n.itemsById.get(c);if(!u)return{slots:i,ok:!1,reasonCode:"must_include_conflict",detail:`Must-include item ${c} does not exist in catalog.`};if(!$h(u,s))return{slots:i,ok:!1,reasonCode:"must_include_conflict",detail:`Must-include item ${u.displayName} is incompatible with current hard filters (class/level/tier/exclusions).`};if(tt.some(y=>i[y]===u.id))continue;const p=tt.filter(y=>i[y]==null&&lS(u,y))[0];if(!p)return{slots:i,ok:!1,reasonCode:"must_include_conflict",detail:`No free ${u.category} slot available to place must-include item ${u.displayName}.`};i[p]=u.id}return{slots:i,ok:!0}}function Kk(e,n){const s={str:0,dex:0,int:0,def:0,agi:0};for(const r of tt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);u&&(s.str=Math.max(s.str,u.numeric.reqStr),s.dex=Math.max(s.dex,u.numeric.reqDex),s.int=Math.max(s.int,u.numeric.reqInt),s.def=Math.max(s.def,u.numeric.reqDef),s.agi=Math.max(s.agi,u.numeric.reqAgi))}const i=w0.filter(r=>s[r]>100).sort((r,c)=>s[c]-s[r]);return i.length>0?i:w0.filter(r=>s[r]>=70).sort((r,c)=>s[c]-s[r]).slice(0,2)}function Wk(e,n,s){if(s.length===0)return[];const i={str:0,dex:0,int:0,def:0,agi:0};for(const r of tt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);u&&(i.str=Math.max(i.str,u.numeric.reqStr),i.dex=Math.max(i.dex,u.numeric.reqDex),i.int=Math.max(i.int,u.numeric.reqInt),i.def=Math.max(i.def,u.numeric.reqDef),i.agi=Math.max(i.agi,u.numeric.reqAgi))}return s.map(r=>Math.max(0,i[r]-100))}function _0(e,n){return n.map(s=>Lh(e,s))}function nr(e,n){if(e.length===0)return n.slice();const s=new Array(e.length);for(let i=0;i<e.length;i++)s[i]=(e[i]??0)+(n[i]??0);return s}function Xk(e,n,s){for(let i=0;i<s.length;i++)if((e[i]??0)+(n[i]??0)<s[i])return!1;return!0}function E0(e,n){let s=0;for(let i=0;i<n.length;i++)s+=Math.max(0,n[i]-(e[i]??0));return s}function xc(e,n){if(!e||n.length===0)return 0;let s=0;for(let i=0;i<n.length;i++){const r=e[i]??0,c=n[i];typeof c.min=="number"&&r<c.min&&(s+=c.min-r),typeof c.max=="number"&&r>c.max&&(s+=r-c.max)}return s}function T0(e,n,s,i){if(i.length===0)return 0;const r=n.get(e)??[];let c=0;for(const u of r){const d=s.itemsById.get(u.id);if(!d)continue;let g=0;for(const p of i)g+=Lh(d,p);g>c&&(c=g)}return c}function $c(e,n={}){const s=n.includeAttackTier??!0;return(e.target.customNumericRanges??[]).map(i=>({key:(i.key??"").trim(),min:typeof i.min=="number"?i.min:void 0,max:typeof i.max=="number"?i.max:void 0})).filter(i=>i.key&&(typeof i.min=="number"||typeof i.max=="number")).filter(i=>s||i.key!=="atkTier")}function rS(e){return $c(e,{includeAttackTier:!0}).filter(n=>n.key==="atkTier")}function lh(e){const n=e.attackSpeedConstraintMode==="or"&&e.weaponAttackSpeeds.length>0;return $c(e,{includeAttackTier:!n})}function oS(e){if(e.length===0)return{hasConstraint:!1,minAllowed:Number.NEGATIVE_INFINITY,maxAllowed:Number.POSITIVE_INFINITY,rows:[]};let n=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;for(const i of e)typeof i.min=="number"&&(n=Math.max(n,i.min)),typeof i.max=="number"&&(s=Math.min(s,i.max));return{hasConstraint:!0,minAllowed:n,maxAllowed:s,rows:e}}function Qk(e,n){return n.hasConstraint?e>=n.minAllowed&&e<=n.maxAllowed:!1}function Jk(e,n,s,i,r){if(!e.hasConstraint)return!1;const c=n+s+Math.min(i,r),u=n+s+Math.max(i,r);return c<=e.maxAllowed&&u>=e.minAllowed}function eA(e){const{constraints:n,slots:s,catalog:i,atkTierRequirement:r}=e,c=n.weaponAttackSpeeds.length>0,u=r.hasConstraint;if(!c&&!u)return{configured:!1,ok:!0};const d=[];let g=!1;if(c){const b=qk(s,i);g=!!(b&&n.weaponAttackSpeeds.includes(b)),g||d.push(`attackSpeed (expected ${n.weaponAttackSpeeds.join("/")} )`)}let p=!1;if(u){const b=qh(s,i);if(p=Qk(b,r),!p){const S=Number.isFinite(r.minAllowed)?r.minAllowed:"-inf",T=Number.isFinite(r.maxAllowed)?r.maxAllowed:"+inf";d.push(`atkTier (${b} not in [${S}, ${T}])`)}}const y=n.attackSpeedConstraintMode;return(c&&u?y==="and"?g&&p:g||p:c?g:p)?{configured:!0,ok:!0}:{configured:!0,ok:!1,failedChecks:d}}function Sc(e){const{constraints:n,attackSpeedCtx:s,atkTierRequirement:i,fixedAtkTierTotal:r,partialAssignedAtkTier:c,remainingMinAtkTier:u,remainingMaxAtkTier:d}=e,g=n.weaponAttackSpeeds.length>0,p=i.hasConstraint;if(!g&&!p)return!0;const y=g?s?$k(s,c,u,d):!0:!1,v=p?Jk(i,r,c,u,d):!1;return g&&p?n.attackSpeedConstraintMode==="and"?y&&v:y||v:g?y:v}function Vo(e,n,s){const i=n.itemsById.get(e.id);return i?i.numericIndex[s]??0:0}function wc(e,n,s){const i=s.map(()=>0);if(s.length===0)return i;for(const r of tt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);if(u)for(let d=0;d<s.length;d++)i[d]+=u.numericIndex[s[d]]??0}return i}function rh(e){const{slotOrder:n,candidatePools:s,catalog:i,keys:r}=e,c=Array.from({length:n.length+1},()=>r.map(()=>0)),u=Array.from({length:n.length+1},()=>r.map(()=>0));if(r.length===0)return{maxSuffix:c,minSuffix:u};for(let d=n.length-1;d>=0;d--){const g=s.get(n[d])??[],p=r.map(()=>Number.NEGATIVE_INFINITY),y=r.map(()=>Number.POSITIVE_INFINITY);for(const v of g){const b=i.itemsById.get(v.id);if(b)for(let S=0;S<r.length;S++){const T=b.numericIndex[r[S]]??0;T>p[S]&&(p[S]=T),T<y[S]&&(y[S]=T)}}for(let v=0;v<r.length;v++){const b=Number.isFinite(p[v])?p[v]:0,S=Number.isFinite(y[v])?y[v]:0;c[d][v]=c[d+1][v]+b,u[d][v]=u[d+1][v]+S}}return{maxSuffix:c,minSuffix:u}}function tA(e,n,s,i,r=[]){const c=[],u=$c(s);for(const N of n.items)lS(N,e)&&(i&&!i.has(N.id)||$h(N,s)&&c.push({id:N.id,rough:Gk(N,s),reqTotal:N.roughScoreFields.reqTotal,skillPointTotal:N.roughScoreFields.skillPointTotal,utility:N.roughScoreFields.utility+N.numeric.spd*.8,level:N.level,atkTier:Ba(N),spStr:N.numeric.spStr,spDex:N.numeric.spDex,spInt:N.numeric.spInt,spDef:N.numeric.spDef,spAgi:N.numeric.spAgi,supportFocus:Lk(N,r)}));const d=[...c].sort((N,j)=>N.rough!==j.rough?j.rough-N.rough:N.id-j.id),g=[...c].sort((N,j)=>N.reqTotal!==j.reqTotal?N.reqTotal-j.reqTotal:N.level!==j.level?N.level-j.level:N.id-j.id),p=[...c].sort((N,j)=>N.skillPointTotal!==j.skillPointTotal?j.skillPointTotal-N.skillPointTotal:N.reqTotal!==j.reqTotal?N.reqTotal-j.reqTotal:N.id-j.id),y=[...c].sort((N,j)=>N.utility!==j.utility?j.utility-N.utility:N.reqTotal!==j.reqTotal?N.reqTotal-j.reqTotal:N.id-j.id),v=s.weaponAttackSpeeds.length>0?[...c].sort((N,j)=>{const D=Math.max(0,N.atkTier),K=Math.max(0,j.atkTier);return D!==K?K-D:N.atkTier!==j.atkTier?j.atkTier-N.atkTier:N.reqTotal!==j.reqTotal?N.reqTotal-j.reqTotal:N.skillPointTotal!==j.skillPointTotal?j.skillPointTotal-N.skillPointTotal:N.id-j.id}):[],b=r.length>0?[...c].sort((N,j)=>N.supportFocus!==j.supportFocus?j.supportFocus-N.supportFocus:N.reqTotal!==j.reqTotal?N.reqTotal-j.reqTotal:N.skillPointTotal!==j.skillPointTotal?j.skillPointTotal-N.skillPointTotal:N.id-j.id):[],S=r.map(N=>[...c].sort((j,D)=>{const K=N==="str"?j.spStr:N==="dex"?j.spDex:N==="int"?j.spInt:N==="def"?j.spDef:j.spAgi,re=N==="str"?D.spStr:N==="dex"?D.spDex:N==="int"?D.spInt:N==="def"?D.spDef:D.spAgi;return K!==re?re-K:j.reqTotal!==D.reqTotal?j.reqTotal-D.reqTotal:j.supportFocus!==D.supportFocus?D.supportFocus-j.supportFocus:j.id-D.id})),T=u.filter(N=>typeof N.min=="number").map(N=>[...c].sort((j,D)=>{const K=Vo(j,n,N.key),re=Vo(D,n,N.key);return K!==re?re-K:j.reqTotal!==D.reqTotal?j.reqTotal-D.reqTotal:j.skillPointTotal!==D.skillPointTotal?D.skillPointTotal-j.skillPointTotal:j.id-D.id})),E=u.filter(N=>typeof N.max=="number").map(N=>[...c].sort((j,D)=>{const K=Vo(j,n,N.key),re=Vo(D,n,N.key);return K!==re?K-re:j.reqTotal!==D.reqTotal?j.reqTotal-D.reqTotal:j.skillPointTotal!==D.skillPointTotal?D.skillPointTotal-j.skillPointTotal:j.id-D.id})),C=Math.max(10,s.topKPerSlot),O=Math.min(140,Math.max(40,Math.floor(C*.8))),R=Math.min(c.length,C+O+(r.length>0?Math.min(60,r.length*12):0)+Math.min(80,u.length*14)),I=new Map,B=Math.min(12,Math.floor(C*.4),d.length);for(let N=0;N<B;N++){const j=d[N];I.set(j.id,{id:j.id,rough:j.rough})}const q=[{list:d,remaining:Math.max(0,C-B),cursor:0},{list:g,remaining:Math.floor(O*.28),cursor:0},{list:p,remaining:Math.floor(O*.24),cursor:0},{list:y,remaining:Math.floor(O*.18),cursor:0}];v.length>0&&q.push({list:v,remaining:Math.max(18,Math.floor(O*.22)),cursor:0}),b.length>0&&q.push({list:b,remaining:Math.max(16,Math.floor(O*.2)),cursor:0});for(const N of S)q.push({list:N,remaining:10,cursor:0});for(const N of T)q.push({list:N,remaining:35,cursor:0});for(const N of E)q.push({list:N,remaining:20,cursor:0});for(;I.size<R;){let N=!1;for(const j of q)if(!(j.remaining<=0))for(;j.cursor<j.list.length;){const D=j.list[j.cursor++];if(!I.has(D.id)){I.set(D.id,{id:D.id,rough:D.rough}),j.remaining--,N=!0;break}}if(!N)break}if(I.size<R)for(const N of d){if(I.size>=R)break;I.has(N.id)||I.set(N.id,{id:N.id,rough:N.rough})}return[...I.values()]}function nA(e){const n={};for(const s of tt){const i=fa(s),r=new Set(e.binsByCategory[i]??[]),c=e.slots[s];c!=null&&r.add(c),n[s]=r}return n}function Hh(e,n,s){if(s.length===0)return!0;const i=new Set;for(const r of tt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);if(u)for(const d of u.majorIds)s.includes(d)&&i.add(d)}return s.every(r=>i.has(r))}function cS(e,n){const s=new Array(e.length+1).fill(0);for(let i=e.length-1;i>=0;i--){const r=e[i],c=n.get(r)??[];let u=0;for(const d of c)d.rough>u&&(u=d.rough);s[i]=s[i+1]+u}return s}function uS(e){const{poolSize:n,beamSize:s,remainingStages:i,processedStates:r,maxStates:c}=e;if(n<=0)return 0;const u=Math.max(0,c-r),d=Math.max(1,s*Math.max(1,i)),g=Math.floor(u/d),p=Math.max(8,Math.min(96,g));return Math.min(n,p)}function aA(e,n,s){let i=1;for(const r of e){const c=n.get(r)?.length??0;if(c===0)return 0;if(i*=c,i>s)return i}return i}function M0(e){const{beam:n,catalog:s,constraints:i,skillpointAssist:r,signal:c}=e,u=r??Uc(i),d=[],g=new Set,p={majorIds:0,spInvalid:0,duplicate:0,hardConstraints:0,hardAttackSpeed:0,hardThresholds:0,hardItem:0,thresholdFailureExample:void 0};for(const y of n){if(c?.aborted)throw new DOMException("Auto build cancelled","AbortError");if(!Hh(y.slots,s,i.requiredMajorIds)){p.majorIds++;continue}const v=ur({slots:y.slots,level:i.level,characterClass:i.characterClass},s,{skillpointFeasibility:{extraBaseSkillPoints:u}});if(!v.derived.skillpointFeasible){p.spInvalid++;continue}const b=Uh(y.slots,s,i,v);if(!b.ok){p.hardConstraints++,b.reason==="attackSpeed"?p.hardAttackSpeed++:b.reason==="thresholds"?(p.hardThresholds++,p.thresholdFailureExample===void 0&&b.failedChecks?.length&&(p.thresholdFailureExample=b.failedChecks[0])):p.hardItem++;continue}const S=Ki(y.slots);if(g.has(S)){p.duplicate++;continue}const{score:T,breakdown:E}=Bh(v,i.weights,i);g.add(S),d.push({slots:aa(y.slots),score:T,scoreBreakdown:E,summary:v})}return d.sort((y,v)=>{if(y.score!==v.score)return v.score-y.score;for(const b of tt){const S=y.slots[b]??0,T=v.slots[b]??0;if(S!==T)return S-T}return 0}),{candidates:d,rejectStats:p}}function sA(e){const{slotOrder:n,candidatePools:s,baseSlots:i,catalog:r,constraints:c,focusStats:u,attackSpeedCtx:d,atkTierRequirement:g,fixedAtkTierTotal:p,onProgress:y,signal:v}=e,b=Uc(c),S=cS(n,s),T=d||g.hasConstraint?bc(n,s,r):null,E=Wk(i,r,u),C=Array.from({length:n.length+1},()=>u.map(()=>0));for(let D=n.length-1;D>=0;D--){const K=s.get(n[D])??[],re=u.map(()=>0);for(const he of K){const se=r.itemsById.get(he.id);if(!se)continue;const Z=_0(se,u);for(let le=0;le<Z.length;le++)Z[le]>re[le]&&(re[le]=Z[le])}C[D]=nr(C[D+1],re)}const O=lh(c),R=O.map(D=>D.key),I=rh({slotOrder:n,candidatePools:s,catalog:r,keys:R}),B=wc(i,r,R);let q=[{slots:aa(i),orderIndex:0,roughScore:0,optimisticBound:S[0],feasibilityAssigned:0,focusSupport:u.map(()=>0),atkTierAssigned:0,customTotals:B}],N=0,j=!1;for(let D=0;D<n.length;D++){if(v?.aborted)throw new DOMException("Auto build cancelled","AbortError");const K=n[D],re=s.get(K)??[],he=[],se=uS({poolSize:re.length,beamSize:q.length,remainingStages:n.length-D,processedStates:N,maxStates:c.maxStates});se<=0&&(j=!0);for(const Y of q){let ae=0;for(const k of re){if(ae>=se)break;if(N>=c.maxStates){j=!0;break}if(N++,ae++,qc(k.id,Y.slots,r))continue;const G=aa(Y.slots);G[K]=k.id;const M=r.itemsById.get(k.id),z=(Y.atkTierAssigned??0)+(M?Ba(M):0),ee=nr(Y.focusSupport??u.map(()=>0),M?_0(M,u):u.map(()=>0)),oe=R.length>0?nr(Y.customTotals??R.map(()=>0),R.map(ye=>M?M.numericIndex[ye]??0:0)):void 0;if(T&&!Sc({constraints:c,attackSpeedCtx:d??null,atkTierRequirement:g,fixedAtkTierTotal:p,partialAssignedAtkTier:z,remainingMinAtkTier:T.minSuffix[D+1],remainingMaxAtkTier:T.maxSuffix[D+1]})||u.length>0&&!Xk(ee,C[D+1],E))continue;if(O.length>0&&oe){let ye=!0;for(let be=0;be<O.length;be++){const ge=O[be],_e=oe[be];if(typeof ge.min=="number"&&_e+I.maxSuffix[D+1][be]<ge.min){ye=!1;break}if(typeof ge.max=="number"&&_e+I.minSuffix[D+1][be]>ge.max){ye=!1;break}}if(!ye)continue}const ue=Pc(G,r,c.level,{extraBaseSkillPoints:b}),ce=Y.roughScore+k.rough;he.push({slots:G,orderIndex:D+1,roughScore:ce,optimisticBound:ce+S[D+1],feasibilityAssigned:ue.feasible?ue.assignedTotal:1/0,focusSupport:ee,atkTierAssigned:z,customTotals:oe})}if(j)break}if(he.length===0)return y?.({phase:"diagnostics",processedStates:N,beamSize:q.length,totalSlots:n.length,expandedSlots:D,reasonCode:"search_pruned",detail:j?`Feasibility-first search exhausted state budget before completing slot ${K}.`:`Feasibility-first search found no branches that can still satisfy high-skill requirements by slot ${K}.`}),{beam:[],processedStates:N,stateBudgetHit:j};const Z=T?T.minSuffix[D+1]:0,le=T?T.maxSuffix[D+1]:0,Q=[...he].sort((Y,ae)=>{if(d){const M=hs(d,Y.atkTierAssigned,Z,le),z=hs(d,ae.atkTierAssigned,Z,le);if(M!==z)return z-M}if(u.length>0){const M=E0(Y.focusSupport??[],E),z=E0(ae.focusSupport??[],E);if(M!==z)return M-z}const k=Y.feasibilityAssigned??1/0,G=ae.feasibilityAssigned??1/0;return k!==G?k-G:Y.optimisticBound!==ae.optimisticBound?ae.optimisticBound-Y.optimisticBound:Y.roughScore!==ae.roughScore?ae.roughScore-Y.roughScore:0}),L=[...he].sort((Y,ae)=>{const k=xc(Y.customTotals,O),G=xc(ae.customTotals,O);if(k!==G)return k-G;if(d){const M=hs(d,Y.atkTierAssigned,Z,le),z=hs(d,ae.atkTierAssigned,Z,le);if(M!==z)return z-M}return ae.optimisticBound-Y.optimisticBound});q=iS(Q,L,Math.max(40,c.beamWidth)),y?.({phase:"beam-search",processedStates:N,beamSize:q.length,totalSlots:n.length,expandedSlots:D+1,detail:`feasibility-first | branchCap=${se}${u.length>0?` | focus=${u.join("/")}`:""}${d?` | atkSpeed=${c.weaponAttackSpeeds.join("/")}`:""}`})}return{beam:q,processedStates:N,stateBudgetHit:j}}function iA(e){const{slotOrder:n,candidatePools:s,baseSlots:i,catalog:r,constraints:c,signal:u,onProgress:d}=e,g=Uc(c),p=[],y=new Set;let v=0,b=0,S=0,T=0,E=0,C=0,O=0,R=0;const I=(B,q)=>{if(u?.aborted)throw new DOMException("Auto build cancelled","AbortError");if(v>c.maxStates)return;if(B>=n.length){if(!Hh(q,r,c.requiredMajorIds)){b++;return}const D=ur({slots:q,level:c.level,characterClass:c.characterClass},r,{skillpointFeasibility:{extraBaseSkillPoints:g}});if(!D.derived.skillpointFeasible){S++;return}const K=Uh(q,r,c,D);if(!K.ok){E++,K.reason==="attackSpeed"?C++:K.reason==="thresholds"?O++:R++;return}const re=Ki(q);if(y.has(re)){T++;return}y.add(re);const{score:he,breakdown:se}=Bh(D,c.weights,c);p.push({slots:aa(q),score:he,scoreBreakdown:se,summary:D});return}const N=n[B],j=s.get(N)??[];for(const D of j){if(v++,v>c.maxStates)break;qc(D.id,q,r)||(q[N]=D.id,v%2e3===0&&d?.({phase:"exact-search",processedStates:v,beamSize:0,totalSlots:n.length,expandedSlots:B+1}),I(B+1,q))}q[N]=null};return I(0,aa(i)),d?.({phase:"diagnostics",processedStates:v,beamSize:0,totalSlots:n.length,expandedSlots:n.length,detail:p.length>0?`Exact search produced ${p.length} valid builds. Rejected duplicates=${T}, SP-invalid=${S}, majorID=${b}, hard=${E} (speed=${C}, thresholds=${O}, item=${R}).`:`Exact search produced 0 valid builds. Rejected SP-invalid=${S}, majorID=${b}, duplicates=${T}, hard=${E} (speed=${C}, thresholds=${O}, item=${R}).`}),p.sort((B,q)=>{if(B.score!==q.score)return q.score-B.score;for(const N of tt){const j=B.slots[N]??0,D=q.slots[N]??0;if(j!==D)return j-D}return 0}),p.slice(0,Math.max(1,c.topN))}function lA(e){const{slotOrder:n,candidatePools:s,baseSlots:i,catalog:r,constraints:c,attackSpeedCtx:u,atkTierRequirement:d,fixedAtkTierTotal:g,customSpecs:p,customBounds:y,signal:v,timeCapMs:b=2e3}=e,S=Uc(c),T=new Map;for(const D of n){const K=s.get(D)??[];T.set(D,[...K].sort((re,he)=>re.rough!==he.rough?he.rough-re.rough:re.id-he.id))}const E=u||d.hasConstraint?bc(n,s,r):null,C=p.map(D=>D.key),O=wc(i,r,C),R=Date.now();let I=!1,B=0;const q=new Set,N=[],j=(D,K,re,he)=>{if(I)return;if(v?.aborted)throw new DOMException("Auto build cancelled","AbortError");if(Date.now()-R>=b){I=!0;return}if(N.length>=Math.max(1,c.topN))return;if(D>=n.length){if(!Hh(K,r,c.requiredMajorIds))return;const le=ur({slots:K,level:c.level,characterClass:c.characterClass},r,{skillpointFeasibility:{extraBaseSkillPoints:S}});if(!le.derived.skillpointFeasible||!Uh(K,r,c,le).ok)return;const L=Ki(K);if(q.has(L))return;q.add(L);const{score:Y,breakdown:ae}=Bh(le,c.weights,c);N.push({slots:aa(K),score:Y,scoreBreakdown:ae,summary:le});return}const se=n[D],Z=T.get(se)??[];for(const le of Z){if(I)break;if(B++,qc(le.id,K,r))continue;const Q=aa(K);Q[se]=le.id;const L=r.itemsById.get(le.id),Y=re+(L?Ba(L):0);if(E&&!Sc({constraints:c,attackSpeedCtx:u,atkTierRequirement:d,fixedAtkTierTotal:g,partialAssignedAtkTier:Y,remainingMinAtkTier:E.minSuffix[D+1],remainingMaxAtkTier:E.maxSuffix[D+1]}))continue;const ae=C.length>0?nr(he??C.map(()=>0),C.map(G=>L?L.numericIndex[G]??0:0)):void 0;if(p.length>0&&ae){let G=!0;for(let M=0;M<p.length;M++){const z=p[M],ee=ae[M];if(typeof z.min=="number"&&ee+y.maxSuffix[D+1][M]<z.min){G=!1;break}if(typeof z.max=="number"&&ee+y.minSuffix[D+1][M]>z.max){G=!1;break}}if(!G)continue}Pc(Q,r,c.level,{extraBaseSkillPoints:S}).feasible&&j(D+1,Q,Y,ae)}};return j(0,aa(i),0,O),N.sort((D,K)=>D.score!==K.score?K.score-D.score:Ki(D.slots).localeCompare(Ki(K.slots))),{candidates:N.slice(0,Math.max(1,c.topN)),processedStates:B,timedOut:I}}function dS(e){const{catalog:n,baseWorkbench:s,constraints:i,onProgress:r,signal:c,alreadyThresholdRescue:u}=e;if(c?.aborted)throw new DOMException("Auto build cancelled","AbortError");let d=aa(s.slots);for(const k of tt)i.lockedSlots[k]||(d[k]=null);const g=Vk(d,n,i);if(!g.ok)return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:0,expandedSlots:0,reasonCode:g.reasonCode??"must_include_conflict",detail:g.detail??"Must-include assignment failed before search started."}),[];d=g.slots;const p=Kk(d,n),y=tt.filter(k=>d[k]==null),v=i.onlyPinnedItems?nA(s):null,b=new Map;for(const k of y)b.set(k,tA(k,n,i,v?.[k]??null,p));const S=Uk(d,n,i),T=oS(rS(i)),E=qh(d,n),C=lh(i),O=C.some(k=>typeof k.min=="number"),R=[...y].sort((k,G)=>{if(S?.preferredDirection){const ee=b.get(k)??[],oe=b.get(G)??[],ue=ee.reduce((ye,be)=>{const ge=n.itemsById.get(be.id);if(!ge)return ye;const _e=Ba(ge),Be=S.preferredDirection>0?Math.max(0,_e):Math.max(0,-_e);return Math.max(ye,Be)},0),ce=oe.reduce((ye,be)=>{const ge=n.itemsById.get(be.id);if(!ge)return ye;const _e=Ba(ge),Be=S.preferredDirection>0?Math.max(0,_e):Math.max(0,-_e);return Math.max(ye,Be)},0);if(ue!==ce)return ce-ue}if(p.length>0){const ee=T0(k,b,n,p),oe=T0(G,b,n,p);if(ee!==oe)return oe-ee}if(O){const ee=["ring1","ring2","bracelet","necklace"],oe=ee.includes(k),ue=ee.includes(G);if(oe!==ue)return oe?-1:1}const M=b.get(k)?.length??0,z=b.get(G)?.length??0;return M!==z?M-z:k.localeCompare(G)}),I=cS(R,b);if(R.some(k=>(b.get(k)?.length??0)===0)){const k=R.find(G=>(b.get(G)?.length??0)===0);return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"empty_pool",detail:k?`No candidate items available for slot ${k} under current hard filters.`:"One or more slots have empty candidate pools."}),[]}if(T.hasConstraint&&T.minAllowed>T.maxAllowed)return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"unsat_attack_target",detail:`Attack target is unsatisfiable: atkTier min (${T.minAllowed}) exceeds atkTier max (${T.maxAllowed}).`}),[];if(C.length>0){const k=C.map(z=>z.key),G=rh({slotOrder:R,candidatePools:b,catalog:n,keys:k}),M=wc(d,n,k);for(let z=0;z<C.length;z++){const ee=C[z],oe=M[z]+G.minSuffix[0][z],ue=M[z]+G.maxSuffix[0][z];if(typeof ee.min=="number"&&ue<ee.min)return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"unsat_threshold",detail:`Unsatisfiable threshold: ${ee.key} min ${ee.min} is above maximum reachable total ${ue}.`}),[];if(typeof ee.max=="number"&&oe>ee.max)return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"unsat_threshold",detail:`Unsatisfiable threshold: ${ee.key} max ${ee.max} is below minimum reachable total ${oe}.`}),[]}}const B=S||T.hasConstraint?bc(R,b,n):null;if(B&&!Sc({constraints:i,attackSpeedCtx:S??null,atkTierRequirement:T,fixedAtkTierTotal:E,partialAssignedAtkTier:0,remainingMinAtkTier:B.minSuffix[0],remainingMaxAtkTier:B.maxSuffix[0]}))return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"unsat_attack_target",detail:"Attack-speed / atkTier target cannot be reached from current candidate pools."}),[];const q=aA(R,b,i.exhaustiveStateLimit+1);if(i.useExhaustiveSmallPool&&R.length>0&&q>0&&q<=i.exhaustiveStateLimit){r?.({phase:"exact-search",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0});const k={...i,maxStates:Math.max(i.maxStates,i.exhaustiveStateLimit)};return iA({slotOrder:R,candidatePools:b,baseSlots:d,catalog:n,constraints:k,signal:c,onProgress:r})}const N=lh(i),j=N.map(k=>k.key),D=rh({slotOrder:R,candidatePools:b,catalog:n,keys:j});let K=[{slots:d,orderIndex:0,roughScore:0,optimisticBound:I[0],atkTierAssigned:0,customTotals:wc(d,n,j)}];const re=S||T.hasConstraint?bc(R,b,n):null;let he=0,se=!1;for(let k=0;k<R.length;k++){if(c?.aborted)throw new DOMException("Auto build cancelled","AbortError");const G=R[k],M=b.get(G),z=[],ee=uS({poolSize:M.length,beamSize:K.length,remainingStages:R.length-k,processedStates:he,maxStates:i.maxStates});ee<=0&&(se=!0);for(const be of K){let ge=0;for(const _e of M){if(ge>=ee)break;if(he>=i.maxStates){se=!0;break}if(he++,ge++,qc(_e.id,be.slots,n))continue;const Be=aa(be.slots);Be[G]=_e.id;const it=be.roughScore+_e.rough,Rt=n.itemsById.get(_e.id),ct=(be.atkTierAssigned??0)+(Rt?Ba(Rt):0),Gt=j.length>0?nr(be.customTotals??j.map(()=>0),j.map(ht=>Rt?Rt.numericIndex[ht]??0:0)):void 0;if(!(re&&!Sc({constraints:i,attackSpeedCtx:S??null,atkTierRequirement:T,fixedAtkTierTotal:E,partialAssignedAtkTier:ct,remainingMinAtkTier:re.minSuffix[k+1],remainingMaxAtkTier:re.maxSuffix[k+1]}))){if(N.length>0&&Gt){let ht=!0;for(let Jt=0;Jt<N.length;Jt++){const en=N[Jt],Ht=Gt[Jt];if(typeof en.min=="number"&&Ht+D.maxSuffix[k+1][Jt]<en.min){ht=!1;break}if(typeof en.max=="number"&&Ht+D.minSuffix[k+1][Jt]>en.max){ht=!1;break}}if(!ht)continue}z.push({slots:Be,orderIndex:k+1,roughScore:it,optimisticBound:it+I[k+1],atkTierAssigned:ct,customTotals:Gt})}}if(se)break}if(z.length===0)return r?.({phase:"diagnostics",processedStates:he,beamSize:K.length,totalSlots:R.length,expandedSlots:k,reasonCode:"search_pruned",detail:se?`Search state budget exhausted before completing slot ${G}. Try enabling deep fallback/exact mode or reduce hard filters.`:`No expansions produced at slot ${G}.`}),[];const oe=re?re.minSuffix[k+1]:0,ue=re?re.maxSuffix[k+1]:0,ce=[...z].sort((be,ge)=>{if(S){const _e=hs(S,be.atkTierAssigned,oe,ue),Be=hs(S,ge.atkTierAssigned,oe,ue);if(_e!==Be)return Be-_e}return be.optimisticBound!==ge.optimisticBound?ge.optimisticBound-be.optimisticBound:ge.roughScore-be.roughScore}),ye=[...z].sort((be,ge)=>{const _e=xc(be.customTotals,N),Be=xc(ge.customTotals,N);if(_e!==Be)return _e-Be;if(S){const it=hs(S,be.atkTierAssigned,oe,ue),Rt=hs(S,ge.atkTierAssigned,oe,ue);if(it!==Rt)return Rt-it}return ge.optimisticBound-be.optimisticBound});K=iS(ce,ye,Math.max(20,i.beamWidth)),r?.({phase:"beam-search",processedStates:he,beamSize:K.length,totalSlots:R.length,expandedSlots:k+1,detail:`branchCap=${ee}${S?.preferredDirection?` | atkSpeedTarget=${i.weaponAttackSpeeds.join("/")}`:""}`})}let Z=K,{candidates:le,rejectStats:Q}=M0({beam:K,catalog:n,constraints:i,signal:c});const L=Q.thresholdFailureExample?` Example failure: ${Q.thresholdFailureExample}.`:"",Y=le.length>0?void 0:Q.spInvalid>0&&Q.hardConstraints===0?"sp_infeasible":Q.hardThresholds>0?"unsat_threshold":Q.hardAttackSpeed>0?"unsat_attack_target":void 0;r?.({phase:"diagnostics",processedStates:he,beamSize:K.length,totalSlots:R.length,expandedSlots:R.length,reasonCode:Y,detail:le.length>0?`Final eval: ${le.length} valid builds. Rejected duplicates=${Q.duplicate}, SP-invalid=${Q.spInvalid}, majorID=${Q.majorIds}, hard=${Q.hardConstraints}.`:`Final eval found 0 valid builds. Rejected SP-invalid=${Q.spInvalid}, majorID=${Q.majorIds}, duplicates=${Q.duplicate}, hard=${Q.hardConstraints} (speed=${Q.hardAttackSpeed}, thresholds=${Q.hardThresholds}, item=${Q.hardItem}).${L}`});const ae=i.weaponAttackSpeeds.length>0||T.hasConstraint;if(le.length===0&&R.length>0&&(Q.spInvalid>0||ae&&Q.hardAttackSpeed>0||Q.hardThresholds>0)){const k=Q.hardThresholds>0;r?.({phase:"diagnostics",processedStates:he,beamSize:K.length,totalSlots:R.length,expandedSlots:R.length,detail:k&&i.target.customNumericRanges?.length?"Retrying with threshold-aware rescue (advanced ID constraints + support-aware feasibility search).":Q.hardAttackSpeed>0?"Retrying with feasibility-first beam search (support-aware rescue + attack target reachability).":"Retrying with feasibility-first beam search (support-aware rescue for high-skill requirements)."});const G={...i,maxStates:Math.max(i.maxStates,k?Math.min(18e6,i.maxStates*5):ae?Math.min(16e6,i.maxStates*4):Math.min(8e6,i.maxStates*2)),beamWidth:Math.max(i.beamWidth,k?3600:ae?3200:1800)};k&&(G.weights=ih(i.target,i.weights));const M=sA({slotOrder:R,candidatePools:b,baseSlots:d,catalog:n,constraints:G,focusStats:p,attackSpeedCtx:S,atkTierRequirement:T,fixedAtkTierTotal:E,onProgress:r,signal:c});if(M.beam.length>0){Z=M.beam;const z=M0({beam:M.beam,catalog:n,constraints:i,signal:c});le=z.candidates,Q=z.rejectStats;const ee=Q.thresholdFailureExample?` Example failure: ${Q.thresholdFailureExample}.`:"";r?.({phase:"diagnostics",processedStates:M.processedStates,beamSize:M.beam.length,totalSlots:R.length,expandedSlots:R.length,detail:le.length>0?`Feasibility-first eval: ${le.length} valid builds. Rejected duplicates=${Q.duplicate}, SP-invalid=${Q.spInvalid}, majorID=${Q.majorIds}, hard=${Q.hardConstraints}.`:`Feasibility-first eval still found 0 valid builds. Rejected SP-invalid=${Q.spInvalid}, majorID=${Q.majorIds}, duplicates=${Q.duplicate}, hard=${Q.hardConstraints} (speed=${Q.hardAttackSpeed}, thresholds=${Q.hardThresholds}, item=${Q.hardItem}).${ee}`})}}if(le.length===0&&Q.hardThresholds>0&&!u){const k=i.target;if(typeof k.minLegacyBaseDps=="number"||typeof k.minLegacyEhp=="number"||typeof k.minDpsProxy=="number"||typeof k.minEhpProxy=="number"||typeof k.minMr=="number"||typeof k.minMs=="number"||typeof k.minSpeed=="number"||typeof k.minSkillPointTotal=="number"||typeof k.maxReqTotal=="number"||(k.customNumericRanges?.length??0)>0){r?.({phase:"diagnostics",processedStates:he,beamSize:Z.length,totalSlots:R.length,expandedSlots:R.length,detail:"Retrying with threshold-biased beam search (weights tuned to target min/max)."});const M={...i,weights:ih(i.target,i.weights),beamWidth:Math.max(i.beamWidth,3600),maxStates:Math.max(i.maxStates,Math.min(18e6,i.maxStates*5))},z=dS({catalog:n,baseWorkbench:s,constraints:M,onProgress:r,signal:c,alreadyThresholdRescue:!0});if(z.length>0)return r?.({phase:"diagnostics",processedStates:he,beamSize:z.length,totalSlots:R.length,expandedSlots:R.length,detail:`Threshold rescue: ${z.length} valid builds.`}),z.slice(0,Math.max(1,i.topN))}}if(le.length===0&&R.length>0){r?.({phase:"diagnostics",processedStates:he,beamSize:Z.length,totalSlots:R.length,expandedSlots:R.length,reasonCode:"search_pruned",detail:"Running deterministic fallback search (2s cap) before returning no candidates."});const k=lA({slotOrder:R,candidatePools:b,baseSlots:d,catalog:n,constraints:i,attackSpeedCtx:S??null,atkTierRequirement:T,fixedAtkTierTotal:E,customSpecs:N,customBounds:D,signal:c,timeCapMs:2e3});if(k.candidates.length>0)le=k.candidates,r?.({phase:"diagnostics",processedStates:he+k.processedStates,beamSize:k.candidates.length,totalSlots:R.length,expandedSlots:R.length,detail:`Deterministic fallback recovered ${k.candidates.length} valid build(s).`});else{const G=k.timedOut?"fallback_timeout":Q.spInvalid>0&&Q.hardConstraints===0?"sp_infeasible":Q.hardThresholds>0?"unsat_threshold":Q.hardAttackSpeed>0?"unsat_attack_target":"search_pruned";r?.({phase:"diagnostics",processedStates:he+k.processedStates,beamSize:0,totalSlots:R.length,expandedSlots:R.length,reasonCode:G,detail:k.timedOut?"Deterministic fallback timed out after 2 seconds with no valid candidates.":`Deterministic fallback found 0 valid builds. Rejected SP-invalid=${Q.spInvalid}, majorID=${Q.majorIds}, duplicates=${Q.duplicate}, hard=${Q.hardConstraints} (speed=${Q.hardAttackSpeed}, thresholds=${Q.hardThresholds}, item=${Q.hardItem}).${Q.thresholdFailureExample?` Example failure: ${Q.thresholdFailureExample}.`:""}`})}}return le.slice(0,Math.max(1,i.topN))}class rA{worker=null;requestId=0;currentReject=null;currentRequestId=null;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL(""+new URL("worker-runtime-C2sWj7bW.js",import.meta.url).href,import.meta.url),{type:"module"}))}async run(n,s,i,r={}){if(!this.worker)return dS({catalog:n,baseWorkbench:s,constraints:i,onProgress:r.onProgress,signal:r.signal});const c=++this.requestId;return this.currentRequestId=c,new Promise((u,d)=>{this.currentReject=d;const g=()=>{this.worker?.postMessage({type:"cancel",requestId:c}),d(new DOMException("Auto build cancelled","AbortError"))};r.signal?.addEventListener("abort",g,{once:!0});const p=y=>{const v=y.data;if(v.requestId===c){if(v.type==="progress"){r.onProgress?.(v.progress);return}if(this.worker?.removeEventListener("message",p),r.signal?.removeEventListener("abort",g),this.currentReject=null,this.currentRequestId=null,v.type==="error"){d(new Error(v.message));return}u(v.candidates)}};this.worker.addEventListener("message",p),this.worker.postMessage({type:"run",requestId:c,catalog:n,baseWorkbench:s,constraints:i})})}cancelCurrent(){this.currentRequestId!==null&&(this.worker?.postMessage({type:"cancel",requestId:this.currentRequestId}),this.currentReject?.(new DOMException("Auto build cancelled","AbortError")),this.currentReject=null,this.currentRequestId=null)}dispose(){this.worker?.terminate(),this.worker=null}}function N0(e,n){const s=e.split(",").map(c=>c.trim()).filter(Boolean),i=[],r=[];for(const c of s){const u=n.itemIdByName.get(c.toLowerCase());u==null?r.push(c):i.push(u)}return{ids:i,unknown:r}}function Bi(e,n){return e.split(",").map(s=>s.trim()).filter(Boolean).map(s=>n?n(s):s)}function Ko(e,n){return e.includes(n)?e.filter(s=>s!==n):[...e,n]}function oA(e){if(!e)return null;const n=/SP-invalid=(\d+)/i.exec(e),s=/majorID=(\d+)/i.exec(e),i=/duplicates?=(\d+)/i.exec(e),r=/hard=(\d+)/i.exec(e),c=/speed=(\d+)/i.exec(e),u=/thresholds=(\d+)/i.exec(e),d=/item=(\d+)/i.exec(e);return r?{spInvalid:n?Number(n[1]):0,majorIds:s?Number(s[1]):0,duplicate:i?Number(i[1]):0,hard:Number(r[1]),speed:c?Number(c[1]):0,thresholds:u?Number(u[1]):0,item:d?Number(d[1]):0}:null}const cA=["SUPER_SLOW","VERY_SLOW","SLOW","NORMAL","FAST","VERY_FAST","SUPER_FAST"],uA={constraints:"Advanced IDs only",spell:"Spell Damage",melee:"Melee",mobility:"Mobility",tank:"Tank / EHP"},dA=["constraints","spell","melee","mobility","tank"],j0={auto:"All",fast:"Fast",constraint:"Constraint-first",exhaustive:"Exhaustive-ish"},fA=["auto","fast","constraint","exhaustive"],hA={hp:"Health",hpBonus:"Health Bonus",hprRaw:"Raw Health Regen",hprPct:"Health Regen %",mr:"Mana Regen",ms:"Mana Steal",ls:"Life Steal",sdPct:"Spell Damage %",sdRaw:"Spell Damage Raw",mdPct:"Melee Damage %",mdRaw:"Melee Damage Raw",poison:"Poison",spd:"Walk Speed Bonus",atkTier:"Attack Speed Bonus",averageDps:"Average DPS",str:"Strength",dex:"Dexterity",int:"Intelligence",def:"Defense",agi:"Agility",strReq:"Strength Min",dexReq:"Dexterity Min",intReq:"Intelligence Min",defReq:"Defense Min",agiReq:"Agility Min",eDef:"Earth Defense",tDef:"Thunder Defense",wDef:"Water Defense",fDef:"Fire Defense",aDef:"Air Defense",eDamPct:"Earth Damage %",tDamPct:"Thunder Damage %",wDamPct:"Water Damage %",fDamPct:"Fire Damage %",aDamPct:"Air Damage %",damPct:"Damage %",rDamPct:"Elemental Damage %",nDamPct:"Neutral Damage %",slots:"Powder Slots",lvl:"Combat Level",reqTotal:"Req Total",skillPointTotal:"Skill Point Total",offenseScore:"Offense Score",ehpProxy:"EHP Proxy",utilityScore:"Utility Score",spPct1:"1st Spell Cost %",spRaw1:"1st Spell Cost Raw",spPct2:"2nd Spell Cost %",spRaw2:"2nd Spell Cost Raw",spPct3:"3rd Spell Cost %",spRaw3:"3rd Spell Cost Raw",spPct4:"4th Spell Cost %",spRaw4:"4th Spell Cost Raw",sumSpPct:"Sum Spell Cost %",sumSpRaw:"Sum Spell Cost Raw"};function kf(e){return hA[e]??e}const Li={legacyBaseDps:0,legacyEhp:0,dpsProxy:0,spellProxy:0,meleeProxy:0,ehpProxy:0,speed:0,sustain:0,skillPointTotal:0,reqTotalPenalty:0};function mA(e){switch(e){case"spell":return{...Li,spellProxy:2};case"melee":return{...Li,meleeProxy:2};case"mobility":return{...Li,speed:2};case"tank":return{...Li,legacyEhp:2};case"constraints":return{...Li,legacyBaseDps:.25,legacyEhp:.25,dpsProxy:.25,spellProxy:.25,meleeProxy:.25,ehpProxy:.25,speed:.25,sustain:.25,skillPointTotal:.25,reqTotalPenalty:.25};default:return{...Li,spellProxy:2}}}function gA(e){return mA(e)}function pA(e){const n=w.useRef(null);n.current||(n.current=new rA);const[s,i]=w.useState(""),[r,c]=w.useState(""),[u,d]=w.useState(""),[g,p]=w.useState(""),[y,v]=w.useState([]),[b,S]=w.useState("constraints"),[T,E]=w.useState(e.snapshot.characterClass),[C,O]=w.useState(e.snapshot.level),[R,I]=w.useState([]),[B,q]=w.useState([]),[N,j]=w.useState(Jn.attackSpeedConstraintMode),[D,K]=w.useState(Jn.skillpointFeasibilityMode),[re,he]=w.useState(null),[se,Z]=w.useState(!1),[le,Q]=w.useState(Jn.beamWidth),[L,Y]=w.useState(Jn.topKPerSlot),[ae,k]=w.useState(Jn.topN),[G,M]=w.useState(["auto"]),[z,ee]=w.useState([]),[oe,ue]=w.useState(""),[ce,ye]=w.useState(!1),[be,ge]=w.useState(null),[_e,Be]=w.useState(!1),[it,Rt]=w.useState(!0),[ct,Gt]=w.useState(!0),[ht,Jt]=w.useState(Jn.exhaustiveStateLimit),[en,Ht]=w.useState(null),[de,ze]=w.useState(null),[De,We]=w.useState(null),Ce=w.useRef(null),Zt=w.useRef(null),Mn=w.useRef(null),tn=y.some(X=>X.key&&X.min!=null&&X.max!=null),W=w.useRef(1),me=w.useMemo(()=>{const X={};for(const fe of tt)e.snapshot.locks[fe]&&(X[fe]=!0);return X},[e.snapshot.locks]),Ge=e.catalog?.facetsMeta.tiers??[],Ye=(e.catalog?.facetsMeta.majorIds??[]).slice(0,24),cn=w.useMemo(()=>Object.keys(e.catalog?.facetsMeta.numericRanges??{}).sort((fe,Me)=>kf(fe).localeCompare(kf(Me))),[e.catalog]);w.useEffect(()=>{e.open&&(E(e.snapshot.characterClass),O(e.snapshot.level))},[e.open,e.snapshot.characterClass,e.snapshot.level]);const un=()=>{v(X=>[...X,{id:W.current++,key:cn[0]??"",min:null,max:null}])},ut=(X,fe)=>{v(Me=>Me.map(Ae=>Ae.id===X?{...Ae,...fe}:Ae))},zt=X=>{v(fe=>fe.filter(Me=>Me.id!==X))},kt=async(X,fe,Me,Ae)=>{const Xe=(()=>{const Le={label:"Fast pass",topKPerSlot:fe.topKPerSlot,beamWidth:fe.beamWidth,maxStates:fe.maxStates,rescueWeights:!1},Pe={label:"Deep pass",topKPerSlot:Math.max(fe.topKPerSlot,140),beamWidth:Math.max(fe.beamWidth,700),maxStates:Math.max(fe.maxStates,9e5),rescueWeights:!1},xt={label:"Bruteforce-ish pass",topKPerSlot:Math.max(fe.topKPerSlot,220),beamWidth:Math.max(fe.beamWidth,1200),maxStates:Math.max(fe.maxStates,4e6),rescueWeights:!1},mt={label:"Feasibility rescue",topKPerSlot:Math.max(fe.topKPerSlot,260),beamWidth:Math.max(fe.beamWidth,1400),maxStates:Math.max(fe.maxStates,45e5),rescueWeights:!0},we={label:"Constraint-first pass",topKPerSlot:Math.max(fe.topKPerSlot,180),beamWidth:Math.max(fe.beamWidth,1200),maxStates:Math.max(fe.maxStates,22e5),rescueWeights:!0},Nn={label:"Constraint rescue deep",topKPerSlot:Math.max(fe.topKPerSlot,280),beamWidth:Math.max(fe.beamWidth,2200),maxStates:Math.max(fe.maxStates,9e6),rescueWeights:!0,useExhaustiveSmallPool:!0,exhaustiveStateLimit:Math.max(fe.exhaustiveStateLimit,12e5)},dn={label:"Exhaustive-ish pass",topKPerSlot:Math.max(fe.topKPerSlot,300),beamWidth:Math.max(fe.beamWidth,2600),maxStates:Math.max(fe.maxStates,12e6),rescueWeights:!0,useExhaustiveSmallPool:!0,exhaustiveStateLimit:Math.max(fe.exhaustiveStateLimit,2e6)},Te=Qe=>{switch(Qe){case"fast":return[Le];case"constraint":return it?[we,Nn,dn]:[we];case"exhaustive":return it?[we,dn]:[dn];default:return[Le,...it?[Pe,xt,mt]:[]]}},fn=G.length>0?G:["auto"];return fn.length===1&&fn[0]==="auto"?Te("auto"):fn.flatMap(Qe=>Te(Qe))})();let Tt=[];for(let Le=0;Le<Xe.length;Le++){if(Ae.aborted)throw new DOMException("Auto build cancelled","AbortError");const Pe=Xe[Le],xt={...fe,topKPerSlot:Pe.topKPerSlot,beamWidth:Pe.beamWidth,maxStates:Pe.maxStates,useExhaustiveSmallPool:Pe.useExhaustiveSmallPool??fe.useExhaustiveSmallPool,exhaustiveStateLimit:Pe.exhaustiveStateLimit??fe.exhaustiveStateLimit,weights:Pe.rescueWeights?{...fe.weights,legacyBaseDps:fe.weights.legacyBaseDps*.6,dpsProxy:fe.weights.dpsProxy*.55,legacyEhp:Math.max(fe.weights.legacyEhp,1),ehpProxy:Math.max(fe.weights.ehpProxy,1),sustain:Math.max(fe.weights.sustain,.8),skillPointTotal:Math.max(fe.weights.skillPointTotal,.8),reqTotalPenalty:Math.max(fe.weights.reqTotalPenalty,1.8)}:fe.weights};ue(`${Pe.label} (${Le+1}/${Xe.length})  topK ${xt.topKPerSlot}, beam ${xt.beamWidth}, maxStates ${xt.maxStates}`);const mt=await n.current.run(X,Me,xt,{signal:Ae,onProgress:we=>{We(we),we.phase==="diagnostics"&&we.reasonCode&&(Zt.current=we.reasonCode,ze(we.reasonCode)),we.phase==="diagnostics"&&we.detail&&(Ce.current=we.detail,Ht(we.detail)),ue(`${Pe.label} (${Le+1}/${Xe.length})  ${we.phase}: ${we.expandedSlots}/${we.totalSlots} slots, beam ${we.beamSize}, states ${we.processedStates}${we.detail?`  ${we.detail}`:""}`)}});if(mt.length>0)return mt;Tt=mt}if(Tt.length===0){const Le=fe.target;if(typeof Le.minDpsProxy=="number"||typeof Le.minEhpProxy=="number"||typeof Le.minSkillPointTotal=="number"||(Le.customNumericRanges?.length??0)>0){ue("Threshold rescue pass  topK 180, beam 3600, maxStates 2200000");const xt={...fe,weights:ih(fe.target,fe.weights),topKPerSlot:Math.max(fe.topKPerSlot,180),beamWidth:Math.max(fe.beamWidth,3600),maxStates:Math.max(fe.maxStates,22e5)},mt=await n.current.run(X,Me,xt,{signal:Ae,onProgress:we=>{We(we),we.phase==="diagnostics"&&we.reasonCode&&(Zt.current=we.reasonCode,ze(we.reasonCode)),we.phase==="diagnostics"&&we.detail&&(Ce.current=we.detail,Ht(we.detail)),ue(`Threshold rescue pass  ${we.phase}: ${we.expandedSlots}/${we.totalSlots} slots, beam ${we.beamSize}, states ${we.processedStates}${we.detail?`  ${we.detail}`:""}`)}});if(mt.length>0)return mt}}return Tt},tl=async()=>{if(!e.catalog)return;ge(null),ee([]),Ht(null),ze(null),We(null),Ce.current=null,Zt.current=null;const X=N0(s,e.catalog),fe=N0(r,e.catalog),Me=Bi(u,Te=>Te.toUpperCase()),Ae=Bi(g,Te=>Te.toUpperCase()),Xe=new Set(e.catalog.facetsMeta.majorIds.map(Te=>Te.toUpperCase())),Tt=Me.filter(Te=>!Xe.has(Te)),Le=Ae.filter(Te=>!Xe.has(Te)),Pe=y.map(Te=>({key:Te.key.trim(),min:Te.min??void 0,max:Te.max??void 0})).filter(Te=>Te.key&&(typeof Te.min=="number"||typeof Te.max=="number")),xt=new Set(Object.keys(e.catalog.facetsMeta.numericRanges)),mt=Pe.map(Te=>Te.key).filter(Te=>!xt.has(Te)),we=Pe.filter(Te=>typeof Te.min=="number"&&typeof Te.max=="number"&&Te.min>Te.max);if(X.unknown.length>0||fe.unknown.length>0||Tt.length>0||Le.length>0||mt.length>0||we.length>0){ge([X.unknown.length?`Unknown must-include items: ${X.unknown.join(", ")}`:"",fe.unknown.length?`Unknown excluded items: ${fe.unknown.join(", ")}`:"",Tt.length?`Unknown required major IDs: ${Tt.join(", ")}`:"",Le.length?`Unknown excluded major IDs: ${Le.join(", ")}`:"",mt.length?`Unknown advanced ID keys: ${mt.join(", ")}`:"",we.length?`Invalid advanced ID ranges (min > max): ${we.map(Te=>Te.key).join(", ")}`:""].filter(Boolean).join(" | "));return}const Nn={...Jn,characterClass:T,level:Math.max(1,Math.min(106,Math.round(C||e.snapshot.level||106))),mustIncludeIds:X.ids,excludedIds:fe.ids,lockedSlots:me,target:{customNumericRanges:Pe},allowedTiers:[...R],requiredMajorIds:Me,excludedMajorIds:Ae,weaponAttackSpeeds:[...B],attackSpeedConstraintMode:N,skillpointFeasibilityMode:D,minPowderSlots:re,onlyPinnedItems:se,useExhaustiveSmallPool:ct,exhaustiveStateLimit:Math.max(1e3,Math.min(5e6,ht)),weights:gA(b),topN:Math.max(1,Math.min(150,ae)),topKPerSlot:Math.max(10,Math.min(300,L)),beamWidth:Math.max(20,Math.min(5e3,le))};Mn.current?.abort();const dn=new AbortController;Mn.current=dn,ye(!0),ue("Starting...");try{const Te=await kt(e.catalog,Nn,e.snapshot,dn.signal);if(ee(Te),Te.length===0){ue(""),We(null);const fn=Ce.current??"",Qe=Zt.current??de??"",Pt=/SP-invalid=(\d+)/i.exec(fn),nn=Pt?Number(Pt[1]):0,ma=/hard=.*?\(speed=(\d+)/i.exec(fn),Ks=ma?Number(ma[1]):0,br=/hard=.*?\(speed=\d+,\s*thresholds=(\d+)/i.exec(fn),xr=br?Number(br[1]):0,nl=Qe==="must_include_conflict"?"At least one must-include item cannot be placed under current locks/filters.":Qe==="unsat_attack_target"?"The configured attack target cannot be satisfied from the current candidate pool.":Qe==="unsat_threshold"?"One or more hard thresholds are mathematically unsatisfiable with the current pool.":Qe==="sp_infeasible"?"The explored builds failed skill-point/equip-order feasibility in the selected SP mode.":Qe==="fallback_timeout"?"Deterministic fallback timed out before finding a valid candidate.":Qe==="empty_pool"?"At least one slot has no eligible candidate items after filters.":Qe==="search_pruned"?"Search pruning/state limits exhausted viable branches before a valid candidate was found.":null,qa=Qe==="must_include_conflict"?"Tip: unlock conflicting slots, remove exclusions on required items, or relax class/level/tier filters.":Qe==="unsat_attack_target"?"Tip: switch attack logic to Either, lower atkTier minimum, or broaden candidate pools.":Qe==="unsat_threshold"?"Tip: lower strict min/max thresholds or reduce simultaneous hard constraints.":Qe==="sp_infeasible"?D==="no_tomes"?"Tip: try SP Feasibility Mode = Guild rainbow (+1 each), or add more low-requirement/support items.":"Tip: relax hard constraints or lower requirement-heavy must-includes.":Qe==="fallback_timeout"?"Tip: increase Top K / Beam Width, disable pinned-only, or reduce hard filters.":Qe==="empty_pool"?"Tip: disable pinned-only first, then relax tier/powder/class filters.":Qe==="search_pruned"?"Tip: use Constraint-first/Exhaustive-ish strategy and increase search budgets.":null;ge(["No valid candidates found.",Ce.current?`Diagnostics: ${Ce.current}`:"",nl||(nn>0?"The engine found many full builds, but they failed skill-point/equip-order feasibility. This is not just a UI filter issue.":Ks>0?"The engine found many full builds, but they failed the final attack-speed target. This usually means the search is missing enough +atkTier support for the selected weapon/target combination.":xr>0&&Pe.length>0?"The engine found many full builds, but they failed advanced ID min/max thresholds. This usually means the search is not preserving enough support items for those IDs.":"This usually means your hard constraints are too strict (pinned-only, major IDs, must-includes, attack-speed, or thresholds), or the selected objective conflicts with them."),qa||(nn>0?"Try switching Primary Goal to Balanced or Tank and keeping Exact Search + Deep Fallback enabled.":Ks>0?"Tip: keep Exact Search + Deep Fallback enabled, lower thresholds, and try adding/pinning known +Attack Speed Bonus support items for the target speed.":xr>0&&Pe.length>0?"Tip: switch Solver Strategy to Constraint-first or Exhaustive-ish and keep Deep Fallback enabled. For strict advanced IDs, add only the most important thresholds first.":"Tip: disable pinned-only first, remove major-ID constraints, then try again.")].join(" "))}else ue(`Completed. ${Te.length} valid candidates.`)}catch(Te){ge(Te instanceof Error?Te.message:"Auto builder failed"),ue("")}finally{ye(!1),We(null)}},Gs=()=>{Mn.current?.abort(),n.current?.cancelCurrent(),ye(!1),ue("Cancelled"),We(null)},Vs=be??en,ha=!!be,pt=oA(De?.detail),Et=pt?pt.spInvalid+pt.majorIds+pt.duplicate+pt.hard:0;return m.jsxs(zh,{open:e.open,onOpenChange:e.onOpenChange,title:"Build Solver",description:"Beam search over item combinations. Uses Workbench summary metrics (legacy-style Base DPS / EHP, ability tree excluded).",className:"!w-[min(95vw,1360px)]",footer:m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("div",{className:"text-sm text-[var(--wb-muted)]",children:oe}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(Ne,{variant:"ghost",onClick:()=>Be(X=>!X),children:_e?"Hide Tips":"Tips"}),ce?m.jsx(Ne,{variant:"ghost",onClick:Gs,children:"Cancel"}):null,m.jsx(Ne,{variant:"primary",onClick:tl,disabled:!e.catalog||ce,children:"Generate Candidates"})]})]}),children:[ce&&De?m.jsxs("div",{className:"mb-4 rounded-xl border border-sky-400/30 bg-sky-400/5 p-3",children:[m.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:"rounded-md bg-sky-400/20 px-2 py-0.5 text-xs font-medium text-sky-100",children:De.phase==="exact-search"?"Exact search":De.phase==="beam-search"?"Beam search":De.phase==="diagnostics"?"Finalize / diagnostics":De.phase}),De.totalSlots>0?m.jsxs("span",{className:"text-xs text-[var(--wb-muted)]",children:["Slots ",De.expandedSlots,"/",De.totalSlots]}):null]}),m.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-black/20",children:m.jsx("div",{className:"h-full rounded-full bg-sky-400/70 transition-all duration-300",style:{width:De.totalSlots>0?`${100*De.expandedSlots/De.totalSlots}%`:"0%"}})}),m.jsxs("div",{className:"mt-2 flex flex-wrap gap-4 text-xs text-[var(--wb-muted)]",children:[m.jsxs("span",{children:["States: ",De.processedStates.toLocaleString()]}),m.jsxs("span",{children:["Beam: ",De.beamSize.toLocaleString()]})]}),pt&&Et>0?m.jsxs("div",{className:"mt-3 border-t border-sky-400/20 pt-2",children:[m.jsx("div",{className:"mb-1 text-[11px] font-medium uppercase tracking-wide text-[var(--wb-muted)]",children:"Rejected builds (this pass)"}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[pt.spInvalid>0?m.jsxs("span",{className:"rounded bg-rose-400/20 px-1.5 py-0.5 text-[11px] text-rose-200",title:"Skill point / equip feasibility",children:["SP: ",pt.spInvalid]}):null,pt.majorIds>0?m.jsxs("span",{className:"rounded bg-amber-400/20 px-1.5 py-0.5 text-[11px] text-amber-200",title:"Major ID requirement",children:["Major ID: ",pt.majorIds]}):null,pt.duplicate>0?m.jsxs("span",{className:"rounded bg-slate-400/20 px-1.5 py-0.5 text-[11px] text-slate-200",title:"Duplicate build",children:["Dup: ",pt.duplicate]}):null,pt.speed>0?m.jsxs("span",{className:"rounded bg-orange-400/20 px-1.5 py-0.5 text-[11px] text-orange-200",title:"Attack speed",children:["Speed: ",pt.speed]}):null,pt.thresholds>0?m.jsxs("span",{className:"rounded bg-amber-400/20 px-1.5 py-0.5 text-[11px] text-amber-200",title:"Min/max thresholds",children:["Thresholds: ",pt.thresholds]}):null,pt.item>0?m.jsxs("span",{className:"rounded bg-slate-400/20 px-1.5 py-0.5 text-[11px] text-slate-200",title:"Item constraint",children:["Item: ",pt.item]}):null]})]}):null]}):null,m.jsxs("div",{className:"grid h-[52vh] min-h-0 gap-4 overflow-hidden lg:h-[56vh] lg:grid-cols-[1fr_1fr] lg:items-stretch",children:[m.jsxs("div",{className:"grid h-full min-h-0 min-w-0 gap-3 overflow-auto pr-1 wb-scrollbar",children:[_e?m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Tips (New Players)"}),m.jsxs("div",{className:"grid gap-2 text-xs text-[var(--wb-muted)]",children:[m.jsxs("div",{children:["1. Start with a Primary Goal like ",m.jsx("b",{children:"Damage"})," or ",m.jsx("b",{children:"Tank / EHP"}),". Leave most constraints empty."]}),m.jsx("div",{children:"2. Add only a few hard constraints first: class/level, maybe one must-include item."}),m.jsxs("div",{children:["3. If you get 0 candidates, turn off ",m.jsx("b",{children:"Only use pinned items in bins"})," and clear major-ID constraints."]}),m.jsx("div",{children:"4. Build Solver filters out builds that fail skill requirements / equip order feasibility."}),m.jsx("div",{children:"5. Use Workbench bins to guide it: pin good options, then rerun with pinned-only once you have enough items in each slot category."})]})]}):null,m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Optimization"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{children:[m.jsx(Ie,{children:"Primary Goal"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:dA.map(X=>m.jsx(et,{active:b===X,onClick:()=>S(X),children:uA[X]},X))})]}),m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2 text-xs text-[var(--wb-muted)]",children:"Build Solver always filters out builds that fail skill point/equip-order feasibility. You do not need to set a minimum SP total."})]})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Hard Constraints (Optional)"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{children:[m.jsx(Ie,{children:"Character Class"}),m.jsxs("select",{className:"wb-select",value:T??"",onChange:X=>E(X.target.value||null),children:[m.jsx("option",{value:"",children:"Auto / Any"}),m.jsx("option",{value:"Warrior",children:"Warrior"}),m.jsx("option",{value:"Assassin",children:"Assassin"}),m.jsx("option",{value:"Mage",children:"Mage"}),m.jsx("option",{value:"Archer",children:"Archer"}),m.jsx("option",{value:"Shaman",children:"Shaman"})]})]}),m.jsx(za,{label:"Level",value:C,onChange:X=>O(X??e.snapshot.level),min:1,max:106}),m.jsxs("div",{children:[m.jsx(Ie,{children:"Must-Include Items (comma-separated names)"}),m.jsx("textarea",{className:"wb-textarea min-h-20",value:s,onChange:X=>i(X.target.value),placeholder:"Example: Cancer, Stardew"})]}),m.jsxs("div",{children:[m.jsx(Ie,{children:"Excluded Items (comma-separated names)"}),m.jsx("textarea",{className:"wb-textarea min-h-20",value:r,onChange:X=>c(X.target.value),placeholder:"Blacklist item names"})]}),m.jsxs("details",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-medium",children:"Advanced: Specific ID Min / Max"}),m.jsxs("div",{className:"mt-3 grid gap-3",children:[m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Set build-wide min/max totals for any numeric ID (e.g. `mr`, `ms`, `spd`, `reqTotal`, `sdPct`, `poison`, `atkTier`). These are hard constraints."}),y.length===0?m.jsx("div",{className:"rounded-lg border border-dashed border-[var(--wb-border-muted)] px-3 py-2 text-xs text-[var(--wb-muted)]",children:"No advanced ID thresholds yet."}):null,y.map(X=>{const fe=e.catalog?.facetsMeta.numericRanges[X.key];return m.jsxs("div",{className:"rounded-lg border border-[var(--wb-border-muted)] p-2",children:[m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsxs("div",{children:[m.jsx(Ie,{children:"ID"}),m.jsx("select",{className:"wb-select w-full",value:X.key,onChange:Me=>ut(X.id,{key:Me.target.value}),children:cn.map(Me=>m.jsxs("option",{value:Me,children:[kf(Me)," (",Me,")"]},Me))})]}),m.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[m.jsxs("div",{className:"min-w-[80px] flex-1",children:[m.jsx(Ie,{children:"Min"}),m.jsx("input",{className:"wb-input w-full",type:"number",value:X.min??"",onChange:Me=>{const Ae=Me.target.value.trim();ut(X.id,{min:Ae===""?null:Number(Ae)})}})]}),m.jsxs("div",{className:"min-w-[80px] flex-1",children:[m.jsx(Ie,{children:"Max"}),m.jsx("input",{className:"wb-input w-full",type:"number",value:X.max??"",onChange:Me=>{const Ae=Me.target.value.trim();ut(X.id,{max:Ae===""?null:Number(Ae)})}})]}),m.jsx(Ne,{variant:"ghost",className:"shrink-0",onClick:()=>zt(X.id),children:"Remove"})]})]}),fe?m.jsxs("div",{className:"mt-1 text-[11px] text-[var(--wb-muted)]",children:["Catalog item range: ",fe.min," to ",fe.max," (per item)"]}):null]},X.id)}),m.jsx("div",{children:m.jsx(Ne,{variant:"ghost",onClick:un,disabled:cn.length===0,children:"Add ID Threshold"})}),b==="constraints"&&!tn?m.jsx("div",{className:"mt-1 rounded-lg border border-amber-400/40 bg-amber-400/10 p-2 text-[11px] text-amber-50",children:"Advanced IDs preset is selected as Primary Goal, but no ID has both Min and Max set. Add at least one ID with a Min and Max, or switch primary goal. You can still run the solver without this."}):null]})]})]})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Solver Strategy"}),m.jsx("div",{className:"grid gap-3",children:m.jsxs("div",{children:[m.jsx(Ie,{children:"Strategies (select one or more; All is exclusive)"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:fA.map(X=>{const fe=X==="auto",Me=G.length===1&&G[0]==="auto",Ae=fe?Me:G.includes(X),Xe=fe&&!Me;return m.jsx(et,{active:Ae,disabled:Xe,onClick:()=>{if(Xe)return;if(fe){M(["auto"]);return}if(Me){M([X]);return}const Le=G.includes(X)?G.filter(xt=>xt!==X):[...G,X],Pe=Le.length===3&&Le.includes("fast")&&Le.includes("constraint")&&Le.includes("exhaustive");M(Le.length>0?Pe?["auto"]:Le:["auto"])},children:j0[X]},X)})}),m.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:G.length===1&&G[0]==="auto"?"Starts fast, then retries deeper if needed.":G.includes("fast")&&!G.includes("constraint")&&!G.includes("exhaustive")?"Single fast pass. Lowest wait time, weakest fallback.":G.includes("constraint")?"Constraint-first helps strict attack-speed or advanced ID min/max.":G.includes("exhaustive")?"Exhaustive-ish: highest search budget, strongest fallback.":"Selected strategies run in order (fast  constraint  exhaustive)."})]})})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Pool Filters"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsx(za,{label:"Min Powder Slots",value:re,onChange:he,min:0,max:6}),m.jsxs("div",{children:[m.jsx(Ie,{children:"Allowed Tiers (optional)"}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ge.map(X=>m.jsx(et,{active:R.includes(X),onClick:()=>I(fe=>Ko(fe,X)),children:X},X)),Ge.length===0?m.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:"Catalog not loaded."}):null]})]}),m.jsxs("div",{children:[m.jsx(Ie,{children:"Final Weapon Attack Speed (optional hard constraint)"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:cA.map(X=>m.jsx(et,{active:B.includes(X),onClick:()=>q(fe=>Ko(fe,X)),children:X},X))}),m.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:"Matches the completed build attack speed (weapon base speed plus total Attack Speed Bonus / `atkTier`)."})]}),m.jsxs("div",{children:[m.jsx(Ie,{children:"Attack Target Logic"}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsx(et,{active:N==="or",onClick:()=>j("or"),children:"Either"}),m.jsx(et,{active:N==="and",onClick:()=>j("and"),children:"Both"})]}),m.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:"Applies when both final attack speed and advanced `atkTier` thresholds are set."})]}),m.jsxs("div",{children:[m.jsx(Ie,{children:"SP Feasibility Mode"}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.jsx(et,{active:D==="no_tomes",onClick:()=>K("no_tomes"),children:"No tomes"}),m.jsx(et,{active:D==="guild_rainbow",onClick:()=>K("guild_rainbow"),children:"Guild rainbow (+1 each)"})]}),m.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:"Guild rainbow mode simulates legacy-compatible +1 STR/DEX/INT/DEF/AGI (total +5)."})]}),m.jsx(et,{active:se,onClick:()=>Z(X=>!X),children:"Only use pinned items in bins"}),m.jsxs("div",{children:[m.jsx(Ie,{children:"Required Major IDs (build must include all)"}),m.jsx("textarea",{className:"wb-textarea min-h-16",value:u,onChange:X=>d(X.target.value),placeholder:"Example: HAWKEYE, GREED"})]}),m.jsxs("div",{children:[m.jsx(Ie,{children:"Excluded Major IDs (avoid any item with these)"}),m.jsx("textarea",{className:"wb-textarea min-h-16",value:g,onChange:X=>p(X.target.value),placeholder:"Example: NAPALM"})]}),Ye.length>0?m.jsxs("div",{children:[m.jsx(Ie,{children:"Major ID Quick Picks"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:Ye.map(X=>{const fe=Bi(u,Ae=>Ae.toUpperCase()),Me=Bi(g,Ae=>Ae.toUpperCase());return m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsxs(et,{active:fe.includes(X.toUpperCase()),onClick:()=>{d(Ae=>Ko(Bi(Ae,Xe=>Xe.toUpperCase()),X.toUpperCase()).join(", "))},title:`Require ${X}`,children:["+",X]}),m.jsxs(et,{active:Me.includes(X.toUpperCase()),onClick:()=>{p(Ae=>Ko(Bi(Ae,Xe=>Xe.toUpperCase()),X.toUpperCase()).join(", "))},title:`Exclude ${X}`,children:["-",X]})]},X)})})]}):null]})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Search Heuristics"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsx(et,{active:it,onClick:()=>Rt(X=>!X),children:"Deep fallback if 0 results"}),m.jsx(et,{active:ct,onClick:()=>Gt(X=>!X),children:"Exact search for small pools"}),m.jsx(za,{label:"Exact Search Combination Limit",value:ht,onChange:X=>Jt(X??Jn.exhaustiveStateLimit),min:1e3,max:5e6}),m.jsx(za,{label:"Beam Width",value:le,onChange:X=>Q(X??Jn.beamWidth),min:20,max:5e3}),m.jsx(za,{label:"Top K per Slot",value:L,onChange:X=>Y(X??Jn.topKPerSlot),min:10,max:300}),m.jsx(za,{label:"Top N Results",value:ae,onChange:X=>k(X??Jn.topN),min:1,max:150}),m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2 text-xs text-[var(--wb-muted)]",children:["Locked slots from the Workbench will be preserved. Current locks: ",Object.values(me).filter(Boolean).length,se?" | Candidate pools restricted to pinned bins.":"",G.length>0&&!(G.length===1&&G[0]==="auto")?` | Strategy: ${G.map(X=>j0[X]).join("  ")}.`:"",` | Attack logic: ${N==="or"?"Either":"Both"}.`,` | SP mode: ${D==="guild_rainbow"?"Guild rainbow (+1 each)":"No tomes"}.`,it?" | Auto retries with deeper search if fast pass finds 0 candidates.":"",ct?` | Exact enumeration is used automatically when pool combinations are <= ${Math.round(ht).toLocaleString()}.`:""]})]})]})]}),m.jsx("div",{className:"h-full min-h-0 min-w-0",children:m.jsxs("div",{className:"wb-card flex h-full min-h-0 flex-col overflow-hidden p-3",children:[m.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[m.jsx("div",{className:"text-sm font-semibold",children:"Candidates"}),m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[z.length," shown"]})]}),m.jsx("div",{className:"min-h-0 flex-1 space-y-2 overflow-auto pr-1 wb-scrollbar",children:z.length===0?m.jsx("div",{className:"rounded-xl border border-dashed border-[var(--wb-border)] p-4 text-sm text-[var(--wb-muted)]",children:"Run Build Solver to generate candidate builds."}):z.map((X,fe)=>m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3",children:[m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"text-sm font-semibold",children:["#",fe+1," | Score ",Math.round(X.score).toLocaleString()]}),m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Base DPS ",Math.round(X.summary.derived.legacyBaseDps)," | EHP ",Math.round(X.summary.derived.legacyEhp)," | Req ",X.summary.derived.reqTotal," | MR ",X.summary.aggregated.mr]}),m.jsxs("div",{className:"mt-1 text-xs text-emerald-200",children:["SP Valid | Assigned SP ",Math.round(X.summary.derived.assignedSkillPointsRequired)]})]}),m.jsx(Ne,{className:"px-2 py-1 text-xs",onClick:()=>e.onLoadCandidate(X),children:"Load into Workbench"})]}),m.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1 text-xs sm:grid-cols-2 xl:grid-cols-3",children:tt.map(Me=>m.jsxs("div",{className:"min-w-0 rounded-md border border-[var(--wb-border-muted)] bg-black/10 px-2 py-1",children:[m.jsx("div",{className:"text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:Me}),m.jsx("div",{className:"truncate",children:X.slots[Me]!=null?e.catalog?.itemsById.get(X.slots[Me])?.displayName??X.slots[Me]:"Empty"})]},Me))})]},`${X.score}-${fe}`))}),Vs?m.jsxs("details",{className:`mt-2 rounded-xl border p-2 ${ha?"border-rose-400/30 bg-rose-400/8 text-rose-100":"border-sky-400/20 bg-sky-400/5 text-sky-100"}`,children:[m.jsx("summary",{className:"cursor-pointer list-none text-xs font-medium",children:ha?"Run issue (click to expand)":"Diagnostics (click to expand)"}),m.jsx("div",{className:"mt-2 text-xs leading-relaxed",children:Vs})]}):null]})})]})]})}const vA=["Warrior","Assassin","Mage","Archer","Shaman"],Af=[0,1,2,2,3,3,4,4,5,5,6,6,7,8,8,9,9,10,11,11,12,12,13,14,14,15,16,16,17,17,18,18,19,19,20,20,20,21,21,22,22,23,23,23,24,24,25,25,26,26,27,27,28,28,29,29,30,30,31,31,32,32,33,33,34,34,34,35,35,35,36,36,36,37,37,37,38,38,38,38,39,39,39,39,40,40,40,40,41,41,41,41,42,42,42,42,43,43,43,43,44,44,44,44,45,45,45];function Us(e,n=0){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const s=Number(e);if(Number.isFinite(s))return s}return n}function Vl(e){return typeof e=="string"?e:""}function Of(e){return Array.isArray(e)?e.map(n=>Us(n,Number.NaN)).filter(n=>Number.isFinite(n)).map(n=>Math.trunc(n)):[]}function yA(e){const n=Us(e.id,Number.NaN);if(!Number.isFinite(n))return null;const s=Us(e.display?.row,0),i=Us(e.display?.col,0);return{id:Math.trunc(n),displayName:Vl(e.display_name)||`Ability ${n}`,descriptionHtml:Vl(e.desc),parents:Of(e.parents),dependencies:Of(e.dependencies),blockers:Of(e.blockers),cost:Math.max(0,Math.trunc(Us(e.cost,1))),archetype:Vl(e.archetype).trim()||null,archetypeReq:Math.max(0,Math.trunc(Us(e.archetype_req,0))),reqArchetype:Vl(e.req_archetype).trim()||null,baseAbilityId:e.base_abil==null?null:Math.trunc(Us(e.base_abil,Number.NaN)),display:{row:Math.max(0,Math.trunc(s)),col:Math.max(0,Math.trunc(i)),icon:Vl(e.display?.icon)||"node_0"},properties:typeof e.properties=="object"&&e.properties?e.properties:{},effects:Array.isArray(e.effects)?e.effects.filter(r=>!!r&&typeof r=="object"):[]}}function bA(e,n){const s=n.map(yA).filter(u=>u!==null).sort((u,d)=>{const g=u.display.row-d.display.row;if(g!==0)return g;const p=u.display.col-d.display.col;return p!==0?p:u.id-d.id}),i=new Map;let r=0,c=0;for(const u of s)i.set(u.id,u),r=Math.max(r,u.display.row),c=Math.max(c,u.display.col);return{className:e,nodes:s,nodeById:i,maxRow:r,maxCol:c}}function xA(e,n){const s={};for(const i of vA){const r=Array.isArray(e[i])?e[i]:[];s[i]=bA(i,r)}return{version:n,classes:s}}function SA(e){if(!Number.isFinite(e))return 45;const n=Math.trunc(e);return n>=Af.length?45:n<1?Af[1]:Af[n]??45}function zf(e,n,s,i,r){if(e.parents.length===0)return e.cost>r?{ok:!1,hardBlocked:!1,reason:"not enough ability points left"}:{ok:!0,hardBlocked:!1,reason:""};const c=e.dependencies.filter(g=>!s.has(g));if(c.length>0)return{ok:!1,hardBlocked:!0,reason:`missing dep: ${c.map(p=>`"${n.nodeById.get(p)?.displayName??p}"`).join(", ")}`};const u=e.blockers.filter(g=>s.has(g));if(u.length>0)return{ok:!1,hardBlocked:!0,reason:`blocked by: ${u.map(p=>`"${n.nodeById.get(p)?.displayName??p}"`).join(", ")}`};if(!e.parents.some(g=>s.has(g)))return{ok:!1,hardBlocked:!1,reason:"not reachable"};if(e.archetypeReq>0){const g=e.reqArchetype||e.archetype,p=g?i.get(g)??0:0;if(!g||p<e.archetypeReq)return{ok:!1,hardBlocked:!1,reason:`${g??"Archetype"}: ${p} < ${e.archetypeReq}`}}return e.cost>r?{ok:!1,hardBlocked:!1,reason:"not enough ability points left"}:{ok:!0,hardBlocked:!1,reason:""}}function wA(e,n,s){const i=new Set(n.filter(C=>e.nodeById.has(C)));let r=new Set(i),c=e.nodes.filter(C=>r.has(C.id));const u=new Set,d=new Map;let g=0;const p=new Map;for(;;){let C=!1;const O=[];for(const R of c){const I=zf(R,e,u,d,9999);if(!I.ok){O.push(R),p.set(R.id,{reason:I.reason,hardBlocked:I.hardBlocked});continue}p.delete(R.id),u.add(R.id),r.delete(R.id),g+=R.cost,R.archetype&&d.set(R.archetype,(d.get(R.archetype)??0)+1),C=!0}if(c=O,!C)break}const y=SA(s),v=y-g,b=[];for(const C of e.nodes){if(u.has(C.id))continue;zf(C,e,u,d,v).ok&&b.push(C.id)}const S={};for(const C of e.nodes){if(u.has(C.id)){S[C.id]={active:!0,selectable:!0,hardBlocked:!1,reason:null};continue}const O=p.get(C.id);if(O){S[C.id]={active:!1,selectable:!1,hardBlocked:O.hardBlocked,reason:O.reason};continue}const R=zf(C,e,u,d,v);S[C.id]={active:!1,selectable:R.ok,hardBlocked:R.hardBlocked,reason:R.ok?null:R.reason}}const T=[];let E=!1;g>y&&T.push(`too many ability points assigned! (${g} > ${y})`);for(const C of c){const O=p.get(C.id);O&&(O.hardBlocked&&(E=!0),T.push(`${C.displayName}: ${O.reason}`))}return{apCap:y,apUsed:g,apRemaining:v,reachable:u,pending:c,unresolved:p,availableIds:b,errors:T,hardErrors:E,archetypeCounts:d,nodeStatusById:S}}function Hc(e,n,s){const i=wA(e,n,s),r=e.nodes.filter(d=>i.reachable.has(d.id)).map(d=>d.id),c=i.pending.map(d=>d.id),u=Object.fromEntries([...i.archetypeCounts.entries()].sort((d,g)=>d[0].localeCompare(g[0])));return{className:e.className,level:s,apCap:i.apCap,apUsed:i.apUsed,apRemaining:i.apRemaining,selectedIdsInput:[...n],activeIds:r,unresolvedIds:c,availableIds:i.availableIds,hardErrors:i.hardErrors,errors:i.errors,archetypeCounts:u,nodeStatusById:i.nodeStatusById}}function _A(e,n,s){let i=[...new Set(n)].filter(r=>e.nodeById.has(r));for(;;){const r=Hc(e,i,s);if(r.unresolvedIds.length===0&&r.apUsed<=r.apCap)return r.activeIds;const c=new Set(r.activeIds),u=i.filter(d=>c.has(d));if(u.length===i.length)return u;i=u}}function EA(e,n,s,i){if(!e.nodeById.has(s))return[...n];const r=new Set(n);return r.has(s)?(r.delete(s),_A(e,[...r],i)):Hc(e,n,i).nodeStatusById[s]?.selectable?(r.add(s),e.nodes.filter(d=>r.has(d.id)).map(d=>d.id)):[...n]}function fS(e,n){return!e||!n?null:e.classes[n]??null}function TA(e){return e.length>20?`${e.slice(0,19)}`:e}function MA(e,n){return e??n??null}function NA(e){const n=MA(e.selectedClass,e.inferredClass),s=w.useMemo(()=>fS(e.dataset,n),[e.dataset,n]),i=w.useMemo(()=>n?e.selectionsByClass[n]??[]:[],[e.selectionsByClass,n]),r=w.useMemo(()=>s?Hc(s,i,e.level):null,[s,i,e.level]),[c,u]=w.useState(null);w.useEffect(()=>{if(!s){u(null);return}c!=null&&s.nodeById.has(c)||u(r?.activeIds[0]??s.nodes[0]?.id??null)},[s,c,r]);const d=w.useMemo(()=>!s||c==null?null:s.nodeById.get(c)??null,[s,c]),g=S=>{n&&e.onSelectionsChange({...e.selectionsByClass,[n]:S})},p=S=>{if(!s||!n)return;const T=EA(s,i,S,e.level);g(T),u(S)},y=()=>{n&&e.onSelectionsChange({...e.selectionsByClass,[n]:[]})},v=r?.activeIds.length??0,b=s?{gridTemplateColumns:`repeat(${Math.max(1,s.maxCol+1)}, minmax(56px, 1fr))`,gridTemplateRows:`repeat(${Math.max(1,s.maxRow+1)}, minmax(56px, auto))`}:void 0;return m.jsx(zh,{open:e.open,onOpenChange:e.onOpenChange,title:"Ability Tree",description:"Legacy ability tree data and activation rules integrated into Workbench. Effects are tracked here, but Workbench DPS/EHP still excludes ability-tree math for now.",className:"w-[min(97vw,1320px)]",footer:m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:n?`Editing ${n} tree at level ${e.level}.`:"Select a class (or equip a class weapon) to start editing an ability tree."}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(Ne,{variant:"ghost",onClick:y,disabled:!n||v===0,children:"Reset Tree"}),m.jsx(Ne,{onClick:()=>e.onOpenChange(!1),children:"Done"})]})]}),children:e.loading?m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-4 text-sm text-[var(--wb-muted)]",children:"Loading ability tree data..."}):e.error?m.jsx("div",{className:"rounded-xl border border-rose-400/30 bg-rose-400/8 p-4 text-sm text-rose-100",children:e.error}):n?!s||!r?m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-4 text-sm text-[var(--wb-muted)]",children:["No ability tree data available for ",n,"."]}):m.jsxs("div",{className:"grid min-h-0 grid-cols-1 gap-3 xl:grid-cols-[minmax(0,1fr)_360px]",children:[m.jsxs("div",{className:"min-h-0 space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-4",children:[m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"AP"}),m.jsxs("div",{className:"mt-1 text-lg font-semibold",children:[r.apUsed," / ",r.apCap]}),m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[r.apRemaining," left"]})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Selected"}),m.jsx("div",{className:"mt-1 text-lg font-semibold",children:r.activeIds.length}),m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[r.availableIds.length," available next"]})]}),m.jsxs("div",{className:"wb-card p-3 sm:col-span-2",children:[m.jsxs("div",{className:"mb-2 flex items-center gap-2 text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:[m.jsx(WE,{size:12}),"Archetypes"]}),m.jsx("div",{className:"flex flex-wrap gap-1",children:Object.keys(r.archetypeCounts).length===0?m.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:"No archetype points yet."}):Object.entries(r.archetypeCounts).map(([S,T])=>m.jsxs("span",{className:"wb-chip",children:[S,": ",T]},S))})]})]}),r.errors.length>0?m.jsxs("div",{className:"rounded-xl border border-amber-400/25 bg-amber-400/8 p-3",children:[m.jsxs("div",{className:"mb-2 flex items-center gap-2 text-xs font-semibold text-amber-100",children:[m.jsx(eT,{size:14}),"Tree Validation (",r.hardErrors?"hard":"soft"," issues)"]}),m.jsx(Vi,{className:"max-h-28",children:m.jsx("div",{className:"grid gap-1",children:r.errors.map((S,T)=>m.jsx("div",{className:"text-xs text-amber-100/95",children:S},`${S}-${T}`))})})]}):null,m.jsx(Gi,{title:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(ub,{size:14}),n," Tree"]}),headerRight:m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:e.selectedClass?"Using selected class":e.inferredClass?"Using weapon-inferred class":""}),className:"min-h-0",children:m.jsx(Vi,{className:"max-h-[52vh] p-3",children:m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/15 p-2",children:m.jsx("div",{className:"grid gap-2",style:b,children:s.nodes.map(S=>{const T=r.nodeStatusById[S.id],E=!!T?.active,C=!!T?.selectable,O=!!T?.hardBlocked;return m.jsxs("button",{type:"button",className:["rounded-xl border p-2 text-left transition",E?"border-cyan-300/40 bg-cyan-300/12 shadow-[0_0_0_1px_rgba(34,211,238,.15)]":C?"border-emerald-400/30 bg-emerald-400/7 hover:bg-emerald-400/12":O?"border-rose-400/25 bg-rose-400/7":"border-[var(--wb-border-muted)] bg-black/15"].join(" "),style:{gridColumnStart:S.display.col+1,gridRowStart:S.display.row+1},title:T?.reason??"",onClick:()=>p(S.id),onMouseEnter:()=>u(S.id),onFocus:()=>u(S.id),children:[m.jsxs("div",{className:"text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:["#",S.id]}),m.jsx("div",{className:"mt-1 text-xs font-semibold leading-tight",children:TA(S.displayName)}),m.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2 text-[10px]",children:[m.jsxs("span",{className:"text-[var(--wb-muted)]",children:["AP ",S.cost]}),S.archetype?m.jsx("span",{className:"wb-chip px-1.5 py-0.5",children:S.archetype}):null]})]},S.id)})})})})})]}),m.jsxs("div",{className:"min-h-0 space-y-3",children:[m.jsx(Gi,{title:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(zE,{size:14}),"Node Details"]}),className:"min-h-0",children:m.jsx("div",{className:"space-y-3 p-3",children:d?m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-base font-semibold",children:d.displayName}),m.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[m.jsxs("span",{className:"wb-chip",children:["AP ",d.cost]}),d.archetype?m.jsx("span",{className:"wb-chip",children:d.archetype}):null,d.archetypeReq>0?m.jsxs("span",{className:"wb-chip",children:["Req ",d.reqArchetype||d.archetype||"Archetype",": ",d.archetypeReq]}):null,r.nodeStatusById[d.id]?.reason?m.jsx("span",{className:"wb-chip text-amber-100",children:r.nodeStatusById[d.id]?.reason}):null]})]}),m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs leading-relaxed text-[var(--wb-text)] [&_br]:block [&_br]:content-[''] [&_span]:text-inherit",dangerouslySetInnerHTML:{__html:d.descriptionHtml||'<span class="text-slate-400">No description.</span>'}}),m.jsxs("div",{className:"grid gap-2 text-xs",children:[m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[m.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Parents"}),m.jsx("div",{className:"mt-1",children:d.parents.length===0?"Root node":d.parents.map(S=>s.nodeById.get(S)?.displayName??`#${S}`).join("  ")})]}),d.dependencies.length>0?m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[m.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Dependencies"}),m.jsx("div",{className:"mt-1",children:d.dependencies.map(S=>s.nodeById.get(S)?.displayName??`#${S}`).join("  ")})]}):null,d.blockers.length>0?m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[m.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Blockers"}),m.jsx("div",{className:"mt-1",children:d.blockers.map(S=>s.nodeById.get(S)?.displayName??`#${S}`).join("  ")})]}):null]})]}):m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs text-[var(--wb-muted)]",children:"Hover or focus an ability node to inspect it here."})})}),m.jsx(Gi,{title:"Selected Abilities",className:"min-h-0",children:m.jsx(Vi,{className:"max-h-[28vh] p-3",children:r.activeIds.length===0?m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs text-[var(--wb-muted)]",children:"No abilities selected yet."}):m.jsx("div",{className:"grid gap-1",children:r.activeIds.map(S=>{const T=s.nodeById.get(S);return T?m.jsx(et,{className:"justify-start text-left",active:c===S,onClick:()=>u(S),title:`AP ${T.cost}`,children:T.displayName},S):null})})})})]})]}):m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-4 text-sm text-[var(--wb-muted)]",children:"Pick a class in the Workbench header, or equip a weapon so Workbench can infer the class and load the correct ability tree."})})}const jA=["helmet","chestplate","leggings","boots"],CA=["spear","wand","dagger","bow","relik"],DA=["ring","bracelet","necklace"],RA=["HELMET","CHESTPLATE","LEGGINGS","BOOTS","RELIK","WAND","SPEAR","DAGGER","BOW","RING","NECKLACE","BRACELET","POTION","SCROLL","FOOD"],kA=["1-3","3-5","5-7","7-9","10-13","13-15","15-17","17-19","20-23","23-25","25-27","27-29","30-33","33-35","35-37","37-39","40-43","43-45","45-47","47-49","50-53","53-55","55-57","57-59","60-63","63-65","65-67","67-69","70-73","73-75","75-77","77-79","80-83","83-85","85-87","87-89","90-93","93-95","95-97","97-99","100-103","103-105"],hS=["SLOW","NORMAL","FAST"];function Zh(e){const n=e.toLowerCase();return jA.includes(n)?"armor":CA.includes(n)?"weapon":DA.includes(n)?"accessory":"consumable"}const mS={offense:1,defense:.6,utility:.4,skillPoints:.3,reqPenalty:.5},Ls={recipeType:"HELMET",levelRange:"103-105",matTiers:null,atkSpd:null,weights:mS,mustIncludeIngredients:[],excludedIngredients:[],topN:30,topKPerSlot:120,beamWidth:400,target:{},maxReqs:[null,null,null,null,null]},ms=4e3,C0=[0,1,1.25,1.4],oh=["e","t","w","f","a"],AA=[{min:3,max:6,convert:17,defPlus:2,defMinus:1},{min:5,max:8,convert:21,defPlus:4,defMinus:2},{min:6,max:10,convert:25,defPlus:8,defMinus:3},{min:7,max:10,convert:31,defPlus:14,defMinus:5},{min:9,max:11,convert:38,defPlus:22,defMinus:9},{min:11,max:13,convert:46,defPlus:30,defMinus:13},{min:1,max:8,convert:9,defPlus:3,defMinus:1},{min:1,max:12,convert:11,defPlus:5,defMinus:1},{min:2,max:15,convert:13,defPlus:9,defMinus:2},{min:3,max:15,convert:17,defPlus:14,defMinus:4},{min:4,max:17,convert:22,defPlus:20,defMinus:7},{min:5,max:20,convert:28,defPlus:28,defMinus:10},{min:3,max:4,convert:13,defPlus:3,defMinus:1},{min:4,max:6,convert:15,defPlus:6,defMinus:1},{min:5,max:8,convert:17,defPlus:11,defMinus:2},{min:6,max:8,convert:21,defPlus:18,defMinus:4},{min:7,max:10,convert:26,defPlus:28,defMinus:7},{min:9,max:11,convert:32,defPlus:40,defMinus:10},{min:2,max:5,convert:14,defPlus:3,defMinus:1},{min:4,max:8,convert:16,defPlus:5,defMinus:2},{min:5,max:9,convert:19,defPlus:9,defMinus:3},{min:6,max:9,convert:24,defPlus:16,defMinus:5},{min:8,max:10,convert:30,defPlus:25,defMinus:9},{min:10,max:12,convert:37,defPlus:36,defMinus:13},{min:2,max:6,convert:11,defPlus:3,defMinus:1},{min:3,max:10,convert:14,defPlus:6,defMinus:2},{min:4,max:11,convert:17,defPlus:10,defMinus:3},{min:5,max:11,convert:22,defPlus:16,defMinus:5},{min:7,max:12,convert:28,defPlus:24,defMinus:9},{min:8,max:14,convert:35,defPlus:34,defMinus:13}];function OA(e){return e/6|0}function zA(e){return oh[OA(e)]}function PA(e){const n=[[100,100],[100,100],[100,100]];for(let s=0;s<6;s++){const r=e[s].posMods,c=Math.floor(s/2),u=s%2;if(r.above!==0)for(let d=c-1;d>=0;d--)n[d][u]+=r.above;if(r.under!==0)for(let d=c+1;d<3;d++)n[d][u]+=r.under;if(r.left!==0&&u===1&&(n[c][u-1]+=r.left),r.right!==0&&u===0&&(n[c][u+1]+=r.right),r.touching!==0)for(let d=0;d<3;d++)for(let g=0;g<2;g++)(Math.abs(d-c)===1&&g===u||d===c&&Math.abs(g-u)===1)&&(n[d][g]+=r.touching);if(r.notTouching!==0)for(let d=0;d<3;d++)for(let g=0;g<2;g++)(Math.abs(d-c)>1||Math.abs(d-c)===1&&Math.abs(g-u)===1)&&(n[d][g]+=r.notTouching)}return n.flat()}function Fh(e,n,s,i){const r=e.type.toLowerCase(),c=Zh(r);let u=!0;for(const Z of s)if(Z.id!==ms){u=!1;break}let d=0,g=0;(c==="weapon"||c==="armor")&&(e.lvl[0]<30?d=1:e.lvl[0]<70?d=2:d=3),c==="consumable"&&(e.lvl[0]<30?g=1:e.lvl[0]<70?g=2:g=3,u&&(g=3));const p=e.materials.map(Z=>Z.amount),y=(C0[n[0]]*p[0]+C0[n[1]]*p[1])/(p[0]+p[1]);let v=[e.durability[0],e.durability[1]],b=[e.duration[0],e.duration[1]];c==="consumable"?(u&&(b=[e.basicDuration[0],e.basicDuration[1]]),b=[Math.round(b[0]*y),Math.round(b[1]*y)]):v=[Math.round(v[0]*y),Math.round(v[1]*y)];const S=e.healthOrDamage[0],T=e.healthOrDamage[1];let E=0,C=0,O="0-0",R="0-0";const I={e:0,t:0,w:0,f:0,a:0};if(c==="armor")E=Math.floor(T*y),C=Math.floor(S*y);else if(c==="weapon"){let Z=2.05;i==="SLOW"?Z/=1.5:i==="NORMAL"?Z=1:i==="FAST"&&(Z/=2.5);const le=Math.floor(Math.floor(S*y)*Z),Q=Math.floor(Math.floor(T*y)*Z);R=`${Math.floor(le*.9)}-${Math.floor(le*1.1)}`,O=`${Math.floor(Q*.9)}-${Math.floor(Q*1.1)}`}else c==="consumable"&&u&&(E=Math.floor(T*y),C=Math.floor(S*y));if(c==="armor"||c==="accessory"){for(const Z of s)if(Z.isPowder&&Z.pid!=null){const le=AA[Z.pid],Q=zA(Z.pid),L=oh[(oh.indexOf(Q)+4)%5];I[Q]=(I[Q]||0)+le.defPlus,I[L]=(I[L]||0)-le.defMinus}}const B=PA(s),q=[0,0,0,0,0],N={},j={};for(let Z=0;Z<6;Z++){const le=s[Z],Q=B[Z]/100,L=le.itemIDs;if(c!=="consumable"){const Y=["strReq","dexReq","intReq","defReq","agiReq"];for(let ae=0;ae<Y.length;ae++){const k=L[Y[ae]];k!==0&&(le.isPowder?q[ae]+=Math.round(k):q[ae]+=Math.round(k*Q))}}L.dura!==0&&(v[0]+=L.dura,v[1]+=L.dura),le.consumableIDs.dura!==0&&(b[0]+=le.consumableIDs.dura,b[1]+=le.consumableIDs.dura),le.consumableIDs.charges!==0&&(g+=le.consumableIDs.charges);for(const[Y,ae]of Object.entries(le.ids)){if(ae.max===0&&ae.min===0)continue;let k=ae.min,G=ae.max;const M=[Math.floor(k*Q),Math.floor(G*Q)].sort((z,ee)=>z-ee);k=M[0],G=M[1],j[Y]=(j[Y]??0)+k,N[Y]=(N[Y]??0)+G}}return v[0]=Math.max(1,Math.floor(v[0])),v[1]=Math.max(1,Math.floor(v[1])),u||(b[0]=Math.max(10,b[0]),b[1]=Math.max(10,b[1])),g=Math.max(g,c==="consumable"?1:0),{category:c,type:r,lvl:e.lvl[1],hp:E,hpLow:C,nDam:O,nDamLow:R,eDam:"0-0",tDam:"0-0",wDam:"0-0",fDam:"0-0",aDam:"0-0",eDef:I.e,tDef:I.t,wDef:I.w,fDef:I.f,aDef:I.a,atkSpd:i,durability:v,duration:b,charges:g,slots:d,reqs:[q[0],q[1],q[2],q[3],q[4]],effectiveness:B,maxRolls:N,minRolls:j}}function gS(e,n,s,i,r){const c={SLOW:0,NORMAL:1,FAST:2},u=[];function d(v,b){for(let S=b-1;S>=0;S--)u.push(v>>S&1)}d(0,1),d(2,7);for(const v of e)d(v,12);d(n,12),d(s[0]-1,3),d(s[1]-1,3),r==="weapon"&&d(c[i]??0,4);const g=u.length%6;if(g!==0)for(let v=0;v<6-g;v++)u.push(0);const p="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+-";let y="";for(let v=0;v<u.length;v+=6){let b=0;for(let S=0;S<6;S++)b=b<<1|(u[v+S]??0);y+=p[b]}return"CR-"+y}const pS=["sdPct","sdRaw","mdPct","mdRaw","damPct","poison","fDamPct","wDamPct","aDamPct","tDamPct","eDamPct","spPct1","spRaw1","spPct2","spRaw2","spPct3","spRaw3","spPct4","spRaw4","rSdRaw","critDamPct"],vS=["hpBonus","hprRaw","hprPct","fDefPct","wDefPct","aDefPct","tDefPct","eDefPct"],yS=["mr","ms","ls","spd","xpb","lb","ref","thorns","spRegen","eSteal","sprint","sprintReg","jh","lq","gXp","gSpd"],bS=["str","dex","int","def","agi"];function xS(e,n){let s=0;for(const i of n){const r=e.maxRolls[i]??0;r>0&&(s+=r)}return s}function IA(e,n){let s=0;for(const i of n)s+=e.maxRolls[i]??0;return s}function BA(e){let n=xS(e,pS);return e.category==="armor"&&(n+=e.hp*.02),n}function LA(e){let n=xS(e,vS);return e.category==="armor"&&(n+=e.hp*.15),n+=Math.max(0,e.eDef)+Math.max(0,e.tDef)+Math.max(0,e.wDef)+Math.max(0,e.fDef)+Math.max(0,e.aDef),n}function qA(e){let n=0;const s=e.maxRolls.mr??0,i=e.maxRolls.ms??0,r=e.maxRolls.ls??0,c=e.maxRolls.spd??0;n+=s*12+i*8+r*6+c*3;for(const u of yS){if(u==="mr"||u==="ms"||u==="ls"||u==="spd")continue;const d=e.maxRolls[u]??0;d>0&&(n+=d)}return n}function UA(e){return IA(e,bS)}function $A(e){let n=0;for(const s of e.reqs)n+=Math.max(0,s);return n}function SS(e,n){if(n==="durability")return[e.durability[0],e.durability[1]];if(n==="duration")return[e.duration[0],e.duration[1]];const s=e.maxRolls[n]??0;return[s,s]}function HA(e,n){let s=0;for(const[i,r]of Object.entries(n)){const[c,u]=SS(e,i);if(typeof r.min=="number"&&c<r.min){const d=r.min-c;s+=d*200+d*d}if(typeof r.max=="number"&&u>r.max){const d=u-r.max;s+=d*200+d*d}}return s}function wS(e,n){for(const[s,i]of Object.entries(n)){const[r,c]=SS(e,s);if(typeof i.min=="number"&&r<i.min||typeof i.max=="number"&&c>i.max)return!1}return!0}function Yh(e,n,s){const i=BA(e)*n.offense,r=LA(e)*n.defense,c=qA(e)*n.utility,u=UA(e)*n.skillPoints,d=$A(e)*n.reqPenalty,g=HA(e,s.target),p={offense:i,defense:r,utility:c,skillPoints:u,reqPenalty:d,thresholdPenalty:g};return{score:i+r+c+u-d-g,breakdown:p}}function Gh(e,n,s){let i=0;for(const[c,u]of Object.entries(e.ids)){const d=u.max;pS.includes(c)&&d>0?i+=d*n.offense:vS.includes(c)&&d>0?i+=d*n.defense:yS.includes(c)?c==="mr"?i+=d*12*n.utility:c==="ms"?i+=d*8*n.utility:c==="ls"?i+=d*6*n.utility:c==="spd"?i+=d*3*n.utility:d>0&&(i+=d*n.utility):bS.includes(c)&&(i+=d*n.skillPoints),s?.has(c)&&d>0&&(i+=d*50)}const r=Math.max(0,e.itemIDs.strReq)+Math.max(0,e.itemIDs.dexReq)+Math.max(0,e.itemIDs.intReq)+Math.max(0,e.itemIDs.defReq)+Math.max(0,e.itemIDs.agiReq);return i-=r*n.reqPenalty*.5,i}const bt=6,ZA=.65,ch=2e3,FA=36,YA=12,GA=12,_S=10;function VA(e,n,s){const i=e.recipesByType.get(n.toUpperCase());if(!i)return null;const r=`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()}-${s}`;return i.find(c=>c.name===r)??null}function KA(e,n,s){const i=n.skill.toUpperCase(),r=n.lvl[1],c=new Set(s.excludedIngredients),u=[];for(const d of e.ingredients)d.id!==ms&&(c.has(d.id)||d.lvl>r||d.skills.some(g=>g.toUpperCase()===i)&&u.push(d));return u}function yr(e,n){return n==="durability"?e.itemIDs.dura??0:n==="duration"?e.consumableIDs.dura??0:e.ids[n]?.max??0}function WA(e){const n=e.posMods;return n.left>0||n.right>0||n.above>0||n.under>0||n.touching>0||n.notTouching>0}function ES(e){const n=e.posMods;return Math.max(0,n.left)+Math.max(0,n.right)+Math.max(0,n.above)+Math.max(0,n.under)+Math.max(0,n.touching)+Math.max(0,n.notTouching)}function TS(e,n){let s=0;for(const i of n){const r=yr(e,i);r>0&&(s+=r)}return s}function XA(e,n,s){const i=new Set(s.mustIncludeIngredients),r=new Set(Object.keys(s.target)),c=r.size>0,u=n.map(v=>({ing:v,score:Gh(v,s.weights,c?r:void 0)}));u.sort((v,b)=>b.score-v.score);const d=s.topKPerSlot,g=new Set,p=[e.noIngredient];g.add(ms);let y=0;for(const{ing:v}of u)i.has(v.id)&&!g.has(v.id)&&(g.add(v.id),p.push(v));for(const{ing:v}of u)if(!g.has(v.id)&&(g.add(v.id),p.push(v),y++,y>=d))break;if(c){const v=n.filter(S=>!g.has(S.id)).map(S=>({ing:S,tScore:Array.from(r).reduce((T,E)=>{const C=yr(S,E);return C>0?T+C:T},0)})).filter(({tScore:S})=>S>0);v.sort((S,T)=>T.tScore-S.tScore);const b=Math.min(v.length,Math.max(30,Math.floor(d/2)));for(let S=0;S<b;S++){const{ing:T}=v[S];g.has(T.id)||(g.add(T.id),p.push(T))}}return p}function MS(e,n){if(n.size===0)return 0;const s=new Set(e);let i=0;for(const r of n)s.has(r)||i++;return i}function NS(e,n){const s=n.maxReqs;for(let i=0;i<5;i++){const r=s[i];if(r!=null&&Math.max(0,e.reqs[i])>r)return!1}return!0}function jS(e,n){if(n.size===0)return!0;const s=new Set(e);for(const i of n)if(!s.has(i))return!1;return!0}function QA(e,n,s,i,r,c){const u=[];for(let y=0;y<bt;y++)y<n.length?u.push(s.ingredientsById.get(n[y])??s.noIngredient):u.push(s.noIngredient);const d=Fh(e,r,u,c),{score:g,breakdown:p}=Yh(d,i.weights,i);return{score:g,thresholdPenalty:p.thresholdPenalty}}function JA(e,n,s){const i=Math.floor(n/2),r=n%2,c=Math.floor(s/2),u=s%2;if(i===c&&r===u)return 0;let d=0;return u===r&&c<i&&(d+=e.above),u===r&&c>i&&(d+=e.under),i===c&&r===1&&u===0&&(d+=e.left),i===c&&r===0&&u===1&&(d+=e.right),(Math.abs(c-i)===1&&u===r||c===i&&Math.abs(u-r)===1)&&(d+=e.touching),(Math.abs(c-i)>1||Math.abs(c-i)===1&&Math.abs(u-r)===1)&&(d+=e.notTouching),d}function eO(e){const n=[];for(let s=0;s<bt;s++){let i=100;for(let r=0;r<bt;r++){if(r===s)continue;let c=0;for(const u of e){const d=JA(u.posMods,r,s);d>c&&(c=d)}i+=Math.max(0,c)}n[s]=Math.max(0,i)/100}return n}function D0(e,n,s){const i=yr(e,n);if(i<=0)return 0;let r=0;for(const c of s){const u=Math.ceil(i*c);u>r&&(r=u)}return r}function tO(e,n,s){if(s.size>bt)return`Unsatisfiable constraints: ${s.size} distinct must-include ingredients exceed ${bt} slots.`;const i=new Map;for(const u of e)i.set(u.id,u);for(const u of s)if(!i.has(u))return`Unsatisfiable constraints: must-include ingredient #${u} is not eligible for this recipe/level range.`;const r=eO(e),c=Math.max(0,bt-s.size);for(const[u,d]of Object.entries(n.target)){if(typeof d.min!="number"||u==="durability"||u==="duration")continue;let g=0;for(const v of e){const b=D0(v,u,r);b>g&&(g=b)}let p=0;for(const v of s){const b=i.get(v);b&&(p+=D0(b,u,r))}const y=p+c*g;if(y<d.min)return`Unsatisfiable threshold: ${u} min ${d.min} exceeds theoretical max ${y} for the current recipe/level/ingredient pool.`}return null}function nO(e,n,s,i){const r=Object.keys(s.target),c=s.maxReqs.some(S=>S!=null),u=new Set(r),d=new Set,g=[],p=new Map;for(const S of n)p.set(S.id,S);const y=S=>{!S||d.has(S.id)||(d.add(S.id),g.push(S))};y(e.noIngredient);for(const S of i)y(p.get(S));const v=n.map(S=>({ing:S,score:TS(S,r)})).filter(({score:S})=>S>0).sort((S,T)=>T.score-S.score);for(let S=0;S<Math.min(FA,v.length);S++)y(v[S].ing);const b=n.filter(WA).map(S=>({ing:S,score:ES(S)})).sort((S,T)=>T.score-S.score);for(let S=0;S<Math.min(YA,b.length);S++)y(b[S].ing);if(c){const S=n.map(T=>{const E=Math.max(0,-T.itemIDs.strReq)+Math.max(0,-T.itemIDs.dexReq)+Math.max(0,-T.itemIDs.intReq)+Math.max(0,-T.itemIDs.defReq)+Math.max(0,-T.itemIDs.agiReq);return{ing:T,reduction:E}}).filter(({reduction:T})=>T>0).sort((T,E)=>E.reduction-T.reduction);for(let T=0;T<Math.min(GA,S.length);T++)y(S[T].ing)}if(g.length<12){const S=n.map(T=>({ing:T,score:Gh(T,s.weights,u)})).sort((T,E)=>E.score-T.score);for(const{ing:T}of S)if(y(T),g.length>=12)break}return g}function aO(e,n,s,i,r){for(const[c,u]of Object.entries(i.target)){if(typeof u.min!="number"||c==="durability"||c==="duration")continue;let d=0;for(const p of e){const y=s.get(p);if(!y)continue;const v=Math.max(0,yr(y,c));d+=v*_S}if(d+n*(r.get(c)??0)<u.min)return!1}return!0}function sO(e){const{recipe:n,catalog:s,constraints:i,category:r,matTierOptions:c,atkSpdOptions:u,mustIncludeSet:d,eligible:g,signal:p}=e,y=Date.now();let v=!1,b=0;const S=Object.keys(i.target),T=nO(s,g,i,d);if(T.length===0)return{candidates:[],processedStates:0,timedOut:!1,detail:"Deterministic fallback had no eligible fallback ingredients to explore."};const E=new Map;for(const[D,K]of Object.entries(i.target)){if(typeof K.min!="number"||D==="durability"||D==="duration")continue;let re=0;for(const he of T){const se=Math.max(0,yr(he,D));se>re&&(re=se)}E.set(D,re*_S)}const C=new Map;for(const D of T){const K=Math.max(0,-D.itemIDs.strReq)+Math.max(0,-D.itemIDs.dexReq)+Math.max(0,-D.itemIDs.intReq)+Math.max(0,-D.itemIDs.defReq)+Math.max(0,-D.itemIDs.agiReq);C.set(D.id,{threshold:TS(D,S),support:ES(D),reqReduce:K,rough:Gh(D,i.weights,new Set(S))})}const O=[...T].sort((D,K)=>{if(D.id===ms&&K.id!==ms)return 1;if(K.id===ms&&D.id!==ms)return-1;const re=d.has(D.id)?1:0,he=d.has(K.id)?1:0;if(re!==he)return he-re;const se=C.get(D.id),Z=C.get(K.id);return!se||!Z?0:se.threshold!==Z.threshold?Z.threshold-se.threshold:se.reqReduce!==Z.reqReduce?Z.reqReduce-se.reqReduce:se.support!==Z.support?Z.support-se.support:Z.rough-se.rough}),R=new Map;for(const D of T)R.set(D.id,D);const I=new Map,B=()=>Date.now()-y>=ch?(v=!0,!0):!1,q=(D,K)=>{if(v)return;if(p?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");if(B())return;const re=bt-D;if(!(MS(K,d)>re)&&aO(K,re,R,i,E)){if(D===bt){const se=[...K];if(!jS(se,d))return;const Z=se.map(le=>R.get(le)??s.noIngredient);for(const le of c)for(const Q of u){if(p?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");if(B())return;const L=Fh(n,le,Z,Q);if(b++,!NS(L,i)||!wS(L,i.target))continue;const{score:Y,breakdown:ae}=Yh(L,i.weights,i),k=gS(se,n.id,le,Q,r),G=se.join(",")+"|"+le.join(",")+"|"+Q,M=I.get(G);(!M||Y>M.score)&&I.set(G,{recipeId:n.id,ingredientIds:se,matTiers:le,atkSpd:Q,effectiveness:L.effectiveness,stats:L,score:Y,scoreBreakdown:ae,hash:k})}return}for(const se of O)if(K.push(se.id),q(D+1,K),K.pop(),v)return}};q(0,[]);const N=Array.from(I.values());N.sort((D,K)=>K.score-D.score);const j=N.slice(0,i.topN);return{candidates:j,processedStates:b,timedOut:v,detail:v?`Deterministic fallback hit ${ch}ms time budget after ${b} evaluated states.`:`Deterministic fallback evaluated ${b} states and found ${j.length} threshold-satisfying candidates.`}}function CS(e){const{catalog:n,constraints:s,signal:i,onProgress:r,alreadyThresholdRescue:c=!1}=e,u=VA(n,s.recipeType,s.levelRange);if(!u)return r?.({phase:"complete",processedStates:0,beamSize:0,expandedSlots:0,totalSlots:bt,detail:`No recipe found for ${s.recipeType}-${s.levelRange}.`}),[];const d=Zh(u.type.toLowerCase()),g=new Set(s.mustIncludeIngredients),p=Object.keys(s.target).length>0,y=KA(n,u,s);if(y.length===0)return r?.({phase:"complete",processedStates:0,beamSize:0,expandedSlots:0,totalSlots:bt,detail:"No eligible ingredients remain after recipe, level, and exclusion filters."}),[];const v=tO(y,s,g);if(v)return r?.({phase:"complete",processedStates:0,beamSize:0,expandedSlots:0,totalSlots:bt,detail:v}),[];const b=XA(n,y,s);if(b.length===0)return[];const S=s.matTiers?[s.matTiers]:[[1,1],[1,2],[1,3],[2,1],[2,2],[2,3],[3,1],[3,2],[3,3]],T=d==="weapon"?s.atkSpd?[s.atkSpd]:[...hS]:["SLOW"],E=S[S.length-1],C=T[0],O=s.beamWidth;let R=0;const I=g.size>0?1e6:0;let B=[{ingredientIds:[],score:0,thresholdPenalty:p?Number.POSITIVE_INFINITY:0,missingMust:g.size}];for(let se=0;se<bt;se++){if(i?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");const Z=[];for(const L of B)for(const Y of b){if(i?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");const ae=[...L.ingredientIds,Y.id],k=QA(u,ae,n,s,E,C),G=MS(ae,g);let M=k.score;I>0&&G===0&&(M+=I),Z.push({ingredientIds:ae,score:M,thresholdPenalty:k.thresholdPenalty,missingMust:G}),R++}const le=new Set,Q=(L,Y)=>{for(const ae of L){const k=ae.ingredientIds.join(",");if(!le.has(k)&&(le.add(k),Y.push(ae),Y.length>=O))break}};if(p){const L=Math.max(1,Math.floor(O*ZA)),Y=Math.max(1,O-L),ae=[...Z].sort((M,z)=>z.score-M.score).slice(0,L),k=[...Z].sort((M,z)=>M.missingMust!==z.missingMust?M.missingMust-z.missingMust:M.thresholdPenalty!==z.thresholdPenalty?M.thresholdPenalty-z.thresholdPenalty:z.score-M.score).slice(0,Y),G=[];Q(ae,G),G.length<O&&Q(k,G),G.length<O&&Q(Z.sort((M,z)=>z.score-M.score),G),B=G.slice(0,O)}else{const L=[];Q(Z.sort((Y,ae)=>ae.score-Y.score),L),B=L.slice(0,O)}r?.({phase:"beam-search",processedStates:R,beamSize:B.length,expandedSlots:se+1,totalSlots:bt,detail:p?`Dual-lane prune (score + threshold) on pool=${b.length}`:`Score-lane prune on pool=${b.length}`})}r?.({phase:"material-sweep",processedStates:R,beamSize:B.length,expandedSlots:bt,totalSlots:bt,detail:`Sweeping ${S.length} tier combos x ${T.length} atk speeds`});const q=new Map;for(const se of B){if(i?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");const Z=se.ingredientIds,le=Z.map(Q=>n.ingredientsById.get(Q)??n.noIngredient);for(const Q of S)for(const L of T){const Y=Fh(u,Q,le,L),{score:ae,breakdown:k}=Yh(Y,s.weights,s),G=gS(Z,u.id,Q,L,d),M=Z.join(",")+"|"+Q.join(",")+"|"+L,z=q.get(M);(!z||ae>z.score)&&q.set(M,{recipeId:u.id,ingredientIds:Z,matTiers:Q,atkSpd:L,effectiveness:Y.effectiveness,stats:Y,score:ae,scoreBreakdown:k,hash:G}),R++}}const N=Array.from(q.values());N.sort((se,Z)=>Z.score-se.score);const j=new Set,D=[],K=[];for(const se of N)j.has(se.hash)||(j.add(se.hash),jS(se.ingredientIds,g)&&NS(se.stats,s)&&(p&&wS(se.stats,s.target)?D.push(se):K.push(se)));if(p&&D.length===0&&!c){const se={...s,topKPerSlot:Math.min(400,Math.max(s.topKPerSlot*2,180)),beamWidth:Math.min(5e3,Math.max(s.beamWidth*2,1200))};if(se.topKPerSlot!==s.topKPerSlot||se.beamWidth!==s.beamWidth){r?.({phase:"threshold-rescue",processedStates:R,beamSize:B.length,expandedSlots:bt,totalSlots:bt,detail:`No candidates satisfied thresholds. Retrying beam with topK=${se.topKPerSlot}, beam=${se.beamWidth}.`});const Q=CS({catalog:n,constraints:se,signal:i,onProgress:r,alreadyThresholdRescue:!0});if(Q.length>0)return Q}r?.({phase:"deterministic-fallback",processedStates:R,beamSize:0,expandedSlots:bt,totalSlots:bt,detail:`Beam search produced no threshold-satisfying candidates. Running deterministic fallback (<=${ch}ms).`});const le=sO({recipe:u,catalog:n,constraints:s,category:d,matTierOptions:S,atkSpdOptions:T,mustIncludeSet:g,eligible:y,signal:i});return R+=le.processedStates,le.candidates.length>0?(r?.({phase:"complete",processedStates:R,beamSize:le.candidates.length,expandedSlots:bt,totalSlots:bt,detail:`Beam/rescue found 0 threshold-satisfying candidates. ${le.detail}`}),le.candidates):(r?.({phase:"complete",processedStates:R,beamSize:0,expandedSlots:bt,totalSlots:bt,detail:le.timedOut?`No valid candidates found before timeout. ${le.detail}`:`No candidates satisfy all hard thresholds. ${le.detail}`}),[])}const re=p?D.slice(0,s.topN):K.slice(0,s.topN),he=D.length;return r?.({phase:"complete",processedStates:R,beamSize:re.length,expandedSlots:bt,totalSlots:bt,detail:p?he>0?`Found ${re.length} candidates (${he} satisfy thresholds) from ${R} states`:`Found 0 candidates satisfying thresholds (${K.length} failed threshold checks) from ${R} states`:`Found ${re.length} candidates from ${R} states`}),re}class iO{worker=null;requestId=0;currentReject=null;currentRequestId=null;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL(""+new URL("worker-runtime-B9duvyvV.js",import.meta.url).href,import.meta.url),{type:"module"}))}async run(n,s,i={}){if(!this.worker)return CS({catalog:n,constraints:s,onProgress:i.onProgress,signal:i.signal});const r=++this.requestId;return this.currentRequestId=r,new Promise((c,u)=>{this.currentReject=u;const d=()=>{this.worker?.postMessage({type:"cancel",requestId:r}),u(new DOMException("Recipe solver cancelled","AbortError"))};i.signal?.addEventListener("abort",d,{once:!0});const g=p=>{const y=p.data;if(y.requestId===r){if(y.type==="progress"){i.onProgress?.(y.progress);return}if(this.worker?.removeEventListener("message",g),i.signal?.removeEventListener("abort",d),this.currentReject=null,this.currentRequestId=null,y.type==="error"){u(new Error(y.message));return}c(y.candidates)}};this.worker.addEventListener("message",g),this.worker.postMessage({type:"run",requestId:r,catalog:n,constraints:s})})}cancelCurrent(){this.currentRequestId!==null&&(this.worker?.postMessage({type:"cancel",requestId:this.currentRequestId}),this.currentReject?.(new DOMException("Recipe solver cancelled","AbortError")),this.currentReject=null,this.currentRequestId=null)}dispose(){this.worker?.terminate(),this.worker=null}}function Kl(e){return e?[e.minimum,e.maximum]:[0,0]}function lO(e){const n={item:e.materials[0].item,amount:e.materials[0].amount},s={item:e.materials[1].item,amount:e.materials[1].amount};return{id:e.id,name:e.name,type:e.type,skill:e.skill,materials:[n,s],healthOrDamage:Kl(e.healthOrDamage),durability:Kl(e.durability),duration:Kl(e.duration),basicDuration:Kl(e.basicDuration),lvl:Kl(e.lvl)}}function rO(e){const n={};if(e.ids)for(const[c,u]of Object.entries(e.ids))u&&typeof u=="object"&&"minimum"in u&&(n[c]={min:u.minimum,max:u.maximum});const s={left:e.posMods?.left??0,right:e.posMods?.right??0,above:e.posMods?.above??0,under:e.posMods?.under??0,touching:e.posMods?.touching??0,notTouching:e.posMods?.notTouching??0},i={dura:e.itemIDs?.dura??0,strReq:e.itemIDs?.strReq??0,dexReq:e.itemIDs?.dexReq??0,intReq:e.itemIDs?.intReq??0,defReq:e.itemIDs?.defReq??0,agiReq:e.itemIDs?.agiReq??0},r={dura:e.consumableIDs?.dura??0,charges:e.consumableIDs?.charges??0};return{id:e.id,name:e.name,displayName:e.displayName??e.name,lvl:e.lvl,tier:e.tier,skills:e.skills??[],ids:n,itemIDs:i,consumableIDs:r,posMods:s,isPowder:e.isPowder,pid:e.pid}}function oO(){return{id:ms,name:"No Ingredient",displayName:"No Ingredient",lvl:0,tier:0,skills:[],ids:{},itemIDs:{dura:0,strReq:0,dexReq:0,intReq:0,defReq:0,agiReq:0},consumableIDs:{dura:0,charges:0},posMods:{left:0,right:0,above:0,under:0,touching:0,notTouching:0}}}function cO(e,n){const s=new Map,i=new Map;for(const p of e){s.set(p.id,p);const y=p.type.toUpperCase(),v=i.get(y)??[];v.push(p),i.set(y,v)}const r=oO(),c=[r,...n],u=new Map,d=new Map,g=new Map;for(const p of c){u.set(p.id,p),g.set(p.name.toLowerCase(),p.id),p.displayName&&g.set(p.displayName.toLowerCase(),p.id);for(const y of p.skills){const v=y.toUpperCase(),b=d.get(v)??[];b.push(p),d.set(v,b)}}return{recipes:e,recipesById:s,recipesByType:i,ingredients:c,ingredientsById:u,ingredientsBySkill:d,ingredientIdByName:g,noIngredient:r}}async function R0(e){let n=null;for(const s of e)try{const i=await fetch(s,{cache:"force-cache"});if(!i.ok)throw new Error(`HTTP ${i.status} for ${s}`);return await i.json()}catch(i){n=i}throw n instanceof Error?n:new Error("Failed to fetch data")}class uO{snapshotPromise=null;async getCatalog(){return this.snapshotPromise||(this.snapshotPromise=this.load()),this.snapshotPromise}async load(){const n=g=>{if(typeof window>"u")return g;const p=window.location.href.split("?")[0].replace(/\/[^/]*$/,"/")||window.location.origin+"/";return new URL(g,p).href},s=[n("recipes_compress.json"),"./recipes_compress.json","../recipes_compress.json","recipes_compress.json"],i=[n("ingreds_compress.json"),"./ingreds_compress.json","../ingreds_compress.json","ingreds_compress.json"],[r,c]=await Promise.all([R0(s),R0(i)]),u=r.recipes.map(lO),d=c.map(rO);return cO(u,d)}}const dO=new uO,fO={helmet:"helmet",chestplate:"chestplate",leggings:"leggings",boots:"boots",ring:"ring1",bracelet:"bracelet",necklace:"necklace",spear:"weapon",bow:"weapon",wand:"weapon",dagger:"weapon",relik:"weapon"},hO={advancedIds:"Advanced IDs only",balanced:"Balanced",offense:"Offense",defense:"Defense",utility:"Utility / Sustain",skillpoints:"Skill Points"},mO=["advancedIds","balanced","offense","defense","utility","skillpoints"];function gO(e){const n={...mS};switch(e){case"advancedIds":return{offense:.25,defense:.25,utility:.25,skillPoints:.25,reqPenalty:.25};case"offense":return{offense:2,defense:0,utility:0,skillPoints:0,reqPenalty:0};case"defense":return{offense:0,defense:2,utility:0,skillPoints:0,reqPenalty:0};case"utility":return{offense:0,defense:0,utility:2,skillPoints:0,reqPenalty:0};case"skillpoints":return{offense:0,defense:0,utility:0,skillPoints:2,reqPenalty:0};default:return n}}const pO={durability:"Durability",duration:"Duration",sdPct:"Spell Dmg %",sdRaw:"Spell Dmg Raw",mdPct:"Melee Dmg %",mdRaw:"Melee Dmg Raw",damPct:"Damage %",poison:"Poison",hpBonus:"HP Bonus",hprRaw:"HPR Raw",hprPct:"HPR %",mr:"Mana Regen",ms:"Mana Steal",ls:"Life Steal",spd:"Walk Speed",xpb:"XP Bonus",lb:"Loot Bonus",ref:"Reflection",thorns:"Thorns",expd:"Exploding",str:"STR",dex:"DEX",int:"INT",def:"DEF",agi:"AGI",eDamPct:"Earth Dmg %",tDamPct:"Thunder Dmg %",wDamPct:"Water Dmg %",fDamPct:"Fire Dmg %",aDamPct:"Air Dmg %",nDamPct:"Neutral Dmg %",rDamPct:"Elem Dmg %",eDefPct:"Earth Def %",tDefPct:"Thunder Def %",wDefPct:"Water Def %",fDefPct:"Fire Def %",aDefPct:"Air Def %",rDefPct:"Elem Def %",atkTier:"Atk Speed Bonus",spRegen:"Soul Point Regen",eSteal:"Emerald Steal",rSdRaw:"Rainbow Spell Raw",critDamPct:"Crit Damage %",spPct1:"1st Spell Cost %",spRaw1:"1st Spell Cost Raw",spPct2:"2nd Spell Cost %",spRaw2:"2nd Spell Cost Raw",spPct3:"3rd Spell Cost %",spRaw3:"3rd Spell Cost Raw",spPct4:"4th Spell Cost %",spRaw4:"4th Spell Cost Raw",sprint:"Sprint",sprintReg:"Sprint Regen",jh:"Jump Height",lq:"Loot Quality",gXp:"Gather XP",gSpd:"Gather Speed",healPct:"Healing %",kb:"Knockback",weakenEnemy:"Weaken Enemy",slowEnemy:"Slow Enemy",maxMana:"Max Mana",mainAttackRange:"Main Attack Range",eDamRaw:"Earth Dmg Raw",tDamRaw:"Thunder Dmg Raw",wDamRaw:"Water Dmg Raw",fDamRaw:"Fire Dmg Raw",aDamRaw:"Air Dmg Raw",nDamRaw:"Neutral Dmg Raw",damRaw:"Damage Raw",rDamRaw:"Elem Dmg Raw"},k0=["durability","duration","hprPct","mr","sdPct","mdPct","ls","ms","xpb","lb","ref","thorns","expd","spd","atkTier","poison","hpBonus","spRegen","eSteal","hprRaw","sdRaw","mdRaw","fDamPct","wDamPct","aDamPct","tDamPct","eDamPct","nDamPct","rDamPct","damPct","fDefPct","wDefPct","aDefPct","tDefPct","eDefPct","rDefPct","spPct1","spRaw1","spPct2","spRaw2","spPct3","spRaw3","spPct4","spRaw4","rSdRaw","sprint","sprintReg","jh","lq","gXp","gSpd","eDamRaw","tDamRaw","wDamRaw","fDamRaw","aDamRaw","nDamRaw","damRaw","rDamRaw","critDamPct","healPct","maxMana","str","dex","int","def","agi"];function DS(e){return pO[e]??e}const Wo={HELMET:"ARMOURING",CHESTPLATE:"TAILORING",LEGGINGS:"TAILORING",BOOTS:"TAILORING",SPEAR:"WEAPONSMITHING",DAGGER:"WEAPONSMITHING",WAND:"WOODWORKING",BOW:"WOODWORKING",RELIK:"WOODWORKING",RING:"JEWELING",NECKLACE:"JEWELING",BRACELET:"JEWELING",POTION:"ALCHEMISM",SCROLL:"SCRIBING",FOOD:"COOKING"};function vO(e){const n=w.useRef(null);n.current||(n.current=new iO);const[s,i]=w.useState(null),[r,c]=w.useState(null),[u,d]=w.useState("HELMET"),[g,p]=w.useState("103-105"),[y,v]=w.useState("auto"),[b,S]=w.useState(3),[T,E]=w.useState(3),[C,O]=w.useState("auto"),[R,I]=w.useState("FAST"),[B,q]=w.useState("advancedIds"),[N,j]=w.useState(""),[D,K]=w.useState(""),[re,he]=w.useState([]),se=w.useRef(1),[Z,le]=w.useState(Ls.beamWidth),[Q,L]=w.useState(Ls.topKPerSlot),[Y,ae]=w.useState(Ls.topN),[k,G]=w.useState([null,null,null,null,null]),[M,z]=w.useState([]),[ee,oe]=w.useState(""),[ue,ce]=w.useState(!1),[ye,be]=w.useState(null),[ge,_e]=w.useState(null),[Be,it]=w.useState(null),Rt=w.useRef(null),ct=Zh(u.toLowerCase())==="weapon";w.useEffect(()=>{e.open&&(s||dO.getCatalog().then(i).catch(de=>{c(de instanceof Error?de.message:"Failed to load crafting data")}))},[e.open,s]);const Gt=w.useMemo(()=>{if(!s)return 0;const de=Wo[u]??"";return s.ingredientsBySkill.get(de)?.length??0},[s,u]);function ht(de){if(!s)return{ids:[],unknown:[]};const ze=de.split(",").map(Ce=>Ce.trim()).filter(Boolean),De=[],We=[];for(const Ce of ze){const Zt=s.ingredientIdByName.get(Ce.toLowerCase());Zt==null?We.push(Ce):De.push(Zt)}return{ids:De,unknown:We}}const Jt=de=>{navigator.clipboard.writeText(de).then(()=>{it(de),setTimeout(()=>it(null),2e3)})},en=async()=>{if(!s)return;be(null),z([]),_e(null);const de=ht(N),ze=ht(D);if(de.unknown.length>0||ze.unknown.length>0){be([de.unknown.length?`Unknown must-include: ${de.unknown.join(", ")}`:"",ze.unknown.length?`Unknown excluded: ${ze.unknown.join(", ")}`:""].filter(Boolean).join(" | "));return}const De=(Wo[u]??"").toUpperCase(),We=[];for(const W of de.ids){const me=s.ingredientsById.get(W);me&&!me.skills.some(Ge=>Ge.toUpperCase()===De)&&We.push(me.displayName||me.name)}if(We.length>0){be(`${We.join(", ")} cannot be used for ${u} (${De})  they require a different profession.`);return}const Ce={};for(const W of re)W.key&&(W.min==null&&W.max==null||(Ce[W.key]={min:W.min??void 0,max:W.max??void 0}));const Zt={...Ls,recipeType:u,levelRange:g,matTiers:y==="manual"?[b,T]:null,atkSpd:ct&&C==="manual"?R:null,weights:gO(B),mustIncludeIngredients:de.ids,excludedIngredients:ze.ids,topN:Math.max(1,Math.min(100,Y)),topKPerSlot:Math.max(10,Math.min(300,Q)),beamWidth:Math.max(20,Math.min(3e3,Z)),target:Ce,maxReqs:k};Rt.current?.abort();const Mn=new AbortController;Rt.current=Mn,ce(!0),oe("Starting...");let tn="";try{const W=await n.current.run(s,Zt,{signal:Mn.signal,onProgress:me=>{me.detail&&(tn=me.detail),_e(me),oe(`${me.phase}: ${me.expandedSlots}/${me.totalSlots} slots, beam ${me.beamSize}, states ${me.processedStates}${me.detail?` | ${me.detail}`:""}`)}});z(W),W.length===0?be(tn?`No valid candidates found. ${tn}`:"No valid candidates found. Try relaxing constraints, increasing beam width/top K, or choosing a different recipe."):oe(`Done. ${W.length} candidates found.`)}catch(W){W instanceof DOMException&&W.name==="AbortError"?oe("Cancelled"):(be(W instanceof Error?W.message:"Recipe solver failed"),oe(""))}finally{ce(!1),_e(null)}},Ht=()=>{Rt.current?.abort(),n.current?.cancelCurrent(),ce(!1),oe("Cancelled"),_e(null)};return m.jsxs(zh,{open:e.open,onOpenChange:e.onOpenChange,title:"Recipe Solver",description:"Find optimal ingredient combinations for crafted items. Uses beam search over the ingredient pool.",className:"!w-[min(95vw,1360px)]",footer:m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("div",{className:"text-sm text-[var(--wb-muted)]",children:ee}),m.jsxs("div",{className:"flex gap-2",children:[ue?m.jsx(Ne,{variant:"ghost",onClick:Ht,children:"Cancel"}):null,m.jsx(Ne,{variant:"primary",onClick:en,disabled:!s||ue,children:"Solve Recipe"})]})]}),children:[r?m.jsx("div",{className:"mb-4 rounded-xl border border-rose-400/30 bg-rose-400/5 p-3 text-sm text-rose-200",children:r}):null,ue&&ge?m.jsxs("div",{className:"mb-4 rounded-xl border border-sky-400/30 bg-sky-400/5 p-3",children:[m.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:"rounded-md bg-sky-400/20 px-2 py-0.5 text-xs font-medium text-sky-100",children:ge.phase}),ge.totalSlots>0?m.jsxs("span",{className:"text-xs text-[var(--wb-muted)]",children:["Slots ",ge.expandedSlots,"/",ge.totalSlots]}):null]}),m.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-black/20",children:m.jsx("div",{className:"h-full rounded-full bg-sky-400/70 transition-all duration-300",style:{width:ge.totalSlots>0?`${100*ge.expandedSlots/ge.totalSlots}%`:"0%"}})}),m.jsxs("div",{className:"mt-2 flex flex-wrap gap-4 text-xs text-[var(--wb-muted)]",children:[m.jsxs("span",{children:["States: ",ge.processedStates.toLocaleString()]}),m.jsxs("span",{children:["Beam: ",ge.beamSize.toLocaleString()]})]})]}):null,m.jsxs("div",{className:"grid h-[52vh] min-h-0 gap-4 overflow-hidden lg:h-[56vh] lg:grid-cols-[1fr_1fr] lg:items-stretch",children:[m.jsxs("div",{className:"grid h-full min-h-0 min-w-0 gap-3 overflow-auto pr-1 wb-scrollbar",children:[m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Recipe"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{children:[m.jsx(Ie,{children:"Item Type"}),m.jsx("select",{className:"wb-select",value:u,onChange:de=>d(de.target.value),children:RA.map(de=>m.jsxs("option",{value:de,children:[de," (",Wo[de],")"]},de))})]}),m.jsxs("div",{children:[m.jsx(Ie,{children:"Level Range"}),m.jsx("select",{className:"wb-select",value:g,onChange:de=>p(de.target.value),children:kA.map(de=>m.jsx("option",{value:de,children:de},de))})]}),s?m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[Gt," compatible ingredients in pool for ",Wo[u]]}):null]})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Material Tiers"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx(et,{active:y==="auto",onClick:()=>v("auto"),children:"Auto-optimize"}),m.jsx(et,{active:y==="manual",onClick:()=>v("manual"),children:"Manual"})]}),y==="manual"?m.jsxs("div",{className:"flex gap-3",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx(Ie,{children:"Material 1 Tier"}),m.jsx("div",{className:"flex gap-2",children:[1,2,3].map(de=>m.jsx(et,{active:b===de,onClick:()=>S(de),children:de},de))})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx(Ie,{children:"Material 2 Tier"}),m.jsx("div",{className:"flex gap-2",children:[1,2,3].map(de=>m.jsx(et,{active:T===de,onClick:()=>E(de),children:de},de))})]})]}):null]})]}),ct?m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Attack Speed"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx(et,{active:C==="auto",onClick:()=>O("auto"),children:"Auto-optimize"}),m.jsx(et,{active:C==="manual",onClick:()=>O("manual"),children:"Manual"})]}),C==="manual"?m.jsx("div",{className:"flex gap-2",children:hS.map(de=>m.jsx(et,{active:R===de,onClick:()=>I(de),children:de},de))}):null]})]}):null,m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Optimization Goal"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:mO.map(de=>m.jsx(et,{active:B===de,onClick:()=>q(de),children:hO[de]},de))})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Ingredient Constraints"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{children:[m.jsx(Ie,{children:"Must-Include Ingredients (comma-separated)"}),m.jsx("textarea",{className:"wb-textarea min-h-16",value:N,onChange:de=>j(de.target.value),placeholder:"e.g. Blueshift Beacon, Depurinated Genome"})]}),m.jsxs("div",{children:[m.jsx(Ie,{children:"Excluded Ingredients (comma-separated)"}),m.jsx("textarea",{className:"wb-textarea min-h-16",value:D,onChange:de=>K(de.target.value),placeholder:"Blacklist ingredient names"})]})]})]}),m.jsx("div",{className:"wb-card p-3",children:m.jsxs("details",{className:"group",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-semibold",children:"Advanced: Stat Thresholds"}),m.jsxs("div",{className:"mt-3 grid gap-3",children:[m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Set minimum / maximum targets for specific stats on the crafted item."}),re.map(de=>m.jsx("div",{className:"rounded-lg border border-[var(--wb-border-muted)] p-2",children:m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsxs("div",{children:[m.jsx(Ie,{children:"Stat"}),m.jsx("select",{className:"wb-select w-full",value:de.key,onChange:ze=>he(De=>De.map(We=>We.id===de.id?{...We,key:ze.target.value}:We)),children:k0.map(ze=>m.jsxs("option",{value:ze,children:[DS(ze)," (",ze,")"]},ze))})]}),m.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[m.jsxs("div",{className:"min-w-[80px] flex-1",children:[m.jsx(Ie,{children:"Min"}),m.jsx("input",{className:"wb-input w-full",type:"number",value:de.min??"",onChange:ze=>{const De=ze.target.value.trim();he(We=>We.map(Ce=>Ce.id===de.id?{...Ce,min:De===""?null:Number(De)}:Ce))}})]}),m.jsxs("div",{className:"min-w-[80px] flex-1",children:[m.jsx(Ie,{children:"Max"}),m.jsx("input",{className:"wb-input w-full",type:"number",value:de.max??"",onChange:ze=>{const De=ze.target.value.trim();he(We=>We.map(Ce=>Ce.id===de.id?{...Ce,max:De===""?null:Number(De)}:Ce))}})]}),m.jsx(Ne,{variant:"ghost",className:"shrink-0",onClick:()=>he(ze=>ze.filter(De=>De.id!==de.id)),children:"Remove"})]})]})},de.id)),m.jsx("div",{children:m.jsx(Ne,{variant:"ghost",onClick:()=>he(de=>[...de,{id:se.current++,key:k0[0],min:null,max:null}]),children:"Add Threshold"})}),m.jsxs("div",{className:"mt-3 border-t border-[var(--wb-border-muted)] pt-3",children:[m.jsx(Ie,{children:"Max Skill Points (Req Limit)"}),m.jsx("div",{className:"mt-1 text-[11px] text-[var(--wb-muted)]",children:"Exclude recipes that exceed any of these. Leave empty for no limit."}),m.jsx("div",{className:"mt-2 grid grid-cols-5 gap-2",children:["STR","DEX","INT","DEF","AGI"].map((de,ze)=>m.jsxs("div",{children:[m.jsx("label",{className:"mb-0.5 block text-[11px] text-[var(--wb-muted)]",children:de}),m.jsx("input",{className:"wb-input w-full",type:"number",min:0,placeholder:"",value:k[ze]??"",onChange:De=>{const We=De.target.value.trim();G(Ce=>{const Zt=[...Ce];return Zt[ze]=We===""?null:Math.max(0,Number(We)),Zt})}})]},de))})]})]})]})}),m.jsx("div",{className:"wb-card p-3",children:m.jsxs("details",{className:"group",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-semibold",children:"Search Heuristics"}),m.jsxs("div",{className:"mt-3 grid gap-3",children:[m.jsx(za,{label:"Beam Width",value:Z,onChange:de=>le(de??Ls.beamWidth),min:20,max:3e3}),m.jsx(za,{label:"Top K per Slot",value:Q,onChange:de=>L(de??Ls.topKPerSlot),min:10,max:300}),m.jsx(za,{label:"Top N Results",value:Y,onChange:de=>ae(de??Ls.topN),min:1,max:100})]})]})})]}),m.jsx("div",{className:"h-full min-h-0 min-w-0",children:m.jsxs("div",{className:"wb-card flex h-full min-h-0 flex-col overflow-hidden p-3",children:[m.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[m.jsx("div",{className:"text-sm font-semibold",children:"Candidates"}),m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[M.length," shown"]})]}),m.jsx("div",{className:"min-h-0 flex-1 space-y-2 overflow-auto pr-1 wb-scrollbar",children:M.length===0?m.jsx("div",{className:"rounded-xl border border-dashed border-[var(--wb-border)] p-4 text-sm text-[var(--wb-muted)]",children:"Run Recipe Solver to find optimal ingredient combinations."}):M.map((de,ze)=>m.jsx(bO,{candidate:de,index:ze,catalog:s,copiedHash:Be,onCopyHash:Jt,onEquipCraft:e.onEquipCraft},`${de.hash}-${ze}`))}),ye?m.jsx("div",{className:"mt-2 rounded-xl border border-rose-400/30 bg-rose-400/8 p-2 text-xs text-rose-100",children:ye}):null]})})]})]})}function yO(e){const n=e.startsWith("CR-")?e.slice(3):e;return`${typeof window<"u"?new URL("crafter/",window.location.href).href:"crafter/"}#${n}`}function bO(e){const{candidate:n,index:s,catalog:i}=e,{stats:r,scoreBreakdown:c}=n,u=n.ingredientIds.map(v=>{const b=i?.ingredientsById.get(v);return b?.displayName??b?.name??`#${v}`}),d=[];for(const[v,b]of Object.entries(r.maxRolls))b!==0&&d.push({label:DS(v),value:b>0?`+${b}`:`${b}`});d.sort((v,b)=>{const S=typeof v.value=="string"?parseInt(v.value):v.value,T=typeof b.value=="string"?parseInt(b.value):b.value;return Math.abs(T)-Math.abs(S)});const g=()=>{window.open(yO(n.hash),"_blank","noopener,noreferrer")},p=fO[r.type.toLowerCase()]??null,y=()=>{p&&e.onEquipCraft&&e.onEquipCraft(p,{hash:n.hash,type:r.type,category:r.category,lvl:r.lvl})};return m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3",children:[m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"text-sm font-semibold",children:["#",s+1," | Score ",Math.round(n.score)]}),m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Off ",Math.round(c.offense)," | Def ",Math.round(c.defense)," | ","Util ",Math.round(c.utility)," | SP ",Math.round(c.skillPoints),c.reqPenalty>0?` | Req -${Math.round(c.reqPenalty)}`:""]}),m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Mat Tiers: ",n.matTiers[0],"/",n.matTiers[1],r.category==="weapon"?` | Atk Spd: ${n.atkSpd}`:""]})]}),m.jsxs("div",{className:"flex shrink-0 flex-col gap-1",children:[m.jsx(Ne,{className:"px-2 py-1 text-xs",onClick:()=>e.onCopyHash(n.hash),children:e.copiedHash===n.hash?"Copied!":"Copy Hash"}),m.jsx(Ne,{variant:"ghost",className:"px-2 py-1 text-xs",onClick:g,children:"Open in Crafter"}),p?m.jsx(Ne,{className:"border border-emerald-400/40 bg-emerald-400/15 px-2 py-1 text-xs text-emerald-100 hover:bg-emerald-400/25",onClick:y,children:"Use in Build"}):null]})]}),m.jsxs("div",{className:"mt-2",children:[m.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Ingredients (3x2 grid)"}),m.jsx("div",{className:"grid grid-cols-2 gap-1",children:u.map((v,b)=>m.jsxs("div",{className:"rounded-md border border-[var(--wb-border-muted)] bg-black/10 px-2 py-1 text-xs",children:[m.jsx("div",{className:"truncate",children:v}),m.jsxs("div",{className:"text-[10px] text-[var(--wb-muted)]",children:["Eff: ",n.effectiveness[b],"%"]})]},b))})]}),d.length>0?m.jsxs("div",{className:"mt-2",children:[m.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Stats (max rolls)"}),m.jsx("div",{className:"flex flex-wrap gap-1",children:d.slice(0,12).map(({label:v,value:b})=>{const S=typeof b=="string"?b.startsWith("+"):b>0;return m.jsxs("span",{className:`rounded px-1.5 py-0.5 text-[11px] ${S?"bg-emerald-400/15 text-emerald-200":"bg-rose-400/15 text-rose-200"}`,children:[v,": ",b]},v)})})]}):null,r.category==="armor"?m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["HP: ",r.hpLow,"-",r.hp," | Dur: ",r.durability[0],"-",r.durability[1],"| Reqs: [",r.reqs.join(", "),"]"]}):null,r.category==="consumable"?m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Duration: ",r.duration[0],"-",r.duration[1],"s | Charges: ",r.charges]}):null,r.category==="weapon"?m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["nDam: ",r.nDam," | Dur: ",r.durability[0],"-",r.durability[1],"| Reqs: [",r.reqs.join(", "),"]"]}):null]})}const A0="2.1.6.0";function xO(e){return typeof e=="string"&&/^\d+\.\d+\.\d+\.\d+$/.test(e)}function SO(e){return[...new Set(e)]}class wO{cache=new Map;async getDataset(n){const s=xO(n)?n:A0;return this.cache.has(s)||this.cache.set(s,this.loadDataset(s)),this.cache.get(s)}async loadDataset(n){const s=SO([n,A0]),i=[];for(const r of s){const c=this.buildUrls(r);for(const u of c)try{const d=await fetch(u,{cache:"force-cache"});if(!d.ok)throw new Error(`Failed to fetch ${u}: ${d.status}`);const g=await d.json();return xA(g,r)}catch(d){i.push(d instanceof Error?d.message:`Failed to fetch ${u}`)}}throw new Error(`Unable to load ability tree data. Tried versions: ${s.join(", ")}. ${i.slice(-4).join(" | ")}`)}buildUrls(n){return[(i=>{if(typeof window>"u")return i;const r=window.location.href.split("?")[0].replace(/\/[^/]*$/,"/")||window.location.origin+"/";return new URL(i,r).href})(`data/${n}/atree.json`),`./data/${n}/atree.json`,`../data/${n}/atree.json`,`data/${n}/atree.json`]}}const _O=new wO;class EO{numeric=new Map;maps=new Map;get(n){return this.maps.has(n)?this.maps.get(n):this.numeric.get(n)??0}getNum(n){const s=this.get(n);return typeof s=="number"?s:0}has(n){return this.maps.has(n)||this.numeric.has(n)}add(n,s){!Number.isFinite(s)||s===0||this.numeric.set(n,(this.numeric.get(n)??0)+s)}set(n,s){Number.isFinite(s)&&this.numeric.set(n,s)}getMap(n){let s=this.maps.get(n);return s||(s=new Map,this.maps.set(n,s)),s}addMap(n,s,i){if(!Number.isFinite(i)||i===0)return;const r=this.getMap(n);r.set(s,(r.get(s)??0)+i)}}const O0=["str","dex","int","def","agi"],TO=["e","t","w","f","a"],ea=["n",...TO],uh=["SUPER_SLOW","VERY_SLOW","SLOW","NORMAL","FAST","VERY_FAST","SUPER_FAST"],dh=[.51,.83,1.5,2.05,2.5,3.1,4.3],MO=[1,1,1,.867,.951],NO=[1,1,.5/Zc(150),.867,.951],jO=["nDam","eDam","tDam","wDam","fDam","aDam"],CO=["Super Slow","Very Slow","Slow","Normal","Fast","Very Fast","Super Fast"],z0=["str","dex","int","def","agi","sdPct","sdRaw","mdPct","mdRaw","atkTier","damPct","damRaw","rSdPct","rSdRaw","rMdPct","rMdRaw","rDamPct","rDamRaw","critDamPct","healPct","spPct1","spPct2","spPct3","spPct4","spRaw1","spRaw2","spRaw3","spRaw4","spPct1Final","spPct2Final","spPct3Final","spPct4Final","nSdPct","eSdPct","tSdPct","wSdPct","fSdPct","aSdPct","nMdPct","eMdPct","tMdPct","wMdPct","fMdPct","aMdPct","nDamPct","eDamPct","tDamPct","wDamPct","fDamPct","aDamPct","nSdRaw","eSdRaw","tSdRaw","wSdRaw","fSdRaw","aSdRaw","nMdRaw","eMdRaw","tMdRaw","wMdRaw","fMdRaw","aMdRaw","nDamRaw","eDamRaw","tDamRaw","wDamRaw","fDamRaw","aDamRaw","nDamAddMin","nDamAddMax","eDamAddMin","eDamAddMax","tDamAddMin","tDamAddMax","wDamAddMin","wDamAddMax","fDamAddMin","fDamAddMax","aDamAddMin","aDamAddMax","rDamAddMin","rDamAddMax","damAddMin","damAddMax","hp","hpBonus","defMult"];function ft(e,n=0){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const s=Number(e);if(Number.isFinite(s))return s}return n}function Zc(e){if(e<=0)return 0;let n=e;n>=150&&(n=150);const s=.9908;return s/(1-s)*(1-Math.pow(s,n))/100}function DO(e){return Math.max(1,Math.min(106,Math.round(e||1)))*5+5}function RO(e){if(Array.isArray(e)&&e.length>=2)return[ft(e[0]),ft(e[1])];if(typeof e=="string"){const n=e.match(/(-?\d+(?:\.\d+)?)\s*-\s*(-?\d+(?:\.\d+)?)/);if(n)return[Number(n[1]),Number(n[2])]}return[0,0]}function kO(e){if(e.category!=="weapon")return null;const n=e.legacyRaw??{},s=jO.map(r=>RO(n[r])),i=s.map(([r,c])=>r!==0||c!==0);return{atkSpd:typeof n.atkSpd=="string"&&n.atkSpd?n.atkSpd:e.atkSpd,type:e.type,tier:typeof n.tier=="string"?n.tier:e.tier,damages:s,damagePresent:i}}function AO(e){switch(e){case"bow":return{type:"replace_spell",name:"Bow Shot",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Single Shot",parts:[{name:"Single Shot",multipliers:[100,0,0,0,0,0]}]};case"relik":return{type:"replace_spell",name:"Relik Melee",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Total",parts:[{name:"Single Beam",multipliers:[33,0,0,0,0,0]},{name:"Total",hits:{"Single Beam":3}}]};case"wand":return{type:"replace_spell",name:"Wand Melee",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Melee",parts:[{name:"Melee",multipliers:[100,0,0,0,0,0]}]};default:return{type:"replace_spell",name:"Melee",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Melee",parts:[{name:"Melee",multipliers:[100,0,0,0,0,0]}]}}}function $i(e){return structuredClone(e)}function Pf(e,n){if(typeof n=="string"){const[s,i]=n.split("."),r=Number(s);if(!Number.isFinite(r)||!i)return 0;const c=e.get(r);return ft(c?.properties?.[i])}return ft(n)}function OO(e,n){const s=new Set(n.activeIds),i=new Map,r=c=>{const u={id:c.id,baseAbilityId:c.baseAbilityId??null,properties:$i(c.properties??{}),effects:$i(c.effects??[])};if(u.baseAbilityId!=null&&i.has(u.baseAbilityId)){const d=i.get(u.baseAbilityId);d.effects=d.effects.concat(u.effects);for(const[g,p]of Object.entries(u.properties))d.properties[g]=ft(d.properties[g])+ft(p);return}i.set(u.id,u)};for(const c of e.nodes)s.has(c.id)&&r(c);return i}function zO(e,n=[]){const s=new Map;for(const i of n)s.set(i.base_spell,$i(i));for(const[,i]of e)for(const r of i.effects){if(r.type!=="replace_spell")continue;const c=ft(r.base_spell,Number.NaN);if(!Number.isFinite(c))continue;const u=$i(r);let d=s.get(c);if(!d)d=u,s.set(c,d);else for(const[g,p]of Object.entries(u))d[g]=$i(p);for(const g of d.parts??[]){const p=g.hits;if(p)for(const[y,v]of Object.entries(p))p[y]=Pf(e,v)}}for(const[,i]of e)for(const r of i.effects){const c=typeof r.type=="string"?r.type:"";if(c!=="replace_spell"){if(c==="add_spell_prop"){const u=ft(r.base_spell,Number.NaN);if(!Number.isFinite(u)||!s.has(u))continue;const d=s.get(u),g=typeof r.target_part=="string"?r.target_part:null,p=typeof r.behavior=="string"?r.behavior:"merge",y=ft(r.cost);if(typeof d.cost=="number"&&(d.cost+=y),!g)continue;let v=!1;for(const b of d.parts)if(b.name===g){if("multipliers"in r&&Array.isArray(r.multipliers)&&"multipliers"in b)for(let S=0;S<r.multipliers.length;S++){const T=ft(r.multipliers[S]);Array.isArray(b.multipliers)&&(p==="overwrite"?b.multipliers[S]=T:b.multipliers[S]=(b.multipliers[S]??0)+T)}else if("power"in r&&"power"in b){const S=ft(r.power);b.power=p==="overwrite"?S:ft(b.power)+S}else if("hits"in r&&typeof r.hits=="object"&&r.hits&&"hits"in b)for(const[S,T]of Object.entries(r.hits)){const E=Pf(e,T);p==="overwrite"?b.hits[S]=E:b.hits[S]=(b.hits[S]??0)+E}if("hide"in r&&(b.display=!1),"ignored_mults"in r){const S=Array.isArray(r.ignored_mults)?r.ignored_mults.filter(T=>typeof T=="string"):[];"ignored_mults"in b&&Array.isArray(b.ignored_mults)?b.ignored_mults.push(...S):"multipliers"in b&&(b.ignored_mults=S)}v=!0;break}if(!v&&p==="merge"){const b=$i(r);if(b.name=g,typeof b.hits=="object"&&b.hits)for(const[S,T]of Object.entries(b.hits))b.hits[S]=Pf(e,T);"hide"in r&&(b.display=!1),d.parts.push(b)}typeof r.display=="string"&&(d.display=r.display)}else if(c==="convert_spell_conv"){const u=ft(r.base_spell,Number.NaN);if(!Number.isFinite(u)||!s.has(u))continue;const d=s.get(u),g=typeof r.target_part=="string"?r.target_part:"all",p=typeof r.conversion=="string"?r.conversion:"",y=ea.indexOf(p);if(y<0)continue;const v=g==="all";for(const b of d.parts){if(!("multipliers"in b)||!v&&b.name!==g)continue;const S=b.multipliers.slice(1).reduce((E,C)=>E+ft(C),0),T=[ft(b.multipliers[0]),0,0,0,0,0];T[y]=S,b.multipliers=T}}}}return s}function PO(e,n,s){let i=!1,r=!1;for(const[,c]of e)for(const u of c.effects){const d=typeof u.type=="string"?u.type:"";if(d==="raw_stat"){if(u.toggle){i=!0;continue}const g=Array.isArray(u.bonuses)?u.bonuses:[];for(const p of g){if(!p||typeof p!="object")continue;const y=typeof p.type=="string"?p.type:"",v=typeof p.name=="string"?p.name:"",b=ft(p.value);!v||b===0||y==="stat"&&(v.startsWith("damMult.")?n.addMap("damMult",v.slice(8),b):v.startsWith("healMult.")?n.addMap("healMult",v.slice(9),b):v.startsWith("defMult.")?n.add("defMult",b):n.add(v,b))}continue}d==="stat_scaling"&&(r=!0)}i&&s.push("Some ability-tree toggle effects are not applied in Workbench spell damage yet."),r&&s.push("Some ability-tree scaling/slider effects are not applied in Workbench spell damage yet.")}function IO(e,n,s){const i=new EO;for(const g of z0)i.set(g,0);i.getMap("damMult"),i.getMap("healMult");let r=0,c=0,u=[0,0,0,0,0];for(const g of tt){const p=e.slots[g];if(p==null)continue;const y=n.itemsById.get(p);if(!y)continue;const v=y.legacyRaw??{};for(const b of z0)i.add(b,ft(v[b]));r+=ft(v.hp),c+=ft(v.hpBonus),u=[u[0]+ft(v.str),u[1]+ft(v.dex),u[2]+ft(v.int),u[3]+ft(v.def),u[4]+ft(v.agi)]}const d=s??[0,0,0,0,0];return i.set("str",u[0]+d[0]),i.set("dex",u[1]+d[1]),i.set("int",u[2]+d[2]),i.set("def",u[3]+d[3]),i.set("agi",u[4]+d[4]),i.set("hp",r+c+DO(e.level)),i}function BO(e,n,s,i,r=!1,c,u=!1,d=[]){const g=n.damages.map(k=>[...k]),p=[...n.damagePresent],y=s.map(k=>ft(k));for(let k=0;k<ea.length;k++){const G=c?`:${c}`:"",M=`${ea[k]}ConvBase${G}`;c&&e.has(M)&&(y[k]+=e.getNum(M));const z=`${ea[k]}ConvBase`;e.has(z)&&(y[k]+=e.getNum(z))}const v=[],b=(y[0]??0)/100;if(b===0)for(let k=0;k<p.length;k++)p[k]=!1;let S=0,T=0;for(const k of g)v.push([k[0]*b,k[1]*b]),S+=k[0],T+=k[1];let E=0;for(let k=1;k<=5;k++){const G=y[k]??0;if(G>0){const M=G/100;v[k][0]+=M*S,v[k][1]+=M*T,p[k]=!0,E+=M}}if(E+=b,!r){const k=uh.indexOf(n.atkSpd||"NORMAL"),G=dh[k>=0?k:3]??dh[3];for(let M=0;M<v.length;M++)v[M][0]*=G,v[M][1]*=G}for(let k=0;k<ea.length;k++){if(!p[k])continue;const G=ea[k];v[k][0]+=e.getNum(`${G}DamAddMin`),v[k][1]+=e.getNum(`${G}DamAddMax`)}const C=i?"Sd":"Md",O=[0];for(let k=0;k<O0.length;k++)O.push(Zc(e.getNum(O0[k]))*MO[k]);const R=(e.getNum(`${C.toLowerCase()}Pct`)+e.getNum("damPct"))/100;let I=0,B=0;const q=[];for(let k=0;k<ea.length;k++){q.push([...v[k]]),I+=v[k][0],B+=v[k][1];const G=ea[k],M=`${G}${C}Pct`;let z=1+(O[k]??0)+R+(e.getNum(M)+e.getNum(`${G}DamPct`))/100;k>0&&(z+=(e.getNum(`r${C}Pct`)+e.getNum("rDamPct"))/100),v[k][0]*=z,v[k][1]*=z}const N=I-q[0][0],j=B-q[0][1],D=e.getNum(`${C.toLowerCase()}Raw`)+e.getNum("damRaw"),K=e.getNum(`r${C}Raw`)+e.getNum("rDamRaw");for(let k=0;k<v.length;k++){const G=q[k],M=ea[k];let z=0;p[k]&&(z+=e.getNum(`${M}${C}Raw`)+e.getNum(`${M}DamRaw`));let ee=z,oe=z;B>0&&(ee+=(I===0?G[1]/B:G[0]/I)*D,oe+=G[1]/B*D),k!==0&&j>0&&(ee+=(N===0?G[1]/j:G[0]/N)*K,oe+=G[1]/j*K),v[k][0]+=ee*E,v[k][1]+=oe*E}const re=u?1:1+(O[1]??0),he=e.getMap("damMult");let se=1;const Z=[1,1,1,1,1,1],le=[...y];for(const[k,G]of he.entries())if(!(k.includes(":")&&k.split(":")[1]!==c)&&!d.includes(k))if(k.includes(";")){const M=ea.indexOf(k.split(";")[1]);M!==-1&&(Z[M]*=1+G/100)}else se*=1+G/100;const Q=u?0:1+e.getNum("critDamPct")/100,L=[0,0],Y=[0,0],ae=[];for(let k=0;k<ea.length;k++){v[k][0]*=Z[k]*se,v[k][1]*=Z[k]*se,le[k]*=Z[k]*se,v[k][0]<0&&(v[k][0]=0),v[k][1]<0&&(v[k][1]=0);const G=[v[k][0]*re,v[k][1]*re,v[k][0]*(re+Q),v[k][1]*(re+Q)];ae.push(G),L[0]+=G[0],L[1]+=G[1],Y[0]+=G[2],Y[1]+=G[3]}return[L,Y,ae,le]}function RS(e,n,s){const i=new Map;for(const p of e.parts)i.set(p.name,{type:"need_eval",store:p});const r="use_atkspd"in e?!!e.use_atkspd:!0,c="scaling"in e?e.scaling==="spell":!0,u=p=>{const y=i.get(p);if(!y)return null;if(y.type!=="need_eval")return y;const v=y.store,b=`${e.base_spell}.${v.name}`;let S;if("multipliers"in v){const T=Array.isArray(v.ignored_mults)?v.ignored_mults:[],E=BO(n,s,v.multipliers.map(C=>ft(C)),c,!r,b,v.use_str===!1,T);S={type:"damage",name:v.name,display:v.display!==!1,normal_total:E[0],crit_total:E[1]}}else if("power"in v){const T=n.getNum("hp"),E=1+n.getNum("healPct")/100;S={type:"heal",name:v.name,display:v.display!==!1,heal_amount:ft(v.power)*T*E}}else{let T=null,E=[0,0],C=[0,0],O=0;for(const[R,I]of Object.entries(v.hits)){const B=u(R);B&&(T&&T!==B.type||(T=B.type,B.type==="damage"?(E=[E[0]+B.normal_total[0]*I,E[1]+B.normal_total[1]*I],C=[C[0]+B.crit_total[0]*I,C[1]+B.crit_total[1]*I]):O+=B.heal_amount*I))}T==="heal"?S={type:"heal",name:v.name,display:v.display!==!1,heal_amount:O}:S={type:"damage",name:v.name,display:v.display!==!1,normal_total:E,crit_total:C}}return i.set(v.name,S),S},d=[],g=Zc(n.getNum("dex"));for(const p of e.parts){const y=u(p.name);if(y)if(y.type==="damage"){const v=(y.normal_total[0]+y.normal_total[1])/2,b=(y.crit_total[0]+y.crit_total[1])/2;d.push({type:"damage",name:y.name,display:y.display,normalTotal:y.normal_total,critTotal:y.crit_total,averageNonCrit:v,averageCrit:b,averageTotal:(1-g)*v+g*b})}else d.push({type:"heal",name:y.name,display:y.display,healAmount:y.heal_amount,averageTotal:y.heal_amount})}return d}function LO(e){const{spells:n,stats:s,weapon:i}=e,r=n.get(0);if(!r||!Array.isArray(r.parts)||r.parts.length===0)return null;const c=RS(r,s,i);if(c.length===0)return null;const u=(r.display||"").trim(),d=u&&c.find(b=>b.name===u)||c.find(b=>b.display)||c[0];if(!d||d.type!=="damage")return null;const g=d.averageTotal??0,p=uh.indexOf(i.atkSpd||"NORMAL"),y=Math.max(0,Math.min(uh.length-1,(p>=0?p:3)+Math.round(s.getNum("atkTier")))),v=g*dh[y];return{perAttackAverage:g,dps:v,attackSpeedTier:CO[y]}}function qO(e,n){if(typeof n.cost!="number"||n.base_spell<1||n.base_spell>4)return null;const s=n.base_spell;let i=n.cost*(1-Zc(e.getNum("int"))*NO[2]);return i+=e.getNum(`spRaw${s}`),i=i*(1+e.getNum(`spPct${s}`)/100),i=Math.max(1,i*(1+e.getNum(`spPct${s}Final`)/100)),i}function UO(e){const{catalog:n,snapshot:s,abilityTreeTree:i,abilityTreeEvaluation:r}=e;if(!i||!r)return null;const c=s.slots.weapon;if(c==null)return null;const u=n.itemsById.get(c);if(!u)return null;const d=kO(u);if(!d)return null;const g={...s.slots},p=Pc(g,n,s.level),y=IO(s,n,p.assignedByStat),v=[];p.feasible||v.push("Spell preview uses current build state, but skill-point feasibility is invalid.");const b=OO(i,r);PO(b,y,v);const S=zO(b,[AO(d.type)]),T=LO({spells:S,stats:y,weapon:d});if(S.size===0)return{melee:T,spells:[],notes:v};const E=[];for(const C of[...S.values()].sort((O,R)=>O.base_spell-R.base_spell)){if(!Array.isArray(C.parts)||C.parts.length===0)continue;const O=RS(C,y,d);if(O.length===0)continue;const R=(C.display||"").trim(),I=R&&O.find(q=>q.name===R)||O.find(q=>q.display)||O[0];if(!I)continue;const B=I.type==="heal";E.push({baseSpell:C.base_spell,name:C.name,displayPartName:I.name,averageDisplayValue:I.averageTotal??0,isHealing:B,manaCost:qO(y,C),parts:O})}return r.activeIds.length>0&&E.length===0&&v.push("No spell damage entries found in the selected ability tree nodes."),{melee:T,spells:E,notes:v}}function P0(e){return navigator.clipboard?.writeText?navigator.clipboard.writeText(e):(window.prompt("Copy text:",e),Promise.resolve())}function I0(e){return typeof e!="string"?null:e.startsWith("slot:")?{kind:"slot",slot:e.slice(5)}:e.startsWith("bin:")?{kind:"bin",category:e.slice(4)}:null}function $O(e,n,s){const i=n.itemsById.get(e);if(!i)return null;const r=i.category;if(s.selectedSlot&&fa(s.selectedSlot)===r)return s.selectedSlot;const c=tt.filter(d=>fa(d)===r);return c.find(d=>s.slots[d]==null)??c[0]??null}function HO(e){return{slots:{...e.slots},craftedSlots:{...e.craftedSlots},binsByCategory:{helmet:[...e.binsByCategory.helmet],chestplate:[...e.binsByCategory.chestplate],leggings:[...e.binsByCategory.leggings],boots:[...e.binsByCategory.boots],ring:[...e.binsByCategory.ring],bracelet:[...e.binsByCategory.bracelet],necklace:[...e.binsByCategory.necklace],weapon:[...e.binsByCategory.weapon]},locks:{...e.locks},level:e.level,characterClass:e.characterClass,selectedSlot:e.selectedSlot,comparePreview:{...e.comparePreview},legacyHash:e.legacyHash}}function ZO(){const e=w.useRef(null);!e.current&&typeof window<"u"&&(e.current=kk(window.location));const n=e.current,[s,i]=w.useState(null),[r,c]=w.useState(null),[u,d]=w.useState(n?.search??Oa),[g,p]=w.useState(null),[y,v]=w.useState(!1),[b,S]=w.useState(!1),[T,E]=w.useState(n?.mode==="autobuilder"),[C,O]=w.useState(n?.mode==="abilitytree"),[R,I]=w.useState(!1),[B,q]=w.useState(null),[N,j]=w.useState(!1),[D,K]=w.useState(null),[re,he]=w.useState(n?.abilityTree?.selectedByClass??{}),[se,Z]=w.useState(n?.abilityTree?.version??null),[le,Q]=w.useState(""),[L,Y]=w.useState(0),[ae,k]=w.useState(()=>hb()),G=w.useRef(null),M=w.useRef(null),z=w.useRef(null),ee=Yo(W=>W.hydrateSnapshot),oe=Yo(W=>W.setLegacyHash),ue=Yo(EE(W=>({slots:W.slots,craftedSlots:W.craftedSlots,binsByCategory:W.binsByCategory,locks:W.locks,level:W.level,characterClass:W.characterClass,selectedSlot:W.selectedSlot,comparePreview:W.comparePreview,legacyHash:W.legacyHash,undoStack:W.undoStack,redoStack:W.redoStack,setLevel:W.setLevel,setCharacterClass:W.setCharacterClass,setSelectedSlot:W.setSelectedSlot,setComparePreview:W.setComparePreview,pinItem:W.pinItem,removePinnedItem:W.removePinnedItem,clearCategory:W.clearCategory,clearAll:W.clearAll,equipItem:W.equipItem,equipCraftedItem:W.equipCraftedItem,clearCraftedSlot:W.clearCraftedSlot,moveSlotToBin:W.moveSlotToBin,swapSlots:W.swapSlots,assignDraggedItemToSlot:W.assignDraggedItemToSlot,assignDraggedItemToBin:W.assignDraggedItemToBin,toggleLock:W.toggleLock,undo:W.undo,redo:W.redo,hydrateSnapshot:W.hydrateSnapshot,loadCandidate:W.loadCandidate,setLegacyHash:W.setLegacyHash}))),ce=w.useMemo(()=>HO(ue),[ue]);w.useEffect(()=>{mb(ae),oT(ae)},[ae]),w.useEffect(()=>{n?.workbenchPatch&&ee(n.workbenchPatch)},[n?.workbenchPatch,ee]),w.useEffect(()=>{let W=!1;return(async()=>{try{const me=await xT.getCatalog();if(W)return;S(!1);const Ge=new TC;if(await Ge.init(me.items),W){Ge.dispose();return}if(G.current=Ge,i(me),S(!0),n?.legacyHash){Q("Importing legacy builder hash...");try{const Ye=await Mf.decodeLegacyHash(n.legacyHash),cn={};for(const[ut,zt]of Object.entries(Ye.slots)){if(!zt)continue;const kt=me.itemIdByName.get(zt.toLowerCase());typeof kt=="number"&&(cn[ut]=kt)}const un=Yo.getState().level;ee({...n.workbenchPatch,slots:{...n.workbenchPatch?.slots??{},...cn},level:Ye.level??n.workbenchPatch?.level??un,legacyHash:Ye.legacyHash}),oe(Ye.legacyHash),Q("Imported legacy builder hash into Workbench.")}catch(Ye){console.error(Ye),Q("Failed to import legacy hash automatically. You can still open it in legacy builder.")}}}catch(me){console.error(me),c(me instanceof Error?me.message:"Failed to load item catalog")}})(),()=>{W=!0,G.current?.dispose(),M.current&&window.clearTimeout(M.current),z.current&&window.clearTimeout(z.current)}},[n,ee,oe]),w.useEffect(()=>{if(!(!s||!b||!G.current)){if(!nC(u)&&L===0){p(null),v(!1);return}return M.current&&window.clearTimeout(M.current),v(!0),M.current=window.setTimeout(async()=>{try{const W=await G.current.search(u);p(W)}catch(W){console.error(W),c(W instanceof Error?W.message:"Search failed")}finally{v(!1)}},180),()=>{M.current&&window.clearTimeout(M.current)}}},[s,b,u,L]),w.useEffect(()=>{if(!C||!s||N||B||D)return;let W=!1;return j(!0),K(null),(async()=>{try{const me=await _O.getDataset(se||s.version);if(W)return;q(me),Z(me.version)}catch(me){if(W)return;console.error(me),K(me instanceof Error?me.message:"Failed to load ability tree data")}finally{W||j(!1)}})(),()=>{W=!0}},[C,B,s,se,D]),w.useEffect(()=>{if(!(typeof window>"u"))return z.current&&window.clearTimeout(z.current),z.current=window.setTimeout(()=>{try{S0({search:u,workbenchSnapshot:ce,mode:T?"autobuilder":C?"abilitytree":null,abilityTreeState:{version:se,selectedByClass:re},replace:!0})}catch(W){console.error(W)}},250),()=>{z.current&&window.clearTimeout(z.current)}},[u,ce,T,C,re,se]);const ye=w.useMemo(()=>s?ur({slots:ce.slots,level:ce.level,characterClass:ce.characterClass},s):null,[s,ce]),be=w.useMemo(()=>{if(!s)return null;const W=ce.slots.weapon;if(W==null)return null;const me=s.itemsById.get(W);return me?me.classReq??oc(me.type):null},[s,ce.slots.weapon]),ge=ce.characterClass??be,_e=w.useMemo(()=>fS(B,ge),[B,ge]),Be=w.useMemo(()=>{if(!_e||!ge)return null;const W=re[ge]??[];return Hc(_e,W,ce.level)},[re,_e,ge,ce.level]),it=w.useMemo(()=>{if(!s||!ye)return null;const W=ce.comparePreview;if(!W.itemId||!W.slot)return null;const me={...ce.slots,[W.slot]:W.itemId};return ur({slots:me,level:ce.level,characterClass:ce.characterClass},s)},[s,ye,ce]),Rt=w.useMemo(()=>s?UO({catalog:s,snapshot:ce,abilityTreeTree:_e,abilityTreeEvaluation:Be}):null,[s,ce,_e,Be]),ct=d_(Vv(xh,{activationConstraint:{distance:6}}),Vv(yh,{coordinateGetter:xE})),Gt=W=>{const me=W.active.data.current?.dragItem;if(!me)return;const Ge=me.kind==="slot"?me.sourceSlot??null:ce.selectedSlot??null;ue.setComparePreview({itemId:me.itemId,slot:Ge})},ht=W=>{const me=W.active.data.current?.dragItem,Ge=I0(W.over?.id);!me||!Ge||Ge.kind==="slot"&&ue.setComparePreview({itemId:me.itemId,slot:Ge.slot})},Jt=W=>{const me=W.active.data.current?.dragItem,Ge=I0(W.over?.id);if(ue.setComparePreview(null),!s||!me||!Ge)return;const Ye=s.itemsById.get(me.itemId);if(Ye){if(Ge.kind==="slot"){if(fa(Ge.slot)!==Ye.category)return;ue.assignDraggedItemToSlot({targetSlot:Ge.slot,source:me.kind,itemId:me.itemId,sourceCategory:me.sourceCategory,sourceSlot:me.sourceSlot});return}if(Ge.kind==="bin"){if(Ge.category!==Ye.category)return;ue.assignDraggedItemToBin({targetCategory:Ge.category,source:me.kind,itemId:me.itemId,sourceCategory:me.sourceCategory,sourceSlot:me.sourceSlot})}}},en=W=>{if(!s)return;const me=$O(W,s,ce);me&&(ue.equipItem(me,W),ue.setSelectedSlot(me),Q(`Equipped item into ${me}.`))},Ht=W=>{if(!s)return;const me=s.itemsById.get(W);me&&ue.pinItem(me.category,me.id)},de=()=>{const W=sS(ce),me=JSON.stringify(ce,null,2);window.prompt("Copy Workbench export (JSON). URL-safe code is also in the current ?wb= param.",me),Q(`Workbench export ready. Code length: ${W.length}`)},ze=async()=>{const W=window.prompt("Paste a Workbench JSON export, Workbench URL, or legacy builder URL/hash.");if(!W)return;const me=W.trim();try{if(Mf.isSupported(me)&&s){const Ye=await Mf.decodeLegacyHash(me),cn={};for(const[un,ut]of Object.entries(Ye.slots)){const zt=s.itemIdByName.get((ut??"").toLowerCase());zt!=null&&(cn[un]=zt)}ue.hydrateSnapshot({slots:{...ce.slots,...cn},level:Ye.level??ce.level,legacyHash:Ye.legacyHash}),ue.setLegacyHash(Ye.legacyHash),Q("Imported legacy build hash.");return}if(me.startsWith("http://")||me.startsWith("https://")){const Ye=new URL(me),cn=tS(Ye),un=nS(Ye),ut=aS(Ye);d(cn),un&&ue.hydrateSnapshot(un),ut&&(he(ut.selectedByClass??{}),Z(ut.version??null)),Q("Imported Workbench URL state.");return}const Ge=JSON.parse(me);ue.hydrateSnapshot(Ge),Q("Imported Workbench JSON.")}catch(Ge){console.error(Ge),Q("Import failed. Check the pasted JSON/URL/hash.")}},De=async()=>{S0({workbenchSnapshot:ce,mode:T?"autobuilder":C?"abilitytree":null,abilityTreeState:{version:se,selectedByClass:re},replace:!0}),await P0(window.location.href),Q("Workbench link copied.")},We=async()=>{if(!ce.legacyHash){Q("No imported legacy hash is currently available.");return}const W=new URL(c0(ce.legacyHash),window.location.href).href;await P0(W),Q("Legacy builder link copied.")},Ce=()=>{window.open(c0(ce.legacyHash),"_blank","noopener,noreferrer")},Zt=()=>{K(null),E(!1),O(!0)},Mn=()=>{O(!1),I(!1),E(!0)},tn=()=>{E(!1),O(!1),I(!0)};return r?m.jsx("div",{className:"wb-app-shell flex min-h-screen items-center justify-center p-6",children:m.jsxs("div",{className:"wb-panel max-w-xl rounded-2xl p-6",children:[m.jsx("div",{className:"text-xl font-semibold",children:"Failed to load"}),m.jsx("div",{className:"mt-2 text-sm text-[var(--wb-muted)]",children:r})]})}):!s||!ye?m.jsx("div",{className:"wb-app-shell flex min-h-screen items-center justify-center p-6",children:m.jsxs("div",{className:"wb-panel max-w-xl rounded-2xl p-6",children:[m.jsx("div",{className:"text-xl font-semibold",children:"Loading..."}),m.jsx("div",{className:"mt-2 text-sm text-[var(--wb-muted)]",children:"Preparing item catalog, search index, and build state."})]})}):m.jsxs(mE,{sensors:ct,collisionDetection:h_,onDragStart:Gt,onDragOver:ht,onDragEnd:Jt,children:[m.jsxs("div",{className:"wb-app-shell flex min-h-screen flex-col gap-3 p-3 lg:p-4",children:[m.jsxs("header",{className:"wb-panel wb-hero rounded-2xl px-4 py-3",children:[m.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[m.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsxs("div",{className:"wb-theme-toggle",children:[m.jsx("span",{className:"wb-theme-toggle-label",children:"Theme"}),["minimal","classic"].map(W=>m.jsx("button",{type:"button",className:"wb-theme-toggle-button","data-active":ae===W?"true":"false",onClick:()=>k(W),children:W==="minimal"?"Minimal":"Classic"},W))]}),m.jsx("span",{className:"wb-chip",children:"Legacy-compatible imports"}),Be?m.jsxs("span",{className:"wb-chip","data-tone":"success",children:["Ability Tree ",Be.apUsed,"/",Be.apCap," AP"]}):null]}),m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Modular loadout planning studio with legacy builder compatibility."})]}),m.jsxs("button",{type:"button",className:"build-solver-logo-btn order-first flex shrink-0 cursor-pointer items-center justify-center gap-2 self-center rounded-xl px-6 py-3 text-lg font-bold tracking-tight shadow-lg sm:px-8 sm:py-4 sm:text-xl lg:order-none",onClick:Mn,title:"Open Build Solver for automated build search",children:[m.jsx(LE,{size:28,style:{color:"var(--wb-brand-icon)"},strokeWidth:2.5}),"Build Solver"]}),m.jsxs("div",{className:"flex min-w-0 flex-1 flex-wrap items-center justify-end gap-2",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:"text-xs text-[var(--wb-muted)]",children:"Class"}),m.jsxs("select",{className:"wb-select w-36",value:ce.characterClass??"",onChange:W=>ue.setCharacterClass(W.target.value||null),children:[m.jsx("option",{value:"",children:"Auto / Any"}),m.jsx("option",{value:"Warrior",children:"Warrior"}),m.jsx("option",{value:"Assassin",children:"Assassin"}),m.jsx("option",{value:"Mage",children:"Mage"}),m.jsx("option",{value:"Archer",children:"Archer"}),m.jsx("option",{value:"Shaman",children:"Shaman"})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:"text-xs text-[var(--wb-muted)]",children:"Level"}),m.jsx("input",{className:"wb-input w-22",type:"number",min:1,max:106,value:ce.level,onChange:W=>ue.setLevel(Number(W.target.value))})]}),m.jsxs(Ne,{variant:"ghost",onClick:De,children:[m.jsx(Sh,{size:13,className:"mr-1 inline"}),"Share Session"]}),m.jsxs(Ne,{variant:"ghost",onClick:Zt,children:[m.jsx(ub,{size:13,className:"mr-1 inline"}),"Ability Tree"]}),m.jsx(Ne,{variant:"primary",onClick:tn,children:"Recipe Solver"})]})]}),le?m.jsx("div",{className:"mt-3 text-xs wb-text-success",children:le}):null]}),m.jsxs("main",{className:"grid min-h-0 flex-1 grid-cols-1 gap-3 xl:grid-cols-[minmax(300px,22vw)_minmax(0,1fr)_440px] 2xl:grid-cols-[320px_minmax(0,1fr)_480px]",children:[m.jsx(PR,{catalog:s,state:u,setState:d,result:g,loading:y,selectedSlot:ce.selectedSlot,onPin:Ht,onEquip:en,onHover:()=>{},onSearch:()=>Y(W=>W+1)}),m.jsx(ak,{catalog:s,store:ue,onHoverItem:(W,me)=>ue.setComparePreview(W&&me?{itemId:W,slot:me}:null),onShareWorkbench:()=>{De()},onExportWorkbench:de,onImportWorkbench:()=>{ze()},searchResults:u.resultsBelowBuild?m.jsx(Hx,{catalog:s,result:g,selectedSlot:ce.selectedSlot,state:u,loading:y,onPin:Ht,onEquip:en,onHover:()=>{},embedded:!0}):void 0}),m.jsx(tk,{catalog:s,snapshot:ce,summary:ye,compareSummary:it,compareSlot:ce.comparePreview.slot,spellPreview:Rt,abilityTreeSummary:Be&&ge?{className:ge,apUsed:Be.apUsed,apCap:Be.apCap,selectedCount:Be.activeIds.length,hasErrors:Be.errors.length>0||Be.apUsed>Be.apCap}:null,actions:{onOpenAbilityTree:Zt,onCopyLegacyLink:()=>{We()},onOpenLegacyBuilder:Ce}})]})]}),m.jsx(pA,{open:T,onOpenChange:E,catalog:s,snapshot:ce,onLoadCandidate:W=>{ue.loadCandidate(W.slots),E(!1),Q("Loaded Build Solver candidate into Workbench.")}}),m.jsx(NA,{open:C,onOpenChange:W=>{W&&K(null),O(W)},dataset:B,loading:N,error:D,level:ce.level,selectedClass:ce.characterClass,inferredClass:be,selectionsByClass:re,onSelectionsChange:he}),m.jsx(vO,{open:R,onOpenChange:I,onEquipCraft:(W,me)=>{ue.equipCraftedItem(W,me),I(!1),Q(`Crafted ${me.type} equipped to ${W}.`)}})]})}class FO extends w.Component{state={hasError:!1,error:void 0};static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,s){console.error("App failed to render:",n,s)}render(){return this.state.hasError?m.jsx("div",{className:"flex min-h-screen items-center justify-center p-6",style:{background:"var(--wb-bg-bottom)",color:"var(--wb-text)"},children:m.jsxs("div",{className:"max-w-xl rounded-2xl p-6",style:{background:"var(--wb-panel)",border:"1px solid var(--wb-border)"},children:[m.jsx("div",{className:"text-xl font-semibold",children:"Something went wrong"}),m.jsxs("div",{className:"mt-2 text-sm",style:{color:"var(--wb-muted)"},children:[this.state.error?.message??"Failed to load the app."," Try refreshing the page."]})]})}):this.props.children}}mb(hb());Ww.createRoot(document.getElementById("root")).render(m.jsx(w.StrictMode,{children:m.jsx(FO,{children:m.jsx(ZO,{})})}));
