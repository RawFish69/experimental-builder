function yw(e,n){for(var s=0;s<n.length;s++){const l=n[s];if(typeof l!="string"&&!Array.isArray(l)){for(const r in l)if(r!=="default"&&!(r in e)){const c=Object.getOwnPropertyDescriptor(l,r);c&&Object.defineProperty(e,r,c.get?c:{enumerable:!0,get:()=>l[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function l(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}})();function Qf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qd={exports:{}},Li={};var yv;function bw(){if(yv)return Li;yv=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(l,r,c){var u=null;if(c!==void 0&&(u=""+c),r.key!==void 0&&(u=""+r.key),"key"in r){c={};for(var f in r)f!=="key"&&(c[f]=r[f])}else c=r;return r=c.ref,{$$typeof:e,type:l,key:u,ref:r!==void 0?r:null,props:c}}return Li.Fragment=n,Li.jsx=s,Li.jsxs=s,Li}var bv;function xw(){return bv||(bv=1,qd.exports=bw()),qd.exports}var m=xw(),Ud={exports:{}},je={};var xv;function Sw(){if(xv)return je;xv=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),x=Symbol.iterator;function S(M){return M===null||typeof M!="object"?null:(M=x&&M[x]||M["@@iterator"],typeof M=="function"?M:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,D={};function C(M,U,K){this.props=M,this.context=U,this.refs=D,this.updater=K||T}C.prototype.isReactComponent={},C.prototype.setState=function(M,U){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,U,"setState")},C.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function B(){}B.prototype=C.prototype;function z(M,U,K){this.props=M,this.context=U,this.refs=D,this.updater=K||T}var P=z.prototype=new B;P.constructor=z,w(P,C.prototype),P.isPureReactComponent=!0;var I=Array.isArray;function j(){}var N={H:null,A:null,T:null,S:null},L=Object.prototype.hasOwnProperty;function se(M,U,K){var W=K.ref;return{$$typeof:e,type:M,key:U,ref:W!==void 0?W:null,props:K}}function ce(M,U){return se(M.type,U,M.props)}function ee(M){return typeof M=="object"&&M!==null&&M.$$typeof===e}function fe(M){var U={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(K){return U[K]})}var A=/\/+/g;function ie(M,U){return typeof M=="object"&&M!==null&&M.key!=null?fe(""+M.key):U.toString(36)}function oe(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(j,j):(M.status="pending",M.then(function(U){M.status==="pending"&&(M.status="fulfilled",M.value=U)},function(U){M.status==="pending"&&(M.status="rejected",M.reason=U)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function k(M,U,K,W,he){var ge=typeof M;(ge==="undefined"||ge==="boolean")&&(M=null);var _e=!1;if(M===null)_e=!0;else switch(ge){case"bigint":case"string":case"number":_e=!0;break;case"object":switch(M.$$typeof){case e:case n:_e=!0;break;case y:return _e=M._init,k(_e(M._payload),U,K,W,he)}}if(_e)return he=he(M),_e=W===""?"."+ie(M,0):W,I(he)?(K="",_e!=null&&(K=_e.replace(A,"$&/")+"/"),k(he,U,K,"",function(Ze){return Ze})):he!=null&&(ee(he)&&(he=ce(he,K+(he.key==null||M&&M.key===he.key?"":(""+he.key).replace(A,"$&/")+"/")+_e)),U.push(he)),1;_e=0;var Me=W===""?".":W+":";if(I(M))for(var ve=0;ve<M.length;ve++)W=M[ve],ge=Me+ie(W,ve),_e+=k(W,U,K,ge,he);else if(ve=S(M),typeof ve=="function")for(M=ve.call(M),ve=0;!(W=M.next()).done;)W=W.value,ge=Me+ie(W,ve++),_e+=k(W,U,K,ge,he);else if(ge==="object"){if(typeof M.then=="function")return k(oe(M),U,K,W,he);throw U=String(M),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return _e}function Y(M,U,K){if(M==null)return M;var W=[],he=0;return k(M,W,"","",function(ge){return U.call(K,ge,he++)}),W}function ae(M){if(M._status===-1){var U=M._result;U=U(),U.then(function(K){(M._status===0||M._status===-1)&&(M._status=1,M._result=K)},function(K){(M._status===0||M._status===-1)&&(M._status=2,M._result=K)}),M._status===-1&&(M._status=0,M._result=U)}if(M._status===1)return M._result.default;throw M._result}var H=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},le={map:Y,forEach:function(M,U,K){Y(M,function(){U.apply(this,arguments)},K)},count:function(M){var U=0;return Y(M,function(){U++}),U},toArray:function(M){return Y(M,function(U){return U})||[]},only:function(M){if(!ee(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return je.Activity=v,je.Children=le,je.Component=C,je.Fragment=s,je.Profiler=r,je.PureComponent=z,je.StrictMode=l,je.Suspense=g,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,je.__COMPILER_RUNTIME={__proto__:null,c:function(M){return N.H.useMemoCache(M)}},je.cache=function(M){return function(){return M.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(M,U,K){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var W=w({},M.props),he=M.key;if(U!=null)for(ge in U.key!==void 0&&(he=""+U.key),U)!L.call(U,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&U.ref===void 0||(W[ge]=U[ge]);var ge=arguments.length-2;if(ge===1)W.children=K;else if(1<ge){for(var _e=Array(ge),Me=0;Me<ge;Me++)_e[Me]=arguments[Me+2];W.children=_e}return se(M.type,he,W)},je.createContext=function(M){return M={$$typeof:u,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},je.createElement=function(M,U,K){var W,he={},ge=null;if(U!=null)for(W in U.key!==void 0&&(ge=""+U.key),U)L.call(U,W)&&W!=="key"&&W!=="__self"&&W!=="__source"&&(he[W]=U[W]);var _e=arguments.length-2;if(_e===1)he.children=K;else if(1<_e){for(var Me=Array(_e),ve=0;ve<_e;ve++)Me[ve]=arguments[ve+2];he.children=Me}if(M&&M.defaultProps)for(W in _e=M.defaultProps,_e)he[W]===void 0&&(he[W]=_e[W]);return se(M,ge,he)},je.createRef=function(){return{current:null}},je.forwardRef=function(M){return{$$typeof:f,render:M}},je.isValidElement=ee,je.lazy=function(M){return{$$typeof:y,_payload:{_status:-1,_result:M},_init:ae}},je.memo=function(M,U){return{$$typeof:p,type:M,compare:U===void 0?null:U}},je.startTransition=function(M){var U=N.T,K={};N.T=K;try{var W=M(),he=N.S;he!==null&&he(K,W),typeof W=="object"&&W!==null&&typeof W.then=="function"&&W.then(j,H)}catch(ge){H(ge)}finally{U!==null&&K.types!==null&&(U.types=K.types),N.T=U}},je.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},je.use=function(M){return N.H.use(M)},je.useActionState=function(M,U,K){return N.H.useActionState(M,U,K)},je.useCallback=function(M,U){return N.H.useCallback(M,U)},je.useContext=function(M){return N.H.useContext(M)},je.useDebugValue=function(){},je.useDeferredValue=function(M,U){return N.H.useDeferredValue(M,U)},je.useEffect=function(M,U){return N.H.useEffect(M,U)},je.useEffectEvent=function(M){return N.H.useEffectEvent(M)},je.useId=function(){return N.H.useId()},je.useImperativeHandle=function(M,U,K){return N.H.useImperativeHandle(M,U,K)},je.useInsertionEffect=function(M,U){return N.H.useInsertionEffect(M,U)},je.useLayoutEffect=function(M,U){return N.H.useLayoutEffect(M,U)},je.useMemo=function(M,U){return N.H.useMemo(M,U)},je.useOptimistic=function(M,U){return N.H.useOptimistic(M,U)},je.useReducer=function(M,U,K){return N.H.useReducer(M,U,K)},je.useRef=function(M){return N.H.useRef(M)},je.useState=function(M){return N.H.useState(M)},je.useSyncExternalStore=function(M,U,K){return N.H.useSyncExternalStore(M,U,K)},je.useTransition=function(){return N.H.useTransition()},je.version="19.2.4",je}var Sv;function Jf(){return Sv||(Sv=1,Ud.exports=Sw()),Ud.exports}var _=Jf();const Zt=Qf(_),vy=yw({__proto__:null,default:Zt},[_]);var Hd={exports:{}},qi={},$d={exports:{}},Zd={};var wv;function ww(){return wv||(wv=1,(function(e){function n(k,Y){var ae=k.length;k.push(Y);e:for(;0<ae;){var H=ae-1>>>1,le=k[H];if(0<r(le,Y))k[H]=Y,k[ae]=le,ae=H;else break e}}function s(k){return k.length===0?null:k[0]}function l(k){if(k.length===0)return null;var Y=k[0],ae=k.pop();if(ae!==Y){k[0]=ae;e:for(var H=0,le=k.length,M=le>>>1;H<M;){var U=2*(H+1)-1,K=k[U],W=U+1,he=k[W];if(0>r(K,ae))W<le&&0>r(he,K)?(k[H]=he,k[W]=ae,H=W):(k[H]=K,k[U]=ae,H=U);else if(W<le&&0>r(he,ae))k[H]=he,k[W]=ae,H=W;else break e}}return Y}function r(k,Y){var ae=k.sortIndex-Y.sortIndex;return ae!==0?ae:k.id-Y.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var g=[],p=[],y=1,v=null,x=3,S=!1,T=!1,w=!1,D=!1,C=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function P(k){for(var Y=s(p);Y!==null;){if(Y.callback===null)l(p);else if(Y.startTime<=k)l(p),Y.sortIndex=Y.expirationTime,n(g,Y);else break;Y=s(p)}}function I(k){if(w=!1,P(k),!T)if(s(g)!==null)T=!0,j||(j=!0,fe());else{var Y=s(p);Y!==null&&oe(I,Y.startTime-k)}}var j=!1,N=-1,L=5,se=-1;function ce(){return D?!0:!(e.unstable_now()-se<L)}function ee(){if(D=!1,j){var k=e.unstable_now();se=k;var Y=!0;try{e:{T=!1,w&&(w=!1,B(N),N=-1),S=!0;var ae=x;try{t:{for(P(k),v=s(g);v!==null&&!(v.expirationTime>k&&ce());){var H=v.callback;if(typeof H=="function"){v.callback=null,x=v.priorityLevel;var le=H(v.expirationTime<=k);if(k=e.unstable_now(),typeof le=="function"){v.callback=le,P(k),Y=!0;break t}v===s(g)&&l(g),P(k)}else l(g);v=s(g)}if(v!==null)Y=!0;else{var M=s(p);M!==null&&oe(I,M.startTime-k),Y=!1}}break e}finally{v=null,x=ae,S=!1}Y=void 0}}finally{Y?fe():j=!1}}}var fe;if(typeof z=="function")fe=function(){z(ee)};else if(typeof MessageChannel<"u"){var A=new MessageChannel,ie=A.port2;A.port1.onmessage=ee,fe=function(){ie.postMessage(null)}}else fe=function(){C(ee,0)};function oe(k,Y){N=C(function(){k(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(k){switch(x){case 1:case 2:case 3:var Y=3;break;default:Y=x}var ae=x;x=Y;try{return k()}finally{x=ae}},e.unstable_requestPaint=function(){D=!0},e.unstable_runWithPriority=function(k,Y){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var ae=x;x=k;try{return Y()}finally{x=ae}},e.unstable_scheduleCallback=function(k,Y,ae){var H=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?H+ae:H):ae=H,k){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=ae+le,k={id:y++,callback:Y,priorityLevel:k,startTime:ae,expirationTime:le,sortIndex:-1},ae>H?(k.sortIndex=ae,n(p,k),s(g)===null&&k===s(p)&&(w?(B(N),N=-1):w=!0,oe(I,ae-H))):(k.sortIndex=le,n(g,k),T||S||(T=!0,j||(j=!0,fe()))),k},e.unstable_shouldYield=ce,e.unstable_wrapCallback=function(k){var Y=x;return function(){var ae=x;x=Y;try{return k.apply(this,arguments)}finally{x=ae}}}})(Zd)),Zd}var _v;function _w(){return _v||(_v=1,$d.exports=ww()),$d.exports}var Fd={exports:{}},an={};var Ev;function Ew(){if(Ev)return an;Ev=1;var e=Jf();function n(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var l={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},r=Symbol.for("react.portal");function c(g,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:g,containerInfo:p,implementation:y}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,an.createPortal=function(g,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(n(299));return c(g,p,null,y)},an.flushSync=function(g){var p=u.T,y=l.p;try{if(u.T=null,l.p=2,g)return g()}finally{u.T=p,l.p=y,l.d.f()}},an.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,l.d.C(g,p))},an.prefetchDNS=function(g){typeof g=="string"&&l.d.D(g)},an.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var y=p.as,v=f(y,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?l.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:S}):y==="script"&&l.d.X(g,{crossOrigin:v,integrity:x,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},an.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);l.d.M(g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&l.d.M(g)},an.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=f(y,p.crossOrigin);l.d.L(g,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},an.preloadModule=function(g,p){if(typeof g=="string")if(p){var y=f(p.as,p.crossOrigin);l.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else l.d.m(g)},an.requestFormReset=function(g){l.d.r(g)},an.unstable_batchedUpdates=function(g,p){return g(p)},an.useFormState=function(g,p,y){return u.H.useFormState(g,p,y)},an.useFormStatus=function(){return u.H.useHostTransitionStatus()},an.version="19.2.4",an}var Nv;function yy(){if(Nv)return Fd.exports;Nv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Fd.exports=Ew(),Fd.exports}var Tv;function Nw(){if(Tv)return qi;Tv=1;var e=_w(),n=Jf(),s=yy();function l(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)a+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var a=t,i=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(i=a.return),t=a.return;while(t)}return a.tag===3?i:null}function u(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function f(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(l(188))}function p(t){var a=t.alternate;if(!a){if(a=c(t),a===null)throw Error(l(188));return a!==t?null:t}for(var i=t,o=a;;){var d=i.return;if(d===null)break;var h=d.alternate;if(h===null){if(o=d.return,o!==null){i=o;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===i)return g(d),t;if(h===o)return g(d),a;h=h.sibling}throw Error(l(188))}if(i.return!==o.return)i=d,o=h;else{for(var b=!1,E=d.child;E;){if(E===i){b=!0,i=d,o=h;break}if(E===o){b=!0,o=d,i=h;break}E=E.sibling}if(!b){for(E=h.child;E;){if(E===i){b=!0,i=h,o=d;break}if(E===o){b=!0,o=h,i=d;break}E=E.sibling}if(!b)throw Error(l(189))}}if(i.alternate!==o)throw Error(l(190))}if(i.tag!==3)throw Error(l(188));return i.stateNode.current===i?t:a}function y(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=y(t),a!==null)return a;t=t.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),D=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),z=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),se=Symbol.for("react.activity"),ce=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function fe(t){return t===null||typeof t!="object"?null:(t=ee&&t[ee]||t["@@iterator"],typeof t=="function"?t:null)}var A=Symbol.for("react.client.reference");function ie(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===A?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case w:return"Fragment";case C:return"Profiler";case D:return"StrictMode";case I:return"Suspense";case j:return"SuspenseList";case se:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case T:return"Portal";case z:return t.displayName||"Context";case B:return(t._context.displayName||"Context")+".Consumer";case P:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return a=t.displayName||null,a!==null?a:ie(t.type)||"Memo";case L:a=t._payload,t=t._init;try{return ie(t(a))}catch{}}return null}var oe=Array.isArray,k=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},H=[],le=-1;function M(t){return{current:t}}function U(t){0>le||(t.current=H[le],H[le]=null,le--)}function K(t,a){le++,H[le]=t.current,t.current=a}var W=M(null),he=M(null),ge=M(null),_e=M(null);function Me(t,a){switch(K(ge,a),K(he,t),K(W,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Up(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Up(a),t=Hp(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}U(W),K(W,t)}function ve(){U(W),U(he),U(ge)}function Ze(t){t.memoizedState!==null&&K(_e,t);var a=W.current,i=Hp(a,t.type);a!==i&&(K(he,t),K(W,i))}function Yt(t){he.current===t&&(U(W),U(he)),_e.current===t&&(U(_e),Oi._currentValue=ae)}var Mt,En;function bt(t){if(Mt===void 0)try{throw Error()}catch(i){var a=i.stack.trim().match(/\n( *(at )?)/);Mt=a&&a[1]||"",En=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Mt+t+En}var Jt=!1;function Ge(t,a){if(!t||Jt)return"";Jt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(a){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(G){var F=G}Reflect.construct(t,[],ne)}else{try{ne.call()}catch(G){F=G}t.call(ne.prototype)}}else{try{throw Error()}catch(G){F=G}(ne=t())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(G){if(G&&F&&typeof G.stack=="string")return[G.stack,F.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=o.DetermineComponentFrameRoot(),b=h[0],E=h[1];if(b&&E){var R=b.split(`
`),Z=E.split(`
`);for(d=o=0;o<R.length&&!R[o].includes("DetermineComponentFrameRoot");)o++;for(;d<Z.length&&!Z[d].includes("DetermineComponentFrameRoot");)d++;if(o===R.length||d===Z.length)for(o=R.length-1,d=Z.length-1;1<=o&&0<=d&&R[o]!==Z[d];)d--;for(;1<=o&&0<=d;o--,d--)if(R[o]!==Z[d]){if(o!==1||d!==1)do if(o--,d--,0>d||R[o]!==Z[d]){var X=`
`+R[o].replace(" at new "," at ");return t.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",t.displayName)),X}while(1<=o&&0<=d);break}}}finally{Jt=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?bt(i):""}function en(t,a){switch(t.tag){case 26:case 27:case 5:return bt(t.type);case 16:return bt("Lazy");case 13:return t.child!==a&&a!==null?bt("Suspense Fallback"):bt("Suspense");case 19:return bt("SuspenseList");case 0:case 15:return Ge(t.type,!1);case 11:return Ge(t.type.render,!1);case 1:return Ge(t.type,!0);case 31:return bt("Activity");default:return""}}function tn(t){try{var a="",i=null;do a+=en(t,i),i=t,t=t.return;while(t);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var sn=Object.prototype.hasOwnProperty,re=e.unstable_scheduleCallback,ze=e.unstable_cancelCallback,Qe=e.unstable_shouldYield,at=e.unstable_requestPaint,V=e.unstable_now,ue=e.unstable_getCurrentPriorityLevel,Ve=e.unstable_ImmediatePriority,xe=e.unstable_UserBlockingPriority,qe=e.unstable_NormalPriority,It=e.unstable_LowPriority,ln=e.unstable_IdlePriority,Lt=e.log,la=e.unstable_setDisableYieldValue,ia=null,$e=null;function fn(t){if(typeof Lt=="function"&&la(t),$e&&typeof $e.setStrictMode=="function")try{$e.setStrictMode(ia,t)}catch{}}var Q=Math.clz32?Math.clz32:Xe,de=Math.log,ke=Math.LN2;function Xe(t){return t>>>=0,t===0?32:31-(de(t)/ke|0)|0}var Et=256,rn=262144,Ne=4194304;function Ce(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ke(t,a,i){var o=t.pendingLanes;if(o===0)return 0;var d=0,h=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~h,o!==0?d=Ce(o):(b&=E,b!==0?d=Ce(b):i||(i=E&~t,i!==0&&(d=Ce(i))))):(E=o&~h,E!==0?d=Ce(E):b!==0?d=Ce(b):i||(i=o&~t,i!==0&&(d=Ce(i)))),d===0?0:a!==0&&a!==d&&(a&h)===0&&(h=d&-d,i=a&-a,h>=i||h===32&&(i&4194048)!==0)?a:d}function ct(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Ee(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dt(){var t=Ne;return Ne<<=1,(Ne&62914560)===0&&(Ne=4194304),t}function Nt(t){for(var a=[],i=0;31>i;i++)a.push(t);return a}function Se(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function st(t,a,i,o,d,h){var b=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var E=t.entanglements,R=t.expirationTimes,Z=t.hiddenUpdates;for(i=b&~i;0<i;){var X=31-Q(i),ne=1<<X;E[X]=0,R[X]=-1;var F=Z[X];if(F!==null)for(Z[X]=null,X=0;X<F.length;X++){var G=F[X];G!==null&&(G.lane&=-536870913)}i&=~ne}o!==0&&qt(t,o,0),h!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=h&~(b&~a))}function qt(t,a,i){t.pendingLanes|=a,t.suspendedLanes&=~a;var o=31-Q(a);t.entangledLanes|=a,t.entanglements[o]=t.entanglements[o]|1073741824|i&261930}function nn(t,a){var i=t.entangledLanes|=a;for(t=t.entanglements;i;){var o=31-Q(i),d=1<<o;d&a|t[o]&a&&(t[o]|=a),i&=~d}}function on(t,a){var i=a&-a;return i=(i&42)!==0?1:On(i),(i&(t.suspendedLanes|a))!==0?0:i}function On(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Pn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function hn(){var t=Y.p;return t!==0?t:(t=window.event,t===void 0?32:dv(t.type))}function Wn(t,a){var i=Y.p;try{return Y.p=t,a()}finally{Y.p=i}}var Bn=Math.random().toString(36).slice(2),Gt="__reactFiber$"+Bn,mn="__reactProps$"+Bn,Fs="__reactContainer$"+Bn,Cc="__reactEvents$"+Bn,rS="__reactListeners$"+Bn,oS="__reactHandles$"+Bn,Mh="__reactResources$"+Bn,Wl="__reactMarker$"+Bn;function Ac(t){delete t[Gt],delete t[mn],delete t[Cc],delete t[rS],delete t[oS]}function Ys(t){var a=t[Gt];if(a)return a;for(var i=t.parentNode;i;){if(a=i[Fs]||i[Gt]){if(i=a.alternate,a.child!==null||i!==null&&i.child!==null)for(t=Kp(t);t!==null;){if(i=t[Gt])return i;t=Kp(t)}return a}t=i,i=t.parentNode}return null}function Gs(t){if(t=t[Gt]||t[Fs]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function Xl(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(l(33))}function Vs(t){var a=t[Mh];return a||(a=t[Mh]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Ut(t){t[Wl]=!0}var Dh=new Set,Rh={};function xs(t,a){Ks(t,a),Ks(t+"Capture",a)}function Ks(t,a){for(Rh[t]=a,t=0;t<a.length;t++)Dh.add(a[t])}var cS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ch={},Ah={};function uS(t){return sn.call(Ah,t)?!0:sn.call(Ch,t)?!1:cS.test(t)?Ah[t]=!0:(Ch[t]=!0,!1)}function ur(t,a,i){if(uS(a))if(i===null)t.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var o=a.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+i)}}function dr(t,a,i){if(i===null)t.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+i)}}function ma(t,a,i,o){if(o===null)t.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(a,i,""+o)}}function In(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kh(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function dS(t,a,i){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,h=o.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return d.call(this)},set:function(b){i=""+b,h.call(this,b)}}),Object.defineProperty(t,a,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(b){i=""+b},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function kc(t){if(!t._valueTracker){var a=kh(t)?"checked":"value";t._valueTracker=dS(t,a,""+t[a])}}function zh(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var i=a.getValue(),o="";return t&&(o=kh(t)?t.checked?"true":"false":t.value),t=o,t!==i?(a.setValue(t),!0):!1}function fr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var fS=/[\n"\\]/g;function Ln(t){return t.replace(fS,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function zc(t,a,i,o,d,h,b,E){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),a!=null?b==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+In(a)):t.value!==""+In(a)&&(t.value=""+In(a)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),a!=null?Oc(t,b,In(a)):i!=null?Oc(t,b,In(i)):o!=null&&t.removeAttribute("value"),d==null&&h!=null&&(t.defaultChecked=!!h),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+In(E):t.removeAttribute("name")}function Oh(t,a,i,o,d,h,b,E){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.type=h),a!=null||i!=null){if(!(h!=="submit"&&h!=="reset"||a!=null)){kc(t);return}i=i!=null?""+In(i):"",a=a!=null?""+In(a):i,E||a===t.value||(t.value=a),t.defaultValue=a}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),kc(t)}function Oc(t,a,i){a==="number"&&fr(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function Ws(t,a,i,o){if(t=t.options,a){a={};for(var d=0;d<i.length;d++)a["$"+i[d]]=!0;for(i=0;i<t.length;i++)d=a.hasOwnProperty("$"+t[i].value),t[i].selected!==d&&(t[i].selected=d),d&&o&&(t[i].defaultSelected=!0)}else{for(i=""+In(i),a=null,d=0;d<t.length;d++){if(t[d].value===i){t[d].selected=!0,o&&(t[d].defaultSelected=!0);return}a!==null||t[d].disabled||(a=t[d])}a!==null&&(a.selected=!0)}}function Ph(t,a,i){if(a!=null&&(a=""+In(a),a!==t.value&&(t.value=a),i==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=i!=null?""+In(i):""}function Bh(t,a,i,o){if(a==null){if(o!=null){if(i!=null)throw Error(l(92));if(oe(o)){if(1<o.length)throw Error(l(93));o=o[0]}i=o}i==null&&(i=""),a=i}i=In(a),t.defaultValue=i,o=t.textContent,o===i&&o!==""&&o!==null&&(t.value=o),kc(t)}function Xs(t,a){if(a){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=a;return}}t.textContent=a}var hS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ih(t,a,i){var o=a.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":o?t.setProperty(a,i):typeof i!="number"||i===0||hS.has(a)?a==="float"?t.cssFloat=i:t[a]=(""+i).trim():t[a]=i+"px"}function Lh(t,a,i){if(a!=null&&typeof a!="object")throw Error(l(62));if(t=t.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||a!=null&&a.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var d in a)o=a[d],a.hasOwnProperty(d)&&i[d]!==o&&Ih(t,d,o)}else for(var h in a)a.hasOwnProperty(h)&&Ih(t,h,a[h])}function Pc(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function hr(t){return gS.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ga(){}var Bc=null;function Ic(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qs=null,Js=null;function qh(t){var a=Gs(t);if(a&&(t=a.stateNode)){var i=t[mn]||null;e:switch(t=a.stateNode,a.type){case"input":if(zc(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),a=i.name,i.type==="radio"&&a!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Ln(""+a)+'"][type="radio"]'),a=0;a<i.length;a++){var o=i[a];if(o!==t&&o.form===t.form){var d=o[mn]||null;if(!d)throw Error(l(90));zc(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(a=0;a<i.length;a++)o=i[a],o.form===t.form&&zh(o)}break e;case"textarea":Ph(t,i.value,i.defaultValue);break e;case"select":a=i.value,a!=null&&Ws(t,!!i.multiple,a,!1)}}}var Lc=!1;function Uh(t,a,i){if(Lc)return t(a,i);Lc=!0;try{var o=t(a);return o}finally{if(Lc=!1,(Qs!==null||Js!==null)&&(eo(),Qs&&(a=Qs,t=Js,Js=Qs=null,qh(a),t)))for(a=0;a<t.length;a++)qh(t[a])}}function Ql(t,a){var i=t.stateNode;if(i===null)return null;var o=i[mn]||null;if(o===null)return null;i=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(l(231,a,typeof i));return i}var pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qc=!1;if(pa)try{var Jl={};Object.defineProperty(Jl,"passive",{get:function(){qc=!0}}),window.addEventListener("test",Jl,Jl),window.removeEventListener("test",Jl,Jl)}catch{qc=!1}var La=null,Uc=null,mr=null;function Hh(){if(mr)return mr;var t,a=Uc,i=a.length,o,d="value"in La?La.value:La.textContent,h=d.length;for(t=0;t<i&&a[t]===d[t];t++);var b=i-t;for(o=1;o<=b&&a[i-o]===d[h-o];o++);return mr=d.slice(t,1<o?1-o:void 0)}function gr(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function pr(){return!0}function $h(){return!1}function gn(t){function a(i,o,d,h,b){this._reactName=i,this._targetInst=d,this.type=o,this.nativeEvent=h,this.target=b,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(i=t[E],this[E]=i?i(h):h[E]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?pr:$h,this.isPropagationStopped=$h,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=pr)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=pr)},persist:function(){},isPersistent:pr}),a}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vr=gn(Ss),ei=v({},Ss,{view:0,detail:0}),pS=gn(ei),Hc,$c,ti,yr=v({},ei,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ti&&(ti&&t.type==="mousemove"?(Hc=t.screenX-ti.screenX,$c=t.screenY-ti.screenY):$c=Hc=0,ti=t),Hc)},movementY:function(t){return"movementY"in t?t.movementY:$c}}),Zh=gn(yr),vS=v({},yr,{dataTransfer:0}),yS=gn(vS),bS=v({},ei,{relatedTarget:0}),Zc=gn(bS),xS=v({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),SS=gn(xS),wS=v({},Ss,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_S=gn(wS),ES=v({},Ss,{data:0}),Fh=gn(ES),NS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},TS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MS(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=jS[t])?!!a[t]:!1}function Fc(){return MS}var DS=v({},ei,{key:function(t){if(t.key){var a=NS[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=gr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?TS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fc,charCode:function(t){return t.type==="keypress"?gr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),RS=gn(DS),CS=v({},yr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yh=gn(CS),AS=v({},ei,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fc}),kS=gn(AS),zS=v({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),OS=gn(zS),PS=v({},yr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),BS=gn(PS),IS=v({},Ss,{newState:0,oldState:0}),LS=gn(IS),qS=[9,13,27,32],Yc=pa&&"CompositionEvent"in window,ni=null;pa&&"documentMode"in document&&(ni=document.documentMode);var US=pa&&"TextEvent"in window&&!ni,Gh=pa&&(!Yc||ni&&8<ni&&11>=ni),Vh=" ",Kh=!1;function Wh(t,a){switch(t){case"keyup":return qS.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var el=!1;function HS(t,a){switch(t){case"compositionend":return Xh(a);case"keypress":return a.which!==32?null:(Kh=!0,Vh);case"textInput":return t=a.data,t===Vh&&Kh?null:t;default:return null}}function $S(t,a){if(el)return t==="compositionend"||!Yc&&Wh(t,a)?(t=Hh(),mr=Uc=La=null,el=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Gh&&a.locale!=="ko"?null:a.data;default:return null}}var ZS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qh(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!ZS[t.type]:a==="textarea"}function Jh(t,a,i,o){Qs?Js?Js.push(o):Js=[o]:Qs=o,a=ro(a,"onChange"),0<a.length&&(i=new vr("onChange","change",null,i,o),t.push({event:i,listeners:a}))}var ai=null,si=null;function FS(t){Op(t,0)}function br(t){var a=Xl(t);if(zh(a))return t}function em(t,a){if(t==="change")return a}var tm=!1;if(pa){var Gc;if(pa){var Vc="oninput"in document;if(!Vc){var nm=document.createElement("div");nm.setAttribute("oninput","return;"),Vc=typeof nm.oninput=="function"}Gc=Vc}else Gc=!1;tm=Gc&&(!document.documentMode||9<document.documentMode)}function am(){ai&&(ai.detachEvent("onpropertychange",sm),si=ai=null)}function sm(t){if(t.propertyName==="value"&&br(si)){var a=[];Jh(a,si,t,Ic(t)),Uh(FS,a)}}function YS(t,a,i){t==="focusin"?(am(),ai=a,si=i,ai.attachEvent("onpropertychange",sm)):t==="focusout"&&am()}function GS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return br(si)}function VS(t,a){if(t==="click")return br(a)}function KS(t,a){if(t==="input"||t==="change")return br(a)}function WS(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Nn=typeof Object.is=="function"?Object.is:WS;function li(t,a){if(Nn(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var i=Object.keys(t),o=Object.keys(a);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var d=i[o];if(!sn.call(a,d)||!Nn(t[d],a[d]))return!1}return!0}function lm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function im(t,a){var i=lm(t);t=0;for(var o;i;){if(i.nodeType===3){if(o=t+i.textContent.length,t<=a&&o>=a)return{node:i,offset:a-t};t=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=lm(i)}}function rm(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?rm(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function om(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=fr(t.document);a instanceof t.HTMLIFrameElement;){try{var i=typeof a.contentWindow.location.href=="string"}catch{i=!1}if(i)t=a.contentWindow;else break;a=fr(t.document)}return a}function Kc(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var XS=pa&&"documentMode"in document&&11>=document.documentMode,tl=null,Wc=null,ii=null,Xc=!1;function cm(t,a,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Xc||tl==null||tl!==fr(o)||(o=tl,"selectionStart"in o&&Kc(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ii&&li(ii,o)||(ii=o,o=ro(Wc,"onSelect"),0<o.length&&(a=new vr("onSelect","select",null,a,i),t.push({event:a,listeners:o}),a.target=tl)))}function ws(t,a){var i={};return i[t.toLowerCase()]=a.toLowerCase(),i["Webkit"+t]="webkit"+a,i["Moz"+t]="moz"+a,i}var nl={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionrun:ws("Transition","TransitionRun"),transitionstart:ws("Transition","TransitionStart"),transitioncancel:ws("Transition","TransitionCancel"),transitionend:ws("Transition","TransitionEnd")},Qc={},um={};pa&&(um=document.createElement("div").style,"AnimationEvent"in window||(delete nl.animationend.animation,delete nl.animationiteration.animation,delete nl.animationstart.animation),"TransitionEvent"in window||delete nl.transitionend.transition);function _s(t){if(Qc[t])return Qc[t];if(!nl[t])return t;var a=nl[t],i;for(i in a)if(a.hasOwnProperty(i)&&i in um)return Qc[t]=a[i];return t}var dm=_s("animationend"),fm=_s("animationiteration"),hm=_s("animationstart"),QS=_s("transitionrun"),JS=_s("transitionstart"),e1=_s("transitioncancel"),mm=_s("transitionend"),gm=new Map,Jc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jc.push("scrollEnd");function Xn(t,a){gm.set(t,a),xs(a,[t])}var xr=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},qn=[],al=0,eu=0;function Sr(){for(var t=al,a=eu=al=0;a<t;){var i=qn[a];qn[a++]=null;var o=qn[a];qn[a++]=null;var d=qn[a];qn[a++]=null;var h=qn[a];if(qn[a++]=null,o!==null&&d!==null){var b=o.pending;b===null?d.next=d:(d.next=b.next,b.next=d),o.pending=d}h!==0&&pm(i,d,h)}}function wr(t,a,i,o){qn[al++]=t,qn[al++]=a,qn[al++]=i,qn[al++]=o,eu|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function tu(t,a,i,o){return wr(t,a,i,o),_r(t)}function Es(t,a){return wr(t,null,null,a),_r(t)}function pm(t,a,i){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i);for(var d=!1,h=t.return;h!==null;)h.childLanes|=i,o=h.alternate,o!==null&&(o.childLanes|=i),h.tag===22&&(t=h.stateNode,t===null||t._visibility&1||(d=!0)),t=h,h=h.return;return t.tag===3?(h=t.stateNode,d&&a!==null&&(d=31-Q(i),t=h.hiddenUpdates,o=t[d],o===null?t[d]=[a]:o.push(a),a.lane=i|536870912),h):null}function _r(t){if(50<Mi)throw Mi=0,ud=null,Error(l(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var sl={};function t1(t,a,i,o){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tn(t,a,i,o){return new t1(t,a,i,o)}function nu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function va(t,a){var i=t.alternate;return i===null?(i=Tn(t.tag,a,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=a,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,a=t.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function vm(t,a){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,a=i.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Er(t,a,i,o,d,h){var b=0;if(o=t,typeof t=="function")nu(t)&&(b=1);else if(typeof t=="string")b=iw(t,i,W.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case se:return t=Tn(31,i,a,d),t.elementType=se,t.lanes=h,t;case w:return Ns(i.children,d,h,a);case D:b=8,d|=24;break;case C:return t=Tn(12,i,a,d|2),t.elementType=C,t.lanes=h,t;case I:return t=Tn(13,i,a,d),t.elementType=I,t.lanes=h,t;case j:return t=Tn(19,i,a,d),t.elementType=j,t.lanes=h,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case z:b=10;break e;case B:b=9;break e;case P:b=11;break e;case N:b=14;break e;case L:b=16,o=null;break e}b=29,i=Error(l(130,t===null?"null":typeof t,"")),o=null}return a=Tn(b,i,a,d),a.elementType=t,a.type=o,a.lanes=h,a}function Ns(t,a,i,o){return t=Tn(7,t,o,a),t.lanes=i,t}function au(t,a,i){return t=Tn(6,t,null,a),t.lanes=i,t}function ym(t){var a=Tn(18,null,null,0);return a.stateNode=t,a}function su(t,a,i){return a=Tn(4,t.children!==null?t.children:[],t.key,a),a.lanes=i,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var bm=new WeakMap;function Un(t,a){if(typeof t=="object"&&t!==null){var i=bm.get(t);return i!==void 0?i:(a={value:t,source:a,stack:tn(a)},bm.set(t,a),a)}return{value:t,source:a,stack:tn(a)}}var ll=[],il=0,Nr=null,ri=0,Hn=[],$n=0,qa=null,ra=1,oa="";function ya(t,a){ll[il++]=ri,ll[il++]=Nr,Nr=t,ri=a}function xm(t,a,i){Hn[$n++]=ra,Hn[$n++]=oa,Hn[$n++]=qa,qa=t;var o=ra;t=oa;var d=32-Q(o)-1;o&=~(1<<d),i+=1;var h=32-Q(a)+d;if(30<h){var b=d-d%5;h=(o&(1<<b)-1).toString(32),o>>=b,d-=b,ra=1<<32-Q(a)+d|i<<d|o,oa=h+t}else ra=1<<h|i<<d|o,oa=t}function lu(t){t.return!==null&&(ya(t,1),xm(t,1,0))}function iu(t){for(;t===Nr;)Nr=ll[--il],ll[il]=null,ri=ll[--il],ll[il]=null;for(;t===qa;)qa=Hn[--$n],Hn[$n]=null,oa=Hn[--$n],Hn[$n]=null,ra=Hn[--$n],Hn[$n]=null}function Sm(t,a){Hn[$n++]=ra,Hn[$n++]=oa,Hn[$n++]=qa,ra=a.id,oa=a.overflow,qa=t}var Vt=null,ht=null,Ue=!1,Ua=null,Zn=!1,ru=Error(l(519));function Ha(t){var a=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw oi(Un(a,t)),ru}function wm(t){var a=t.stateNode,i=t.type,o=t.memoizedProps;switch(a[Gt]=t,a[mn]=o,i){case"dialog":Pe("cancel",a),Pe("close",a);break;case"iframe":case"object":case"embed":Pe("load",a);break;case"video":case"audio":for(i=0;i<Ri.length;i++)Pe(Ri[i],a);break;case"source":Pe("error",a);break;case"img":case"image":case"link":Pe("error",a),Pe("load",a);break;case"details":Pe("toggle",a);break;case"input":Pe("invalid",a),Oh(a,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Pe("invalid",a);break;case"textarea":Pe("invalid",a),Bh(a,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||a.textContent===""+i||o.suppressHydrationWarning===!0||Lp(a.textContent,i)?(o.popover!=null&&(Pe("beforetoggle",a),Pe("toggle",a)),o.onScroll!=null&&Pe("scroll",a),o.onScrollEnd!=null&&Pe("scrollend",a),o.onClick!=null&&(a.onclick=ga),a=!0):a=!1,a||Ha(t,!0)}function _m(t){for(Vt=t.return;Vt;)switch(Vt.tag){case 5:case 31:case 13:Zn=!1;return;case 27:case 3:Zn=!0;return;default:Vt=Vt.return}}function rl(t){if(t!==Vt)return!1;if(!Ue)return _m(t),Ue=!0,!1;var a=t.tag,i;if((i=a!==3&&a!==27)&&((i=a===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||Nd(t.type,t.memoizedProps)),i=!i),i&&ht&&Ha(t),_m(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));ht=Vp(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));ht=Vp(t)}else a===27?(a=ht,ns(t.type)?(t=Rd,Rd=null,ht=t):ht=a):ht=Vt?Yn(t.stateNode.nextSibling):null;return!0}function Ts(){ht=Vt=null,Ue=!1}function ou(){var t=Ua;return t!==null&&(bn===null?bn=t:bn.push.apply(bn,t),Ua=null),t}function oi(t){Ua===null?Ua=[t]:Ua.push(t)}var cu=M(null),js=null,ba=null;function $a(t,a,i){K(cu,a._currentValue),a._currentValue=i}function xa(t){t._currentValue=cu.current,U(cu)}function uu(t,a,i){for(;t!==null;){var o=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),t===i)break;t=t.return}}function du(t,a,i,o){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var h=d.dependencies;if(h!==null){var b=d.child;h=h.firstContext;e:for(;h!==null;){var E=h;h=d;for(var R=0;R<a.length;R++)if(E.context===a[R]){h.lanes|=i,E=h.alternate,E!==null&&(E.lanes|=i),uu(h.return,i,t),o||(b=null);break e}h=E.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(l(341));b.lanes|=i,h=b.alternate,h!==null&&(h.lanes|=i),uu(b,i,t),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===t){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function ol(t,a,i,o){t=null;for(var d=a,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(l(387));if(b=b.memoizedProps,b!==null){var E=d.type;Nn(d.pendingProps.value,b.value)||(t!==null?t.push(E):t=[E])}}else if(d===_e.current){if(b=d.alternate,b===null)throw Error(l(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Oi):t=[Oi])}d=d.return}t!==null&&du(a,t,i,o),a.flags|=262144}function Tr(t){for(t=t.firstContext;t!==null;){if(!Nn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ms(t){js=t,ba=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Kt(t){return Em(js,t)}function jr(t,a){return js===null&&Ms(t),Em(t,a)}function Em(t,a){var i=a._currentValue;if(a={context:a,memoizedValue:i,next:null},ba===null){if(t===null)throw Error(l(308));ba=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else ba=ba.next=a;return i}var n1=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(i,o){t.push(o)}};this.abort=function(){a.aborted=!0,t.forEach(function(i){return i()})}},a1=e.unstable_scheduleCallback,s1=e.unstable_NormalPriority,Rt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fu(){return{controller:new n1,data:new Map,refCount:0}}function ci(t){t.refCount--,t.refCount===0&&a1(s1,function(){t.controller.abort()})}var ui=null,hu=0,cl=0,ul=null;function l1(t,a){if(ui===null){var i=ui=[];hu=0,cl=pd(),ul={status:"pending",value:void 0,then:function(o){i.push(o)}}}return hu++,a.then(Nm,Nm),a}function Nm(){if(--hu===0&&ui!==null){ul!==null&&(ul.status="fulfilled");var t=ui;ui=null,cl=0,ul=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function i1(t,a){var i=[],o={status:"pending",value:null,reason:null,then:function(d){i.push(d)}};return t.then(function(){o.status="fulfilled",o.value=a;for(var d=0;d<i.length;d++)(0,i[d])(a)},function(d){for(o.status="rejected",o.reason=d,d=0;d<i.length;d++)(0,i[d])(void 0)}),o}var Tm=k.S;k.S=function(t,a){cp=V(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&l1(t,a),Tm!==null&&Tm(t,a)};var Ds=M(null);function mu(){var t=Ds.current;return t!==null?t:ut.pooledCache}function Mr(t,a){a===null?K(Ds,Ds.current):K(Ds,a.pool)}function jm(){var t=mu();return t===null?null:{parent:Rt._currentValue,pool:t}}var dl=Error(l(460)),gu=Error(l(474)),Dr=Error(l(542)),Rr={then:function(){}};function Mm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Dm(t,a,i){switch(i=t[i],i===void 0?t.push(a):i!==a&&(a.then(ga,ga),a=i),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Cm(t),t;default:if(typeof a.status=="string")a.then(ga,ga);else{if(t=ut,t!==null&&100<t.shellSuspendCounter)throw Error(l(482));t=a,t.status="pending",t.then(function(o){if(a.status==="pending"){var d=a;d.status="fulfilled",d.value=o}},function(o){if(a.status==="pending"){var d=a;d.status="rejected",d.reason=o}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Cm(t),t}throw Cs=a,dl}}function Rs(t){try{var a=t._init;return a(t._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Cs=i,dl):i}}var Cs=null;function Rm(){if(Cs===null)throw Error(l(459));var t=Cs;return Cs=null,t}function Cm(t){if(t===dl||t===Dr)throw Error(l(483))}var fl=null,di=0;function Cr(t){var a=di;return di+=1,fl===null&&(fl=[]),Dm(fl,t,a)}function fi(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Ar(t,a){throw a.$$typeof===x?Error(l(525)):(t=Object.prototype.toString.call(a),Error(l(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function Am(t){function a(q,O){if(t){var $=q.deletions;$===null?(q.deletions=[O],q.flags|=16):$.push(O)}}function i(q,O){if(!t)return null;for(;O!==null;)a(q,O),O=O.sibling;return null}function o(q){for(var O=new Map;q!==null;)q.key!==null?O.set(q.key,q):O.set(q.index,q),q=q.sibling;return O}function d(q,O){return q=va(q,O),q.index=0,q.sibling=null,q}function h(q,O,$){return q.index=$,t?($=q.alternate,$!==null?($=$.index,$<O?(q.flags|=67108866,O):$):(q.flags|=67108866,O)):(q.flags|=1048576,O)}function b(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function E(q,O,$,J){return O===null||O.tag!==6?(O=au($,q.mode,J),O.return=q,O):(O=d(O,$),O.return=q,O)}function R(q,O,$,J){var ye=$.type;return ye===w?X(q,O,$.props.children,J,$.key):O!==null&&(O.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===L&&Rs(ye)===O.type)?(O=d(O,$.props),fi(O,$),O.return=q,O):(O=Er($.type,$.key,$.props,null,q.mode,J),fi(O,$),O.return=q,O)}function Z(q,O,$,J){return O===null||O.tag!==4||O.stateNode.containerInfo!==$.containerInfo||O.stateNode.implementation!==$.implementation?(O=su($,q.mode,J),O.return=q,O):(O=d(O,$.children||[]),O.return=q,O)}function X(q,O,$,J,ye){return O===null||O.tag!==7?(O=Ns($,q.mode,J,ye),O.return=q,O):(O=d(O,$),O.return=q,O)}function ne(q,O,$){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=au(""+O,q.mode,$),O.return=q,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case S:return $=Er(O.type,O.key,O.props,null,q.mode,$),fi($,O),$.return=q,$;case T:return O=su(O,q.mode,$),O.return=q,O;case L:return O=Rs(O),ne(q,O,$)}if(oe(O)||fe(O))return O=Ns(O,q.mode,$,null),O.return=q,O;if(typeof O.then=="function")return ne(q,Cr(O),$);if(O.$$typeof===z)return ne(q,jr(q,O),$);Ar(q,O)}return null}function F(q,O,$,J){var ye=O!==null?O.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return ye!==null?null:E(q,O,""+$,J);if(typeof $=="object"&&$!==null){switch($.$$typeof){case S:return $.key===ye?R(q,O,$,J):null;case T:return $.key===ye?Z(q,O,$,J):null;case L:return $=Rs($),F(q,O,$,J)}if(oe($)||fe($))return ye!==null?null:X(q,O,$,J,null);if(typeof $.then=="function")return F(q,O,Cr($),J);if($.$$typeof===z)return F(q,O,jr(q,$),J);Ar(q,$)}return null}function G(q,O,$,J,ye){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return q=q.get($)||null,E(O,q,""+J,ye);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case S:return q=q.get(J.key===null?$:J.key)||null,R(O,q,J,ye);case T:return q=q.get(J.key===null?$:J.key)||null,Z(O,q,J,ye);case L:return J=Rs(J),G(q,O,$,J,ye)}if(oe(J)||fe(J))return q=q.get($)||null,X(O,q,J,ye,null);if(typeof J.then=="function")return G(q,O,$,Cr(J),ye);if(J.$$typeof===z)return G(q,O,$,jr(O,J),ye);Ar(O,J)}return null}function me(q,O,$,J){for(var ye=null,Fe=null,pe=O,Ae=O=0,Le=null;pe!==null&&Ae<$.length;Ae++){pe.index>Ae?(Le=pe,pe=null):Le=pe.sibling;var Ye=F(q,pe,$[Ae],J);if(Ye===null){pe===null&&(pe=Le);break}t&&pe&&Ye.alternate===null&&a(q,pe),O=h(Ye,O,Ae),Fe===null?ye=Ye:Fe.sibling=Ye,Fe=Ye,pe=Le}if(Ae===$.length)return i(q,pe),Ue&&ya(q,Ae),ye;if(pe===null){for(;Ae<$.length;Ae++)pe=ne(q,$[Ae],J),pe!==null&&(O=h(pe,O,Ae),Fe===null?ye=pe:Fe.sibling=pe,Fe=pe);return Ue&&ya(q,Ae),ye}for(pe=o(pe);Ae<$.length;Ae++)Le=G(pe,q,Ae,$[Ae],J),Le!==null&&(t&&Le.alternate!==null&&pe.delete(Le.key===null?Ae:Le.key),O=h(Le,O,Ae),Fe===null?ye=Le:Fe.sibling=Le,Fe=Le);return t&&pe.forEach(function(rs){return a(q,rs)}),Ue&&ya(q,Ae),ye}function we(q,O,$,J){if($==null)throw Error(l(151));for(var ye=null,Fe=null,pe=O,Ae=O=0,Le=null,Ye=$.next();pe!==null&&!Ye.done;Ae++,Ye=$.next()){pe.index>Ae?(Le=pe,pe=null):Le=pe.sibling;var rs=F(q,pe,Ye.value,J);if(rs===null){pe===null&&(pe=Le);break}t&&pe&&rs.alternate===null&&a(q,pe),O=h(rs,O,Ae),Fe===null?ye=rs:Fe.sibling=rs,Fe=rs,pe=Le}if(Ye.done)return i(q,pe),Ue&&ya(q,Ae),ye;if(pe===null){for(;!Ye.done;Ae++,Ye=$.next())Ye=ne(q,Ye.value,J),Ye!==null&&(O=h(Ye,O,Ae),Fe===null?ye=Ye:Fe.sibling=Ye,Fe=Ye);return Ue&&ya(q,Ae),ye}for(pe=o(pe);!Ye.done;Ae++,Ye=$.next())Ye=G(pe,q,Ae,Ye.value,J),Ye!==null&&(t&&Ye.alternate!==null&&pe.delete(Ye.key===null?Ae:Ye.key),O=h(Ye,O,Ae),Fe===null?ye=Ye:Fe.sibling=Ye,Fe=Ye);return t&&pe.forEach(function(vw){return a(q,vw)}),Ue&&ya(q,Ae),ye}function rt(q,O,$,J){if(typeof $=="object"&&$!==null&&$.type===w&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case S:e:{for(var ye=$.key;O!==null;){if(O.key===ye){if(ye=$.type,ye===w){if(O.tag===7){i(q,O.sibling),J=d(O,$.props.children),J.return=q,q=J;break e}}else if(O.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===L&&Rs(ye)===O.type){i(q,O.sibling),J=d(O,$.props),fi(J,$),J.return=q,q=J;break e}i(q,O);break}else a(q,O);O=O.sibling}$.type===w?(J=Ns($.props.children,q.mode,J,$.key),J.return=q,q=J):(J=Er($.type,$.key,$.props,null,q.mode,J),fi(J,$),J.return=q,q=J)}return b(q);case T:e:{for(ye=$.key;O!==null;){if(O.key===ye)if(O.tag===4&&O.stateNode.containerInfo===$.containerInfo&&O.stateNode.implementation===$.implementation){i(q,O.sibling),J=d(O,$.children||[]),J.return=q,q=J;break e}else{i(q,O);break}else a(q,O);O=O.sibling}J=su($,q.mode,J),J.return=q,q=J}return b(q);case L:return $=Rs($),rt(q,O,$,J)}if(oe($))return me(q,O,$,J);if(fe($)){if(ye=fe($),typeof ye!="function")throw Error(l(150));return $=ye.call($),we(q,O,$,J)}if(typeof $.then=="function")return rt(q,O,Cr($),J);if($.$$typeof===z)return rt(q,O,jr(q,$),J);Ar(q,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,O!==null&&O.tag===6?(i(q,O.sibling),J=d(O,$),J.return=q,q=J):(i(q,O),J=au($,q.mode,J),J.return=q,q=J),b(q)):i(q,O)}return function(q,O,$,J){try{di=0;var ye=rt(q,O,$,J);return fl=null,ye}catch(pe){if(pe===dl||pe===Dr)throw pe;var Fe=Tn(29,pe,null,q.mode);return Fe.lanes=J,Fe.return=q,Fe}}}var As=Am(!0),km=Am(!1),Za=!1;function pu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vu(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Fa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ya(t,a,i){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(We&2)!==0){var d=o.pending;return d===null?a.next=a:(a.next=d.next,d.next=a),o.pending=a,a=_r(t),pm(t,null,i),a}return wr(t,o,a,i),_r(t)}function hi(t,a,i){if(a=a.updateQueue,a!==null&&(a=a.shared,(i&4194048)!==0)){var o=a.lanes;o&=t.pendingLanes,i|=o,a.lanes=i,nn(t,i)}}function yu(t,a){var i=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var d=null,h=null;if(i=i.firstBaseUpdate,i!==null){do{var b={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};h===null?d=h=b:h=h.next=b,i=i.next}while(i!==null);h===null?d=h=a:h=h.next=a}else d=h=a;i={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:o.shared,callbacks:o.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=a:t.next=a,i.lastBaseUpdate=a}var bu=!1;function mi(){if(bu){var t=ul;if(t!==null)throw t}}function gi(t,a,i,o){bu=!1;var d=t.updateQueue;Za=!1;var h=d.firstBaseUpdate,b=d.lastBaseUpdate,E=d.shared.pending;if(E!==null){d.shared.pending=null;var R=E,Z=R.next;R.next=null,b===null?h=Z:b.next=Z,b=R;var X=t.alternate;X!==null&&(X=X.updateQueue,E=X.lastBaseUpdate,E!==b&&(E===null?X.firstBaseUpdate=Z:E.next=Z,X.lastBaseUpdate=R))}if(h!==null){var ne=d.baseState;b=0,X=Z=R=null,E=h;do{var F=E.lane&-536870913,G=F!==E.lane;if(G?(Ie&F)===F:(o&F)===F){F!==0&&F===cl&&(bu=!0),X!==null&&(X=X.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var me=t,we=E;F=a;var rt=i;switch(we.tag){case 1:if(me=we.payload,typeof me=="function"){ne=me.call(rt,ne,F);break e}ne=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=we.payload,F=typeof me=="function"?me.call(rt,ne,F):me,F==null)break e;ne=v({},ne,F);break e;case 2:Za=!0}}F=E.callback,F!==null&&(t.flags|=64,G&&(t.flags|=8192),G=d.callbacks,G===null?d.callbacks=[F]:G.push(F))}else G={lane:F,tag:E.tag,payload:E.payload,callback:E.callback,next:null},X===null?(Z=X=G,R=ne):X=X.next=G,b|=F;if(E=E.next,E===null){if(E=d.shared.pending,E===null)break;G=E,E=G.next,G.next=null,d.lastBaseUpdate=G,d.shared.pending=null}}while(!0);X===null&&(R=ne),d.baseState=R,d.firstBaseUpdate=Z,d.lastBaseUpdate=X,h===null&&(d.shared.lanes=0),Xa|=b,t.lanes=b,t.memoizedState=ne}}function zm(t,a){if(typeof t!="function")throw Error(l(191,t));t.call(a)}function Om(t,a){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)zm(i[t],a)}var hl=M(null),kr=M(0);function Pm(t,a){t=Da,K(kr,t),K(hl,a),Da=t|a.baseLanes}function xu(){K(kr,Da),K(hl,hl.current)}function Su(){Da=kr.current,U(hl),U(kr)}var jn=M(null),Fn=null;function Ga(t){var a=t.alternate;K(Tt,Tt.current&1),K(jn,t),Fn===null&&(a===null||hl.current!==null||a.memoizedState!==null)&&(Fn=t)}function wu(t){K(Tt,Tt.current),K(jn,t),Fn===null&&(Fn=t)}function Bm(t){t.tag===22?(K(Tt,Tt.current),K(jn,t),Fn===null&&(Fn=t)):Va()}function Va(){K(Tt,Tt.current),K(jn,jn.current)}function Mn(t){U(jn),Fn===t&&(Fn=null),U(Tt)}var Tt=M(0);function zr(t){for(var a=t;a!==null;){if(a.tag===13){var i=a.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Md(i)||Dd(i)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Sa=0,De=null,lt=null,Ct=null,Or=!1,ml=!1,ks=!1,Pr=0,pi=0,gl=null,r1=0;function xt(){throw Error(l(321))}function _u(t,a){if(a===null)return!1;for(var i=0;i<a.length&&i<t.length;i++)if(!Nn(t[i],a[i]))return!1;return!0}function Eu(t,a,i,o,d,h){return Sa=h,De=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,k.H=t===null||t.memoizedState===null?xg:Lu,ks=!1,h=i(o,d),ks=!1,ml&&(h=Lm(a,i,o,d)),Im(t),h}function Im(t){k.H=bi;var a=lt!==null&&lt.next!==null;if(Sa=0,Ct=lt=De=null,Or=!1,pi=0,gl=null,a)throw Error(l(300));t===null||At||(t=t.dependencies,t!==null&&Tr(t)&&(At=!0))}function Lm(t,a,i,o){De=t;var d=0;do{if(ml&&(gl=null),pi=0,ml=!1,25<=d)throw Error(l(301));if(d+=1,Ct=lt=null,t.updateQueue!=null){var h=t.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}k.H=Sg,h=a(i,o)}while(ml);return h}function o1(){var t=k.H,a=t.useState()[0];return a=typeof a.then=="function"?vi(a):a,t=t.useState()[0],(lt!==null?lt.memoizedState:null)!==t&&(De.flags|=1024),a}function Nu(){var t=Pr!==0;return Pr=0,t}function Tu(t,a,i){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~i}function ju(t){if(Or){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Or=!1}Sa=0,Ct=lt=De=null,ml=!1,pi=Pr=0,gl=null}function cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?De.memoizedState=Ct=t:Ct=Ct.next=t,Ct}function jt(){if(lt===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var a=Ct===null?De.memoizedState:Ct.next;if(a!==null)Ct=a,lt=t;else{if(t===null)throw De.alternate===null?Error(l(467)):Error(l(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Ct===null?De.memoizedState=Ct=t:Ct=Ct.next=t}return Ct}function Br(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vi(t){var a=pi;return pi+=1,gl===null&&(gl=[]),t=Dm(gl,t,a),a=De,(Ct===null?a.memoizedState:Ct.next)===null&&(a=a.alternate,k.H=a===null||a.memoizedState===null?xg:Lu),t}function Ir(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return vi(t);if(t.$$typeof===z)return Kt(t)}throw Error(l(438,String(t)))}function Mu(t){var a=null,i=De.updateQueue;if(i!==null&&(a=i.memoCache),a==null){var o=De.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(a={data:o.data.map(function(d){return d.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),i===null&&(i=Br(),De.updateQueue=i),i.memoCache=a,i=a.data[a.index],i===void 0)for(i=a.data[a.index]=Array(t),o=0;o<t;o++)i[o]=ce;return a.index++,i}function wa(t,a){return typeof a=="function"?a(t):a}function Lr(t){var a=jt();return Du(a,lt,t)}function Du(t,a,i){var o=t.queue;if(o===null)throw Error(l(311));o.lastRenderedReducer=i;var d=t.baseQueue,h=o.pending;if(h!==null){if(d!==null){var b=d.next;d.next=h.next,h.next=b}a.baseQueue=d=h,o.pending=null}if(h=t.baseState,d===null)t.memoizedState=h;else{a=d.next;var E=b=null,R=null,Z=a,X=!1;do{var ne=Z.lane&-536870913;if(ne!==Z.lane?(Ie&ne)===ne:(Sa&ne)===ne){var F=Z.revertLane;if(F===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ne===cl&&(X=!0);else if((Sa&F)===F){Z=Z.next,F===cl&&(X=!0);continue}else ne={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},R===null?(E=R=ne,b=h):R=R.next=ne,De.lanes|=F,Xa|=F;ne=Z.action,ks&&i(h,ne),h=Z.hasEagerState?Z.eagerState:i(h,ne)}else F={lane:ne,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},R===null?(E=R=F,b=h):R=R.next=F,De.lanes|=ne,Xa|=ne;Z=Z.next}while(Z!==null&&Z!==a);if(R===null?b=h:R.next=E,!Nn(h,t.memoizedState)&&(At=!0,X&&(i=ul,i!==null)))throw i;t.memoizedState=h,t.baseState=b,t.baseQueue=R,o.lastRenderedState=h}return d===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Ru(t){var a=jt(),i=a.queue;if(i===null)throw Error(l(311));i.lastRenderedReducer=t;var o=i.dispatch,d=i.pending,h=a.memoizedState;if(d!==null){i.pending=null;var b=d=d.next;do h=t(h,b.action),b=b.next;while(b!==d);Nn(h,a.memoizedState)||(At=!0),a.memoizedState=h,a.baseQueue===null&&(a.baseState=h),i.lastRenderedState=h}return[h,o]}function qm(t,a,i){var o=De,d=jt(),h=Ue;if(h){if(i===void 0)throw Error(l(407));i=i()}else i=a();var b=!Nn((lt||d).memoizedState,i);if(b&&(d.memoizedState=i,At=!0),d=d.queue,ku($m.bind(null,o,d,t),[t]),d.getSnapshot!==a||b||Ct!==null&&Ct.memoizedState.tag&1){if(o.flags|=2048,pl(9,{destroy:void 0},Hm.bind(null,o,d,i,a),null),ut===null)throw Error(l(349));h||(Sa&127)!==0||Um(o,a,i)}return i}function Um(t,a,i){t.flags|=16384,t={getSnapshot:a,value:i},a=De.updateQueue,a===null?(a=Br(),De.updateQueue=a,a.stores=[t]):(i=a.stores,i===null?a.stores=[t]:i.push(t))}function Hm(t,a,i,o){a.value=i,a.getSnapshot=o,Zm(a)&&Fm(t)}function $m(t,a,i){return i(function(){Zm(a)&&Fm(t)})}function Zm(t){var a=t.getSnapshot;t=t.value;try{var i=a();return!Nn(t,i)}catch{return!0}}function Fm(t){var a=Es(t,2);a!==null&&xn(a,t,2)}function Cu(t){var a=cn();if(typeof t=="function"){var i=t;if(t=i(),ks){fn(!0);try{i()}finally{fn(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:t},a}function Ym(t,a,i,o){return t.baseState=i,Du(t,lt,typeof o=="function"?o:wa)}function c1(t,a,i,o,d){if(Hr(t))throw Error(l(485));if(t=a.action,t!==null){var h={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){h.listeners.push(b)}};k.T!==null?i(!0):h.isTransition=!1,o(h),i=a.pending,i===null?(h.next=a.pending=h,Gm(a,h)):(h.next=i.next,a.pending=i.next=h)}}function Gm(t,a){var i=a.action,o=a.payload,d=t.state;if(a.isTransition){var h=k.T,b={};k.T=b;try{var E=i(d,o),R=k.S;R!==null&&R(b,E),Vm(t,a,E)}catch(Z){Au(t,a,Z)}finally{h!==null&&b.types!==null&&(h.types=b.types),k.T=h}}else try{h=i(d,o),Vm(t,a,h)}catch(Z){Au(t,a,Z)}}function Vm(t,a,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){Km(t,a,o)},function(o){return Au(t,a,o)}):Km(t,a,i)}function Km(t,a,i){a.status="fulfilled",a.value=i,Wm(a),t.state=i,a=t.pending,a!==null&&(i=a.next,i===a?t.pending=null:(i=i.next,a.next=i,Gm(t,i)))}function Au(t,a,i){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do a.status="rejected",a.reason=i,Wm(a),a=a.next;while(a!==o)}t.action=null}function Wm(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function Xm(t,a){return a}function Qm(t,a){if(Ue){var i=ut.formState;if(i!==null){e:{var o=De;if(Ue){if(ht){t:{for(var d=ht,h=Zn;d.nodeType!==8;){if(!h){d=null;break t}if(d=Yn(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){ht=Yn(d.nextSibling),o=d.data==="F!";break e}}Ha(o)}o=!1}o&&(a=i[0])}}return i=cn(),i.memoizedState=i.baseState=a,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xm,lastRenderedState:a},i.queue=o,i=vg.bind(null,De,o),o.dispatch=i,o=Cu(!1),h=Iu.bind(null,De,!1,o.queue),o=cn(),d={state:a,dispatch:null,action:t,pending:null},o.queue=d,i=c1.bind(null,De,d,h,i),d.dispatch=i,o.memoizedState=t,[a,i,!1]}function Jm(t){var a=jt();return eg(a,lt,t)}function eg(t,a,i){if(a=Du(t,a,Xm)[0],t=Lr(wa)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var o=vi(a)}catch(b){throw b===dl?Dr:b}else o=a;a=jt();var d=a.queue,h=d.dispatch;return i!==a.memoizedState&&(De.flags|=2048,pl(9,{destroy:void 0},u1.bind(null,d,i),null)),[o,h,t]}function u1(t,a){t.action=a}function tg(t){var a=jt(),i=lt;if(i!==null)return eg(a,i,t);jt(),a=a.memoizedState,i=jt();var o=i.queue.dispatch;return i.memoizedState=t,[a,o,!1]}function pl(t,a,i,o){return t={tag:t,create:i,deps:o,inst:a,next:null},a=De.updateQueue,a===null&&(a=Br(),De.updateQueue=a),i=a.lastEffect,i===null?a.lastEffect=t.next=t:(o=i.next,i.next=t,t.next=o,a.lastEffect=t),t}function ng(){return jt().memoizedState}function qr(t,a,i,o){var d=cn();De.flags|=t,d.memoizedState=pl(1|a,{destroy:void 0},i,o===void 0?null:o)}function Ur(t,a,i,o){var d=jt();o=o===void 0?null:o;var h=d.memoizedState.inst;lt!==null&&o!==null&&_u(o,lt.memoizedState.deps)?d.memoizedState=pl(a,h,i,o):(De.flags|=t,d.memoizedState=pl(1|a,h,i,o))}function ag(t,a){qr(8390656,8,t,a)}function ku(t,a){Ur(2048,8,t,a)}function d1(t){De.flags|=4;var a=De.updateQueue;if(a===null)a=Br(),De.updateQueue=a,a.events=[t];else{var i=a.events;i===null?a.events=[t]:i.push(t)}}function sg(t){var a=jt().memoizedState;return d1({ref:a,nextImpl:t}),function(){if((We&2)!==0)throw Error(l(440));return a.impl.apply(void 0,arguments)}}function lg(t,a){return Ur(4,2,t,a)}function ig(t,a){return Ur(4,4,t,a)}function rg(t,a){if(typeof a=="function"){t=t();var i=a(t);return function(){typeof i=="function"?i():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function og(t,a,i){i=i!=null?i.concat([t]):null,Ur(4,4,rg.bind(null,a,t),i)}function zu(){}function cg(t,a){var i=jt();a=a===void 0?null:a;var o=i.memoizedState;return a!==null&&_u(a,o[1])?o[0]:(i.memoizedState=[t,a],t)}function ug(t,a){var i=jt();a=a===void 0?null:a;var o=i.memoizedState;if(a!==null&&_u(a,o[1]))return o[0];if(o=t(),ks){fn(!0);try{t()}finally{fn(!1)}}return i.memoizedState=[o,a],o}function Ou(t,a,i){return i===void 0||(Sa&1073741824)!==0&&(Ie&261930)===0?t.memoizedState=a:(t.memoizedState=i,t=dp(),De.lanes|=t,Xa|=t,i)}function dg(t,a,i,o){return Nn(i,a)?i:hl.current!==null?(t=Ou(t,i,o),Nn(t,a)||(At=!0),t):(Sa&42)===0||(Sa&1073741824)!==0&&(Ie&261930)===0?(At=!0,t.memoizedState=i):(t=dp(),De.lanes|=t,Xa|=t,a)}function fg(t,a,i,o,d){var h=Y.p;Y.p=h!==0&&8>h?h:8;var b=k.T,E={};k.T=E,Iu(t,!1,a,i);try{var R=d(),Z=k.S;if(Z!==null&&Z(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var X=i1(R,o);yi(t,a,X,Cn(t))}else yi(t,a,o,Cn(t))}catch(ne){yi(t,a,{then:function(){},status:"rejected",reason:ne},Cn())}finally{Y.p=h,b!==null&&E.types!==null&&(b.types=E.types),k.T=b}}function f1(){}function Pu(t,a,i,o){if(t.tag!==5)throw Error(l(476));var d=hg(t).queue;fg(t,d,a,ae,i===null?f1:function(){return mg(t),i(o)})}function hg(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:ae},next:null};var i={};return a.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:i},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function mg(t){var a=hg(t);a.next===null&&(a=t.alternate.memoizedState),yi(t,a.next.queue,{},Cn())}function Bu(){return Kt(Oi)}function gg(){return jt().memoizedState}function pg(){return jt().memoizedState}function h1(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var i=Cn();t=Fa(i);var o=Ya(a,t,i);o!==null&&(xn(o,a,i),hi(o,a,i)),a={cache:fu()},t.payload=a;return}a=a.return}}function m1(t,a,i){var o=Cn();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Hr(t)?yg(a,i):(i=tu(t,a,i,o),i!==null&&(xn(i,t,o),bg(i,a,o)))}function vg(t,a,i){var o=Cn();yi(t,a,i,o)}function yi(t,a,i,o){var d={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Hr(t))yg(a,d);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=a.lastRenderedReducer,h!==null))try{var b=a.lastRenderedState,E=h(b,i);if(d.hasEagerState=!0,d.eagerState=E,Nn(E,b))return wr(t,a,d,0),ut===null&&Sr(),!1}catch{}if(i=tu(t,a,d,o),i!==null)return xn(i,t,o),bg(i,a,o),!0}return!1}function Iu(t,a,i,o){if(o={lane:2,revertLane:pd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Hr(t)){if(a)throw Error(l(479))}else a=tu(t,i,o,2),a!==null&&xn(a,t,2)}function Hr(t){var a=t.alternate;return t===De||a!==null&&a===De}function yg(t,a){ml=Or=!0;var i=t.pending;i===null?a.next=a:(a.next=i.next,i.next=a),t.pending=a}function bg(t,a,i){if((i&4194048)!==0){var o=a.lanes;o&=t.pendingLanes,i|=o,a.lanes=i,nn(t,i)}}var bi={readContext:Kt,use:Ir,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useLayoutEffect:xt,useInsertionEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useSyncExternalStore:xt,useId:xt,useHostTransitionStatus:xt,useFormState:xt,useActionState:xt,useOptimistic:xt,useMemoCache:xt,useCacheRefresh:xt};bi.useEffectEvent=xt;var xg={readContext:Kt,use:Ir,useCallback:function(t,a){return cn().memoizedState=[t,a===void 0?null:a],t},useContext:Kt,useEffect:ag,useImperativeHandle:function(t,a,i){i=i!=null?i.concat([t]):null,qr(4194308,4,rg.bind(null,a,t),i)},useLayoutEffect:function(t,a){return qr(4194308,4,t,a)},useInsertionEffect:function(t,a){qr(4,2,t,a)},useMemo:function(t,a){var i=cn();a=a===void 0?null:a;var o=t();if(ks){fn(!0);try{t()}finally{fn(!1)}}return i.memoizedState=[o,a],o},useReducer:function(t,a,i){var o=cn();if(i!==void 0){var d=i(a);if(ks){fn(!0);try{i(a)}finally{fn(!1)}}}else d=a;return o.memoizedState=o.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},o.queue=t,t=t.dispatch=m1.bind(null,De,t),[o.memoizedState,t]},useRef:function(t){var a=cn();return t={current:t},a.memoizedState=t},useState:function(t){t=Cu(t);var a=t.queue,i=vg.bind(null,De,a);return a.dispatch=i,[t.memoizedState,i]},useDebugValue:zu,useDeferredValue:function(t,a){var i=cn();return Ou(i,t,a)},useTransition:function(){var t=Cu(!1);return t=fg.bind(null,De,t.queue,!0,!1),cn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,i){var o=De,d=cn();if(Ue){if(i===void 0)throw Error(l(407));i=i()}else{if(i=a(),ut===null)throw Error(l(349));(Ie&127)!==0||Um(o,a,i)}d.memoizedState=i;var h={value:i,getSnapshot:a};return d.queue=h,ag($m.bind(null,o,h,t),[t]),o.flags|=2048,pl(9,{destroy:void 0},Hm.bind(null,o,h,i,a),null),i},useId:function(){var t=cn(),a=ut.identifierPrefix;if(Ue){var i=oa,o=ra;i=(o&~(1<<32-Q(o)-1)).toString(32)+i,a="_"+a+"R_"+i,i=Pr++,0<i&&(a+="H"+i.toString(32)),a+="_"}else i=r1++,a="_"+a+"r_"+i.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:Bu,useFormState:Qm,useActionState:Qm,useOptimistic:function(t){var a=cn();a.memoizedState=a.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=i,a=Iu.bind(null,De,!0,i),i.dispatch=a,[t,a]},useMemoCache:Mu,useCacheRefresh:function(){return cn().memoizedState=h1.bind(null,De)},useEffectEvent:function(t){var a=cn(),i={impl:t};return a.memoizedState=i,function(){if((We&2)!==0)throw Error(l(440));return i.impl.apply(void 0,arguments)}}},Lu={readContext:Kt,use:Ir,useCallback:cg,useContext:Kt,useEffect:ku,useImperativeHandle:og,useInsertionEffect:lg,useLayoutEffect:ig,useMemo:ug,useReducer:Lr,useRef:ng,useState:function(){return Lr(wa)},useDebugValue:zu,useDeferredValue:function(t,a){var i=jt();return dg(i,lt.memoizedState,t,a)},useTransition:function(){var t=Lr(wa)[0],a=jt().memoizedState;return[typeof t=="boolean"?t:vi(t),a]},useSyncExternalStore:qm,useId:gg,useHostTransitionStatus:Bu,useFormState:Jm,useActionState:Jm,useOptimistic:function(t,a){var i=jt();return Ym(i,lt,t,a)},useMemoCache:Mu,useCacheRefresh:pg};Lu.useEffectEvent=sg;var Sg={readContext:Kt,use:Ir,useCallback:cg,useContext:Kt,useEffect:ku,useImperativeHandle:og,useInsertionEffect:lg,useLayoutEffect:ig,useMemo:ug,useReducer:Ru,useRef:ng,useState:function(){return Ru(wa)},useDebugValue:zu,useDeferredValue:function(t,a){var i=jt();return lt===null?Ou(i,t,a):dg(i,lt.memoizedState,t,a)},useTransition:function(){var t=Ru(wa)[0],a=jt().memoizedState;return[typeof t=="boolean"?t:vi(t),a]},useSyncExternalStore:qm,useId:gg,useHostTransitionStatus:Bu,useFormState:tg,useActionState:tg,useOptimistic:function(t,a){var i=jt();return lt!==null?Ym(i,lt,t,a):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:Mu,useCacheRefresh:pg};Sg.useEffectEvent=sg;function qu(t,a,i,o){a=t.memoizedState,i=i(o,a),i=i==null?a:v({},a,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Uu={enqueueSetState:function(t,a,i){t=t._reactInternals;var o=Cn(),d=Fa(o);d.payload=a,i!=null&&(d.callback=i),a=Ya(t,d,o),a!==null&&(xn(a,t,o),hi(a,t,o))},enqueueReplaceState:function(t,a,i){t=t._reactInternals;var o=Cn(),d=Fa(o);d.tag=1,d.payload=a,i!=null&&(d.callback=i),a=Ya(t,d,o),a!==null&&(xn(a,t,o),hi(a,t,o))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var i=Cn(),o=Fa(i);o.tag=2,a!=null&&(o.callback=a),a=Ya(t,o,i),a!==null&&(xn(a,t,i),hi(a,t,i))}};function wg(t,a,i,o,d,h,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,h,b):a.prototype&&a.prototype.isPureReactComponent?!li(i,o)||!li(d,h):!0}function _g(t,a,i,o){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(i,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(i,o),a.state!==t&&Uu.enqueueReplaceState(a,a.state,null)}function zs(t,a){var i=a;if("ref"in a){i={};for(var o in a)o!=="ref"&&(i[o]=a[o])}if(t=t.defaultProps){i===a&&(i=v({},i));for(var d in t)i[d]===void 0&&(i[d]=t[d])}return i}function Eg(t){xr(t)}function Ng(t){console.error(t)}function Tg(t){xr(t)}function $r(t,a){try{var i=t.onUncaughtError;i(a.value,{componentStack:a.stack})}catch(o){setTimeout(function(){throw o})}}function jg(t,a,i){try{var o=t.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Hu(t,a,i){return i=Fa(i),i.tag=3,i.payload={element:null},i.callback=function(){$r(t,a)},i}function Mg(t){return t=Fa(t),t.tag=3,t}function Dg(t,a,i,o){var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var h=o.value;t.payload=function(){return d(h)},t.callback=function(){jg(a,i,o)}}var b=i.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){jg(a,i,o),typeof d!="function"&&(Qa===null?Qa=new Set([this]):Qa.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function g1(t,a,i,o,d){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(a=i.alternate,a!==null&&ol(a,i,d,!0),i=jn.current,i!==null){switch(i.tag){case 31:case 13:return Fn===null?to():i.alternate===null&&St===0&&(St=3),i.flags&=-257,i.flags|=65536,i.lanes=d,o===Rr?i.flags|=16384:(a=i.updateQueue,a===null?i.updateQueue=new Set([o]):a.add(o),hd(t,o,d)),!1;case 22:return i.flags|=65536,o===Rr?i.flags|=16384:(a=i.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=a):(i=a.retryQueue,i===null?a.retryQueue=new Set([o]):i.add(o)),hd(t,o,d)),!1}throw Error(l(435,i.tag))}return hd(t,o,d),to(),!1}if(Ue)return a=jn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=d,o!==ru&&(t=Error(l(422),{cause:o}),oi(Un(t,i)))):(o!==ru&&(a=Error(l(423),{cause:o}),oi(Un(a,i))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,o=Un(o,i),d=Hu(t.stateNode,o,d),yu(t,d),St!==4&&(St=2)),!1;var h=Error(l(520),{cause:o});if(h=Un(h,i),ji===null?ji=[h]:ji.push(h),St!==4&&(St=2),a===null)return!0;o=Un(o,i),i=a;do{switch(i.tag){case 3:return i.flags|=65536,t=d&-d,i.lanes|=t,t=Hu(i.stateNode,o,t),yu(i,t),!1;case 1:if(a=i.type,h=i.stateNode,(i.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Qa===null||!Qa.has(h))))return i.flags|=65536,d&=-d,i.lanes|=d,d=Mg(d),Dg(d,t,i,o),yu(i,d),!1}i=i.return}while(i!==null);return!1}var $u=Error(l(461)),At=!1;function Wt(t,a,i,o){a.child=t===null?km(a,null,i,o):As(a,t.child,i,o)}function Rg(t,a,i,o,d){i=i.render;var h=a.ref;if("ref"in o){var b={};for(var E in o)E!=="ref"&&(b[E]=o[E])}else b=o;return Ms(a),o=Eu(t,a,i,b,h,d),E=Nu(),t!==null&&!At?(Tu(t,a,d),_a(t,a,d)):(Ue&&E&&lu(a),a.flags|=1,Wt(t,a,o,d),a.child)}function Cg(t,a,i,o,d){if(t===null){var h=i.type;return typeof h=="function"&&!nu(h)&&h.defaultProps===void 0&&i.compare===null?(a.tag=15,a.type=h,Ag(t,a,h,o,d)):(t=Er(i.type,null,o,a,a.mode,d),t.ref=a.ref,t.return=a,a.child=t)}if(h=t.child,!Xu(t,d)){var b=h.memoizedProps;if(i=i.compare,i=i!==null?i:li,i(b,o)&&t.ref===a.ref)return _a(t,a,d)}return a.flags|=1,t=va(h,o),t.ref=a.ref,t.return=a,a.child=t}function Ag(t,a,i,o,d){if(t!==null){var h=t.memoizedProps;if(li(h,o)&&t.ref===a.ref)if(At=!1,a.pendingProps=o=h,Xu(t,d))(t.flags&131072)!==0&&(At=!0);else return a.lanes=t.lanes,_a(t,a,d)}return Zu(t,a,i,o,d)}function kg(t,a,i,o){var d=o.children,h=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((a.flags&128)!==0){if(h=h!==null?h.baseLanes|i:i,t!==null){for(o=a.child=t.child,d=0;o!==null;)d=d|o.lanes|o.childLanes,o=o.sibling;o=d&~h}else o=0,a.child=null;return zg(t,a,h,i,o)}if((i&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Mr(a,h!==null?h.cachePool:null),h!==null?Pm(a,h):xu(),Bm(a);else return o=a.lanes=536870912,zg(t,a,h!==null?h.baseLanes|i:i,i,o)}else h!==null?(Mr(a,h.cachePool),Pm(a,h),Va(),a.memoizedState=null):(t!==null&&Mr(a,null),xu(),Va());return Wt(t,a,d,i),a.child}function xi(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function zg(t,a,i,o,d){var h=mu();return h=h===null?null:{parent:Rt._currentValue,pool:h},a.memoizedState={baseLanes:i,cachePool:h},t!==null&&Mr(a,null),xu(),Bm(a),t!==null&&ol(t,a,o,!0),a.childLanes=d,null}function Zr(t,a){return a=Yr({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function Og(t,a,i){return As(a,t.child,null,i),t=Zr(a,a.pendingProps),t.flags|=2,Mn(a),a.memoizedState=null,t}function p1(t,a,i){var o=a.pendingProps,d=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(Ue){if(o.mode==="hidden")return t=Zr(a,o),a.lanes=536870912,xi(null,t);if(wu(a),(t=ht)?(t=Gp(t,Zn),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:qa!==null?{id:ra,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},i=ym(t),i.return=a,a.child=i,Vt=a,ht=null)):t=null,t===null)throw Ha(a);return a.lanes=536870912,null}return Zr(a,o)}var h=t.memoizedState;if(h!==null){var b=h.dehydrated;if(wu(a),d)if(a.flags&256)a.flags&=-257,a=Og(t,a,i);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(l(558));else if(At||ol(t,a,i,!1),d=(i&t.childLanes)!==0,At||d){if(o=ut,o!==null&&(b=on(o,i),b!==0&&b!==h.retryLane))throw h.retryLane=b,Es(t,b),xn(o,t,b),$u;to(),a=Og(t,a,i)}else t=h.treeContext,ht=Yn(b.nextSibling),Vt=a,Ue=!0,Ua=null,Zn=!1,t!==null&&Sm(a,t),a=Zr(a,o),a.flags|=4096;return a}return t=va(t.child,{mode:o.mode,children:o.children}),t.ref=a.ref,a.child=t,t.return=a,t}function Fr(t,a){var i=a.ref;if(i===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(l(284));(t===null||t.ref!==i)&&(a.flags|=4194816)}}function Zu(t,a,i,o,d){return Ms(a),i=Eu(t,a,i,o,void 0,d),o=Nu(),t!==null&&!At?(Tu(t,a,d),_a(t,a,d)):(Ue&&o&&lu(a),a.flags|=1,Wt(t,a,i,d),a.child)}function Pg(t,a,i,o,d,h){return Ms(a),a.updateQueue=null,i=Lm(a,o,i,d),Im(t),o=Nu(),t!==null&&!At?(Tu(t,a,h),_a(t,a,h)):(Ue&&o&&lu(a),a.flags|=1,Wt(t,a,i,h),a.child)}function Bg(t,a,i,o,d){if(Ms(a),a.stateNode===null){var h=sl,b=i.contextType;typeof b=="object"&&b!==null&&(h=Kt(b)),h=new i(o,h),a.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Uu,a.stateNode=h,h._reactInternals=a,h=a.stateNode,h.props=o,h.state=a.memoizedState,h.refs={},pu(a),b=i.contextType,h.context=typeof b=="object"&&b!==null?Kt(b):sl,h.state=a.memoizedState,b=i.getDerivedStateFromProps,typeof b=="function"&&(qu(a,i,b,o),h.state=a.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(b=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),b!==h.state&&Uu.enqueueReplaceState(h,h.state,null),gi(a,o,h,d),mi(),h.state=a.memoizedState),typeof h.componentDidMount=="function"&&(a.flags|=4194308),o=!0}else if(t===null){h=a.stateNode;var E=a.memoizedProps,R=zs(i,E);h.props=R;var Z=h.context,X=i.contextType;b=sl,typeof X=="object"&&X!==null&&(b=Kt(X));var ne=i.getDerivedStateFromProps;X=typeof ne=="function"||typeof h.getSnapshotBeforeUpdate=="function",E=a.pendingProps!==E,X||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(E||Z!==b)&&_g(a,h,o,b),Za=!1;var F=a.memoizedState;h.state=F,gi(a,o,h,d),mi(),Z=a.memoizedState,E||F!==Z||Za?(typeof ne=="function"&&(qu(a,i,ne,o),Z=a.memoizedState),(R=Za||wg(a,i,R,o,F,Z,b))?(X||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(a.flags|=4194308)):(typeof h.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=Z),h.props=o,h.state=Z,h.context=b,o=R):(typeof h.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{h=a.stateNode,vu(t,a),b=a.memoizedProps,X=zs(i,b),h.props=X,ne=a.pendingProps,F=h.context,Z=i.contextType,R=sl,typeof Z=="object"&&Z!==null&&(R=Kt(Z)),E=i.getDerivedStateFromProps,(Z=typeof E=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(b!==ne||F!==R)&&_g(a,h,o,R),Za=!1,F=a.memoizedState,h.state=F,gi(a,o,h,d),mi();var G=a.memoizedState;b!==ne||F!==G||Za||t!==null&&t.dependencies!==null&&Tr(t.dependencies)?(typeof E=="function"&&(qu(a,i,E,o),G=a.memoizedState),(X=Za||wg(a,i,X,o,F,G,R)||t!==null&&t.dependencies!==null&&Tr(t.dependencies))?(Z||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,G,R),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,G,R)),typeof h.componentDidUpdate=="function"&&(a.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof h.componentDidUpdate!="function"||b===t.memoizedProps&&F===t.memoizedState||(a.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&F===t.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=G),h.props=o,h.state=G,h.context=R,o=X):(typeof h.componentDidUpdate!="function"||b===t.memoizedProps&&F===t.memoizedState||(a.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&F===t.memoizedState||(a.flags|=1024),o=!1)}return h=o,Fr(t,a),o=(a.flags&128)!==0,h||o?(h=a.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:h.render(),a.flags|=1,t!==null&&o?(a.child=As(a,t.child,null,d),a.child=As(a,null,i,d)):Wt(t,a,i,d),a.memoizedState=h.state,t=a.child):t=_a(t,a,d),t}function Ig(t,a,i,o){return Ts(),a.flags|=256,Wt(t,a,i,o),a.child}var Fu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yu(t){return{baseLanes:t,cachePool:jm()}}function Gu(t,a,i){return t=t!==null?t.childLanes&~i:0,a&&(t|=Rn),t}function Lg(t,a,i){var o=a.pendingProps,d=!1,h=(a.flags&128)!==0,b;if((b=h)||(b=t!==null&&t.memoizedState===null?!1:(Tt.current&2)!==0),b&&(d=!0,a.flags&=-129),b=(a.flags&32)!==0,a.flags&=-33,t===null){if(Ue){if(d?Ga(a):Va(),(t=ht)?(t=Gp(t,Zn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:qa!==null?{id:ra,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},i=ym(t),i.return=a,a.child=i,Vt=a,ht=null)):t=null,t===null)throw Ha(a);return Dd(t)?a.lanes=32:a.lanes=536870912,null}var E=o.children;return o=o.fallback,d?(Va(),d=a.mode,E=Yr({mode:"hidden",children:E},d),o=Ns(o,d,i,null),E.return=a,o.return=a,E.sibling=o,a.child=E,o=a.child,o.memoizedState=Yu(i),o.childLanes=Gu(t,b,i),a.memoizedState=Fu,xi(null,o)):(Ga(a),Vu(a,E))}var R=t.memoizedState;if(R!==null&&(E=R.dehydrated,E!==null)){if(h)a.flags&256?(Ga(a),a.flags&=-257,a=Ku(t,a,i)):a.memoizedState!==null?(Va(),a.child=t.child,a.flags|=128,a=null):(Va(),E=o.fallback,d=a.mode,o=Yr({mode:"visible",children:o.children},d),E=Ns(E,d,i,null),E.flags|=2,o.return=a,E.return=a,o.sibling=E,a.child=o,As(a,t.child,null,i),o=a.child,o.memoizedState=Yu(i),o.childLanes=Gu(t,b,i),a.memoizedState=Fu,a=xi(null,o));else if(Ga(a),Dd(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var Z=b.dgst;b=Z,o=Error(l(419)),o.stack="",o.digest=b,oi({value:o,source:null,stack:null}),a=Ku(t,a,i)}else if(At||ol(t,a,i,!1),b=(i&t.childLanes)!==0,At||b){if(b=ut,b!==null&&(o=on(b,i),o!==0&&o!==R.retryLane))throw R.retryLane=o,Es(t,o),xn(b,t,o),$u;Md(E)||to(),a=Ku(t,a,i)}else Md(E)?(a.flags|=192,a.child=t.child,a=null):(t=R.treeContext,ht=Yn(E.nextSibling),Vt=a,Ue=!0,Ua=null,Zn=!1,t!==null&&Sm(a,t),a=Vu(a,o.children),a.flags|=4096);return a}return d?(Va(),E=o.fallback,d=a.mode,R=t.child,Z=R.sibling,o=va(R,{mode:"hidden",children:o.children}),o.subtreeFlags=R.subtreeFlags&65011712,Z!==null?E=va(Z,E):(E=Ns(E,d,i,null),E.flags|=2),E.return=a,o.return=a,o.sibling=E,a.child=o,xi(null,o),o=a.child,E=t.child.memoizedState,E===null?E=Yu(i):(d=E.cachePool,d!==null?(R=Rt._currentValue,d=d.parent!==R?{parent:R,pool:R}:d):d=jm(),E={baseLanes:E.baseLanes|i,cachePool:d}),o.memoizedState=E,o.childLanes=Gu(t,b,i),a.memoizedState=Fu,xi(t.child,o)):(Ga(a),i=t.child,t=i.sibling,i=va(i,{mode:"visible",children:o.children}),i.return=a,i.sibling=null,t!==null&&(b=a.deletions,b===null?(a.deletions=[t],a.flags|=16):b.push(t)),a.child=i,a.memoizedState=null,i)}function Vu(t,a){return a=Yr({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Yr(t,a){return t=Tn(22,t,null,a),t.lanes=0,t}function Ku(t,a,i){return As(a,t.child,null,i),t=Vu(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function qg(t,a,i){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a),uu(t.return,a,i)}function Wu(t,a,i,o,d,h){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:d,treeForkCount:h}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=o,b.tail=i,b.tailMode=d,b.treeForkCount=h)}function Ug(t,a,i){var o=a.pendingProps,d=o.revealOrder,h=o.tail;o=o.children;var b=Tt.current,E=(b&2)!==0;if(E?(b=b&1|2,a.flags|=128):b&=1,K(Tt,b),Wt(t,a,o,i),o=Ue?ri:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qg(t,i,a);else if(t.tag===19)qg(t,i,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(i=a.child,d=null;i!==null;)t=i.alternate,t!==null&&zr(t)===null&&(d=i),i=i.sibling;i=d,i===null?(d=a.child,a.child=null):(d=i.sibling,i.sibling=null),Wu(a,!1,d,i,h,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,d=a.child,a.child=null;d!==null;){if(t=d.alternate,t!==null&&zr(t)===null){a.child=d;break}t=d.sibling,d.sibling=i,i=d,d=t}Wu(a,!0,i,null,h,o);break;case"together":Wu(a,!1,null,null,void 0,o);break;default:a.memoizedState=null}return a.child}function _a(t,a,i){if(t!==null&&(a.dependencies=t.dependencies),Xa|=a.lanes,(i&a.childLanes)===0)if(t!==null){if(ol(t,a,i,!1),(i&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(l(153));if(a.child!==null){for(t=a.child,i=va(t,t.pendingProps),a.child=i,i.return=a;t.sibling!==null;)t=t.sibling,i=i.sibling=va(t,t.pendingProps),i.return=a;i.sibling=null}return a.child}function Xu(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Tr(t)))}function v1(t,a,i){switch(a.tag){case 3:Me(a,a.stateNode.containerInfo),$a(a,Rt,t.memoizedState.cache),Ts();break;case 27:case 5:Ze(a);break;case 4:Me(a,a.stateNode.containerInfo);break;case 10:$a(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,wu(a),null;break;case 13:var o=a.memoizedState;if(o!==null)return o.dehydrated!==null?(Ga(a),a.flags|=128,null):(i&a.child.childLanes)!==0?Lg(t,a,i):(Ga(a),t=_a(t,a,i),t!==null?t.sibling:null);Ga(a);break;case 19:var d=(t.flags&128)!==0;if(o=(i&a.childLanes)!==0,o||(ol(t,a,i,!1),o=(i&a.childLanes)!==0),d){if(o)return Ug(t,a,i);a.flags|=128}if(d=a.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),K(Tt,Tt.current),o)break;return null;case 22:return a.lanes=0,kg(t,a,i,a.pendingProps);case 24:$a(a,Rt,t.memoizedState.cache)}return _a(t,a,i)}function Hg(t,a,i){if(t!==null)if(t.memoizedProps!==a.pendingProps)At=!0;else{if(!Xu(t,i)&&(a.flags&128)===0)return At=!1,v1(t,a,i);At=(t.flags&131072)!==0}else At=!1,Ue&&(a.flags&1048576)!==0&&xm(a,ri,a.index);switch(a.lanes=0,a.tag){case 16:e:{var o=a.pendingProps;if(t=Rs(a.elementType),a.type=t,typeof t=="function")nu(t)?(o=zs(t,o),a.tag=1,a=Bg(null,a,t,o,i)):(a.tag=0,a=Zu(null,a,t,o,i));else{if(t!=null){var d=t.$$typeof;if(d===P){a.tag=11,a=Rg(null,a,t,o,i);break e}else if(d===N){a.tag=14,a=Cg(null,a,t,o,i);break e}}throw a=ie(t)||t,Error(l(306,a,""))}}return a;case 0:return Zu(t,a,a.type,a.pendingProps,i);case 1:return o=a.type,d=zs(o,a.pendingProps),Bg(t,a,o,d,i);case 3:e:{if(Me(a,a.stateNode.containerInfo),t===null)throw Error(l(387));o=a.pendingProps;var h=a.memoizedState;d=h.element,vu(t,a),gi(a,o,null,i);var b=a.memoizedState;if(o=b.cache,$a(a,Rt,o),o!==h.cache&&du(a,[Rt],i,!0),mi(),o=b.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:b.cache},a.updateQueue.baseState=h,a.memoizedState=h,a.flags&256){a=Ig(t,a,o,i);break e}else if(o!==d){d=Un(Error(l(424)),a),oi(d),a=Ig(t,a,o,i);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,ht=Yn(t.firstChild),Vt=a,Ue=!0,Ua=null,Zn=!0,i=km(a,null,o,i),a.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ts(),o===d){a=_a(t,a,i);break e}Wt(t,a,o,i)}a=a.child}return a;case 26:return Fr(t,a),t===null?(i=Jp(a.type,null,a.pendingProps,null))?a.memoizedState=i:Ue||(i=a.type,t=a.pendingProps,o=oo(ge.current).createElement(i),o[Gt]=a,o[mn]=t,Xt(o,i,t),Ut(o),a.stateNode=o):a.memoizedState=Jp(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Ze(a),t===null&&Ue&&(o=a.stateNode=Wp(a.type,a.pendingProps,ge.current),Vt=a,Zn=!0,d=ht,ns(a.type)?(Rd=d,ht=Yn(o.firstChild)):ht=d),Wt(t,a,a.pendingProps.children,i),Fr(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Ue&&((d=o=ht)&&(o=G1(o,a.type,a.pendingProps,Zn),o!==null?(a.stateNode=o,Vt=a,ht=Yn(o.firstChild),Zn=!1,d=!0):d=!1),d||Ha(a)),Ze(a),d=a.type,h=a.pendingProps,b=t!==null?t.memoizedProps:null,o=h.children,Nd(d,h)?o=null:b!==null&&Nd(d,b)&&(a.flags|=32),a.memoizedState!==null&&(d=Eu(t,a,o1,null,null,i),Oi._currentValue=d),Fr(t,a),Wt(t,a,o,i),a.child;case 6:return t===null&&Ue&&((t=i=ht)&&(i=V1(i,a.pendingProps,Zn),i!==null?(a.stateNode=i,Vt=a,ht=null,t=!0):t=!1),t||Ha(a)),null;case 13:return Lg(t,a,i);case 4:return Me(a,a.stateNode.containerInfo),o=a.pendingProps,t===null?a.child=As(a,null,o,i):Wt(t,a,o,i),a.child;case 11:return Rg(t,a,a.type,a.pendingProps,i);case 7:return Wt(t,a,a.pendingProps,i),a.child;case 8:return Wt(t,a,a.pendingProps.children,i),a.child;case 12:return Wt(t,a,a.pendingProps.children,i),a.child;case 10:return o=a.pendingProps,$a(a,a.type,o.value),Wt(t,a,o.children,i),a.child;case 9:return d=a.type._context,o=a.pendingProps.children,Ms(a),d=Kt(d),o=o(d),a.flags|=1,Wt(t,a,o,i),a.child;case 14:return Cg(t,a,a.type,a.pendingProps,i);case 15:return Ag(t,a,a.type,a.pendingProps,i);case 19:return Ug(t,a,i);case 31:return p1(t,a,i);case 22:return kg(t,a,i,a.pendingProps);case 24:return Ms(a),o=Kt(Rt),t===null?(d=mu(),d===null&&(d=ut,h=fu(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=i),d=h),a.memoizedState={parent:o,cache:d},pu(a),$a(a,Rt,d)):((t.lanes&i)!==0&&(vu(t,a),gi(a,null,null,i),mi()),d=t.memoizedState,h=a.memoizedState,d.parent!==o?(d={parent:o,cache:o},a.memoizedState=d,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=d),$a(a,Rt,o)):(o=h.cache,$a(a,Rt,o),o!==d.cache&&du(a,[Rt],i,!0))),Wt(t,a,a.pendingProps.children,i),a.child;case 29:throw a.pendingProps}throw Error(l(156,a.tag))}function Ea(t){t.flags|=4}function Qu(t,a,i,o,d){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(gp())t.flags|=8192;else throw Cs=Rr,gu}else t.flags&=-16777217}function $g(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!sv(a))if(gp())t.flags|=8192;else throw Cs=Rr,gu}function Gr(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Dt():536870912,t.lanes|=a,xl|=a)}function Si(t,a){if(!Ue)switch(t.tailMode){case"hidden":a=t.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function mt(t){var a=t.alternate!==null&&t.alternate.child===t.child,i=0,o=0;if(a)for(var d=t.child;d!==null;)i|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)i|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=o,t.childLanes=i,a}function y1(t,a,i){var o=a.pendingProps;switch(iu(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(a),null;case 1:return mt(a),null;case 3:return i=a.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),xa(Rt),ve(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(rl(a)?Ea(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ou())),mt(a),null;case 26:var d=a.type,h=a.memoizedState;return t===null?(Ea(a),h!==null?(mt(a),$g(a,h)):(mt(a),Qu(a,d,null,o,i))):h?h!==t.memoizedState?(Ea(a),mt(a),$g(a,h)):(mt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==o&&Ea(a),mt(a),Qu(a,d,t,o,i)),null;case 27:if(Yt(a),i=ge.current,d=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Ea(a);else{if(!o){if(a.stateNode===null)throw Error(l(166));return mt(a),null}t=W.current,rl(a)?wm(a):(t=Wp(d,o,i),a.stateNode=t,Ea(a))}return mt(a),null;case 5:if(Yt(a),d=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Ea(a);else{if(!o){if(a.stateNode===null)throw Error(l(166));return mt(a),null}if(h=W.current,rl(a))wm(a);else{var b=oo(ge.current);switch(h){case 1:h=b.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=b.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=b.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof o.is=="string"?b.createElement("select",{is:o.is}):b.createElement("select"),o.multiple?h.multiple=!0:o.size&&(h.size=o.size);break;default:h=typeof o.is=="string"?b.createElement(d,{is:o.is}):b.createElement(d)}}h[Gt]=a,h[mn]=o;e:for(b=a.child;b!==null;){if(b.tag===5||b.tag===6)h.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===a)break e;for(;b.sibling===null;){if(b.return===null||b.return===a)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}a.stateNode=h;e:switch(Xt(h,d,o),d){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ea(a)}}return mt(a),Qu(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,i),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==o&&Ea(a);else{if(typeof o!="string"&&a.stateNode===null)throw Error(l(166));if(t=ge.current,rl(a)){if(t=a.stateNode,i=a.memoizedProps,o=null,d=Vt,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}t[Gt]=a,t=!!(t.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||Lp(t.nodeValue,i)),t||Ha(a,!0)}else t=oo(t).createTextNode(o),t[Gt]=a,a.stateNode=t}return mt(a),null;case 31:if(i=a.memoizedState,t===null||t.memoizedState!==null){if(o=rl(a),i!==null){if(t===null){if(!o)throw Error(l(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(557));t[Gt]=a}else Ts(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;mt(a),t=!1}else i=ou(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),t=!0;if(!t)return a.flags&256?(Mn(a),a):(Mn(a),null);if((a.flags&128)!==0)throw Error(l(558))}return mt(a),null;case 13:if(o=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=rl(a),o!==null&&o.dehydrated!==null){if(t===null){if(!d)throw Error(l(318));if(d=a.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(l(317));d[Gt]=a}else Ts(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;mt(a),d=!1}else d=ou(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return a.flags&256?(Mn(a),a):(Mn(a),null)}return Mn(a),(a.flags&128)!==0?(a.lanes=i,a):(i=o!==null,t=t!==null&&t.memoizedState!==null,i&&(o=a.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==d&&(o.flags|=2048)),i!==t&&i&&(a.child.flags|=8192),Gr(a,a.updateQueue),mt(a),null);case 4:return ve(),t===null&&xd(a.stateNode.containerInfo),mt(a),null;case 10:return xa(a.type),mt(a),null;case 19:if(U(Tt),o=a.memoizedState,o===null)return mt(a),null;if(d=(a.flags&128)!==0,h=o.rendering,h===null)if(d)Si(o,!1);else{if(St!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(h=zr(t),h!==null){for(a.flags|=128,Si(o,!1),t=h.updateQueue,a.updateQueue=t,Gr(a,t),a.subtreeFlags=0,t=i,i=a.child;i!==null;)vm(i,t),i=i.sibling;return K(Tt,Tt.current&1|2),Ue&&ya(a,o.treeForkCount),a.child}t=t.sibling}o.tail!==null&&V()>Qr&&(a.flags|=128,d=!0,Si(o,!1),a.lanes=4194304)}else{if(!d)if(t=zr(h),t!==null){if(a.flags|=128,d=!0,t=t.updateQueue,a.updateQueue=t,Gr(a,t),Si(o,!0),o.tail===null&&o.tailMode==="hidden"&&!h.alternate&&!Ue)return mt(a),null}else 2*V()-o.renderingStartTime>Qr&&i!==536870912&&(a.flags|=128,d=!0,Si(o,!1),a.lanes=4194304);o.isBackwards?(h.sibling=a.child,a.child=h):(t=o.last,t!==null?t.sibling=h:a.child=h,o.last=h)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=V(),t.sibling=null,i=Tt.current,K(Tt,d?i&1|2:i&1),Ue&&ya(a,o.treeForkCount),t):(mt(a),null);case 22:case 23:return Mn(a),Su(),o=a.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(a.flags|=8192):o&&(a.flags|=8192),o?(i&536870912)!==0&&(a.flags&128)===0&&(mt(a),a.subtreeFlags&6&&(a.flags|=8192)):mt(a),i=a.updateQueue,i!==null&&Gr(a,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==i&&(a.flags|=2048),t!==null&&U(Ds),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),a.memoizedState.cache!==i&&(a.flags|=2048),xa(Rt),mt(a),null;case 25:return null;case 30:return null}throw Error(l(156,a.tag))}function b1(t,a){switch(iu(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return xa(Rt),ve(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Yt(a),null;case 31:if(a.memoizedState!==null){if(Mn(a),a.alternate===null)throw Error(l(340));Ts()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(Mn(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(l(340));Ts()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return U(Tt),null;case 4:return ve(),null;case 10:return xa(a.type),null;case 22:case 23:return Mn(a),Su(),t!==null&&U(Ds),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return xa(Rt),null;case 25:return null;default:return null}}function Zg(t,a){switch(iu(a),a.tag){case 3:xa(Rt),ve();break;case 26:case 27:case 5:Yt(a);break;case 4:ve();break;case 31:a.memoizedState!==null&&Mn(a);break;case 13:Mn(a);break;case 19:U(Tt);break;case 10:xa(a.type);break;case 22:case 23:Mn(a),Su(),t!==null&&U(Ds);break;case 24:xa(Rt)}}function wi(t,a){try{var i=a.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var d=o.next;i=d;do{if((i.tag&t)===t){o=void 0;var h=i.create,b=i.inst;o=h(),b.destroy=o}i=i.next}while(i!==d)}}catch(E){et(a,a.return,E)}}function Ka(t,a,i){try{var o=a.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var h=d.next;o=h;do{if((o.tag&t)===t){var b=o.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,d=a;var R=i,Z=E;try{Z()}catch(X){et(d,R,X)}}}o=o.next}while(o!==h)}}catch(X){et(a,a.return,X)}}function Fg(t){var a=t.updateQueue;if(a!==null){var i=t.stateNode;try{Om(a,i)}catch(o){et(t,t.return,o)}}}function Yg(t,a,i){i.props=zs(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(o){et(t,a,o)}}function _i(t,a){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof i=="function"?t.refCleanup=i(o):i.current=o}}catch(d){et(t,a,d)}}function ca(t,a){var i=t.ref,o=t.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(d){et(t,a,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(d){et(t,a,d)}else i.current=null}function Gg(t){var a=t.type,i=t.memoizedProps,o=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(d){et(t,t.return,d)}}function Ju(t,a,i){try{var o=t.stateNode;U1(o,t.type,i,a),o[mn]=a}catch(d){et(t,t.return,d)}}function Vg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ns(t.type)||t.tag===4}function ed(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ns(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function td(t,a,i){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,a):(a=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.appendChild(t),i=i._reactRootContainer,i!=null||a.onclick!==null||(a.onclick=ga));else if(o!==4&&(o===27&&ns(t.type)&&(i=t.stateNode,a=null),t=t.child,t!==null))for(td(t,a,i),t=t.sibling;t!==null;)td(t,a,i),t=t.sibling}function Vr(t,a,i){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?i.insertBefore(t,a):i.appendChild(t);else if(o!==4&&(o===27&&ns(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(Vr(t,a,i),t=t.sibling;t!==null;)Vr(t,a,i),t=t.sibling}function Kg(t){var a=t.stateNode,i=t.memoizedProps;try{for(var o=t.type,d=a.attributes;d.length;)a.removeAttributeNode(d[0]);Xt(a,o,i),a[Gt]=t,a[mn]=i}catch(h){et(t,t.return,h)}}var Na=!1,kt=!1,nd=!1,Wg=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function x1(t,a){if(t=t.containerInfo,_d=po,t=om(t),Kc(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var d=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{i.nodeType,h.nodeType}catch{i=null;break e}var b=0,E=-1,R=-1,Z=0,X=0,ne=t,F=null;t:for(;;){for(var G;ne!==i||d!==0&&ne.nodeType!==3||(E=b+d),ne!==h||o!==0&&ne.nodeType!==3||(R=b+o),ne.nodeType===3&&(b+=ne.nodeValue.length),(G=ne.firstChild)!==null;)F=ne,ne=G;for(;;){if(ne===t)break t;if(F===i&&++Z===d&&(E=b),F===h&&++X===o&&(R=b),(G=ne.nextSibling)!==null)break;ne=F,F=ne.parentNode}ne=G}i=E===-1||R===-1?null:{start:E,end:R}}else i=null}i=i||{start:0,end:0}}else i=null;for(Ed={focusedElem:t,selectionRange:i},po=!1,Ht=a;Ht!==null;)if(a=Ht,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Ht=t;else for(;Ht!==null;){switch(a=Ht,h=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(i=0;i<t.length;i++)d=t[i],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&h!==null){t=void 0,i=a,d=h.memoizedProps,h=h.memoizedState,o=i.stateNode;try{var me=zs(i.type,d);t=o.getSnapshotBeforeUpdate(me,h),o.__reactInternalSnapshotBeforeUpdate=t}catch(we){et(i,i.return,we)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,i=t.nodeType,i===9)jd(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":jd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(l(163))}if(t=a.sibling,t!==null){t.return=a.return,Ht=t;break}Ht=a.return}}function Xg(t,a,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:ja(t,i),o&4&&wi(5,i);break;case 1:if(ja(t,i),o&4)if(t=i.stateNode,a===null)try{t.componentDidMount()}catch(b){et(i,i.return,b)}else{var d=zs(i.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(d,a,t.__reactInternalSnapshotBeforeUpdate)}catch(b){et(i,i.return,b)}}o&64&&Fg(i),o&512&&_i(i,i.return);break;case 3:if(ja(t,i),o&64&&(t=i.updateQueue,t!==null)){if(a=null,i.child!==null)switch(i.child.tag){case 27:case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}try{Om(t,a)}catch(b){et(i,i.return,b)}}break;case 27:a===null&&o&4&&Kg(i);case 26:case 5:ja(t,i),a===null&&o&4&&Gg(i),o&512&&_i(i,i.return);break;case 12:ja(t,i);break;case 31:ja(t,i),o&4&&ep(t,i);break;case 13:ja(t,i),o&4&&tp(t,i),o&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=D1.bind(null,i),K1(t,i))));break;case 22:if(o=i.memoizedState!==null||Na,!o){a=a!==null&&a.memoizedState!==null||kt,d=Na;var h=kt;Na=o,(kt=a)&&!h?Ma(t,i,(i.subtreeFlags&8772)!==0):ja(t,i),Na=d,kt=h}break;case 30:break;default:ja(t,i)}}function Qg(t){var a=t.alternate;a!==null&&(t.alternate=null,Qg(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Ac(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var gt=null,pn=!1;function Ta(t,a,i){for(i=i.child;i!==null;)Jg(t,a,i),i=i.sibling}function Jg(t,a,i){if($e&&typeof $e.onCommitFiberUnmount=="function")try{$e.onCommitFiberUnmount(ia,i)}catch{}switch(i.tag){case 26:kt||ca(i,a),Ta(t,a,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:kt||ca(i,a);var o=gt,d=pn;ns(i.type)&&(gt=i.stateNode,pn=!1),Ta(t,a,i),Ai(i.stateNode),gt=o,pn=d;break;case 5:kt||ca(i,a);case 6:if(o=gt,d=pn,gt=null,Ta(t,a,i),gt=o,pn=d,gt!==null)if(pn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(i.stateNode)}catch(h){et(i,a,h)}else try{gt.removeChild(i.stateNode)}catch(h){et(i,a,h)}break;case 18:gt!==null&&(pn?(t=gt,Fp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),Ml(t)):Fp(gt,i.stateNode));break;case 4:o=gt,d=pn,gt=i.stateNode.containerInfo,pn=!0,Ta(t,a,i),gt=o,pn=d;break;case 0:case 11:case 14:case 15:Ka(2,i,a),kt||Ka(4,i,a),Ta(t,a,i);break;case 1:kt||(ca(i,a),o=i.stateNode,typeof o.componentWillUnmount=="function"&&Yg(i,a,o)),Ta(t,a,i);break;case 21:Ta(t,a,i);break;case 22:kt=(o=kt)||i.memoizedState!==null,Ta(t,a,i),kt=o;break;default:Ta(t,a,i)}}function ep(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ml(t)}catch(i){et(a,a.return,i)}}}function tp(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ml(t)}catch(i){et(a,a.return,i)}}function S1(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new Wg),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new Wg),a;default:throw Error(l(435,t.tag))}}function Kr(t,a){var i=S1(t);a.forEach(function(o){if(!i.has(o)){i.add(o);var d=R1.bind(null,t,o);o.then(d,d)}})}function vn(t,a){var i=a.deletions;if(i!==null)for(var o=0;o<i.length;o++){var d=i[o],h=t,b=a,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(ns(E.type)){gt=E.stateNode,pn=!1;break e}break;case 5:gt=E.stateNode,pn=!1;break e;case 3:case 4:gt=E.stateNode.containerInfo,pn=!0;break e}E=E.return}if(gt===null)throw Error(l(160));Jg(h,b,d),gt=null,pn=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)np(a,t),a=a.sibling}var Qn=null;function np(t,a){var i=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:vn(a,t),yn(t),o&4&&(Ka(3,t,t.return),wi(3,t),Ka(5,t,t.return));break;case 1:vn(a,t),yn(t),o&512&&(kt||i===null||ca(i,i.return)),o&64&&Na&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var d=Qn;if(vn(a,t),yn(t),o&512&&(kt||i===null||ca(i,i.return)),o&4){var h=i!==null?i.memoizedState:null;if(o=t.memoizedState,i===null)if(o===null)if(t.stateNode===null){e:{o=t.type,i=t.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":h=d.getElementsByTagName("title")[0],(!h||h[Wl]||h[Gt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(o),d.head.insertBefore(h,d.querySelector("head > title"))),Xt(h,o,i),h[Gt]=t,Ut(h),o=h;break e;case"link":var b=nv("link","href",d).get(o+(i.href||""));if(b){for(var E=0;E<b.length;E++)if(h=b[E],h.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&h.getAttribute("rel")===(i.rel==null?null:i.rel)&&h.getAttribute("title")===(i.title==null?null:i.title)&&h.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){b.splice(E,1);break t}}h=d.createElement(o),Xt(h,o,i),d.head.appendChild(h);break;case"meta":if(b=nv("meta","content",d).get(o+(i.content||""))){for(E=0;E<b.length;E++)if(h=b[E],h.getAttribute("content")===(i.content==null?null:""+i.content)&&h.getAttribute("name")===(i.name==null?null:i.name)&&h.getAttribute("property")===(i.property==null?null:i.property)&&h.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&h.getAttribute("charset")===(i.charSet==null?null:i.charSet)){b.splice(E,1);break t}}h=d.createElement(o),Xt(h,o,i),d.head.appendChild(h);break;default:throw Error(l(468,o))}h[Gt]=t,Ut(h),o=h}t.stateNode=o}else av(d,t.type,t.stateNode);else t.stateNode=tv(d,o,t.memoizedProps);else h!==o?(h===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):h.count--,o===null?av(d,t.type,t.stateNode):tv(d,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Ju(t,t.memoizedProps,i.memoizedProps)}break;case 27:vn(a,t),yn(t),o&512&&(kt||i===null||ca(i,i.return)),i!==null&&o&4&&Ju(t,t.memoizedProps,i.memoizedProps);break;case 5:if(vn(a,t),yn(t),o&512&&(kt||i===null||ca(i,i.return)),t.flags&32){d=t.stateNode;try{Xs(d,"")}catch(me){et(t,t.return,me)}}o&4&&t.stateNode!=null&&(d=t.memoizedProps,Ju(t,d,i!==null?i.memoizedProps:d)),o&1024&&(nd=!0);break;case 6:if(vn(a,t),yn(t),o&4){if(t.stateNode===null)throw Error(l(162));o=t.memoizedProps,i=t.stateNode;try{i.nodeValue=o}catch(me){et(t,t.return,me)}}break;case 3:if(fo=null,d=Qn,Qn=co(a.containerInfo),vn(a,t),Qn=d,yn(t),o&4&&i!==null&&i.memoizedState.isDehydrated)try{Ml(a.containerInfo)}catch(me){et(t,t.return,me)}nd&&(nd=!1,ap(t));break;case 4:o=Qn,Qn=co(t.stateNode.containerInfo),vn(a,t),yn(t),Qn=o;break;case 12:vn(a,t),yn(t);break;case 31:vn(a,t),yn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Kr(t,o)));break;case 13:vn(a,t),yn(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Xr=V()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Kr(t,o)));break;case 22:d=t.memoizedState!==null;var R=i!==null&&i.memoizedState!==null,Z=Na,X=kt;if(Na=Z||d,kt=X||R,vn(a,t),kt=X,Na=Z,yn(t),o&8192)e:for(a=t.stateNode,a._visibility=d?a._visibility&-2:a._visibility|1,d&&(i===null||R||Na||kt||Os(t)),i=null,a=t;;){if(a.tag===5||a.tag===26){if(i===null){R=i=a;try{if(h=R.stateNode,d)b=h.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=R.stateNode;var ne=R.memoizedProps.style,F=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;E.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(me){et(R,R.return,me)}}}else if(a.tag===6){if(i===null){R=a;try{R.stateNode.nodeValue=d?"":R.memoizedProps}catch(me){et(R,R.return,me)}}}else if(a.tag===18){if(i===null){R=a;try{var G=R.stateNode;d?Yp(G,!0):Yp(R.stateNode,!1)}catch(me){et(R,R.return,me)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;i===a&&(i=null),a=a.return}i===a&&(i=null),a.sibling.return=a.return,a=a.sibling}o&4&&(o=t.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,Kr(t,i))));break;case 19:vn(a,t),yn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Kr(t,o)));break;case 30:break;case 21:break;default:vn(a,t),yn(t)}}function yn(t){var a=t.flags;if(a&2){try{for(var i,o=t.return;o!==null;){if(Vg(o)){i=o;break}o=o.return}if(i==null)throw Error(l(160));switch(i.tag){case 27:var d=i.stateNode,h=ed(t);Vr(t,h,d);break;case 5:var b=i.stateNode;i.flags&32&&(Xs(b,""),i.flags&=-33);var E=ed(t);Vr(t,E,b);break;case 3:case 4:var R=i.stateNode.containerInfo,Z=ed(t);td(t,Z,R);break;default:throw Error(l(161))}}catch(X){et(t,t.return,X)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function ap(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;ap(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function ja(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Xg(t,a.alternate,a),a=a.sibling}function Os(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Ka(4,a,a.return),Os(a);break;case 1:ca(a,a.return);var i=a.stateNode;typeof i.componentWillUnmount=="function"&&Yg(a,a.return,i),Os(a);break;case 27:Ai(a.stateNode);case 26:case 5:ca(a,a.return),Os(a);break;case 22:a.memoizedState===null&&Os(a);break;case 30:Os(a);break;default:Os(a)}t=t.sibling}}function Ma(t,a,i){for(i=i&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var o=a.alternate,d=t,h=a,b=h.flags;switch(h.tag){case 0:case 11:case 15:Ma(d,h,i),wi(4,h);break;case 1:if(Ma(d,h,i),o=h,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(Z){et(o,o.return,Z)}if(o=h,d=o.updateQueue,d!==null){var E=o.stateNode;try{var R=d.shared.hiddenCallbacks;if(R!==null)for(d.shared.hiddenCallbacks=null,d=0;d<R.length;d++)zm(R[d],E)}catch(Z){et(o,o.return,Z)}}i&&b&64&&Fg(h),_i(h,h.return);break;case 27:Kg(h);case 26:case 5:Ma(d,h,i),i&&o===null&&b&4&&Gg(h),_i(h,h.return);break;case 12:Ma(d,h,i);break;case 31:Ma(d,h,i),i&&b&4&&ep(d,h);break;case 13:Ma(d,h,i),i&&b&4&&tp(d,h);break;case 22:h.memoizedState===null&&Ma(d,h,i),_i(h,h.return);break;case 30:break;default:Ma(d,h,i)}a=a.sibling}}function ad(t,a){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&ci(i))}function sd(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&ci(t))}function Jn(t,a,i,o){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)sp(t,a,i,o),a=a.sibling}function sp(t,a,i,o){var d=a.flags;switch(a.tag){case 0:case 11:case 15:Jn(t,a,i,o),d&2048&&wi(9,a);break;case 1:Jn(t,a,i,o);break;case 3:Jn(t,a,i,o),d&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&ci(t)));break;case 12:if(d&2048){Jn(t,a,i,o),t=a.stateNode;try{var h=a.memoizedProps,b=h.id,E=h.onPostCommit;typeof E=="function"&&E(b,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(R){et(a,a.return,R)}}else Jn(t,a,i,o);break;case 31:Jn(t,a,i,o);break;case 13:Jn(t,a,i,o);break;case 23:break;case 22:h=a.stateNode,b=a.alternate,a.memoizedState!==null?h._visibility&2?Jn(t,a,i,o):Ei(t,a):h._visibility&2?Jn(t,a,i,o):(h._visibility|=2,vl(t,a,i,o,(a.subtreeFlags&10256)!==0||!1)),d&2048&&ad(b,a);break;case 24:Jn(t,a,i,o),d&2048&&sd(a.alternate,a);break;default:Jn(t,a,i,o)}}function vl(t,a,i,o,d){for(d=d&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var h=t,b=a,E=i,R=o,Z=b.flags;switch(b.tag){case 0:case 11:case 15:vl(h,b,E,R,d),wi(8,b);break;case 23:break;case 22:var X=b.stateNode;b.memoizedState!==null?X._visibility&2?vl(h,b,E,R,d):Ei(h,b):(X._visibility|=2,vl(h,b,E,R,d)),d&&Z&2048&&ad(b.alternate,b);break;case 24:vl(h,b,E,R,d),d&&Z&2048&&sd(b.alternate,b);break;default:vl(h,b,E,R,d)}a=a.sibling}}function Ei(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var i=t,o=a,d=o.flags;switch(o.tag){case 22:Ei(i,o),d&2048&&ad(o.alternate,o);break;case 24:Ei(i,o),d&2048&&sd(o.alternate,o);break;default:Ei(i,o)}a=a.sibling}}var Ni=8192;function yl(t,a,i){if(t.subtreeFlags&Ni)for(t=t.child;t!==null;)lp(t,a,i),t=t.sibling}function lp(t,a,i){switch(t.tag){case 26:yl(t,a,i),t.flags&Ni&&t.memoizedState!==null&&rw(i,Qn,t.memoizedState,t.memoizedProps);break;case 5:yl(t,a,i);break;case 3:case 4:var o=Qn;Qn=co(t.stateNode.containerInfo),yl(t,a,i),Qn=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Ni,Ni=16777216,yl(t,a,i),Ni=o):yl(t,a,i));break;default:yl(t,a,i)}}function ip(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Ti(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var o=a[i];Ht=o,op(o,t)}ip(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)rp(t),t=t.sibling}function rp(t){switch(t.tag){case 0:case 11:case 15:Ti(t),t.flags&2048&&Ka(9,t,t.return);break;case 3:Ti(t);break;case 12:Ti(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Wr(t)):Ti(t);break;default:Ti(t)}}function Wr(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var o=a[i];Ht=o,op(o,t)}ip(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Ka(8,a,a.return),Wr(a);break;case 22:i=a.stateNode,i._visibility&2&&(i._visibility&=-3,Wr(a));break;default:Wr(a)}t=t.sibling}}function op(t,a){for(;Ht!==null;){var i=Ht;switch(i.tag){case 0:case 11:case 15:Ka(8,i,a);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ci(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,Ht=o;else e:for(i=t;Ht!==null;){o=Ht;var d=o.sibling,h=o.return;if(Qg(o),o===i){Ht=null;break e}if(d!==null){d.return=h,Ht=d;break e}Ht=h}}}var w1={getCacheForType:function(t){var a=Kt(Rt),i=a.data.get(t);return i===void 0&&(i=t(),a.data.set(t,i)),i},cacheSignal:function(){return Kt(Rt).controller.signal}},_1=typeof WeakMap=="function"?WeakMap:Map,We=0,ut=null,Oe=null,Ie=0,Je=0,Dn=null,Wa=!1,bl=!1,ld=!1,Da=0,St=0,Xa=0,Ps=0,id=0,Rn=0,xl=0,ji=null,bn=null,rd=!1,Xr=0,cp=0,Qr=1/0,Jr=null,Qa=null,Pt=0,Ja=null,Sl=null,Ra=0,od=0,cd=null,up=null,Mi=0,ud=null;function Cn(){return(We&2)!==0&&Ie!==0?Ie&-Ie:k.T!==null?pd():hn()}function dp(){if(Rn===0)if((Ie&536870912)===0||Ue){var t=rn;rn<<=1,(rn&3932160)===0&&(rn=262144),Rn=t}else Rn=536870912;return t=jn.current,t!==null&&(t.flags|=32),Rn}function xn(t,a,i){(t===ut&&(Je===2||Je===9)||t.cancelPendingCommit!==null)&&(wl(t,0),es(t,Ie,Rn,!1)),Se(t,i),((We&2)===0||t!==ut)&&(t===ut&&((We&2)===0&&(Ps|=i),St===4&&es(t,Ie,Rn,!1)),ua(t))}function fp(t,a,i){if((We&6)!==0)throw Error(l(327));var o=!i&&(a&127)===0&&(a&t.expiredLanes)===0||ct(t,a),d=o?T1(t,a):fd(t,a,!0),h=o;do{if(d===0){bl&&!o&&es(t,a,0,!1);break}else{if(i=t.current.alternate,h&&!E1(i)){d=fd(t,a,!1),h=!1;continue}if(d===2){if(h=a,t.errorRecoveryDisabledLanes&h)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){a=b;e:{var E=t;d=ji;var R=E.current.memoizedState.isDehydrated;if(R&&(wl(E,b).flags|=256),b=fd(E,b,!1),b!==2){if(ld&&!R){E.errorRecoveryDisabledLanes|=h,Ps|=h,d=4;break e}h=bn,bn=d,h!==null&&(bn===null?bn=h:bn.push.apply(bn,h))}d=b}if(h=!1,d!==2)continue}}if(d===1){wl(t,0),es(t,a,0,!0);break}e:{switch(o=t,h=d,h){case 0:case 1:throw Error(l(345));case 4:if((a&4194048)!==a)break;case 6:es(o,a,Rn,!Wa);break e;case 2:bn=null;break;case 3:case 5:break;default:throw Error(l(329))}if((a&62914560)===a&&(d=Xr+300-V(),10<d)){if(es(o,a,Rn,!Wa),Ke(o,0,!0)!==0)break e;Ra=a,o.timeoutHandle=$p(hp.bind(null,o,i,bn,Jr,rd,a,Rn,Ps,xl,Wa,h,"Throttled",-0,0),d);break e}hp(o,i,bn,Jr,rd,a,Rn,Ps,xl,Wa,h,null,-0,0)}}break}while(!0);ua(t)}function hp(t,a,i,o,d,h,b,E,R,Z,X,ne,F,G){if(t.timeoutHandle=-1,ne=a.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ga},lp(a,h,ne);var me=(h&62914560)===h?Xr-V():(h&4194048)===h?cp-V():0;if(me=ow(ne,me),me!==null){Ra=h,t.cancelPendingCommit=me(Sp.bind(null,t,a,h,i,o,d,b,E,R,X,ne,null,F,G)),es(t,h,b,!Z);return}}Sp(t,a,h,i,o,d,b,E,R)}function E1(t){for(var a=t;;){var i=a.tag;if((i===0||i===11||i===15)&&a.flags&16384&&(i=a.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var d=i[o],h=d.getSnapshot;d=d.value;try{if(!Nn(h(),d))return!1}catch{return!1}}if(i=a.child,a.subtreeFlags&16384&&i!==null)i.return=a,a=i;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function es(t,a,i,o){a&=~id,a&=~Ps,t.suspendedLanes|=a,t.pingedLanes&=~a,o&&(t.warmLanes|=a),o=t.expirationTimes;for(var d=a;0<d;){var h=31-Q(d),b=1<<h;o[h]=-1,d&=~b}i!==0&&qt(t,i,a)}function eo(){return(We&6)===0?(Di(0),!1):!0}function dd(){if(Oe!==null){if(Je===0)var t=Oe.return;else t=Oe,ba=js=null,ju(t),fl=null,di=0,t=Oe;for(;t!==null;)Zg(t.alternate,t),t=t.return;Oe=null}}function wl(t,a){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,Z1(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),Ra=0,dd(),ut=t,Oe=i=va(t.current,null),Ie=a,Je=0,Dn=null,Wa=!1,bl=ct(t,a),ld=!1,xl=Rn=id=Ps=Xa=St=0,bn=ji=null,rd=!1,(a&8)!==0&&(a|=a&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=a;0<o;){var d=31-Q(o),h=1<<d;a|=t[d],o&=~h}return Da=a,Sr(),i}function mp(t,a){De=null,k.H=bi,a===dl||a===Dr?(a=Rm(),Je=3):a===gu?(a=Rm(),Je=4):Je=a===$u?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Dn=a,Oe===null&&(St=1,$r(t,Un(a,t.current)))}function gp(){var t=jn.current;return t===null?!0:(Ie&4194048)===Ie?Fn===null:(Ie&62914560)===Ie||(Ie&536870912)!==0?t===Fn:!1}function pp(){var t=k.H;return k.H=bi,t===null?bi:t}function vp(){var t=k.A;return k.A=w1,t}function to(){St=4,Wa||(Ie&4194048)!==Ie&&jn.current!==null||(bl=!0),(Xa&134217727)===0&&(Ps&134217727)===0||ut===null||es(ut,Ie,Rn,!1)}function fd(t,a,i){var o=We;We|=2;var d=pp(),h=vp();(ut!==t||Ie!==a)&&(Jr=null,wl(t,a)),a=!1;var b=St;e:do try{if(Je!==0&&Oe!==null){var E=Oe,R=Dn;switch(Je){case 8:dd(),b=6;break e;case 3:case 2:case 9:case 6:jn.current===null&&(a=!0);var Z=Je;if(Je=0,Dn=null,_l(t,E,R,Z),i&&bl){b=0;break e}break;default:Z=Je,Je=0,Dn=null,_l(t,E,R,Z)}}N1(),b=St;break}catch(X){mp(t,X)}while(!0);return a&&t.shellSuspendCounter++,ba=js=null,We=o,k.H=d,k.A=h,Oe===null&&(ut=null,Ie=0,Sr()),b}function N1(){for(;Oe!==null;)yp(Oe)}function T1(t,a){var i=We;We|=2;var o=pp(),d=vp();ut!==t||Ie!==a?(Jr=null,Qr=V()+500,wl(t,a)):bl=ct(t,a);e:do try{if(Je!==0&&Oe!==null){a=Oe;var h=Dn;t:switch(Je){case 1:Je=0,Dn=null,_l(t,a,h,1);break;case 2:case 9:if(Mm(h)){Je=0,Dn=null,bp(a);break}a=function(){Je!==2&&Je!==9||ut!==t||(Je=7),ua(t)},h.then(a,a);break e;case 3:Je=7;break e;case 4:Je=5;break e;case 7:Mm(h)?(Je=0,Dn=null,bp(a)):(Je=0,Dn=null,_l(t,a,h,7));break;case 5:var b=null;switch(Oe.tag){case 26:b=Oe.memoizedState;case 5:case 27:var E=Oe;if(b?sv(b):E.stateNode.complete){Je=0,Dn=null;var R=E.sibling;if(R!==null)Oe=R;else{var Z=E.return;Z!==null?(Oe=Z,no(Z)):Oe=null}break t}}Je=0,Dn=null,_l(t,a,h,5);break;case 6:Je=0,Dn=null,_l(t,a,h,6);break;case 8:dd(),St=6;break e;default:throw Error(l(462))}}j1();break}catch(X){mp(t,X)}while(!0);return ba=js=null,k.H=o,k.A=d,We=i,Oe!==null?0:(ut=null,Ie=0,Sr(),St)}function j1(){for(;Oe!==null&&!Qe();)yp(Oe)}function yp(t){var a=Hg(t.alternate,t,Da);t.memoizedProps=t.pendingProps,a===null?no(t):Oe=a}function bp(t){var a=t,i=a.alternate;switch(a.tag){case 15:case 0:a=Pg(i,a,a.pendingProps,a.type,void 0,Ie);break;case 11:a=Pg(i,a,a.pendingProps,a.type.render,a.ref,Ie);break;case 5:ju(a);default:Zg(i,a),a=Oe=vm(a,Da),a=Hg(i,a,Da)}t.memoizedProps=t.pendingProps,a===null?no(t):Oe=a}function _l(t,a,i,o){ba=js=null,ju(a),fl=null,di=0;var d=a.return;try{if(g1(t,d,a,i,Ie)){St=1,$r(t,Un(i,t.current)),Oe=null;return}}catch(h){if(d!==null)throw Oe=d,h;St=1,$r(t,Un(i,t.current)),Oe=null;return}a.flags&32768?(Ue||o===1?t=!0:bl||(Ie&536870912)!==0?t=!1:(Wa=t=!0,(o===2||o===9||o===3||o===6)&&(o=jn.current,o!==null&&o.tag===13&&(o.flags|=16384))),xp(a,t)):no(a)}function no(t){var a=t;do{if((a.flags&32768)!==0){xp(a,Wa);return}t=a.return;var i=y1(a.alternate,a,Da);if(i!==null){Oe=i;return}if(a=a.sibling,a!==null){Oe=a;return}Oe=a=t}while(a!==null);St===0&&(St=5)}function xp(t,a){do{var i=b1(t.alternate,t);if(i!==null){i.flags&=32767,Oe=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!a&&(t=t.sibling,t!==null)){Oe=t;return}Oe=t=i}while(t!==null);St=6,Oe=null}function Sp(t,a,i,o,d,h,b,E,R){t.cancelPendingCommit=null;do ao();while(Pt!==0);if((We&6)!==0)throw Error(l(327));if(a!==null){if(a===t.current)throw Error(l(177));if(h=a.lanes|a.childLanes,h|=eu,st(t,i,h,b,E,R),t===ut&&(Oe=ut=null,Ie=0),Sl=a,Ja=t,Ra=i,od=h,cd=d,up=o,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,C1(qe,function(){return Tp(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||o){o=k.T,k.T=null,d=Y.p,Y.p=2,b=We,We|=4;try{x1(t,a,i)}finally{We=b,Y.p=d,k.T=o}}Pt=1,wp(),_p(),Ep()}}function wp(){if(Pt===1){Pt=0;var t=Ja,a=Sl,i=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||i){i=k.T,k.T=null;var o=Y.p;Y.p=2;var d=We;We|=4;try{np(a,t);var h=Ed,b=om(t.containerInfo),E=h.focusedElem,R=h.selectionRange;if(b!==E&&E&&E.ownerDocument&&rm(E.ownerDocument.documentElement,E)){if(R!==null&&Kc(E)){var Z=R.start,X=R.end;if(X===void 0&&(X=Z),"selectionStart"in E)E.selectionStart=Z,E.selectionEnd=Math.min(X,E.value.length);else{var ne=E.ownerDocument||document,F=ne&&ne.defaultView||window;if(F.getSelection){var G=F.getSelection(),me=E.textContent.length,we=Math.min(R.start,me),rt=R.end===void 0?we:Math.min(R.end,me);!G.extend&&we>rt&&(b=rt,rt=we,we=b);var q=im(E,we),O=im(E,rt);if(q&&O&&(G.rangeCount!==1||G.anchorNode!==q.node||G.anchorOffset!==q.offset||G.focusNode!==O.node||G.focusOffset!==O.offset)){var $=ne.createRange();$.setStart(q.node,q.offset),G.removeAllRanges(),we>rt?(G.addRange($),G.extend(O.node,O.offset)):($.setEnd(O.node,O.offset),G.addRange($))}}}}for(ne=[],G=E;G=G.parentNode;)G.nodeType===1&&ne.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ne.length;E++){var J=ne[E];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}po=!!_d,Ed=_d=null}finally{We=d,Y.p=o,k.T=i}}t.current=a,Pt=2}}function _p(){if(Pt===2){Pt=0;var t=Ja,a=Sl,i=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||i){i=k.T,k.T=null;var o=Y.p;Y.p=2;var d=We;We|=4;try{Xg(t,a.alternate,a)}finally{We=d,Y.p=o,k.T=i}}Pt=3}}function Ep(){if(Pt===4||Pt===3){Pt=0,at();var t=Ja,a=Sl,i=Ra,o=up;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Pt=5:(Pt=0,Sl=Ja=null,Np(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Qa=null),Pn(i),a=a.stateNode,$e&&typeof $e.onCommitFiberRoot=="function")try{$e.onCommitFiberRoot(ia,a,void 0,(a.current.flags&128)===128)}catch{}if(o!==null){a=k.T,d=Y.p,Y.p=2,k.T=null;try{for(var h=t.onRecoverableError,b=0;b<o.length;b++){var E=o[b];h(E.value,{componentStack:E.stack})}}finally{k.T=a,Y.p=d}}(Ra&3)!==0&&ao(),ua(t),d=t.pendingLanes,(i&261930)!==0&&(d&42)!==0?t===ud?Mi++:(Mi=0,ud=t):Mi=0,Di(0)}}function Np(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,ci(a)))}function ao(){return wp(),_p(),Ep(),Tp()}function Tp(){if(Pt!==5)return!1;var t=Ja,a=od;od=0;var i=Pn(Ra),o=k.T,d=Y.p;try{Y.p=32>i?32:i,k.T=null,i=cd,cd=null;var h=Ja,b=Ra;if(Pt=0,Sl=Ja=null,Ra=0,(We&6)!==0)throw Error(l(331));var E=We;if(We|=4,rp(h.current),sp(h,h.current,b,i),We=E,Di(0,!1),$e&&typeof $e.onPostCommitFiberRoot=="function")try{$e.onPostCommitFiberRoot(ia,h)}catch{}return!0}finally{Y.p=d,k.T=o,Np(t,a)}}function jp(t,a,i){a=Un(i,a),a=Hu(t.stateNode,a,2),t=Ya(t,a,2),t!==null&&(Se(t,2),ua(t))}function et(t,a,i){if(t.tag===3)jp(t,t,i);else for(;a!==null;){if(a.tag===3){jp(a,t,i);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Qa===null||!Qa.has(o))){t=Un(i,t),i=Mg(2),o=Ya(a,i,2),o!==null&&(Dg(i,o,a,t),Se(o,2),ua(o));break}}a=a.return}}function hd(t,a,i){var o=t.pingCache;if(o===null){o=t.pingCache=new _1;var d=new Set;o.set(a,d)}else d=o.get(a),d===void 0&&(d=new Set,o.set(a,d));d.has(i)||(ld=!0,d.add(i),t=M1.bind(null,t,a,i),a.then(t,t))}function M1(t,a,i){var o=t.pingCache;o!==null&&o.delete(a),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,ut===t&&(Ie&i)===i&&(St===4||St===3&&(Ie&62914560)===Ie&&300>V()-Xr?(We&2)===0&&wl(t,0):id|=i,xl===Ie&&(xl=0)),ua(t)}function Mp(t,a){a===0&&(a=Dt()),t=Es(t,a),t!==null&&(Se(t,a),ua(t))}function D1(t){var a=t.memoizedState,i=0;a!==null&&(i=a.retryLane),Mp(t,i)}function R1(t,a){var i=0;switch(t.tag){case 31:case 13:var o=t.stateNode,d=t.memoizedState;d!==null&&(i=d.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(l(314))}o!==null&&o.delete(a),Mp(t,i)}function C1(t,a){return re(t,a)}var so=null,El=null,md=!1,lo=!1,gd=!1,ts=0;function ua(t){t!==El&&t.next===null&&(El===null?so=El=t:El=El.next=t),lo=!0,md||(md=!0,k1())}function Di(t,a){if(!gd&&lo){gd=!0;do for(var i=!1,o=so;o!==null;){if(t!==0){var d=o.pendingLanes;if(d===0)var h=0;else{var b=o.suspendedLanes,E=o.pingedLanes;h=(1<<31-Q(42|t)+1)-1,h&=d&~(b&~E),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(i=!0,Ap(o,h))}else h=Ie,h=Ke(o,o===ut?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(h&3)===0||ct(o,h)||(i=!0,Ap(o,h));o=o.next}while(i);gd=!1}}function A1(){Dp()}function Dp(){lo=md=!1;var t=0;ts!==0&&$1()&&(t=ts);for(var a=V(),i=null,o=so;o!==null;){var d=o.next,h=Rp(o,a);h===0?(o.next=null,i===null?so=d:i.next=d,d===null&&(El=i)):(i=o,(t!==0||(h&3)!==0)&&(lo=!0)),o=d}Pt!==0&&Pt!==5||Di(t),ts!==0&&(ts=0)}function Rp(t,a){for(var i=t.suspendedLanes,o=t.pingedLanes,d=t.expirationTimes,h=t.pendingLanes&-62914561;0<h;){var b=31-Q(h),E=1<<b,R=d[b];R===-1?((E&i)===0||(E&o)!==0)&&(d[b]=Ee(E,a)):R<=a&&(t.expiredLanes|=E),h&=~E}if(a=ut,i=Ie,i=Ke(t,t===a?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,i===0||t===a&&(Je===2||Je===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&ze(o),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||ct(t,i)){if(a=i&-i,a===t.callbackPriority)return a;switch(o!==null&&ze(o),Pn(i)){case 2:case 8:i=xe;break;case 32:i=qe;break;case 268435456:i=ln;break;default:i=qe}return o=Cp.bind(null,t),i=re(i,o),t.callbackPriority=a,t.callbackNode=i,a}return o!==null&&o!==null&&ze(o),t.callbackPriority=2,t.callbackNode=null,2}function Cp(t,a){if(Pt!==0&&Pt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(ao()&&t.callbackNode!==i)return null;var o=Ie;return o=Ke(t,t===ut?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(fp(t,o,a),Rp(t,V()),t.callbackNode!=null&&t.callbackNode===i?Cp.bind(null,t):null)}function Ap(t,a){if(ao())return null;fp(t,a,!0)}function k1(){F1(function(){(We&6)!==0?re(Ve,A1):Dp()})}function pd(){if(ts===0){var t=cl;t===0&&(t=Et,Et<<=1,(Et&261888)===0&&(Et=256)),ts=t}return ts}function kp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:hr(""+t)}function zp(t,a){var i=a.ownerDocument.createElement("input");return i.name=a.name,i.value=a.value,t.id&&i.setAttribute("form",t.id),a.parentNode.insertBefore(i,a),t=new FormData(t),i.parentNode.removeChild(i),t}function z1(t,a,i,o,d){if(a==="submit"&&i&&i.stateNode===d){var h=kp((d[mn]||null).action),b=o.submitter;b&&(a=(a=b[mn]||null)?kp(a.formAction):b.getAttribute("formAction"),a!==null&&(h=a,b=null));var E=new vr("action","action",null,o,d);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ts!==0){var R=b?zp(d,b):new FormData(d);Pu(i,{pending:!0,data:R,method:d.method,action:h},null,R)}}else typeof h=="function"&&(E.preventDefault(),R=b?zp(d,b):new FormData(d),Pu(i,{pending:!0,data:R,method:d.method,action:h},h,R))},currentTarget:d}]})}}for(var vd=0;vd<Jc.length;vd++){var yd=Jc[vd],O1=yd.toLowerCase(),P1=yd[0].toUpperCase()+yd.slice(1);Xn(O1,"on"+P1)}Xn(dm,"onAnimationEnd"),Xn(fm,"onAnimationIteration"),Xn(hm,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(QS,"onTransitionRun"),Xn(JS,"onTransitionStart"),Xn(e1,"onTransitionCancel"),Xn(mm,"onTransitionEnd"),Ks("onMouseEnter",["mouseout","mouseover"]),Ks("onMouseLeave",["mouseout","mouseover"]),Ks("onPointerEnter",["pointerout","pointerover"]),Ks("onPointerLeave",["pointerout","pointerover"]),xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xs("onBeforeInput",["compositionend","keypress","textInput","paste"]),xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),B1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ri));function Op(t,a){a=(a&4)!==0;for(var i=0;i<t.length;i++){var o=t[i],d=o.event;o=o.listeners;e:{var h=void 0;if(a)for(var b=o.length-1;0<=b;b--){var E=o[b],R=E.instance,Z=E.currentTarget;if(E=E.listener,R!==h&&d.isPropagationStopped())break e;h=E,d.currentTarget=Z;try{h(d)}catch(X){xr(X)}d.currentTarget=null,h=R}else for(b=0;b<o.length;b++){if(E=o[b],R=E.instance,Z=E.currentTarget,E=E.listener,R!==h&&d.isPropagationStopped())break e;h=E,d.currentTarget=Z;try{h(d)}catch(X){xr(X)}d.currentTarget=null,h=R}}}}function Pe(t,a){var i=a[Cc];i===void 0&&(i=a[Cc]=new Set);var o=t+"__bubble";i.has(o)||(Pp(a,t,2,!1),i.add(o))}function bd(t,a,i){var o=0;a&&(o|=4),Pp(i,t,o,a)}var io="_reactListening"+Math.random().toString(36).slice(2);function xd(t){if(!t[io]){t[io]=!0,Dh.forEach(function(i){i!=="selectionchange"&&(B1.has(i)||bd(i,!1,t),bd(i,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[io]||(a[io]=!0,bd("selectionchange",!1,a))}}function Pp(t,a,i,o){switch(dv(a)){case 2:var d=dw;break;case 8:d=fw;break;default:d=Od}i=d.bind(null,a,i,t),d=void 0,!qc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(d=!0),o?d!==void 0?t.addEventListener(a,i,{capture:!0,passive:d}):t.addEventListener(a,i,!0):d!==void 0?t.addEventListener(a,i,{passive:d}):t.addEventListener(a,i,!1)}function Sd(t,a,i,o,d){var h=o;if((a&1)===0&&(a&2)===0&&o!==null)e:for(;;){if(o===null)return;var b=o.tag;if(b===3||b===4){var E=o.stateNode.containerInfo;if(E===d)break;if(b===4)for(b=o.return;b!==null;){var R=b.tag;if((R===3||R===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;E!==null;){if(b=Ys(E),b===null)return;if(R=b.tag,R===5||R===6||R===26||R===27){o=h=b;continue e}E=E.parentNode}}o=o.return}Uh(function(){var Z=h,X=Ic(i),ne=[];e:{var F=gm.get(t);if(F!==void 0){var G=vr,me=t;switch(t){case"keypress":if(gr(i)===0)break e;case"keydown":case"keyup":G=RS;break;case"focusin":me="focus",G=Zc;break;case"focusout":me="blur",G=Zc;break;case"beforeblur":case"afterblur":G=Zc;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=Zh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=yS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=kS;break;case dm:case fm:case hm:G=SS;break;case mm:G=OS;break;case"scroll":case"scrollend":G=pS;break;case"wheel":G=BS;break;case"copy":case"cut":case"paste":G=_S;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Yh;break;case"toggle":case"beforetoggle":G=LS}var we=(a&4)!==0,rt=!we&&(t==="scroll"||t==="scrollend"),q=we?F!==null?F+"Capture":null:F;we=[];for(var O=Z,$;O!==null;){var J=O;if($=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||$===null||q===null||(J=Ql(O,q),J!=null&&we.push(Ci(O,J,$))),rt)break;O=O.return}0<we.length&&(F=new G(F,me,null,i,X),ne.push({event:F,listeners:we}))}}if((a&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",G=t==="mouseout"||t==="pointerout",F&&i!==Bc&&(me=i.relatedTarget||i.fromElement)&&(Ys(me)||me[Fs]))break e;if((G||F)&&(F=X.window===X?X:(F=X.ownerDocument)?F.defaultView||F.parentWindow:window,G?(me=i.relatedTarget||i.toElement,G=Z,me=me?Ys(me):null,me!==null&&(rt=c(me),we=me.tag,me!==rt||we!==5&&we!==27&&we!==6)&&(me=null)):(G=null,me=Z),G!==me)){if(we=Zh,J="onMouseLeave",q="onMouseEnter",O="mouse",(t==="pointerout"||t==="pointerover")&&(we=Yh,J="onPointerLeave",q="onPointerEnter",O="pointer"),rt=G==null?F:Xl(G),$=me==null?F:Xl(me),F=new we(J,O+"leave",G,i,X),F.target=rt,F.relatedTarget=$,J=null,Ys(X)===Z&&(we=new we(q,O+"enter",me,i,X),we.target=$,we.relatedTarget=rt,J=we),rt=J,G&&me)t:{for(we=I1,q=G,O=me,$=0,J=q;J;J=we(J))$++;J=0;for(var ye=O;ye;ye=we(ye))J++;for(;0<$-J;)q=we(q),$--;for(;0<J-$;)O=we(O),J--;for(;$--;){if(q===O||O!==null&&q===O.alternate){we=q;break t}q=we(q),O=we(O)}we=null}else we=null;G!==null&&Bp(ne,F,G,we,!1),me!==null&&rt!==null&&Bp(ne,rt,me,we,!0)}}e:{if(F=Z?Xl(Z):window,G=F.nodeName&&F.nodeName.toLowerCase(),G==="select"||G==="input"&&F.type==="file")var Fe=em;else if(Qh(F))if(tm)Fe=KS;else{Fe=GS;var pe=YS}else G=F.nodeName,!G||G.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?Z&&Pc(Z.elementType)&&(Fe=em):Fe=VS;if(Fe&&(Fe=Fe(t,Z))){Jh(ne,Fe,i,X);break e}pe&&pe(t,F,Z),t==="focusout"&&Z&&F.type==="number"&&Z.memoizedProps.value!=null&&Oc(F,"number",F.value)}switch(pe=Z?Xl(Z):window,t){case"focusin":(Qh(pe)||pe.contentEditable==="true")&&(tl=pe,Wc=Z,ii=null);break;case"focusout":ii=Wc=tl=null;break;case"mousedown":Xc=!0;break;case"contextmenu":case"mouseup":case"dragend":Xc=!1,cm(ne,i,X);break;case"selectionchange":if(XS)break;case"keydown":case"keyup":cm(ne,i,X)}var Ae;if(Yc)e:{switch(t){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else el?Wh(t,i)&&(Le="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(Le="onCompositionStart");Le&&(Gh&&i.locale!=="ko"&&(el||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&el&&(Ae=Hh()):(La=X,Uc="value"in La?La.value:La.textContent,el=!0)),pe=ro(Z,Le),0<pe.length&&(Le=new Fh(Le,t,null,i,X),ne.push({event:Le,listeners:pe}),Ae?Le.data=Ae:(Ae=Xh(i),Ae!==null&&(Le.data=Ae)))),(Ae=US?HS(t,i):$S(t,i))&&(Le=ro(Z,"onBeforeInput"),0<Le.length&&(pe=new Fh("onBeforeInput","beforeinput",null,i,X),ne.push({event:pe,listeners:Le}),pe.data=Ae)),z1(ne,t,Z,i,X)}Op(ne,a)})}function Ci(t,a,i){return{instance:t,listener:a,currentTarget:i}}function ro(t,a){for(var i=a+"Capture",o=[];t!==null;){var d=t,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=Ql(t,i),d!=null&&o.unshift(Ci(t,d,h)),d=Ql(t,a),d!=null&&o.push(Ci(t,d,h))),t.tag===3)return o;t=t.return}return[]}function I1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Bp(t,a,i,o,d){for(var h=a._reactName,b=[];i!==null&&i!==o;){var E=i,R=E.alternate,Z=E.stateNode;if(E=E.tag,R!==null&&R===o)break;E!==5&&E!==26&&E!==27||Z===null||(R=Z,d?(Z=Ql(i,h),Z!=null&&b.unshift(Ci(i,Z,R))):d||(Z=Ql(i,h),Z!=null&&b.push(Ci(i,Z,R)))),i=i.return}b.length!==0&&t.push({event:a,listeners:b})}var L1=/\r\n?/g,q1=/\u0000|\uFFFD/g;function Ip(t){return(typeof t=="string"?t:""+t).replace(L1,`
`).replace(q1,"")}function Lp(t,a){return a=Ip(a),Ip(t)===a}function it(t,a,i,o,d,h){switch(i){case"children":typeof o=="string"?a==="body"||a==="textarea"&&o===""||Xs(t,o):(typeof o=="number"||typeof o=="bigint")&&a!=="body"&&Xs(t,""+o);break;case"className":dr(t,"class",o);break;case"tabIndex":dr(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":dr(t,i,o);break;case"style":Lh(t,o,h);break;case"data":if(a!=="object"){dr(t,"data",o);break}case"src":case"href":if(o===""&&(a!=="a"||i!=="href")){t.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(i);break}o=hr(""+o),t.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(i==="formAction"?(a!=="input"&&it(t,a,"name",d.name,d,null),it(t,a,"formEncType",d.formEncType,d,null),it(t,a,"formMethod",d.formMethod,d,null),it(t,a,"formTarget",d.formTarget,d,null)):(it(t,a,"encType",d.encType,d,null),it(t,a,"method",d.method,d,null),it(t,a,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(i);break}o=hr(""+o),t.setAttribute(i,o);break;case"onClick":o!=null&&(t.onclick=ga);break;case"onScroll":o!=null&&Pe("scroll",t);break;case"onScrollEnd":o!=null&&Pe("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(i=o.__html,i!=null){if(d.children!=null)throw Error(l(60));t.innerHTML=i}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}i=hr(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(i,""+o):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":o===!0?t.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(i,o):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(i,o):t.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(i):t.setAttribute(i,o);break;case"popover":Pe("beforetoggle",t),Pe("toggle",t),ur(t,"popover",o);break;case"xlinkActuate":ma(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ma(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ma(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ma(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ma(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ma(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ma(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ma(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ma(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ur(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=mS.get(i)||i,ur(t,i,o))}}function wd(t,a,i,o,d,h){switch(i){case"style":Lh(t,o,h);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(l(61));if(i=o.__html,i!=null){if(d.children!=null)throw Error(l(60));t.innerHTML=i}}break;case"children":typeof o=="string"?Xs(t,o):(typeof o=="number"||typeof o=="bigint")&&Xs(t,""+o);break;case"onScroll":o!=null&&Pe("scroll",t);break;case"onScrollEnd":o!=null&&Pe("scrollend",t);break;case"onClick":o!=null&&(t.onclick=ga);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Rh.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(d=i.endsWith("Capture"),a=i.slice(2,d?i.length-7:void 0),h=t[mn]||null,h=h!=null?h[i]:null,typeof h=="function"&&t.removeEventListener(a,h,d),typeof o=="function")){typeof h!="function"&&h!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(a,o,d);break e}i in t?t[i]=o:o===!0?t.setAttribute(i,""):ur(t,i,o)}}}function Xt(t,a,i){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pe("error",t),Pe("load",t);var o=!1,d=!1,h;for(h in i)if(i.hasOwnProperty(h)){var b=i[h];if(b!=null)switch(h){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,a));default:it(t,a,h,b,i,null)}}d&&it(t,a,"srcSet",i.srcSet,i,null),o&&it(t,a,"src",i.src,i,null);return;case"input":Pe("invalid",t);var E=h=b=d=null,R=null,Z=null;for(o in i)if(i.hasOwnProperty(o)){var X=i[o];if(X!=null)switch(o){case"name":d=X;break;case"type":b=X;break;case"checked":R=X;break;case"defaultChecked":Z=X;break;case"value":h=X;break;case"defaultValue":E=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(l(137,a));break;default:it(t,a,o,X,i,null)}}Oh(t,h,E,R,Z,b,d,!1);return;case"select":Pe("invalid",t),o=b=h=null;for(d in i)if(i.hasOwnProperty(d)&&(E=i[d],E!=null))switch(d){case"value":h=E;break;case"defaultValue":b=E;break;case"multiple":o=E;default:it(t,a,d,E,i,null)}a=h,i=b,t.multiple=!!o,a!=null?Ws(t,!!o,a,!1):i!=null&&Ws(t,!!o,i,!0);return;case"textarea":Pe("invalid",t),h=d=o=null;for(b in i)if(i.hasOwnProperty(b)&&(E=i[b],E!=null))switch(b){case"value":o=E;break;case"defaultValue":d=E;break;case"children":h=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(l(91));break;default:it(t,a,b,E,i,null)}Bh(t,o,d,h);return;case"option":for(R in i)i.hasOwnProperty(R)&&(o=i[R],o!=null)&&(R==="selected"?t.selected=o&&typeof o!="function"&&typeof o!="symbol":it(t,a,R,o,i,null));return;case"dialog":Pe("beforetoggle",t),Pe("toggle",t),Pe("cancel",t),Pe("close",t);break;case"iframe":case"object":Pe("load",t);break;case"video":case"audio":for(o=0;o<Ri.length;o++)Pe(Ri[o],t);break;case"image":Pe("error",t),Pe("load",t);break;case"details":Pe("toggle",t);break;case"embed":case"source":case"link":Pe("error",t),Pe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in i)if(i.hasOwnProperty(Z)&&(o=i[Z],o!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,a));default:it(t,a,Z,o,i,null)}return;default:if(Pc(a)){for(X in i)i.hasOwnProperty(X)&&(o=i[X],o!==void 0&&wd(t,a,X,o,i,void 0));return}}for(E in i)i.hasOwnProperty(E)&&(o=i[E],o!=null&&it(t,a,E,o,i,null))}function U1(t,a,i,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,b=null,E=null,R=null,Z=null,X=null;for(G in i){var ne=i[G];if(i.hasOwnProperty(G)&&ne!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":R=ne;default:o.hasOwnProperty(G)||it(t,a,G,null,o,ne)}}for(var F in o){var G=o[F];if(ne=i[F],o.hasOwnProperty(F)&&(G!=null||ne!=null))switch(F){case"type":h=G;break;case"name":d=G;break;case"checked":Z=G;break;case"defaultChecked":X=G;break;case"value":b=G;break;case"defaultValue":E=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(l(137,a));break;default:G!==ne&&it(t,a,F,G,o,ne)}}zc(t,b,E,R,Z,X,h,d);return;case"select":G=b=E=F=null;for(h in i)if(R=i[h],i.hasOwnProperty(h)&&R!=null)switch(h){case"value":break;case"multiple":G=R;default:o.hasOwnProperty(h)||it(t,a,h,null,o,R)}for(d in o)if(h=o[d],R=i[d],o.hasOwnProperty(d)&&(h!=null||R!=null))switch(d){case"value":F=h;break;case"defaultValue":E=h;break;case"multiple":b=h;default:h!==R&&it(t,a,d,h,o,R)}a=E,i=b,o=G,F!=null?Ws(t,!!i,F,!1):!!o!=!!i&&(a!=null?Ws(t,!!i,a,!0):Ws(t,!!i,i?[]:"",!1));return;case"textarea":G=F=null;for(E in i)if(d=i[E],i.hasOwnProperty(E)&&d!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:it(t,a,E,null,o,d)}for(b in o)if(d=o[b],h=i[b],o.hasOwnProperty(b)&&(d!=null||h!=null))switch(b){case"value":F=d;break;case"defaultValue":G=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(l(91));break;default:d!==h&&it(t,a,b,d,o,h)}Ph(t,F,G);return;case"option":for(var me in i)F=i[me],i.hasOwnProperty(me)&&F!=null&&!o.hasOwnProperty(me)&&(me==="selected"?t.selected=!1:it(t,a,me,null,o,F));for(R in o)F=o[R],G=i[R],o.hasOwnProperty(R)&&F!==G&&(F!=null||G!=null)&&(R==="selected"?t.selected=F&&typeof F!="function"&&typeof F!="symbol":it(t,a,R,F,o,G));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in i)F=i[we],i.hasOwnProperty(we)&&F!=null&&!o.hasOwnProperty(we)&&it(t,a,we,null,o,F);for(Z in o)if(F=o[Z],G=i[Z],o.hasOwnProperty(Z)&&F!==G&&(F!=null||G!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(l(137,a));break;default:it(t,a,Z,F,o,G)}return;default:if(Pc(a)){for(var rt in i)F=i[rt],i.hasOwnProperty(rt)&&F!==void 0&&!o.hasOwnProperty(rt)&&wd(t,a,rt,void 0,o,F);for(X in o)F=o[X],G=i[X],!o.hasOwnProperty(X)||F===G||F===void 0&&G===void 0||wd(t,a,X,F,o,G);return}}for(var q in i)F=i[q],i.hasOwnProperty(q)&&F!=null&&!o.hasOwnProperty(q)&&it(t,a,q,null,o,F);for(ne in o)F=o[ne],G=i[ne],!o.hasOwnProperty(ne)||F===G||F==null&&G==null||it(t,a,ne,F,o,G)}function qp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function H1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var d=i[o],h=d.transferSize,b=d.initiatorType,E=d.duration;if(h&&E&&qp(b)){for(b=0,E=d.responseEnd,o+=1;o<i.length;o++){var R=i[o],Z=R.startTime;if(Z>E)break;var X=R.transferSize,ne=R.initiatorType;X&&qp(ne)&&(R=R.responseEnd,b+=X*(R<E?1:(E-Z)/(R-Z)))}if(--o,a+=8*(h+b)/(d.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var _d=null,Ed=null;function oo(t){return t.nodeType===9?t:t.ownerDocument}function Up(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Hp(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Nd(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Td=null;function $1(){var t=window.event;return t&&t.type==="popstate"?t===Td?!1:(Td=t,!0):(Td=null,!1)}var $p=typeof setTimeout=="function"?setTimeout:void 0,Z1=typeof clearTimeout=="function"?clearTimeout:void 0,Zp=typeof Promise=="function"?Promise:void 0,F1=typeof queueMicrotask=="function"?queueMicrotask:typeof Zp<"u"?function(t){return Zp.resolve(null).then(t).catch(Y1)}:$p;function Y1(t){setTimeout(function(){throw t})}function ns(t){return t==="head"}function Fp(t,a){var i=a,o=0;do{var d=i.nextSibling;if(t.removeChild(i),d&&d.nodeType===8)if(i=d.data,i==="/$"||i==="/&"){if(o===0){t.removeChild(d),Ml(a);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")Ai(t.ownerDocument.documentElement);else if(i==="head"){i=t.ownerDocument.head,Ai(i);for(var h=i.firstChild;h;){var b=h.nextSibling,E=h.nodeName;h[Wl]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&h.rel.toLowerCase()==="stylesheet"||i.removeChild(h),h=b}}else i==="body"&&Ai(t.ownerDocument.body);i=d}while(i);Ml(a)}function Yp(t,a){var i=t;t=0;do{var o=i.nextSibling;if(i.nodeType===1?a?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(a?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(t===0)break;t--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||t++;i=o}while(i)}function jd(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var i=a;switch(a=a.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":jd(i),Ac(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function G1(t,a,i,o){for(;t.nodeType===1;){var d=i;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Wl])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(h=t.getAttribute("rel"),h==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(h!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(h=t.getAttribute("src"),(h!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===h)return t}else return t;if(t=Yn(t.nextSibling),t===null)break}return null}function V1(t,a,i){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Yn(t.nextSibling),t===null))return null;return t}function Gp(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Yn(t.nextSibling),t===null))return null;return t}function Md(t){return t.data==="$?"||t.data==="$~"}function Dd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function K1(t,a){var i=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||i.readyState!=="loading")a();else{var o=function(){a(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Yn(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var Rd=null;function Vp(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"||i==="/&"){if(a===0)return Yn(t.nextSibling);a--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||a++}t=t.nextSibling}return null}function Kp(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(a===0)return t;a--}else i!=="/$"&&i!=="/&"||a++}t=t.previousSibling}return null}function Wp(t,a,i){switch(a=oo(i),t){case"html":if(t=a.documentElement,!t)throw Error(l(452));return t;case"head":if(t=a.head,!t)throw Error(l(453));return t;case"body":if(t=a.body,!t)throw Error(l(454));return t;default:throw Error(l(451))}}function Ai(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Ac(t)}var Gn=new Map,Xp=new Set;function co(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ca=Y.d;Y.d={f:W1,r:X1,D:Q1,C:J1,L:ew,m:tw,X:aw,S:nw,M:sw};function W1(){var t=Ca.f(),a=eo();return t||a}function X1(t){var a=Gs(t);a!==null&&a.tag===5&&a.type==="form"?mg(a):Ca.r(t)}var Nl=typeof document>"u"?null:document;function Qp(t,a,i){var o=Nl;if(o&&typeof a=="string"&&a){var d=Ln(a);d='link[rel="'+t+'"][href="'+d+'"]',typeof i=="string"&&(d+='[crossorigin="'+i+'"]'),Xp.has(d)||(Xp.add(d),t={rel:t,crossOrigin:i,href:a},o.querySelector(d)===null&&(a=o.createElement("link"),Xt(a,"link",t),Ut(a),o.head.appendChild(a)))}}function Q1(t){Ca.D(t),Qp("dns-prefetch",t,null)}function J1(t,a){Ca.C(t,a),Qp("preconnect",t,a)}function ew(t,a,i){Ca.L(t,a,i);var o=Nl;if(o&&t&&a){var d='link[rel="preload"][as="'+Ln(a)+'"]';a==="image"&&i&&i.imageSrcSet?(d+='[imagesrcset="'+Ln(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(d+='[imagesizes="'+Ln(i.imageSizes)+'"]')):d+='[href="'+Ln(t)+'"]';var h=d;switch(a){case"style":h=Tl(t);break;case"script":h=jl(t)}Gn.has(h)||(t=v({rel:"preload",href:a==="image"&&i&&i.imageSrcSet?void 0:t,as:a},i),Gn.set(h,t),o.querySelector(d)!==null||a==="style"&&o.querySelector(ki(h))||a==="script"&&o.querySelector(zi(h))||(a=o.createElement("link"),Xt(a,"link",t),Ut(a),o.head.appendChild(a)))}}function tw(t,a){Ca.m(t,a);var i=Nl;if(i&&t){var o=a&&typeof a.as=="string"?a.as:"script",d='link[rel="modulepreload"][as="'+Ln(o)+'"][href="'+Ln(t)+'"]',h=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=jl(t)}if(!Gn.has(h)&&(t=v({rel:"modulepreload",href:t},a),Gn.set(h,t),i.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(zi(h)))return}o=i.createElement("link"),Xt(o,"link",t),Ut(o),i.head.appendChild(o)}}}function nw(t,a,i){Ca.S(t,a,i);var o=Nl;if(o&&t){var d=Vs(o).hoistableStyles,h=Tl(t);a=a||"default";var b=d.get(h);if(!b){var E={loading:0,preload:null};if(b=o.querySelector(ki(h)))E.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":a},i),(i=Gn.get(h))&&Cd(t,i);var R=b=o.createElement("link");Ut(R),Xt(R,"link",t),R._p=new Promise(function(Z,X){R.onload=Z,R.onerror=X}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,uo(b,a,o)}b={type:"stylesheet",instance:b,count:1,state:E},d.set(h,b)}}}function aw(t,a){Ca.X(t,a);var i=Nl;if(i&&t){var o=Vs(i).hoistableScripts,d=jl(t),h=o.get(d);h||(h=i.querySelector(zi(d)),h||(t=v({src:t,async:!0},a),(a=Gn.get(d))&&Ad(t,a),h=i.createElement("script"),Ut(h),Xt(h,"link",t),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(d,h))}}function sw(t,a){Ca.M(t,a);var i=Nl;if(i&&t){var o=Vs(i).hoistableScripts,d=jl(t),h=o.get(d);h||(h=i.querySelector(zi(d)),h||(t=v({src:t,async:!0,type:"module"},a),(a=Gn.get(d))&&Ad(t,a),h=i.createElement("script"),Ut(h),Xt(h,"link",t),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(d,h))}}function Jp(t,a,i,o){var d=(d=ge.current)?co(d):null;if(!d)throw Error(l(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(a=Tl(i.href),i=Vs(d).hoistableStyles,o=i.get(a),o||(o={type:"style",instance:null,count:0,state:null},i.set(a,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=Tl(i.href);var h=Vs(d).hoistableStyles,b=h.get(t);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(t,b),(h=d.querySelector(ki(t)))&&!h._p&&(b.instance=h,b.state.loading=5),Gn.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Gn.set(t,i),h||lw(d,t,i,b.state))),a&&o===null)throw Error(l(528,""));return b}if(a&&o!==null)throw Error(l(529,""));return null;case"script":return a=i.async,i=i.src,typeof i=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=jl(i),i=Vs(d).hoistableScripts,o=i.get(a),o||(o={type:"script",instance:null,count:0,state:null},i.set(a,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,t))}}function Tl(t){return'href="'+Ln(t)+'"'}function ki(t){return'link[rel="stylesheet"]['+t+"]"}function ev(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function lw(t,a,i,o){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=t.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),Xt(a,"link",i),Ut(a),t.head.appendChild(a))}function jl(t){return'[src="'+Ln(t)+'"]'}function zi(t){return"script[async]"+t}function tv(t,a,i){if(a.count++,a.instance===null)switch(a.type){case"style":var o=t.querySelector('style[data-href~="'+Ln(i.href)+'"]');if(o)return a.instance=o,Ut(o),o;var d=v({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Ut(o),Xt(o,"style",d),uo(o,i.precedence,t),a.instance=o;case"stylesheet":d=Tl(i.href);var h=t.querySelector(ki(d));if(h)return a.state.loading|=4,a.instance=h,Ut(h),h;o=ev(i),(d=Gn.get(d))&&Cd(o,d),h=(t.ownerDocument||t).createElement("link"),Ut(h);var b=h;return b._p=new Promise(function(E,R){b.onload=E,b.onerror=R}),Xt(h,"link",o),a.state.loading|=4,uo(h,i.precedence,t),a.instance=h;case"script":return h=jl(i.src),(d=t.querySelector(zi(h)))?(a.instance=d,Ut(d),d):(o=i,(d=Gn.get(h))&&(o=v({},i),Ad(o,d)),t=t.ownerDocument||t,d=t.createElement("script"),Ut(d),Xt(d,"link",o),t.head.appendChild(d),a.instance=d);case"void":return null;default:throw Error(l(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(o=a.instance,a.state.loading|=4,uo(o,i.precedence,t));return a.instance}function uo(t,a,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,h=d,b=0;b<o.length;b++){var E=o[b];if(E.dataset.precedence===a)h=E;else if(h!==d)break}h?h.parentNode.insertBefore(t,h.nextSibling):(a=i.nodeType===9?i.head:i,a.insertBefore(t,a.firstChild))}function Cd(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Ad(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var fo=null;function nv(t,a,i){if(fo===null){var o=new Map,d=fo=new Map;d.set(i,o)}else d=fo,o=d.get(i),o||(o=new Map,d.set(i,o));if(o.has(t))return o;for(o.set(t,null),i=i.getElementsByTagName(t),d=0;d<i.length;d++){var h=i[d];if(!(h[Wl]||h[Gt]||t==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var b=h.getAttribute(a)||"";b=t+b;var E=o.get(b);E?E.push(h):o.set(b,[h])}}return o}function av(t,a,i){t=t.ownerDocument||t,t.head.insertBefore(i,a==="title"?t.querySelector("head > title"):null)}function iw(t,a,i){if(i===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function sv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function rw(t,a,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var d=Tl(o.href),h=a.querySelector(ki(d));if(h){a=h._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=ho.bind(t),a.then(t,t)),i.state.loading|=4,i.instance=h,Ut(h);return}h=a.ownerDocument||a,o=ev(o),(d=Gn.get(d))&&Cd(o,d),h=h.createElement("link"),Ut(h);var b=h;b._p=new Promise(function(E,R){b.onload=E,b.onerror=R}),Xt(h,"link",o),i.instance=h}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(i,a),(a=i.state.preload)&&(i.state.loading&3)===0&&(t.count++,i=ho.bind(t),a.addEventListener("load",i),a.addEventListener("error",i))}}var kd=0;function ow(t,a){return t.stylesheets&&t.count===0&&go(t,t.stylesheets),0<t.count||0<t.imgCount?function(i){var o=setTimeout(function(){if(t.stylesheets&&go(t,t.stylesheets),t.unsuspend){var h=t.unsuspend;t.unsuspend=null,h()}},6e4+a);0<t.imgBytes&&kd===0&&(kd=62500*H1());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&go(t,t.stylesheets),t.unsuspend)){var h=t.unsuspend;t.unsuspend=null,h()}},(t.imgBytes>kd?50:800)+a);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(d)}}:null}function ho(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)go(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var mo=null;function go(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,mo=new Map,a.forEach(cw,t),mo=null,ho.call(t))}function cw(t,a){if(!(a.state.loading&4)){var i=mo.get(t);if(i)var o=i.get(null);else{i=new Map,mo.set(t,i);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var b=d[h];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(i.set(b.dataset.precedence,b),o=b)}o&&i.set(null,o)}d=a.instance,b=d.getAttribute("data-precedence"),h=i.get(b)||o,h===o&&i.set(null,d),i.set(b,d),this.count++,o=ho.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),h?h.parentNode.insertBefore(d,h.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),a.state.loading|=4}}var Oi={$$typeof:z,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function uw(t,a,i,o,d,h,b,E,R){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Nt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nt(0),this.hiddenUpdates=Nt(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function lv(t,a,i,o,d,h,b,E,R,Z,X,ne){return t=new uw(t,a,i,b,R,Z,X,ne,E),a=1,h===!0&&(a|=24),h=Tn(3,null,null,a),t.current=h,h.stateNode=t,a=fu(),a.refCount++,t.pooledCache=a,a.refCount++,h.memoizedState={element:o,isDehydrated:i,cache:a},pu(h),t}function iv(t){return t?(t=sl,t):sl}function rv(t,a,i,o,d,h){d=iv(d),o.context===null?o.context=d:o.pendingContext=d,o=Fa(a),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=Ya(t,o,a),i!==null&&(xn(i,t,a),hi(i,t,a))}function ov(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<a?i:a}}function zd(t,a){ov(t,a),(t=t.alternate)&&ov(t,a)}function cv(t){if(t.tag===13||t.tag===31){var a=Es(t,67108864);a!==null&&xn(a,t,67108864),zd(t,67108864)}}function uv(t){if(t.tag===13||t.tag===31){var a=Cn();a=On(a);var i=Es(t,a);i!==null&&xn(i,t,a),zd(t,a)}}var po=!0;function dw(t,a,i,o){var d=k.T;k.T=null;var h=Y.p;try{Y.p=2,Od(t,a,i,o)}finally{Y.p=h,k.T=d}}function fw(t,a,i,o){var d=k.T;k.T=null;var h=Y.p;try{Y.p=8,Od(t,a,i,o)}finally{Y.p=h,k.T=d}}function Od(t,a,i,o){if(po){var d=Pd(o);if(d===null)Sd(t,a,o,vo,i),fv(t,o);else if(mw(d,t,a,i,o))o.stopPropagation();else if(fv(t,o),a&4&&-1<hw.indexOf(t)){for(;d!==null;){var h=Gs(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var b=Ce(h.pendingLanes);if(b!==0){var E=h;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var R=1<<31-Q(b);E.entanglements[1]|=R,b&=~R}ua(h),(We&6)===0&&(Qr=V()+500,Di(0))}}break;case 31:case 13:E=Es(h,2),E!==null&&xn(E,h,2),eo(),zd(h,2)}if(h=Pd(o),h===null&&Sd(t,a,o,vo,i),h===d)break;d=h}d!==null&&o.stopPropagation()}else Sd(t,a,o,null,i)}}function Pd(t){return t=Ic(t),Bd(t)}var vo=null;function Bd(t){if(vo=null,t=Ys(t),t!==null){var a=c(t);if(a===null)t=null;else{var i=a.tag;if(i===13){if(t=u(a),t!==null)return t;t=null}else if(i===31){if(t=f(a),t!==null)return t;t=null}else if(i===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return vo=t,null}function dv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ue()){case Ve:return 2;case xe:return 8;case qe:case It:return 32;case ln:return 268435456;default:return 32}default:return 32}}var Id=!1,as=null,ss=null,ls=null,Pi=new Map,Bi=new Map,is=[],hw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function fv(t,a){switch(t){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":ss=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":Pi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bi.delete(a.pointerId)}}function Ii(t,a,i,o,d,h){return t===null||t.nativeEvent!==h?(t={blockedOn:a,domEventName:i,eventSystemFlags:o,nativeEvent:h,targetContainers:[d]},a!==null&&(a=Gs(a),a!==null&&cv(a)),t):(t.eventSystemFlags|=o,a=t.targetContainers,d!==null&&a.indexOf(d)===-1&&a.push(d),t)}function mw(t,a,i,o,d){switch(a){case"focusin":return as=Ii(as,t,a,i,o,d),!0;case"dragenter":return ss=Ii(ss,t,a,i,o,d),!0;case"mouseover":return ls=Ii(ls,t,a,i,o,d),!0;case"pointerover":var h=d.pointerId;return Pi.set(h,Ii(Pi.get(h)||null,t,a,i,o,d)),!0;case"gotpointercapture":return h=d.pointerId,Bi.set(h,Ii(Bi.get(h)||null,t,a,i,o,d)),!0}return!1}function hv(t){var a=Ys(t.target);if(a!==null){var i=c(a);if(i!==null){if(a=i.tag,a===13){if(a=u(i),a!==null){t.blockedOn=a,Wn(t.priority,function(){uv(i)});return}}else if(a===31){if(a=f(i),a!==null){t.blockedOn=a,Wn(t.priority,function(){uv(i)});return}}else if(a===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yo(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var i=Pd(t.nativeEvent);if(i===null){i=t.nativeEvent;var o=new i.constructor(i.type,i);Bc=o,i.target.dispatchEvent(o),Bc=null}else return a=Gs(i),a!==null&&cv(a),t.blockedOn=i,!1;a.shift()}return!0}function mv(t,a,i){yo(t)&&i.delete(a)}function gw(){Id=!1,as!==null&&yo(as)&&(as=null),ss!==null&&yo(ss)&&(ss=null),ls!==null&&yo(ls)&&(ls=null),Pi.forEach(mv),Bi.forEach(mv)}function bo(t,a){t.blockedOn===a&&(t.blockedOn=null,Id||(Id=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,gw)))}var xo=null;function gv(t){xo!==t&&(xo=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){xo===t&&(xo=null);for(var a=0;a<t.length;a+=3){var i=t[a],o=t[a+1],d=t[a+2];if(typeof o!="function"){if(Bd(o||i)===null)continue;break}var h=Gs(i);h!==null&&(t.splice(a,3),a-=3,Pu(h,{pending:!0,data:d,method:i.method,action:o},o,d))}}))}function Ml(t){function a(R){return bo(R,t)}as!==null&&bo(as,t),ss!==null&&bo(ss,t),ls!==null&&bo(ls,t),Pi.forEach(a),Bi.forEach(a);for(var i=0;i<is.length;i++){var o=is[i];o.blockedOn===t&&(o.blockedOn=null)}for(;0<is.length&&(i=is[0],i.blockedOn===null);)hv(i),i.blockedOn===null&&is.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var d=i[o],h=i[o+1],b=d[mn]||null;if(typeof h=="function")b||gv(i);else if(b){var E=null;if(h&&h.hasAttribute("formAction")){if(d=h,b=h[mn]||null)E=b.formAction;else if(Bd(d)!==null)continue}else E=b.action;typeof E=="function"?i[o+1]=E:(i.splice(o,3),o-=3),gv(i)}}}function pv(){function t(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(b){return d=b})},focusReset:"manual",scroll:"manual"})}function a(){d!==null&&(d(),d=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),d!==null&&(d(),d=null)}}}function Ld(t){this._internalRoot=t}So.prototype.render=Ld.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(l(409));var i=a.current,o=Cn();rv(i,o,t,a,null,null)},So.prototype.unmount=Ld.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;rv(t.current,2,null,t,null,null),eo(),a[Fs]=null}};function So(t){this._internalRoot=t}So.prototype.unstable_scheduleHydration=function(t){if(t){var a=hn();t={blockedOn:null,target:t,priority:a};for(var i=0;i<is.length&&a!==0&&a<is[i].priority;i++);is.splice(i,0,t),i===0&&hv(t)}};var vv=n.version;if(vv!=="19.2.4")throw Error(l(527,vv,"19.2.4"));Y.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(l(188)):(t=Object.keys(t).join(","),Error(l(268,t)));return t=p(a),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var pw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wo.isDisabled&&wo.supportsFiber)try{ia=wo.inject(pw),$e=wo}catch{}}return qi.createRoot=function(t,a){if(!r(t))throw Error(l(299));var i=!1,o="",d=Eg,h=Ng,b=Tg;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(h=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError)),a=lv(t,1,!1,null,null,i,o,null,d,h,b,pv),t[Fs]=a.current,xd(t),new Ld(a)},qi.hydrateRoot=function(t,a,i){if(!r(t))throw Error(l(299));var o=!1,d="",h=Eg,b=Ng,E=Tg,R=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.formState!==void 0&&(R=i.formState)),a=lv(t,1,!0,a,i??null,o,d,R,h,b,E,pv),a.context=iv(null),i=a.current,o=Cn(),o=On(o),d=Fa(o),d.callback=null,Ya(i,d,o),i=o,a.current.lanes=i,Se(a,i),ua(a),t[Fs]=a.current,xd(t),new So(a)},qi.version="19.2.4",qi}var jv;function Tw(){if(jv)return Hd.exports;jv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Hd.exports=Nw(),Hd.exports}var jw=Tw(),Pa=yy();const Mw=Qf(Pa),hc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Gl(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function eh(e){return"nodeType"in e}function wn(e){var n,s;return e?Gl(e)?e:eh(e)&&(n=(s=e.ownerDocument)==null?void 0:s.defaultView)!=null?n:window:window}function th(e){const{Document:n}=wn(e);return e instanceof n}function ir(e){return Gl(e)?!1:e instanceof wn(e).HTMLElement}function by(e){return e instanceof wn(e).SVGElement}function Vl(e){return e?Gl(e)?e.document:eh(e)?th(e)?e:ir(e)||by(e)?e.ownerDocument:document:document:document}const hs=hc?_.useLayoutEffect:_.useEffect;function nh(e){const n=_.useRef(e);return hs(()=>{n.current=e}),_.useCallback(function(){for(var s=arguments.length,l=new Array(s),r=0;r<s;r++)l[r]=arguments[r];return n.current==null?void 0:n.current(...l)},[])}function Dw(){const e=_.useRef(null),n=_.useCallback((l,r)=>{e.current=setInterval(l,r)},[]),s=_.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,s]}function Wi(e,n){n===void 0&&(n=[e]);const s=_.useRef(e);return hs(()=>{s.current!==e&&(s.current=e)},n),s}function rr(e,n){const s=_.useRef();return _.useMemo(()=>{const l=e(s.current);return s.current=l,l},[...n])}function Yo(e){const n=nh(e),s=_.useRef(null),l=_.useCallback(r=>{r!==s.current&&n?.(r,s.current),s.current=r},[]);return[s,l]}function Tf(e){const n=_.useRef();return _.useEffect(()=>{n.current=e},[e]),n.current}let Yd={};function mc(e,n){return _.useMemo(()=>{if(n)return n;const s=Yd[e]==null?0:Yd[e]+1;return Yd[e]=s,e+"-"+s},[e,n])}function xy(e){return function(n){for(var s=arguments.length,l=new Array(s>1?s-1:0),r=1;r<s;r++)l[r-1]=arguments[r];return l.reduce((c,u)=>{const f=Object.entries(u);for(const[g,p]of f){const y=c[g];y!=null&&(c[g]=y+e*p)}return c},{...n})}}const Ll=xy(1),Xi=xy(-1);function Rw(e){return"clientX"in e&&"clientY"in e}function Sy(e){if(!e)return!1;const{KeyboardEvent:n}=wn(e.target);return n&&e instanceof n}function Cw(e){if(!e)return!1;const{TouchEvent:n}=wn(e.target);return n&&e instanceof n}function jf(e){if(Cw(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:s}=e.touches[0];return{x:n,y:s}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:s}=e.changedTouches[0];return{x:n,y:s}}}return Rw(e)?{x:e.clientX,y:e.clientY}:null}const Go=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:s}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(s?Math.round(s):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:s}=e;return"scaleX("+n+") scaleY("+s+")"}},Transform:{toString(e){if(e)return[Go.Translate.toString(e),Go.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:s,easing:l}=e;return n+" "+s+"ms "+l}}}),Mv="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Aw(e){return e.matches(Mv)?e:e.querySelector(Mv)}const kw={display:"none"};function zw(e){let{id:n,value:s}=e;return Zt.createElement("div",{id:n,style:kw},s)}function Ow(e){let{id:n,announcement:s,ariaLiveType:l="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Zt.createElement("div",{id:n,style:r,role:"status","aria-live":l,"aria-atomic":!0},s)}function Pw(){const[e,n]=_.useState("");return{announce:_.useCallback(l=>{l!=null&&n(l)},[]),announcement:e}}const wy=_.createContext(null);function Bw(e){const n=_.useContext(wy);_.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function Iw(){const[e]=_.useState(()=>new Set),n=_.useCallback(l=>(e.add(l),()=>e.delete(l)),[e]);return[_.useCallback(l=>{let{type:r,event:c}=l;e.forEach(u=>{var f;return(f=u[r])==null?void 0:f.call(u,c)})},[e]),n]}const Lw={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},qw={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was moved over droppable area "+s.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was dropped over droppable area "+s.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function Uw(e){let{announcements:n=qw,container:s,hiddenTextDescribedById:l,screenReaderInstructions:r=Lw}=e;const{announce:c,announcement:u}=Pw(),f=mc("DndLiveRegion"),[g,p]=_.useState(!1);if(_.useEffect(()=>{p(!0)},[]),Bw(_.useMemo(()=>({onDragStart(v){let{active:x}=v;c(n.onDragStart({active:x}))},onDragMove(v){let{active:x,over:S}=v;n.onDragMove&&c(n.onDragMove({active:x,over:S}))},onDragOver(v){let{active:x,over:S}=v;c(n.onDragOver({active:x,over:S}))},onDragEnd(v){let{active:x,over:S}=v;c(n.onDragEnd({active:x,over:S}))},onDragCancel(v){let{active:x,over:S}=v;c(n.onDragCancel({active:x,over:S}))}}),[c,n])),!g)return null;const y=Zt.createElement(Zt.Fragment,null,Zt.createElement(zw,{id:l,value:r.draggable}),Zt.createElement(Ow,{id:f,announcement:u}));return s?Pa.createPortal(y,s):y}var Bt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Bt||(Bt={}));function Vo(){}function Dv(e,n){return _.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function Hw(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return _.useMemo(()=>[...n].filter(l=>l!=null),[...n])}const aa=Object.freeze({x:0,y:0});function _y(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Ey(e,n){let{data:{value:s}}=e,{data:{value:l}}=n;return s-l}function $w(e,n){let{data:{value:s}}=e,{data:{value:l}}=n;return l-s}function Rv(e){let{left:n,top:s,height:l,width:r}=e;return[{x:n,y:s},{x:n+r,y:s},{x:n,y:s+l},{x:n+r,y:s+l}]}function Ny(e,n){if(!e||e.length===0)return null;const[s]=e;return s[n]}function Cv(e,n,s){return n===void 0&&(n=e.left),s===void 0&&(s=e.top),{x:n+e.width*.5,y:s+e.height*.5}}const Zw=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:l}=e;const r=Cv(n,n.left,n.top),c=[];for(const u of l){const{id:f}=u,g=s.get(f);if(g){const p=_y(Cv(g),r);c.push({id:f,data:{droppableContainer:u,value:p}})}}return c.sort(Ey)},Fw=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:l}=e;const r=Rv(n),c=[];for(const u of l){const{id:f}=u,g=s.get(f);if(g){const p=Rv(g),y=r.reduce((x,S,T)=>x+_y(p[T],S),0),v=Number((y/4).toFixed(4));c.push({id:f,data:{droppableContainer:u,value:v}})}}return c.sort(Ey)};function Yw(e,n){const s=Math.max(n.top,e.top),l=Math.max(n.left,e.left),r=Math.min(n.left+n.width,e.left+e.width),c=Math.min(n.top+n.height,e.top+e.height),u=r-l,f=c-s;if(l<r&&s<c){const g=n.width*n.height,p=e.width*e.height,y=u*f,v=y/(g+p-y);return Number(v.toFixed(4))}return 0}const Gw=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:l}=e;const r=[];for(const c of l){const{id:u}=c,f=s.get(u);if(f){const g=Yw(f,n);g>0&&r.push({id:u,data:{droppableContainer:c,value:g}})}}return r.sort($w)};function Vw(e,n,s){return{...e,scaleX:n&&s?n.width/s.width:1,scaleY:n&&s?n.height/s.height:1}}function Ty(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:aa}function Kw(e){return function(s){for(var l=arguments.length,r=new Array(l>1?l-1:0),c=1;c<l;c++)r[c-1]=arguments[c];return r.reduce((u,f)=>({...u,top:u.top+e*f.y,bottom:u.bottom+e*f.y,left:u.left+e*f.x,right:u.right+e*f.x}),{...s})}}const Ww=Kw(1);function Xw(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function Qw(e,n,s){const l=Xw(n);if(!l)return e;const{scaleX:r,scaleY:c,x:u,y:f}=l,g=e.left-u-(1-r)*parseFloat(s),p=e.top-f-(1-c)*parseFloat(s.slice(s.indexOf(" ")+1)),y=r?e.width/r:e.width,v=c?e.height/c:e.height;return{width:y,height:v,top:p,right:g+y,bottom:p+v,left:g}}const Jw={ignoreTransform:!1};function or(e,n){n===void 0&&(n=Jw);let s=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:p,transformOrigin:y}=wn(e).getComputedStyle(e);p&&(s=Qw(s,p,y))}const{top:l,left:r,width:c,height:u,bottom:f,right:g}=s;return{top:l,left:r,width:c,height:u,bottom:f,right:g}}function Av(e){return or(e,{ignoreTransform:!0})}function e_(e){const n=e.innerWidth,s=e.innerHeight;return{top:0,left:0,right:n,bottom:s,width:n,height:s}}function t_(e,n){return n===void 0&&(n=wn(e).getComputedStyle(e)),n.position==="fixed"}function n_(e,n){n===void 0&&(n=wn(e).getComputedStyle(e));const s=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const c=n[r];return typeof c=="string"?s.test(c):!1})}function gc(e,n){const s=[];function l(r){if(n!=null&&s.length>=n||!r)return s;if(th(r)&&r.scrollingElement!=null&&!s.includes(r.scrollingElement))return s.push(r.scrollingElement),s;if(!ir(r)||by(r)||s.includes(r))return s;const c=wn(e).getComputedStyle(r);return r!==e&&n_(r,c)&&s.push(r),t_(r,c)?s:l(r.parentNode)}return e?l(e):s}function jy(e){const[n]=gc(e,1);return n??null}function Gd(e){return!hc||!e?null:Gl(e)?e:eh(e)?th(e)||e===Vl(e).scrollingElement?window:ir(e)?e:null:null}function My(e){return Gl(e)?e.scrollX:e.scrollLeft}function Dy(e){return Gl(e)?e.scrollY:e.scrollTop}function Mf(e){return{x:My(e),y:Dy(e)}}var $t;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})($t||($t={}));function Ry(e){return!hc||!e?!1:e===document.scrollingElement}function Cy(e){const n={x:0,y:0},s=Ry(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},l={x:e.scrollWidth-s.width,y:e.scrollHeight-s.height},r=e.scrollTop<=n.y,c=e.scrollLeft<=n.x,u=e.scrollTop>=l.y,f=e.scrollLeft>=l.x;return{isTop:r,isLeft:c,isBottom:u,isRight:f,maxScroll:l,minScroll:n}}const a_={x:.2,y:.2};function s_(e,n,s,l,r){let{top:c,left:u,right:f,bottom:g}=s;l===void 0&&(l=10),r===void 0&&(r=a_);const{isTop:p,isBottom:y,isLeft:v,isRight:x}=Cy(e),S={x:0,y:0},T={x:0,y:0},w={height:n.height*r.y,width:n.width*r.x};return!p&&c<=n.top+w.height?(S.y=$t.Backward,T.y=l*Math.abs((n.top+w.height-c)/w.height)):!y&&g>=n.bottom-w.height&&(S.y=$t.Forward,T.y=l*Math.abs((n.bottom-w.height-g)/w.height)),!x&&f>=n.right-w.width?(S.x=$t.Forward,T.x=l*Math.abs((n.right-w.width-f)/w.width)):!v&&u<=n.left+w.width&&(S.x=$t.Backward,T.x=l*Math.abs((n.left+w.width-u)/w.width)),{direction:S,speed:T}}function l_(e){if(e===document.scrollingElement){const{innerWidth:c,innerHeight:u}=window;return{top:0,left:0,right:c,bottom:u,width:c,height:u}}const{top:n,left:s,right:l,bottom:r}=e.getBoundingClientRect();return{top:n,left:s,right:l,bottom:r,width:e.clientWidth,height:e.clientHeight}}function Ay(e){return e.reduce((n,s)=>Ll(n,Mf(s)),aa)}function i_(e){return e.reduce((n,s)=>n+My(s),0)}function r_(e){return e.reduce((n,s)=>n+Dy(s),0)}function o_(e,n){if(n===void 0&&(n=or),!e)return;const{top:s,left:l,bottom:r,right:c}=n(e);jy(e)&&(r<=0||c<=0||s>=window.innerHeight||l>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const c_=[["x",["left","right"],i_],["y",["top","bottom"],r_]];class ah{constructor(n,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const l=gc(s),r=Ay(l);this.rect={...n},this.width=n.width,this.height=n.height;for(const[c,u,f]of c_)for(const g of u)Object.defineProperty(this,g,{get:()=>{const p=f(l),y=r[c]-p;return this.rect[g]+y},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Yi{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(s=>{var l;return(l=this.target)==null?void 0:l.removeEventListener(...s)})},this.target=n}add(n,s,l){var r;(r=this.target)==null||r.addEventListener(n,s,l),this.listeners.push([n,s,l])}}function u_(e){const{EventTarget:n}=wn(e);return e instanceof n?e:Vl(e)}function Vd(e,n){const s=Math.abs(e.x),l=Math.abs(e.y);return typeof n=="number"?Math.sqrt(s**2+l**2)>n:"x"in n&&"y"in n?s>n.x&&l>n.y:"x"in n?s>n.x:"y"in n?l>n.y:!1}var Vn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Vn||(Vn={}));function kv(e){e.preventDefault()}function d_(e){e.stopPropagation()}var He;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(He||(He={}));const ky={start:[He.Space,He.Enter],cancel:[He.Esc],end:[He.Space,He.Enter,He.Tab]},f_=(e,n)=>{let{currentCoordinates:s}=n;switch(e.code){case He.Right:return{...s,x:s.x+25};case He.Left:return{...s,x:s.x-25};case He.Down:return{...s,y:s.y+25};case He.Up:return{...s,y:s.y-25}}};class sh{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:s}}=n;this.props=n,this.listeners=new Yi(Vl(s)),this.windowListeners=new Yi(wn(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vn.Resize,this.handleCancel),this.windowListeners.add(Vn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:s}=this.props,l=n.node.current;l&&o_(l),s(aa)}handleKeyDown(n){if(Sy(n)){const{active:s,context:l,options:r}=this.props,{keyboardCodes:c=ky,coordinateGetter:u=f_,scrollBehavior:f="smooth"}=r,{code:g}=n;if(c.end.includes(g)){this.handleEnd(n);return}if(c.cancel.includes(g)){this.handleCancel(n);return}const{collisionRect:p}=l.current,y=p?{x:p.left,y:p.top}:aa;this.referenceCoordinates||(this.referenceCoordinates=y);const v=u(n,{active:s,context:l.current,currentCoordinates:y});if(v){const x=Xi(v,y),S={x:0,y:0},{scrollableAncestors:T}=l.current;for(const w of T){const D=n.code,{isTop:C,isRight:B,isLeft:z,isBottom:P,maxScroll:I,minScroll:j}=Cy(w),N=l_(w),L={x:Math.min(D===He.Right?N.right-N.width/2:N.right,Math.max(D===He.Right?N.left:N.left+N.width/2,v.x)),y:Math.min(D===He.Down?N.bottom-N.height/2:N.bottom,Math.max(D===He.Down?N.top:N.top+N.height/2,v.y))},se=D===He.Right&&!B||D===He.Left&&!z,ce=D===He.Down&&!P||D===He.Up&&!C;if(se&&L.x!==v.x){const ee=w.scrollLeft+x.x,fe=D===He.Right&&ee<=I.x||D===He.Left&&ee>=j.x;if(fe&&!x.y){w.scrollTo({left:ee,behavior:f});return}fe?S.x=w.scrollLeft-ee:S.x=D===He.Right?w.scrollLeft-I.x:w.scrollLeft-j.x,S.x&&w.scrollBy({left:-S.x,behavior:f});break}else if(ce&&L.y!==v.y){const ee=w.scrollTop+x.y,fe=D===He.Down&&ee<=I.y||D===He.Up&&ee>=j.y;if(fe&&!x.x){w.scrollTo({top:ee,behavior:f});return}fe?S.y=w.scrollTop-ee:S.y=D===He.Down?w.scrollTop-I.y:w.scrollTop-j.y,S.y&&w.scrollBy({top:-S.y,behavior:f});break}}this.handleMove(n,Ll(Xi(v,this.referenceCoordinates),S))}}}handleMove(n,s){const{onMove:l}=this.props;n.preventDefault(),l(s)}handleEnd(n){const{onEnd:s}=this.props;n.preventDefault(),this.detach(),s()}handleCancel(n){const{onCancel:s}=this.props;n.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}sh.activators=[{eventName:"onKeyDown",handler:(e,n,s)=>{let{keyboardCodes:l=ky,onActivation:r}=n,{active:c}=s;const{code:u}=e.nativeEvent;if(l.start.includes(u)){const f=c.activatorNode.current;return f&&e.target!==f?!1:(e.preventDefault(),r?.({event:e.nativeEvent}),!0)}return!1}}];function zv(e){return!!(e&&"distance"in e)}function Ov(e){return!!(e&&"delay"in e)}class lh{constructor(n,s,l){var r;l===void 0&&(l=u_(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=s;const{event:c}=n,{target:u}=c;this.props=n,this.events=s,this.document=Vl(u),this.documentListeners=new Yi(this.document),this.listeners=new Yi(l),this.windowListeners=new Yi(wn(u)),this.initialCoordinates=(r=jf(c))!=null?r:aa,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:s,bypassActivationConstraint:l}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(Vn.Resize,this.handleCancel),this.windowListeners.add(Vn.DragStart,kv),this.windowListeners.add(Vn.VisibilityChange,this.handleCancel),this.windowListeners.add(Vn.ContextMenu,kv),this.documentListeners.add(Vn.Keydown,this.handleKeydown),s){if(l!=null&&l({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ov(s)){this.timeoutId=setTimeout(this.handleStart,s.delay),this.handlePending(s);return}if(zv(s)){this.handlePending(s);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,s){const{active:l,onPending:r}=this.props;r(l,n,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:n}=this,{onStart:s}=this.props;n&&(this.activated=!0,this.documentListeners.add(Vn.Click,d_,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vn.SelectionChange,this.removeTextSelection),s(n))}handleMove(n){var s;const{activated:l,initialCoordinates:r,props:c}=this,{onMove:u,options:{activationConstraint:f}}=c;if(!r)return;const g=(s=jf(n))!=null?s:aa,p=Xi(r,g);if(!l&&f){if(zv(f)){if(f.tolerance!=null&&Vd(p,f.tolerance))return this.handleCancel();if(Vd(p,f.distance))return this.handleStart()}if(Ov(f)&&Vd(p,f.tolerance))return this.handleCancel();this.handlePending(f,p);return}n.cancelable&&n.preventDefault(),u(g)}handleEnd(){const{onAbort:n,onEnd:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleCancel(){const{onAbort:n,onCancel:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleKeydown(n){n.code===He.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const h_={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ih extends lh{constructor(n){const{event:s}=n,l=Vl(s.target);super(n,h_,l)}}ih.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:l}=n;return!s.isPrimary||s.button!==0?!1:(l?.({event:s}),!0)}}];const m_={move:{name:"mousemove"},end:{name:"mouseup"}};var Df;(function(e){e[e.RightClick=2]="RightClick"})(Df||(Df={}));class g_ extends lh{constructor(n){super(n,m_,Vl(n.event.target))}}g_.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:l}=n;return s.button===Df.RightClick?!1:(l?.({event:s}),!0)}}];const Kd={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class p_ extends lh{constructor(n){super(n,Kd)}static setup(){return window.addEventListener(Kd.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(Kd.move.name,n)};function n(){}}}p_.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:l}=n;const{touches:r}=s;return r.length>1?!1:(l?.({event:s}),!0)}}];var Gi;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Gi||(Gi={}));var Ko;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Ko||(Ko={}));function v_(e){let{acceleration:n,activator:s=Gi.Pointer,canScroll:l,draggingRect:r,enabled:c,interval:u=5,order:f=Ko.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:y,delta:v,threshold:x}=e;const S=b_({delta:v,disabled:!c}),[T,w]=Dw(),D=_.useRef({x:0,y:0}),C=_.useRef({x:0,y:0}),B=_.useMemo(()=>{switch(s){case Gi.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Gi.DraggableRect:return r}},[s,r,g]),z=_.useRef(null),P=_.useCallback(()=>{const j=z.current;if(!j)return;const N=D.current.x*C.current.x,L=D.current.y*C.current.y;j.scrollBy(N,L)},[]),I=_.useMemo(()=>f===Ko.TreeOrder?[...p].reverse():p,[f,p]);_.useEffect(()=>{if(!c||!p.length||!B){w();return}for(const j of I){if(l?.(j)===!1)continue;const N=p.indexOf(j),L=y[N];if(!L)continue;const{direction:se,speed:ce}=s_(j,L,B,n,x);for(const ee of["x","y"])S[ee][se[ee]]||(ce[ee]=0,se[ee]=0);if(ce.x>0||ce.y>0){w(),z.current=j,T(P,u),D.current=ce,C.current=se;return}}D.current={x:0,y:0},C.current={x:0,y:0},w()},[n,P,l,w,c,u,JSON.stringify(B),JSON.stringify(S),T,p,I,y,JSON.stringify(x)])}const y_={x:{[$t.Backward]:!1,[$t.Forward]:!1},y:{[$t.Backward]:!1,[$t.Forward]:!1}};function b_(e){let{delta:n,disabled:s}=e;const l=Tf(n);return rr(r=>{if(s||!l||!r)return y_;const c={x:Math.sign(n.x-l.x),y:Math.sign(n.y-l.y)};return{x:{[$t.Backward]:r.x[$t.Backward]||c.x===-1,[$t.Forward]:r.x[$t.Forward]||c.x===1},y:{[$t.Backward]:r.y[$t.Backward]||c.y===-1,[$t.Forward]:r.y[$t.Forward]||c.y===1}}},[s,n,l])}function x_(e,n){const s=n!=null?e.get(n):void 0,l=s?s.node.current:null;return rr(r=>{var c;return n==null?null:(c=l??r)!=null?c:null},[l,n])}function S_(e,n){return _.useMemo(()=>e.reduce((s,l)=>{const{sensor:r}=l,c=r.activators.map(u=>({eventName:u.eventName,handler:n(u.handler,l)}));return[...s,...c]},[]),[e,n])}var Qi;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Qi||(Qi={}));var Rf;(function(e){e.Optimized="optimized"})(Rf||(Rf={}));const Pv=new Map;function w_(e,n){let{dragging:s,dependencies:l,config:r}=n;const[c,u]=_.useState(null),{frequency:f,measure:g,strategy:p}=r,y=_.useRef(e),v=D(),x=Wi(v),S=_.useCallback(function(C){C===void 0&&(C=[]),!x.current&&u(B=>B===null?C:B.concat(C.filter(z=>!B.includes(z))))},[x]),T=_.useRef(null),w=rr(C=>{if(v&&!s)return Pv;if(!C||C===Pv||y.current!==e||c!=null){const B=new Map;for(let z of e){if(!z)continue;if(c&&c.length>0&&!c.includes(z.id)&&z.rect.current){B.set(z.id,z.rect.current);continue}const P=z.node.current,I=P?new ah(g(P),P):null;z.rect.current=I,I&&B.set(z.id,I)}return B}return C},[e,c,s,v,g]);return _.useEffect(()=>{y.current=e},[e]),_.useEffect(()=>{v||S()},[s,v]),_.useEffect(()=>{c&&c.length>0&&u(null)},[JSON.stringify(c)]),_.useEffect(()=>{v||typeof f!="number"||T.current!==null||(T.current=setTimeout(()=>{S(),T.current=null},f))},[f,v,S,...l]),{droppableRects:w,measureDroppableContainers:S,measuringScheduled:c!=null};function D(){switch(p){case Qi.Always:return!1;case Qi.BeforeDragging:return s;default:return!s}}}function zy(e,n){return rr(s=>e?s||(typeof n=="function"?n(e):e):null,[n,e])}function __(e,n){return zy(e,n)}function E_(e){let{callback:n,disabled:s}=e;const l=nh(n),r=_.useMemo(()=>{if(s||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(l)},[l,s]);return _.useEffect(()=>()=>r?.disconnect(),[r]),r}function pc(e){let{callback:n,disabled:s}=e;const l=nh(n),r=_.useMemo(()=>{if(s||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(l)},[s]);return _.useEffect(()=>()=>r?.disconnect(),[r]),r}function N_(e){return new ah(or(e),e)}function Bv(e,n,s){n===void 0&&(n=N_);const[l,r]=_.useState(null);function c(){r(g=>{if(!e)return null;if(e.isConnected===!1){var p;return(p=g??s)!=null?p:null}const y=n(e);return JSON.stringify(g)===JSON.stringify(y)?g:y})}const u=E_({callback(g){if(e)for(const p of g){const{type:y,target:v}=p;if(y==="childList"&&v instanceof HTMLElement&&v.contains(e)){c();break}}}}),f=pc({callback:c});return hs(()=>{c(),e?(f?.observe(e),u?.observe(document.body,{childList:!0,subtree:!0})):(f?.disconnect(),u?.disconnect())},[e]),l}function T_(e){const n=zy(e);return Ty(e,n)}const Iv=[];function j_(e){const n=_.useRef(e),s=rr(l=>e?l&&l!==Iv&&e&&n.current&&e.parentNode===n.current.parentNode?l:gc(e):Iv,[e]);return _.useEffect(()=>{n.current=e},[e]),s}function M_(e){const[n,s]=_.useState(null),l=_.useRef(e),r=_.useCallback(c=>{const u=Gd(c.target);u&&s(f=>f?(f.set(u,Mf(u)),new Map(f)):null)},[]);return _.useEffect(()=>{const c=l.current;if(e!==c){u(c);const f=e.map(g=>{const p=Gd(g);return p?(p.addEventListener("scroll",r,{passive:!0}),[p,Mf(p)]):null}).filter(g=>g!=null);s(f.length?new Map(f):null),l.current=e}return()=>{u(e),u(c)};function u(f){f.forEach(g=>{const p=Gd(g);p?.removeEventListener("scroll",r)})}},[r,e]),_.useMemo(()=>e.length?n?Array.from(n.values()).reduce((c,u)=>Ll(c,u),aa):Ay(e):aa,[e,n])}function Lv(e,n){n===void 0&&(n=[]);const s=_.useRef(null);return _.useEffect(()=>{s.current=null},n),_.useEffect(()=>{const l=e!==aa;l&&!s.current&&(s.current=e),!l&&s.current&&(s.current=null)},[e]),s.current?Xi(e,s.current):aa}function D_(e){_.useEffect(()=>{if(!hc)return;const n=e.map(s=>{let{sensor:l}=s;return l.setup==null?void 0:l.setup()});return()=>{for(const s of n)s?.()}},e.map(n=>{let{sensor:s}=n;return s}))}function R_(e,n){return _.useMemo(()=>e.reduce((s,l)=>{let{eventName:r,handler:c}=l;return s[r]=u=>{c(u,n)},s},{}),[e,n])}function Oy(e){return _.useMemo(()=>e?e_(e):null,[e])}const qv=[];function C_(e,n){n===void 0&&(n=or);const[s]=e,l=Oy(s?wn(s):null),[r,c]=_.useState(qv);function u(){c(()=>e.length?e.map(g=>Ry(g)?l:new ah(n(g),g)):qv)}const f=pc({callback:u});return hs(()=>{f?.disconnect(),u(),e.forEach(g=>f?.observe(g))},[e]),r}function A_(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return ir(n)?n:e}function k_(e){let{measure:n}=e;const[s,l]=_.useState(null),r=_.useCallback(p=>{for(const{target:y}of p)if(ir(y)){l(v=>{const x=n(y);return v?{...v,width:x.width,height:x.height}:x});break}},[n]),c=pc({callback:r}),u=_.useCallback(p=>{const y=A_(p);c?.disconnect(),y&&c?.observe(y),l(y?n(y):null)},[n,c]),[f,g]=Yo(u);return _.useMemo(()=>({nodeRef:f,rect:s,setRef:g}),[s,f,g])}const z_=[{sensor:ih,options:{}},{sensor:sh,options:{}}],O_={current:{}},qo={draggable:{measure:Av},droppable:{measure:Av,strategy:Qi.WhileDragging,frequency:Rf.Optimized},dragOverlay:{measure:or}};class Vi extends Map{get(n){var s;return n!=null&&(s=super.get(n))!=null?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:s}=n;return!s})}getNodeFor(n){var s,l;return(s=(l=this.get(n))==null?void 0:l.node.current)!=null?s:void 0}}const P_={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Vi,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Vo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:qo,measureDroppableContainers:Vo,windowRect:null,measuringScheduled:!1},B_={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Vo,draggableNodes:new Map,over:null,measureDroppableContainers:Vo},vc=_.createContext(B_),I_=_.createContext(P_);function L_(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Vi}}}function q_(e,n){switch(n.type){case Bt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case Bt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case Bt.DragEnd:case Bt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Bt.RegisterDroppable:{const{element:s}=n,{id:l}=s,r=new Vi(e.droppable.containers);return r.set(l,s),{...e,droppable:{...e.droppable,containers:r}}}case Bt.SetDroppableDisabled:{const{id:s,key:l,disabled:r}=n,c=e.droppable.containers.get(s);if(!c||l!==c.key)return e;const u=new Vi(e.droppable.containers);return u.set(s,{...c,disabled:r}),{...e,droppable:{...e.droppable,containers:u}}}case Bt.UnregisterDroppable:{const{id:s,key:l}=n,r=e.droppable.containers.get(s);if(!r||l!==r.key)return e;const c=new Vi(e.droppable.containers);return c.delete(s),{...e,droppable:{...e.droppable,containers:c}}}default:return e}}function U_(e){let{disabled:n}=e;const{active:s,activatorEvent:l,draggableNodes:r}=_.useContext(vc),c=Tf(l),u=Tf(s?.id);return _.useEffect(()=>{if(!n&&!l&&c&&u!=null){if(!Sy(c)||document.activeElement===c.target)return;const f=r.get(u);if(!f)return;const{activatorNode:g,node:p}=f;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const y of[g.current,p.current]){if(!y)continue;const v=Aw(y);if(v){v.focus();break}}})}},[l,n,r,u,c]),null}function H_(e,n){let{transform:s,...l}=n;return e!=null&&e.length?e.reduce((r,c)=>c({transform:r,...l}),s):s}function $_(e){return _.useMemo(()=>({draggable:{...qo.draggable,...e?.draggable},droppable:{...qo.droppable,...e?.droppable},dragOverlay:{...qo.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function Z_(e){let{activeNode:n,measure:s,initialRect:l,config:r=!0}=e;const c=_.useRef(!1),{x:u,y:f}=typeof r=="boolean"?{x:r,y:r}:r;hs(()=>{if(!u&&!f||!n){c.current=!1;return}if(c.current||!l)return;const p=n?.node.current;if(!p||p.isConnected===!1)return;const y=s(p),v=Ty(y,l);if(u||(v.x=0),f||(v.y=0),c.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const x=jy(p);x&&x.scrollBy({top:v.y,left:v.x})}},[n,u,f,l,s])}const Py=_.createContext({...aa,scaleX:1,scaleY:1});var cs;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(cs||(cs={}));const F_=_.memo(function(n){var s,l,r,c;let{id:u,accessibility:f,autoScroll:g=!0,children:p,sensors:y=z_,collisionDetection:v=Gw,measuring:x,modifiers:S,...T}=n;const w=_.useReducer(q_,void 0,L_),[D,C]=w,[B,z]=Iw(),[P,I]=_.useState(cs.Uninitialized),j=P===cs.Initialized,{draggable:{active:N,nodes:L,translate:se},droppable:{containers:ce}}=D,ee=N!=null?L.get(N):null,fe=_.useRef({initial:null,translated:null}),A=_.useMemo(()=>{var Ne;return N!=null?{id:N,data:(Ne=ee?.data)!=null?Ne:O_,rect:fe}:null},[N,ee]),ie=_.useRef(null),[oe,k]=_.useState(null),[Y,ae]=_.useState(null),H=Wi(T,Object.values(T)),le=mc("DndDescribedBy",u),M=_.useMemo(()=>ce.getEnabled(),[ce]),U=$_(x),{droppableRects:K,measureDroppableContainers:W,measuringScheduled:he}=w_(M,{dragging:j,dependencies:[se.x,se.y],config:U.droppable}),ge=x_(L,N),_e=_.useMemo(()=>Y?jf(Y):null,[Y]),Me=rn(),ve=__(ge,U.draggable.measure);Z_({activeNode:N!=null?L.get(N):null,config:Me.layoutShiftCompensation,initialRect:ve,measure:U.draggable.measure});const Ze=Bv(ge,U.draggable.measure,ve),Yt=Bv(ge?ge.parentElement:null),Mt=_.useRef({activatorEvent:null,active:null,activeNode:ge,collisionRect:null,collisions:null,droppableRects:K,draggableNodes:L,draggingNode:null,draggingNodeRect:null,droppableContainers:ce,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),En=ce.getNodeFor((s=Mt.current.over)==null?void 0:s.id),bt=k_({measure:U.dragOverlay.measure}),Jt=(l=bt.nodeRef.current)!=null?l:ge,Ge=j?(r=bt.rect)!=null?r:Ze:null,en=!!(bt.nodeRef.current&&bt.rect),tn=T_(en?null:Ze),sn=Oy(Jt?wn(Jt):null),re=j_(j?En??ge:null),ze=C_(re),Qe=H_(S,{transform:{x:se.x-tn.x,y:se.y-tn.y,scaleX:1,scaleY:1},activatorEvent:Y,active:A,activeNodeRect:Ze,containerNodeRect:Yt,draggingNodeRect:Ge,over:Mt.current.over,overlayNodeRect:bt.rect,scrollableAncestors:re,scrollableAncestorRects:ze,windowRect:sn}),at=_e?Ll(_e,se):null,V=M_(re),ue=Lv(V),Ve=Lv(V,[Ze]),xe=Ll(Qe,ue),qe=Ge?Ww(Ge,Qe):null,It=A&&qe?v({active:A,collisionRect:qe,droppableRects:K,droppableContainers:M,pointerCoordinates:at}):null,ln=Ny(It,"id"),[Lt,la]=_.useState(null),ia=en?Qe:Ll(Qe,Ve),$e=Vw(ia,(c=Lt?.rect)!=null?c:null,Ze),fn=_.useRef(null),Q=_.useCallback((Ne,Ce)=>{let{sensor:Ke,options:ct}=Ce;if(ie.current==null)return;const Ee=L.get(ie.current);if(!Ee)return;const Dt=Ne.nativeEvent,Nt=new Ke({active:ie.current,activeNode:Ee,event:Dt,options:ct,context:Mt,onAbort(st){if(!L.get(st))return;const{onDragAbort:nn}=H.current,on={id:st};nn?.(on),B({type:"onDragAbort",event:on})},onPending(st,qt,nn,on){if(!L.get(st))return;const{onDragPending:Pn}=H.current,hn={id:st,constraint:qt,initialCoordinates:nn,offset:on};Pn?.(hn),B({type:"onDragPending",event:hn})},onStart(st){const qt=ie.current;if(qt==null)return;const nn=L.get(qt);if(!nn)return;const{onDragStart:on}=H.current,On={activatorEvent:Dt,active:{id:qt,data:nn.data,rect:fe}};Pa.unstable_batchedUpdates(()=>{on?.(On),I(cs.Initializing),C({type:Bt.DragStart,initialCoordinates:st,active:qt}),B({type:"onDragStart",event:On}),k(fn.current),ae(Dt)})},onMove(st){C({type:Bt.DragMove,coordinates:st})},onEnd:Se(Bt.DragEnd),onCancel:Se(Bt.DragCancel)});fn.current=Nt;function Se(st){return async function(){const{active:nn,collisions:on,over:On,scrollAdjustedTranslate:Pn}=Mt.current;let hn=null;if(nn&&Pn){const{cancelDrop:Wn}=H.current;hn={activatorEvent:Dt,active:nn,collisions:on,delta:Pn,over:On},st===Bt.DragEnd&&typeof Wn=="function"&&await Promise.resolve(Wn(hn))&&(st=Bt.DragCancel)}ie.current=null,Pa.unstable_batchedUpdates(()=>{C({type:st}),I(cs.Uninitialized),la(null),k(null),ae(null),fn.current=null;const Wn=st===Bt.DragEnd?"onDragEnd":"onDragCancel";if(hn){const Bn=H.current[Wn];Bn?.(hn),B({type:Wn,event:hn})}})}}},[L]),de=_.useCallback((Ne,Ce)=>(Ke,ct)=>{const Ee=Ke.nativeEvent,Dt=L.get(ct);if(ie.current!==null||!Dt||Ee.dndKit||Ee.defaultPrevented)return;const Nt={active:Dt};Ne(Ke,Ce.options,Nt)===!0&&(Ee.dndKit={capturedBy:Ce.sensor},ie.current=ct,Q(Ke,Ce))},[L,Q]),ke=S_(y,de);D_(y),hs(()=>{Ze&&P===cs.Initializing&&I(cs.Initialized)},[Ze,P]),_.useEffect(()=>{const{onDragMove:Ne}=H.current,{active:Ce,activatorEvent:Ke,collisions:ct,over:Ee}=Mt.current;if(!Ce||!Ke)return;const Dt={active:Ce,activatorEvent:Ke,collisions:ct,delta:{x:xe.x,y:xe.y},over:Ee};Pa.unstable_batchedUpdates(()=>{Ne?.(Dt),B({type:"onDragMove",event:Dt})})},[xe.x,xe.y]),_.useEffect(()=>{const{active:Ne,activatorEvent:Ce,collisions:Ke,droppableContainers:ct,scrollAdjustedTranslate:Ee}=Mt.current;if(!Ne||ie.current==null||!Ce||!Ee)return;const{onDragOver:Dt}=H.current,Nt=ct.get(ln),Se=Nt&&Nt.rect.current?{id:Nt.id,rect:Nt.rect.current,data:Nt.data,disabled:Nt.disabled}:null,st={active:Ne,activatorEvent:Ce,collisions:Ke,delta:{x:Ee.x,y:Ee.y},over:Se};Pa.unstable_batchedUpdates(()=>{la(Se),Dt?.(st),B({type:"onDragOver",event:st})})},[ln]),hs(()=>{Mt.current={activatorEvent:Y,active:A,activeNode:ge,collisionRect:qe,collisions:It,droppableRects:K,draggableNodes:L,draggingNode:Jt,draggingNodeRect:Ge,droppableContainers:ce,over:Lt,scrollableAncestors:re,scrollAdjustedTranslate:xe},fe.current={initial:Ge,translated:qe}},[A,ge,It,qe,L,Jt,Ge,K,ce,Lt,re,xe]),v_({...Me,delta:se,draggingRect:qe,pointerCoordinates:at,scrollableAncestors:re,scrollableAncestorRects:ze});const Xe=_.useMemo(()=>({active:A,activeNode:ge,activeNodeRect:Ze,activatorEvent:Y,collisions:It,containerNodeRect:Yt,dragOverlay:bt,draggableNodes:L,droppableContainers:ce,droppableRects:K,over:Lt,measureDroppableContainers:W,scrollableAncestors:re,scrollableAncestorRects:ze,measuringConfiguration:U,measuringScheduled:he,windowRect:sn}),[A,ge,Ze,Y,It,Yt,bt,L,ce,K,Lt,W,re,ze,U,he,sn]),Et=_.useMemo(()=>({activatorEvent:Y,activators:ke,active:A,activeNodeRect:Ze,ariaDescribedById:{draggable:le},dispatch:C,draggableNodes:L,over:Lt,measureDroppableContainers:W}),[Y,ke,A,Ze,C,le,L,Lt,W]);return Zt.createElement(wy.Provider,{value:z},Zt.createElement(vc.Provider,{value:Et},Zt.createElement(I_.Provider,{value:Xe},Zt.createElement(Py.Provider,{value:$e},p)),Zt.createElement(U_,{disabled:f?.restoreFocus===!1})),Zt.createElement(Uw,{...f,hiddenTextDescribedById:le}));function rn(){const Ne=oe?.autoScrollEnabled===!1,Ce=typeof g=="object"?g.enabled===!1:g===!1,Ke=j&&!Ne&&!Ce;return typeof g=="object"?{...g,enabled:Ke}:{enabled:Ke}}}),Y_=_.createContext(null),Uv="button",G_="Draggable";function By(e){let{id:n,data:s,disabled:l=!1,attributes:r}=e;const c=mc(G_),{activators:u,activatorEvent:f,active:g,activeNodeRect:p,ariaDescribedById:y,draggableNodes:v,over:x}=_.useContext(vc),{role:S=Uv,roleDescription:T="draggable",tabIndex:w=0}=r??{},D=g?.id===n,C=_.useContext(D?Py:Y_),[B,z]=Yo(),[P,I]=Yo(),j=R_(u,n),N=Wi(s);hs(()=>(v.set(n,{id:n,key:c,node:B,activatorNode:P,data:N}),()=>{const se=v.get(n);se&&se.key===c&&v.delete(n)}),[v,n]);const L=_.useMemo(()=>({role:S,tabIndex:w,"aria-disabled":l,"aria-pressed":D&&S===Uv?!0:void 0,"aria-roledescription":T,"aria-describedby":y.draggable}),[l,S,w,D,T,y.draggable]);return{active:g,activatorEvent:f,activeNodeRect:p,attributes:L,isDragging:D,listeners:l?void 0:j,node:B,over:x,setNodeRef:z,setActivatorNodeRef:I,transform:C}}const V_="Droppable",K_={timeout:25};function Iy(e){let{data:n,disabled:s=!1,id:l,resizeObserverConfig:r}=e;const c=mc(V_),{active:u,dispatch:f,over:g,measureDroppableContainers:p}=_.useContext(vc),y=_.useRef({disabled:s}),v=_.useRef(!1),x=_.useRef(null),S=_.useRef(null),{disabled:T,updateMeasurementsFor:w,timeout:D}={...K_,...r},C=Wi(w??l),B=_.useCallback(()=>{if(!v.current){v.current=!0;return}S.current!=null&&clearTimeout(S.current),S.current=setTimeout(()=>{p(Array.isArray(C.current)?C.current:[C.current]),S.current=null},D)},[D]),z=pc({callback:B,disabled:T||!u}),P=_.useCallback((L,se)=>{z&&(se&&(z.unobserve(se),v.current=!1),L&&z.observe(L))},[z]),[I,j]=Yo(P),N=Wi(n);return _.useEffect(()=>{!z||!I.current||(z.disconnect(),v.current=!1,z.observe(I.current))},[I,z]),_.useEffect(()=>(f({type:Bt.RegisterDroppable,element:{id:l,key:c,disabled:s,node:I,rect:x,data:N}}),()=>f({type:Bt.UnregisterDroppable,key:c,id:l})),[l]),_.useEffect(()=>{s!==y.current.disabled&&(f({type:Bt.SetDroppableDisabled,id:l,key:c,disabled:s}),y.current.disabled=s)},[l,c,s,f]),{active:u,rect:x,isOver:g?.id===l,node:I,over:g,setNodeRef:j}}function Wo(e){if(!e)return!1;const n=e.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const W_=[He.Down,He.Right,He.Up,He.Left],X_=(e,n)=>{let{context:{active:s,collisionRect:l,droppableRects:r,droppableContainers:c,over:u,scrollableAncestors:f}}=n;if(W_.includes(e.code)){if(e.preventDefault(),!s||!l)return;const g=[];c.getEnabled().forEach(v=>{if(!v||v!=null&&v.disabled)return;const x=r.get(v.id);if(x)switch(e.code){case He.Down:l.top<x.top&&g.push(v);break;case He.Up:l.top>x.top&&g.push(v);break;case He.Left:l.left>x.left&&g.push(v);break;case He.Right:l.left<x.left&&g.push(v);break}});const p=Fw({collisionRect:l,droppableRects:r,droppableContainers:g});let y=Ny(p,"id");if(y===u?.id&&p.length>1&&(y=p[1].id),y!=null){const v=c.get(s.id),x=c.get(y),S=x?r.get(x.id):null,T=x?.node.current;if(T&&S&&v&&x){const D=gc(T).some((j,N)=>f[N]!==j),C=Ly(v,x),B=Q_(v,x),z=D||!C?{x:0,y:0}:{x:B?l.width-S.width:0,y:B?l.height-S.height:0},P={x:S.left,y:S.top};return z.x&&z.y?P:Xi(P,z)}}}};function Ly(e,n){return!Wo(e)||!Wo(n)?!1:e.data.current.sortable.containerId===n.data.current.sortable.containerId}function Q_(e,n){return!Wo(e)||!Wo(n)||!Ly(e,n)?!1:e.data.current.sortable.index<n.data.current.sortable.index}const Hv=e=>Symbol.iterator in e,$v=e=>"entries"in e,Zv=(e,n)=>{const s=e instanceof Map?e:new Map(e.entries()),l=n instanceof Map?n:new Map(n.entries());if(s.size!==l.size)return!1;for(const[r,c]of s)if(!l.has(r)||!Object.is(c,l.get(r)))return!1;return!0},J_=(e,n)=>{const s=e[Symbol.iterator](),l=n[Symbol.iterator]();let r=s.next(),c=l.next();for(;!r.done&&!c.done;){if(!Object.is(r.value,c.value))return!1;r=s.next(),c=l.next()}return!!r.done&&!!c.done};function eE(e,n){return Object.is(e,n)?!0:typeof e!="object"||e===null||typeof n!="object"||n===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(n)?!1:Hv(e)&&Hv(n)?$v(e)&&$v(n)?Zv(e,n):J_(e,n):Zv({entries:()=>Object.entries(e)},{entries:()=>Object.entries(n)})}function tE(e){const n=Zt.useRef(void 0);return s=>{const l=e(s);return eE(n.current,l)?n.current:n.current=l}}const nE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),aE=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,s,l)=>l?l.toUpperCase():s.toLowerCase()),Fv=e=>{const n=aE(e);return n.charAt(0).toUpperCase()+n.slice(1)},qy=(...e)=>e.filter((n,s,l)=>!!n&&n.trim()!==""&&l.indexOf(n)===s).join(" ").trim(),sE=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};var lE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const iE=_.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:l,className:r="",children:c,iconNode:u,...f},g)=>_.createElement("svg",{ref:g,...lE,width:n,height:n,stroke:e,strokeWidth:l?Number(s)*24/Number(n):s,className:qy("lucide",r),...!c&&!sE(f)&&{"aria-hidden":"true"},...f},[...u.map(([p,y])=>_.createElement(p,y)),...Array.isArray(c)?c:[c]]));const Ft=(e,n)=>{const s=_.forwardRef(({className:l,...r},c)=>_.createElement(iE,{ref:c,iconNode:n,className:qy(`lucide-${nE(Fv(e))}`,`lucide-${e}`,l),...r}));return s.displayName=Fv(e),s};const rE=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],oE=Ft("copy",rE);const cE=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],uE=Ft("external-link",cE);const dE=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],fE=Ft("git-branch",dE);const hE=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],mE=Ft("grip-vertical",hE);const gE=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],pE=Ft("hammer",gE);const vE=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],rh=Ft("link-2",vE);const yE=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Uy=Ft("lock",yE);const bE=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],xE=Ft("pin",bE);const SE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],wE=Ft("plus",SE);const _E=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],EE=Ft("search",_E);const NE=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],Yv=Ft("sliders-horizontal",NE);const TE=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],jE=Ft("sparkles",TE);const ME=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Hy=Ft("trash-2",ME);const DE=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]],$y=Ft("tree-pine",DE);const RE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],CE=Ft("triangle-alert",RE);const AE=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],kE=Ft("undo-2",AE);const zE=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],OE=Ft("upload",zE);const PE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],BE=Ft("x",PE),ms=["helmet","chestplate","leggings","boots","ring","bracelet","necklace","weapon"],nt=["helmet","chestplate","leggings","boots","ring1","ring2","bracelet","necklace","weapon"],ha=e=>e==="ring1"||e==="ring2"?"ring":e,Xo=e=>{switch(e){case"ring1":return"Ring 1";case"ring2":return"Ring 2";default:return e.charAt(0).toUpperCase()+e.slice(1)}};function oh(e){return e==="weapon"?"Weapon":e.charAt(0).toUpperCase()+e.slice(1)}const Zy={spear:"Warrior",dagger:"Assassin",wand:"Mage",bow:"Archer",relik:"Shaman"};function Qo(e){return Zy[e]??null}function IE(e,n){return e in Zy?"weapon":ms.includes(e)?e:n==="weapon"?"weapon":e==="ring"?"ring":null}function Fy(e,n){return!n||!e.classReq?!0:e.classReq===n}function LE(e,n){return e.level<=n}const qE=["hp","hpBonus","hprRaw","hprPct","mr","ms","ls","sdPct","sdRaw","mdPct","mdRaw","poison","spd","atkTier","averageDps","strReq","dexReq","intReq","defReq","agiReq","str","dex","int","def","agi","eDef","tDef","wDef","fDef","aDef","eDamPct","tDamPct","wDamPct","fDamPct","aDamPct","damPct","rDamPct","nDamPct","slots","lvl","spPct1","spRaw1","spPct2","spRaw2","spPct3","spRaw3","spPct4","spRaw4"];function Re(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const n=Number(e);if(Number.isFinite(n))return n}return 0}function An(e){return typeof e=="string"?e:""}function UE(e){return Array.isArray(e)?e.filter(n=>typeof n=="string"):[]}function HE(e,n){const s=An(e).trim();if(!s)return Qo(n);switch(s.toLowerCase()){case"warrior":return"Warrior";case"assassin":return"Assassin";case"mage":return"Mage";case"archer":return"Archer";case"shaman":return"Shaman";default:return Qo(n)}}function $E(e){return{hp:Re(e.hp),hpBonus:Re(e.hpBonus),hprRaw:Re(e.hprRaw),hprPct:Re(e.hprPct),mr:Re(e.mr),ms:Re(e.ms),ls:Re(e.ls),sdPct:Re(e.sdPct),sdRaw:Re(e.sdRaw),mdPct:Re(e.mdPct),mdRaw:Re(e.mdRaw),poison:Re(e.poison),spd:Re(e.spd),atkTier:Re(e.atkTier),baseDps:Re(e.averageDps),reqStr:Re(e.strReq),reqDex:Re(e.dexReq),reqInt:Re(e.intReq),reqDef:Re(e.defReq),reqAgi:Re(e.agiReq),spStr:Re(e.str),spDex:Re(e.dex),spInt:Re(e.int),spDef:Re(e.def),spAgi:Re(e.agi),eDef:Re(e.eDef),tDef:Re(e.tDef),wDef:Re(e.wDef),fDef:Re(e.fDef),aDef:Re(e.aDef),eDamPct:Re(e.eDamPct),tDamPct:Re(e.tDamPct),wDamPct:Re(e.wDamPct),fDamPct:Re(e.fDamPct),aDamPct:Re(e.aDamPct),damPct:Re(e.damPct),rDamPct:Re(e.rDamPct),nDamPct:Re(e.nDamPct)}}function ZE(e){const n={};for(const s of qE)n[s]=Re(e[s]);return n.reqTotal=n.strReq+n.dexReq+n.intReq+n.defReq+n.agiReq,n.skillPointTotal=n.str+n.dex+n.int+n.def+n.agi,n.offenseScore=n.averageDps+n.sdPct*1.4+n.mdPct*1.15+n.sdRaw*.12+n.mdRaw*.12+(n.damPct+n.rDamPct+n.nDamPct)*.8+(n.eDamPct+n.tDamPct+n.wDamPct+n.fDamPct+n.aDamPct)*.5+n.atkTier*7+n.poison*.03,n.ehpProxy=n.hp+n.hpBonus+(n.eDef+n.tDef+n.wDef+n.fDef+n.aDef)*.45+n.hprRaw*1.2+n.hprPct*2.5,n.utilityScore=n.spd*1.8+n.mr*8+n.ms*7+n.ls*6,n.sumSpPct=n.spPct1+n.spPct2+n.spPct3+n.spPct4,n.sumSpRaw=n.spRaw1+n.spRaw2+n.spRaw3+n.spRaw4,n}function FE(e){if(typeof e.remapID<"u")return null;const n=An(e.type).toLowerCase(),s=An(e.category).toLowerCase(),l=IE(n,s);if(!l)return null;const r=An(e.displayName)||An(e.name),c=An(e.tier)||"Normal",u=Re(e.lvl),f=UE(e.majorIds),g=$E(e),p=ZE(e),y={baseDps:g.baseDps,offense:p.offenseScore,ehpProxy:p.ehpProxy,utility:p.utilityScore,skillPointTotal:p.skillPointTotal,reqTotal:p.reqTotal},v=[r,An(e.name),An(e.lore),n,c,s,An(e.classReq),...f];return{id:Re(e.id),name:An(e.name),displayName:r,category:l,type:n,sourceCategory:s,tier:c,level:u,classReq:HE(e.classReq,n),majorIds:f,powderSlots:Re(e.slots),atkSpd:An(e.atkSpd),restricted:An(e.restrict)!=="",deprecated:An(e.restrict).toUpperCase()==="DEPRECATED",numeric:g,numericIndex:p,searchText:v.filter(Boolean).join(" ").toLowerCase(),majorIdsText:f.join(" ").toLowerCase(),roughScoreFields:y,legacyRaw:e}}function YE(e,n,s){if(!Number.isFinite(s))return;const l=e[n];if(!l){e[n]={min:s,max:s};return}l.min=Math.min(l.min,s),l.max=Math.max(l.max,s)}function GE(e){const n=e.items.map(FE).filter(w=>w!==null);n.sort((w,D)=>w.displayName.localeCompare(D.displayName));const s=new Map,l=new Map,r=new Map,c=new Map(ms.map(w=>[w,[]])),u=new Set,f=new Set,g=new Set,p=new Set,y={},v=new Map;for(const w of n){s.set(w.id,w),l.set(w.displayName.toLowerCase(),w.id),r.has(w.type)||r.set(w.type,[]),r.get(w.type).push(w.id),c.get(w.category).push(w.id),u.add(w.tier),f.add(w.type),w.classReq&&g.add(w.classReq);for(const D of w.majorIds)D&&p.add(D);for(const[D,C]of Object.entries(w.numericIndex))YE(y,D,C)}const x=e.sets??{},S=new Map;for(const[w,D]of Object.entries(x)){const C=D?.bonuses;if(!Array.isArray(C))continue;const B=[];C.forEach((P,I)=>{P&&typeof P=="object"&&P.illegal&&B.push(I+1)}),B.length>0&&v.set(w,{illegalCounts:B});const z=D?.items;if(Array.isArray(z))for(const P of z)typeof P=="string"&&S.set(P.toLowerCase(),w)}const T=new Map;for(const[w,D]of S){const C=l.get(w);C!=null&&T.set(C,D)}return{version:String(e.version??"unknown"),items:n,itemsById:s,itemIdByName:l,itemsByType:r,itemsByCategory:c,facetsMeta:{categories:[...ms],types:[...f].sort(),tiers:[...u].sort(),classReqs:[...g].sort(),majorIds:[...p].sort(),numericRanges:y},setsMeta:v,itemSetName:T}}class VE{snapshotPromise=null;async getCatalog(){return this.snapshotPromise||(this.snapshotPromise=this.loadCatalog()),this.snapshotPromise}async getItemById(n){return(await this.getCatalog()).itemsById.get(n)}async loadCatalog(){const n=await this.fetchCompressPayload();return GE(n)}async fetchCompressPayload(){const n=c=>{if(typeof window>"u")return c;const u=window.location.href.split("?")[0].replace(/\/[^/]*$/,"/")||window.location.origin+"/";return new URL(c,u).href},s=[n("compress.json"),n("./compress.json"),"./compress.json","../compress.json","compress.json"];let l=null;const r=[];for(const c of s)try{const u=await fetch(c,{cache:"force-cache"});if(!u.ok)throw new Error(`Failed to fetch ${c}: ${u.status}`);const f=await u.json();if(!f?.items||!Array.isArray(f.items))throw new Error(`Invalid compress payload from ${c}`);return f}catch(u){l=u,r.push(u instanceof Error?u.message:`Failed to fetch ${c}`)}throw l instanceof Error?new Error(`Unable to load compress.json. Tried: ${s.join(", ")}. Last error: ${l.message}`):new Error(`Unable to load compress.json. Tried: ${s.join(", ")}. Failures: ${r.join(" | ")}`)}}const KE=new VE;function te(e,n,s){function l(f,g){if(f._zod||Object.defineProperty(f,"_zod",{value:{def:g,constr:u,traits:new Set},enumerable:!1}),f._zod.traits.has(e))return;f._zod.traits.add(e),n(f,g);const p=u.prototype,y=Object.keys(p);for(let v=0;v<y.length;v++){const x=y[v];x in f||(f[x]=p[x].bind(f))}}const r=s?.Parent??Object;class c extends r{}Object.defineProperty(c,"name",{value:e});function u(f){var g;const p=s?.Parent?new c:this;l(p,f),(g=p._zod).deferred??(g.deferred=[]);for(const y of p._zod.deferred)y();return p}return Object.defineProperty(u,"init",{value:l}),Object.defineProperty(u,Symbol.hasInstance,{value:f=>s?.Parent&&f instanceof s.Parent?!0:f?._zod?.traits?.has(e)}),Object.defineProperty(u,"name",{value:e}),u}class ql extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Yy extends Error{constructor(n){super(`Encountered unidirectional transform during encode: ${n}`),this.name="ZodEncodeError"}}const Gy={};function gs(e){return Gy}function Vy(e){const n=Object.values(e).filter(l=>typeof l=="number");return Object.entries(e).filter(([l,r])=>n.indexOf(+l)===-1).map(([l,r])=>r)}function Cf(e,n){return typeof n=="bigint"?n.toString():n}function ch(e){return{get value(){{const n=e();return Object.defineProperty(this,"value",{value:n}),n}}}}function uh(e){return e==null}function dh(e){const n=e.startsWith("^")?1:0,s=e.endsWith("$")?e.length-1:e.length;return e.slice(n,s)}function WE(e,n){const s=(e.toString().split(".")[1]||"").length,l=n.toString();let r=(l.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(l)){const g=l.match(/\d?e-(\d?)/);g?.[1]&&(r=Number.parseInt(g[1]))}const c=s>r?s:r,u=Number.parseInt(e.toFixed(c).replace(".","")),f=Number.parseInt(n.toFixed(c).replace(".",""));return u%f/10**c}const Gv=Symbol("evaluating");function tt(e,n,s){let l;Object.defineProperty(e,n,{get(){if(l!==Gv)return l===void 0&&(l=Gv,l=s()),l},set(r){Object.defineProperty(e,n,{value:r})},configurable:!0})}function $s(e,n,s){Object.defineProperty(e,n,{value:s,writable:!0,enumerable:!0,configurable:!0})}function ys(...e){const n={};for(const s of e){const l=Object.getOwnPropertyDescriptors(s);Object.assign(n,l)}return Object.defineProperties({},n)}function Vv(e){return JSON.stringify(e)}function XE(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Ky="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Jo(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const QE=ch(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Fl(e){if(Jo(e)===!1)return!1;const n=e.constructor;if(n===void 0||typeof n!="function")return!0;const s=n.prototype;return!(Jo(s)===!1||Object.prototype.hasOwnProperty.call(s,"isPrototypeOf")===!1)}function Wy(e){return Fl(e)?{...e}:Array.isArray(e)?[...e]:e}const JE=new Set(["string","number","symbol"]);function yc(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function bs(e,n,s){const l=new e._zod.constr(n??e._zod.def);return(!n||s?.parent)&&(l._zod.parent=e),l}function be(e){const n=e;if(!n)return{};if(typeof n=="string")return{error:()=>n};if(n?.message!==void 0){if(n?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");n.error=n.message}return delete n.message,typeof n.error=="string"?{...n,error:()=>n.error}:n}function e2(e){return Object.keys(e).filter(n=>e[n]._zod.optin==="optional"&&e[n]._zod.optout==="optional")}const t2={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function n2(e,n){const s=e._zod.def,l=s.checks;if(l&&l.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const c=ys(e._zod.def,{get shape(){const u={};for(const f in n){if(!(f in s.shape))throw new Error(`Unrecognized key: "${f}"`);n[f]&&(u[f]=s.shape[f])}return $s(this,"shape",u),u},checks:[]});return bs(e,c)}function a2(e,n){const s=e._zod.def,l=s.checks;if(l&&l.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const c=ys(e._zod.def,{get shape(){const u={...e._zod.def.shape};for(const f in n){if(!(f in s.shape))throw new Error(`Unrecognized key: "${f}"`);n[f]&&delete u[f]}return $s(this,"shape",u),u},checks:[]});return bs(e,c)}function s2(e,n){if(!Fl(n))throw new Error("Invalid input to extend: expected a plain object");const s=e._zod.def.checks;if(s&&s.length>0){const c=e._zod.def.shape;for(const u in n)if(Object.getOwnPropertyDescriptor(c,u)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const r=ys(e._zod.def,{get shape(){const c={...e._zod.def.shape,...n};return $s(this,"shape",c),c}});return bs(e,r)}function l2(e,n){if(!Fl(n))throw new Error("Invalid input to safeExtend: expected a plain object");const s=ys(e._zod.def,{get shape(){const l={...e._zod.def.shape,...n};return $s(this,"shape",l),l}});return bs(e,s)}function i2(e,n){const s=ys(e._zod.def,{get shape(){const l={...e._zod.def.shape,...n._zod.def.shape};return $s(this,"shape",l),l},get catchall(){return n._zod.def.catchall},checks:[]});return bs(e,s)}function r2(e,n,s){const r=n._zod.def.checks;if(r&&r.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const u=ys(n._zod.def,{get shape(){const f=n._zod.def.shape,g={...f};if(s)for(const p in s){if(!(p in f))throw new Error(`Unrecognized key: "${p}"`);s[p]&&(g[p]=e?new e({type:"optional",innerType:f[p]}):f[p])}else for(const p in f)g[p]=e?new e({type:"optional",innerType:f[p]}):f[p];return $s(this,"shape",g),g},checks:[]});return bs(n,u)}function o2(e,n,s){const l=ys(n._zod.def,{get shape(){const r=n._zod.def.shape,c={...r};if(s)for(const u in s){if(!(u in c))throw new Error(`Unrecognized key: "${u}"`);s[u]&&(c[u]=new e({type:"nonoptional",innerType:r[u]}))}else for(const u in r)c[u]=new e({type:"nonoptional",innerType:r[u]});return $s(this,"shape",c),c}});return bs(n,l)}function Pl(e,n=0){if(e.aborted===!0)return!0;for(let s=n;s<e.issues.length;s++)if(e.issues[s]?.continue!==!0)return!0;return!1}function Bl(e,n){return n.map(s=>{var l;return(l=s).path??(l.path=[]),s.path.unshift(e),s})}function _o(e){return typeof e=="string"?e:e?.message}function ps(e,n,s){const l={...e,path:e.path??[]};if(!e.message){const r=_o(e.inst?._zod.def?.error?.(e))??_o(n?.error?.(e))??_o(s.customError?.(e))??_o(s.localeError?.(e))??"Invalid input";l.message=r}return delete l.inst,delete l.continue,n?.reportInput||delete l.input,l}function fh(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Ji(...e){const[n,s,l]=e;return typeof n=="string"?{message:n,code:"custom",input:s,inst:l}:{...n}}const Xy=(e,n)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:n,enumerable:!1}),e.message=JSON.stringify(n,Cf,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Qy=te("$ZodError",Xy),Jy=te("$ZodError",Xy,{Parent:Error});function c2(e,n=s=>s.message){const s={},l=[];for(const r of e.issues)r.path.length>0?(s[r.path[0]]=s[r.path[0]]||[],s[r.path[0]].push(n(r))):l.push(n(r));return{formErrors:l,fieldErrors:s}}function u2(e,n=s=>s.message){const s={_errors:[]},l=r=>{for(const c of r.issues)if(c.code==="invalid_union"&&c.errors.length)c.errors.map(u=>l({issues:u}));else if(c.code==="invalid_key")l({issues:c.issues});else if(c.code==="invalid_element")l({issues:c.issues});else if(c.path.length===0)s._errors.push(n(c));else{let u=s,f=0;for(;f<c.path.length;){const g=c.path[f];f===c.path.length-1?(u[g]=u[g]||{_errors:[]},u[g]._errors.push(n(c))):u[g]=u[g]||{_errors:[]},u=u[g],f++}}};return l(e),s}const hh=e=>(n,s,l,r)=>{const c=l?Object.assign(l,{async:!1}):{async:!1},u=n._zod.run({value:s,issues:[]},c);if(u instanceof Promise)throw new ql;if(u.issues.length){const f=new(r?.Err??e)(u.issues.map(g=>ps(g,c,gs())));throw Ky(f,r?.callee),f}return u.value},mh=e=>async(n,s,l,r)=>{const c=l?Object.assign(l,{async:!0}):{async:!0};let u=n._zod.run({value:s,issues:[]},c);if(u instanceof Promise&&(u=await u),u.issues.length){const f=new(r?.Err??e)(u.issues.map(g=>ps(g,c,gs())));throw Ky(f,r?.callee),f}return u.value},bc=e=>(n,s,l)=>{const r=l?{...l,async:!1}:{async:!1},c=n._zod.run({value:s,issues:[]},r);if(c instanceof Promise)throw new ql;return c.issues.length?{success:!1,error:new(e??Qy)(c.issues.map(u=>ps(u,r,gs())))}:{success:!0,data:c.value}},d2=bc(Jy),xc=e=>async(n,s,l)=>{const r=l?Object.assign(l,{async:!0}):{async:!0};let c=n._zod.run({value:s,issues:[]},r);return c instanceof Promise&&(c=await c),c.issues.length?{success:!1,error:new e(c.issues.map(u=>ps(u,r,gs())))}:{success:!0,data:c.value}},f2=xc(Jy),h2=e=>(n,s,l)=>{const r=l?Object.assign(l,{direction:"backward"}):{direction:"backward"};return hh(e)(n,s,r)},m2=e=>(n,s,l)=>hh(e)(n,s,l),g2=e=>async(n,s,l)=>{const r=l?Object.assign(l,{direction:"backward"}):{direction:"backward"};return mh(e)(n,s,r)},p2=e=>async(n,s,l)=>mh(e)(n,s,l),v2=e=>(n,s,l)=>{const r=l?Object.assign(l,{direction:"backward"}):{direction:"backward"};return bc(e)(n,s,r)},y2=e=>(n,s,l)=>bc(e)(n,s,l),b2=e=>async(n,s,l)=>{const r=l?Object.assign(l,{direction:"backward"}):{direction:"backward"};return xc(e)(n,s,r)},x2=e=>async(n,s,l)=>xc(e)(n,s,l),S2=/^[cC][^\s-]{8,}$/,w2=/^[0-9a-z]+$/,_2=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,E2=/^[0-9a-vA-V]{20}$/,N2=/^[A-Za-z0-9]{27}$/,T2=/^[a-zA-Z0-9_-]{21}$/,j2=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,M2=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Kv=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,D2=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,R2="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function C2(){return new RegExp(R2,"u")}const A2=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,k2=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,z2=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,O2=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,P2=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,eb=/^[A-Za-z0-9_-]*$/,B2=/^\+[1-9]\d{6,14}$/,tb="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",I2=new RegExp(`^${tb}$`);function nb(e){const n="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${n}`:e.precision===0?`${n}:[0-5]\\d`:`${n}:[0-5]\\d\\.\\d{${e.precision}}`:`${n}(?::[0-5]\\d(?:\\.\\d+)?)?`}function L2(e){return new RegExp(`^${nb(e)}$`)}function q2(e){const n=nb({precision:e.precision}),s=["Z"];e.local&&s.push(""),e.offset&&s.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const l=`${n}(?:${s.join("|")})`;return new RegExp(`^${tb}T(?:${l})$`)}const U2=e=>{const n=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${n}$`)},H2=/^-?\d+$/,ab=/^-?\d+(?:\.\d+)?$/,$2=/^(?:true|false)$/i,Z2=/^[^A-Z]*$/,F2=/^[^a-z]*$/,_n=te("$ZodCheck",(e,n)=>{var s;e._zod??(e._zod={}),e._zod.def=n,(s=e._zod).onattach??(s.onattach=[])}),sb={number:"number",bigint:"bigint",object:"date"},lb=te("$ZodCheckLessThan",(e,n)=>{_n.init(e,n);const s=sb[typeof n.value];e._zod.onattach.push(l=>{const r=l._zod.bag,c=(n.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;n.value<c&&(n.inclusive?r.maximum=n.value:r.exclusiveMaximum=n.value)}),e._zod.check=l=>{(n.inclusive?l.value<=n.value:l.value<n.value)||l.issues.push({origin:s,code:"too_big",maximum:typeof n.value=="object"?n.value.getTime():n.value,input:l.value,inclusive:n.inclusive,inst:e,continue:!n.abort})}}),ib=te("$ZodCheckGreaterThan",(e,n)=>{_n.init(e,n);const s=sb[typeof n.value];e._zod.onattach.push(l=>{const r=l._zod.bag,c=(n.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;n.value>c&&(n.inclusive?r.minimum=n.value:r.exclusiveMinimum=n.value)}),e._zod.check=l=>{(n.inclusive?l.value>=n.value:l.value>n.value)||l.issues.push({origin:s,code:"too_small",minimum:typeof n.value=="object"?n.value.getTime():n.value,input:l.value,inclusive:n.inclusive,inst:e,continue:!n.abort})}}),Y2=te("$ZodCheckMultipleOf",(e,n)=>{_n.init(e,n),e._zod.onattach.push(s=>{var l;(l=s._zod.bag).multipleOf??(l.multipleOf=n.value)}),e._zod.check=s=>{if(typeof s.value!=typeof n.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof s.value=="bigint"?s.value%n.value===BigInt(0):WE(s.value,n.value)===0)||s.issues.push({origin:typeof s.value,code:"not_multiple_of",divisor:n.value,input:s.value,inst:e,continue:!n.abort})}}),G2=te("$ZodCheckNumberFormat",(e,n)=>{_n.init(e,n),n.format=n.format||"float64";const s=n.format?.includes("int"),l=s?"int":"number",[r,c]=t2[n.format];e._zod.onattach.push(u=>{const f=u._zod.bag;f.format=n.format,f.minimum=r,f.maximum=c,s&&(f.pattern=H2)}),e._zod.check=u=>{const f=u.value;if(s){if(!Number.isInteger(f)){u.issues.push({expected:l,format:n.format,code:"invalid_type",continue:!1,input:f,inst:e});return}if(!Number.isSafeInteger(f)){f>0?u.issues.push({input:f,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:l,inclusive:!0,continue:!n.abort}):u.issues.push({input:f,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:l,inclusive:!0,continue:!n.abort});return}}f<r&&u.issues.push({origin:"number",input:f,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!n.abort}),f>c&&u.issues.push({origin:"number",input:f,code:"too_big",maximum:c,inclusive:!0,inst:e,continue:!n.abort})}}),V2=te("$ZodCheckMaxLength",(e,n)=>{var s;_n.init(e,n),(s=e._zod.def).when??(s.when=l=>{const r=l.value;return!uh(r)&&r.length!==void 0}),e._zod.onattach.push(l=>{const r=l._zod.bag.maximum??Number.POSITIVE_INFINITY;n.maximum<r&&(l._zod.bag.maximum=n.maximum)}),e._zod.check=l=>{const r=l.value;if(r.length<=n.maximum)return;const u=fh(r);l.issues.push({origin:u,code:"too_big",maximum:n.maximum,inclusive:!0,input:r,inst:e,continue:!n.abort})}}),K2=te("$ZodCheckMinLength",(e,n)=>{var s;_n.init(e,n),(s=e._zod.def).when??(s.when=l=>{const r=l.value;return!uh(r)&&r.length!==void 0}),e._zod.onattach.push(l=>{const r=l._zod.bag.minimum??Number.NEGATIVE_INFINITY;n.minimum>r&&(l._zod.bag.minimum=n.minimum)}),e._zod.check=l=>{const r=l.value;if(r.length>=n.minimum)return;const u=fh(r);l.issues.push({origin:u,code:"too_small",minimum:n.minimum,inclusive:!0,input:r,inst:e,continue:!n.abort})}}),W2=te("$ZodCheckLengthEquals",(e,n)=>{var s;_n.init(e,n),(s=e._zod.def).when??(s.when=l=>{const r=l.value;return!uh(r)&&r.length!==void 0}),e._zod.onattach.push(l=>{const r=l._zod.bag;r.minimum=n.length,r.maximum=n.length,r.length=n.length}),e._zod.check=l=>{const r=l.value,c=r.length;if(c===n.length)return;const u=fh(r),f=c>n.length;l.issues.push({origin:u,...f?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},inclusive:!0,exact:!0,input:l.value,inst:e,continue:!n.abort})}}),Sc=te("$ZodCheckStringFormat",(e,n)=>{var s,l;_n.init(e,n),e._zod.onattach.push(r=>{const c=r._zod.bag;c.format=n.format,n.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(n.pattern))}),n.pattern?(s=e._zod).check??(s.check=r=>{n.pattern.lastIndex=0,!n.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:n.format,input:r.value,...n.pattern?{pattern:n.pattern.toString()}:{},inst:e,continue:!n.abort})}):(l=e._zod).check??(l.check=()=>{})}),X2=te("$ZodCheckRegex",(e,n)=>{Sc.init(e,n),e._zod.check=s=>{n.pattern.lastIndex=0,!n.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:"regex",input:s.value,pattern:n.pattern.toString(),inst:e,continue:!n.abort})}}),Q2=te("$ZodCheckLowerCase",(e,n)=>{n.pattern??(n.pattern=Z2),Sc.init(e,n)}),J2=te("$ZodCheckUpperCase",(e,n)=>{n.pattern??(n.pattern=F2),Sc.init(e,n)}),eN=te("$ZodCheckIncludes",(e,n)=>{_n.init(e,n);const s=yc(n.includes),l=new RegExp(typeof n.position=="number"?`^.{${n.position}}${s}`:s);n.pattern=l,e._zod.onattach.push(r=>{const c=r._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(l)}),e._zod.check=r=>{r.value.includes(n.includes,n.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:n.includes,input:r.value,inst:e,continue:!n.abort})}}),tN=te("$ZodCheckStartsWith",(e,n)=>{_n.init(e,n);const s=new RegExp(`^${yc(n.prefix)}.*`);n.pattern??(n.pattern=s),e._zod.onattach.push(l=>{const r=l._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(s)}),e._zod.check=l=>{l.value.startsWith(n.prefix)||l.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:n.prefix,input:l.value,inst:e,continue:!n.abort})}}),nN=te("$ZodCheckEndsWith",(e,n)=>{_n.init(e,n);const s=new RegExp(`.*${yc(n.suffix)}$`);n.pattern??(n.pattern=s),e._zod.onattach.push(l=>{const r=l._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(s)}),e._zod.check=l=>{l.value.endsWith(n.suffix)||l.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:n.suffix,input:l.value,inst:e,continue:!n.abort})}}),aN=te("$ZodCheckOverwrite",(e,n)=>{_n.init(e,n),e._zod.check=s=>{s.value=n.tx(s.value)}});class sN{constructor(n=[]){this.content=[],this.indent=0,this&&(this.args=n)}indented(n){this.indent+=1,n(this),this.indent-=1}write(n){if(typeof n=="function"){n(this,{execution:"sync"}),n(this,{execution:"async"});return}const l=n.split(`
`).filter(u=>u),r=Math.min(...l.map(u=>u.length-u.trimStart().length)),c=l.map(u=>u.slice(r)).map(u=>" ".repeat(this.indent*2)+u);for(const u of c)this.content.push(u)}compile(){const n=Function,s=this?.args,r=[...(this?.content??[""]).map(c=>`  ${c}`)];return new n(...s,r.join(`
`))}}const lN={major:4,minor:3,patch:6},wt=te("$ZodType",(e,n)=>{var s;e??(e={}),e._zod.def=n,e._zod.bag=e._zod.bag||{},e._zod.version=lN;const l=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&l.unshift(e);for(const r of l)for(const c of r._zod.onattach)c(e);if(l.length===0)(s=e._zod).deferred??(s.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const r=(u,f,g)=>{let p=Pl(u),y;for(const v of f){if(v._zod.def.when){if(!v._zod.def.when(u))continue}else if(p)continue;const x=u.issues.length,S=v._zod.check(u);if(S instanceof Promise&&g?.async===!1)throw new ql;if(y||S instanceof Promise)y=(y??Promise.resolve()).then(async()=>{await S,u.issues.length!==x&&(p||(p=Pl(u,x)))});else{if(u.issues.length===x)continue;p||(p=Pl(u,x))}}return y?y.then(()=>u):u},c=(u,f,g)=>{if(Pl(u))return u.aborted=!0,u;const p=r(f,l,g);if(p instanceof Promise){if(g.async===!1)throw new ql;return p.then(y=>e._zod.parse(y,g))}return e._zod.parse(p,g)};e._zod.run=(u,f)=>{if(f.skipChecks)return e._zod.parse(u,f);if(f.direction==="backward"){const p=e._zod.parse({value:u.value,issues:[]},{...f,skipChecks:!0});return p instanceof Promise?p.then(y=>c(y,u,f)):c(p,u,f)}const g=e._zod.parse(u,f);if(g instanceof Promise){if(f.async===!1)throw new ql;return g.then(p=>r(p,l,f))}return r(g,l,f)}}tt(e,"~standard",()=>({validate:r=>{try{const c=d2(e,r);return c.success?{value:c.data}:{issues:c.error?.issues}}catch{return f2(e,r).then(u=>u.success?{value:u.data}:{issues:u.error?.issues})}},vendor:"zod",version:1}))}),gh=te("$ZodString",(e,n)=>{wt.init(e,n),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??U2(e._zod.bag),e._zod.parse=(s,l)=>{if(n.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),vt=te("$ZodStringFormat",(e,n)=>{Sc.init(e,n),gh.init(e,n)}),iN=te("$ZodGUID",(e,n)=>{n.pattern??(n.pattern=M2),vt.init(e,n)}),rN=te("$ZodUUID",(e,n)=>{if(n.version){const l={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[n.version];if(l===void 0)throw new Error(`Invalid UUID version: "${n.version}"`);n.pattern??(n.pattern=Kv(l))}else n.pattern??(n.pattern=Kv());vt.init(e,n)}),oN=te("$ZodEmail",(e,n)=>{n.pattern??(n.pattern=D2),vt.init(e,n)}),cN=te("$ZodURL",(e,n)=>{vt.init(e,n),e._zod.check=s=>{try{const l=s.value.trim(),r=new URL(l);n.hostname&&(n.hostname.lastIndex=0,n.hostname.test(r.hostname)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:n.hostname.source,input:s.value,inst:e,continue:!n.abort})),n.protocol&&(n.protocol.lastIndex=0,n.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:n.protocol.source,input:s.value,inst:e,continue:!n.abort})),n.normalize?s.value=r.href:s.value=l;return}catch{s.issues.push({code:"invalid_format",format:"url",input:s.value,inst:e,continue:!n.abort})}}}),uN=te("$ZodEmoji",(e,n)=>{n.pattern??(n.pattern=C2()),vt.init(e,n)}),dN=te("$ZodNanoID",(e,n)=>{n.pattern??(n.pattern=T2),vt.init(e,n)}),fN=te("$ZodCUID",(e,n)=>{n.pattern??(n.pattern=S2),vt.init(e,n)}),hN=te("$ZodCUID2",(e,n)=>{n.pattern??(n.pattern=w2),vt.init(e,n)}),mN=te("$ZodULID",(e,n)=>{n.pattern??(n.pattern=_2),vt.init(e,n)}),gN=te("$ZodXID",(e,n)=>{n.pattern??(n.pattern=E2),vt.init(e,n)}),pN=te("$ZodKSUID",(e,n)=>{n.pattern??(n.pattern=N2),vt.init(e,n)}),vN=te("$ZodISODateTime",(e,n)=>{n.pattern??(n.pattern=q2(n)),vt.init(e,n)}),yN=te("$ZodISODate",(e,n)=>{n.pattern??(n.pattern=I2),vt.init(e,n)}),bN=te("$ZodISOTime",(e,n)=>{n.pattern??(n.pattern=L2(n)),vt.init(e,n)}),xN=te("$ZodISODuration",(e,n)=>{n.pattern??(n.pattern=j2),vt.init(e,n)}),SN=te("$ZodIPv4",(e,n)=>{n.pattern??(n.pattern=A2),vt.init(e,n),e._zod.bag.format="ipv4"}),wN=te("$ZodIPv6",(e,n)=>{n.pattern??(n.pattern=k2),vt.init(e,n),e._zod.bag.format="ipv6",e._zod.check=s=>{try{new URL(`http://[${s.value}]`)}catch{s.issues.push({code:"invalid_format",format:"ipv6",input:s.value,inst:e,continue:!n.abort})}}}),_N=te("$ZodCIDRv4",(e,n)=>{n.pattern??(n.pattern=z2),vt.init(e,n)}),EN=te("$ZodCIDRv6",(e,n)=>{n.pattern??(n.pattern=O2),vt.init(e,n),e._zod.check=s=>{const l=s.value.split("/");try{if(l.length!==2)throw new Error;const[r,c]=l;if(!c)throw new Error;const u=Number(c);if(`${u}`!==c)throw new Error;if(u<0||u>128)throw new Error;new URL(`http://[${r}]`)}catch{s.issues.push({code:"invalid_format",format:"cidrv6",input:s.value,inst:e,continue:!n.abort})}}});function rb(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const NN=te("$ZodBase64",(e,n)=>{n.pattern??(n.pattern=P2),vt.init(e,n),e._zod.bag.contentEncoding="base64",e._zod.check=s=>{rb(s.value)||s.issues.push({code:"invalid_format",format:"base64",input:s.value,inst:e,continue:!n.abort})}});function TN(e){if(!eb.test(e))return!1;const n=e.replace(/[-_]/g,l=>l==="-"?"+":"/"),s=n.padEnd(Math.ceil(n.length/4)*4,"=");return rb(s)}const jN=te("$ZodBase64URL",(e,n)=>{n.pattern??(n.pattern=eb),vt.init(e,n),e._zod.bag.contentEncoding="base64url",e._zod.check=s=>{TN(s.value)||s.issues.push({code:"invalid_format",format:"base64url",input:s.value,inst:e,continue:!n.abort})}}),MN=te("$ZodE164",(e,n)=>{n.pattern??(n.pattern=B2),vt.init(e,n)});function DN(e,n=null){try{const s=e.split(".");if(s.length!==3)return!1;const[l]=s;if(!l)return!1;const r=JSON.parse(atob(l));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||n&&(!("alg"in r)||r.alg!==n))}catch{return!1}}const RN=te("$ZodJWT",(e,n)=>{vt.init(e,n),e._zod.check=s=>{DN(s.value,n.alg)||s.issues.push({code:"invalid_format",format:"jwt",input:s.value,inst:e,continue:!n.abort})}}),ob=te("$ZodNumber",(e,n)=>{wt.init(e,n),e._zod.pattern=e._zod.bag.pattern??ab,e._zod.parse=(s,l)=>{if(n.coerce)try{s.value=Number(s.value)}catch{}const r=s.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return s;const c=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return s.issues.push({expected:"number",code:"invalid_type",input:r,inst:e,...c?{received:c}:{}}),s}}),CN=te("$ZodNumberFormat",(e,n)=>{G2.init(e,n),ob.init(e,n)}),AN=te("$ZodBoolean",(e,n)=>{wt.init(e,n),e._zod.pattern=$2,e._zod.parse=(s,l)=>{if(n.coerce)try{s.value=!!s.value}catch{}const r=s.value;return typeof r=="boolean"||s.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:e}),s}}),kN=te("$ZodUnknown",(e,n)=>{wt.init(e,n),e._zod.parse=s=>s}),zN=te("$ZodNever",(e,n)=>{wt.init(e,n),e._zod.parse=(s,l)=>(s.issues.push({expected:"never",code:"invalid_type",input:s.value,inst:e}),s)});function Wv(e,n,s){e.issues.length&&n.issues.push(...Bl(s,e.issues)),n.value[s]=e.value}const ON=te("$ZodArray",(e,n)=>{wt.init(e,n),e._zod.parse=(s,l)=>{const r=s.value;if(!Array.isArray(r))return s.issues.push({expected:"array",code:"invalid_type",input:r,inst:e}),s;s.value=Array(r.length);const c=[];for(let u=0;u<r.length;u++){const f=r[u],g=n.element._zod.run({value:f,issues:[]},l);g instanceof Promise?c.push(g.then(p=>Wv(p,s,u))):Wv(g,s,u)}return c.length?Promise.all(c).then(()=>s):s}});function ec(e,n,s,l,r){if(e.issues.length){if(r&&!(s in l))return;n.issues.push(...Bl(s,e.issues))}e.value===void 0?s in l&&(n.value[s]=void 0):n.value[s]=e.value}function cb(e){const n=Object.keys(e.shape);for(const l of n)if(!e.shape?.[l]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${l}": expected a Zod schema`);const s=e2(e.shape);return{...e,keys:n,keySet:new Set(n),numKeys:n.length,optionalKeys:new Set(s)}}function ub(e,n,s,l,r,c){const u=[],f=r.keySet,g=r.catchall._zod,p=g.def.type,y=g.optout==="optional";for(const v in n){if(f.has(v))continue;if(p==="never"){u.push(v);continue}const x=g.run({value:n[v],issues:[]},l);x instanceof Promise?e.push(x.then(S=>ec(S,s,v,n,y))):ec(x,s,v,n,y)}return u.length&&s.issues.push({code:"unrecognized_keys",keys:u,input:n,inst:c}),e.length?Promise.all(e).then(()=>s):s}const PN=te("$ZodObject",(e,n)=>{if(wt.init(e,n),!Object.getOwnPropertyDescriptor(n,"shape")?.get){const f=n.shape;Object.defineProperty(n,"shape",{get:()=>{const g={...f};return Object.defineProperty(n,"shape",{value:g}),g}})}const l=ch(()=>cb(n));tt(e._zod,"propValues",()=>{const f=n.shape,g={};for(const p in f){const y=f[p]._zod;if(y.values){g[p]??(g[p]=new Set);for(const v of y.values)g[p].add(v)}}return g});const r=Jo,c=n.catchall;let u;e._zod.parse=(f,g)=>{u??(u=l.value);const p=f.value;if(!r(p))return f.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),f;f.value={};const y=[],v=u.shape;for(const x of u.keys){const S=v[x],T=S._zod.optout==="optional",w=S._zod.run({value:p[x],issues:[]},g);w instanceof Promise?y.push(w.then(D=>ec(D,f,x,p,T))):ec(w,f,x,p,T)}return c?ub(y,p,f,g,l.value,e):y.length?Promise.all(y).then(()=>f):f}}),BN=te("$ZodObjectJIT",(e,n)=>{PN.init(e,n);const s=e._zod.parse,l=ch(()=>cb(n)),r=x=>{const S=new sN(["shape","payload","ctx"]),T=l.value,w=z=>{const P=Vv(z);return`shape[${P}]._zod.run({ value: input[${P}], issues: [] }, ctx)`};S.write("const input = payload.value;");const D=Object.create(null);let C=0;for(const z of T.keys)D[z]=`key_${C++}`;S.write("const newResult = {};");for(const z of T.keys){const P=D[z],I=Vv(z),N=x[z]?._zod?.optout==="optional";S.write(`const ${P} = ${w(z)};`),N?S.write(`
        if (${P}.issues.length) {
          if (${I} in input) {
            payload.issues = payload.issues.concat(${P}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${I}, ...iss.path] : [${I}]
            })));
          }
        }
        
        if (${P}.value === undefined) {
          if (${I} in input) {
            newResult[${I}] = undefined;
          }
        } else {
          newResult[${I}] = ${P}.value;
        }
        
      `):S.write(`
        if (${P}.issues.length) {
          payload.issues = payload.issues.concat(${P}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${I}, ...iss.path] : [${I}]
          })));
        }
        
        if (${P}.value === undefined) {
          if (${I} in input) {
            newResult[${I}] = undefined;
          }
        } else {
          newResult[${I}] = ${P}.value;
        }
        
      `)}S.write("payload.value = newResult;"),S.write("return payload;");const B=S.compile();return(z,P)=>B(x,z,P)};let c;const u=Jo,f=!Gy.jitless,p=f&&QE.value,y=n.catchall;let v;e._zod.parse=(x,S)=>{v??(v=l.value);const T=x.value;return u(T)?f&&p&&S?.async===!1&&S.jitless!==!0?(c||(c=r(n.shape)),x=c(x,S),y?ub([],T,x,S,v,e):x):s(x,S):(x.issues.push({expected:"object",code:"invalid_type",input:T,inst:e}),x)}});function Xv(e,n,s,l){for(const c of e)if(c.issues.length===0)return n.value=c.value,n;const r=e.filter(c=>!Pl(c));return r.length===1?(n.value=r[0].value,r[0]):(n.issues.push({code:"invalid_union",input:n.value,inst:s,errors:e.map(c=>c.issues.map(u=>ps(u,l,gs())))}),n)}const IN=te("$ZodUnion",(e,n)=>{wt.init(e,n),tt(e._zod,"optin",()=>n.options.some(r=>r._zod.optin==="optional")?"optional":void 0),tt(e._zod,"optout",()=>n.options.some(r=>r._zod.optout==="optional")?"optional":void 0),tt(e._zod,"values",()=>{if(n.options.every(r=>r._zod.values))return new Set(n.options.flatMap(r=>Array.from(r._zod.values)))}),tt(e._zod,"pattern",()=>{if(n.options.every(r=>r._zod.pattern)){const r=n.options.map(c=>c._zod.pattern);return new RegExp(`^(${r.map(c=>dh(c.source)).join("|")})$`)}});const s=n.options.length===1,l=n.options[0]._zod.run;e._zod.parse=(r,c)=>{if(s)return l(r,c);let u=!1;const f=[];for(const g of n.options){const p=g._zod.run({value:r.value,issues:[]},c);if(p instanceof Promise)f.push(p),u=!0;else{if(p.issues.length===0)return p;f.push(p)}}return u?Promise.all(f).then(g=>Xv(g,r,e,c)):Xv(f,r,e,c)}}),LN=te("$ZodIntersection",(e,n)=>{wt.init(e,n),e._zod.parse=(s,l)=>{const r=s.value,c=n.left._zod.run({value:r,issues:[]},l),u=n.right._zod.run({value:r,issues:[]},l);return c instanceof Promise||u instanceof Promise?Promise.all([c,u]).then(([g,p])=>Qv(s,g,p)):Qv(s,c,u)}});function Af(e,n){if(e===n)return{valid:!0,data:e};if(e instanceof Date&&n instanceof Date&&+e==+n)return{valid:!0,data:e};if(Fl(e)&&Fl(n)){const s=Object.keys(n),l=Object.keys(e).filter(c=>s.indexOf(c)!==-1),r={...e,...n};for(const c of l){const u=Af(e[c],n[c]);if(!u.valid)return{valid:!1,mergeErrorPath:[c,...u.mergeErrorPath]};r[c]=u.data}return{valid:!0,data:r}}if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return{valid:!1,mergeErrorPath:[]};const s=[];for(let l=0;l<e.length;l++){const r=e[l],c=n[l],u=Af(r,c);if(!u.valid)return{valid:!1,mergeErrorPath:[l,...u.mergeErrorPath]};s.push(u.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}function Qv(e,n,s){const l=new Map;let r;for(const f of n.issues)if(f.code==="unrecognized_keys"){r??(r=f);for(const g of f.keys)l.has(g)||l.set(g,{}),l.get(g).l=!0}else e.issues.push(f);for(const f of s.issues)if(f.code==="unrecognized_keys")for(const g of f.keys)l.has(g)||l.set(g,{}),l.get(g).r=!0;else e.issues.push(f);const c=[...l].filter(([,f])=>f.l&&f.r).map(([f])=>f);if(c.length&&r&&e.issues.push({...r,keys:c}),Pl(e))return e;const u=Af(n.value,s.value);if(!u.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(u.mergeErrorPath)}`);return e.value=u.data,e}const qN=te("$ZodRecord",(e,n)=>{wt.init(e,n),e._zod.parse=(s,l)=>{const r=s.value;if(!Fl(r))return s.issues.push({expected:"record",code:"invalid_type",input:r,inst:e}),s;const c=[],u=n.keyType._zod.values;if(u){s.value={};const f=new Set;for(const p of u)if(typeof p=="string"||typeof p=="number"||typeof p=="symbol"){f.add(typeof p=="number"?p.toString():p);const y=n.valueType._zod.run({value:r[p],issues:[]},l);y instanceof Promise?c.push(y.then(v=>{v.issues.length&&s.issues.push(...Bl(p,v.issues)),s.value[p]=v.value})):(y.issues.length&&s.issues.push(...Bl(p,y.issues)),s.value[p]=y.value)}let g;for(const p in r)f.has(p)||(g=g??[],g.push(p));g&&g.length>0&&s.issues.push({code:"unrecognized_keys",input:r,inst:e,keys:g})}else{s.value={};for(const f of Reflect.ownKeys(r)){if(f==="__proto__")continue;let g=n.keyType._zod.run({value:f,issues:[]},l);if(g instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof f=="string"&&ab.test(f)&&g.issues.length){const v=n.keyType._zod.run({value:Number(f),issues:[]},l);if(v instanceof Promise)throw new Error("Async schemas not supported in object keys currently");v.issues.length===0&&(g=v)}if(g.issues.length){n.mode==="loose"?s.value[f]=r[f]:s.issues.push({code:"invalid_key",origin:"record",issues:g.issues.map(v=>ps(v,l,gs())),input:f,path:[f],inst:e});continue}const y=n.valueType._zod.run({value:r[f],issues:[]},l);y instanceof Promise?c.push(y.then(v=>{v.issues.length&&s.issues.push(...Bl(f,v.issues)),s.value[g.value]=v.value})):(y.issues.length&&s.issues.push(...Bl(f,y.issues)),s.value[g.value]=y.value)}}return c.length?Promise.all(c).then(()=>s):s}}),UN=te("$ZodEnum",(e,n)=>{wt.init(e,n);const s=Vy(n.entries),l=new Set(s);e._zod.values=l,e._zod.pattern=new RegExp(`^(${s.filter(r=>JE.has(typeof r)).map(r=>typeof r=="string"?yc(r):r.toString()).join("|")})$`),e._zod.parse=(r,c)=>{const u=r.value;return l.has(u)||r.issues.push({code:"invalid_value",values:s,input:u,inst:e}),r}}),HN=te("$ZodTransform",(e,n)=>{wt.init(e,n),e._zod.parse=(s,l)=>{if(l.direction==="backward")throw new Yy(e.constructor.name);const r=n.transform(s.value,s);if(l.async)return(r instanceof Promise?r:Promise.resolve(r)).then(u=>(s.value=u,s));if(r instanceof Promise)throw new ql;return s.value=r,s}});function Jv(e,n){return e.issues.length&&n===void 0?{issues:[],value:void 0}:e}const db=te("$ZodOptional",(e,n)=>{wt.init(e,n),e._zod.optin="optional",e._zod.optout="optional",tt(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,void 0]):void 0),tt(e._zod,"pattern",()=>{const s=n.innerType._zod.pattern;return s?new RegExp(`^(${dh(s.source)})?$`):void 0}),e._zod.parse=(s,l)=>{if(n.innerType._zod.optin==="optional"){const r=n.innerType._zod.run(s,l);return r instanceof Promise?r.then(c=>Jv(c,s.value)):Jv(r,s.value)}return s.value===void 0?s:n.innerType._zod.run(s,l)}}),$N=te("$ZodExactOptional",(e,n)=>{db.init(e,n),tt(e._zod,"values",()=>n.innerType._zod.values),tt(e._zod,"pattern",()=>n.innerType._zod.pattern),e._zod.parse=(s,l)=>n.innerType._zod.run(s,l)}),ZN=te("$ZodNullable",(e,n)=>{wt.init(e,n),tt(e._zod,"optin",()=>n.innerType._zod.optin),tt(e._zod,"optout",()=>n.innerType._zod.optout),tt(e._zod,"pattern",()=>{const s=n.innerType._zod.pattern;return s?new RegExp(`^(${dh(s.source)}|null)$`):void 0}),tt(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,null]):void 0),e._zod.parse=(s,l)=>s.value===null?s:n.innerType._zod.run(s,l)}),FN=te("$ZodDefault",(e,n)=>{wt.init(e,n),e._zod.optin="optional",tt(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(s,l)=>{if(l.direction==="backward")return n.innerType._zod.run(s,l);if(s.value===void 0)return s.value=n.defaultValue,s;const r=n.innerType._zod.run(s,l);return r instanceof Promise?r.then(c=>e0(c,n)):e0(r,n)}});function e0(e,n){return e.value===void 0&&(e.value=n.defaultValue),e}const YN=te("$ZodPrefault",(e,n)=>{wt.init(e,n),e._zod.optin="optional",tt(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(s,l)=>(l.direction==="backward"||s.value===void 0&&(s.value=n.defaultValue),n.innerType._zod.run(s,l))}),GN=te("$ZodNonOptional",(e,n)=>{wt.init(e,n),tt(e._zod,"values",()=>{const s=n.innerType._zod.values;return s?new Set([...s].filter(l=>l!==void 0)):void 0}),e._zod.parse=(s,l)=>{const r=n.innerType._zod.run(s,l);return r instanceof Promise?r.then(c=>t0(c,e)):t0(r,e)}});function t0(e,n){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:n}),e}const VN=te("$ZodCatch",(e,n)=>{wt.init(e,n),tt(e._zod,"optin",()=>n.innerType._zod.optin),tt(e._zod,"optout",()=>n.innerType._zod.optout),tt(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(s,l)=>{if(l.direction==="backward")return n.innerType._zod.run(s,l);const r=n.innerType._zod.run(s,l);return r instanceof Promise?r.then(c=>(s.value=c.value,c.issues.length&&(s.value=n.catchValue({...s,error:{issues:c.issues.map(u=>ps(u,l,gs()))},input:s.value}),s.issues=[]),s)):(s.value=r.value,r.issues.length&&(s.value=n.catchValue({...s,error:{issues:r.issues.map(c=>ps(c,l,gs()))},input:s.value}),s.issues=[]),s)}}),KN=te("$ZodPipe",(e,n)=>{wt.init(e,n),tt(e._zod,"values",()=>n.in._zod.values),tt(e._zod,"optin",()=>n.in._zod.optin),tt(e._zod,"optout",()=>n.out._zod.optout),tt(e._zod,"propValues",()=>n.in._zod.propValues),e._zod.parse=(s,l)=>{if(l.direction==="backward"){const c=n.out._zod.run(s,l);return c instanceof Promise?c.then(u=>Eo(u,n.in,l)):Eo(c,n.in,l)}const r=n.in._zod.run(s,l);return r instanceof Promise?r.then(c=>Eo(c,n.out,l)):Eo(r,n.out,l)}});function Eo(e,n,s){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:e.value,issues:e.issues},s)}const WN=te("$ZodReadonly",(e,n)=>{wt.init(e,n),tt(e._zod,"propValues",()=>n.innerType._zod.propValues),tt(e._zod,"values",()=>n.innerType._zod.values),tt(e._zod,"optin",()=>n.innerType?._zod?.optin),tt(e._zod,"optout",()=>n.innerType?._zod?.optout),e._zod.parse=(s,l)=>{if(l.direction==="backward")return n.innerType._zod.run(s,l);const r=n.innerType._zod.run(s,l);return r instanceof Promise?r.then(n0):n0(r)}});function n0(e){return e.value=Object.freeze(e.value),e}const XN=te("$ZodCustom",(e,n)=>{_n.init(e,n),wt.init(e,n),e._zod.parse=(s,l)=>s,e._zod.check=s=>{const l=s.value,r=n.fn(l);if(r instanceof Promise)return r.then(c=>a0(c,s,l,e));a0(r,s,l,e)}});function a0(e,n,s,l){if(!e){const r={code:"custom",input:s,inst:l,path:[...l._zod.def.path??[]],continue:!l._zod.def.abort};l._zod.def.params&&(r.params=l._zod.def.params),n.issues.push(Ji(r))}}var s0;class QN{constructor(){this._map=new WeakMap,this._idmap=new Map}add(n,...s){const l=s[0];return this._map.set(n,l),l&&typeof l=="object"&&"id"in l&&this._idmap.set(l.id,n),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(n){const s=this._map.get(n);return s&&typeof s=="object"&&"id"in s&&this._idmap.delete(s.id),this._map.delete(n),this}get(n){const s=n._zod.parent;if(s){const l={...this.get(s)??{}};delete l.id;const r={...l,...this._map.get(n)};return Object.keys(r).length?r:void 0}return this._map.get(n)}has(n){return this._map.has(n)}}function JN(){return new QN}(s0=globalThis).__zod_globalRegistry??(s0.__zod_globalRegistry=JN());const Zi=globalThis.__zod_globalRegistry;function eT(e,n){return new e({type:"string",...be(n)})}function tT(e,n){return new e({type:"string",format:"email",check:"string_format",abort:!1,...be(n)})}function l0(e,n){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...be(n)})}function nT(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...be(n)})}function aT(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...be(n)})}function sT(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...be(n)})}function lT(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...be(n)})}function iT(e,n){return new e({type:"string",format:"url",check:"string_format",abort:!1,...be(n)})}function rT(e,n){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...be(n)})}function oT(e,n){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...be(n)})}function cT(e,n){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...be(n)})}function uT(e,n){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...be(n)})}function dT(e,n){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...be(n)})}function fT(e,n){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...be(n)})}function hT(e,n){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...be(n)})}function mT(e,n){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...be(n)})}function gT(e,n){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...be(n)})}function pT(e,n){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...be(n)})}function vT(e,n){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...be(n)})}function yT(e,n){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...be(n)})}function bT(e,n){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...be(n)})}function xT(e,n){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...be(n)})}function ST(e,n){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...be(n)})}function wT(e,n){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...be(n)})}function _T(e,n){return new e({type:"string",format:"date",check:"string_format",...be(n)})}function ET(e,n){return new e({type:"string",format:"time",check:"string_format",precision:null,...be(n)})}function NT(e,n){return new e({type:"string",format:"duration",check:"string_format",...be(n)})}function TT(e,n){return new e({type:"number",checks:[],...be(n)})}function jT(e,n){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...be(n)})}function MT(e,n){return new e({type:"boolean",...be(n)})}function DT(e){return new e({type:"unknown"})}function RT(e,n){return new e({type:"never",...be(n)})}function i0(e,n){return new lb({check:"less_than",...be(n),value:e,inclusive:!1})}function Wd(e,n){return new lb({check:"less_than",...be(n),value:e,inclusive:!0})}function r0(e,n){return new ib({check:"greater_than",...be(n),value:e,inclusive:!1})}function Xd(e,n){return new ib({check:"greater_than",...be(n),value:e,inclusive:!0})}function o0(e,n){return new Y2({check:"multiple_of",...be(n),value:e})}function fb(e,n){return new V2({check:"max_length",...be(n),maximum:e})}function tc(e,n){return new K2({check:"min_length",...be(n),minimum:e})}function hb(e,n){return new W2({check:"length_equals",...be(n),length:e})}function CT(e,n){return new X2({check:"string_format",format:"regex",...be(n),pattern:e})}function AT(e){return new Q2({check:"string_format",format:"lowercase",...be(e)})}function kT(e){return new J2({check:"string_format",format:"uppercase",...be(e)})}function zT(e,n){return new eN({check:"string_format",format:"includes",...be(n),includes:e})}function OT(e,n){return new tN({check:"string_format",format:"starts_with",...be(n),prefix:e})}function PT(e,n){return new nN({check:"string_format",format:"ends_with",...be(n),suffix:e})}function Kl(e){return new aN({check:"overwrite",tx:e})}function BT(e){return Kl(n=>n.normalize(e))}function IT(){return Kl(e=>e.trim())}function LT(){return Kl(e=>e.toLowerCase())}function qT(){return Kl(e=>e.toUpperCase())}function UT(){return Kl(e=>XE(e))}function HT(e,n,s){return new e({type:"array",element:n,...be(s)})}function $T(e,n,s){return new e({type:"custom",check:"custom",fn:n,...be(s)})}function ZT(e){const n=FT(s=>(s.addIssue=l=>{if(typeof l=="string")s.issues.push(Ji(l,s.value,n._zod.def));else{const r=l;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=s.value),r.inst??(r.inst=n),r.continue??(r.continue=!n._zod.def.abort),s.issues.push(Ji(r))}},e(s.value,s)));return n}function FT(e,n){const s=new _n({check:"custom",...be(n)});return s._zod.check=e,s}function mb(e){let n=e?.target??"draft-2020-12";return n==="draft-4"&&(n="draft-04"),n==="draft-7"&&(n="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??Zi,target:n,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function Ot(e,n,s={path:[],schemaPath:[]}){var l;const r=e._zod.def,c=n.seen.get(e);if(c)return c.count++,s.schemaPath.includes(e)&&(c.cycle=s.path),c.schema;const u={schema:{},count:1,cycle:void 0,path:s.path};n.seen.set(e,u);const f=e._zod.toJSONSchema?.();if(f)u.schema=f;else{const y={...s,schemaPath:[...s.schemaPath,e],path:s.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(n,u.schema,y);else{const x=u.schema,S=n.processors[r.type];if(!S)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${r.type}`);S(e,n,x,y)}const v=e._zod.parent;v&&(u.ref||(u.ref=v),Ot(v,n,y),n.seen.get(v).isParent=!0)}const g=n.metadataRegistry.get(e);return g&&Object.assign(u.schema,g),n.io==="input"&&dn(e)&&(delete u.schema.examples,delete u.schema.default),n.io==="input"&&u.schema._prefault&&((l=u.schema).default??(l.default=u.schema._prefault)),delete u.schema._prefault,n.seen.get(e).schema}function gb(e,n){const s=e.seen.get(n);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const l=new Map;for(const u of e.seen.entries()){const f=e.metadataRegistry.get(u[0])?.id;if(f){const g=l.get(f);if(g&&g!==u[0])throw new Error(`Duplicate schema id "${f}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);l.set(f,u[0])}}const r=u=>{const f=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const v=e.external.registry.get(u[0])?.id,x=e.external.uri??(T=>T);if(v)return{ref:x(v)};const S=u[1].defId??u[1].schema.id??`schema${e.counter++}`;return u[1].defId=S,{defId:S,ref:`${x("__shared")}#/${f}/${S}`}}if(u[1]===s)return{ref:"#"};const p=`#/${f}/`,y=u[1].schema.id??`__schema${e.counter++}`;return{defId:y,ref:p+y}},c=u=>{if(u[1].schema.$ref)return;const f=u[1],{ref:g,defId:p}=r(u);f.def={...f.schema},p&&(f.defId=p);const y=f.schema;for(const v in y)delete y[v];y.$ref=g};if(e.cycles==="throw")for(const u of e.seen.entries()){const f=u[1];if(f.cycle)throw new Error(`Cycle detected: #/${f.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const u of e.seen.entries()){const f=u[1];if(n===u[0]){c(u);continue}if(e.external){const p=e.external.registry.get(u[0])?.id;if(n!==u[0]&&p){c(u);continue}}if(e.metadataRegistry.get(u[0])?.id){c(u);continue}if(f.cycle){c(u);continue}if(f.count>1&&e.reused==="ref"){c(u);continue}}}function pb(e,n){const s=e.seen.get(n);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const l=u=>{const f=e.seen.get(u);if(f.ref===null)return;const g=f.def??f.schema,p={...g},y=f.ref;if(f.ref=null,y){l(y);const x=e.seen.get(y),S=x.schema;if(S.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(g.allOf=g.allOf??[],g.allOf.push(S)):Object.assign(g,S),Object.assign(g,p),u._zod.parent===y)for(const w in g)w==="$ref"||w==="allOf"||w in p||delete g[w];if(S.$ref&&x.def)for(const w in g)w==="$ref"||w==="allOf"||w in x.def&&JSON.stringify(g[w])===JSON.stringify(x.def[w])&&delete g[w]}const v=u._zod.parent;if(v&&v!==y){l(v);const x=e.seen.get(v);if(x?.schema.$ref&&(g.$ref=x.schema.$ref,x.def))for(const S in g)S==="$ref"||S==="allOf"||S in x.def&&JSON.stringify(g[S])===JSON.stringify(x.def[S])&&delete g[S]}e.override({zodSchema:u,jsonSchema:g,path:f.path??[]})};for(const u of[...e.seen.entries()].reverse())l(u[0]);const r={};if(e.target==="draft-2020-12"?r.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?r.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?r.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const u=e.external.registry.get(n)?.id;if(!u)throw new Error("Schema is missing an `id` property");r.$id=e.external.uri(u)}Object.assign(r,s.def??s.schema);const c=e.external?.defs??{};for(const u of e.seen.entries()){const f=u[1];f.def&&f.defId&&(c[f.defId]=f.def)}e.external||Object.keys(c).length>0&&(e.target==="draft-2020-12"?r.$defs=c:r.definitions=c);try{const u=JSON.parse(JSON.stringify(r));return Object.defineProperty(u,"~standard",{value:{...n["~standard"],jsonSchema:{input:nc(n,"input",e.processors),output:nc(n,"output",e.processors)}},enumerable:!1,writable:!1}),u}catch{throw new Error("Error converting schema to JSON.")}}function dn(e,n){const s=n??{seen:new Set};if(s.seen.has(e))return!1;s.seen.add(e);const l=e._zod.def;if(l.type==="transform")return!0;if(l.type==="array")return dn(l.element,s);if(l.type==="set")return dn(l.valueType,s);if(l.type==="lazy")return dn(l.getter(),s);if(l.type==="promise"||l.type==="optional"||l.type==="nonoptional"||l.type==="nullable"||l.type==="readonly"||l.type==="default"||l.type==="prefault")return dn(l.innerType,s);if(l.type==="intersection")return dn(l.left,s)||dn(l.right,s);if(l.type==="record"||l.type==="map")return dn(l.keyType,s)||dn(l.valueType,s);if(l.type==="pipe")return dn(l.in,s)||dn(l.out,s);if(l.type==="object"){for(const r in l.shape)if(dn(l.shape[r],s))return!0;return!1}if(l.type==="union"){for(const r of l.options)if(dn(r,s))return!0;return!1}if(l.type==="tuple"){for(const r of l.items)if(dn(r,s))return!0;return!!(l.rest&&dn(l.rest,s))}return!1}const YT=(e,n={})=>s=>{const l=mb({...s,processors:n});return Ot(e,l),gb(l,e),pb(l,e)},nc=(e,n,s={})=>l=>{const{libraryOptions:r,target:c}=l??{},u=mb({...r??{},target:c,io:n,processors:s});return Ot(e,u),gb(u,e),pb(u,e)},GT={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},VT=(e,n,s,l)=>{const r=s;r.type="string";const{minimum:c,maximum:u,format:f,patterns:g,contentEncoding:p}=e._zod.bag;if(typeof c=="number"&&(r.minLength=c),typeof u=="number"&&(r.maxLength=u),f&&(r.format=GT[f]??f,r.format===""&&delete r.format,f==="time"&&delete r.format),p&&(r.contentEncoding=p),g&&g.size>0){const y=[...g];y.length===1?r.pattern=y[0].source:y.length>1&&(r.allOf=[...y.map(v=>({...n.target==="draft-07"||n.target==="draft-04"||n.target==="openapi-3.0"?{type:"string"}:{},pattern:v.source}))])}},KT=(e,n,s,l)=>{const r=s,{minimum:c,maximum:u,format:f,multipleOf:g,exclusiveMaximum:p,exclusiveMinimum:y}=e._zod.bag;typeof f=="string"&&f.includes("int")?r.type="integer":r.type="number",typeof y=="number"&&(n.target==="draft-04"||n.target==="openapi-3.0"?(r.minimum=y,r.exclusiveMinimum=!0):r.exclusiveMinimum=y),typeof c=="number"&&(r.minimum=c,typeof y=="number"&&n.target!=="draft-04"&&(y>=c?delete r.minimum:delete r.exclusiveMinimum)),typeof p=="number"&&(n.target==="draft-04"||n.target==="openapi-3.0"?(r.maximum=p,r.exclusiveMaximum=!0):r.exclusiveMaximum=p),typeof u=="number"&&(r.maximum=u,typeof p=="number"&&n.target!=="draft-04"&&(p<=u?delete r.maximum:delete r.exclusiveMaximum)),typeof g=="number"&&(r.multipleOf=g)},WT=(e,n,s,l)=>{s.type="boolean"},XT=(e,n,s,l)=>{s.not={}},QT=(e,n,s,l)=>{},JT=(e,n,s,l)=>{const r=e._zod.def,c=Vy(r.entries);c.every(u=>typeof u=="number")&&(s.type="number"),c.every(u=>typeof u=="string")&&(s.type="string"),s.enum=c},ej=(e,n,s,l)=>{if(n.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},tj=(e,n,s,l)=>{if(n.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},nj=(e,n,s,l)=>{const r=s,c=e._zod.def,{minimum:u,maximum:f}=e._zod.bag;typeof u=="number"&&(r.minItems=u),typeof f=="number"&&(r.maxItems=f),r.type="array",r.items=Ot(c.element,n,{...l,path:[...l.path,"items"]})},aj=(e,n,s,l)=>{const r=s,c=e._zod.def;r.type="object",r.properties={};const u=c.shape;for(const p in u)r.properties[p]=Ot(u[p],n,{...l,path:[...l.path,"properties",p]});const f=new Set(Object.keys(u)),g=new Set([...f].filter(p=>{const y=c.shape[p]._zod;return n.io==="input"?y.optin===void 0:y.optout===void 0}));g.size>0&&(r.required=Array.from(g)),c.catchall?._zod.def.type==="never"?r.additionalProperties=!1:c.catchall?c.catchall&&(r.additionalProperties=Ot(c.catchall,n,{...l,path:[...l.path,"additionalProperties"]})):n.io==="output"&&(r.additionalProperties=!1)},sj=(e,n,s,l)=>{const r=e._zod.def,c=r.inclusive===!1,u=r.options.map((f,g)=>Ot(f,n,{...l,path:[...l.path,c?"oneOf":"anyOf",g]}));c?s.oneOf=u:s.anyOf=u},lj=(e,n,s,l)=>{const r=e._zod.def,c=Ot(r.left,n,{...l,path:[...l.path,"allOf",0]}),u=Ot(r.right,n,{...l,path:[...l.path,"allOf",1]}),f=p=>"allOf"in p&&Object.keys(p).length===1,g=[...f(c)?c.allOf:[c],...f(u)?u.allOf:[u]];s.allOf=g},ij=(e,n,s,l)=>{const r=s,c=e._zod.def;r.type="object";const u=c.keyType,g=u._zod.bag?.patterns;if(c.mode==="loose"&&g&&g.size>0){const y=Ot(c.valueType,n,{...l,path:[...l.path,"patternProperties","*"]});r.patternProperties={};for(const v of g)r.patternProperties[v.source]=y}else(n.target==="draft-07"||n.target==="draft-2020-12")&&(r.propertyNames=Ot(c.keyType,n,{...l,path:[...l.path,"propertyNames"]})),r.additionalProperties=Ot(c.valueType,n,{...l,path:[...l.path,"additionalProperties"]});const p=u._zod.values;if(p){const y=[...p].filter(v=>typeof v=="string"||typeof v=="number");y.length>0&&(r.required=y)}},rj=(e,n,s,l)=>{const r=e._zod.def,c=Ot(r.innerType,n,l),u=n.seen.get(e);n.target==="openapi-3.0"?(u.ref=r.innerType,s.nullable=!0):s.anyOf=[c,{type:"null"}]},oj=(e,n,s,l)=>{const r=e._zod.def;Ot(r.innerType,n,l);const c=n.seen.get(e);c.ref=r.innerType},cj=(e,n,s,l)=>{const r=e._zod.def;Ot(r.innerType,n,l);const c=n.seen.get(e);c.ref=r.innerType,s.default=JSON.parse(JSON.stringify(r.defaultValue))},uj=(e,n,s,l)=>{const r=e._zod.def;Ot(r.innerType,n,l);const c=n.seen.get(e);c.ref=r.innerType,n.io==="input"&&(s._prefault=JSON.parse(JSON.stringify(r.defaultValue)))},dj=(e,n,s,l)=>{const r=e._zod.def;Ot(r.innerType,n,l);const c=n.seen.get(e);c.ref=r.innerType;let u;try{u=r.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}s.default=u},fj=(e,n,s,l)=>{const r=e._zod.def,c=n.io==="input"?r.in._zod.def.type==="transform"?r.out:r.in:r.out;Ot(c,n,l);const u=n.seen.get(e);u.ref=c},hj=(e,n,s,l)=>{const r=e._zod.def;Ot(r.innerType,n,l);const c=n.seen.get(e);c.ref=r.innerType,s.readOnly=!0},vb=(e,n,s,l)=>{const r=e._zod.def;Ot(r.innerType,n,l);const c=n.seen.get(e);c.ref=r.innerType},mj=te("ZodISODateTime",(e,n)=>{vN.init(e,n),yt.init(e,n)});function gj(e){return wT(mj,e)}const pj=te("ZodISODate",(e,n)=>{yN.init(e,n),yt.init(e,n)});function vj(e){return _T(pj,e)}const yj=te("ZodISOTime",(e,n)=>{bN.init(e,n),yt.init(e,n)});function bj(e){return ET(yj,e)}const xj=te("ZodISODuration",(e,n)=>{xN.init(e,n),yt.init(e,n)});function Sj(e){return NT(xj,e)}const wj=(e,n)=>{Qy.init(e,n),e.name="ZodError",Object.defineProperties(e,{format:{value:s=>u2(e,s)},flatten:{value:s=>c2(e,s)},addIssue:{value:s=>{e.issues.push(s),e.message=JSON.stringify(e.issues,Cf,2)}},addIssues:{value:s=>{e.issues.push(...s),e.message=JSON.stringify(e.issues,Cf,2)}},isEmpty:{get(){return e.issues.length===0}}})},Kn=te("ZodError",wj,{Parent:Error}),_j=hh(Kn),Ej=mh(Kn),Nj=bc(Kn),Tj=xc(Kn),jj=h2(Kn),Mj=m2(Kn),Dj=g2(Kn),Rj=p2(Kn),Cj=v2(Kn),Aj=y2(Kn),kj=b2(Kn),zj=x2(Kn),_t=te("ZodType",(e,n)=>(wt.init(e,n),Object.assign(e["~standard"],{jsonSchema:{input:nc(e,"input"),output:nc(e,"output")}}),e.toJSONSchema=YT(e,{}),e.def=n,e.type=n.type,Object.defineProperty(e,"_def",{value:n}),e.check=(...s)=>e.clone(ys(n,{checks:[...n.checks??[],...s.map(l=>typeof l=="function"?{_zod:{check:l,def:{check:"custom"},onattach:[]}}:l)]}),{parent:!0}),e.with=e.check,e.clone=(s,l)=>bs(e,s,l),e.brand=()=>e,e.register=((s,l)=>(s.add(e,l),e)),e.parse=(s,l)=>_j(e,s,l,{callee:e.parse}),e.safeParse=(s,l)=>Nj(e,s,l),e.parseAsync=async(s,l)=>Ej(e,s,l,{callee:e.parseAsync}),e.safeParseAsync=async(s,l)=>Tj(e,s,l),e.spa=e.safeParseAsync,e.encode=(s,l)=>jj(e,s,l),e.decode=(s,l)=>Mj(e,s,l),e.encodeAsync=async(s,l)=>Dj(e,s,l),e.decodeAsync=async(s,l)=>Rj(e,s,l),e.safeEncode=(s,l)=>Cj(e,s,l),e.safeDecode=(s,l)=>Aj(e,s,l),e.safeEncodeAsync=async(s,l)=>kj(e,s,l),e.safeDecodeAsync=async(s,l)=>zj(e,s,l),e.refine=(s,l)=>e.check(jM(s,l)),e.superRefine=s=>e.check(MM(s)),e.overwrite=s=>e.check(Kl(s)),e.optional=()=>f0(e),e.exactOptional=()=>mM(e),e.nullable=()=>h0(e),e.nullish=()=>f0(h0(e)),e.nonoptional=s=>xM(e,s),e.array=()=>kn(e),e.or=s=>rM([e,s]),e.and=s=>cM(e,s),e.transform=s=>m0(e,fM(s)),e.default=s=>vM(e,s),e.prefault=s=>bM(e,s),e.catch=s=>wM(e,s),e.pipe=s=>m0(e,s),e.readonly=()=>NM(e),e.describe=s=>{const l=e.clone();return Zi.add(l,{description:s}),l},Object.defineProperty(e,"description",{get(){return Zi.get(e)?.description},configurable:!0}),e.meta=(...s)=>{if(s.length===0)return Zi.get(e);const l=e.clone();return Zi.add(l,s[0]),l},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=s=>s(e),e)),yb=te("_ZodString",(e,n)=>{gh.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(l,r,c)=>VT(e,l,r);const s=e._zod.bag;e.format=s.format??null,e.minLength=s.minimum??null,e.maxLength=s.maximum??null,e.regex=(...l)=>e.check(CT(...l)),e.includes=(...l)=>e.check(zT(...l)),e.startsWith=(...l)=>e.check(OT(...l)),e.endsWith=(...l)=>e.check(PT(...l)),e.min=(...l)=>e.check(tc(...l)),e.max=(...l)=>e.check(fb(...l)),e.length=(...l)=>e.check(hb(...l)),e.nonempty=(...l)=>e.check(tc(1,...l)),e.lowercase=l=>e.check(AT(l)),e.uppercase=l=>e.check(kT(l)),e.trim=()=>e.check(IT()),e.normalize=(...l)=>e.check(BT(...l)),e.toLowerCase=()=>e.check(LT()),e.toUpperCase=()=>e.check(qT()),e.slugify=()=>e.check(UT())}),Oj=te("ZodString",(e,n)=>{gh.init(e,n),yb.init(e,n),e.email=s=>e.check(tT(Pj,s)),e.url=s=>e.check(iT(Bj,s)),e.jwt=s=>e.check(ST(Qj,s)),e.emoji=s=>e.check(rT(Ij,s)),e.guid=s=>e.check(l0(c0,s)),e.uuid=s=>e.check(nT(No,s)),e.uuidv4=s=>e.check(aT(No,s)),e.uuidv6=s=>e.check(sT(No,s)),e.uuidv7=s=>e.check(lT(No,s)),e.nanoid=s=>e.check(oT(Lj,s)),e.guid=s=>e.check(l0(c0,s)),e.cuid=s=>e.check(cT(qj,s)),e.cuid2=s=>e.check(uT(Uj,s)),e.ulid=s=>e.check(dT(Hj,s)),e.base64=s=>e.check(yT(Kj,s)),e.base64url=s=>e.check(bT(Wj,s)),e.xid=s=>e.check(fT($j,s)),e.ksuid=s=>e.check(hT(Zj,s)),e.ipv4=s=>e.check(mT(Fj,s)),e.ipv6=s=>e.check(gT(Yj,s)),e.cidrv4=s=>e.check(pT(Gj,s)),e.cidrv6=s=>e.check(vT(Vj,s)),e.e164=s=>e.check(xT(Xj,s)),e.datetime=s=>e.check(gj(s)),e.date=s=>e.check(vj(s)),e.time=s=>e.check(bj(s)),e.duration=s=>e.check(Sj(s))});function Sn(e){return eT(Oj,e)}const yt=te("ZodStringFormat",(e,n)=>{vt.init(e,n),yb.init(e,n)}),Pj=te("ZodEmail",(e,n)=>{oN.init(e,n),yt.init(e,n)}),c0=te("ZodGUID",(e,n)=>{iN.init(e,n),yt.init(e,n)}),No=te("ZodUUID",(e,n)=>{rN.init(e,n),yt.init(e,n)}),Bj=te("ZodURL",(e,n)=>{cN.init(e,n),yt.init(e,n)}),Ij=te("ZodEmoji",(e,n)=>{uN.init(e,n),yt.init(e,n)}),Lj=te("ZodNanoID",(e,n)=>{dN.init(e,n),yt.init(e,n)}),qj=te("ZodCUID",(e,n)=>{fN.init(e,n),yt.init(e,n)}),Uj=te("ZodCUID2",(e,n)=>{hN.init(e,n),yt.init(e,n)}),Hj=te("ZodULID",(e,n)=>{mN.init(e,n),yt.init(e,n)}),$j=te("ZodXID",(e,n)=>{gN.init(e,n),yt.init(e,n)}),Zj=te("ZodKSUID",(e,n)=>{pN.init(e,n),yt.init(e,n)}),Fj=te("ZodIPv4",(e,n)=>{SN.init(e,n),yt.init(e,n)}),Yj=te("ZodIPv6",(e,n)=>{wN.init(e,n),yt.init(e,n)}),Gj=te("ZodCIDRv4",(e,n)=>{_N.init(e,n),yt.init(e,n)}),Vj=te("ZodCIDRv6",(e,n)=>{EN.init(e,n),yt.init(e,n)}),Kj=te("ZodBase64",(e,n)=>{NN.init(e,n),yt.init(e,n)}),Wj=te("ZodBase64URL",(e,n)=>{jN.init(e,n),yt.init(e,n)}),Xj=te("ZodE164",(e,n)=>{MN.init(e,n),yt.init(e,n)}),Qj=te("ZodJWT",(e,n)=>{RN.init(e,n),yt.init(e,n)}),bb=te("ZodNumber",(e,n)=>{ob.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(l,r,c)=>KT(e,l,r),e.gt=(l,r)=>e.check(r0(l,r)),e.gte=(l,r)=>e.check(Xd(l,r)),e.min=(l,r)=>e.check(Xd(l,r)),e.lt=(l,r)=>e.check(i0(l,r)),e.lte=(l,r)=>e.check(Wd(l,r)),e.max=(l,r)=>e.check(Wd(l,r)),e.int=l=>e.check(u0(l)),e.safe=l=>e.check(u0(l)),e.positive=l=>e.check(r0(0,l)),e.nonnegative=l=>e.check(Xd(0,l)),e.negative=l=>e.check(i0(0,l)),e.nonpositive=l=>e.check(Wd(0,l)),e.multipleOf=(l,r)=>e.check(o0(l,r)),e.step=(l,r)=>e.check(o0(l,r)),e.finite=()=>e;const s=e._zod.bag;e.minValue=Math.max(s.minimum??Number.NEGATIVE_INFINITY,s.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(s.maximum??Number.POSITIVE_INFINITY,s.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(s.format??"").includes("int")||Number.isSafeInteger(s.multipleOf??.5),e.isFinite=!0,e.format=s.format??null});function ta(e){return TT(bb,e)}const Jj=te("ZodNumberFormat",(e,n)=>{CN.init(e,n),bb.init(e,n)});function u0(e){return jT(Jj,e)}const eM=te("ZodBoolean",(e,n)=>{AN.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>WT(e,s,l)});function Fi(e){return MT(eM,e)}const tM=te("ZodUnknown",(e,n)=>{kN.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>QT()});function d0(){return DT(tM)}const nM=te("ZodNever",(e,n)=>{zN.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>XT(e,s,l)});function aM(e){return RT(nM,e)}const sM=te("ZodArray",(e,n)=>{ON.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>nj(e,s,l,r),e.element=n.element,e.min=(s,l)=>e.check(tc(s,l)),e.nonempty=s=>e.check(tc(1,s)),e.max=(s,l)=>e.check(fb(s,l)),e.length=(s,l)=>e.check(hb(s,l)),e.unwrap=()=>e.element});function kn(e,n){return HT(sM,e,n)}const lM=te("ZodObject",(e,n)=>{BN.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>aj(e,s,l,r),tt(e,"shape",()=>n.shape),e.keyof=()=>ac(Object.keys(e._zod.def.shape)),e.catchall=s=>e.clone({...e._zod.def,catchall:s}),e.passthrough=()=>e.clone({...e._zod.def,catchall:d0()}),e.loose=()=>e.clone({...e._zod.def,catchall:d0()}),e.strict=()=>e.clone({...e._zod.def,catchall:aM()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=s=>s2(e,s),e.safeExtend=s=>l2(e,s),e.merge=s=>i2(e,s),e.pick=s=>n2(e,s),e.omit=s=>a2(e,s),e.partial=(...s)=>r2(xb,e,s[0]),e.required=(...s)=>o2(Sb,e,s[0])});function er(e,n){const s={type:"object",shape:e??{},...be(n)};return new lM(s)}const iM=te("ZodUnion",(e,n)=>{IN.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>sj(e,s,l,r),e.options=n.options});function rM(e,n){return new iM({type:"union",options:e,...be(n)})}const oM=te("ZodIntersection",(e,n)=>{LN.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>lj(e,s,l,r)});function cM(e,n){return new oM({type:"intersection",left:e,right:n})}const uM=te("ZodRecord",(e,n)=>{qN.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>ij(e,s,l,r),e.keyType=n.keyType,e.valueType=n.valueType});function Ki(e,n,s){return new uM({type:"record",keyType:e,valueType:n,...be(s)})}const kf=te("ZodEnum",(e,n)=>{UN.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(l,r,c)=>JT(e,l,r),e.enum=n.entries,e.options=Object.values(n.entries);const s=new Set(Object.keys(n.entries));e.extract=(l,r)=>{const c={};for(const u of l)if(s.has(u))c[u]=n.entries[u];else throw new Error(`Key ${u} not found in enum`);return new kf({...n,checks:[],...be(r),entries:c})},e.exclude=(l,r)=>{const c={...n.entries};for(const u of l)if(s.has(u))delete c[u];else throw new Error(`Key ${u} not found in enum`);return new kf({...n,checks:[],...be(r),entries:c})}});function ac(e,n){const s=Array.isArray(e)?Object.fromEntries(e.map(l=>[l,l])):e;return new kf({type:"enum",entries:s,...be(n)})}const dM=te("ZodTransform",(e,n)=>{HN.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>tj(e,s),e._zod.parse=(s,l)=>{if(l.direction==="backward")throw new Yy(e.constructor.name);s.addIssue=c=>{if(typeof c=="string")s.issues.push(Ji(c,s.value,n));else{const u=c;u.fatal&&(u.continue=!1),u.code??(u.code="custom"),u.input??(u.input=s.value),u.inst??(u.inst=e),s.issues.push(Ji(u))}};const r=n.transform(s.value,s);return r instanceof Promise?r.then(c=>(s.value=c,s)):(s.value=r,s)}});function fM(e){return new dM({type:"transform",transform:e})}const xb=te("ZodOptional",(e,n)=>{db.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>vb(e,s,l,r),e.unwrap=()=>e._zod.def.innerType});function f0(e){return new xb({type:"optional",innerType:e})}const hM=te("ZodExactOptional",(e,n)=>{$N.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>vb(e,s,l,r),e.unwrap=()=>e._zod.def.innerType});function mM(e){return new hM({type:"optional",innerType:e})}const gM=te("ZodNullable",(e,n)=>{ZN.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>rj(e,s,l,r),e.unwrap=()=>e._zod.def.innerType});function h0(e){return new gM({type:"nullable",innerType:e})}const pM=te("ZodDefault",(e,n)=>{FN.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>cj(e,s,l,r),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function vM(e,n){return new pM({type:"default",innerType:e,get defaultValue(){return typeof n=="function"?n():Wy(n)}})}const yM=te("ZodPrefault",(e,n)=>{YN.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>uj(e,s,l,r),e.unwrap=()=>e._zod.def.innerType});function bM(e,n){return new yM({type:"prefault",innerType:e,get defaultValue(){return typeof n=="function"?n():Wy(n)}})}const Sb=te("ZodNonOptional",(e,n)=>{GN.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>oj(e,s,l,r),e.unwrap=()=>e._zod.def.innerType});function xM(e,n){return new Sb({type:"nonoptional",innerType:e,...be(n)})}const SM=te("ZodCatch",(e,n)=>{VN.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>dj(e,s,l,r),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function wM(e,n){return new SM({type:"catch",innerType:e,catchValue:typeof n=="function"?n:()=>n})}const _M=te("ZodPipe",(e,n)=>{KN.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>fj(e,s,l,r),e.in=n.in,e.out=n.out});function m0(e,n){return new _M({type:"pipe",in:e,out:n})}const EM=te("ZodReadonly",(e,n)=>{WN.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>hj(e,s,l,r),e.unwrap=()=>e._zod.def.innerType});function NM(e){return new EM({type:"readonly",innerType:e})}const TM=te("ZodCustom",(e,n)=>{XN.init(e,n),_t.init(e,n),e._zod.processJSONSchema=(s,l,r)=>ej(e,s)});function jM(e,n={}){return $T(TM,e,n)}function MM(e){return ZT(e)}const DM=["list","grid"],za={text:"",categories:[],types:[],tiers:[],classReqs:[],majorIds:[],numericRanges:{},exclusionRanges:{},onlyWearableAtLevel:106,onlyClassCompatible:!1,excludeRestricted:!1,sortKeys:["relevance"],sortDescending:!0,viewMode:"list",resultsBelowBuild:!0},g0=er({min:ta().finite().optional(),max:ta().finite().optional()}),RM=er({text:Sn().catch(za.text),categories:kn(Sn()).catch([]),types:kn(Sn()).catch([]),tiers:kn(Sn()).catch([]),classReqs:kn(ac(["Warrior","Assassin","Mage","Archer","Shaman"])).catch([]),majorIds:kn(Sn()).catch([]),numericRanges:Ki(Sn(),g0).catch({}),exclusionRanges:Ki(Sn(),g0).catch({}),onlyWearableAtLevel:ta().int().min(1).max(106).nullable().catch(106),onlyClassCompatible:Fi().catch(!1),excludeRestricted:Fi().catch(!1),sortKeys:kn(Sn()).catch(["relevance"]),sortDescending:Fi().catch(!0),viewMode:ac(DM).catch("list"),resultsBelowBuild:Fi().catch(!0)});function wb(e){const n=e,s=RM.parse(e),l=Array.isArray(s.sortKeys)&&s.sortKeys.length>0?s.sortKeys:typeof n?.sort=="string"?[n.sort]:["relevance"];return{text:s.text,categories:s.categories,types:s.types,tiers:s.tiers,classReqs:s.classReqs,majorIds:s.majorIds,numericRanges:s.numericRanges,exclusionRanges:s.exclusionRanges??{},onlyWearableAtLevel:s.onlyWearableAtLevel,onlyClassCompatible:s.onlyClassCompatible,excludeRestricted:s.excludeRestricted,sortKeys:l,sortDescending:s.sortDescending,viewMode:s.viewMode,resultsBelowBuild:!!s.resultsBelowBuild}}function CM(e){return!!(e.text.trim()!==""||e.categories.length>0||e.types.length>0||e.tiers.length>0||e.classReqs.length>0||e.majorIds.length>0||e.numericRanges&&Object.keys(e.numericRanges).length>0||e.exclusionRanges&&Object.keys(e.exclusionRanges).length>0)}function AM(e,n){return wb({...e,...n,numericRanges:n.numericRanges!==void 0?n.numericRanges:e.numericRanges,exclusionRanges:n.exclusionRanges!==void 0?n.exclusionRanges:e.exclusionRanges??{}})}const kM="ENTRIES",_b="KEYS",Eb="VALUES",Qt="";class Qd{constructor(n,s){const l=n._tree,r=Array.from(l.keys());this.set=n,this._type=s,this._path=r.length>0?[{node:l,keys:r}]:[]}next(){const n=this.dive();return this.backtrack(),n}dive(){if(this._path.length===0)return{done:!0,value:void 0};const{node:n,keys:s}=Dl(this._path);if(Dl(s)===Qt)return{done:!1,value:this.result()};const l=n.get(Dl(s));return this._path.push({node:l,keys:Array.from(l.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;const n=Dl(this._path).keys;n.pop(),!(n.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:n})=>Dl(n)).filter(n=>n!==Qt).join("")}value(){return Dl(this._path).node.get(Qt)}result(){switch(this._type){case Eb:return this.value();case _b:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const Dl=e=>e[e.length-1],zM=(e,n,s)=>{const l=new Map;if(n===void 0)return l;const r=n.length+1,c=r+s,u=new Uint8Array(c*r).fill(s+1);for(let f=0;f<r;++f)u[f]=f;for(let f=1;f<c;++f)u[f*r]=f;return Nb(e,n,s,l,u,1,r,""),l},Nb=(e,n,s,l,r,c,u,f)=>{const g=c*u;e:for(const p of e.keys())if(p===Qt){const y=r[g-1];y<=s&&l.set(f,[e.get(p),y])}else{let y=c;for(let v=0;v<p.length;++v,++y){const x=p[v],S=u*y,T=S-u;let w=r[S];const D=Math.max(0,y-s-1),C=Math.min(u-1,y+s);for(let B=D;B<C;++B){const z=x!==n[B],P=r[T+B]+ +z,I=r[T+B+1]+1,j=r[S+B]+1,N=r[S+B+1]=Math.min(P,I,j);N<w&&(w=N)}if(w>s)continue e}Nb(e.get(p),n,s,l,r,y,u,f+p)}};class us{constructor(n=new Map,s=""){this._size=void 0,this._tree=n,this._prefix=s}atPrefix(n){if(!n.startsWith(this._prefix))throw new Error("Mismatched prefix");const[s,l]=sc(this._tree,n.slice(this._prefix.length));if(s===void 0){const[r,c]=ph(l);for(const u of r.keys())if(u!==Qt&&u.startsWith(c)){const f=new Map;return f.set(u.slice(c.length),r.get(u)),new us(f,n)}}return new us(s,n)}clear(){this._size=void 0,this._tree.clear()}delete(n){return this._size=void 0,OM(this._tree,n)}entries(){return new Qd(this,kM)}forEach(n){for(const[s,l]of this)n(s,l,this)}fuzzyGet(n,s){return zM(this._tree,n,s)}get(n){const s=zf(this._tree,n);return s!==void 0?s.get(Qt):void 0}has(n){const s=zf(this._tree,n);return s!==void 0&&s.has(Qt)}keys(){return new Qd(this,_b)}set(n,s){if(typeof n!="string")throw new Error("key must be a string");return this._size=void 0,Jd(this._tree,n).set(Qt,s),this}get size(){if(this._size)return this._size;this._size=0;const n=this.entries();for(;!n.next().done;)this._size+=1;return this._size}update(n,s){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;const l=Jd(this._tree,n);return l.set(Qt,s(l.get(Qt))),this}fetch(n,s){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;const l=Jd(this._tree,n);let r=l.get(Qt);return r===void 0&&l.set(Qt,r=s()),r}values(){return new Qd(this,Eb)}[Symbol.iterator](){return this.entries()}static from(n){const s=new us;for(const[l,r]of n)s.set(l,r);return s}static fromObject(n){return us.from(Object.entries(n))}}const sc=(e,n,s=[])=>{if(n.length===0||e==null)return[e,s];for(const l of e.keys())if(l!==Qt&&n.startsWith(l))return s.push([e,l]),sc(e.get(l),n.slice(l.length),s);return s.push([e,n]),sc(void 0,"",s)},zf=(e,n)=>{if(n.length===0||e==null)return e;for(const s of e.keys())if(s!==Qt&&n.startsWith(s))return zf(e.get(s),n.slice(s.length))},Jd=(e,n)=>{const s=n.length;e:for(let l=0;e&&l<s;){for(const c of e.keys())if(c!==Qt&&n[l]===c[0]){const u=Math.min(s-l,c.length);let f=1;for(;f<u&&n[l+f]===c[f];)++f;const g=e.get(c);if(f===c.length)e=g;else{const p=new Map;p.set(c.slice(f),g),e.set(n.slice(l,l+f),p),e.delete(c),e=p}l+=f;continue e}const r=new Map;return e.set(n.slice(l),r),r}return e},OM=(e,n)=>{const[s,l]=sc(e,n);if(s!==void 0){if(s.delete(Qt),s.size===0)Tb(l);else if(s.size===1){const[r,c]=s.entries().next().value;jb(l,r,c)}}},Tb=e=>{if(e.length===0)return;const[n,s]=ph(e);if(n.delete(s),n.size===0)Tb(e.slice(0,-1));else if(n.size===1){const[l,r]=n.entries().next().value;l!==Qt&&jb(e.slice(0,-1),l,r)}},jb=(e,n,s)=>{if(e.length===0)return;const[l,r]=ph(e);l.set(r+n,s),l.delete(r)},ph=e=>e[e.length-1],vh="or",Mb="and",PM="and_not";class Ul{constructor(n){if(n?.fields==null)throw new Error('MiniSearch: option "fields" must be provided');const s=n.autoVacuum==null||n.autoVacuum===!0?nf:n.autoVacuum;this._options={...tf,...n,autoVacuum:s,searchOptions:{...p0,...n.searchOptions||{}},autoSuggestOptions:{...UM,...n.autoSuggestOptions||{}}},this._index=new us,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=Pf,this.addFields(this._options.fields)}add(n){const{extractField:s,stringifyField:l,tokenize:r,processTerm:c,fields:u,idField:f}=this._options,g=s(n,f);if(g==null)throw new Error(`MiniSearch: document does not have ID field "${f}"`);if(this._idToShortId.has(g))throw new Error(`MiniSearch: duplicate ID ${g}`);const p=this.addDocumentId(g);this.saveStoredFields(p,n);for(const y of u){const v=s(n,y);if(v==null)continue;const x=r(l(v,y),y),S=this._fieldIds[y],T=new Set(x).size;this.addFieldLength(p,S,this._documentCount-1,T);for(const w of x){const D=c(w,y);if(Array.isArray(D))for(const C of D)this.addTerm(S,p,C);else D&&this.addTerm(S,p,D)}}}addAll(n){for(const s of n)this.add(s)}addAllAsync(n,s={}){const{chunkSize:l=10}=s,r={chunk:[],promise:Promise.resolve()},{chunk:c,promise:u}=n.reduce(({chunk:f,promise:g},p,y)=>(f.push(p),(y+1)%l===0?{chunk:[],promise:g.then(()=>new Promise(v=>setTimeout(v,0))).then(()=>this.addAll(f))}:{chunk:f,promise:g}),r);return u.then(()=>this.addAll(c))}remove(n){const{tokenize:s,processTerm:l,extractField:r,stringifyField:c,fields:u,idField:f}=this._options,g=r(n,f);if(g==null)throw new Error(`MiniSearch: document does not have ID field "${f}"`);const p=this._idToShortId.get(g);if(p==null)throw new Error(`MiniSearch: cannot remove document with ID ${g}: it is not in the index`);for(const y of u){const v=r(n,y);if(v==null)continue;const x=s(c(v,y),y),S=this._fieldIds[y],T=new Set(x).size;this.removeFieldLength(p,S,this._documentCount,T);for(const w of x){const D=l(w,y);if(Array.isArray(D))for(const C of D)this.removeTerm(S,p,C);else D&&this.removeTerm(S,p,D)}}this._storedFields.delete(p),this._documentIds.delete(p),this._idToShortId.delete(g),this._fieldLength.delete(p),this._documentCount-=1}removeAll(n){if(n)for(const s of n)this.remove(s);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new us,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(n){const s=this._idToShortId.get(n);if(s==null)throw new Error(`MiniSearch: cannot discard document with ID ${n}: it is not in the index`);this._idToShortId.delete(n),this._documentIds.delete(s),this._storedFields.delete(s),(this._fieldLength.get(s)||[]).forEach((l,r)=>{this.removeFieldLength(s,r,this._documentCount,l)}),this._fieldLength.delete(s),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;const{minDirtFactor:n,minDirtCount:s,batchSize:l,batchWait:r}=this._options.autoVacuum;this.conditionalVacuum({batchSize:l,batchWait:r},{minDirtCount:s,minDirtFactor:n})}discardAll(n){const s=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const l of n)this.discard(l)}finally{this._options.autoVacuum=s}this.maybeAutoVacuum()}replace(n){const{idField:s,extractField:l}=this._options,r=l(n,s);this.discard(r),this.add(n)}vacuum(n={}){return this.conditionalVacuum(n)}conditionalVacuum(n,s){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&s,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{const l=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=Pf,this.performVacuuming(n,l)}),this._enqueuedVacuum)):this.vacuumConditionsMet(s)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(n),this._currentVacuum)}async performVacuuming(n,s){const l=this._dirtCount;if(this.vacuumConditionsMet(s)){const r=n.batchSize||Of.batchSize,c=n.batchWait||Of.batchWait;let u=1;for(const[f,g]of this._index){for(const[p,y]of g)for(const[v]of y)this._documentIds.has(v)||(y.size<=1?g.delete(p):y.delete(v));this._index.get(f).size===0&&this._index.delete(f),u%r===0&&await new Promise(p=>setTimeout(p,c)),u+=1}this._dirtCount-=l}await null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null}vacuumConditionsMet(n){if(n==null)return!0;let{minDirtCount:s,minDirtFactor:l}=n;return s=s||nf.minDirtCount,l=l||nf.minDirtFactor,this.dirtCount>=s&&this.dirtFactor>=l}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(n){return this._idToShortId.has(n)}getStoredFields(n){const s=this._idToShortId.get(n);if(s!=null)return this._storedFields.get(s)}search(n,s={}){const{searchOptions:l}=this._options,r={...l,...s},c=this.executeQuery(n,s),u=[];for(const[f,{score:g,terms:p,match:y}]of c){const v=p.length||1,x={id:this._documentIds.get(f),score:g*v,terms:Object.keys(y),queryTerms:p,match:y};Object.assign(x,this._storedFields.get(f)),(r.filter==null||r.filter(x))&&u.push(x)}return n===Ul.wildcard&&r.boostDocument==null||u.sort(y0),u}autoSuggest(n,s={}){s={...this._options.autoSuggestOptions,...s};const l=new Map;for(const{score:c,terms:u}of this.search(n,s)){const f=u.join(" "),g=l.get(f);g!=null?(g.score+=c,g.count+=1):l.set(f,{score:c,terms:u,count:1})}const r=[];for(const[c,{score:u,terms:f,count:g}]of l)r.push({suggestion:c,terms:f,score:u/g});return r.sort(y0),r}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(n,s){if(s==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(n),s)}static async loadJSONAsync(n,s){if(s==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(n),s)}static getDefault(n){if(tf.hasOwnProperty(n))return ef(tf,n);throw new Error(`MiniSearch: unknown option "${n}"`)}static loadJS(n,s){const{index:l,documentIds:r,fieldLength:c,storedFields:u,serializationVersion:f}=n,g=this.instantiateMiniSearch(n,s);g._documentIds=To(r),g._fieldLength=To(c),g._storedFields=To(u);for(const[p,y]of g._documentIds)g._idToShortId.set(y,p);for(const[p,y]of l){const v=new Map;for(const x of Object.keys(y)){let S=y[x];f===1&&(S=S.ds),v.set(parseInt(x,10),To(S))}g._index.set(p,v)}return g}static async loadJSAsync(n,s){const{index:l,documentIds:r,fieldLength:c,storedFields:u,serializationVersion:f}=n,g=this.instantiateMiniSearch(n,s);g._documentIds=await jo(r),g._fieldLength=await jo(c),g._storedFields=await jo(u);for(const[y,v]of g._documentIds)g._idToShortId.set(v,y);let p=0;for(const[y,v]of l){const x=new Map;for(const S of Object.keys(v)){let T=v[S];f===1&&(T=T.ds),x.set(parseInt(S,10),await jo(T))}++p%1e3===0&&await Db(0),g._index.set(y,x)}return g}static instantiateMiniSearch(n,s){const{documentCount:l,nextId:r,fieldIds:c,averageFieldLength:u,dirtCount:f,serializationVersion:g}=n;if(g!==1&&g!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const p=new Ul(s);return p._documentCount=l,p._nextId=r,p._idToShortId=new Map,p._fieldIds=c,p._avgFieldLength=u,p._dirtCount=f||0,p._index=new us,p}executeQuery(n,s={}){if(n===Ul.wildcard)return this.executeWildcardQuery(s);if(typeof n!="string"){const x={...s,...n,queries:void 0},S=n.queries.map(T=>this.executeQuery(T,x));return this.combineResults(S,x.combineWith)}const{tokenize:l,processTerm:r,searchOptions:c}=this._options,u={tokenize:l,processTerm:r,...c,...s},{tokenize:f,processTerm:g}=u,v=f(n).flatMap(x=>g(x)).filter(x=>!!x).map(qM(u)).map(x=>this.executeQuerySpec(x,u));return this.combineResults(v,u.combineWith)}executeQuerySpec(n,s){const l={...this._options.searchOptions,...s},r=(l.fields||this._options.fields).reduce((w,D)=>({...w,[D]:ef(l.boost,D)||1}),{}),{boostDocument:c,weights:u,maxFuzzy:f,bm25:g}=l,{fuzzy:p,prefix:y}={...p0.weights,...u},v=this._index.get(n.term),x=this.termResults(n.term,n.term,1,n.termBoost,v,r,c,g);let S,T;if(n.prefix&&(S=this._index.atPrefix(n.term)),n.fuzzy){const w=n.fuzzy===!0?.2:n.fuzzy,D=w<1?Math.min(f,Math.round(n.term.length*w)):w;D&&(T=this._index.fuzzyGet(n.term,D))}if(S)for(const[w,D]of S){const C=w.length-n.term.length;if(!C)continue;T?.delete(w);const B=y*w.length/(w.length+.3*C);this.termResults(n.term,w,B,n.termBoost,D,r,c,g,x)}if(T)for(const w of T.keys()){const[D,C]=T.get(w);if(!C)continue;const B=p*w.length/(w.length+C);this.termResults(n.term,w,B,n.termBoost,D,r,c,g,x)}return x}executeWildcardQuery(n){const s=new Map,l={...this._options.searchOptions,...n};for(const[r,c]of this._documentIds){const u=l.boostDocument?l.boostDocument(c,"",this._storedFields.get(r)):1;s.set(r,{score:u,terms:[],match:{}})}return s}combineResults(n,s=vh){if(n.length===0)return new Map;const l=s.toLowerCase(),r=BM[l];if(!r)throw new Error(`Invalid combination operator: ${s}`);return n.reduce(r)||new Map}toJSON(){const n=[];for(const[s,l]of this._index){const r={};for(const[c,u]of l)r[c]=Object.fromEntries(u);n.push([s,r])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:n,serializationVersion:2}}termResults(n,s,l,r,c,u,f,g,p=new Map){if(c==null)return p;for(const y of Object.keys(u)){const v=u[y],x=this._fieldIds[y],S=c.get(x);if(S==null)continue;let T=S.size;const w=this._avgFieldLength[x];for(const D of S.keys()){if(!this._documentIds.has(D)){this.removeTerm(x,D,s),T-=1;continue}const C=f?f(this._documentIds.get(D),s,this._storedFields.get(D)):1;if(!C)continue;const B=S.get(D),z=this._fieldLength.get(D)[x],P=LM(B,T,this._documentCount,z,w,g),I=l*r*v*C*P,j=p.get(D);if(j){j.score+=I,HM(j.terms,n);const N=ef(j.match,s);N?N.push(y):j.match[s]=[y]}else p.set(D,{score:I,terms:[n],match:{[s]:[y]}})}}return p}addTerm(n,s,l){const r=this._index.fetch(l,b0);let c=r.get(n);if(c==null)c=new Map,c.set(s,1),r.set(n,c);else{const u=c.get(s);c.set(s,(u||0)+1)}}removeTerm(n,s,l){if(!this._index.has(l)){this.warnDocumentChanged(s,n,l);return}const r=this._index.fetch(l,b0),c=r.get(n);c==null||c.get(s)==null?this.warnDocumentChanged(s,n,l):c.get(s)<=1?c.size<=1?r.delete(n):c.delete(s):c.set(s,c.get(s)-1),this._index.get(l).size===0&&this._index.delete(l)}warnDocumentChanged(n,s,l){for(const r of Object.keys(this._fieldIds))if(this._fieldIds[r]===s){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(n)} has changed before removal: term "${l}" was not present in field "${r}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(n){const s=this._nextId;return this._idToShortId.set(n,s),this._documentIds.set(s,n),this._documentCount+=1,this._nextId+=1,s}addFields(n){for(let s=0;s<n.length;s++)this._fieldIds[n[s]]=s}addFieldLength(n,s,l,r){let c=this._fieldLength.get(n);c==null&&this._fieldLength.set(n,c=[]),c[s]=r;const f=(this._avgFieldLength[s]||0)*l+r;this._avgFieldLength[s]=f/(l+1)}removeFieldLength(n,s,l,r){if(l===1){this._avgFieldLength[s]=0;return}const c=this._avgFieldLength[s]*l-r;this._avgFieldLength[s]=c/(l-1)}saveStoredFields(n,s){const{storeFields:l,extractField:r}=this._options;if(l==null||l.length===0)return;let c=this._storedFields.get(n);c==null&&this._storedFields.set(n,c={});for(const u of l){const f=r(s,u);f!==void 0&&(c[u]=f)}}}Ul.wildcard=Symbol("*");const ef=(e,n)=>Object.prototype.hasOwnProperty.call(e,n)?e[n]:void 0,BM={[vh]:(e,n)=>{for(const s of n.keys()){const l=e.get(s);if(l==null)e.set(s,n.get(s));else{const{score:r,terms:c,match:u}=n.get(s);l.score=l.score+r,l.match=Object.assign(l.match,u),v0(l.terms,c)}}return e},[Mb]:(e,n)=>{const s=new Map;for(const l of n.keys()){const r=e.get(l);if(r==null)continue;const{score:c,terms:u,match:f}=n.get(l);v0(r.terms,u),s.set(l,{score:r.score+c,terms:r.terms,match:Object.assign(r.match,f)})}return s},[PM]:(e,n)=>{for(const s of n.keys())e.delete(s);return e}},IM={k:1.2,b:.7,d:.5},LM=(e,n,s,l,r,c)=>{const{k:u,b:f,d:g}=c;return Math.log(1+(s-n+.5)/(n+.5))*(g+e*(u+1)/(e+u*(1-f+f*l/r)))},qM=e=>(n,s,l)=>{const r=typeof e.fuzzy=="function"?e.fuzzy(n,s,l):e.fuzzy||!1,c=typeof e.prefix=="function"?e.prefix(n,s,l):e.prefix===!0,u=typeof e.boostTerm=="function"?e.boostTerm(n,s,l):1;return{term:n,fuzzy:r,prefix:c,termBoost:u}},tf={idField:"id",extractField:(e,n)=>e[n],stringifyField:(e,n)=>e.toString(),tokenize:e=>e.split($M),processTerm:e=>e.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(e,n)=>{typeof console?.[e]=="function"&&console[e](n)},autoVacuum:!0},p0={combineWith:vh,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:IM},UM={combineWith:Mb,prefix:(e,n,s)=>n===s.length-1},Of={batchSize:1e3,batchWait:10},Pf={minDirtFactor:.1,minDirtCount:20},nf={...Of,...Pf},HM=(e,n)=>{e.includes(n)||e.push(n)},v0=(e,n)=>{for(const s of n)e.includes(s)||e.push(s)},y0=({score:e},{score:n})=>n-e,b0=()=>new Map,To=e=>{const n=new Map;for(const s of Object.keys(e))n.set(parseInt(s,10),e[s]);return n},jo=async e=>{const n=new Map;let s=0;for(const l of Object.keys(e))n.set(parseInt(l,10),e[l]),++s%1e3===0&&await Db(0);return n},Db=e=>new Promise(n=>setTimeout(n,e)),$M=/[\n\r\p{Z}\p{P}]+/u;function Rb(e,n){return n==="level"?e.level:n==="powderSlots"||n==="slots"?e.powderSlots:n==="baseDps"?e.roughScoreFields.baseDps:e.numericIndex[n]??0}function ZM(e,n){return n.length===0||n.includes(e.category)}function x0(e,n){return n.length===0?!0:e?n.includes(e):!1}function FM(e,n){for(const[s,l]of Object.entries(n.numericRanges)){if(!l)continue;const r=Rb(e,s);if(typeof l.min=="number"&&r<l.min||typeof l.max=="number"&&r>l.max)return!1}return!0}function YM(e,n){for(const[s,l]of Object.entries(n.exclusionRanges??{})){if(!l)continue;const r=Rb(e,s);if(typeof l.max=="number"&&r>l.max||typeof l.min=="number"&&r<l.min)return!1}return!0}function GM(e,n){if(n.excludeRestricted&&(e.restricted||e.deprecated)||n.onlyWearableAtLevel!==null&&!LE(e,n.onlyWearableAtLevel))return!1;if(n.onlyClassCompatible){const s=n.classReqs[0]??null;if(!Fy(e,s))return!1}return!0}function VM(e,n){return n.length===0?!0:e.majorIds.length===0?!1:n.every(s=>e.majorIds.includes(s))}function KM(e,n){return!(!ZM(e,n.categories)||!x0(e.type,n.types)||!x0(e.tier,n.tiers)||n.classReqs.length>0&&(e.classReq===null||!n.classReqs.includes(e.classReq))||!VM(e,n.majorIds)||!FM(e,n)||!YM(e,n)||!GM(e,n))}function S0(e,n){return n==="relevance"?0:n==="level"?e.level:n==="powderSlots"||n==="slots"?e.powderSlots:n==="baseDps"?e.roughScoreFields.baseDps:e.numericIndex[n]??0}function WM(e,n,s){const l=n.trim().toLowerCase();if(!l)return 0;const r=e.displayName.toLowerCase();return r===l?s+5e3:r.startsWith(l)?s+3e3:r.includes(l)?s+1200:e.searchText.includes(l)?s+300:s}function XM(e,n,s){const l=s.sortDescending?-1:1,r=s.sortKeys?.length?s.sortKeys:["relevance"];for(const c of r)if(c==="relevance"){if(e.relevance!==n.relevance)return(e.relevance>n.relevance?-1:1)*(s.sortDescending?1:-1)}else{const u=S0(e.item,c),f=S0(n.item,c);if(u!==f)return u<f?-l:l}return e.item.displayName.localeCompare(n.item.displayName)}function QM(){return{categories:{},types:{},tiers:{},majorIds:{}}}function af(e,n){n&&(e[n]=(e[n]??0)+1)}class JM{miniSearch;itemsById;allItems;constructor(n){this.allItems=n,this.itemsById=new Map(n.map(s=>[s.id,s])),this.miniSearch=new Ul({fields:["displayName","searchText","majorIdsText"],storeFields:["id"],idField:"id",searchOptions:{boost:{displayName:6,searchText:2,majorIdsText:2},prefix:!0,fuzzy:.2,combineWith:"OR"}}),this.miniSearch.addAll(n.map(s=>({id:s.id,displayName:s.displayName,searchText:s.searchText,majorIdsText:s.majorIdsText})))}search(n){const s=n.text.trim(),l=s?this.miniSearch.search(s,{prefix:!0,fuzzy:.2,boost:{displayName:8,searchText:2,majorIdsText:2}}):[],r=new Map;for(const p of l){const y=this.itemsById.get(p.id);y&&r.set(y.id,WM(y,s,Number(p.score??0)))}const c=s?[...this.allItems]:this.allItems,u=[],f=QM();for(const p of c){const y=r.get(p.id)??0;if(!(s&&y===0&&!p.searchText.includes(s.toLowerCase()))&&KM(p,n)){u.push({item:p,relevance:y}),f.categories[p.category]=(f.categories[p.category]??0)+1,af(f.types,p.type),af(f.tiers,p.tier);for(const v of p.majorIds)af(f.majorIds,v)}}u.sort((p,y)=>XM(p,y,n));const g=u.map(({item:p,relevance:y})=>({id:p.id,relevance:y}));return{total:g.length,rows:g,facetCounts:f}}}class eD{worker=null;fallbackEngine=null;requestId=0;pending=new Map;initialized=!1;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL(""+new URL("search-worker-Dray3ejl.js",import.meta.url).href,import.meta.url),{type:"module"}),this.worker.onmessage=n=>{const s=n.data,l=this.pending.get(s.requestId);l&&(this.pending.delete(s.requestId),s.type==="error"?l.reject(new Error(s.message)):s.type==="ready"?l.resolve(void 0):l.resolve(s.result))},this.worker.onerror=n=>{console.error(n),this.worker?.terminate(),this.worker=null})}async init(n){if(!this.initialized){if(this.worker){await this.send({type:"init",items:n}),this.initialized=!0;return}this.fallbackEngine=new JM(n),this.initialized=!0}}async search(n){if(!this.initialized)throw new Error("SearchWorkerClient.init() must be called before search()");if(this.worker)return this.send({type:"search",state:n});if(!this.fallbackEngine)throw new Error("Fallback search engine unavailable");return this.fallbackEngine.search(n)}dispose(){this.worker?.terminate(),this.worker=null,this.fallbackEngine=null,this.pending.clear()}send(n){if(!this.worker)return Promise.reject(new Error("Search worker unavailable"));const s=++this.requestId;return new Promise((l,r)=>{this.pending.set(s,{resolve:l,reject:r}),this.worker.postMessage({...n,requestId:s})})}}function Rl(e,n,s){let l=s.initialDeps??[],r,c=!0;function u(){var f,g,p;let y;s.key&&((f=s.debug)!=null&&f.call(s))&&(y=Date.now());const v=e();if(!(v.length!==l.length||v.some((T,w)=>l[w]!==T)))return r;l=v;let S;if(s.key&&((g=s.debug)!=null&&g.call(s))&&(S=Date.now()),r=n(...v),s.key&&((p=s.debug)!=null&&p.call(s))){const T=Math.round((Date.now()-y)*100)/100,w=Math.round((Date.now()-S)*100)/100,D=w/16,C=(B,z)=>{for(B=String(B);B.length<z;)B=" "+B;return B};console.info(`%c ${C(w,5)} /${C(T,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*D,120))}deg 100% 31%);`,s?.key)}return s?.onChange&&!(c&&s.skipInitialOnChange)&&s.onChange(r),c=!1,r}return u.updateDeps=f=>{l=f},u}function w0(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const tD=(e,n)=>Math.abs(e-n)<1.01,nD=(e,n,s)=>{let l;return function(...r){e.clearTimeout(l),l=e.setTimeout(()=>n.apply(this,r),s)}},_0=e=>{const{offsetWidth:n,offsetHeight:s}=e;return{width:n,height:s}},aD=e=>e,sD=e=>{const n=Math.max(e.startIndex-e.overscan,0),s=Math.min(e.endIndex+e.overscan,e.count-1),l=[];for(let r=n;r<=s;r++)l.push(r);return l},lD=(e,n)=>{const s=e.scrollElement;if(!s)return;const l=e.targetWindow;if(!l)return;const r=u=>{const{width:f,height:g}=u;n({width:Math.round(f),height:Math.round(g)})};if(r(_0(s)),!l.ResizeObserver)return()=>{};const c=new l.ResizeObserver(u=>{const f=()=>{const g=u[0];if(g?.borderBoxSize){const p=g.borderBoxSize[0];if(p){r({width:p.inlineSize,height:p.blockSize});return}}r(_0(s))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(f):f()});return c.observe(s,{box:"border-box"}),()=>{c.unobserve(s)}},E0={passive:!0},N0=typeof window>"u"?!0:"onscrollend"in window,iD=(e,n)=>{const s=e.scrollElement;if(!s)return;const l=e.targetWindow;if(!l)return;let r=0;const c=e.options.useScrollendEvent&&N0?()=>{}:nD(l,()=>{n(r,!1)},e.options.isScrollingResetDelay),u=y=>()=>{const{horizontal:v,isRtl:x}=e.options;r=v?s.scrollLeft*(x&&-1||1):s.scrollTop,c(),n(r,y)},f=u(!0),g=u(!1);s.addEventListener("scroll",f,E0);const p=e.options.useScrollendEvent&&N0;return p&&s.addEventListener("scrollend",g,E0),()=>{s.removeEventListener("scroll",f),p&&s.removeEventListener("scrollend",g)}},rD=(e,n,s)=>{if(n?.borderBoxSize){const l=n.borderBoxSize[0];if(l)return Math.round(l[s.options.horizontal?"inlineSize":"blockSize"])}return e[s.options.horizontal?"offsetWidth":"offsetHeight"]},oD=(e,{adjustments:n=0,behavior:s},l)=>{var r,c;const u=e+n;(c=(r=l.scrollElement)==null?void 0:r.scrollTo)==null||c.call(r,{[l.options.horizontal?"left":"top"]:u,behavior:s})};class cD{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let s=null;const l=()=>s||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:s=new this.targetWindow.ResizeObserver(r=>{r.forEach(c=>{const u=()=>{this._measureElement(c.target,c)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(u):u()})}));return{disconnect:()=>{var r;(r=l())==null||r.disconnect(),s=null},observe:r=>{var c;return(c=l())==null?void 0:c.observe(r,{box:"border-box"})},unobserve:r=>{var c;return(c=l())==null?void 0:c.unobserve(r)}}})(),this.range=null,this.setOptions=s=>{Object.entries(s).forEach(([l,r])=>{typeof r>"u"&&delete s[l]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:aD,rangeExtractor:sD,onChange:()=>{},measureElement:rD,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...s}},this.notify=s=>{var l,r;(r=(l=this.options).onChange)==null||r.call(l,this,s)},this.maybeNotify=Rl(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),s=>{this.notify(s)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(s=>s()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var s;const l=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==l){if(this.cleanup(),!l){this.maybeNotify();return}this.scrollElement=l,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((s=this.scrollElement)==null?void 0:s.window)??null,this.elementsCache.forEach(r=>{this.observer.observe(r)}),this.unsubs.push(this.options.observeElementRect(this,r=>{this.scrollRect=r,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(r,c)=>{this.scrollAdjustments=0,this.scrollDirection=c?this.getScrollOffset()<r?"forward":"backward":null,this.scrollOffset=r,this.isScrolling=c,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(s,l)=>{const r=new Map,c=new Map;for(let u=l-1;u>=0;u--){const f=s[u];if(r.has(f.lane))continue;const g=c.get(f.lane);if(g==null||f.end>g.end?c.set(f.lane,f):f.end<g.end&&r.set(f.lane,!0),r.size===this.options.lanes)break}return c.size===this.options.lanes?Array.from(c.values()).sort((u,f)=>u.end===f.end?u.index-f.index:u.end-f.end)[0]:void 0},this.getMeasurementOptions=Rl(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(s,l,r,c,u,f)=>(this.prevLanes!==void 0&&this.prevLanes!==f&&(this.lanesChangedFlag=!0),this.prevLanes=f,this.pendingMeasuredCacheIndexes=[],{count:s,paddingStart:l,scrollMargin:r,getItemKey:c,enabled:u,lanes:f}),{key:!1}),this.getMeasurements=Rl(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:s,paddingStart:l,scrollMargin:r,getItemKey:c,enabled:u,lanes:f},g)=>{if(!u)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>s)for(const x of this.laneAssignments.keys())x>=s&&this.laneAssignments.delete(x);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(x=>{this.itemSizeCache.set(x.key,x.size)}));const p=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===s&&(this.lanesSettling=!1);const y=this.measurementsCache.slice(0,p),v=new Array(f).fill(void 0);for(let x=0;x<p;x++){const S=y[x];S&&(v[S.lane]=x)}for(let x=p;x<s;x++){const S=c(x),T=this.laneAssignments.get(x);let w,D;if(T!==void 0&&this.options.lanes>1){w=T;const P=v[w],I=P!==void 0?y[P]:void 0;D=I?I.end+this.options.gap:l+r}else{const P=this.options.lanes===1?y[x-1]:this.getFurthestMeasurement(y,x);D=P?P.end+this.options.gap:l+r,w=P?P.lane:x%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(x,w)}const C=g.get(S),B=typeof C=="number"?C:this.options.estimateSize(x),z=D+B;y[x]={index:x,start:D,size:B,end:z,key:S,lane:w},v[w]=x}return this.measurementsCache=y,y},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Rl(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(s,l,r,c)=>this.range=s.length>0&&l>0?uD({measurements:s,outerSize:l,scrollOffset:r,lanes:c}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Rl(()=>{let s=null,l=null;const r=this.calculateRange();return r&&(s=r.startIndex,l=r.endIndex),this.maybeNotify.updateDeps([this.isScrolling,s,l]),[this.options.rangeExtractor,this.options.overscan,this.options.count,s,l]},(s,l,r,c,u)=>c===null||u===null?[]:s({startIndex:c,endIndex:u,overscan:l,count:r}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=s=>{const l=this.options.indexAttribute,r=s.getAttribute(l);return r?parseInt(r,10):(console.warn(`Missing attribute name '${l}={index}' on measured element.`),-1)},this._measureElement=(s,l)=>{const r=this.indexFromElement(s),c=this.measurementsCache[r];if(!c)return;const u=c.key,f=this.elementsCache.get(u);f!==s&&(f&&this.observer.unobserve(f),this.observer.observe(s),this.elementsCache.set(u,s)),s.isConnected&&this.resizeItem(r,this.options.measureElement(s,l,this))},this.resizeItem=(s,l)=>{const r=this.measurementsCache[s];if(!r)return;const c=this.itemSizeCache.get(r.key)??r.size,u=l-c;u!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(r,u,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=u,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,l)),this.notify(!1))},this.measureElement=s=>{if(!s){this.elementsCache.forEach((l,r)=>{l.isConnected||(this.observer.unobserve(l),this.elementsCache.delete(r))});return}this._measureElement(s,void 0)},this.getVirtualItems=Rl(()=>[this.getVirtualIndexes(),this.getMeasurements()],(s,l)=>{const r=[];for(let c=0,u=s.length;c<u;c++){const f=s[c],g=l[f];r.push(g)}return r},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=s=>{const l=this.getMeasurements();if(l.length!==0)return w0(l[Cb(0,l.length-1,r=>w0(l[r]).start,s)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const s=this.scrollElement.document.documentElement;return this.options.horizontal?s.scrollWidth-this.scrollElement.innerWidth:s.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(s,l,r=0)=>{if(!this.scrollElement)return 0;const c=this.getSize(),u=this.getScrollOffset();l==="auto"&&(l=s>=u+c?"end":"start"),l==="center"?s+=(r-c)/2:l==="end"&&(s-=c);const f=this.getMaxScrollOffset();return Math.max(Math.min(f,s),0)},this.getOffsetForIndex=(s,l="auto")=>{s=Math.max(0,Math.min(s,this.options.count-1));const r=this.measurementsCache[s];if(!r)return;const c=this.getSize(),u=this.getScrollOffset();if(l==="auto")if(r.end>=u+c-this.options.scrollPaddingEnd)l="end";else if(r.start<=u+this.options.scrollPaddingStart)l="start";else return[u,l];if(l==="end"&&s===this.options.count-1)return[this.getMaxScrollOffset(),l];const f=l==="end"?r.end+this.options.scrollPaddingEnd:r.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(f,l,r.size),l]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(s,{align:l="start",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(s,l),{adjustments:void 0,behavior:r})},this.scrollToIndex=(s,{align:l="auto",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),s=Math.max(0,Math.min(s,this.options.count-1)),this.currentScrollToIndex=s;let c=0;const u=10,f=p=>{if(!this.targetWindow)return;const y=this.getOffsetForIndex(s,p);if(!y){console.warn("Failed to get offset for index:",s);return}const[v,x]=y;this._scrollToOffset(v,{adjustments:void 0,behavior:r}),this.targetWindow.requestAnimationFrame(()=>{const S=()=>{if(this.currentScrollToIndex!==s)return;const T=this.getScrollOffset(),w=this.getOffsetForIndex(s,x);if(!w){console.warn("Failed to get offset for index:",s);return}tD(w[0],T)||g(x)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(S):S()})},g=p=>{this.targetWindow&&this.currentScrollToIndex===s&&(c++,c<u?this.targetWindow.requestAnimationFrame(()=>f(p)):console.warn(`Failed to scroll to index ${s} after ${u} attempts.`))};f(l)},this.scrollBy=(s,{behavior:l}={})=>{l==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+s,{adjustments:void 0,behavior:l})},this.getTotalSize=()=>{var s;const l=this.getMeasurements();let r;if(l.length===0)r=this.options.paddingStart;else if(this.options.lanes===1)r=((s=l[l.length-1])==null?void 0:s.end)??0;else{const c=Array(this.options.lanes).fill(null);let u=l.length-1;for(;u>=0&&c.some(f=>f===null);){const f=l[u];c[f.lane]===null&&(c[f.lane]=f.end),u--}r=Math.max(...c.filter(f=>f!==null))}return Math.max(r-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(s,{adjustments:l,behavior:r})=>{this.options.scrollToFn(s,{behavior:r,adjustments:l},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(n)}}const Cb=(e,n,s,l)=>{for(;e<=n;){const r=(e+n)/2|0,c=s(r);if(c<l)e=r+1;else if(c>l)n=r-1;else return r}return e>0?e-1:0};function uD({measurements:e,outerSize:n,scrollOffset:s,lanes:l}){const r=e.length-1,c=g=>e[g].start;if(e.length<=l)return{startIndex:0,endIndex:r};let u=Cb(0,r,c,s),f=u;if(l===1)for(;f<r&&e[f].end<s+n;)f++;else if(l>1){const g=Array(l).fill(0);for(;f<r&&g.some(y=>y<s+n);){const y=e[f];g[y.lane]=y.end,f++}const p=Array(l).fill(s+n);for(;u>=0&&p.some(y=>y>=s);){const y=e[u];p[y.lane]=y.start,u--}u=Math.max(0,u-u%l),f=Math.min(r,f+(l-1-f%l))}return{startIndex:u,endIndex:f}}const T0=typeof document<"u"?_.useLayoutEffect:_.useEffect;function dD({useFlushSync:e=!0,...n}){const s=_.useReducer(()=>({}),{})[1],l={...n,onChange:(c,u)=>{var f;e&&u?Pa.flushSync(s):s(),(f=n.onChange)==null||f.call(n,c,u)}},[r]=_.useState(()=>new cD(l));return r.setOptions(l),T0(()=>r._didMount(),[]),T0(()=>r._willUpdate()),r}function fD(e){return dD({observeElementRect:lD,observeElementOffset:iD,scrollToFn:oD,...e})}const hD={relevance:"Relevance",level:"Combat Level",baseDps:"Base DPS",slots:"Powder Slots",hp:"Health",hpBonus:"Health Bonus",hprRaw:"Raw Health Regen",hprPct:"Health Regen %",mr:"Mana Regen",ms:"Mana Steal",ls:"Life Steal",sdPct:"Spell Damage %",sdRaw:"Spell Damage Raw",mdPct:"Melee Damage %",mdRaw:"Melee Damage Raw",poison:"Poison",spd:"Walk Speed Bonus",atkTier:"Attack Speed Bonus",averageDps:"Average DPS",str:"Strength",dex:"Dexterity",int:"Intelligence",def:"Defense",agi:"Agility",strReq:"Strength Min",dexReq:"Dexterity Min",intReq:"Intelligence Min",defReq:"Defense Min",agiReq:"Agility Min",eDef:"Earth Defense",tDef:"Thunder Defense",wDef:"Water Defense",fDef:"Fire Defense",aDef:"Air Defense",eDamPct:"Earth Damage %",tDamPct:"Thunder Damage %",wDamPct:"Water Damage %",fDamPct:"Fire Damage %",aDamPct:"Air Damage %",damPct:"Damage %",rDamPct:"Elemental Damage %",nDamPct:"Neutral Damage %",lvl:"Combat Level",reqTotal:"Req Total",skillPointTotal:"Skill Point Total",offenseScore:"Offense Score",ehpProxy:"EHP Proxy",utilityScore:"Utility Score",spPct1:"1st Spell Cost %",spRaw1:"1st Spell Cost Raw",spPct2:"2nd Spell Cost %",spRaw2:"2nd Spell Cost Raw",spPct3:"3rd Spell Cost %",spRaw3:"3rd Spell Cost Raw",spPct4:"4th Spell Cost %",spRaw4:"4th Spell Cost Raw",sumSpPct:"Sum Spell Cost %",sumSpRaw:"Sum Spell Cost Raw"};function zt(e){return hD[e]??e}function ds(e,n,{checkForDefaultPrevented:s=!0}={}){return function(r){if(e?.(r),s===!1||!r.defaultPrevented)return n?.(r)}}function j0(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function Ab(...e){return n=>{let s=!1;const l=e.map(r=>{const c=j0(r,n);return!s&&typeof c=="function"&&(s=!0),c});if(s)return()=>{for(let r=0;r<l.length;r++){const c=l[r];typeof c=="function"?c():j0(e[r],null)}}}}function Zs(...e){return _.useCallback(Ab(...e),e)}function mD(e,n){const s=_.createContext(n),l=c=>{const{children:u,...f}=c,g=_.useMemo(()=>f,Object.values(f));return m.jsx(s.Provider,{value:g,children:u})};l.displayName=e+"Provider";function r(c){const u=_.useContext(s);if(u)return u;if(n!==void 0)return n;throw new Error(`\`${c}\` must be used within \`${e}\``)}return[l,r]}function gD(e,n=[]){let s=[];function l(c,u){const f=_.createContext(u),g=s.length;s=[...s,u];const p=v=>{const{scope:x,children:S,...T}=v,w=x?.[e]?.[g]||f,D=_.useMemo(()=>T,Object.values(T));return m.jsx(w.Provider,{value:D,children:S})};p.displayName=c+"Provider";function y(v,x){const S=x?.[e]?.[g]||f,T=_.useContext(S);if(T)return T;if(u!==void 0)return u;throw new Error(`\`${v}\` must be used within \`${c}\``)}return[p,y]}const r=()=>{const c=s.map(u=>_.createContext(u));return function(f){const g=f?.[e]||c;return _.useMemo(()=>({[`__scope${e}`]:{...f,[e]:g}}),[f,g])}};return r.scopeName=e,[l,pD(r,...n)]}function pD(...e){const n=e[0];if(e.length===1)return n;const s=()=>{const l=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(c){const u=l.reduce((f,{useScope:g,scopeName:p})=>{const v=g(c)[`__scope${p}`];return{...f,...v}},{});return _.useMemo(()=>({[`__scope${n.scopeName}`]:u}),[u])}};return s.scopeName=n.scopeName,s}var tr=globalThis?.document?_.useLayoutEffect:()=>{},vD=vy[" useId ".trim().toString()]||(()=>{}),yD=0;function sf(e){const[n,s]=_.useState(vD());return tr(()=>{s(l=>l??String(yD++))},[e]),e||(n?`radix-${n}`:"")}var bD=vy[" useInsertionEffect ".trim().toString()]||tr;function xD({prop:e,defaultProp:n,onChange:s=()=>{},caller:l}){const[r,c,u]=SD({defaultProp:n,onChange:s}),f=e!==void 0,g=f?e:r;{const y=_.useRef(e!==void 0);_.useEffect(()=>{const v=y.current;v!==f&&console.warn(`${l} is changing from ${v?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),y.current=f},[f,l])}const p=_.useCallback(y=>{if(f){const v=wD(y)?y(e):y;v!==e&&u.current?.(v)}else c(y)},[f,e,c,u]);return[g,p]}function SD({defaultProp:e,onChange:n}){const[s,l]=_.useState(e),r=_.useRef(s),c=_.useRef(n);return bD(()=>{c.current=n},[n]),_.useEffect(()=>{r.current!==s&&(c.current?.(s),r.current=s)},[s,r]),[s,l,c]}function wD(e){return typeof e=="function"}function kb(e){const n=_D(e),s=_.forwardRef((l,r)=>{const{children:c,...u}=l,f=_.Children.toArray(c),g=f.find(ND);if(g){const p=g.props.children,y=f.map(v=>v===g?_.Children.count(p)>1?_.Children.only(null):_.isValidElement(p)?p.props.children:null:v);return m.jsx(n,{...u,ref:r,children:_.isValidElement(p)?_.cloneElement(p,void 0,y):null})}return m.jsx(n,{...u,ref:r,children:c})});return s.displayName=`${e}.Slot`,s}function _D(e){const n=_.forwardRef((s,l)=>{const{children:r,...c}=s;if(_.isValidElement(r)){const u=jD(r),f=TD(c,r.props);return r.type!==_.Fragment&&(f.ref=l?Ab(l,u):u),_.cloneElement(r,f)}return _.Children.count(r)>1?_.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var ED=Symbol("radix.slottable");function ND(e){return _.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===ED}function TD(e,n){const s={...n};for(const l in n){const r=e[l],c=n[l];/^on[A-Z]/.test(l)?r&&c?s[l]=(...f)=>{const g=c(...f);return r(...f),g}:r&&(s[l]=r):l==="style"?s[l]={...r,...c}:l==="className"&&(s[l]=[r,c].filter(Boolean).join(" "))}return{...e,...s}}function jD(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var MD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ia=MD.reduce((e,n)=>{const s=kb(`Primitive.${n}`),l=_.forwardRef((r,c)=>{const{asChild:u,...f}=r,g=u?s:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(g,{...f,ref:c})});return l.displayName=`Primitive.${n}`,{...e,[n]:l}},{});function DD(e,n){e&&Pa.flushSync(()=>e.dispatchEvent(n))}function nr(e){const n=_.useRef(e);return _.useEffect(()=>{n.current=e}),_.useMemo(()=>(...s)=>n.current?.(...s),[])}function RD(e,n=globalThis?.document){const s=nr(e);_.useEffect(()=>{const l=r=>{r.key==="Escape"&&s(r)};return n.addEventListener("keydown",l,{capture:!0}),()=>n.removeEventListener("keydown",l,{capture:!0})},[s,n])}var CD="DismissableLayer",Bf="dismissableLayer.update",AD="dismissableLayer.pointerDownOutside",kD="dismissableLayer.focusOutside",M0,zb=_.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ob=_.forwardRef((e,n)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:l,onPointerDownOutside:r,onFocusOutside:c,onInteractOutside:u,onDismiss:f,...g}=e,p=_.useContext(zb),[y,v]=_.useState(null),x=y?.ownerDocument??globalThis?.document,[,S]=_.useState({}),T=Zs(n,N=>v(N)),w=Array.from(p.layers),[D]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),C=w.indexOf(D),B=y?w.indexOf(y):-1,z=p.layersWithOutsidePointerEventsDisabled.size>0,P=B>=C,I=PD(N=>{const L=N.target,se=[...p.branches].some(ce=>ce.contains(L));!P||se||(r?.(N),u?.(N),N.defaultPrevented||f?.())},x),j=BD(N=>{const L=N.target;[...p.branches].some(ce=>ce.contains(L))||(c?.(N),u?.(N),N.defaultPrevented||f?.())},x);return RD(N=>{B===p.layers.size-1&&(l?.(N),!N.defaultPrevented&&f&&(N.preventDefault(),f()))},x),_.useEffect(()=>{if(y)return s&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(M0=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(y)),p.layers.add(y),D0(),()=>{s&&p.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=M0)}},[y,x,s,p]),_.useEffect(()=>()=>{y&&(p.layers.delete(y),p.layersWithOutsidePointerEventsDisabled.delete(y),D0())},[y,p]),_.useEffect(()=>{const N=()=>S({});return document.addEventListener(Bf,N),()=>document.removeEventListener(Bf,N)},[]),m.jsx(Ia.div,{...g,ref:T,style:{pointerEvents:z?P?"auto":"none":void 0,...e.style},onFocusCapture:ds(e.onFocusCapture,j.onFocusCapture),onBlurCapture:ds(e.onBlurCapture,j.onBlurCapture),onPointerDownCapture:ds(e.onPointerDownCapture,I.onPointerDownCapture)})});Ob.displayName=CD;var zD="DismissableLayerBranch",OD=_.forwardRef((e,n)=>{const s=_.useContext(zb),l=_.useRef(null),r=Zs(n,l);return _.useEffect(()=>{const c=l.current;if(c)return s.branches.add(c),()=>{s.branches.delete(c)}},[s.branches]),m.jsx(Ia.div,{...e,ref:r})});OD.displayName=zD;function PD(e,n=globalThis?.document){const s=nr(e),l=_.useRef(!1),r=_.useRef(()=>{});return _.useEffect(()=>{const c=f=>{if(f.target&&!l.current){let g=function(){Pb(AD,s,p,{discrete:!0})};const p={originalEvent:f};f.pointerType==="touch"?(n.removeEventListener("click",r.current),r.current=g,n.addEventListener("click",r.current,{once:!0})):g()}else n.removeEventListener("click",r.current);l.current=!1},u=window.setTimeout(()=>{n.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(u),n.removeEventListener("pointerdown",c),n.removeEventListener("click",r.current)}},[n,s]),{onPointerDownCapture:()=>l.current=!0}}function BD(e,n=globalThis?.document){const s=nr(e),l=_.useRef(!1);return _.useEffect(()=>{const r=c=>{c.target&&!l.current&&Pb(kD,s,{originalEvent:c},{discrete:!1})};return n.addEventListener("focusin",r),()=>n.removeEventListener("focusin",r)},[n,s]),{onFocusCapture:()=>l.current=!0,onBlurCapture:()=>l.current=!1}}function D0(){const e=new CustomEvent(Bf);document.dispatchEvent(e)}function Pb(e,n,s,{discrete:l}){const r=s.originalEvent.target,c=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});n&&r.addEventListener(e,n,{once:!0}),l?DD(r,c):r.dispatchEvent(c)}var lf="focusScope.autoFocusOnMount",rf="focusScope.autoFocusOnUnmount",R0={bubbles:!1,cancelable:!0},ID="FocusScope",Bb=_.forwardRef((e,n)=>{const{loop:s=!1,trapped:l=!1,onMountAutoFocus:r,onUnmountAutoFocus:c,...u}=e,[f,g]=_.useState(null),p=nr(r),y=nr(c),v=_.useRef(null),x=Zs(n,w=>g(w)),S=_.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;_.useEffect(()=>{if(l){let w=function(z){if(S.paused||!f)return;const P=z.target;f.contains(P)?v.current=P:os(v.current,{select:!0})},D=function(z){if(S.paused||!f)return;const P=z.relatedTarget;P!==null&&(f.contains(P)||os(v.current,{select:!0}))},C=function(z){if(document.activeElement===document.body)for(const I of z)I.removedNodes.length>0&&os(f)};document.addEventListener("focusin",w),document.addEventListener("focusout",D);const B=new MutationObserver(C);return f&&B.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",D),B.disconnect()}}},[l,f,S.paused]),_.useEffect(()=>{if(f){A0.add(S);const w=document.activeElement;if(!f.contains(w)){const C=new CustomEvent(lf,R0);f.addEventListener(lf,p),f.dispatchEvent(C),C.defaultPrevented||(LD(ZD(Ib(f)),{select:!0}),document.activeElement===w&&os(f))}return()=>{f.removeEventListener(lf,p),setTimeout(()=>{const C=new CustomEvent(rf,R0);f.addEventListener(rf,y),f.dispatchEvent(C),C.defaultPrevented||os(w??document.body,{select:!0}),f.removeEventListener(rf,y),A0.remove(S)},0)}}},[f,p,y,S]);const T=_.useCallback(w=>{if(!s&&!l||S.paused)return;const D=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,C=document.activeElement;if(D&&C){const B=w.currentTarget,[z,P]=qD(B);z&&P?!w.shiftKey&&C===P?(w.preventDefault(),s&&os(z,{select:!0})):w.shiftKey&&C===z&&(w.preventDefault(),s&&os(P,{select:!0})):C===B&&w.preventDefault()}},[s,l,S.paused]);return m.jsx(Ia.div,{tabIndex:-1,...u,ref:x,onKeyDown:T})});Bb.displayName=ID;function LD(e,{select:n=!1}={}){const s=document.activeElement;for(const l of e)if(os(l,{select:n}),document.activeElement!==s)return}function qD(e){const n=Ib(e),s=C0(n,e),l=C0(n.reverse(),e);return[s,l]}function Ib(e){const n=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const r=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||r?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)n.push(s.currentNode);return n}function C0(e,n){for(const s of e)if(!UD(s,{upTo:n}))return s}function UD(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function HD(e){return e instanceof HTMLInputElement&&"select"in e}function os(e,{select:n=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&HD(e)&&n&&e.select()}}var A0=$D();function $D(){let e=[];return{add(n){const s=e[0];n!==s&&s?.pause(),e=k0(e,n),e.unshift(n)},remove(n){e=k0(e,n),e[0]?.resume()}}}function k0(e,n){const s=[...e],l=s.indexOf(n);return l!==-1&&s.splice(l,1),s}function ZD(e){return e.filter(n=>n.tagName!=="A")}var FD="Portal",Lb=_.forwardRef((e,n)=>{const{container:s,...l}=e,[r,c]=_.useState(!1);tr(()=>c(!0),[]);const u=s||r&&globalThis?.document?.body;return u?Mw.createPortal(m.jsx(Ia.div,{...l,ref:n}),u):null});Lb.displayName=FD;function YD(e,n){return _.useReducer((s,l)=>n[s][l]??s,e)}var wc=e=>{const{present:n,children:s}=e,l=GD(n),r=typeof s=="function"?s({present:l.isPresent}):_.Children.only(s),c=Zs(l.ref,VD(r));return typeof s=="function"||l.isPresent?_.cloneElement(r,{ref:c}):null};wc.displayName="Presence";function GD(e){const[n,s]=_.useState(),l=_.useRef(null),r=_.useRef(e),c=_.useRef("none"),u=e?"mounted":"unmounted",[f,g]=YD(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return _.useEffect(()=>{const p=Mo(l.current);c.current=f==="mounted"?p:"none"},[f]),tr(()=>{const p=l.current,y=r.current;if(y!==e){const x=c.current,S=Mo(p);e?g("MOUNT"):S==="none"||p?.display==="none"?g("UNMOUNT"):g(y&&x!==S?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,g]),tr(()=>{if(n){let p;const y=n.ownerDocument.defaultView??window,v=S=>{const w=Mo(l.current).includes(CSS.escape(S.animationName));if(S.target===n&&w&&(g("ANIMATION_END"),!r.current)){const D=n.style.animationFillMode;n.style.animationFillMode="forwards",p=y.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=D)})}},x=S=>{S.target===n&&(c.current=Mo(l.current))};return n.addEventListener("animationstart",x),n.addEventListener("animationcancel",v),n.addEventListener("animationend",v),()=>{y.clearTimeout(p),n.removeEventListener("animationstart",x),n.removeEventListener("animationcancel",v),n.removeEventListener("animationend",v)}}else g("ANIMATION_END")},[n,g]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:_.useCallback(p=>{l.current=p?getComputedStyle(p):null,s(p)},[])}}function Mo(e){return e?.animationName||"none"}function VD(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var of=0;function KD(){_.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??z0()),document.body.insertAdjacentElement("beforeend",e[1]??z0()),of++,()=>{of===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),of--}},[])}function z0(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var fa=function(){return fa=Object.assign||function(n){for(var s,l=1,r=arguments.length;l<r;l++){s=arguments[l];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(n[c]=s[c])}return n},fa.apply(this,arguments)};function qb(e,n){var s={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&n.indexOf(l)<0&&(s[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,l=Object.getOwnPropertySymbols(e);r<l.length;r++)n.indexOf(l[r])<0&&Object.prototype.propertyIsEnumerable.call(e,l[r])&&(s[l[r]]=e[l[r]]);return s}function WD(e,n,s){if(s||arguments.length===2)for(var l=0,r=n.length,c;l<r;l++)(c||!(l in n))&&(c||(c=Array.prototype.slice.call(n,0,l)),c[l]=n[l]);return e.concat(c||Array.prototype.slice.call(n))}var Uo="right-scroll-bar-position",Ho="width-before-scroll-bar",XD="with-scroll-bars-hidden",QD="--removed-body-scroll-bar-size";function cf(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function JD(e,n){var s=_.useState(function(){return{value:e,callback:n,facade:{get current(){return s.value},set current(l){var r=s.value;r!==l&&(s.value=l,s.callback(l,r))}}}})[0];return s.callback=n,s.facade}var eR=typeof window<"u"?_.useLayoutEffect:_.useEffect,O0=new WeakMap;function tR(e,n){var s=JD(null,function(l){return e.forEach(function(r){return cf(r,l)})});return eR(function(){var l=O0.get(s);if(l){var r=new Set(l),c=new Set(e),u=s.current;r.forEach(function(f){c.has(f)||cf(f,null)}),c.forEach(function(f){r.has(f)||cf(f,u)})}O0.set(s,e)},[e]),s}function nR(e){return e}function aR(e,n){n===void 0&&(n=nR);var s=[],l=!1,r={read:function(){if(l)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(c){var u=n(c,l);return s.push(u),function(){s=s.filter(function(f){return f!==u})}},assignSyncMedium:function(c){for(l=!0;s.length;){var u=s;s=[],u.forEach(c)}s={push:function(f){return c(f)},filter:function(){return s}}},assignMedium:function(c){l=!0;var u=[];if(s.length){var f=s;s=[],f.forEach(c),u=s}var g=function(){var y=u;u=[],y.forEach(c)},p=function(){return Promise.resolve().then(g)};p(),s={push:function(y){u.push(y),p()},filter:function(y){return u=u.filter(y),s}}}};return r}function sR(e){e===void 0&&(e={});var n=aR(null);return n.options=fa({async:!0,ssr:!1},e),n}var Ub=function(e){var n=e.sideCar,s=qb(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var l=n.read();if(!l)throw new Error("Sidecar medium not found");return _.createElement(l,fa({},s))};Ub.isSideCarExport=!0;function lR(e,n){return e.useMedium(n),Ub}var Hb=sR(),uf=function(){},_c=_.forwardRef(function(e,n){var s=_.useRef(null),l=_.useState({onScrollCapture:uf,onWheelCapture:uf,onTouchMoveCapture:uf}),r=l[0],c=l[1],u=e.forwardProps,f=e.children,g=e.className,p=e.removeScrollBar,y=e.enabled,v=e.shards,x=e.sideCar,S=e.noRelative,T=e.noIsolation,w=e.inert,D=e.allowPinchZoom,C=e.as,B=C===void 0?"div":C,z=e.gapMode,P=qb(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=x,j=tR([s,n]),N=fa(fa({},P),r);return _.createElement(_.Fragment,null,y&&_.createElement(I,{sideCar:Hb,removeScrollBar:p,shards:v,noRelative:S,noIsolation:T,inert:w,setCallbacks:c,allowPinchZoom:!!D,lockRef:s,gapMode:z}),u?_.cloneElement(_.Children.only(f),fa(fa({},N),{ref:j})):_.createElement(B,fa({},N,{className:g,ref:j}),f))});_c.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};_c.classNames={fullWidth:Ho,zeroRight:Uo};var iR=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function rR(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=iR();return n&&e.setAttribute("nonce",n),e}function oR(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function cR(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var uR=function(){var e=0,n=null;return{add:function(s){e==0&&(n=rR())&&(oR(n,s),cR(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},dR=function(){var e=uR();return function(n,s){_.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&s])}},$b=function(){var e=dR(),n=function(s){var l=s.styles,r=s.dynamic;return e(l,r),null};return n},fR={left:0,top:0,right:0,gap:0},df=function(e){return parseInt(e||"",10)||0},hR=function(e){var n=window.getComputedStyle(document.body),s=n[e==="padding"?"paddingLeft":"marginLeft"],l=n[e==="padding"?"paddingTop":"marginTop"],r=n[e==="padding"?"paddingRight":"marginRight"];return[df(s),df(l),df(r)]},mR=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return fR;var n=hR(e),s=document.documentElement.clientWidth,l=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,l-s+n[2]-n[0])}},gR=$b(),Hl="data-scroll-locked",pR=function(e,n,s,l){var r=e.left,c=e.top,u=e.right,f=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(XD,` {
   overflow: hidden `).concat(l,`;
   padding-right: `).concat(f,"px ").concat(l,`;
  }
  body[`).concat(Hl,`] {
    overflow: hidden `).concat(l,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(l,";"),s==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(l,`;
    `),s==="padding"&&"padding-right: ".concat(f,"px ").concat(l,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Uo,` {
    right: `).concat(f,"px ").concat(l,`;
  }
  
  .`).concat(Ho,` {
    margin-right: `).concat(f,"px ").concat(l,`;
  }
  
  .`).concat(Uo," .").concat(Uo,` {
    right: 0 `).concat(l,`;
  }
  
  .`).concat(Ho," .").concat(Ho,` {
    margin-right: 0 `).concat(l,`;
  }
  
  body[`).concat(Hl,`] {
    `).concat(QD,": ").concat(f,`px;
  }
`)},P0=function(){var e=parseInt(document.body.getAttribute(Hl)||"0",10);return isFinite(e)?e:0},vR=function(){_.useEffect(function(){return document.body.setAttribute(Hl,(P0()+1).toString()),function(){var e=P0()-1;e<=0?document.body.removeAttribute(Hl):document.body.setAttribute(Hl,e.toString())}},[])},yR=function(e){var n=e.noRelative,s=e.noImportant,l=e.gapMode,r=l===void 0?"margin":l;vR();var c=_.useMemo(function(){return mR(r)},[r]);return _.createElement(gR,{styles:pR(c,!n,r,s?"":"!important")})},If=!1;if(typeof window<"u")try{var Do=Object.defineProperty({},"passive",{get:function(){return If=!0,!0}});window.addEventListener("test",Do,Do),window.removeEventListener("test",Do,Do)}catch{If=!1}var Cl=If?{passive:!1}:!1,bR=function(e){return e.tagName==="TEXTAREA"},Zb=function(e,n){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[n]!=="hidden"&&!(s.overflowY===s.overflowX&&!bR(e)&&s[n]==="visible")},xR=function(e){return Zb(e,"overflowY")},SR=function(e){return Zb(e,"overflowX")},B0=function(e,n){var s=n.ownerDocument,l=n;do{typeof ShadowRoot<"u"&&l instanceof ShadowRoot&&(l=l.host);var r=Fb(e,l);if(r){var c=Yb(e,l),u=c[1],f=c[2];if(u>f)return!0}l=l.parentNode}while(l&&l!==s.body);return!1},wR=function(e){var n=e.scrollTop,s=e.scrollHeight,l=e.clientHeight;return[n,s,l]},_R=function(e){var n=e.scrollLeft,s=e.scrollWidth,l=e.clientWidth;return[n,s,l]},Fb=function(e,n){return e==="v"?xR(n):SR(n)},Yb=function(e,n){return e==="v"?wR(n):_R(n)},ER=function(e,n){return e==="h"&&n==="rtl"?-1:1},NR=function(e,n,s,l,r){var c=ER(e,window.getComputedStyle(n).direction),u=c*l,f=s.target,g=n.contains(f),p=!1,y=u>0,v=0,x=0;do{if(!f)break;var S=Yb(e,f),T=S[0],w=S[1],D=S[2],C=w-D-c*T;(T||C)&&Fb(e,f)&&(v+=C,x+=T);var B=f.parentNode;f=B&&B.nodeType===Node.DOCUMENT_FRAGMENT_NODE?B.host:B}while(!g&&f!==document.body||g&&(n.contains(f)||n===f));return(y&&Math.abs(v)<1||!y&&Math.abs(x)<1)&&(p=!0),p},Ro=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},I0=function(e){return[e.deltaX,e.deltaY]},L0=function(e){return e&&"current"in e?e.current:e},TR=function(e,n){return e[0]===n[0]&&e[1]===n[1]},jR=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},MR=0,Al=[];function DR(e){var n=_.useRef([]),s=_.useRef([0,0]),l=_.useRef(),r=_.useState(MR++)[0],c=_.useState($b)[0],u=_.useRef(e);_.useEffect(function(){u.current=e},[e]),_.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var w=WD([e.lockRef.current],(e.shards||[]).map(L0),!0).filter(Boolean);return w.forEach(function(D){return D.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),w.forEach(function(D){return D.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var f=_.useCallback(function(w,D){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!u.current.allowPinchZoom;var C=Ro(w),B=s.current,z="deltaX"in w?w.deltaX:B[0]-C[0],P="deltaY"in w?w.deltaY:B[1]-C[1],I,j=w.target,N=Math.abs(z)>Math.abs(P)?"h":"v";if("touches"in w&&N==="h"&&j.type==="range")return!1;var L=window.getSelection(),se=L&&L.anchorNode,ce=se?se===j||se.contains(j):!1;if(ce)return!1;var ee=B0(N,j);if(!ee)return!0;if(ee?I=N:(I=N==="v"?"h":"v",ee=B0(N,j)),!ee)return!1;if(!l.current&&"changedTouches"in w&&(z||P)&&(l.current=I),!I)return!0;var fe=l.current||I;return NR(fe,D,w,fe==="h"?z:P)},[]),g=_.useCallback(function(w){var D=w;if(!(!Al.length||Al[Al.length-1]!==c)){var C="deltaY"in D?I0(D):Ro(D),B=n.current.filter(function(I){return I.name===D.type&&(I.target===D.target||D.target===I.shadowParent)&&TR(I.delta,C)})[0];if(B&&B.should){D.cancelable&&D.preventDefault();return}if(!B){var z=(u.current.shards||[]).map(L0).filter(Boolean).filter(function(I){return I.contains(D.target)}),P=z.length>0?f(D,z[0]):!u.current.noIsolation;P&&D.cancelable&&D.preventDefault()}}},[]),p=_.useCallback(function(w,D,C,B){var z={name:w,delta:D,target:C,should:B,shadowParent:RR(C)};n.current.push(z),setTimeout(function(){n.current=n.current.filter(function(P){return P!==z})},1)},[]),y=_.useCallback(function(w){s.current=Ro(w),l.current=void 0},[]),v=_.useCallback(function(w){p(w.type,I0(w),w.target,f(w,e.lockRef.current))},[]),x=_.useCallback(function(w){p(w.type,Ro(w),w.target,f(w,e.lockRef.current))},[]);_.useEffect(function(){return Al.push(c),e.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:x}),document.addEventListener("wheel",g,Cl),document.addEventListener("touchmove",g,Cl),document.addEventListener("touchstart",y,Cl),function(){Al=Al.filter(function(w){return w!==c}),document.removeEventListener("wheel",g,Cl),document.removeEventListener("touchmove",g,Cl),document.removeEventListener("touchstart",y,Cl)}},[]);var S=e.removeScrollBar,T=e.inert;return _.createElement(_.Fragment,null,T?_.createElement(c,{styles:jR(r)}):null,S?_.createElement(yR,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function RR(e){for(var n=null;e!==null;)e instanceof ShadowRoot&&(n=e.host,e=e.host),e=e.parentNode;return n}const CR=lR(Hb,DR);var Gb=_.forwardRef(function(e,n){return _.createElement(_c,fa({},e,{ref:n,sideCar:CR}))});Gb.classNames=_c.classNames;var AR=function(e){if(typeof document>"u")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},kl=new WeakMap,Co=new WeakMap,Ao={},ff=0,Vb=function(e){return e&&(e.host||Vb(e.parentNode))},kR=function(e,n){return n.map(function(s){if(e.contains(s))return s;var l=Vb(s);return l&&e.contains(l)?l:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},zR=function(e,n,s,l){var r=kR(n,Array.isArray(e)?e:[e]);Ao[s]||(Ao[s]=new WeakMap);var c=Ao[s],u=[],f=new Set,g=new Set(r),p=function(v){!v||f.has(v)||(f.add(v),p(v.parentNode))};r.forEach(p);var y=function(v){!v||g.has(v)||Array.prototype.forEach.call(v.children,function(x){if(f.has(x))y(x);else try{var S=x.getAttribute(l),T=S!==null&&S!=="false",w=(kl.get(x)||0)+1,D=(c.get(x)||0)+1;kl.set(x,w),c.set(x,D),u.push(x),w===1&&T&&Co.set(x,!0),D===1&&x.setAttribute(s,"true"),T||x.setAttribute(l,"true")}catch(C){console.error("aria-hidden: cannot operate on ",x,C)}})};return y(n),f.clear(),ff++,function(){u.forEach(function(v){var x=kl.get(v)-1,S=c.get(v)-1;kl.set(v,x),c.set(v,S),x||(Co.has(v)||v.removeAttribute(l),Co.delete(v)),S||v.removeAttribute(s)}),ff--,ff||(kl=new WeakMap,kl=new WeakMap,Co=new WeakMap,Ao={})}},OR=function(e,n,s){s===void 0&&(s="data-aria-hidden");var l=Array.from(Array.isArray(e)?e:[e]),r=AR(e);return r?(l.push.apply(l,Array.from(r.querySelectorAll("[aria-live], script"))),zR(l,r,s,"aria-hidden")):function(){return null}},Ec="Dialog",[Kb]=gD(Ec),[PR,sa]=Kb(Ec),Wb=e=>{const{__scopeDialog:n,children:s,open:l,defaultOpen:r,onOpenChange:c,modal:u=!0}=e,f=_.useRef(null),g=_.useRef(null),[p,y]=xD({prop:l,defaultProp:r??!1,onChange:c,caller:Ec});return m.jsx(PR,{scope:n,triggerRef:f,contentRef:g,contentId:sf(),titleId:sf(),descriptionId:sf(),open:p,onOpenChange:y,onOpenToggle:_.useCallback(()=>y(v=>!v),[y]),modal:u,children:s})};Wb.displayName=Ec;var Xb="DialogTrigger",BR=_.forwardRef((e,n)=>{const{__scopeDialog:s,...l}=e,r=sa(Xb,s),c=Zs(n,r.triggerRef);return m.jsx(Ia.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":xh(r.open),...l,ref:c,onClick:ds(e.onClick,r.onOpenToggle)})});BR.displayName=Xb;var yh="DialogPortal",[IR,Qb]=Kb(yh,{forceMount:void 0}),Jb=e=>{const{__scopeDialog:n,forceMount:s,children:l,container:r}=e,c=sa(yh,n);return m.jsx(IR,{scope:n,forceMount:s,children:_.Children.map(l,u=>m.jsx(wc,{present:s||c.open,children:m.jsx(Lb,{asChild:!0,container:r,children:u})}))})};Jb.displayName=yh;var lc="DialogOverlay",ex=_.forwardRef((e,n)=>{const s=Qb(lc,e.__scopeDialog),{forceMount:l=s.forceMount,...r}=e,c=sa(lc,e.__scopeDialog);return c.modal?m.jsx(wc,{present:l||c.open,children:m.jsx(qR,{...r,ref:n})}):null});ex.displayName=lc;var LR=kb("DialogOverlay.RemoveScroll"),qR=_.forwardRef((e,n)=>{const{__scopeDialog:s,...l}=e,r=sa(lc,s);return m.jsx(Gb,{as:LR,allowPinchZoom:!0,shards:[r.contentRef],children:m.jsx(Ia.div,{"data-state":xh(r.open),...l,ref:n,style:{pointerEvents:"auto",...l.style}})})}),qs="DialogContent",tx=_.forwardRef((e,n)=>{const s=Qb(qs,e.__scopeDialog),{forceMount:l=s.forceMount,...r}=e,c=sa(qs,e.__scopeDialog);return m.jsx(wc,{present:l||c.open,children:c.modal?m.jsx(UR,{...r,ref:n}):m.jsx(HR,{...r,ref:n})})});tx.displayName=qs;var UR=_.forwardRef((e,n)=>{const s=sa(qs,e.__scopeDialog),l=_.useRef(null),r=Zs(n,s.contentRef,l);return _.useEffect(()=>{const c=l.current;if(c)return OR(c)},[]),m.jsx(nx,{...e,ref:r,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ds(e.onCloseAutoFocus,c=>{c.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:ds(e.onPointerDownOutside,c=>{const u=c.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0;(u.button===2||f)&&c.preventDefault()}),onFocusOutside:ds(e.onFocusOutside,c=>c.preventDefault())})}),HR=_.forwardRef((e,n)=>{const s=sa(qs,e.__scopeDialog),l=_.useRef(!1),r=_.useRef(!1);return m.jsx(nx,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{e.onCloseAutoFocus?.(c),c.defaultPrevented||(l.current||s.triggerRef.current?.focus(),c.preventDefault()),l.current=!1,r.current=!1},onInteractOutside:c=>{e.onInteractOutside?.(c),c.defaultPrevented||(l.current=!0,c.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const u=c.target;s.triggerRef.current?.contains(u)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&r.current&&c.preventDefault()}})}),nx=_.forwardRef((e,n)=>{const{__scopeDialog:s,trapFocus:l,onOpenAutoFocus:r,onCloseAutoFocus:c,...u}=e,f=sa(qs,s),g=_.useRef(null),p=Zs(n,g);return KD(),m.jsxs(m.Fragment,{children:[m.jsx(Bb,{asChild:!0,loop:!0,trapped:l,onMountAutoFocus:r,onUnmountAutoFocus:c,children:m.jsx(Ob,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":xh(f.open),...u,ref:p,onDismiss:()=>f.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx($R,{titleId:f.titleId}),m.jsx(FR,{contentRef:g,descriptionId:f.descriptionId})]})]})}),bh="DialogTitle",ax=_.forwardRef((e,n)=>{const{__scopeDialog:s,...l}=e,r=sa(bh,s);return m.jsx(Ia.h2,{id:r.titleId,...l,ref:n})});ax.displayName=bh;var sx="DialogDescription",lx=_.forwardRef((e,n)=>{const{__scopeDialog:s,...l}=e,r=sa(sx,s);return m.jsx(Ia.p,{id:r.descriptionId,...l,ref:n})});lx.displayName=sx;var ix="DialogClose",rx=_.forwardRef((e,n)=>{const{__scopeDialog:s,...l}=e,r=sa(ix,s);return m.jsx(Ia.button,{type:"button",...l,ref:n,onClick:ds(e.onClick,()=>r.onOpenChange(!1))})});rx.displayName=ix;function xh(e){return e?"open":"closed"}var ox="DialogTitleWarning",[iz,cx]=mD(ox,{contentName:qs,titleName:bh,docsSlug:"dialog"}),$R=({titleId:e})=>{const n=cx(ox),s=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return _.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},ZR="DialogDescriptionWarning",FR=({contentRef:e,descriptionId:n})=>{const l=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${cx(ZR).contentName}}.`;return _.useEffect(()=>{const r=e.current?.getAttribute("aria-describedby");n&&r&&(document.getElementById(n)||console.warn(l))},[l,e,n]),null},YR=Wb,GR=Jb,VR=ex,KR=tx,WR=ax,XR=lx,QR=rx;function ux(e){var n,s,l="";if(typeof e=="string"||typeof e=="number")l+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(n=0;n<r;n++)e[n]&&(s=ux(e[n]))&&(l&&(l+=" "),l+=s)}else for(s in e)e[s]&&(l&&(l+=" "),l+=s);return l}function JR(){for(var e,n,s=0,l="",r=arguments.length;s<r;s++)(e=arguments[s])&&(n=ux(e))&&(l&&(l+=" "),l+=n);return l}function ot(...e){return JR(e)}function Te(e){return m.jsx("button",{type:e.type??"button",onClick:e.onClick,className:ot("wb-button",e.className,e.disabled&&"opacity-50 cursor-not-allowed"),"data-variant":e.variant==="default"?void 0:e.variant,title:e.title,disabled:e.disabled,children:e.children})}function $l(e){return m.jsxs("section",{className:ot("wb-panel rounded-2xl",e.className),children:[(e.title||e.headerRight)&&m.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-[var(--wb-border-muted)] px-4 py-3",children:[m.jsx("div",{className:"text-sm font-semibold tracking-wide text-[var(--wb-text)]",children:e.title}),e.headerRight?m.jsx("div",{className:"flex items-center gap-2",children:e.headerRight}):null]}),m.jsx("div",{className:"min-h-0",children:e.children})]})}function Be(e){return m.jsx("label",{className:ot("mb-1 block text-xs font-medium uppercase tracking-wide text-[var(--wb-muted)]",e.className),children:e.children})}function dt(e){return m.jsx("button",{type:"button",className:ot("wb-chip",e.className,e.disabled&&"opacity-50 cursor-not-allowed"),"data-active":e.active?"true":"false",onClick:e.disabled?void 0:e.onClick,title:e.title,disabled:e.disabled,children:e.children})}function ko(e){const n=e.delta,s=n==null?"":n>0?"text-emerald-300":n<0?"text-rose-300":"text-slate-300";return m.jsxs("div",{className:ot("wb-card p-3",e.className),children:[m.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:e.label}),m.jsx("div",{className:ot("mt-1 text-lg font-semibold",e.valueClassName),children:e.value}),n!=null?m.jsxs("div",{className:ot("mt-1 text-xs",s),children:[n>0?"+":"",Math.round(n)]}):null]})}function Zl(e){return m.jsx("div",{className:ot("wb-scrollbar min-h-0 overflow-auto",e.className),children:e.children})}function Sh(e){return m.jsx(YR,{open:e.open,onOpenChange:e.onOpenChange,children:m.jsxs(GR,{children:[m.jsx(VR,{className:"fixed inset-0 z-40 bg-black/60 backdrop-blur-sm"}),m.jsxs(KR,{className:ot("fixed left-1/2 top-1/2 z-50 w-[min(95vw,1100px)] -translate-x-1/2 -translate-y-1/2 rounded-2xl border border-[var(--wb-border)] bg-[#0d1325] shadow-2xl",e.className),children:[m.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-[var(--wb-border-muted)] px-5 py-4",children:[m.jsxs("div",{children:[m.jsx(WR,{className:"text-base font-semibold",children:e.title}),e.description?m.jsx(XR,{className:"mt-1 text-sm text-[var(--wb-muted)]",children:e.description}):null]}),m.jsx(QR,{asChild:!0,children:m.jsx("button",{className:"rounded-lg border border-[var(--wb-border)] p-2 hover:bg-white/5","aria-label":"Close",children:m.jsx(BE,{size:16})})})]}),m.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:e.children}),e.footer?m.jsx("div",{className:"border-t border-[var(--wb-border-muted)] px-5 py-4",children:e.footer}):null]})]})})}function Oa(e){return m.jsxs("div",{children:[m.jsx(Be,{children:e.label}),m.jsx("input",{className:"wb-input",type:"number",value:e.value??"",min:e.min,max:e.max,step:e.step??1,placeholder:e.placeholder,onChange:n=>{const s=n.target.value.trim();e.onChange(s===""?null:Number(s))}})]})}const eC={bow:"0 0",spear:"9.090909090909088% 0",wand:"18.181818181818183% 0",dagger:"27.27272727272727% 0",relik:"36.36363636363637% 0",helmet:"45.45454545454546% 0",chestplate:"54.54545454545454% 0",leggings:"63.63636363636363% 0",boots:"72.72727272727272% 0",ring:"81.81818181818181% 0",bracelet:"90.90909090909092% 0",necklace:"100% 0"};function tC(e){return e.category==="weapon"?e.type:e.category}function nC(e){const n=tC(e.item),s=eC[n],l="./media/items/new.png";return s?m.jsx("div",{className:"relative h-9 w-9 shrink-0 overflow-hidden rounded-lg border border-[var(--wb-border-muted)] bg-black/20",title:`${e.item.type} icon`,children:m.jsx("div",{"aria-hidden":!0,className:"absolute inset-[3px] rounded-[6px]",style:{backgroundImage:`url(${l})`,backgroundPosition:s,backgroundSize:"1200% 100%",backgroundRepeat:"no-repeat",imageRendering:"pixelated"}})}):m.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg border border-[var(--wb-border-muted)] bg-black/20 text-xs text-[var(--wb-muted)]",children:"?"})}function aC(e){switch(e){case"Mythic":return"text-violet-300";case"Fabled":return"text-rose-300";case"Legendary":return"text-cyan-300";case"Rare":return"text-fuchsia-300";case"Unique":return"text-amber-300";case"Set":return"text-emerald-300";default:return"text-slate-200"}}function dx(e){const n=[{label:"Strength",value:e.numeric.reqStr},{label:"Dexterity",value:e.numeric.reqDex},{label:"Intelligence",value:e.numeric.reqInt},{label:"Defense",value:e.numeric.reqDef},{label:"Agility",value:e.numeric.reqAgi}].filter(s=>s.value>0);return n.length===0?null:n.map(s=>`${s.label} ${s.value}`).join(", ")}function fx(e){const n=[{label:"Strength",value:e.numeric.spStr},{label:"Dexterity",value:e.numeric.spDex},{label:"Intelligence",value:e.numeric.spInt},{label:"Defense",value:e.numeric.spDef},{label:"Agility",value:e.numeric.spAgi}].filter(s=>s.value!==0);return n.length===0?null:n.map(s=>`${s.label} ${s.value>0?"+":""}${s.value}`).join(", ")}function hx(e){const n=e.legacyRaw,s=[["Neutral",typeof n.nDam=="string"?n.nDam:""],["Earth",typeof n.eDam=="string"?n.eDam:""],["Thunder",typeof n.tDam=="string"?n.tDam:""],["Water",typeof n.wDam=="string"?n.wDam:""],["Fire",typeof n.fDam=="string"?n.fDam:""],["Air",typeof n.aDam=="string"?n.aDam:""]].filter(([,l])=>l&&l!=="0-0");return s.length===0?null:s.map(([l,r])=>`${l}: ${r}`).join("  ")}const sC=new Set(["reqTotal","skillPointTotal","offenseScore","ehpProxy","utilityScore","sumSpPct","sumSpRaw","strReq","dexReq","intReq","defReq","agiReq","str","dex","int","def","agi"]);function mx(e){const n=[];for(const[s,l]of Object.entries(e.numericIndex)){if(sC.has(s))continue;const r=typeof l=="number"?l:0;r!==0&&n.push({key:s,value:r})}return e.powderSlots>0&&!n.some(s=>s.key==="slots")&&n.push({key:"slots",value:e.powderSlots}),n.sort((s,l)=>zt(s.key).localeCompare(zt(l.key))),n}function gx(e,n){return Number.isInteger(n)?String(n):n.toFixed(1).replace(/\.0$/,"")}function px(e){return e>0?{chip:"border-emerald-400/40 bg-emerald-400/10",number:"text-emerald-300 font-semibold",label:"text-emerald-200/90"}:e<0?{chip:"border-rose-400/40 bg-rose-400/10",number:"text-rose-300 font-semibold",label:"text-rose-200/90"}:{chip:"border-[var(--wb-border-muted)] bg-black/10",number:"text-[var(--wb-text)]",label:"text-[var(--wb-muted)]"}}function lC(e){const{item:n}=e,s=dx(n),l=fx(n),r=hx(n),c=mx(n),u=e.dense??!1;return m.jsxs("div",{className:ot("space-y-1.5",u?"text-[11px]":"text-xs"),children:[(s||l)&&m.jsxs("div",{className:"flex flex-wrap gap-1.5 text-[11px]",children:[s?m.jsxs("span",{className:"rounded border border-amber-400/30 bg-amber-400/10 px-2 py-0.5",children:[m.jsx("span",{className:"font-semibold text-amber-200",children:"Req"}),m.jsx("span",{className:"ml-1 text-amber-200/90",children:s})]}):null,l?m.jsxs("span",{className:"rounded border border-cyan-400/30 bg-cyan-400/10 px-2 py-0.5",children:[m.jsx("span",{className:"font-semibold text-cyan-200",children:"SP"}),m.jsx("span",{className:"ml-1 text-cyan-200/90",children:l})]}):null]}),c.length>0?m.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(({key:f,value:g})=>{const p=px(g);return m.jsxs("span",{className:ot("wb-chip border text-[11px]",p.chip),children:[m.jsx("span",{className:p.number,children:gx(f,g)}),m.jsx("span",{className:ot("ml-1",p.label),children:zt(f)})]},f)})}):null,r?m.jsx("div",{className:"flex flex-wrap gap-1.5 rounded border border-[var(--wb-border-muted)] bg-black/15 px-2 py-1.5 text-[11px] leading-relaxed text-[var(--wb-muted)]",children:r.split(/\s{2,}/).map((f,g)=>m.jsx("span",{className:"whitespace-nowrap",children:f},g))}):null,m.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[m.jsxs("div",{className:"rounded border border-[var(--wb-border-muted)] bg-black/15 px-2 py-1",children:[zt("baseDps")," ",Math.round(n.roughScoreFields.baseDps)]}),m.jsxs("div",{className:"rounded border border-[var(--wb-border-muted)] bg-black/15 px-2 py-1",children:[zt("ehpProxy")," ",Math.round(n.roughScoreFields.ehpProxy)]}),m.jsxs("div",{className:"rounded border border-[var(--wb-border-muted)] bg-black/15 px-2 py-1",children:[zt("offenseScore")," ",Math.round(n.roughScoreFields.offense)]}),m.jsxs("div",{className:"rounded border border-[var(--wb-border-muted)] bg-black/15 px-2 py-1",children:[zt("skillPointTotal")," ",Math.round(n.roughScoreFields.skillPointTotal)]})]}),n.majorIds.length>0?m.jsxs("div",{className:"break-words text-[var(--wb-muted)]",children:["Major IDs: ",n.majorIds.join(", ")]}):null]})}function Nc(e){const n=By({id:e.dragData?`drag:${e.dragData.kind}:${e.item.id}:${e.dragData.sourceSlot??e.dragData.sourceCategory??""}`:`item:${e.item.id}`,data:e.dragData?{dragItem:e.dragData}:void 0}),s=e.dragData?{transform:Go.Translate.toString(n.transform),opacity:n.isDragging?.45:1}:void 0,l=e.showDetails?dx(e.item):null,r=e.showDetails?fx(e.item):null,c=e.showDetails?hx(e.item):null,u=e.showDetails?mx(e.item):[];return m.jsxs("div",{ref:e.dragData?n.setNodeRef:void 0,style:s,className:ot("wb-card",e.dense?"p-2":e.compact?"p-2.5":"p-3",n.isDragging&&"ring-2 ring-emerald-300/40"),onMouseEnter:()=>e.onHover?.(!0),onMouseLeave:()=>e.onHover?.(!1),children:[m.jsxs("div",{className:ot("flex items-start gap-2",e.dense&&"gap-1.5"),children:[e.dragData?m.jsx("button",{type:"button",...n.listeners,...n.attributes,className:"mt-0.5 rounded-md border border-[var(--wb-border)] p-1 text-[var(--wb-muted)] hover:bg-white/5","aria-label":`Drag ${e.item.displayName}`,children:m.jsx(mE,{size:14})}):null,m.jsx(nC,{item:e.item}),m.jsxs("div",{className:"min-w-0 flex-1",children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[m.jsx("div",{className:ot("break-words text-sm font-semibold leading-tight",aC(e.item.tier)),children:e.item.displayName}),e.badge?m.jsx("span",{className:"wb-chip",children:e.badge}):null,e.locked?m.jsxs("span",{className:"wb-chip inline-flex items-center gap-1",children:[m.jsx(Uy,{size:11})," Locked"]}):null]}),m.jsxs("div",{className:ot("mt-1 flex flex-wrap gap-y-1 text-[var(--wb-muted)]",e.dense?"gap-x-2 text-xs":"gap-x-3 text-xs"),children:[m.jsx("span",{children:e.item.type}),m.jsxs("span",{children:["Lv ",e.item.level]}),e.dense?null:m.jsx("span",{children:e.item.tier}),!e.dense&&e.item.classReq?m.jsx("span",{children:e.item.classReq}):null,!e.dense&&e.item.majorIds.length>0?m.jsxs("span",{children:["MID ",e.item.majorIds.length]}):null,e.dense&&e.item.majorIds.length>0?m.jsxs("span",{children:["M",e.item.majorIds.length]}):null]}),e.showDetails?m.jsxs("div",{className:ot("mt-2 space-y-1",e.dense?"text-[11px]":"text-xs"),children:[(l||r)&&m.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[l?m.jsxs("span",{className:"rounded border border-amber-400/30 bg-amber-400/10 px-2 py-0.5",children:[m.jsx("span",{className:"font-semibold text-amber-200",children:"Req"}),m.jsx("span",{className:"ml-1 text-amber-200/90",children:l})]}):null,r?m.jsxs("span",{className:"rounded border border-cyan-400/30 bg-cyan-400/10 px-2 py-0.5",children:[m.jsx("span",{className:"font-semibold text-cyan-200",children:"SP"}),m.jsx("span",{className:"ml-1 text-cyan-200/90",children:r})]}):null]}),u.length>0?m.jsx("div",{className:"flex flex-wrap gap-1",children:u.map(({key:f,value:g})=>{const p=px(g);return m.jsxs("span",{className:ot("wb-chip border text-[11px]",p.chip),children:[m.jsx("span",{className:p.number,children:gx(f,g)}),m.jsx("span",{className:ot("ml-1",p.label),children:zt(f)})]},f)})}):null,c?m.jsx("div",{className:"flex flex-wrap gap-1.5 rounded border border-[var(--wb-border-muted)] bg-black/15 px-2 py-1.5 text-[11px] leading-relaxed text-[var(--wb-muted)]",children:c.split(/\s{2,}/).map((f,g)=>m.jsx("span",{className:"whitespace-nowrap",children:f},g))}):null,e.item.majorIds.length>0?m.jsxs("div",{className:"break-words text-[var(--wb-muted)]",children:["Major IDs: ",e.item.majorIds.join(", ")]}):null]}):null,e.compact?null:m.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs",children:[m.jsxs("div",{className:"rounded-lg border border-[var(--wb-border-muted)] bg-black/15 px-2 py-1",children:[zt("baseDps")," ",Math.round(e.item.roughScoreFields.baseDps)]}),m.jsxs("div",{className:"rounded-lg border border-[var(--wb-border-muted)] bg-black/15 px-2 py-1",children:[zt("ehpProxy")," ",Math.round(e.item.roughScoreFields.ehpProxy)]}),m.jsxs("div",{className:"rounded-lg border border-[var(--wb-border-muted)] bg-black/15 px-2 py-1",children:[zt("offenseScore")," ",Math.round(e.item.roughScoreFields.offense)]}),m.jsxs("div",{className:"rounded-lg border border-[var(--wb-border-muted)] bg-black/15 px-2 py-1",children:[zt("skillPointTotal")," ",Math.round(e.item.roughScoreFields.skillPointTotal)]})]})]})]}),(e.onPin||e.onEquip||e.onRemove)&&m.jsxs("div",{className:ot("mt-2 flex flex-wrap",e.dense?"gap-1":"gap-2"),children:[e.onPin?m.jsxs(Te,{className:ot("text-xs",e.dense?"px-1.5 py-0.5":"px-2 py-1"),variant:"ghost",onClick:e.onPin,children:[m.jsx(xE,{size:12,className:"mr-1 inline"}),"Pin"]}):null,e.onEquip?m.jsxs(Te,{className:ot("text-xs",e.dense?"px-1.5 py-0.5":"px-2 py-1"),onClick:e.onEquip,children:[m.jsx(wE,{size:12,className:"mr-1 inline"}),"Equip"]}):null,e.onRemove?m.jsx(Te,{className:ot("text-xs",e.dense?"px-1.5 py-0.5":"px-2 py-1"),variant:"ghost",onClick:e.onRemove,children:"Remove"}):null]})]})}const vx="workbench-search-presets:v2";function iC(){try{const e=window.localStorage.getItem(vx);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}}function rC(e){window.localStorage.setItem(vx,JSON.stringify(e))}function q0(e,n){return e.includes(n)?e.filter(s=>s!==n):[...e,n]}const oC=88,cC=84,Ui=50;function uC(e){const n=e.catalog.itemsById.get(e.itemId);if(!n)return null;const s=e.selectedSlot!=null&&ha(e.selectedSlot)===n.category;return m.jsx("div",{className:"relative",onMouseEnter:l=>e.onHoverForStats(e.itemId,l.currentTarget.getBoundingClientRect()),onMouseLeave:()=>e.onHoverForStats(null,null),children:m.jsx(Nc,{item:n,compact:!0,dense:!0,showDetails:!0,dragData:{kind:"search",itemId:n.id},onPin:()=>e.onPin(n.id),onEquip:()=>e.onEquip(n.id),onHover:l=>e.onHover(l?n.id:null,l?e.selectedSlot:null),badge:s?`Fits ${e.selectedSlot}`:void 0})})}function yx(e){const n=_.useRef(null),s=e.result?.rows??[],l=_.useDeferredValue(s),[r,c]=_.useState(0),[u,f]=_.useState(null),g=_.useRef(null),p=l.length,y=Math.max(1,Math.ceil(p/Ui)),v=Math.min(r,Math.max(0,y-1)),x=l.slice(v*Ui,(v+1)*Ui);_.useEffect(()=>{c(0)},[e.result]);const S=se=>{g.current&&(window.clearTimeout(g.current),g.current=null),f(se)},T=()=>{g.current=window.setTimeout(()=>f(null),120)},w=!e.state.resultsBelowBuild,D=w?1:3,C=w?oC:cC,B=Math.ceil(x.length/D),z=fD({count:B,getScrollElement:()=>n.current,estimateSize:()=>C,overscan:4}),P=u?e.catalog.itemsById.get(u.itemId):null,I=e.result!=null||e.loading,j=e.loading?"Searching...":e.result?`${e.result.total.toLocaleString()} results`:"Search or filter to see items",N=p===0?0:v*Ui+1,L=Math.min((v+1)*Ui,p);return m.jsxs("div",{className:"min-h-0 flex-1",children:[m.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2 text-xs text-[var(--wb-muted)]",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("span",{children:j}),I&&p>0?m.jsx("span",{className:"shrink-0",children:y>1?m.jsxs(m.Fragment,{children:[m.jsx("button",{type:"button",className:"mr-1 rounded px-1.5 py-0.5 hover:bg-white/10 disabled:opacity-40",onClick:()=>c(se=>Math.max(0,se-1)),disabled:v<=0,title:"Previous page",children:""}),m.jsxs("span",{children:[N.toLocaleString(),"",L.toLocaleString()]}),m.jsx("button",{type:"button",className:"ml-1 rounded px-1.5 py-0.5 hover:bg-white/10 disabled:opacity-40",onClick:()=>c(se=>Math.min(y-1,se+1)),disabled:v>=y-1,title:"Next page",children:""})]}):null}):null]}),I?m.jsxs("span",{children:[(e.state.sortKeys??["relevance"]).map(se=>zt(se)).join("  "),e.state.sortDescending?" ":" "]}):null]}),m.jsx("div",{ref:n,className:ot("wb-scrollbar overflow-auto rounded-xl border border-[var(--wb-border-muted)] bg-black/10",e.embedded?"min-h-[160px] flex-1":"h-[calc(100vh-26rem)]"),children:I?x.length===0?m.jsx("div",{className:"flex min-h-[120px] flex-col items-center justify-center gap-1 px-4 py-6 text-center text-sm text-[var(--wb-muted)]",children:m.jsx("span",{children:"No items match your filters."})}):m.jsx("div",{style:{height:z.getTotalSize(),position:"relative"},children:z.getVirtualItems().map(se=>{const ce=se.index*D,ee=x.slice(ce,ce+D);return m.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${se.start}px)`,padding:"6px 8px"},className:w?"grid grid-cols-1":"grid grid-cols-2 gap-2 xl:grid-cols-3",children:ee.map(fe=>m.jsx(uC,{catalog:e.catalog,itemId:fe.id,selectedSlot:e.selectedSlot,onPin:e.onPin,onEquip:e.onEquip,onHover:e.onHover,onHoverForStats:(A,ie)=>{A!=null&&ie?S({itemId:A,rect:ie}):T()}},fe.id))},se.key)})}):m.jsx("div",{className:"flex min-h-[120px] flex-col items-center justify-center gap-1 px-4 py-6 text-center text-sm text-[var(--wb-muted)]",children:m.jsx("span",{children:"Enter a search term, select categories, or apply filters above to see items."})})}),P&&u?Pa.createPortal(m.jsxs("div",{className:"fixed z-[100] w-72 max-h-[80vh] overflow-auto rounded-xl border border-[var(--wb-border)] bg-[var(--wb-panel)] p-2.5 shadow-xl",style:{left:Math.min(u.rect.right+8,window.innerWidth-296),top:u.rect.top},onMouseEnter:()=>{g.current&&(window.clearTimeout(g.current),g.current=null)},onMouseLeave:()=>f(null),children:[m.jsx("div",{className:"mb-1.5 break-words text-xs font-semibold text-[var(--wb-text)]",children:P.displayName}),m.jsx(lC,{item:P,dense:!0})]}),document.body):null]})}function dC(e){const[n,s]=_.useState(()=>typeof window>"u"?[]:iC()),l=_.useMemo(()=>e.catalog.facetsMeta.majorIds.slice(0,20),[e.catalog]),r=e.result?.facetCounts,c=_.useMemo(()=>["relevance","level","baseDps",...Object.keys(e.catalog.facetsMeta.numericRanges).filter(y=>!["relevance","level","baseDps"].includes(y)).sort((y,v)=>zt(y).localeCompare(zt(v)))],[e.catalog.facetsMeta.numericRanges]),u=_.useMemo(()=>{const g=Object.keys(e.catalog.facetsMeta.numericRanges);return[...["level","baseDps","slots"].filter(y=>!g.includes(y)),...g].sort((y,v)=>zt(y).localeCompare(zt(v)))},[e.catalog.facetsMeta.numericRanges]);_.useEffect(()=>{typeof window<"u"&&rC(n)},[n]);const f=g=>e.setState(AM(e.state,g));return m.jsx($l,{className:"flex min-h-0 flex-col",title:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(EE,{size:15}),"Advanced Item Search"]}),headerRight:null,children:m.jsxs("div",{className:"flex min-h-0 flex-col gap-3 p-3",children:[m.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-end",children:[m.jsxs("div",{className:"min-w-0 flex-1",children:[m.jsx(Be,{children:"Search Text"}),m.jsx("input",{className:"wb-input",placeholder:"Name, lore, major ID...",value:e.state.text,onChange:g=>f({text:g.target.value})})]}),m.jsx(Te,{variant:"primary",className:"shrink-0",onClick:e.onSearch,disabled:e.loading,title:"Run search with current filters",children:e.loading?"Searching":"Show items"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Be,{className:"mb-0 shrink-0",children:"Results"}),m.jsx(dt,{active:e.state.resultsBelowBuild,onClick:()=>f({resultsBelowBuild:!e.state.resultsBelowBuild}),title:"Toggle: show below Workbench or in sidebar",children:e.state.resultsBelowBuild?"Below build":"In sidebar"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{children:[m.jsx(Be,{children:"Sort by"}),m.jsxs("div",{className:"flex flex-col gap-1",children:[(e.state.sortKeys??["relevance"]).map((g,p)=>m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("select",{className:"wb-select flex-1",value:g,onChange:y=>{const v=[...e.state.sortKeys??["relevance"]];v[p]=y.target.value,f({sortKeys:v})},children:c.map(y=>m.jsx("option",{value:y,children:zt(y)},y))}),m.jsx(Te,{variant:"ghost",className:"shrink-0 px-1",onClick:()=>{const y=(e.state.sortKeys??["relevance"]).filter((v,x)=>x!==p);y.length===0&&y.push("relevance"),f({sortKeys:y})},title:"Remove sort",children:""})]},p)),m.jsx(Te,{variant:"ghost",className:"self-start text-xs",onClick:()=>{const g=e.state.sortKeys??["relevance"],p=c.find(y=>!g.includes(y))??c[0];f({sortKeys:[...g,p]})},disabled:(e.state.sortKeys??["relevance"]).length>=8,children:"+ Add sort level"})]})]}),m.jsxs("div",{children:[m.jsx(Be,{children:"View"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(dt,{active:e.state.viewMode==="list",onClick:()=>f({viewMode:"list"}),children:"List"}),m.jsx(dt,{active:e.state.viewMode==="grid",onClick:()=>f({viewMode:"grid"}),children:"Grid"}),m.jsx(dt,{active:e.state.sortDescending,onClick:()=>f({sortDescending:!e.state.sortDescending}),title:"Toggle descending",children:e.state.sortDescending?"Desc":"Asc"})]})]})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"mb-2 flex items-center gap-2 text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:[m.jsx(Yv,{size:13}),"Category"]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:ms.map(g=>m.jsxs(dt,{active:e.state.categories.includes(g),onClick:()=>f({categories:q0(e.state.categories,g)}),children:[oh(g),r?.categories[g]?` (${r.categories[g]})`:""]},g))})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{children:[m.jsx(Be,{children:"Wearable At Level"}),m.jsx("input",{className:"wb-input",type:"number",min:1,max:106,value:e.state.onlyWearableAtLevel??"",onChange:g=>{const p=g.target.value.trim();f({onlyWearableAtLevel:p?Number(p):null})}})]}),m.jsxs("div",{children:[m.jsx(Be,{children:"Class Filter"}),m.jsxs("select",{className:"wb-select",value:e.state.classReqs[0]??"",onChange:g=>{const p=g.target.value;f({classReqs:p?[p]:[]})},children:[m.jsx("option",{value:"",children:"Any"}),e.catalog.facetsMeta.classReqs.map(g=>m.jsx("option",{value:g,children:g},g))]})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsx(dt,{active:e.state.onlyClassCompatible,onClick:()=>f({onlyClassCompatible:!e.state.onlyClassCompatible}),children:"Only class-compatible"}),m.jsx(dt,{active:e.state.excludeRestricted,onClick:()=>f({excludeRestricted:!e.state.excludeRestricted}),children:"Exclude restricted"})]}),m.jsxs("details",{className:"group",children:[m.jsxs("summary",{className:"cursor-pointer text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)] flex items-center gap-2",children:[m.jsx(Yv,{size:13}),"Advanced ID Filters"]}),m.jsxs("div",{className:"mt-3 grid gap-2",children:[m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Set min/max for any ID (e.g. mr, sdPct, ehpProxy). Items outside ranges are excluded."}),Object.entries(e.state.numericRanges).map(([g,p])=>{const y=g==="powderSlots"?"slots":g==="level"?"lvl":g==="baseDps"?"averageDps":g,v=e.catalog.facetsMeta.numericRanges[y],x=p??{};return m.jsxs("div",{className:"flex flex-wrap items-end gap-2 rounded-lg border border-[var(--wb-border-muted)] p-2",children:[m.jsxs("div",{className:"min-w-[120px] flex-1",children:[m.jsx(Be,{children:"ID"}),m.jsx("select",{className:"wb-select w-full",value:g,onChange:S=>{const T={...e.state.numericRanges};delete T[g],T[S.target.value]=x,f({numericRanges:T})},children:u.map(S=>m.jsx("option",{value:S,disabled:S!==g&&S in e.state.numericRanges,children:zt(S)},S))})]}),m.jsxs("div",{className:"min-w-[70px]",children:[m.jsx(Be,{children:"Min"}),m.jsx("input",{className:"wb-input w-full",type:"number",placeholder:v?String(Math.floor(v.min)):"min",value:x.min??"",onChange:S=>{const T=S.target.value.trim();f({numericRanges:{...e.state.numericRanges,[g]:{...x,min:T===""?void 0:Number(T)}}})}})]}),m.jsxs("div",{className:"min-w-[70px]",children:[m.jsx(Be,{children:"Max"}),m.jsx("input",{className:"wb-input w-full",type:"number",placeholder:v?String(Math.ceil(v.max)):"max",value:x.max??"",onChange:S=>{const T=S.target.value.trim();f({numericRanges:{...e.state.numericRanges,[g]:{...x,max:T===""?void 0:Number(T)}}})}})]}),m.jsx(Te,{variant:"ghost",className:"shrink-0",onClick:()=>{const S={...e.state.numericRanges};delete S[g],f({numericRanges:S})},children:"Remove"})]},g)}),m.jsx(Te,{variant:"ghost",onClick:()=>{const g=new Set(Object.keys(e.state.numericRanges)),p=u.find(y=>!g.has(y));p&&f({numericRanges:{...e.state.numericRanges,[p]:{}}})},disabled:u.every(g=>g in e.state.numericRanges),children:"Add ID Filter"})]})]}),m.jsxs("details",{className:"group",children:[m.jsx("summary",{className:"cursor-pointer text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)] flex items-center gap-2",children:"Exclusion (IDs to avoid)"}),m.jsxs("div",{className:"mt-3 grid gap-2",children:[m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Exclude items that exceed max (or are below min). E.g. mr max 20 = exclude items with mana regen > 20."}),Object.entries(e.state.exclusionRanges??{}).map(([g,p])=>{const y=g==="powderSlots"?"slots":g==="level"?"lvl":g==="baseDps"?"averageDps":g,v=e.catalog.facetsMeta.numericRanges[y],x=p??{};return m.jsxs("div",{className:"flex flex-wrap items-end gap-2 rounded-lg border border-[var(--wb-border-muted)] border-amber-500/30 p-2",children:[m.jsxs("div",{className:"min-w-[120px] flex-1",children:[m.jsx(Be,{children:"Avoid ID"}),m.jsx("select",{className:"wb-select w-full",value:g,onChange:S=>{const T={...e.state.exclusionRanges??{}};delete T[g],T[S.target.value]=x,f({exclusionRanges:T})},children:u.map(S=>m.jsx("option",{value:S,disabled:S!==g&&S in(e.state.exclusionRanges??{}),children:zt(S)},S))})]}),m.jsxs("div",{className:"min-w-[70px]",children:[m.jsx(Be,{children:"Max (exclude if >)"}),m.jsx("input",{className:"wb-input w-full",type:"number",placeholder:v?String(Math.ceil(v.max)):"max",value:x.max??"",onChange:S=>{const T=S.target.value.trim();f({exclusionRanges:{...e.state.exclusionRanges??{},[g]:{...x,max:T===""?void 0:Number(T)}}})}})]}),m.jsxs("div",{className:"min-w-[70px]",children:[m.jsx(Be,{children:"Min (exclude if <)"}),m.jsx("input",{className:"wb-input w-full",type:"number",placeholder:"min",value:x.min??"",onChange:S=>{const T=S.target.value.trim();f({exclusionRanges:{...e.state.exclusionRanges??{},[g]:{...x,min:T===""?void 0:Number(T)}}})}})]}),m.jsx(Te,{variant:"ghost",className:"shrink-0",onClick:()=>{const S={...e.state.exclusionRanges??{}};delete S[g],f({exclusionRanges:S})},children:"Remove"})]},g)}),m.jsx(Te,{variant:"ghost",onClick:()=>{const g=new Set(Object.keys(e.state.exclusionRanges??{})),p=u.find(y=>!g.has(y));p&&f({exclusionRanges:{...e.state.exclusionRanges??{},[p]:{}}})},disabled:u.every(g=>g in(e.state.exclusionRanges??{})),children:"Add exclusion"})]})]}),m.jsxs("div",{children:[m.jsx(Be,{children:"Major IDs (quick picks)"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:l.map(g=>m.jsx(dt,{active:e.state.majorIds.includes(g),onClick:()=>f({majorIds:q0(e.state.majorIds,g)}),title:g,children:g},g))})]}),m.jsxs("div",{className:"wb-card p-2",children:[m.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Filter Presets"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(Te,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>{const g=window.prompt("Preset name?")?.trim();if(!g)return;const p=[{name:g,state:e.state},...n.filter(y=>y.name.toLowerCase()!==g.toLowerCase())].slice(0,20);s(p)},children:"Save"}),m.jsx(Te,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.setState(za),children:"Reset"})]})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:n.length===0?m.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:"No saved presets yet."}):n.map(g=>m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(dt,{onClick:()=>e.setState(g.state),children:g.name}),m.jsx("button",{className:"rounded-md border border-[var(--wb-border)] px-1.5 py-0.5 text-xs text-[var(--wb-muted)] hover:bg-white/5",onClick:()=>s(p=>p.filter(y=>y.name!==g.name)),title:`Delete ${g.name}`,children:"x"})]},g.name))})]}),e.state.resultsBelowBuild?null:m.jsx(yx,{catalog:e.catalog,result:e.result,selectedSlot:e.selectedSlot,state:e.state,loading:e.loading,onPin:e.onPin,onEquip:e.onEquip,onHover:e.onHover})]})})}const fC={slotStatus:{},warnings:{messages:[]},aggregated:{hpTotal:0,hprTotal:0,mr:0,ms:0,ls:0,speed:0,skillPoints:{str:0,dex:0,int:0,def:0,agi:0},skillReqs:{str:0,dex:0,int:0,def:0,agi:0},defenses:{e:0,t:0,w:0,f:0,a:0},offense:{baseDps:0,spellPct:0,spellRaw:0,meleePct:0,meleeRaw:0,elemDamPct:0,genericDamPct:0,offenseScore:0}},derived:{dpsProxy:0,spellProxy:0,meleeProxy:0,ehpProxy:0,reqTotal:0,skillPointTotal:0,legacyBaseDps:0,legacyEhp:0,legacyEhpNoAgi:0,skillpointFeasible:!0,assignedSkillPointsRequired:0}};function Lf(e){let n=Number.isFinite(e)?e:0;if(n<=0)return 0;n>=150&&(n=150);const s=.9908;return s/(1-s)*(1-Math.pow(s,n))/100}const hC=.867,mC=.951,gC=90;function pC(e){return Math.max(1,Math.min(106,Math.round(e||1)))*5+5}function vC(e){const n=Math.max(1,Math.min(106,Math.round(e||1)));return n>=101?200:(n-1)*2}function yC(e){switch(e){case"relik":return .6;case"bow":return .7;case"wand":return .8;case"dagger":case"spear":return 1;default:return 1}}function bC(e){const n=Math.max(5,e.totalHp),s=Lf(e.defSkillPoints)*hC,l=Lf(e.agiSkillPoints)*mC,c=2-yC(e.weaponType),f=(100-gC)/100*l+(1-l)*(1-s),g=1-s,p=n/Math.max(1e-9,f)/Math.max(1e-9,c),y=n/Math.max(1e-9,g)/Math.max(1e-9,c);return{withAgi:p,noAgi:y}}function xC(e){return[e.numeric.reqStr,e.numeric.reqDex,e.numeric.reqInt,e.numeric.reqDef,e.numeric.reqAgi]}function SC(e){return[e.numeric.spStr,e.numeric.spDex,e.numeric.spInt,e.numeric.spDef,e.numeric.spAgi]}function wC(e,n){return[e[0]+n[0],e[1]+n[1],e[2]+n[2],e[3]+n[3],e[4]+n[4]]}function _C(e){return e[0]+e[1]+e[2]+e[3]+e[4]}function U0(e,n){for(let s=0;s<5;s++)if(e[s]>n[s])return!1;return!0}function EC(e,n){for(const s of e)if(U0(s.assigned,n.assigned))return;for(let s=e.length-1;s>=0;s--)U0(n.assigned,e[s].assigned)&&e.splice(s,1);e.push(n)}function NC(e,n,s={}){if(e.length===0)return{feasible:!0,assignedTotal:0,assignedByStat:[0,0,0,0,0]};const l=vC(n),r=s.extraBaseSkillPoints??[0,0,0,0,0],c=e.length,u=e.map(xC),f=e.map(SC),g=1<<c,p=Array.from({length:g},()=>[0,0,0,0,0]);for(let T=1;T<g;T++){const w=T&-T,D=Math.log2(w)|0;p[T]=wC(p[T^w],f[D])}const y=new Array(g);y[0]=[{assigned:[0,0,0,0,0],assignedTotal:0}];for(let T=0;T<g;T++){const w=y[T];if(!w||w.length===0)continue;const D=p[T];for(const C of w)for(let B=0;B<c;B++){if((T&1<<B)!==0)continue;const z=[...C.assigned];let P=!0;for(let L=0;L<5;L++){const se=C.assigned[L]+D[L]+(r[L]??0),ce=u[B][L];if(ce>se&&(z[L]+=ce-se),z[L]>100){P=!1;break}}if(!P)continue;const I=_C(z);if(I>l)continue;const j=T|1<<B,N=y[j]??=[];EC(N,{assigned:z,assignedTotal:I})}}const v=y[g-1];if(!v||v.length===0)return{feasible:!1,assignedTotal:1/0,assignedByStat:null};let x=1/0,S=null;for(const T of v)T.assignedTotal<x&&(x=T.assignedTotal,S=[...T.assigned]);return{feasible:Number.isFinite(x),assignedTotal:x,assignedByStat:Number.isFinite(x)?S:null}}function wh(e,n,s,l={}){const r=[];for(const c of nt){const u=e[c];if(u==null)continue;const f=n.itemsById.get(u);f&&r.push(f)}return NC(r,s,l)}function TC(e,n){const s={};for(const l of nt){const r=e.slots[l];if(r==null)continue;const c=n.itemsById.get(r);c&&(s[l]=c)}return s}function ic(e,n,s={}){const l=TC(e,n),r=structuredClone(fC),c=r.warnings.messages;let u=null;for(const fe of nt){const A=l[fe];if(!A)continue;fe==="weapon"&&(u=A.type),r.aggregated.hpTotal+=A.numeric.hp+A.numeric.hpBonus,r.aggregated.hprTotal+=A.numeric.hprRaw+A.numeric.hprPct,r.aggregated.mr+=A.numeric.mr,r.aggregated.ms+=A.numeric.ms,r.aggregated.ls+=A.numeric.ls,r.aggregated.speed+=A.numeric.spd,r.aggregated.skillPoints.str+=A.numeric.spStr,r.aggregated.skillPoints.dex+=A.numeric.spDex,r.aggregated.skillPoints.int+=A.numeric.spInt,r.aggregated.skillPoints.def+=A.numeric.spDef,r.aggregated.skillPoints.agi+=A.numeric.spAgi,r.aggregated.skillReqs.str=Math.max(r.aggregated.skillReqs.str,A.numeric.reqStr),r.aggregated.skillReqs.dex=Math.max(r.aggregated.skillReqs.dex,A.numeric.reqDex),r.aggregated.skillReqs.int=Math.max(r.aggregated.skillReqs.int,A.numeric.reqInt),r.aggregated.skillReqs.def=Math.max(r.aggregated.skillReqs.def,A.numeric.reqDef),r.aggregated.skillReqs.agi=Math.max(r.aggregated.skillReqs.agi,A.numeric.reqAgi),r.aggregated.defenses.e+=A.numeric.eDef,r.aggregated.defenses.t+=A.numeric.tDef,r.aggregated.defenses.w+=A.numeric.wDef,r.aggregated.defenses.f+=A.numeric.fDef,r.aggregated.defenses.a+=A.numeric.aDef,r.aggregated.offense.baseDps+=A.numeric.baseDps,r.aggregated.offense.spellPct+=A.numeric.sdPct,r.aggregated.offense.spellRaw+=A.numeric.sdRaw,r.aggregated.offense.meleePct+=A.numeric.mdPct,r.aggregated.offense.meleeRaw+=A.numeric.mdRaw,r.aggregated.offense.elemDamPct+=A.numeric.eDamPct+A.numeric.tDamPct+A.numeric.wDamPct+A.numeric.fDamPct+A.numeric.aDamPct,r.aggregated.offense.genericDamPct+=A.numeric.damPct+A.numeric.rDamPct+A.numeric.nDamPct,r.aggregated.offense.offenseScore+=A.roughScoreFields.offense;const ie=A.classReq,oe=!ie||!e.characterClass||ie===e.characterClass,k=A.level<=e.level,Y=A.numeric.reqStr<=100&&A.numeric.reqDex<=100&&A.numeric.reqInt<=100&&A.numeric.reqDef<=100&&A.numeric.reqAgi<=100;r.slotStatus[fe]={classOk:oe,levelOk:k,skillReqsMet:Y}}!e.characterClass&&u&&(e.characterClass=Qo(u));for(const fe of nt){const A=l[fe];A&&(ha(fe)!==A.category&&c.push(`${fe} contains incompatible item type (${A.type}).`),A.level>e.level&&c.push(`${A.displayName} requires level ${A.level}.`),e.characterClass&&A.classReq&&A.classReq!==e.characterClass&&c.push(`${A.displayName} requires ${A.classReq}.`),(A.restricted||A.deprecated)&&c.push(`${A.displayName} is restricted/deprecated.`))}const f=r.aggregated.skillReqs.str+r.aggregated.skillReqs.dex+r.aggregated.skillReqs.int+r.aggregated.skillReqs.def+r.aggregated.skillReqs.agi,g=r.aggregated.skillPoints.str+r.aggregated.skillPoints.dex+r.aggregated.skillPoints.int+r.aggregated.skillPoints.def+r.aggregated.skillPoints.agi,p=wh(e.slots,n,e.level,s.skillpointFeasibility),{spellPct:y,spellRaw:v,meleePct:x,meleeRaw:S,baseDps:T,elemDamPct:w,genericDamPct:D}=r.aggregated.offense,C=r.aggregated.skillPoints,z=1+Lf(C.str),P=(T*(1+(y+w+D)/100)+v)*z,I=(T*(1+(x+w+D)/100)+S)*z,j=I+P+r.aggregated.speed*.8,N=r.aggregated.defenses.e+r.aggregated.defenses.t+r.aggregated.defenses.w+r.aggregated.defenses.f+r.aggregated.defenses.a,L=r.aggregated.hpTotal+N*.45+r.aggregated.hprTotal*2+Math.max(0,r.aggregated.skillPoints.def)*12+Math.max(0,r.aggregated.skillPoints.agi)*10,se=r.aggregated.offense.baseDps,ce=pC(e.level)+r.aggregated.hpTotal,ee=bC({totalHp:ce,defSkillPoints:r.aggregated.skillPoints.def,agiSkillPoints:r.aggregated.skillPoints.agi,weaponType:u});return r.derived={dpsProxy:j,spellProxy:P,meleeProxy:I,ehpProxy:L,reqTotal:f,skillPointTotal:g,legacyBaseDps:se,legacyEhp:ee.withAgi,legacyEhpNoAgi:ee.noAgi,skillpointFeasible:p.feasible,assignedSkillPointsRequired:Number.isFinite(p.assignedTotal)?p.assignedTotal:0},p.feasible||c.push(`Skill requirements are not satisfiable at level ${e.level} (estimated assigned SP exceeds available or equip order is invalid).`),r}function jC(e,n){return{dpsProxy:n.derived.dpsProxy-e.derived.dpsProxy,ehpProxy:n.derived.ehpProxy-e.derived.ehpProxy,legacyBaseDps:n.derived.legacyBaseDps-e.derived.legacyBaseDps,legacyEhp:n.derived.legacyEhp-e.derived.legacyEhp,hpTotal:n.aggregated.hpTotal-e.aggregated.hpTotal,speed:n.aggregated.speed-e.aggregated.speed,skillPointTotal:n.derived.skillPointTotal-e.derived.skillPointTotal}}function pt(e){return Number.isFinite(e)?Math.round(e).toLocaleString():"-"}function MC(e){const n=e.snapshot.slots.weapon;return n==null?null:e.catalog.itemsById.get(n)??null}function DC(e){const n=e.snapshot.comparePreview;if(n.itemId!=null){const l=e.catalog.itemsById.get(n.itemId);if(l){const r=n.slot?`Compare Preview  ${Xo(n.slot)}`:"Compare Preview";return{item:l,source:r}}}if(e.snapshot.selectedSlot){const l=e.snapshot.slots[e.snapshot.selectedSlot];if(l!=null){const r=e.catalog.itemsById.get(l);if(r)return{item:r,source:`Selected Slot  ${Xo(e.snapshot.selectedSlot)}`}}}const s=MC(e);return s?{item:s,source:"Equipped Weapon"}:null}function RC(e){const[n,s]=_.useState(!1),l=e.compareSummary?jC(e.summary,e.compareSummary):null,r=e.spellPreview?.melee??null,c=DC(e);return m.jsx($l,{className:"flex min-h-0 flex-col",title:"Live Build Summary",headerRight:null,children:m.jsxs("div",{className:"flex flex-col gap-3 p-3",children:[c?m.jsxs("div",{className:"wb-card p-2.5",children:[m.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-xs uppercase tracking-wide text-[var(--wb-muted)]",children:"Focused Item"}),m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:c.source})]}),m.jsx(Te,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>s(u=>!u),children:n?"Hide Stats":"Show Stats"})]}),m.jsx(Nc,{item:c.item,compact:!0,dense:!0,showDetails:n})]}):m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs text-[var(--wb-muted)]",children:"Select or hover an item to inspect it here."}),e.abilityTreeSummary?m.jsxs("div",{className:["rounded-xl border p-3 text-xs",e.abilityTreeSummary.hasErrors?"border-amber-400/30 bg-amber-400/8 text-amber-100":"border-emerald-400/20 bg-emerald-400/8 text-emerald-100"].join(" "),children:[m.jsxs("div",{className:"mb-1 flex items-center justify-between gap-2",children:[m.jsxs("div",{className:"font-semibold",children:["Ability Tree (",e.abilityTreeSummary.className,")"]}),m.jsx(Te,{variant:"ghost",className:"px-2 py-1 text-xs",onClick:e.actions.onOpenAbilityTree,children:"Edit"})]}),m.jsxs("div",{children:["AP ",e.abilityTreeSummary.apUsed,"/",e.abilityTreeSummary.apCap,"  ",e.abilityTreeSummary.selectedCount," abilities selected"]}),e.abilityTreeSummary.hasErrors?m.jsx("div",{className:"mt-1",children:"Tree has validation issues (dependencies/blockers/AP)."}):null]}):null,m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Melee DPS"}),m.jsxs("div",{className:"mt-1 flex items-end justify-between gap-2",children:[m.jsx("div",{className:"text-xl font-semibold text-amber-200",children:pt(r?.dps??e.summary.derived.legacyBaseDps)}),l?.legacyBaseDps!=null?m.jsxs("div",{className:["text-xs",l.legacyBaseDps>0?"text-emerald-300":l.legacyBaseDps<0?"text-rose-300":"text-[var(--wb-muted)]"].join(" "),children:[l.legacyBaseDps>0?"+":"",Math.round(l.legacyBaseDps).toLocaleString()]}):null]}),m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:[r?`Legacy melee DPS (${r.attackSpeedTier})  Per Attack ${pt(r.perAttackAverage)}`:"Legacy melee DPS preview unavailable (equip a weapon and valid ability tree selection)."," "," Melee % / Raw ",m.jsx("span",{className:"text-amber-200/90",children:pt(e.summary.aggregated.offense.meleePct)})," / ",m.jsx("span",{className:"text-amber-200/90",children:pt(e.summary.aggregated.offense.meleeRaw)})]})]}),e.spellPreview?m.jsxs("div",{className:"wb-card p-3",children:[m.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Spells (ATree)"}),m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[e.spellPreview.spells.length," entries"]})]}),e.spellPreview.notes.length>0?m.jsx("div",{className:"mb-2 rounded-lg border border-amber-400/20 bg-amber-400/5 p-2 text-xs text-amber-100",children:e.spellPreview.notes.join(" ")}):null,e.spellPreview.spells.length===0?m.jsx("div",{className:"rounded-lg border border-dashed border-[var(--wb-border-muted)] p-2 text-xs text-[var(--wb-muted)]",children:"No spell damage entries yet. Select active ability-tree spell nodes (roots / spell upgrades)."}):m.jsx(Zl,{className:"max-h-[36vh] lg:max-h-[44vh]",children:m.jsx("div",{className:"grid gap-2 pr-1",children:e.spellPreview.spells.map(u=>m.jsxs("div",{className:"rounded-lg border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs",children:[m.jsxs("div",{className:"font-semibold",children:[u.name,m.jsxs("span",{className:"ml-1 text-[var(--wb-muted)]",children:["(",u.displayPartName,")"]})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("div",{className:u.isHealing?"text-emerald-200":"text-amber-200",children:[Math.round(u.averageDisplayValue).toLocaleString()," ",u.isHealing?"heal":"avg dmg"]}),u.manaCost!=null?m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[u.manaCost.toFixed(2)," mana"]}):null]})]}),m.jsx("div",{className:"mt-1 grid gap-1 text-xs text-[var(--wb-muted)]",children:u.parts.filter(f=>f.display).map(f=>m.jsxs("div",{className:"flex items-center justify-between gap-2",children:[m.jsx("span",{className:"truncate",children:f.name}),m.jsx("span",{className:f.type==="heal"?"text-emerald-200":"text-amber-200",children:Math.round(f.averageTotal??0).toLocaleString()})]},f.name))})]},`${u.baseSpell}-${u.name}`))})})]}):null,m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsx(ko,{label:"Base DPS",value:pt(e.summary.derived.legacyBaseDps),delta:l?.legacyBaseDps??null,valueClassName:"text-amber-200"}),m.jsx(ko,{label:"Effective HP",value:pt(e.summary.derived.legacyEhp),delta:l?.legacyEhp??null,valueClassName:"text-emerald-200"}),m.jsx(ko,{label:"Req Total",value:pt(e.summary.derived.reqTotal)}),m.jsx(ko,{label:"SP Total",value:pt(e.summary.derived.skillPointTotal),delta:l?.skillPointTotal??null})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 px-3 py-2",children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"SP Feasibility:"})," ",m.jsx("span",{className:e.summary.derived.skillpointFeasible?"text-emerald-200":"text-rose-200",children:e.summary.derived.skillpointFeasible?"Wearable":"Invalid / Not Wearable"})]}),m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 px-3 py-2",children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Assigned SP Needed:"})," ",m.jsx("span",{children:pt(e.summary.derived.assignedSkillPointsRequired)})]})]}),e.compareSummary&&e.compareSlot?m.jsxs("div",{className:"rounded-xl border border-emerald-400/30 bg-emerald-400/8 p-3 text-xs text-emerald-100",children:["Compare preview for ",m.jsx("b",{children:Xo(e.compareSlot)})]}):null,m.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"text-xs uppercase tracking-wide text-[var(--wb-muted)]",children:"Offense"}),m.jsxs("div",{className:"mt-2 grid gap-1 text-xs",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Legacy Base DPS:"})," ",m.jsx("span",{className:"font-medium text-amber-200",children:pt(e.summary.derived.legacyBaseDps)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Heuristic DPS Proxy:"})," ",m.jsx("span",{className:"text-amber-200/90",children:pt(e.summary.derived.dpsProxy)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Spell % / Raw:"})," ",m.jsx("span",{className:"text-amber-200/80",children:pt(e.summary.aggregated.offense.spellPct)})," / ",m.jsx("span",{className:"text-amber-200/80",children:pt(e.summary.aggregated.offense.spellRaw)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Melee % / Raw:"})," ",m.jsx("span",{className:"text-amber-200/80",children:pt(e.summary.aggregated.offense.meleePct)})," / ",m.jsx("span",{className:"text-amber-200/80",children:pt(e.summary.aggregated.offense.meleeRaw)})]})]})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"text-xs uppercase tracking-wide text-[var(--wb-muted)]",children:"Defense & Utility"}),m.jsxs("div",{className:"mt-2 grid gap-1 text-xs",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Legacy EHP (AGI):"})," ",m.jsx("span",{className:"font-medium text-emerald-200",children:pt(e.summary.derived.legacyEhp)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Legacy EHP (No AGI):"})," ",m.jsx("span",{className:"text-emerald-200/90",children:pt(e.summary.derived.legacyEhpNoAgi)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Heuristic EHP Proxy:"})," ",m.jsx("span",{className:"text-emerald-200/80",children:pt(e.summary.derived.ehpProxy)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"HP Total:"})," ",m.jsx("span",{className:"text-emerald-100/80",children:pt(e.summary.aggregated.hpTotal)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"HPR Total:"})," ",pt(e.summary.aggregated.hprTotal)]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"MR / MS / LS:"})," ",pt(e.summary.aggregated.mr)," / ",pt(e.summary.aggregated.ms)," / ",pt(e.summary.aggregated.ls)]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Walk Speed:"})," ",pt(e.summary.aggregated.speed)]})]})]})]}),m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs text-[var(--wb-muted)]",children:"Workbench primary KPIs use legacy-compatible metrics (Base DPS + Effective HP). Ability tree editing is now in Workbench, but these summary metrics still exclude ability-tree effects for now. Proxy values are still used internally for search/Build Solver heuristics."}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Warnings"}),e.summary.warnings.messages.length===0?m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs text-emerald-200",children:"No active warnings."}):m.jsx(Zl,{className:"max-h-32",children:m.jsx("div",{className:"grid gap-2",children:e.summary.warnings.messages.map((u,f)=>m.jsx("div",{className:"rounded-xl border border-amber-400/30 bg-amber-400/8 p-2 text-xs text-amber-100",children:u},`${u}-${f}`))})})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs(Te,{variant:"ghost",className:"justify-start",onClick:e.actions.onCopyLegacyLink,disabled:!e.snapshot.legacyHash,children:[m.jsx(rh,{size:14,className:"mr-2"}),"Legacy Link"]}),m.jsxs(Te,{variant:"ghost",className:"justify-start",onClick:e.actions.onOpenLegacyBuilder,children:[m.jsx(uE,{size:14,className:"mr-2"}),"Open Legacy"]})]})]})})}function CC(e){const{info:n}=e;return m.jsx("div",{className:"rounded-lg border border-violet-400/40 bg-violet-400/8 px-3 py-2",children:m.jsxs("div",{className:"flex items-center justify-between gap-2",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"text-xs font-semibold text-violet-100",children:["Crafted ",n.type.charAt(0).toUpperCase()+n.type.slice(1)]}),m.jsxs("div",{className:"mt-0.5 text-[10px] text-violet-200/60",children:["Lv. ",n.lvl," | ",n.hash.slice(0,20),"..."]})]}),m.jsx(Te,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:e.onClear,title:"Remove crafted item",children:m.jsx(Hy,{size:12})})]})})}function H0(e){const{isOver:n,setNodeRef:s}=Iy({id:`slot:${e.slot}`,data:{droppableType:"slot",slot:e.slot}}),l=e.store.slots[e.slot],r=l!=null?e.catalog.itemsById.get(l):void 0,c=e.store.craftedSlots[e.slot],u=By({id:r?`slot-item:${e.slot}:${r.id}`:`slot-empty:${e.slot}`,data:r?{dragItem:{kind:"slot",itemId:r.id,sourceSlot:e.slot}}:void 0,disabled:!r});return m.jsxs("div",{ref:s,className:ot("rounded-xl border p-2",n?"border-emerald-400/70 bg-emerald-400/8":"border-[var(--wb-border-muted)] bg-black/15"),onMouseEnter:()=>e.store.setSelectedSlot(e.slot),children:[m.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:Xo(e.slot)}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(Te,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.toggleLock(e.slot),title:"Lock slot",children:m.jsx(Uy,{size:12,className:ot(e.store.locks[e.slot]&&"text-emerald-300")})}),m.jsx(Te,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.moveSlotToBin(e.slot),title:"Move to bin",children:m.jsx(kE,{size:12})})]})]}),r?m.jsx("div",{ref:u.setNodeRef,style:{transform:Go.Translate.toString(u.transform),opacity:u.isDragging?.45:1},...u.listeners,...u.attributes,children:m.jsx(Nc,{item:r,compact:!0,dense:!0,showDetails:e.showItemDetails,dragData:{kind:"slot",itemId:r.id,sourceSlot:e.slot},locked:e.store.locks[e.slot],onHover:f=>e.onHoverItem?.(f?r.id:null,f?e.slot:null)})}):c?m.jsx(CC,{info:c,onClear:()=>e.store.clearCraftedSlot(e.slot)}):m.jsxs("div",{className:"rounded-lg border border-dashed border-[var(--wb-border)] px-3 py-3 text-center text-xs text-[var(--wb-muted)]",children:["Drop a ",ha(e.slot)," item here"]})]})}function $0(e){const{isOver:n,setNodeRef:s}=Iy({id:`bin:${e.category}`,data:{droppableType:"bin",category:e.category}}),l=e.store.binsByCategory[e.category].map(r=>e.catalog.itemsById.get(r)).filter(r=>!!r);return m.jsxs("div",{className:"flex min-w-0 flex-col gap-1.5",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2",children:[m.jsxs("div",{className:"text-xs font-semibold",children:[oh(e.category)," Bin"]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:l.length}),m.jsxs(Te,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.clearCategory(e.category),children:[m.jsx(Hy,{size:12,className:"mr-1 inline"}),"Clear"]})]})]}),m.jsx("div",{ref:s,className:ot("wb-grid-backdrop min-h-20 rounded-xl border p-1.5",n?"border-emerald-400/70 bg-emerald-400/8":"border-[var(--wb-border-muted)] bg-black/10"),children:l.length===0?m.jsxs("div",{className:"p-2 text-[11px] text-[var(--wb-muted)]",children:["Drop items here for ",e.category,"."]}):m.jsx("div",{className:"grid max-h-40 gap-1.5 overflow-auto pr-0.5 wb-scrollbar",children:l.map(r=>m.jsx(Nc,{item:r,compact:!0,dense:!0,showDetails:e.showItemDetails,dragData:{kind:"bin",itemId:r.id,sourceCategory:e.category},onRemove:()=>e.store.removePinnedItem(e.category,r.id),onHover:c=>{const u=e.store.selectedSlot&&ha(e.store.selectedSlot)===e.category?e.store.selectedSlot:null;e.onHoverItem?.(c?r.id:null,c?u:null)}},`${e.category}-${r.id}`))})})]})}function AC(e){const[n,s]=_.useState(!1),l=_.useMemo(()=>[["helmet","chestplate","leggings","boots"],["ring1","ring2","bracelet","necklace"]],[]),r=_.useMemo(()=>[{key:"armor",title:"Armor Shelf",categories:["helmet","chestplate","leggings","boots"]},{key:"accessories",title:"Accessory Shelf",categories:["ring","bracelet","necklace"]},{key:"weapon",title:"Weapon Shelf",categories:["weapon"]}].filter(c=>c.key!=="weapon"),[]);return m.jsx($l,{className:"flex min-h-0 flex-col",title:"Build",headerRight:m.jsxs(m.Fragment,{children:[m.jsx(Te,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.undo(),children:"Undo"}),m.jsx(Te,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.redo(),children:"Redo"}),m.jsx(Te,{className:"px-2 py-1 text-xs",variant:n?"primary":"ghost",onClick:()=>s(c=>!c),children:n?"Hide Details":"Item Details"}),m.jsx(Te,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.clearAll(),children:"Clear All"})]}),children:m.jsxs("div",{className:"grid min-h-0 flex-1 grid-rows-[auto_1fr_auto] gap-2 p-2.5",children:[m.jsxs("div",{className:"grid gap-1.5 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)_minmax(0,1.05fr)]",children:[l.map((c,u)=>m.jsx("div",{className:"grid gap-1.5",children:c.map(f=>m.jsx(H0,{slot:f,catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem},f))},u)),m.jsxs("div",{className:"grid content-start gap-1.5",children:[m.jsx(H0,{slot:"weapon",catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem}),m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[m.jsxs("div",{className:"mb-1.5 flex items-center justify-between gap-2",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Weapon Shelf"}),m.jsx("div",{className:"text-[11px] text-[var(--wb-muted)]",children:"Pinned weapon candidates"})]}),m.jsx($0,{category:"weapon",catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem})]})]})]}),m.jsx(Zl,{className:"min-h-0 pr-1",children:m.jsx("div",{className:"grid gap-3",children:r.map(c=>m.jsxs("div",{className:"grid gap-1.5",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:c.title}),m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:c.categories.map(oh).join("  ")})]}),m.jsx("div",{className:ot("grid gap-2",c.categories.length===1?"grid-cols-1":c.categories.length===3?"lg:grid-cols-3":"md:grid-cols-2 xl:grid-cols-4"),children:c.categories.map(u=>m.jsx($0,{category:u,catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem},u))})]},c.key))})}),e.searchResults?m.jsx("div",{className:"flex min-h-[220px] max-h-[40vh] min-w-0 flex-col overflow-hidden rounded-xl border border-[var(--wb-border-muted)] bg-black/10",children:e.searchResults}):null,m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:m.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-3",children:[m.jsxs(Te,{variant:"ghost",className:"justify-start",onClick:e.onShareWorkbench,children:[m.jsx(rh,{size:14,className:"mr-2"}),"Share"]}),m.jsxs(Te,{variant:"ghost",className:"justify-start",onClick:e.onExportWorkbench,children:[m.jsx(oE,{size:14,className:"mr-2"}),"Export"]}),m.jsxs(Te,{variant:"ghost",className:"justify-start",onClick:e.onImportWorkbench,children:[m.jsx(OE,{size:14,className:"mr-2"}),"Import"]})]})})]})})}function $o(e){if(!e)return null;const n=e.startsWith("#")?e.slice(1):e;return n.trim()?n:null}function Z0(e){const n=$o(e),s=typeof window<"u"?new URL("builder/",window.location.href).href:"builder/";return n?`${s}#${n}`:s}const kC=[["helmet","helmet-choice"],["chestplate","chestplate-choice"],["leggings","leggings-choice"],["boots","boots-choice"],["ring1","ring1-choice"],["ring2","ring2-choice"],["bracelet","bracelet-choice"],["necklace","necklace-choice"],["weapon","weapon-choice"]];function F0(e){const n=e.trim();if(!n)return null;if(n.startsWith("#"))return $o(n);try{const s=new URL(n,window.location.origin);return $o(s.hash)}catch{return $o(n)}}class zC{isSupported(n){return F0(n)!==null}async encodeLegacyHash(n){if(n.legacyHash)return n.legacyHash;throw new Error("Legacy hash encoding is only available for imported legacy builds in Workbench v1. Use Workbench share link or open legacy builder for full encode.")}async decodeLegacyHash(n){const s=F0(n);if(!s)throw new Error("No legacy hash found to decode");if(typeof document>"u")return{legacyHash:s,level:null,slots:{}};const l=document.createElement("iframe");l.style.position="fixed",l.style.left="-99999px",l.style.width="1200px",l.style.height="900px",l.style.opacity="0",l.src=`../builder/#${s}`,document.body.appendChild(l);const r=3e4,c=Date.now();try{return await new Promise((f,g)=>{const p=window.setInterval(()=>{try{if(!l.contentDocument)return;const y=l.contentDocument,v=y.getElementById("weapon-choice"),x=y.getElementById("level-choice");if(!v||!x){Date.now()-c>r&&(window.clearInterval(p),g(new Error("Timed out waiting for legacy builder UI")));return}const S={};for(const[C,B]of kC){const P=y.getElementById(B)?.value?.trim();P&&(S[C]=P)}if(!S.weapon&&Date.now()-c<2e3)return;const w=x.value?.trim(),D=w?Number(w):null;window.clearInterval(p),f({legacyHash:s,level:Number.isFinite(D??NaN)?D:null,slots:S,sourceUrl:l.src})}catch(y){window.clearInterval(p),g(y)}},250)})}finally{l.remove()}}}const hf=new zC,Y0=e=>{let n;const s=new Set,l=(p,y)=>{const v=typeof p=="function"?p(n):p;if(!Object.is(v,n)){const x=n;n=y??(typeof v!="object"||v===null)?v:Object.assign({},n,v),s.forEach(S=>S(n,x))}},r=()=>n,f={setState:l,getState:r,getInitialState:()=>g,subscribe:p=>(s.add(p),()=>s.delete(p))},g=n=e(l,r,f);return f},OC=(e=>e?Y0(e):Y0),PC=e=>e;function BC(e,n=PC){const s=Zt.useSyncExternalStore(e.subscribe,Zt.useCallback(()=>n(e.getState()),[e,n]),Zt.useCallback(()=>n(e.getInitialState()),[e,n]));return Zt.useDebugValue(s),s}const IC=e=>{const n=OC(e),s=l=>BC(n,l);return Object.assign(s,n),s},LC=(e=>IC);var bx=Symbol.for("immer-nothing"),G0=Symbol.for("immer-draftable"),zn=Symbol.for("immer-state");function na(e,...n){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ar=Object.getPrototypeOf;function Yl(e){return!!e&&!!e[zn]}function Us(e){return e?xx(e)||Array.isArray(e)||!!e[G0]||!!e.constructor?.[G0]||cr(e)||jc(e):!1}var qC=Object.prototype.constructor.toString(),V0=new WeakMap;function xx(e){if(!e||typeof e!="object")return!1;const n=Object.getPrototypeOf(e);if(n===null||n===Object.prototype)return!0;const s=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;if(s===Object)return!0;if(typeof s!="function")return!1;let l=V0.get(s);return l===void 0&&(l=Function.toString.call(s),V0.set(s,l)),l===qC}function rc(e,n,s=!0){Tc(e)===0?(s?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{n(r,e[r],e)}):e.forEach((l,r)=>n(r,l,e))}function Tc(e){const n=e[zn];return n?n.type_:Array.isArray(e)?1:cr(e)?2:jc(e)?3:0}function qf(e,n){return Tc(e)===2?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function Sx(e,n,s){const l=Tc(e);l===2?e.set(n,s):l===3?e.add(s):e[n]=s}function UC(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}function cr(e){return e instanceof Map}function jc(e){return e instanceof Set}function Is(e){return e.copy_||e.base_}function Uf(e,n){if(cr(e))return new Map(e);if(jc(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const s=xx(e);if(n===!0||n==="class_only"&&!s){const l=Object.getOwnPropertyDescriptors(e);delete l[zn];let r=Reflect.ownKeys(l);for(let c=0;c<r.length;c++){const u=r[c],f=l[u];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(l[u]={configurable:!0,writable:!0,enumerable:f.enumerable,value:e[u]})}return Object.create(ar(e),l)}else{const l=ar(e);if(l!==null&&s)return{...e};const r=Object.create(l);return Object.assign(r,e)}}function _h(e,n=!1){return Mc(e)||Yl(e)||!Us(e)||(Tc(e)>1&&Object.defineProperties(e,{set:zo,add:zo,clear:zo,delete:zo}),Object.freeze(e),n&&Object.values(e).forEach(s=>_h(s,!0))),e}function HC(){na(2)}var zo={value:HC};function Mc(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var $C={};function Hs(e){const n=$C[e];return n||na(0,e),n}var sr;function wx(){return sr}function ZC(e,n){return{drafts_:[],parent_:e,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function K0(e,n){n&&(Hs("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=n)}function Hf(e){$f(e),e.drafts_.forEach(FC),e.drafts_=null}function $f(e){e===sr&&(sr=e.parent_)}function W0(e){return sr=ZC(sr,e)}function FC(e){const n=e[zn];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function X0(e,n){n.unfinalizedDrafts_=n.drafts_.length;const s=n.drafts_[0];return e!==void 0&&e!==s?(s[zn].modified_&&(Hf(n),na(4)),Us(e)&&(e=oc(n,e),n.parent_||cc(n,e)),n.patches_&&Hs("Patches").generateReplacementPatches_(s[zn].base_,e,n.patches_,n.inversePatches_)):e=oc(n,s,[]),Hf(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),e!==bx?e:void 0}function oc(e,n,s){if(Mc(n))return n;const l=e.immer_.shouldUseStrictIteration(),r=n[zn];if(!r)return rc(n,(c,u)=>Q0(e,r,n,c,u,s),l),n;if(r.scope_!==e)return n;if(!r.modified_)return cc(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const c=r.copy_;let u=c,f=!1;r.type_===3&&(u=new Set(c),c.clear(),f=!0),rc(u,(g,p)=>Q0(e,r,c,g,p,s,f),l),cc(e,c,!1),s&&e.patches_&&Hs("Patches").generatePatches_(r,s,e.patches_,e.inversePatches_)}return r.copy_}function Q0(e,n,s,l,r,c,u){if(r==null||typeof r!="object"&&!u)return;const f=Mc(r);if(!(f&&!u)){if(Yl(r)){const g=c&&n&&n.type_!==3&&!qf(n.assigned_,l)?c.concat(l):void 0,p=oc(e,r,g);if(Sx(s,l,p),Yl(p))e.canAutoFreeze_=!1;else return}else u&&s.add(r);if(Us(r)&&!f){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||n&&n.base_&&n.base_[l]===r&&f)return;oc(e,r),(!n||!n.scope_.parent_)&&typeof l!="symbol"&&(cr(s)?s.has(l):Object.prototype.propertyIsEnumerable.call(s,l))&&cc(e,r)}}}function cc(e,n,s=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&_h(n,s)}function YC(e,n){const s=Array.isArray(e),l={type_:s?1:0,scope_:n?n.scope_:wx(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=l,c=Eh;s&&(r=[l],c=lr);const{revoke:u,proxy:f}=Proxy.revocable(r,c);return l.draft_=f,l.revoke_=u,f}var Eh={get(e,n){if(n===zn)return e;const s=Is(e);if(!qf(s,n))return GC(e,s,n);const l=s[n];return e.finalized_||!Us(l)?l:l===mf(e.base_,n)?(gf(e),e.copy_[n]=Ff(l,e)):l},has(e,n){return n in Is(e)},ownKeys(e){return Reflect.ownKeys(Is(e))},set(e,n,s){const l=_x(Is(e),n);if(l?.set)return l.set.call(e.draft_,s),!0;if(!e.modified_){const r=mf(Is(e),n),c=r?.[zn];if(c&&c.base_===s)return e.copy_[n]=s,e.assigned_[n]=!1,!0;if(UC(s,r)&&(s!==void 0||qf(e.base_,n)))return!0;gf(e),Zf(e)}return e.copy_[n]===s&&(s!==void 0||n in e.copy_)||Number.isNaN(s)&&Number.isNaN(e.copy_[n])||(e.copy_[n]=s,e.assigned_[n]=!0),!0},deleteProperty(e,n){return mf(e.base_,n)!==void 0||n in e.base_?(e.assigned_[n]=!1,gf(e),Zf(e)):delete e.assigned_[n],e.copy_&&delete e.copy_[n],!0},getOwnPropertyDescriptor(e,n){const s=Is(e),l=Reflect.getOwnPropertyDescriptor(s,n);return l&&{writable:!0,configurable:e.type_!==1||n!=="length",enumerable:l.enumerable,value:s[n]}},defineProperty(){na(11)},getPrototypeOf(e){return ar(e.base_)},setPrototypeOf(){na(12)}},lr={};rc(Eh,(e,n)=>{lr[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});lr.deleteProperty=function(e,n){return lr.set.call(this,e,n,void 0)};lr.set=function(e,n,s){return Eh.set.call(this,e[0],n,s,e[0])};function mf(e,n){const s=e[zn];return(s?Is(s):e)[n]}function GC(e,n,s){const l=_x(n,s);return l?"value"in l?l.value:l.get?.call(e.draft_):void 0}function _x(e,n){if(!(n in e))return;let s=ar(e);for(;s;){const l=Object.getOwnPropertyDescriptor(s,n);if(l)return l;s=ar(s)}}function Zf(e){e.modified_||(e.modified_=!0,e.parent_&&Zf(e.parent_))}function gf(e){e.copy_||(e.copy_=Uf(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var VC=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(n,s,l)=>{if(typeof n=="function"&&typeof s!="function"){const c=s;s=n;const u=this;return function(g=c,...p){return u.produce(g,y=>s.call(this,y,...p))}}typeof s!="function"&&na(6),l!==void 0&&typeof l!="function"&&na(7);let r;if(Us(n)){const c=W0(this),u=Ff(n,void 0);let f=!0;try{r=s(u),f=!1}finally{f?Hf(c):$f(c)}return K0(c,l),X0(r,c)}else if(!n||typeof n!="object"){if(r=s(n),r===void 0&&(r=n),r===bx&&(r=void 0),this.autoFreeze_&&_h(r,!0),l){const c=[],u=[];Hs("Patches").generateReplacementPatches_(n,r,c,u),l(c,u)}return r}else na(1,n)},this.produceWithPatches=(n,s)=>{if(typeof n=="function")return(u,...f)=>this.produceWithPatches(u,g=>n(g,...f));let l,r;return[this.produce(n,s,(u,f)=>{l=u,r=f}),l,r]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Us(e)||na(8),Yl(e)&&(e=KC(e));const n=W0(this),s=Ff(e,void 0);return s[zn].isManual_=!0,$f(n),s}finishDraft(e,n){const s=e&&e[zn];(!s||!s.isManual_)&&na(9);const{scope_:l}=s;return K0(l,n),X0(void 0,l)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let s;for(s=n.length-1;s>=0;s--){const r=n[s];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}s>-1&&(n=n.slice(s+1));const l=Hs("Patches").applyPatches_;return Yl(e)?l(e,n):this.produce(e,r=>l(r,n))}};function Ff(e,n){const s=cr(e)?Hs("MapSet").proxyMap_(e,n):jc(e)?Hs("MapSet").proxySet_(e,n):YC(e,n);return(n?n.scope_:wx()).drafts_.push(s),s}function KC(e){return Yl(e)||na(10,e),Ex(e)}function Ex(e){if(!Us(e)||Mc(e))return e;const n=e[zn];let s,l=!0;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,s=Uf(e,n.scope_.immer_.useStrictShallowCopy_),l=n.scope_.immer_.shouldUseStrictIteration()}else s=Uf(e,!0);return rc(s,(r,c)=>{Sx(s,r,Ex(c))},l),n&&(n.finalized_=!1),s}var WC=new VC,XC=WC.produce;const QC=e=>(n,s,l)=>(l.setState=(r,c,...u)=>{const f=typeof r=="function"?XC(r):r;return n(f,c,...u)},e(l.setState,s,l)),JC=QC,Zo={itemId:null,slot:null};function Nx(){return Object.fromEntries(nt.map(e=>[e,null]))}function Tx(){return Object.fromEntries(ms.map(e=>[e,[]]))}function eA(){return Object.fromEntries(nt.map(e=>[e,!1]))}function J0(){return{slots:Nx(),craftedSlots:{},binsByCategory:Tx(),locks:eA(),level:106,characterClass:null,selectedSlot:"weapon",comparePreview:{...Zo},legacyHash:null}}function Yf(e){return{slots:{...e.slots},craftedSlots:{...e.craftedSlots},binsByCategory:Object.fromEntries(ms.map(n=>[n,[...e.binsByCategory[n]]])),locks:{...e.locks},level:e.level,characterClass:e.characterClass,selectedSlot:e.selectedSlot,comparePreview:{...e.comparePreview},legacyHash:e.legacyHash}}function un(e){e.undoStack.push(Yf(e)),e.undoStack.length>100&&e.undoStack.shift(),e.redoStack=[]}function pf(e,n){e.slots={...n.slots},e.craftedSlots={...n.craftedSlots},e.binsByCategory=Object.fromEntries(ms.map(s=>[s,[...n.binsByCategory[s]]])),e.locks={...n.locks},e.level=n.level,e.characterClass=n.characterClass,e.selectedSlot=n.selectedSlot,e.comparePreview={...n.comparePreview},e.legacyHash=n.legacyHash}function vf(e,n){e.includes(n)||e.unshift(n)}const Oo=LC()(JC((e,n)=>({...J0(),undoStack:[],redoStack:[],setLevel(s){e(l=>{un(l),l.level=Math.min(106,Math.max(1,Math.round(s)))})},setCharacterClass(s){e(l=>{un(l),l.characterClass=s})},setSelectedSlot(s){e(l=>{l.selectedSlot=s})},setComparePreview(s){e(l=>{if(!s){l.comparePreview={...Zo};return}l.comparePreview={itemId:s.itemId??l.comparePreview.itemId,slot:s.slot??l.comparePreview.slot}})},pinItem(s,l){e(r=>{un(r),vf(r.binsByCategory[s],l)})},removePinnedItem(s,l){e(r=>{un(r),r.binsByCategory[s]=r.binsByCategory[s].filter(c=>c!==l)})},clearCategory(s){e(l=>{un(l),l.binsByCategory[s]=[]})},clearAll(){e(s=>{un(s),s.slots=Nx(),s.craftedSlots={},s.binsByCategory=Tx(),s.comparePreview={...Zo},s.legacyHash=null})},equipItem(s,l){e(r=>{un(r),r.slots[s]=l,delete r.craftedSlots[s],r.selectedSlot=s})},moveSlotToBin(s){e(l=>{const r=l.slots[s];if(r==null)return;un(l);const c=ha(s);vf(l.binsByCategory[c],r),l.slots[s]=null})},swapSlots(s,l){e(r=>{un(r);const c=r.slots[s];r.slots[s]=r.slots[l],r.slots[l]=c})},assignDraggedItemToSlot({targetSlot:s,source:l,itemId:r,sourceCategory:c,sourceSlot:u}){e(f=>{un(f);const g=f.slots[s];f.slots[s]=r,delete f.craftedSlots[s],f.selectedSlot=s,l==="bin"&&c&&(f.binsByCategory[c]=f.binsByCategory[c].filter(p=>p!==r)),l==="slot"&&u&&u!==s&&(f.slots[u]=g??null)})},assignDraggedItemToBin({targetCategory:s,source:l,itemId:r,sourceCategory:c,sourceSlot:u}){e(f=>{un(f),l==="bin"&&c&&(f.binsByCategory[c]=f.binsByCategory[c].filter(g=>g!==r)),l==="slot"&&u&&(f.slots[u]=null),vf(f.binsByCategory[s],r)})},toggleLock(s){e(l=>{un(l),l.locks[s]=!l.locks[s]})},equipCraftedItem(s,l){e(r=>{un(r),r.slots[s]=null,r.craftedSlots[s]=l,r.selectedSlot=s})},clearCraftedSlot(s){e(l=>{un(l),delete l.craftedSlots[s]})},undo(){const s=n(),l=s.undoStack[s.undoStack.length-1];l&&e(r=>{const c=Yf(r);r.undoStack.pop(),r.redoStack.push(c),pf(r,l)})},redo(){const s=n(),l=s.redoStack[s.redoStack.length-1];l&&e(r=>{const c=Yf(r);r.redoStack.pop(),r.undoStack.push(c),pf(r,l)})},hydrateSnapshot(s){e(l=>{const r=J0(),c={...r,...s,slots:{...r.slots,...s.slots??{}},craftedSlots:{...r.craftedSlots,...s.craftedSlots??{}},locks:{...r.locks,...s.locks??{}},binsByCategory:{...r.binsByCategory,...s.binsByCategory??{}},comparePreview:{...r.comparePreview,...s.comparePreview??{}}};pf(l,c),l.undoStack=[],l.redoStack=[]})},loadCandidate(s){e(l=>{un(l),l.slots={...s},l.comparePreview={...Zo}})},setLegacyHash(s){e(l=>{l.legacyHash=s})}})));var yf={exports:{}},ey;function tA(){return ey||(ey=1,(function(e){var n=(function(){var s=String.fromCharCode,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",c={};function u(g,p){if(!c[g]){c[g]={};for(var y=0;y<g.length;y++)c[g][g.charAt(y)]=y}return c[g][p]}var f={compressToBase64:function(g){if(g==null)return"";var p=f._compress(g,6,function(y){return l.charAt(y)});switch(p.length%4){default:case 0:return p;case 1:return p+"===";case 2:return p+"==";case 3:return p+"="}},decompressFromBase64:function(g){return g==null?"":g==""?null:f._decompress(g.length,32,function(p){return u(l,g.charAt(p))})},compressToUTF16:function(g){return g==null?"":f._compress(g,15,function(p){return s(p+32)})+" "},decompressFromUTF16:function(g){return g==null?"":g==""?null:f._decompress(g.length,16384,function(p){return g.charCodeAt(p)-32})},compressToUint8Array:function(g){for(var p=f.compress(g),y=new Uint8Array(p.length*2),v=0,x=p.length;v<x;v++){var S=p.charCodeAt(v);y[v*2]=S>>>8,y[v*2+1]=S%256}return y},decompressFromUint8Array:function(g){if(g==null)return f.decompress(g);for(var p=new Array(g.length/2),y=0,v=p.length;y<v;y++)p[y]=g[y*2]*256+g[y*2+1];var x=[];return p.forEach(function(S){x.push(s(S))}),f.decompress(x.join(""))},compressToEncodedURIComponent:function(g){return g==null?"":f._compress(g,6,function(p){return r.charAt(p)})},decompressFromEncodedURIComponent:function(g){return g==null?"":g==""?null:(g=g.replace(/ /g,"+"),f._decompress(g.length,32,function(p){return u(r,g.charAt(p))}))},compress:function(g){return f._compress(g,16,function(p){return s(p)})},_compress:function(g,p,y){if(g==null)return"";var v,x,S={},T={},w="",D="",C="",B=2,z=3,P=2,I=[],j=0,N=0,L;for(L=0;L<g.length;L+=1)if(w=g.charAt(L),Object.prototype.hasOwnProperty.call(S,w)||(S[w]=z++,T[w]=!0),D=C+w,Object.prototype.hasOwnProperty.call(S,D))C=D;else{if(Object.prototype.hasOwnProperty.call(T,C)){if(C.charCodeAt(0)<256){for(v=0;v<P;v++)j=j<<1,N==p-1?(N=0,I.push(y(j)),j=0):N++;for(x=C.charCodeAt(0),v=0;v<8;v++)j=j<<1|x&1,N==p-1?(N=0,I.push(y(j)),j=0):N++,x=x>>1}else{for(x=1,v=0;v<P;v++)j=j<<1|x,N==p-1?(N=0,I.push(y(j)),j=0):N++,x=0;for(x=C.charCodeAt(0),v=0;v<16;v++)j=j<<1|x&1,N==p-1?(N=0,I.push(y(j)),j=0):N++,x=x>>1}B--,B==0&&(B=Math.pow(2,P),P++),delete T[C]}else for(x=S[C],v=0;v<P;v++)j=j<<1|x&1,N==p-1?(N=0,I.push(y(j)),j=0):N++,x=x>>1;B--,B==0&&(B=Math.pow(2,P),P++),S[D]=z++,C=String(w)}if(C!==""){if(Object.prototype.hasOwnProperty.call(T,C)){if(C.charCodeAt(0)<256){for(v=0;v<P;v++)j=j<<1,N==p-1?(N=0,I.push(y(j)),j=0):N++;for(x=C.charCodeAt(0),v=0;v<8;v++)j=j<<1|x&1,N==p-1?(N=0,I.push(y(j)),j=0):N++,x=x>>1}else{for(x=1,v=0;v<P;v++)j=j<<1|x,N==p-1?(N=0,I.push(y(j)),j=0):N++,x=0;for(x=C.charCodeAt(0),v=0;v<16;v++)j=j<<1|x&1,N==p-1?(N=0,I.push(y(j)),j=0):N++,x=x>>1}B--,B==0&&(B=Math.pow(2,P),P++),delete T[C]}else for(x=S[C],v=0;v<P;v++)j=j<<1|x&1,N==p-1?(N=0,I.push(y(j)),j=0):N++,x=x>>1;B--,B==0&&(B=Math.pow(2,P),P++)}for(x=2,v=0;v<P;v++)j=j<<1|x&1,N==p-1?(N=0,I.push(y(j)),j=0):N++,x=x>>1;for(;;)if(j=j<<1,N==p-1){I.push(y(j));break}else N++;return I.join("")},decompress:function(g){return g==null?"":g==""?null:f._decompress(g.length,32768,function(p){return g.charCodeAt(p)})},_decompress:function(g,p,y){var v=[],x=4,S=4,T=3,w="",D=[],C,B,z,P,I,j,N,L={val:y(0),position:p,index:1};for(C=0;C<3;C+=1)v[C]=C;for(z=0,I=Math.pow(2,2),j=1;j!=I;)P=L.val&L.position,L.position>>=1,L.position==0&&(L.position=p,L.val=y(L.index++)),z|=(P>0?1:0)*j,j<<=1;switch(z){case 0:for(z=0,I=Math.pow(2,8),j=1;j!=I;)P=L.val&L.position,L.position>>=1,L.position==0&&(L.position=p,L.val=y(L.index++)),z|=(P>0?1:0)*j,j<<=1;N=s(z);break;case 1:for(z=0,I=Math.pow(2,16),j=1;j!=I;)P=L.val&L.position,L.position>>=1,L.position==0&&(L.position=p,L.val=y(L.index++)),z|=(P>0?1:0)*j,j<<=1;N=s(z);break;case 2:return""}for(v[3]=N,B=N,D.push(N);;){if(L.index>g)return"";for(z=0,I=Math.pow(2,T),j=1;j!=I;)P=L.val&L.position,L.position>>=1,L.position==0&&(L.position=p,L.val=y(L.index++)),z|=(P>0?1:0)*j,j<<=1;switch(N=z){case 0:for(z=0,I=Math.pow(2,8),j=1;j!=I;)P=L.val&L.position,L.position>>=1,L.position==0&&(L.position=p,L.val=y(L.index++)),z|=(P>0?1:0)*j,j<<=1;v[S++]=s(z),N=S-1,x--;break;case 1:for(z=0,I=Math.pow(2,16),j=1;j!=I;)P=L.val&L.position,L.position>>=1,L.position==0&&(L.position=p,L.val=y(L.index++)),z|=(P>0?1:0)*j,j<<=1;v[S++]=s(z),N=S-1,x--;break;case 2:return D.join("")}if(x==0&&(x=Math.pow(2,T),T++),v[N])w=v[N];else if(N===S)w=B+B.charAt(0);else return null;D.push(w),v[S++]=B+w.charAt(0),x--,B=w,x==0&&(x=Math.pow(2,T),T++)}}};return f})();e!=null?e.exports=n:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return n})})(yf)),yf.exports}var nA=tA();const jx=Qf(nA),Gf={helmet:"h",chestplate:"c",leggings:"l",boots:"b",ring1:"r1",ring2:"r2",bracelet:"br",necklace:"n",weapon:"w"},Po=Object.fromEntries(Object.entries(Gf).map(([e,n])=>[n,e])),aA=er({slots:Ki(Sn(),ta().int().nullable()).optional(),binsByCategory:Ki(Sn(),kn(ta().int())).optional(),locks:Ki(Sn(),Fi()).optional(),level:ta().int().min(1).max(106).optional(),characterClass:ac(["Warrior","Assassin","Mage","Archer","Shaman"]).nullable().optional(),selectedSlot:Sn().nullable().optional(),legacyHash:Sn().nullable().optional()}).passthrough(),sA=er({version:Sn().nullable().optional(),selectedByClass:er({Warrior:kn(ta().int()).optional(),Assassin:kn(ta().int()).optional(),Mage:kn(ta().int()).optional(),Archer:kn(ta().int()).optional(),Shaman:kn(ta().int()).optional()}).partial().default({})});function lA(e){const n=e.replace(/-/g,"+").replace(/_/g,"/").padEnd(Math.ceil(e.length/4)*4,"="),s=atob(n),l=Uint8Array.from(s,r=>r.charCodeAt(0));return new TextDecoder().decode(l)}function Mx(e){const n=jx.decompressFromEncodedURIComponent(e);if(n!=null&&n!=="")return n;try{return lA(e)}catch{return null}}function Dx(e){return jx.compressToEncodedURIComponent(e)}function ty(e){try{return JSON.parse(e)}catch{return null}}function Rx(e){const n=e.searchParams.get("q")??"",s=e.searchParams.get("sort"),l=s?s.split(",").map(C=>C.trim()).filter(Boolean):[],r=e.searchParams.get("sdesc"),c=e.searchParams.get("view"),u=e.searchParams.get("wearLevel"),f=e.searchParams.get("classCompat"),g=e.searchParams.get("excludeRestricted"),p=(e.searchParams.get("cats")??"").split(",").map(C=>C.trim()).filter(Boolean),y=(e.searchParams.get("types")??"").split(",").map(C=>C.trim()).filter(Boolean),v=(e.searchParams.get("tiers")??"").split(",").map(C=>C.trim()).filter(Boolean),x=(e.searchParams.get("classReqs")??"").split(",").map(C=>C.trim()).filter(Boolean),S=(e.searchParams.get("majorIds")??"").split(",").map(C=>C.trim()).filter(Boolean),T=ty(e.searchParams.get("ranges")??"")??{},w=ty(e.searchParams.get("excludeRanges")??"")??{},D=e.searchParams.get("resultsBelow");return wb({...za,text:n,sortKeys:l.length>0?l:za.sortKeys,sortDescending:r===null?za.sortDescending:r!=="0",viewMode:c??za.viewMode,onlyWearableAtLevel:u?Number(u):za.onlyWearableAtLevel,onlyClassCompatible:f==="1",excludeRestricted:g===null?!1:g!=="0",categories:p,types:y,tiers:v,classReqs:x,majorIds:S,numericRanges:T,exclusionRanges:w,resultsBelowBuild:D===null?za.resultsBelowBuild:D==="1"})}function iA(e){const n=e.s??e.slots,s=e.k??e.locks,l=e.l??e.level,r=e.c??e.characterClass,c=e.h??e.legacyHash;let u=e.selectedSlot;typeof u=="string"&&Po[u]&&(u=Po[u]);const f=e.binsByCategory;if(n&&typeof n=="object"){const g={};for(const[p,y]of Object.entries(n)){const v=Po[p]??p;g[v]=typeof y=="number"||y===null?y:null}e={...e,slots:g}}if(s&&typeof s=="object"){const g={};for(const[p,y]of Object.entries(s)){const v=Po[p]??p;g[v]=!!y}e={...e,locks:g}}return l!==void 0&&(e={...e,level:l}),r!==void 0&&(e={...e,characterClass:r}),c!==void 0&&(e={...e,legacyHash:c}),u!==void 0&&(e={...e,selectedSlot:u}),f!==void 0&&(e={...e,binsByCategory:f}),e}function Cx(e){const n=e.searchParams.get("wb");if(!n)return null;try{const s=Mx(n);if(!s)return null;const l=JSON.parse(s),r=iA(l),c=aA.parse(r),u=Object.fromEntries(nt.map(p=>[p,c.slots?.[p]??null])),f=Object.fromEntries(ms.map(p=>[p,c.binsByCategory?.[p]??[]])),g=Object.fromEntries(nt.map(p=>[p,!!c.locks?.[p]]));return{slots:u,binsByCategory:f,locks:g,level:c.level,characterClass:c.characterClass??null,selectedSlot:c.selectedSlot??void 0,legacyHash:c.legacyHash??null}}catch{return null}}function Ax(e){const n=e.searchParams.get("atree");if(!n)return null;try{const s=Mx(n);if(!s)return null;const l=JSON.parse(s),r=sA.parse({version:l.v??l.version,selectedByClass:l.s??l.selectedByClass});return{version:r.version??null,selectedByClass:r.selectedByClass}}catch{return null}}function rA(e=window.location){const n=new URL(e.href),s=n.hash?n.hash.slice(1):null;return{search:Rx(n),workbenchPatch:Cx(n),legacyHash:s||null,mode:n.searchParams.get("mode"),abilityTree:Ax(n)}}function kx(e){const n={};for(const[r,c]of Object.entries(e.slots)){const u=Gf[r]??r;n[u]=c}const s={};for(const[r,c]of Object.entries(e.locks))c&&(s[Gf[r]??r]=!0);const l={s:n,k:Object.keys(s).length>0?s:void 0,l:e.level,c:e.characterClass,h:e.legacyHash};return Dx(JSON.stringify(l))}function ny(e){const n=new URL(window.location.origin+window.location.pathname),s=n.searchParams;s.set("wb",kx(e.workbenchSnapshot)),e.abilityTreeState&&Object.keys(e.abilityTreeState.selectedByClass??{}).length>0?s.set("atree",Dx(JSON.stringify({v:e.abilityTreeState.version??null,s:e.abilityTreeState.selectedByClass}))):s.delete("atree"),e.mode?s.set("mode",e.mode):s.delete("mode");const l=e.legacyHash??e.workbenchSnapshot.legacyHash;n.hash=l?`#${l}`:"",e.replace?window.history.replaceState({},"",n):window.history.pushState({},"",n)}const da={legacyBaseDps:1,legacyEhp:.7,dpsProxy:1,spellProxy:0,meleeProxy:0,ehpProxy:.6,speed:.4,sustain:.35,skillPointTotal:.15,reqTotalPenalty:.2},Aa={characterClass:null,level:106,mustIncludeIds:[],excludedIds:[],lockedSlots:{},target:{},allowedTiers:[],requiredMajorIds:[],excludedMajorIds:[],weaponAttackSpeeds:[],minPowderSlots:null,onlyPinnedItems:!1,weights:da,topN:50,topKPerSlot:80,beamWidth:350,maxStates:12e4,useExhaustiveSmallPool:!0,exhaustiveStateLimit:25e4,allowRestricted:!0};function oA(e){return e.aggregated.hprTotal*.9+e.aggregated.mr*14+e.aggregated.ms*10+e.aggregated.ls*9}function cA(e,n){let s=0;const{target:l}=n;return typeof l.minLegacyBaseDps=="number"&&e.derived.legacyBaseDps<l.minLegacyBaseDps&&(s+=(l.minLegacyBaseDps-e.derived.legacyBaseDps)*4),typeof l.minLegacyEhp=="number"&&e.derived.legacyEhp<l.minLegacyEhp&&(s+=(l.minLegacyEhp-e.derived.legacyEhp)*.8),typeof l.minDpsProxy=="number"&&e.derived.dpsProxy<l.minDpsProxy&&(s+=(l.minDpsProxy-e.derived.dpsProxy)*4),typeof l.minEhpProxy=="number"&&e.derived.ehpProxy<l.minEhpProxy&&(s+=(l.minEhpProxy-e.derived.ehpProxy)*1.1),typeof l.minMr=="number"&&e.aggregated.mr<l.minMr&&(s+=(l.minMr-e.aggregated.mr)*45),typeof l.minMs=="number"&&e.aggregated.ms<l.minMs&&(s+=(l.minMs-e.aggregated.ms)*35),typeof l.minSpeed=="number"&&e.aggregated.speed<l.minSpeed&&(s+=(l.minSpeed-e.aggregated.speed)*12),typeof l.minSkillPointTotal=="number"&&e.derived.skillPointTotal<l.minSkillPointTotal&&(s+=(l.minSkillPointTotal-e.derived.skillPointTotal)*15),typeof l.maxReqTotal=="number"&&e.derived.reqTotal>l.maxReqTotal&&(s+=(e.derived.reqTotal-l.maxReqTotal)*8),s}function zx(e,n,s){const l=oA(e),r=e.derived.reqTotal*n.reqTotalPenalty,c=cA(e,s),u={legacyBaseDps:e.derived.legacyBaseDps*n.legacyBaseDps,legacyEhp:e.derived.legacyEhp*n.legacyEhp,dpsProxy:e.derived.dpsProxy*n.dpsProxy,spellProxy:e.derived.spellProxy*n.spellProxy,meleeProxy:e.derived.meleeProxy*n.meleeProxy,ehpProxy:e.derived.ehpProxy*n.ehpProxy,speed:e.aggregated.speed*n.speed,sustain:l*n.sustain,skillPointTotal:e.derived.skillPointTotal*n.skillPointTotal,reqPenalty:r,thresholdPenalty:c};return{score:u.legacyBaseDps+u.legacyEhp+u.dpsProxy+u.spellProxy+u.meleeProxy+u.ehpProxy+u.speed+u.sustain+u.skillPointTotal-u.reqPenalty-u.thresholdPenalty,breakdown:u}}function uA(e,n){const s=new Map;for(const l of nt){const r=e[l];if(r==null)continue;const c=n.itemSetName.get(r);c&&s.set(c,(s.get(c)??0)+1)}return s}function Nh(e,n,s){const l=s.itemSetName.get(e);if(!l)return!1;const r=s.setsMeta.get(l);if(!r)return!1;let c=0;for(const u of nt){const f=n[u];f!=null&&s.itemSetName.get(f)===l&&c++}return r.illegalCounts.includes(c+1)}const bf=[[10,10,10,10,10],[20,20,20,20,20],[30,30,30,30,30]],ay=["str","dex","int","def","agi"],Ba=["SUPER_SLOW","VERY_SLOW","SLOW","NORMAL","FAST","VERY_FAST","SUPER_FAST"];function fs(e){return Math.round(e.numeric.atkTier||0)}function Th(e,n){switch(n){case"str":return Math.max(0,e.numeric.spStr);case"dex":return Math.max(0,e.numeric.spDex);case"int":return Math.max(0,e.numeric.spInt);case"def":return Math.max(0,e.numeric.spDef);case"agi":return Math.max(0,e.numeric.spAgi)}}function dA(e,n){switch(n){case"str":return e.numeric.reqStr;case"dex":return e.numeric.reqDex;case"int":return e.numeric.reqInt;case"def":return e.numeric.reqDef;case"agi":return e.numeric.reqAgi}}function fA(e,n){if(n.length===0)return 0;let s=0;for(const l of n)s+=Th(e,l)*10,s-=Math.max(0,dA(e,l))*.7;return s-=Math.max(0,e.roughScoreFields.reqTotal)*.12,s}function vs(e){return{...e}}function hA(e,n){const s=e.weapon;if(s==null)return null;const l=n.itemsById.get(s);if(!l)return null;const r=Ba.indexOf(l.atkSpd);if(r<0)return null;let c=0;for(const f of nt){const g=e[f];if(g==null)continue;const p=n.itemsById.get(g);p&&(c+=fs(p))}const u=Math.max(0,Math.min(Ba.length-1,r+c));return Ba[u]}function mA(e,n){let s=0;for(const l of nt){const r=e[l];if(r==null)continue;const c=n.itemsById.get(r);c&&(s+=fs(c))}return s}function gA(e,n,s){if(s.weaponAttackSpeeds.length===0)return null;const l=e.weapon;if(l==null)return null;const r=n.itemsById.get(l);if(!r)return null;const c=Ba.indexOf(r.atkSpd);if(c<0)return null;const u=[...new Set(s.weaponAttackSpeeds.map(y=>Ba.indexOf(y)).filter(y=>y>=0))].sort((y,v)=>y-v);if(u.length===0)return null;const f=mA(e,n),g=Math.max(0,Math.min(Ba.length-1,c+f));let p=0;if(!u.includes(g)){const y=u.reduce((v,x)=>Math.abs(x-g)<Math.abs(v-g)?x:v,u[0]);p=y>g?1:y<g?-1:0}return{baseSpeedIndex:c,fixedAtkTierTotal:f,allowedFinalIndices:u,allowedFinalIndexSet:new Set(u),preferredDirection:p}}function Ox(e,n,s){const l=new Array(e.length+1).fill(0),r=new Array(e.length+1).fill(0);for(let c=e.length-1;c>=0;c--){const u=n.get(e[c])??[];let f=0,g=0;if(u.length>0){f=1/0,g=-1/0;for(const p of u){const y=s.itemsById.get(p.id),v=y?fs(y):0;v<f&&(f=v),v>g&&(g=v)}Number.isFinite(f)||(f=0),Number.isFinite(g)||(g=0)}l[c]=l[c+1]+f,r[c]=r[c+1]+g}return{minSuffix:l,maxSuffix:r}}function Px(e,n,s,l){const r=e.fixedAtkTierTotal+n+s,c=e.fixedAtkTierTotal+n+l,u=Math.min(r,c),f=Math.max(r,c);for(let g=u;g<=f;g++){const p=Math.max(0,Math.min(Ba.length-1,e.baseSpeedIndex+g));if(e.allowedFinalIndexSet.has(p))return!0}return!1}function uc(e,n,s=0,l=0){if(!e||!e.preferredDirection)return 0;const r=e.fixedAtkTierTotal+(n??0),c=Math.max(0,Math.min(Ba.length-1,e.baseSpeedIndex+r+s)),u=Math.max(0,Math.min(Ba.length-1,e.baseSpeedIndex+r+l)),f=Math.min(c,u),g=Math.max(c,u);let p=1/0,y=0;for(let x=f;x<=g;x++){let S=1/0;for(const T of e.allowedFinalIndices){const w=Math.abs(T-x);w<S&&(S=w)}S<p&&(p=S),S>y&&(y=S)}if(!Number.isFinite(p)||y===0)return 0;const v=e.preferredDirection>0?f:-g;return-y*1e3-p*100+v}function pA(e,n,s,l){const{target:r}=n,c=[];if(typeof r.minLegacyBaseDps=="number"&&e.derived.legacyBaseDps<r.minLegacyBaseDps&&c.push(`minLegacyBaseDps (${e.derived.legacyBaseDps} < ${r.minLegacyBaseDps})`),typeof r.minLegacyEhp=="number"&&e.derived.legacyEhp<r.minLegacyEhp&&c.push(`minLegacyEhp (${e.derived.legacyEhp} < ${r.minLegacyEhp})`),typeof r.minDpsProxy=="number"&&e.derived.dpsProxy<r.minDpsProxy&&c.push(`minDpsProxy (${e.derived.dpsProxy} < ${r.minDpsProxy})`),typeof r.minEhpProxy=="number"&&e.derived.ehpProxy<r.minEhpProxy&&c.push(`minEhpProxy (${e.derived.ehpProxy} < ${r.minEhpProxy})`),typeof r.minMr=="number"&&e.aggregated.mr<r.minMr&&c.push(`minMr (${e.aggregated.mr} < ${r.minMr})`),typeof r.minMs=="number"&&e.aggregated.ms<r.minMs&&c.push(`minMs (${e.aggregated.ms} < ${r.minMs})`),typeof r.minSpeed=="number"&&e.aggregated.speed<r.minSpeed&&c.push(`minSpeed (${e.aggregated.speed} < ${r.minSpeed})`),typeof r.minSkillPointTotal=="number"&&e.derived.skillPointTotal<r.minSkillPointTotal&&c.push(`minSkillPointTotal (${e.derived.skillPointTotal} < ${r.minSkillPointTotal})`),typeof r.maxReqTotal=="number"&&e.derived.reqTotal>r.maxReqTotal&&c.push(`maxReqTotal (${e.derived.reqTotal} > ${r.maxReqTotal})`),(r.customNumericRanges?.length??0)>0&&s&&l)for(const u of r.customNumericRanges??[]){const f=u.key?.trim();if(!f)continue;let g=0;for(const p of nt){const y=s[p];if(y==null)continue;const v=l.itemsById.get(y);v&&(g+=v.numericIndex[f]??0)}typeof u.min=="number"&&g<u.min&&c.push(`${f} (${g} < ${u.min})`),typeof u.max=="number"&&g>u.max&&c.push(`${f} (${g} > ${u.max})`)}return c.length>0?{ok:!1,failedChecks:c}:{ok:!0}}function Bx(e,n,s,l){for(const u of nt){const f=e[u];if(f==null)continue;const g=n.itemsById.get(f);if(!g)return{ok:!1,reason:"item"};if(!Ix(g,s))return{ok:!1,reason:"item"}}const r=uA(e,n);for(const[u,f]of r){const g=n.setsMeta.get(u);if(g&&g.illegalCounts.includes(f))return{ok:!1,reason:"item"}}if(s.weaponAttackSpeeds.length>0){const u=hA(e,n);if(!u||!s.weaponAttackSpeeds.includes(u))return{ok:!1,reason:"attackSpeed"}}const c=pA(l,s,e,n);return c.ok?{ok:!0}:{ok:!1,reason:"thresholds",failedChecks:c.failedChecks}}function Ix(e,n){return!(!n.allowRestricted&&(e.restricted||e.deprecated)||e.level>n.level||!Fy(e,n.characterClass)||n.excludedIds.includes(e.id)||n.allowedTiers.length>0&&!n.allowedTiers.includes(e.tier)||n.minPowderSlots!=null&&e.powderSlots<n.minPowderSlots||n.excludedMajorIds.length>0&&n.excludedMajorIds.some(s=>e.majorIds.includes(s)))}const ka=2.5;function Vf(e,n){const s={...n};return typeof e.minLegacyBaseDps=="number"&&(s.legacyBaseDps=Math.max(s.legacyBaseDps,da.legacyBaseDps*ka)),typeof e.minLegacyEhp=="number"&&(s.legacyEhp=Math.max(s.legacyEhp,da.legacyEhp*ka)),typeof e.minDpsProxy=="number"&&(s.dpsProxy=Math.max(s.dpsProxy,da.dpsProxy*ka)),typeof e.minEhpProxy=="number"&&(s.ehpProxy=Math.max(s.ehpProxy,da.ehpProxy*ka)),(typeof e.minMr=="number"||typeof e.minMs=="number")&&(s.sustain=Math.max(s.sustain,da.sustain*ka)),typeof e.minSpeed=="number"&&(s.speed=Math.max(s.speed,da.speed*ka)),typeof e.minSkillPointTotal=="number"&&(s.skillPointTotal=Math.max(s.skillPointTotal,da.skillPointTotal*ka)),typeof e.maxReqTotal=="number"&&(s.reqTotalPenalty=Math.max(s.reqTotalPenalty,da.reqTotalPenalty*ka)),(e.customNumericRanges?.length??0)>0&&(s.sustain=Math.max(s.sustain,da.sustain*ka)),s}const vA=3,yA=2,bA=14;function xA(e,n){let s=e.numeric.baseDps*n.weights.legacyBaseDps+e.roughScoreFields.ehpProxy*n.weights.legacyEhp+e.roughScoreFields.offense*n.weights.dpsProxy+e.roughScoreFields.ehpProxy*n.weights.ehpProxy+e.numeric.spd*n.weights.speed+e.roughScoreFields.utility*n.weights.sustain+e.roughScoreFields.skillPointTotal*n.weights.skillPointTotal-e.roughScoreFields.reqTotal*n.weights.reqTotalPenalty;const l=n.target.customNumericRanges??[],c=l.some(u=>typeof u.min=="number")?bA:vA;for(const u of l){const f=u.key?.trim();if(!f)continue;const g=e.numericIndex[f]??0;typeof u.min=="number"&&(s+=g*c),typeof u.max=="number"&&(s-=g*yA)}return s}function Lx(e){const n=e.ring1??0,s=e.ring2??0,[l,r]=n<=s?[n,s]:[s,n];return[e.helmet??0,e.chestplate??0,e.leggings??0,e.boots??0,l,r,e.bracelet??0,e.necklace??0,e.weapon??0].join("|")}function qx(e,n){return ha(n)===e.category}function SA(e,n,s){const l=vs(e),r=new Set(nt.filter(c=>l[c]!=null));for(const c of s.mustIncludeIds){const u=n.itemsById.get(c);if(!u)continue;const g=nt.filter(p=>!r.has(p)&&qx(u,p))[0];g&&(l[g]=u.id,r.add(g))}return l}function wA(e,n){const s={str:0,dex:0,int:0,def:0,agi:0};for(const r of nt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);u&&(s.str=Math.max(s.str,u.numeric.reqStr),s.dex=Math.max(s.dex,u.numeric.reqDex),s.int=Math.max(s.int,u.numeric.reqInt),s.def=Math.max(s.def,u.numeric.reqDef),s.agi=Math.max(s.agi,u.numeric.reqAgi))}const l=ay.filter(r=>s[r]>100).sort((r,c)=>s[c]-s[r]);return l.length>0?l:ay.filter(r=>s[r]>=70).sort((r,c)=>s[c]-s[r]).slice(0,2)}function _A(e,n,s){if(s.length===0)return[];const l={str:0,dex:0,int:0,def:0,agi:0};for(const r of nt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);u&&(l.str=Math.max(l.str,u.numeric.reqStr),l.dex=Math.max(l.dex,u.numeric.reqDex),l.int=Math.max(l.int,u.numeric.reqInt),l.def=Math.max(l.def,u.numeric.reqDef),l.agi=Math.max(l.agi,u.numeric.reqAgi))}return s.map(r=>Math.max(0,l[r]-100))}function sy(e,n){return n.map(s=>Th(e,s))}function Fo(e,n){if(e.length===0)return n.slice();const s=new Array(e.length);for(let l=0;l<e.length;l++)s[l]=(e[l]??0)+(n[l]??0);return s}function EA(e,n,s){for(let l=0;l<s.length;l++)if((e[l]??0)+(n[l]??0)<s[l])return!1;return!0}function ly(e,n){let s=0;for(let l=0;l<n.length;l++)s+=Math.max(0,n[l]-(e[l]??0));return s}function iy(e,n,s,l){if(l.length===0)return 0;const r=n.get(e)??[];let c=0;for(const u of r){const f=s.itemsById.get(u.id);if(!f)continue;let g=0;for(const p of l)g+=Th(f,p);g>c&&(c=g)}return c}function dc(e){return(e.target.customNumericRanges??[]).map(n=>({key:(n.key??"").trim(),min:typeof n.min=="number"?n.min:void 0,max:typeof n.max=="number"?n.max:void 0})).filter(n=>n.key&&(typeof n.min=="number"||typeof n.max=="number"))}function Bo(e,n,s){const l=n.itemsById.get(e.id);return l?l.numericIndex[s]??0:0}function Ux(e,n,s){const l=s.map(()=>0);if(s.length===0)return l;for(const r of nt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);if(u)for(let f=0;f<s.length;f++)l[f]+=u.numericIndex[s[f]]??0}return l}function Hx(e){const{slotOrder:n,candidatePools:s,catalog:l,keys:r}=e,c=Array.from({length:n.length+1},()=>r.map(()=>0)),u=Array.from({length:n.length+1},()=>r.map(()=>0));if(r.length===0)return{maxSuffix:c,minSuffix:u};for(let f=n.length-1;f>=0;f--){const g=s.get(n[f])??[],p=r.map(()=>Number.NEGATIVE_INFINITY),y=r.map(()=>Number.POSITIVE_INFINITY);for(const v of g){const x=l.itemsById.get(v.id);if(x)for(let S=0;S<r.length;S++){const T=x.numericIndex[r[S]]??0;T>p[S]&&(p[S]=T),T<y[S]&&(y[S]=T)}}for(let v=0;v<r.length;v++){const x=Number.isFinite(p[v])?p[v]:0,S=Number.isFinite(y[v])?y[v]:0;c[f][v]=c[f+1][v]+x,u[f][v]=u[f+1][v]+S}}return{maxSuffix:c,minSuffix:u}}function NA(e,n,s,l,r=[]){const c=[],u=dc(s);for(const j of n.items)qx(j,e)&&(l&&!l.has(j.id)||Ix(j,s)&&c.push({id:j.id,rough:xA(j,s),reqTotal:j.roughScoreFields.reqTotal,skillPointTotal:j.roughScoreFields.skillPointTotal,utility:j.roughScoreFields.utility+j.numeric.spd*.8,level:j.level,atkTier:fs(j),spStr:j.numeric.spStr,spDex:j.numeric.spDex,spInt:j.numeric.spInt,spDef:j.numeric.spDef,spAgi:j.numeric.spAgi,supportFocus:fA(j,r)}));const f=[...c].sort((j,N)=>j.rough!==N.rough?N.rough-j.rough:j.id-N.id),g=[...c].sort((j,N)=>j.reqTotal!==N.reqTotal?j.reqTotal-N.reqTotal:j.level!==N.level?j.level-N.level:j.id-N.id),p=[...c].sort((j,N)=>j.skillPointTotal!==N.skillPointTotal?N.skillPointTotal-j.skillPointTotal:j.reqTotal!==N.reqTotal?j.reqTotal-N.reqTotal:j.id-N.id),y=[...c].sort((j,N)=>j.utility!==N.utility?N.utility-j.utility:j.reqTotal!==N.reqTotal?j.reqTotal-N.reqTotal:j.id-N.id),v=s.weaponAttackSpeeds.length>0?[...c].sort((j,N)=>{const L=Math.max(0,j.atkTier),se=Math.max(0,N.atkTier);return L!==se?se-L:j.atkTier!==N.atkTier?N.atkTier-j.atkTier:j.reqTotal!==N.reqTotal?j.reqTotal-N.reqTotal:j.skillPointTotal!==N.skillPointTotal?N.skillPointTotal-j.skillPointTotal:j.id-N.id}):[],x=r.length>0?[...c].sort((j,N)=>j.supportFocus!==N.supportFocus?N.supportFocus-j.supportFocus:j.reqTotal!==N.reqTotal?j.reqTotal-N.reqTotal:j.skillPointTotal!==N.skillPointTotal?N.skillPointTotal-j.skillPointTotal:j.id-N.id):[],S=r.map(j=>[...c].sort((N,L)=>{const se=j==="str"?N.spStr:j==="dex"?N.spDex:j==="int"?N.spInt:j==="def"?N.spDef:N.spAgi,ce=j==="str"?L.spStr:j==="dex"?L.spDex:j==="int"?L.spInt:j==="def"?L.spDef:L.spAgi;return se!==ce?ce-se:N.reqTotal!==L.reqTotal?N.reqTotal-L.reqTotal:N.supportFocus!==L.supportFocus?L.supportFocus-N.supportFocus:N.id-L.id})),T=u.filter(j=>typeof j.min=="number").map(j=>[...c].sort((N,L)=>{const se=Bo(N,n,j.key),ce=Bo(L,n,j.key);return se!==ce?ce-se:N.reqTotal!==L.reqTotal?N.reqTotal-L.reqTotal:N.skillPointTotal!==L.skillPointTotal?L.skillPointTotal-N.skillPointTotal:N.id-L.id})),w=u.filter(j=>typeof j.max=="number").map(j=>[...c].sort((N,L)=>{const se=Bo(N,n,j.key),ce=Bo(L,n,j.key);return se!==ce?se-ce:N.reqTotal!==L.reqTotal?N.reqTotal-L.reqTotal:N.skillPointTotal!==L.skillPointTotal?L.skillPointTotal-N.skillPointTotal:N.id-L.id})),D=Math.max(10,s.topKPerSlot),C=Math.min(140,Math.max(40,Math.floor(D*.8))),B=Math.min(c.length,D+C+(r.length>0?Math.min(60,r.length*12):0)+Math.min(80,u.length*14)),z=new Map,P=Math.min(12,Math.floor(D*.4),f.length);for(let j=0;j<P;j++){const N=f[j];z.set(N.id,{id:N.id,rough:N.rough})}const I=[{list:f,remaining:Math.max(0,D-P),cursor:0},{list:g,remaining:Math.floor(C*.28),cursor:0},{list:p,remaining:Math.floor(C*.24),cursor:0},{list:y,remaining:Math.floor(C*.18),cursor:0}];v.length>0&&I.push({list:v,remaining:Math.max(18,Math.floor(C*.22)),cursor:0}),x.length>0&&I.push({list:x,remaining:Math.max(16,Math.floor(C*.2)),cursor:0});for(const j of S)I.push({list:j,remaining:10,cursor:0});for(const j of T)I.push({list:j,remaining:35,cursor:0});for(const j of w)I.push({list:j,remaining:20,cursor:0});for(;z.size<B;){let j=!1;for(const N of I)if(!(N.remaining<=0))for(;N.cursor<N.list.length;){const L=N.list[N.cursor++];if(!z.has(L.id)){z.set(L.id,{id:L.id,rough:L.rough}),N.remaining--,j=!0;break}}if(!j)break}if(z.size<B)for(const j of f){if(z.size>=B)break;z.has(j.id)||z.set(j.id,{id:j.id,rough:j.rough})}return[...z.values()]}function TA(e){const n={};for(const s of nt){const l=ha(s),r=new Set(e.binsByCategory[l]??[]),c=e.slots[s];c!=null&&r.add(c),n[s]=r}return n}function $x(e,n,s){if(s.length===0)return!0;const l=new Set;for(const r of nt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);if(u)for(const f of u.majorIds)s.includes(f)&&l.add(f)}return s.every(r=>l.has(r))}function Zx(e,n){const s=new Array(e.length+1).fill(0);for(let l=e.length-1;l>=0;l--){const r=e[l],c=n.get(r)??[];let u=0;for(const f of c)f.rough>u&&(u=f.rough);s[l]=s[l+1]+u}return s}function Fx(e){const{poolSize:n,beamSize:s,remainingStages:l,processedStates:r,maxStates:c}=e;if(n<=0)return 0;const u=Math.max(0,c-r),f=Math.max(1,s*Math.max(1,l)),g=Math.floor(u/f),p=Math.max(8,Math.min(96,g));return Math.min(n,p)}function jA(e,n,s){let l=1;for(const r of e){const c=n.get(r)?.length??0;if(c===0)return 0;if(l*=c,l>s)return l}return l}function xf(e){const{beam:n,catalog:s,constraints:l,skillpointAssist:r,signal:c}=e,u=[],f=new Set,g={majorIds:0,spInvalid:0,duplicate:0,hardConstraints:0,hardAttackSpeed:0,hardThresholds:0,hardItem:0,thresholdFailureExample:void 0};for(const p of n){if(c?.aborted)throw new DOMException("Auto build cancelled","AbortError");if(!$x(p.slots,s,l.requiredMajorIds)){g.majorIds++;continue}const y=ic({slots:p.slots,level:l.level,characterClass:l.characterClass},s,r?{skillpointFeasibility:{extraBaseSkillPoints:r}}:void 0);if(!y.derived.skillpointFeasible){g.spInvalid++;continue}const v=Bx(p.slots,s,l,y);if(!v.ok){g.hardConstraints++,v.reason==="attackSpeed"?g.hardAttackSpeed++:v.reason==="thresholds"?(g.hardThresholds++,g.thresholdFailureExample===void 0&&v.failedChecks?.length&&(g.thresholdFailureExample=v.failedChecks[0])):g.hardItem++;continue}const x=Lx(p.slots);if(f.has(x)){g.duplicate++;continue}const{score:S,breakdown:T}=zx(y,l.weights,l);f.add(x),u.push({slots:vs(p.slots),score:S,scoreBreakdown:T,summary:y})}return u.sort((p,y)=>{if(p.score!==y.score)return y.score-p.score;for(const v of nt){const x=p.slots[v]??0,S=y.slots[v]??0;if(x!==S)return x-S}return 0}),{candidates:u,rejectStats:g}}function MA(e){const{slotOrder:n,candidatePools:s,baseSlots:l,catalog:r,constraints:c,focusStats:u,attackSpeedCtx:f,onProgress:g,signal:p}=e,y=Zx(n,s),v=f?Ox(n,s,r):null,x=_A(l,r,u),S=Array.from({length:n.length+1},()=>u.map(()=>0));for(let I=n.length-1;I>=0;I--){const j=s.get(n[I])??[],N=u.map(()=>0);for(const L of j){const se=r.itemsById.get(L.id);if(!se)continue;const ce=sy(se,u);for(let ee=0;ee<ce.length;ee++)ce[ee]>N[ee]&&(N[ee]=ce[ee])}S[I]=Fo(S[I+1],N)}const T=dc(c),w=T.map(I=>I.key),D=Hx({slotOrder:n,candidatePools:s,catalog:r,keys:w}),C=Ux(l,r,w);let B=[{slots:vs(l),orderIndex:0,roughScore:0,optimisticBound:y[0],feasibilityAssigned:0,focusSupport:u.map(()=>0),atkTierAssigned:0,customTotals:C}],z=0,P=!1;for(let I=0;I<n.length;I++){if(p?.aborted)throw new DOMException("Auto build cancelled","AbortError");const j=n[I],N=s.get(j)??[],L=[],se=Fx({poolSize:N.length,beamSize:B.length,remainingStages:n.length-I,processedStates:z,maxStates:c.maxStates});se<=0&&(P=!0);for(const fe of B){let A=0;for(const ie of N){if(A>=se)break;if(z>=c.maxStates){P=!0;break}if(z++,A++,Nh(ie.id,fe.slots,r))continue;const oe=vs(fe.slots);oe[j]=ie.id;const k=r.itemsById.get(ie.id),Y=(fe.atkTierAssigned??0)+(k?fs(k):0),ae=Fo(fe.focusSupport??u.map(()=>0),k?sy(k,u):u.map(()=>0)),H=w.length>0?Fo(fe.customTotals??w.map(()=>0),w.map(U=>k?k.numericIndex[U]??0:0)):void 0;if(f&&v&&!Px(f,Y,v.minSuffix[I+1],v.maxSuffix[I+1])||u.length>0&&!EA(ae,S[I+1],x))continue;if(T.length>0&&H){let U=!0;for(let K=0;K<T.length;K++){const W=T[K],he=H[K];if(typeof W.min=="number"&&he+D.maxSuffix[I+1][K]<W.min){U=!1;break}if(typeof W.max=="number"&&he+D.minSuffix[I+1][K]>W.max){U=!1;break}}if(!U)continue}const le=wh(oe,r,c.level),M=fe.roughScore+ie.rough;L.push({slots:oe,orderIndex:I+1,roughScore:M,optimisticBound:M+y[I+1],feasibilityAssigned:le.feasible?le.assignedTotal:1/0,focusSupport:ae,atkTierAssigned:Y,customTotals:H})}if(P)break}if(L.length===0)return g?.({phase:"diagnostics",processedStates:z,beamSize:B.length,totalSlots:n.length,expandedSlots:I,detail:P?`Feasibility-first search exhausted state budget before completing slot ${j}.`:`Feasibility-first search found no branches that can still satisfy high-skill requirements by slot ${j}.`}),{beam:[],processedStates:z,stateBudgetHit:P};const ce=v?v.minSuffix[I+1]:0,ee=v?v.maxSuffix[I+1]:0;L.sort((fe,A)=>{if(f){const k=uc(f,fe.atkTierAssigned,ce,ee),Y=uc(f,A.atkTierAssigned,ce,ee);if(k!==Y)return Y-k}if(u.length>0){const k=ly(fe.focusSupport??[],x),Y=ly(A.focusSupport??[],x);if(k!==Y)return k-Y}const ie=fe.feasibilityAssigned??1/0,oe=A.feasibilityAssigned??1/0;return ie!==oe?ie-oe:fe.optimisticBound!==A.optimisticBound?A.optimisticBound-fe.optimisticBound:fe.roughScore!==A.roughScore?A.roughScore-fe.roughScore:0}),B=L.slice(0,Math.max(40,c.beamWidth)),g?.({phase:"beam-search",processedStates:z,beamSize:B.length,totalSlots:n.length,expandedSlots:I+1,detail:`feasibility-first | branchCap=${se}${u.length>0?` | focus=${u.join("/")}`:""}${f?` | atkSpeed=${c.weaponAttackSpeeds.join("/")}`:""}`})}return{beam:B,processedStates:z,stateBudgetHit:P}}function DA(e){const{slotOrder:n,candidatePools:s,baseSlots:l,catalog:r,constraints:c,signal:u,onProgress:f}=e,g=[],p=new Set;let y=0,v=0,x=0,S=0,T=0,w=0,D=0,C=0;const B=(z,P)=>{if(u?.aborted)throw new DOMException("Auto build cancelled","AbortError");if(y>c.maxStates)return;if(z>=n.length){if(!$x(P,r,c.requiredMajorIds)){v++;return}const N=ic({slots:P,level:c.level,characterClass:c.characterClass},r);if(!N.derived.skillpointFeasible){x++;return}const L=Bx(P,r,c,N);if(!L.ok){T++,L.reason==="attackSpeed"?w++:L.reason==="thresholds"?D++:C++;return}const se=Lx(P);if(p.has(se)){S++;return}p.add(se);const{score:ce,breakdown:ee}=zx(N,c.weights,c);g.push({slots:vs(P),score:ce,scoreBreakdown:ee,summary:N});return}const I=n[z],j=s.get(I)??[];for(const N of j){if(y++,y>c.maxStates)break;Nh(N.id,P,r)||(P[I]=N.id,y%2e3===0&&f?.({phase:"exact-search",processedStates:y,beamSize:0,totalSlots:n.length,expandedSlots:z+1}),B(z+1,P))}P[I]=null};return B(0,vs(l)),f?.({phase:"diagnostics",processedStates:y,beamSize:0,totalSlots:n.length,expandedSlots:n.length,detail:g.length>0?`Exact search produced ${g.length} valid builds. Rejected duplicates=${S}, SP-invalid=${x}, majorID=${v}, hard=${T} (speed=${w}, thresholds=${D}, item=${C}).`:`Exact search produced 0 valid builds. Rejected SP-invalid=${x}, majorID=${v}, duplicates=${S}, hard=${T} (speed=${w}, thresholds=${D}, item=${C}).`}),g.sort((z,P)=>{if(z.score!==P.score)return P.score-z.score;for(const I of nt){const j=z.slots[I]??0,N=P.slots[I]??0;if(j!==N)return j-N}return 0}),g.slice(0,Math.max(1,c.topN))}function Yx(e){const{catalog:n,baseWorkbench:s,constraints:l,onProgress:r,signal:c,alreadyThresholdRescue:u}=e;if(c?.aborted)throw new DOMException("Auto build cancelled","AbortError");let f=vs(s.slots);for(const A of nt)l.lockedSlots[A]||(f[A]=null);f=SA(f,n,l);const g=wA(f,n),p=nt.filter(A=>f[A]==null),y=l.onlyPinnedItems?TA(s):null,v=new Map;for(const A of p)v.set(A,NA(A,n,l,y?.[A]??null,g));const x=gA(f,n,l),T=dc(l).some(A=>typeof A.min=="number"),w=[...p].sort((A,ie)=>{if(x?.preferredDirection){const Y=v.get(A)??[],ae=v.get(ie)??[],H=Y.reduce((M,U)=>{const K=n.itemsById.get(U.id);if(!K)return M;const W=fs(K),he=x.preferredDirection>0?Math.max(0,W):Math.max(0,-W);return Math.max(M,he)},0),le=ae.reduce((M,U)=>{const K=n.itemsById.get(U.id);if(!K)return M;const W=fs(K),he=x.preferredDirection>0?Math.max(0,W):Math.max(0,-W);return Math.max(M,he)},0);if(H!==le)return le-H}if(g.length>0){const Y=iy(A,v,n,g),ae=iy(ie,v,n,g);if(Y!==ae)return ae-Y}if(T){const Y=["ring1","ring2","bracelet","necklace"],ae=Y.includes(A),H=Y.includes(ie);if(ae!==H)return ae?-1:1}const oe=v.get(A)?.length??0,k=v.get(ie)?.length??0;return oe!==k?oe-k:A.localeCompare(ie)}),D=Zx(w,v);if(w.some(A=>(v.get(A)?.length??0)===0)){const A=w.find(ie=>(v.get(ie)?.length??0)===0);return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:w.length,expandedSlots:0,detail:A?`No candidate items available for slot ${A} under current hard filters.`:"One or more slots have empty candidate pools."}),[]}const C=jA(w,v,l.exhaustiveStateLimit+1);if(l.useExhaustiveSmallPool&&w.length>0&&C>0&&C<=l.exhaustiveStateLimit){r?.({phase:"exact-search",processedStates:0,beamSize:0,totalSlots:w.length,expandedSlots:0});const A={...l,maxStates:Math.max(l.maxStates,l.exhaustiveStateLimit)};return DA({slotOrder:w,candidatePools:v,baseSlots:f,catalog:n,constraints:A,signal:c,onProgress:r})}const B=dc(l),z=B.map(A=>A.key),P=Hx({slotOrder:w,candidatePools:v,catalog:n,keys:z});let I=[{slots:f,orderIndex:0,roughScore:0,optimisticBound:D[0],atkTierAssigned:0,customTotals:Ux(f,n,z)}];const j=x?Ox(w,v,n):null;let N=0,L=!1;for(let A=0;A<w.length;A++){if(c?.aborted)throw new DOMException("Auto build cancelled","AbortError");const ie=w[A],oe=v.get(ie),k=[],Y=Fx({poolSize:oe.length,beamSize:I.length,remainingStages:w.length-A,processedStates:N,maxStates:l.maxStates});Y<=0&&(L=!0);for(const le of I){let M=0;for(const U of oe){if(M>=Y)break;if(N>=l.maxStates){L=!0;break}if(N++,M++,Nh(U.id,le.slots,n))continue;const K=vs(le.slots);K[ie]=U.id;const W=le.roughScore+U.rough,he=n.itemsById.get(U.id),ge=(le.atkTierAssigned??0)+(he?fs(he):0),_e=z.length>0?Fo(le.customTotals??z.map(()=>0),z.map(Me=>he?he.numericIndex[Me]??0:0)):void 0;if(!(x&&j&&!Px(x,ge,j.minSuffix[A+1],j.maxSuffix[A+1]))){if(B.length>0&&_e){let Me=!0;for(let ve=0;ve<B.length;ve++){const Ze=B[ve],Yt=_e[ve];if(typeof Ze.min=="number"&&Yt+P.maxSuffix[A+1][ve]<Ze.min){Me=!1;break}if(typeof Ze.max=="number"&&Yt+P.minSuffix[A+1][ve]>Ze.max){Me=!1;break}}if(!Me)continue}k.push({slots:K,orderIndex:A+1,roughScore:W,optimisticBound:W+D[A+1],atkTierAssigned:ge,customTotals:_e})}}if(L)break}if(k.length===0)return r?.({phase:"diagnostics",processedStates:N,beamSize:I.length,totalSlots:w.length,expandedSlots:A,detail:L?`Search state budget exhausted before completing slot ${ie}. Try enabling deep fallback/exact mode or reduce hard filters.`:`No expansions produced at slot ${ie}.`}),[];const ae=j?j.minSuffix[A+1]:0,H=j?j.maxSuffix[A+1]:0;k.sort((le,M)=>{if(x){const U=uc(x,le.atkTierAssigned,ae,H),K=uc(x,M.atkTierAssigned,ae,H);if(U!==K)return K-U}return le.optimisticBound!==M.optimisticBound?M.optimisticBound-le.optimisticBound:M.roughScore-le.roughScore}),I=k.slice(0,Math.max(20,l.beamWidth)),r?.({phase:"beam-search",processedStates:N,beamSize:I.length,totalSlots:w.length,expandedSlots:A+1,detail:`branchCap=${Y}${x?.preferredDirection?` | atkSpeedTarget=${l.weaponAttackSpeeds.join("/")}`:""}`})}let se=I,{candidates:ce,rejectStats:ee}=xf({beam:I,catalog:n,constraints:l,signal:c});const fe=ee.thresholdFailureExample?` Example failure: ${ee.thresholdFailureExample}.`:"";if(r?.({phase:"diagnostics",processedStates:N,beamSize:I.length,totalSlots:w.length,expandedSlots:w.length,detail:ce.length>0?`Final eval: ${ce.length} valid builds. Rejected duplicates=${ee.duplicate}, SP-invalid=${ee.spInvalid}, majorID=${ee.majorIds}, hard=${ee.hardConstraints}.`:`Final eval found 0 valid builds. Rejected SP-invalid=${ee.spInvalid}, majorID=${ee.majorIds}, duplicates=${ee.duplicate}, hard=${ee.hardConstraints} (speed=${ee.hardAttackSpeed}, thresholds=${ee.hardThresholds}, item=${ee.hardItem}).${fe}`}),ce.length===0&&w.length>0&&(ee.spInvalid>0||l.weaponAttackSpeeds.length>0&&ee.hardAttackSpeed>0||ee.hardThresholds>0)){const A=ee.hardThresholds>0;r?.({phase:"diagnostics",processedStates:N,beamSize:I.length,totalSlots:w.length,expandedSlots:w.length,detail:A&&l.target.customNumericRanges?.length?"Retrying with threshold-aware rescue (advanced ID constraints + support-aware feasibility search).":ee.hardAttackSpeed>0?"Retrying with feasibility-first beam search (support-aware rescue + attack-speed target reachability).":"Retrying with feasibility-first beam search (support-aware rescue for high-skill requirements)."});const ie={...l,maxStates:Math.max(l.maxStates,A?Math.min(18e6,l.maxStates*5):l.weaponAttackSpeeds.length>0?Math.min(16e6,l.maxStates*4):Math.min(8e6,l.maxStates*2)),beamWidth:Math.max(l.beamWidth,A?3600:l.weaponAttackSpeeds.length>0?3200:1800)};A&&(ie.weights=Vf(l.target,l.weights));const oe=MA({slotOrder:w,candidatePools:v,baseSlots:f,catalog:n,constraints:ie,focusStats:g,attackSpeedCtx:x,onProgress:r,signal:c});if(oe.beam.length>0){se=oe.beam;const k=xf({beam:oe.beam,catalog:n,constraints:l,signal:c});ce=k.candidates,ee=k.rejectStats;const Y=ee.thresholdFailureExample?` Example failure: ${ee.thresholdFailureExample}.`:"";r?.({phase:"diagnostics",processedStates:oe.processedStates,beamSize:oe.beam.length,totalSlots:w.length,expandedSlots:w.length,detail:ce.length>0?`Feasibility-first eval: ${ce.length} valid builds. Rejected duplicates=${ee.duplicate}, SP-invalid=${ee.spInvalid}, majorID=${ee.majorIds}, hard=${ee.hardConstraints}.`:`Feasibility-first eval still found 0 valid builds. Rejected SP-invalid=${ee.spInvalid}, majorID=${ee.majorIds}, duplicates=${ee.duplicate}, hard=${ee.hardConstraints} (speed=${ee.hardAttackSpeed}, thresholds=${ee.hardThresholds}, item=${ee.hardItem}).${Y}`})}}if(ce.length===0&&ee.hardThresholds>0&&!u){const A=l.target;if(typeof A.minLegacyBaseDps=="number"||typeof A.minLegacyEhp=="number"||typeof A.minDpsProxy=="number"||typeof A.minEhpProxy=="number"||typeof A.minMr=="number"||typeof A.minMs=="number"||typeof A.minSpeed=="number"||typeof A.minSkillPointTotal=="number"||typeof A.maxReqTotal=="number"||(A.customNumericRanges?.length??0)>0){r?.({phase:"diagnostics",processedStates:N,beamSize:se.length,totalSlots:w.length,expandedSlots:w.length,detail:"Retrying with threshold-biased beam search (weights tuned to target min/max)."});const oe={...l,weights:Vf(l.target,l.weights),beamWidth:Math.max(l.beamWidth,3600),maxStates:Math.max(l.maxStates,Math.min(18e6,l.maxStates*5))},k=Yx({catalog:n,baseWorkbench:s,constraints:oe,onProgress:r,signal:c,alreadyThresholdRescue:!0});if(k.length>0)return r?.({phase:"diagnostics",processedStates:N,beamSize:k.length,totalSlots:w.length,expandedSlots:w.length,detail:`Threshold rescue: ${k.length} valid builds.`}),k.slice(0,Math.max(1,l.topN))}}if(ce.length===0&&ee.spInvalid>0&&ee.hardConstraints===0){let A=!1;for(const ie of bf){r?.({phase:"diagnostics",processedStates:N,beamSize:se.length,totalSlots:w.length,expandedSlots:w.length,detail:`Retrying final evaluation with tome-assisted SP feasibility (+${ie[0]} per stat).`});const oe=xf({beam:se,catalog:n,constraints:l,skillpointAssist:ie,signal:c});if(oe.candidates.length>0){ce=oe.candidates,ee=oe.rejectStats,A=!0,r?.({phase:"diagnostics",processedStates:N,beamSize:se.length,totalSlots:w.length,expandedSlots:w.length,detail:`Tome-assisted final eval recovered ${ce.length} valid builds (+${ie[0]} per stat feasibility assist).`});break}ee=oe.rejectStats}A||r?.({phase:"diagnostics",processedStates:N,beamSize:se.length,totalSlots:w.length,expandedSlots:w.length,detail:`Tome-assisted final eval still found 0 valid builds after +${bf[bf.length-1][0]} per stat assist. Rejected SP-invalid=${ee.spInvalid}, majorID=${ee.majorIds}, duplicates=${ee.duplicate}, hard=${ee.hardConstraints} (speed=${ee.hardAttackSpeed}, thresholds=${ee.hardThresholds}, item=${ee.hardItem}).${ee.thresholdFailureExample?` Example failure: ${ee.thresholdFailureExample}.`:""}`})}return ce.slice(0,Math.max(1,l.topN))}class RA{worker=null;requestId=0;currentReject=null;currentRequestId=null;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL(""+new URL("worker-runtime-Cst6v3_l.js",import.meta.url).href,import.meta.url),{type:"module"}))}async run(n,s,l,r={}){if(!this.worker)return Yx({catalog:n,baseWorkbench:s,constraints:l,onProgress:r.onProgress,signal:r.signal});const c=++this.requestId;return this.currentRequestId=c,new Promise((u,f)=>{this.currentReject=f;const g=()=>{this.worker?.postMessage({type:"cancel",requestId:c}),f(new DOMException("Auto build cancelled","AbortError"))};r.signal?.addEventListener("abort",g,{once:!0});const p=y=>{const v=y.data;if(v.requestId===c){if(v.type==="progress"){r.onProgress?.(v.progress);return}if(this.worker?.removeEventListener("message",p),r.signal?.removeEventListener("abort",g),this.currentReject=null,this.currentRequestId=null,v.type==="error"){f(new Error(v.message));return}u(v.candidates)}};this.worker.addEventListener("message",p),this.worker.postMessage({type:"run",requestId:c,catalog:n,baseWorkbench:s,constraints:l})})}cancelCurrent(){this.currentRequestId!==null&&(this.worker?.postMessage({type:"cancel",requestId:this.currentRequestId}),this.currentReject?.(new DOMException("Auto build cancelled","AbortError")),this.currentReject=null,this.currentRequestId=null)}dispose(){this.worker?.terminate(),this.worker=null}}function ry(e,n){const s=e.split(",").map(c=>c.trim()).filter(Boolean),l=[],r=[];for(const c of s){const u=n.itemIdByName.get(c.toLowerCase());u==null?r.push(c):l.push(u)}return{ids:l,unknown:r}}function zl(e,n){return e.split(",").map(s=>s.trim()).filter(Boolean).map(s=>n?n(s):s)}function Io(e,n){return e.includes(n)?e.filter(s=>s!==n):[...e,n]}function CA(e){if(!e)return null;const n=/SP-invalid=(\d+)/i.exec(e),s=/majorID=(\d+)/i.exec(e),l=/duplicates?=(\d+)/i.exec(e),r=/hard=(\d+)/i.exec(e),c=/speed=(\d+)/i.exec(e),u=/thresholds=(\d+)/i.exec(e),f=/item=(\d+)/i.exec(e);return r?{spInvalid:n?Number(n[1]):0,majorIds:s?Number(s[1]):0,duplicate:l?Number(l[1]):0,hard:Number(r[1]),speed:c?Number(c[1]):0,thresholds:u?Number(u[1]):0,item:f?Number(f[1]):0}:null}const AA=["SUPER_SLOW","VERY_SLOW","SLOW","NORMAL","FAST","VERY_FAST","SUPER_FAST"],kA={constraints:"Advanced IDs only",spell:"Spell Damage",melee:"Melee",mobility:"Mobility",tank:"Tank / EHP"},zA=["constraints","spell","melee","mobility","tank"],oy={auto:"All",fast:"Fast",constraint:"Constraint-first",exhaustive:"Exhaustive-ish"},OA=["auto","fast","constraint","exhaustive"],PA={hp:"Health",hpBonus:"Health Bonus",hprRaw:"Raw Health Regen",hprPct:"Health Regen %",mr:"Mana Regen",ms:"Mana Steal",ls:"Life Steal",sdPct:"Spell Damage %",sdRaw:"Spell Damage Raw",mdPct:"Melee Damage %",mdRaw:"Melee Damage Raw",poison:"Poison",spd:"Walk Speed Bonus",atkTier:"Attack Speed Bonus",averageDps:"Average DPS",str:"Strength",dex:"Dexterity",int:"Intelligence",def:"Defense",agi:"Agility",strReq:"Strength Min",dexReq:"Dexterity Min",intReq:"Intelligence Min",defReq:"Defense Min",agiReq:"Agility Min",eDef:"Earth Defense",tDef:"Thunder Defense",wDef:"Water Defense",fDef:"Fire Defense",aDef:"Air Defense",eDamPct:"Earth Damage %",tDamPct:"Thunder Damage %",wDamPct:"Water Damage %",fDamPct:"Fire Damage %",aDamPct:"Air Damage %",damPct:"Damage %",rDamPct:"Elemental Damage %",nDamPct:"Neutral Damage %",slots:"Powder Slots",lvl:"Combat Level",reqTotal:"Req Total",skillPointTotal:"Skill Point Total",offenseScore:"Offense Score",ehpProxy:"EHP Proxy",utilityScore:"Utility Score",spPct1:"1st Spell Cost %",spRaw1:"1st Spell Cost Raw",spPct2:"2nd Spell Cost %",spRaw2:"2nd Spell Cost Raw",spPct3:"3rd Spell Cost %",spRaw3:"3rd Spell Cost Raw",spPct4:"4th Spell Cost %",spRaw4:"4th Spell Cost Raw",sumSpPct:"Sum Spell Cost %",sumSpRaw:"Sum Spell Cost Raw"};function Sf(e){return PA[e]??e}const Ol={legacyBaseDps:0,legacyEhp:0,dpsProxy:0,spellProxy:0,meleeProxy:0,ehpProxy:0,speed:0,sustain:0,skillPointTotal:0,reqTotalPenalty:0};function BA(e){switch(e){case"spell":return{...Ol,spellProxy:2};case"melee":return{...Ol,meleeProxy:2};case"mobility":return{...Ol,speed:2};case"tank":return{...Ol,legacyEhp:2};case"constraints":return{...Ol,legacyBaseDps:.25,legacyEhp:.25,dpsProxy:.25,spellProxy:.25,meleeProxy:.25,ehpProxy:.25,speed:.25,sustain:.25,skillPointTotal:.25,reqTotalPenalty:.25};default:return{...Ol,spellProxy:2}}}function IA(e,n){return BA(e)}function LA(e){const n=_.useRef(null);n.current||(n.current=new RA);const[s,l]=_.useState(""),[r,c]=_.useState(""),[u,f]=_.useState(""),[g,p]=_.useState(""),[y,v]=_.useState([]),[x,S]=_.useState("constraints"),[T,w]=_.useState(e.snapshot.characterClass),[D,C]=_.useState(e.snapshot.level),[B,z]=_.useState([]),[P,I]=_.useState([]),[j,N]=_.useState(null),[L,se]=_.useState(!1),[ce,ee]=_.useState(Aa.beamWidth),[fe,A]=_.useState(Aa.topKPerSlot),[ie,oe]=_.useState(Aa.topN),[k,Y]=_.useState(["auto"]),[ae,H]=_.useState([]),[le,M]=_.useState(""),[U,K]=_.useState(!1),[W,he]=_.useState(null),[ge,_e]=_.useState(!1),[Me,ve]=_.useState(!0),[Ze,Yt]=_.useState(!0),[Mt,En]=_.useState(Aa.exhaustiveStateLimit),[bt,Jt]=_.useState(null),[Ge,en]=_.useState(null),tn=_.useRef(null),sn=_.useRef(null),re=y.some(Q=>Q.key&&Q.min!=null&&Q.max!=null),ze=_.useRef(1),Qe=_.useMemo(()=>{const Q={};for(const de of nt)e.snapshot.locks[de]&&(Q[de]=!0);return Q},[e.snapshot.locks]),at=e.catalog?.facetsMeta.tiers??[],V=(e.catalog?.facetsMeta.majorIds??[]).slice(0,24),ue=_.useMemo(()=>Object.keys(e.catalog?.facetsMeta.numericRanges??{}).sort((de,ke)=>Sf(de).localeCompare(Sf(ke))),[e.catalog]);_.useEffect(()=>{e.open&&(w(e.snapshot.characterClass),C(e.snapshot.level))},[e.open,e.snapshot.characterClass,e.snapshot.level]);const Ve=()=>{v(Q=>[...Q,{id:ze.current++,key:ue[0]??"",min:null,max:null}])},xe=(Q,de)=>{v(ke=>ke.map(Xe=>Xe.id===Q?{...Xe,...de}:Xe))},qe=Q=>{v(de=>de.filter(ke=>ke.id!==Q))},It=async(Q,de,ke,Xe)=>{const Et=(()=>{const Ne={label:"Fast pass",topKPerSlot:de.topKPerSlot,beamWidth:de.beamWidth,maxStates:de.maxStates,rescueWeights:!1},Ce={label:"Deep pass",topKPerSlot:Math.max(de.topKPerSlot,140),beamWidth:Math.max(de.beamWidth,700),maxStates:Math.max(de.maxStates,9e5),rescueWeights:!1},Ke={label:"Bruteforce-ish pass",topKPerSlot:Math.max(de.topKPerSlot,220),beamWidth:Math.max(de.beamWidth,1200),maxStates:Math.max(de.maxStates,4e6),rescueWeights:!1},ct={label:"Feasibility rescue",topKPerSlot:Math.max(de.topKPerSlot,260),beamWidth:Math.max(de.beamWidth,1400),maxStates:Math.max(de.maxStates,45e5),rescueWeights:!0},Ee={label:"Constraint-first pass",topKPerSlot:Math.max(de.topKPerSlot,180),beamWidth:Math.max(de.beamWidth,1200),maxStates:Math.max(de.maxStates,22e5),rescueWeights:!0},Dt={label:"Constraint rescue deep",topKPerSlot:Math.max(de.topKPerSlot,280),beamWidth:Math.max(de.beamWidth,2200),maxStates:Math.max(de.maxStates,9e6),rescueWeights:!0,useExhaustiveSmallPool:!0,exhaustiveStateLimit:Math.max(de.exhaustiveStateLimit,12e5)},Nt={label:"Exhaustive-ish pass",topKPerSlot:Math.max(de.topKPerSlot,300),beamWidth:Math.max(de.beamWidth,2600),maxStates:Math.max(de.maxStates,12e6),rescueWeights:!0,useExhaustiveSmallPool:!0,exhaustiveStateLimit:Math.max(de.exhaustiveStateLimit,2e6)},Se=qt=>{switch(qt){case"fast":return[Ne];case"constraint":return Me?[Ee,Dt,Nt]:[Ee];case"exhaustive":return Me?[Ee,Nt]:[Nt];default:return[Ne,...Me?[Ce,Ke,ct]:[]]}},st=k.length>0?k:["auto"];return st.length===1&&st[0]==="auto"?Se("auto"):st.flatMap(qt=>Se(qt))})();let rn=[];for(let Ne=0;Ne<Et.length;Ne++){if(Xe.aborted)throw new DOMException("Auto build cancelled","AbortError");const Ce=Et[Ne],Ke={...de,topKPerSlot:Ce.topKPerSlot,beamWidth:Ce.beamWidth,maxStates:Ce.maxStates,useExhaustiveSmallPool:Ce.useExhaustiveSmallPool??de.useExhaustiveSmallPool,exhaustiveStateLimit:Ce.exhaustiveStateLimit??de.exhaustiveStateLimit,weights:Ce.rescueWeights?{...de.weights,legacyBaseDps:de.weights.legacyBaseDps*.6,dpsProxy:de.weights.dpsProxy*.55,legacyEhp:Math.max(de.weights.legacyEhp,1),ehpProxy:Math.max(de.weights.ehpProxy,1),sustain:Math.max(de.weights.sustain,.8),skillPointTotal:Math.max(de.weights.skillPointTotal,.8),reqTotalPenalty:Math.max(de.weights.reqTotalPenalty,1.8)}:de.weights};M(`${Ce.label} (${Ne+1}/${Et.length})  topK ${Ke.topKPerSlot}, beam ${Ke.beamWidth}, maxStates ${Ke.maxStates}`);const ct=await n.current.run(Q,ke,Ke,{signal:Xe,onProgress:Ee=>{en(Ee),Ee.phase==="diagnostics"&&Ee.detail&&(tn.current=Ee.detail,Jt(Ee.detail)),M(`${Ce.label} (${Ne+1}/${Et.length})  ${Ee.phase}: ${Ee.expandedSlots}/${Ee.totalSlots} slots, beam ${Ee.beamSize}, states ${Ee.processedStates}${Ee.detail?`  ${Ee.detail}`:""}`)}});if(ct.length>0)return ct;rn=ct}if(rn.length===0){const Ne=de.target;if(typeof Ne.minDpsProxy=="number"||typeof Ne.minEhpProxy=="number"||typeof Ne.minSkillPointTotal=="number"||(Ne.customNumericRanges?.length??0)>0){M("Threshold rescue pass  topK 180, beam 3600, maxStates 2200000");const Ke={...de,weights:Vf(de.target,de.weights),topKPerSlot:Math.max(de.topKPerSlot,180),beamWidth:Math.max(de.beamWidth,3600),maxStates:Math.max(de.maxStates,22e5)},ct=await n.current.run(Q,ke,Ke,{signal:Xe,onProgress:Ee=>{en(Ee),Ee.phase==="diagnostics"&&Ee.detail&&(tn.current=Ee.detail,Jt(Ee.detail)),M(`Threshold rescue pass  ${Ee.phase}: ${Ee.expandedSlots}/${Ee.totalSlots} slots, beam ${Ee.beamSize}, states ${Ee.processedStates}${Ee.detail?`  ${Ee.detail}`:""}`)}});if(ct.length>0)return ct}}return rn},ln=async()=>{if(!e.catalog)return;he(null),H([]),Jt(null),en(null),tn.current=null;const Q=ry(s,e.catalog),de=ry(r,e.catalog),ke=zl(u,Se=>Se.toUpperCase()),Xe=zl(g,Se=>Se.toUpperCase()),Et=new Set(e.catalog.facetsMeta.majorIds.map(Se=>Se.toUpperCase())),rn=ke.filter(Se=>!Et.has(Se)),Ne=Xe.filter(Se=>!Et.has(Se)),Ce=y.map(Se=>({key:Se.key.trim(),min:Se.min??void 0,max:Se.max??void 0})).filter(Se=>Se.key&&(typeof Se.min=="number"||typeof Se.max=="number")),Ke=new Set(Object.keys(e.catalog.facetsMeta.numericRanges)),ct=Ce.map(Se=>Se.key).filter(Se=>!Ke.has(Se)),Ee=Ce.filter(Se=>typeof Se.min=="number"&&typeof Se.max=="number"&&Se.min>Se.max);if(Q.unknown.length>0||de.unknown.length>0||rn.length>0||Ne.length>0||ct.length>0||Ee.length>0){he([Q.unknown.length?`Unknown must-include items: ${Q.unknown.join(", ")}`:"",de.unknown.length?`Unknown excluded items: ${de.unknown.join(", ")}`:"",rn.length?`Unknown required major IDs: ${rn.join(", ")}`:"",Ne.length?`Unknown excluded major IDs: ${Ne.join(", ")}`:"",ct.length?`Unknown advanced ID keys: ${ct.join(", ")}`:"",Ee.length?`Invalid advanced ID ranges (min > max): ${Ee.map(Se=>Se.key).join(", ")}`:""].filter(Boolean).join(" | "));return}const Dt={...Aa,characterClass:T,level:Math.max(1,Math.min(106,Math.round(D||e.snapshot.level||106))),mustIncludeIds:Q.ids,excludedIds:de.ids,lockedSlots:Qe,target:{customNumericRanges:Ce},allowedTiers:[...B],requiredMajorIds:ke,excludedMajorIds:Xe,weaponAttackSpeeds:[...P],minPowderSlots:j,onlyPinnedItems:L,useExhaustiveSmallPool:Ze,exhaustiveStateLimit:Math.max(1e3,Math.min(5e6,Mt)),weights:IA(x),topN:Math.max(1,Math.min(150,ie)),topKPerSlot:Math.max(10,Math.min(300,fe)),beamWidth:Math.max(20,Math.min(5e3,ce))};sn.current?.abort();const Nt=new AbortController;sn.current=Nt,K(!0),M("Starting...");try{const Se=await It(e.catalog,Dt,e.snapshot,Nt.signal);if(H(Se),Se.length===0){M(""),en(null);const st=tn.current??"",qt=/SP-invalid=(\d+)/i.exec(st),nn=qt?Number(qt[1]):0,on=/hard=.*?\(speed=(\d+)/i.exec(st),On=on?Number(on[1]):0,Pn=/hard=.*?\(speed=\d+,\s*thresholds=(\d+)/i.exec(st),hn=Pn?Number(Pn[1]):0,Wn=/Tome-assisted final eval still found 0 valid builds/i.test(st);he(["No valid candidates found.",tn.current?`Diagnostics: ${tn.current}`:"",Wn?"Even after a tome-assisted feasibility retry, the explored candidate builds still failed skill-point/equip-order feasibility.":nn>0?"The engine found many full builds, but they failed skill-point/equip-order feasibility. This is not just a UI filter issue.":On>0?"The engine found many full builds, but they failed the final attack-speed target. This usually means the search is missing enough +atkTier support for the selected weapon/target combination.":hn>0&&Ce.length>0?"The engine found many full builds, but they failed advanced ID min/max thresholds. This usually means the search is not preserving enough support items for those IDs.":"This usually means your hard constraints are too strict (pinned-only, major IDs, must-includes, attack-speed, or thresholds), or the selected objective conflicts with them.",Wn?"This usually means the current search still is not surfacing enough requirement-support gear for the chosen weapon/goal combination. Try Exact Search + Deep Fallback, Balanced/Tank objective, and pin a few known requirement/attack-speed support items.":nn>0?"Try switching Primary Goal to Balanced or Tank and keeping Exact Search + Deep Fallback enabled.":On>0?"Tip: keep Exact Search + Deep Fallback enabled, lower thresholds, and try adding/pinning known +Attack Speed Bonus support items for the target speed.":hn>0&&Ce.length>0?"Tip: switch Solver Strategy to Constraint-first or Exhaustive-ish and keep Deep Fallback enabled. For strict advanced IDs, add only the most important thresholds first.":"Tip: disable pinned-only first, remove major-ID constraints, then try again."].join(" "))}else M(`Completed. ${Se.length} valid candidates.`)}catch(Se){he(Se instanceof Error?Se.message:"Auto builder failed"),M("")}finally{K(!1),en(null)}},Lt=()=>{sn.current?.abort(),n.current?.cancelCurrent(),K(!1),M("Cancelled"),en(null)},la=W??bt,ia=!!W,$e=CA(Ge?.detail),fn=$e?$e.spInvalid+$e.majorIds+$e.duplicate+$e.hard:0;return m.jsxs(Sh,{open:e.open,onOpenChange:e.onOpenChange,title:"Build Solver",description:"Beam search over item combinations. Uses Workbench summary metrics (legacy-style Base DPS / EHP, ability tree excluded).",className:"!w-[min(95vw,1360px)]",footer:m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("div",{className:"text-sm text-[var(--wb-muted)]",children:le}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(Te,{variant:"ghost",onClick:()=>_e(Q=>!Q),children:ge?"Hide Tips":"Tips"}),U?m.jsx(Te,{variant:"ghost",onClick:Lt,children:"Cancel"}):null,m.jsx(Te,{variant:"primary",onClick:ln,disabled:!e.catalog||U,children:"Generate Candidates"})]})]}),children:[U&&Ge?m.jsxs("div",{className:"mb-4 rounded-xl border border-sky-400/30 bg-sky-400/5 p-3",children:[m.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:"rounded-md bg-sky-400/20 px-2 py-0.5 text-xs font-medium text-sky-100",children:Ge.phase==="exact-search"?"Exact search":Ge.phase==="beam-search"?"Beam search":Ge.phase==="diagnostics"?"Finalize / diagnostics":Ge.phase}),Ge.totalSlots>0?m.jsxs("span",{className:"text-xs text-[var(--wb-muted)]",children:["Slots ",Ge.expandedSlots,"/",Ge.totalSlots]}):null]}),m.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-black/20",children:m.jsx("div",{className:"h-full rounded-full bg-sky-400/70 transition-all duration-300",style:{width:Ge.totalSlots>0?`${100*Ge.expandedSlots/Ge.totalSlots}%`:"0%"}})}),m.jsxs("div",{className:"mt-2 flex flex-wrap gap-4 text-xs text-[var(--wb-muted)]",children:[m.jsxs("span",{children:["States: ",Ge.processedStates.toLocaleString()]}),m.jsxs("span",{children:["Beam: ",Ge.beamSize.toLocaleString()]})]}),$e&&fn>0?m.jsxs("div",{className:"mt-3 border-t border-sky-400/20 pt-2",children:[m.jsx("div",{className:"mb-1 text-[11px] font-medium uppercase tracking-wide text-[var(--wb-muted)]",children:"Rejected builds (this pass)"}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[$e.spInvalid>0?m.jsxs("span",{className:"rounded bg-rose-400/20 px-1.5 py-0.5 text-[11px] text-rose-200",title:"Skill point / equip feasibility",children:["SP: ",$e.spInvalid]}):null,$e.majorIds>0?m.jsxs("span",{className:"rounded bg-amber-400/20 px-1.5 py-0.5 text-[11px] text-amber-200",title:"Major ID requirement",children:["Major ID: ",$e.majorIds]}):null,$e.duplicate>0?m.jsxs("span",{className:"rounded bg-slate-400/20 px-1.5 py-0.5 text-[11px] text-slate-200",title:"Duplicate build",children:["Dup: ",$e.duplicate]}):null,$e.speed>0?m.jsxs("span",{className:"rounded bg-orange-400/20 px-1.5 py-0.5 text-[11px] text-orange-200",title:"Attack speed",children:["Speed: ",$e.speed]}):null,$e.thresholds>0?m.jsxs("span",{className:"rounded bg-amber-400/20 px-1.5 py-0.5 text-[11px] text-amber-200",title:"Min/max thresholds",children:["Thresholds: ",$e.thresholds]}):null,$e.item>0?m.jsxs("span",{className:"rounded bg-slate-400/20 px-1.5 py-0.5 text-[11px] text-slate-200",title:"Item constraint",children:["Item: ",$e.item]}):null]})]}):null]}):null,m.jsxs("div",{className:"grid h-[52vh] min-h-0 gap-4 overflow-hidden lg:h-[56vh] lg:grid-cols-[1fr_1fr] lg:items-stretch",children:[m.jsxs("div",{className:"grid h-full min-h-0 min-w-0 gap-3 overflow-auto pr-1 wb-scrollbar",children:[ge?m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Tips (New Players)"}),m.jsxs("div",{className:"grid gap-2 text-xs text-[var(--wb-muted)]",children:[m.jsxs("div",{children:["1. Start with a Primary Goal like ",m.jsx("b",{children:"Damage"})," or ",m.jsx("b",{children:"Tank / EHP"}),". Leave most constraints empty."]}),m.jsx("div",{children:"2. Add only a few hard constraints first: class/level, maybe one must-include item."}),m.jsxs("div",{children:["3. If you get 0 candidates, turn off ",m.jsx("b",{children:"Only use pinned items in bins"})," and clear major-ID constraints."]}),m.jsx("div",{children:"4. Build Solver filters out builds that fail skill requirements / equip order feasibility."}),m.jsx("div",{children:"5. Use Workbench bins to guide it: pin good options, then rerun with pinned-only once you have enough items in each slot category."})]})]}):null,m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Optimization"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{children:[m.jsx(Be,{children:"Primary Goal"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:zA.map(Q=>m.jsx(dt,{active:x===Q,onClick:()=>S(Q),children:kA[Q]},Q))})]}),m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2 text-xs text-[var(--wb-muted)]",children:"Build Solver always filters out builds that fail skill point/equip-order feasibility. You do not need to set a minimum SP total."})]})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Hard Constraints (Optional)"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{children:[m.jsx(Be,{children:"Character Class"}),m.jsxs("select",{className:"wb-select",value:T??"",onChange:Q=>w(Q.target.value||null),children:[m.jsx("option",{value:"",children:"Auto / Any"}),m.jsx("option",{value:"Warrior",children:"Warrior"}),m.jsx("option",{value:"Assassin",children:"Assassin"}),m.jsx("option",{value:"Mage",children:"Mage"}),m.jsx("option",{value:"Archer",children:"Archer"}),m.jsx("option",{value:"Shaman",children:"Shaman"})]})]}),m.jsx(Oa,{label:"Level",value:D,onChange:Q=>C(Q??e.snapshot.level),min:1,max:106}),m.jsxs("div",{children:[m.jsx(Be,{children:"Must-Include Items (comma-separated names)"}),m.jsx("textarea",{className:"wb-textarea min-h-20",value:s,onChange:Q=>l(Q.target.value),placeholder:"Example: Cancer, Stardew"})]}),m.jsxs("div",{children:[m.jsx(Be,{children:"Excluded Items (comma-separated names)"}),m.jsx("textarea",{className:"wb-textarea min-h-20",value:r,onChange:Q=>c(Q.target.value),placeholder:"Blacklist item names"})]}),m.jsxs("details",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-medium",children:"Advanced: Specific ID Min / Max"}),m.jsxs("div",{className:"mt-3 grid gap-3",children:[m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Set build-wide min/max totals for any numeric ID (e.g. `mr`, `ms`, `spd`, `reqTotal`, `sdPct`, `poison`, `atkTier`). These are hard constraints."}),y.length===0?m.jsx("div",{className:"rounded-lg border border-dashed border-[var(--wb-border-muted)] px-3 py-2 text-xs text-[var(--wb-muted)]",children:"No advanced ID thresholds yet."}):null,y.map(Q=>{const de=e.catalog?.facetsMeta.numericRanges[Q.key];return m.jsxs("div",{className:"rounded-lg border border-[var(--wb-border-muted)] p-2",children:[m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsxs("div",{children:[m.jsx(Be,{children:"ID"}),m.jsx("select",{className:"wb-select w-full",value:Q.key,onChange:ke=>xe(Q.id,{key:ke.target.value}),children:ue.map(ke=>m.jsxs("option",{value:ke,children:[Sf(ke)," (",ke,")"]},ke))})]}),m.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[m.jsxs("div",{className:"min-w-[80px] flex-1",children:[m.jsx(Be,{children:"Min"}),m.jsx("input",{className:"wb-input w-full",type:"number",value:Q.min??"",onChange:ke=>{const Xe=ke.target.value.trim();xe(Q.id,{min:Xe===""?null:Number(Xe)})}})]}),m.jsxs("div",{className:"min-w-[80px] flex-1",children:[m.jsx(Be,{children:"Max"}),m.jsx("input",{className:"wb-input w-full",type:"number",value:Q.max??"",onChange:ke=>{const Xe=ke.target.value.trim();xe(Q.id,{max:Xe===""?null:Number(Xe)})}})]}),m.jsx(Te,{variant:"ghost",className:"shrink-0",onClick:()=>qe(Q.id),children:"Remove"})]})]}),de?m.jsxs("div",{className:"mt-1 text-[11px] text-[var(--wb-muted)]",children:["Catalog item range: ",de.min," to ",de.max," (per item)"]}):null]},Q.id)}),m.jsx("div",{children:m.jsx(Te,{variant:"ghost",onClick:Ve,disabled:ue.length===0,children:"Add ID Threshold"})}),x==="constraints"&&!re?m.jsx("div",{className:"mt-1 rounded-lg border border-amber-400/40 bg-amber-400/10 p-2 text-[11px] text-amber-50",children:"Advanced IDs preset is selected as Primary Goal, but no ID has both Min and Max set. Add at least one ID with a Min and Max, or switch primary goal. You can still run the solver without this."}):null]})]})]})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Solver Strategy"}),m.jsx("div",{className:"grid gap-3",children:m.jsxs("div",{children:[m.jsx(Be,{children:"Strategies (select one or more; All is exclusive)"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:OA.map(Q=>{const de=Q==="auto",ke=k.length===1&&k[0]==="auto",Xe=de?ke:k.includes(Q),Et=de&&!ke;return m.jsx(dt,{active:Xe,disabled:Et,onClick:()=>{if(Et)return;if(de){Y(["auto"]);return}if(ke){Y([Q]);return}const Ne=k.includes(Q)?k.filter(Ke=>Ke!==Q):[...k,Q],Ce=Ne.length===3&&Ne.includes("fast")&&Ne.includes("constraint")&&Ne.includes("exhaustive");Y(Ne.length>0?Ce?["auto"]:Ne:["auto"])},children:oy[Q]},Q)})}),m.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:k.length===1&&k[0]==="auto"?"Starts fast, then retries deeper if needed.":k.includes("fast")&&!k.includes("constraint")&&!k.includes("exhaustive")?"Single fast pass. Lowest wait time, weakest fallback.":k.includes("constraint")?"Constraint-first helps strict attack-speed or advanced ID min/max.":k.includes("exhaustive")?"Exhaustive-ish: highest search budget, strongest fallback.":"Selected strategies run in order (fast  constraint  exhaustive)."})]})})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Pool Filters"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsx(Oa,{label:"Min Powder Slots",value:j,onChange:N,min:0,max:6}),m.jsxs("div",{children:[m.jsx(Be,{children:"Allowed Tiers (optional)"}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[at.map(Q=>m.jsx(dt,{active:B.includes(Q),onClick:()=>z(de=>Io(de,Q)),children:Q},Q)),at.length===0?m.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:"Catalog not loaded."}):null]})]}),m.jsxs("div",{children:[m.jsx(Be,{children:"Final Weapon Attack Speed (optional hard constraint)"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:AA.map(Q=>m.jsx(dt,{active:P.includes(Q),onClick:()=>I(de=>Io(de,Q)),children:Q},Q))}),m.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:"Matches the completed build attack speed (weapon base speed plus total Attack Speed Bonus / `atkTier`)."})]}),m.jsx(dt,{active:L,onClick:()=>se(Q=>!Q),children:"Only use pinned items in bins"}),m.jsxs("div",{children:[m.jsx(Be,{children:"Required Major IDs (build must include all)"}),m.jsx("textarea",{className:"wb-textarea min-h-16",value:u,onChange:Q=>f(Q.target.value),placeholder:"Example: HAWKEYE, GREED"})]}),m.jsxs("div",{children:[m.jsx(Be,{children:"Excluded Major IDs (avoid any item with these)"}),m.jsx("textarea",{className:"wb-textarea min-h-16",value:g,onChange:Q=>p(Q.target.value),placeholder:"Example: NAPALM"})]}),V.length>0?m.jsxs("div",{children:[m.jsx(Be,{children:"Major ID Quick Picks"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:V.map(Q=>{const de=zl(u,Xe=>Xe.toUpperCase()),ke=zl(g,Xe=>Xe.toUpperCase());return m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsxs(dt,{active:de.includes(Q.toUpperCase()),onClick:()=>{f(Xe=>Io(zl(Xe,Et=>Et.toUpperCase()),Q.toUpperCase()).join(", "))},title:`Require ${Q}`,children:["+",Q]}),m.jsxs(dt,{active:ke.includes(Q.toUpperCase()),onClick:()=>{p(Xe=>Io(zl(Xe,Et=>Et.toUpperCase()),Q.toUpperCase()).join(", "))},title:`Exclude ${Q}`,children:["-",Q]})]},Q)})})]}):null]})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Search Heuristics"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsx(dt,{active:Me,onClick:()=>ve(Q=>!Q),children:"Deep fallback if 0 results"}),m.jsx(dt,{active:Ze,onClick:()=>Yt(Q=>!Q),children:"Exact search for small pools"}),m.jsx(Oa,{label:"Exact Search Combination Limit",value:Mt,onChange:Q=>En(Q??Aa.exhaustiveStateLimit),min:1e3,max:5e6}),m.jsx(Oa,{label:"Beam Width",value:ce,onChange:Q=>ee(Q??Aa.beamWidth),min:20,max:5e3}),m.jsx(Oa,{label:"Top K per Slot",value:fe,onChange:Q=>A(Q??Aa.topKPerSlot),min:10,max:300}),m.jsx(Oa,{label:"Top N Results",value:ie,onChange:Q=>oe(Q??Aa.topN),min:1,max:150}),m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2 text-xs text-[var(--wb-muted)]",children:["Locked slots from the Workbench will be preserved. Current locks: ",Object.values(Qe).filter(Boolean).length,L?" | Candidate pools restricted to pinned bins.":"",k.length>0&&!(k.length===1&&k[0]==="auto")?` | Strategy: ${k.map(Q=>oy[Q]).join("  ")}.`:"",Me?" | Auto retries with deeper search if fast pass finds 0 candidates.":"",Ze?` | Exact enumeration is used automatically when pool combinations are <= ${Math.round(Mt).toLocaleString()}.`:""]})]})]})]}),m.jsx("div",{className:"h-full min-h-0 min-w-0",children:m.jsxs("div",{className:"wb-card flex h-full min-h-0 flex-col overflow-hidden p-3",children:[m.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[m.jsx("div",{className:"text-sm font-semibold",children:"Candidates"}),m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[ae.length," shown"]})]}),m.jsx("div",{className:"min-h-0 flex-1 space-y-2 overflow-auto pr-1 wb-scrollbar",children:ae.length===0?m.jsx("div",{className:"rounded-xl border border-dashed border-[var(--wb-border)] p-4 text-sm text-[var(--wb-muted)]",children:"Run Build Solver to generate candidate builds."}):ae.map((Q,de)=>m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3",children:[m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"text-sm font-semibold",children:["#",de+1," | Score ",Math.round(Q.score).toLocaleString()]}),m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Base DPS ",Math.round(Q.summary.derived.legacyBaseDps)," | EHP ",Math.round(Q.summary.derived.legacyEhp)," | Req ",Q.summary.derived.reqTotal," | MR ",Q.summary.aggregated.mr]}),m.jsxs("div",{className:"mt-1 text-xs text-emerald-200",children:["SP Valid | Assigned SP ",Math.round(Q.summary.derived.assignedSkillPointsRequired)]})]}),m.jsx(Te,{className:"px-2 py-1 text-xs",onClick:()=>e.onLoadCandidate(Q),children:"Load into Workbench"})]}),m.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1 text-xs sm:grid-cols-2 xl:grid-cols-3",children:nt.map(ke=>m.jsxs("div",{className:"min-w-0 rounded-md border border-[var(--wb-border-muted)] bg-black/10 px-2 py-1",children:[m.jsx("div",{className:"text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:ke}),m.jsx("div",{className:"truncate",children:Q.slots[ke]!=null?e.catalog?.itemsById.get(Q.slots[ke])?.displayName??Q.slots[ke]:"Empty"})]},ke))})]},`${Q.score}-${de}`))}),la?m.jsxs("details",{className:`mt-2 rounded-xl border p-2 ${ia?"border-rose-400/30 bg-rose-400/8 text-rose-100":"border-sky-400/20 bg-sky-400/5 text-sky-100"}`,children:[m.jsx("summary",{className:"cursor-pointer list-none text-xs font-medium",children:ia?"Run issue (click to expand)":"Diagnostics (click to expand)"}),m.jsx("div",{className:"mt-2 text-xs leading-relaxed",children:la})]}):null]})})]})]})}const qA=["Warrior","Assassin","Mage","Archer","Shaman"],wf=[0,1,2,2,3,3,4,4,5,5,6,6,7,8,8,9,9,10,11,11,12,12,13,14,14,15,16,16,17,17,18,18,19,19,20,20,20,21,21,22,22,23,23,23,24,24,25,25,26,26,27,27,28,28,29,29,30,30,31,31,32,32,33,33,34,34,34,35,35,35,36,36,36,37,37,37,38,38,38,38,39,39,39,39,40,40,40,40,41,41,41,41,42,42,42,42,43,43,43,43,44,44,44,44,45,45,45];function Ls(e,n=0){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const s=Number(e);if(Number.isFinite(s))return s}return n}function Hi(e){return typeof e=="string"?e:""}function _f(e){return Array.isArray(e)?e.map(n=>Ls(n,Number.NaN)).filter(n=>Number.isFinite(n)).map(n=>Math.trunc(n)):[]}function UA(e){const n=Ls(e.id,Number.NaN);if(!Number.isFinite(n))return null;const s=Ls(e.display?.row,0),l=Ls(e.display?.col,0);return{id:Math.trunc(n),displayName:Hi(e.display_name)||`Ability ${n}`,descriptionHtml:Hi(e.desc),parents:_f(e.parents),dependencies:_f(e.dependencies),blockers:_f(e.blockers),cost:Math.max(0,Math.trunc(Ls(e.cost,1))),archetype:Hi(e.archetype).trim()||null,archetypeReq:Math.max(0,Math.trunc(Ls(e.archetype_req,0))),reqArchetype:Hi(e.req_archetype).trim()||null,baseAbilityId:e.base_abil==null?null:Math.trunc(Ls(e.base_abil,Number.NaN)),display:{row:Math.max(0,Math.trunc(s)),col:Math.max(0,Math.trunc(l)),icon:Hi(e.display?.icon)||"node_0"},properties:typeof e.properties=="object"&&e.properties?e.properties:{},effects:Array.isArray(e.effects)?e.effects.filter(r=>!!r&&typeof r=="object"):[]}}function HA(e,n){const s=n.map(UA).filter(u=>u!==null).sort((u,f)=>{const g=u.display.row-f.display.row;if(g!==0)return g;const p=u.display.col-f.display.col;return p!==0?p:u.id-f.id}),l=new Map;let r=0,c=0;for(const u of s)l.set(u.id,u),r=Math.max(r,u.display.row),c=Math.max(c,u.display.col);return{className:e,nodes:s,nodeById:l,maxRow:r,maxCol:c}}function $A(e,n){const s={};for(const l of qA){const r=Array.isArray(e[l])?e[l]:[];s[l]=HA(l,r)}return{version:n,classes:s}}function ZA(e){if(!Number.isFinite(e))return 45;const n=Math.trunc(e);return n>=wf.length?45:n<1?wf[1]:wf[n]??45}function Ef(e,n,s,l,r){if(e.parents.length===0)return e.cost>r?{ok:!1,hardBlocked:!1,reason:"not enough ability points left"}:{ok:!0,hardBlocked:!1,reason:""};const c=e.dependencies.filter(g=>!s.has(g));if(c.length>0)return{ok:!1,hardBlocked:!0,reason:`missing dep: ${c.map(p=>`"${n.nodeById.get(p)?.displayName??p}"`).join(", ")}`};const u=e.blockers.filter(g=>s.has(g));if(u.length>0)return{ok:!1,hardBlocked:!0,reason:`blocked by: ${u.map(p=>`"${n.nodeById.get(p)?.displayName??p}"`).join(", ")}`};if(!e.parents.some(g=>s.has(g)))return{ok:!1,hardBlocked:!1,reason:"not reachable"};if(e.archetypeReq>0){const g=e.reqArchetype||e.archetype,p=g?l.get(g)??0:0;if(!g||p<e.archetypeReq)return{ok:!1,hardBlocked:!1,reason:`${g??"Archetype"}: ${p} < ${e.archetypeReq}`}}return e.cost>r?{ok:!1,hardBlocked:!1,reason:"not enough ability points left"}:{ok:!0,hardBlocked:!1,reason:""}}function FA(e,n,s){const l=new Set(n.filter(D=>e.nodeById.has(D)));let r=new Set(l),c=e.nodes.filter(D=>r.has(D.id));const u=new Set,f=new Map;let g=0;const p=new Map;for(;;){let D=!1;const C=[];for(const B of c){const z=Ef(B,e,u,f,9999);if(!z.ok){C.push(B),p.set(B.id,{reason:z.reason,hardBlocked:z.hardBlocked});continue}p.delete(B.id),u.add(B.id),r.delete(B.id),g+=B.cost,B.archetype&&f.set(B.archetype,(f.get(B.archetype)??0)+1),D=!0}if(c=C,!D)break}const y=ZA(s),v=y-g,x=[];for(const D of e.nodes){if(u.has(D.id))continue;Ef(D,e,u,f,v).ok&&x.push(D.id)}const S={};for(const D of e.nodes){if(u.has(D.id)){S[D.id]={active:!0,selectable:!0,hardBlocked:!1,reason:null};continue}const C=p.get(D.id);if(C){S[D.id]={active:!1,selectable:!1,hardBlocked:C.hardBlocked,reason:C.reason};continue}const B=Ef(D,e,u,f,v);S[D.id]={active:!1,selectable:B.ok,hardBlocked:B.hardBlocked,reason:B.ok?null:B.reason}}const T=[];let w=!1;g>y&&T.push(`too many ability points assigned! (${g} > ${y})`);for(const D of c){const C=p.get(D.id);C&&(C.hardBlocked&&(w=!0),T.push(`${D.displayName}: ${C.reason}`))}return{apCap:y,apUsed:g,apRemaining:v,reachable:u,pending:c,unresolved:p,availableIds:x,errors:T,hardErrors:w,archetypeCounts:f,nodeStatusById:S}}function Dc(e,n,s){const l=FA(e,n,s),r=e.nodes.filter(f=>l.reachable.has(f.id)).map(f=>f.id),c=l.pending.map(f=>f.id),u=Object.fromEntries([...l.archetypeCounts.entries()].sort((f,g)=>f[0].localeCompare(g[0])));return{className:e.className,level:s,apCap:l.apCap,apUsed:l.apUsed,apRemaining:l.apRemaining,selectedIdsInput:[...n],activeIds:r,unresolvedIds:c,availableIds:l.availableIds,hardErrors:l.hardErrors,errors:l.errors,archetypeCounts:u,nodeStatusById:l.nodeStatusById}}function YA(e,n,s){let l=[...new Set(n)].filter(r=>e.nodeById.has(r));for(;;){const r=Dc(e,l,s);if(r.unresolvedIds.length===0&&r.apUsed<=r.apCap)return r.activeIds;const c=new Set(r.activeIds),u=l.filter(f=>c.has(f));if(u.length===l.length)return u;l=u}}function GA(e,n,s,l){if(!e.nodeById.has(s))return[...n];const r=new Set(n);return r.has(s)?(r.delete(s),YA(e,[...r],l)):Dc(e,n,l).nodeStatusById[s]?.selectable?(r.add(s),e.nodes.filter(f=>r.has(f.id)).map(f=>f.id)):[...n]}function Gx(e,n){return!e||!n?null:e.classes[n]??null}function VA(e){return e.length>20?`${e.slice(0,19)}`:e}function KA(e,n){return e??n??null}function WA(e){const n=KA(e.selectedClass,e.inferredClass),s=_.useMemo(()=>Gx(e.dataset,n),[e.dataset,n]),l=_.useMemo(()=>n?e.selectionsByClass[n]??[]:[],[e.selectionsByClass,n]),r=_.useMemo(()=>s?Dc(s,l,e.level):null,[s,l,e.level]),[c,u]=_.useState(null);_.useEffect(()=>{if(!s){u(null);return}c!=null&&s.nodeById.has(c)||u(r?.activeIds[0]??s.nodes[0]?.id??null)},[s,c,r]);const f=_.useMemo(()=>!s||c==null?null:s.nodeById.get(c)??null,[s,c]),g=S=>{n&&e.onSelectionsChange({...e.selectionsByClass,[n]:S})},p=S=>{if(!s||!n)return;const T=GA(s,l,S,e.level);g(T),u(S)},y=()=>{n&&e.onSelectionsChange({...e.selectionsByClass,[n]:[]})},v=r?.activeIds.length??0,x=s?{gridTemplateColumns:`repeat(${Math.max(1,s.maxCol+1)}, minmax(56px, 1fr))`,gridTemplateRows:`repeat(${Math.max(1,s.maxRow+1)}, minmax(56px, auto))`}:void 0;return m.jsx(Sh,{open:e.open,onOpenChange:e.onOpenChange,title:"Ability Tree",description:"Legacy ability tree data and activation rules integrated into Workbench. Effects are tracked here, but Workbench DPS/EHP still excludes ability-tree math for now.",className:"w-[min(97vw,1320px)]",footer:m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:n?`Editing ${n} tree at level ${e.level}.`:"Select a class (or equip a class weapon) to start editing an ability tree."}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(Te,{variant:"ghost",onClick:y,disabled:!n||v===0,children:"Reset Tree"}),m.jsx(Te,{onClick:()=>e.onOpenChange(!1),children:"Done"})]})]}),children:e.loading?m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-4 text-sm text-[var(--wb-muted)]",children:"Loading ability tree data..."}):e.error?m.jsx("div",{className:"rounded-xl border border-rose-400/30 bg-rose-400/8 p-4 text-sm text-rose-100",children:e.error}):n?!s||!r?m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-4 text-sm text-[var(--wb-muted)]",children:["No ability tree data available for ",n,"."]}):m.jsxs("div",{className:"grid min-h-0 grid-cols-1 gap-3 xl:grid-cols-[minmax(0,1fr)_360px]",children:[m.jsxs("div",{className:"min-h-0 space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-4",children:[m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"AP"}),m.jsxs("div",{className:"mt-1 text-lg font-semibold",children:[r.apUsed," / ",r.apCap]}),m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[r.apRemaining," left"]})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Selected"}),m.jsx("div",{className:"mt-1 text-lg font-semibold",children:r.activeIds.length}),m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[r.availableIds.length," available next"]})]}),m.jsxs("div",{className:"wb-card p-3 sm:col-span-2",children:[m.jsxs("div",{className:"mb-2 flex items-center gap-2 text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:[m.jsx(jE,{size:12}),"Archetypes"]}),m.jsx("div",{className:"flex flex-wrap gap-1",children:Object.keys(r.archetypeCounts).length===0?m.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:"No archetype points yet."}):Object.entries(r.archetypeCounts).map(([S,T])=>m.jsxs("span",{className:"wb-chip",children:[S,": ",T]},S))})]})]}),r.errors.length>0?m.jsxs("div",{className:"rounded-xl border border-amber-400/25 bg-amber-400/8 p-3",children:[m.jsxs("div",{className:"mb-2 flex items-center gap-2 text-xs font-semibold text-amber-100",children:[m.jsx(CE,{size:14}),"Tree Validation (",r.hardErrors?"hard":"soft"," issues)"]}),m.jsx(Zl,{className:"max-h-28",children:m.jsx("div",{className:"grid gap-1",children:r.errors.map((S,T)=>m.jsx("div",{className:"text-xs text-amber-100/95",children:S},`${S}-${T}`))})})]}):null,m.jsx($l,{title:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx($y,{size:14}),n," Tree"]}),headerRight:m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:e.selectedClass?"Using selected class":e.inferredClass?"Using weapon-inferred class":""}),className:"min-h-0",children:m.jsx(Zl,{className:"max-h-[52vh] p-3",children:m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/15 p-2",children:m.jsx("div",{className:"grid gap-2",style:x,children:s.nodes.map(S=>{const T=r.nodeStatusById[S.id],w=!!T?.active,D=!!T?.selectable,C=!!T?.hardBlocked;return m.jsxs("button",{type:"button",className:["rounded-xl border p-2 text-left transition",w?"border-cyan-300/40 bg-cyan-300/12 shadow-[0_0_0_1px_rgba(34,211,238,.15)]":D?"border-emerald-400/30 bg-emerald-400/7 hover:bg-emerald-400/12":C?"border-rose-400/25 bg-rose-400/7":"border-[var(--wb-border-muted)] bg-black/15"].join(" "),style:{gridColumnStart:S.display.col+1,gridRowStart:S.display.row+1},title:T?.reason??"",onClick:()=>p(S.id),onMouseEnter:()=>u(S.id),onFocus:()=>u(S.id),children:[m.jsxs("div",{className:"text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:["#",S.id]}),m.jsx("div",{className:"mt-1 text-xs font-semibold leading-tight",children:VA(S.displayName)}),m.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2 text-[10px]",children:[m.jsxs("span",{className:"text-[var(--wb-muted)]",children:["AP ",S.cost]}),S.archetype?m.jsx("span",{className:"wb-chip px-1.5 py-0.5",children:S.archetype}):null]})]},S.id)})})})})})]}),m.jsxs("div",{className:"min-h-0 space-y-3",children:[m.jsx($l,{title:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(fE,{size:14}),"Node Details"]}),className:"min-h-0",children:m.jsx("div",{className:"space-y-3 p-3",children:f?m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-base font-semibold",children:f.displayName}),m.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[m.jsxs("span",{className:"wb-chip",children:["AP ",f.cost]}),f.archetype?m.jsx("span",{className:"wb-chip",children:f.archetype}):null,f.archetypeReq>0?m.jsxs("span",{className:"wb-chip",children:["Req ",f.reqArchetype||f.archetype||"Archetype",": ",f.archetypeReq]}):null,r.nodeStatusById[f.id]?.reason?m.jsx("span",{className:"wb-chip text-amber-100",children:r.nodeStatusById[f.id]?.reason}):null]})]}),m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs leading-relaxed text-[var(--wb-text)] [&_br]:block [&_br]:content-[''] [&_span]:text-inherit",dangerouslySetInnerHTML:{__html:f.descriptionHtml||'<span class="text-slate-400">No description.</span>'}}),m.jsxs("div",{className:"grid gap-2 text-xs",children:[m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[m.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Parents"}),m.jsx("div",{className:"mt-1",children:f.parents.length===0?"Root node":f.parents.map(S=>s.nodeById.get(S)?.displayName??`#${S}`).join("  ")})]}),f.dependencies.length>0?m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[m.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Dependencies"}),m.jsx("div",{className:"mt-1",children:f.dependencies.map(S=>s.nodeById.get(S)?.displayName??`#${S}`).join("  ")})]}):null,f.blockers.length>0?m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[m.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Blockers"}),m.jsx("div",{className:"mt-1",children:f.blockers.map(S=>s.nodeById.get(S)?.displayName??`#${S}`).join("  ")})]}):null]})]}):m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs text-[var(--wb-muted)]",children:"Hover or focus an ability node to inspect it here."})})}),m.jsx($l,{title:"Selected Abilities",className:"min-h-0",children:m.jsx(Zl,{className:"max-h-[28vh] p-3",children:r.activeIds.length===0?m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs text-[var(--wb-muted)]",children:"No abilities selected yet."}):m.jsx("div",{className:"grid gap-1",children:r.activeIds.map(S=>{const T=s.nodeById.get(S);return T?m.jsx(dt,{className:"justify-start text-left",active:c===S,onClick:()=>u(S),title:`AP ${T.cost}`,children:T.displayName},S):null})})})})]})]}):m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-4 text-sm text-[var(--wb-muted)]",children:"Pick a class in the Workbench header, or equip a weapon so Workbench can infer the class and load the correct ability tree."})})}const XA=["helmet","chestplate","leggings","boots"],QA=["spear","wand","dagger","bow","relik"],JA=["ring","bracelet","necklace"],ek=["HELMET","CHESTPLATE","LEGGINGS","BOOTS","RELIK","WAND","SPEAR","DAGGER","BOW","RING","NECKLACE","BRACELET","POTION","SCROLL","FOOD"],tk=["1-3","3-5","5-7","7-9","10-13","13-15","15-17","17-19","20-23","23-25","25-27","27-29","30-33","33-35","35-37","37-39","40-43","43-45","45-47","47-49","50-53","53-55","55-57","57-59","60-63","63-65","65-67","67-69","70-73","73-75","75-77","77-79","80-83","83-85","85-87","87-89","90-93","93-95","95-97","97-99","100-103","103-105"],Vx=["SLOW","NORMAL","FAST"];function jh(e){const n=e.toLowerCase();return XA.includes(n)?"armor":QA.includes(n)?"weapon":JA.includes(n)?"accessory":"consumable"}const Kx={offense:1,defense:.6,utility:.4,skillPoints:.3,reqPenalty:.5},Bs={recipeType:"HELMET",levelRange:"103-105",matTiers:null,atkSpd:null,weights:Kx,mustIncludeIngredients:[],excludedIngredients:[],topN:30,topKPerSlot:120,beamWidth:400,target:{},maxReqs:[null,null,null,null,null]},fc=4e3,cy=[0,1,1.25,1.4],Kf=["e","t","w","f","a"],nk=[{min:3,max:6,convert:17,defPlus:2,defMinus:1},{min:5,max:8,convert:21,defPlus:4,defMinus:2},{min:6,max:10,convert:25,defPlus:8,defMinus:3},{min:7,max:10,convert:31,defPlus:14,defMinus:5},{min:9,max:11,convert:38,defPlus:22,defMinus:9},{min:11,max:13,convert:46,defPlus:30,defMinus:13},{min:1,max:8,convert:9,defPlus:3,defMinus:1},{min:1,max:12,convert:11,defPlus:5,defMinus:1},{min:2,max:15,convert:13,defPlus:9,defMinus:2},{min:3,max:15,convert:17,defPlus:14,defMinus:4},{min:4,max:17,convert:22,defPlus:20,defMinus:7},{min:5,max:20,convert:28,defPlus:28,defMinus:10},{min:3,max:4,convert:13,defPlus:3,defMinus:1},{min:4,max:6,convert:15,defPlus:6,defMinus:1},{min:5,max:8,convert:17,defPlus:11,defMinus:2},{min:6,max:8,convert:21,defPlus:18,defMinus:4},{min:7,max:10,convert:26,defPlus:28,defMinus:7},{min:9,max:11,convert:32,defPlus:40,defMinus:10},{min:2,max:5,convert:14,defPlus:3,defMinus:1},{min:4,max:8,convert:16,defPlus:5,defMinus:2},{min:5,max:9,convert:19,defPlus:9,defMinus:3},{min:6,max:9,convert:24,defPlus:16,defMinus:5},{min:8,max:10,convert:30,defPlus:25,defMinus:9},{min:10,max:12,convert:37,defPlus:36,defMinus:13},{min:2,max:6,convert:11,defPlus:3,defMinus:1},{min:3,max:10,convert:14,defPlus:6,defMinus:2},{min:4,max:11,convert:17,defPlus:10,defMinus:3},{min:5,max:11,convert:22,defPlus:16,defMinus:5},{min:7,max:12,convert:28,defPlus:24,defMinus:9},{min:8,max:14,convert:35,defPlus:34,defMinus:13}];function ak(e){return e/6|0}function sk(e){return Kf[ak(e)]}function lk(e){const n=[[100,100],[100,100],[100,100]];for(let s=0;s<6;s++){const r=e[s].posMods,c=Math.floor(s/2),u=s%2;if(r.above!==0)for(let f=c-1;f>=0;f--)n[f][u]+=r.above;if(r.under!==0)for(let f=c+1;f<3;f++)n[f][u]+=r.under;if(r.left!==0&&u===1&&(n[c][u-1]+=r.left),r.right!==0&&u===0&&(n[c][u+1]+=r.right),r.touching!==0)for(let f=0;f<3;f++)for(let g=0;g<2;g++)(Math.abs(f-c)===1&&g===u||f===c&&Math.abs(g-u)===1)&&(n[f][g]+=r.touching);if(r.notTouching!==0)for(let f=0;f<3;f++)for(let g=0;g<2;g++)(Math.abs(f-c)>1||Math.abs(f-c)===1&&Math.abs(g-u)===1)&&(n[f][g]+=r.notTouching)}return n.flat()}function Wx(e,n,s,l){const r=e.type.toLowerCase(),c=jh(r);let u=!0;for(const A of s)if(A.id!==fc){u=!1;break}let f=0,g=0;(c==="weapon"||c==="armor")&&(e.lvl[0]<30?f=1:e.lvl[0]<70?f=2:f=3),c==="consumable"&&(e.lvl[0]<30?g=1:e.lvl[0]<70?g=2:g=3,u&&(g=3));const p=e.materials.map(A=>A.amount),y=(cy[n[0]]*p[0]+cy[n[1]]*p[1])/(p[0]+p[1]);let v=[e.durability[0],e.durability[1]],x=[e.duration[0],e.duration[1]];c==="consumable"?(u&&(x=[e.basicDuration[0],e.basicDuration[1]]),x=[Math.round(x[0]*y),Math.round(x[1]*y)]):v=[Math.round(v[0]*y),Math.round(v[1]*y)];const S=e.healthOrDamage[0],T=e.healthOrDamage[1];let w=0,D=0,C="0-0",B="0-0";const z={e:0,t:0,w:0,f:0,a:0};if(c==="armor")w=Math.floor(T*y),D=Math.floor(S*y);else if(c==="weapon"){let A=2.05;l==="SLOW"?A/=1.5:l==="NORMAL"?A=1:l==="FAST"&&(A/=2.5);const ie=Math.floor(Math.floor(S*y)*A),oe=Math.floor(Math.floor(T*y)*A);B=`${Math.floor(ie*.9)}-${Math.floor(ie*1.1)}`,C=`${Math.floor(oe*.9)}-${Math.floor(oe*1.1)}`}else c==="consumable"&&u&&(w=Math.floor(T*y),D=Math.floor(S*y));if(c==="armor"||c==="accessory"){for(const A of s)if(A.isPowder&&A.pid!=null){const ie=nk[A.pid],oe=sk(A.pid),k=Kf[(Kf.indexOf(oe)+4)%5];z[oe]=(z[oe]||0)+ie.defPlus,z[k]=(z[k]||0)-ie.defMinus}}const P=lk(s),I=[0,0,0,0,0],j={},N={};for(let A=0;A<6;A++){const ie=s[A],oe=P[A]/100,k=ie.itemIDs;if(c!=="consumable"){const Y=["strReq","dexReq","intReq","defReq","agiReq"];for(let ae=0;ae<Y.length;ae++){const H=k[Y[ae]];H!==0&&(ie.isPowder?I[ae]+=Math.round(H):I[ae]+=Math.round(H*oe))}}k.dura!==0&&(v[0]+=k.dura,v[1]+=k.dura),ie.consumableIDs.dura!==0&&(x[0]+=ie.consumableIDs.dura,x[1]+=ie.consumableIDs.dura),ie.consumableIDs.charges!==0&&(g+=ie.consumableIDs.charges);for(const[Y,ae]of Object.entries(ie.ids)){if(ae.max===0&&ae.min===0)continue;let H=ae.min,le=ae.max;const M=[Math.floor(H*oe),Math.floor(le*oe)].sort((U,K)=>U-K);H=M[0],le=M[1],N[Y]=(N[Y]??0)+H,j[Y]=(j[Y]??0)+le}}return v[0]=Math.max(1,Math.floor(v[0])),v[1]=Math.max(1,Math.floor(v[1])),u||(x[0]=Math.max(10,x[0]),x[1]=Math.max(10,x[1])),g=Math.max(g,c==="consumable"?1:0),{category:c,type:r,lvl:e.lvl[1],hp:w,hpLow:D,nDam:C,nDamLow:B,eDam:"0-0",tDam:"0-0",wDam:"0-0",fDam:"0-0",aDam:"0-0",eDef:z.e,tDef:z.t,wDef:z.w,fDef:z.f,aDef:z.a,atkSpd:l,durability:v,duration:x,charges:g,slots:f,reqs:[I[0],I[1],I[2],I[3],I[4]],effectiveness:P,maxRolls:j,minRolls:N}}function ik(e,n,s,l,r){const c={SLOW:0,NORMAL:1,FAST:2},u=[];function f(v,x){for(let S=x-1;S>=0;S--)u.push(v>>S&1)}f(0,1),f(2,7);for(const v of e)f(v,12);f(n,12),f(s[0]-1,3),f(s[1]-1,3),r==="weapon"&&f(c[l]??0,4);const g=u.length%6;if(g!==0)for(let v=0;v<6-g;v++)u.push(0);const p="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+-";let y="";for(let v=0;v<u.length;v+=6){let x=0;for(let S=0;S<6;S++)x=x<<1|(u[v+S]??0);y+=p[x]}return"CR-"+y}const Xx=["sdPct","sdRaw","mdPct","mdRaw","damPct","poison","fDamPct","wDamPct","aDamPct","tDamPct","eDamPct","spPct1","spRaw1","spPct2","spRaw2","spPct3","spRaw3","spPct4","spRaw4","rSdRaw","critDamPct"],Qx=["hpBonus","hprRaw","hprPct","fDefPct","wDefPct","aDefPct","tDefPct","eDefPct"],Jx=["mr","ms","ls","spd","xpb","lb","ref","thorns","spRegen","eSteal","sprint","sprintReg","jh","lq","gXp","gSpd"],eS=["str","dex","int","def","agi"];function tS(e,n){let s=0;for(const l of n){const r=e.maxRolls[l]??0;r>0&&(s+=r)}return s}function rk(e,n){let s=0;for(const l of n)s+=e.maxRolls[l]??0;return s}function ok(e){let n=tS(e,Xx);return e.category==="armor"&&(n+=e.hp*.02),n}function ck(e){let n=tS(e,Qx);return e.category==="armor"&&(n+=e.hp*.15),n+=Math.max(0,e.eDef)+Math.max(0,e.tDef)+Math.max(0,e.wDef)+Math.max(0,e.fDef)+Math.max(0,e.aDef),n}function uk(e){let n=0;const s=e.maxRolls.mr??0,l=e.maxRolls.ms??0,r=e.maxRolls.ls??0,c=e.maxRolls.spd??0;n+=s*12+l*8+r*6+c*3;for(const u of Jx){if(u==="mr"||u==="ms"||u==="ls"||u==="spd")continue;const f=e.maxRolls[u]??0;f>0&&(n+=f)}return n}function dk(e){return rk(e,eS)}function fk(e){let n=0;for(const s of e.reqs)n+=Math.max(0,s);return n}function nS(e,n){if(n==="durability")return[e.durability[0],e.durability[1]];if(n==="duration")return[e.duration[0],e.duration[1]];const s=e.maxRolls[n]??0;return[s,s]}function hk(e,n){let s=0;for(const[l,r]of Object.entries(n)){const[c,u]=nS(e,l);if(typeof r.min=="number"&&c<r.min){const f=r.min-c;s+=f*200+f*f}if(typeof r.max=="number"&&u>r.max){const f=u-r.max;s+=f*200+f*f}}return s}function mk(e,n){for(const[s,l]of Object.entries(n)){const[r,c]=nS(e,s);if(typeof l.min=="number"&&r<l.min||typeof l.max=="number"&&c>l.max)return!1}return!0}function aS(e,n,s){const l=ok(e)*n.offense,r=ck(e)*n.defense,c=uk(e)*n.utility,u=dk(e)*n.skillPoints,f=fk(e)*n.reqPenalty,g=hk(e,s.target),p={offense:l,defense:r,utility:c,skillPoints:u,reqPenalty:f,thresholdPenalty:g};return{score:l+r+c+u-f-g,breakdown:p}}function gk(e,n,s){let l=0;for(const[c,u]of Object.entries(e.ids)){const f=u.max;Xx.includes(c)&&f>0?l+=f*n.offense:Qx.includes(c)&&f>0?l+=f*n.defense:Jx.includes(c)?c==="mr"?l+=f*12*n.utility:c==="ms"?l+=f*8*n.utility:c==="ls"?l+=f*6*n.utility:c==="spd"?l+=f*3*n.utility:f>0&&(l+=f*n.utility):eS.includes(c)&&(l+=f*n.skillPoints),s?.has(c)&&f>0&&(l+=f*50)}const r=Math.max(0,e.itemIDs.strReq)+Math.max(0,e.itemIDs.dexReq)+Math.max(0,e.itemIDs.intReq)+Math.max(0,e.itemIDs.defReq)+Math.max(0,e.itemIDs.agiReq);return l-=r*n.reqPenalty*.5,l}function pk(e,n,s){const l=e.recipesByType.get(n.toUpperCase());if(!l)return null;const r=`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()}-${s}`;return l.find(c=>c.name===r)??null}function vk(e,n,s){const l=n.skill.toUpperCase(),r=n.lvl[1],c=new Set(s.excludedIngredients),u=new Set(s.mustIncludeIngredients),f=new Set(Object.keys(s.target)),g=f.size>0,p=[];for(const w of e.ingredients)w.id===fc||c.has(w.id)||!w.skills.some(C=>C.toUpperCase()===l)||w.lvl>r||p.push(w);const y=p.map(w=>({ing:w,score:gk(w,s.weights,g?f:void 0)}));y.sort((w,D)=>D.score-w.score);const v=s.topKPerSlot,x=new Set,S=[e.noIngredient];x.add(fc);let T=0;for(const{ing:w}of y)u.has(w.id)&&!x.has(w.id)&&(x.add(w.id),S.push(w));for(const{ing:w}of y)if(!x.has(w.id)&&(x.add(w.id),S.push(w),T++,T>=v))break;if(g){const w=p.filter(C=>!x.has(C.id)).map(C=>{let B=0;for(const z of f){const P=C.ids[z]?.max??0;P>0&&(B+=P)}return{ing:C,tScore:B}}).filter(({tScore:C})=>C>0);w.sort((C,B)=>B.tScore-C.tScore);const D=Math.min(w.length,Math.max(30,Math.floor(v/2)));for(let C=0;C<D;C++){const{ing:B}=w[C];x.has(B.id)||(x.add(B.id),S.push(B))}}return S}function yk(e,n,s,l,r,c){const u=[];for(let p=0;p<6;p++)p<n.length?u.push(s.ingredientsById.get(n[p])??s.noIngredient):u.push(s.noIngredient);const f=Wx(e,r,u,c),{score:g}=aS(f,l.weights,l);return g}function sS(e){const{catalog:n,constraints:s,signal:l,onProgress:r,alreadyThresholdRescue:c=!1}=e,u=pk(n,s.recipeType,s.levelRange);if(!u)return[];const f=jh(u.type.toLowerCase()),g=vk(n,u,s);if(g.length===0)return[];const p=s.matTiers?[s.matTiers]:[[1,1],[1,2],[1,3],[2,1],[2,2],[2,3],[3,1],[3,2],[3,3]],y=f==="weapon"?s.atkSpd?[s.atkSpd]:[...Vx]:["SLOW"],v=p[p.length-1],x=y[0],S=s.beamWidth,T=6;let w=0;const D=new Set(s.mustIncludeIngredients),C=D.size>0?1e6:0;let B=[{ingredientIds:[],score:0}];for(let A=0;A<T;A++){if(l?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");const ie=[];for(const k of B)for(const Y of g){if(l?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");const ae=[...k.ingredientIds,Y.id];let H=yk(u,ae,n,s,v,x);C>0&&D.size>0&&[...D].every(M=>ae.includes(M))&&(H+=C),ie.push({ingredientIds:ae,score:H}),w++}ie.sort((k,Y)=>Y.score-k.score),B=ie.slice(0,S);const oe=new Set;B=B.filter(k=>{const Y=k.ingredientIds.join(",");return oe.has(Y)?!1:(oe.add(Y),!0)}),r?.({phase:"beam-search",processedStates:w,beamSize:B.length,expandedSlots:A+1,totalSlots:T})}r?.({phase:"material-sweep",processedStates:w,beamSize:B.length,expandedSlots:T,totalSlots:T,detail:`Sweeping ${p.length} tier combos  ${y.length} atk speeds`});const z=new Map;for(const A of B){if(l?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");const ie=A.ingredientIds,oe=ie.map(k=>n.ingredientsById.get(k)??n.noIngredient);for(const k of p)for(const Y of y){const ae=Wx(u,k,oe,Y),{score:H,breakdown:le}=aS(ae,s.weights,s),M=ik(ie,u.id,k,Y,f),U=ie.join(",")+"|"+k.join(",")+"|"+Y,K=z.get(U);(!K||H>K.score)&&z.set(U,{recipeId:u.id,ingredientIds:ie,matTiers:k,atkSpd:Y,effectiveness:ae.effectiveness,stats:ae,score:H,scoreBreakdown:le,hash:M}),w++}}const P=Array.from(z.values());P.sort((A,ie)=>ie.score-A.score);const I=Object.keys(s.target).length>0,j=new Set,N=[],L=[];function se(A){const ie=s.maxReqs;for(let oe=0;oe<5;oe++){const k=ie[oe];if(k!=null&&Math.max(0,A.reqs[oe])>k)return!1}return!0}function ce(A){if(D.size===0)return!0;const ie=new Set(A);for(const oe of D)if(!ie.has(oe))return!1;return!0}for(const A of P)j.has(A.hash)||(j.add(A.hash),ce(A.ingredientIds)&&se(A.stats)&&(I&&mk(A.stats,s.target)?N.push(A):L.push(A)));if(I&&N.length===0&&!c){const A={...s,topKPerSlot:Math.min(400,Math.max(s.topKPerSlot*2,180)),beamWidth:Math.min(5e3,Math.max(s.beamWidth*2,1200))};if(A.topKPerSlot!==s.topKPerSlot||A.beamWidth!==s.beamWidth){r?.({phase:"threshold-rescue",processedStates:w,beamSize:B.length,expandedSlots:T,totalSlots:T,detail:`No candidates satisfied thresholds. Retrying with topK=${A.topKPerSlot}, beam=${A.beamWidth}.`});const oe=sS({catalog:n,constraints:A,signal:l,onProgress:r,alreadyThresholdRescue:!0});if(oe.length>0)return oe}}const ee=I?N.slice(0,s.topN):L.slice(0,s.topN),fe=N.length;return r?.({phase:"complete",processedStates:w,beamSize:ee.length,expandedSlots:T,totalSlots:T,detail:I?fe>0?`Found ${ee.length} candidates (${fe} satisfy thresholds) from ${w} states`:`Found 0 candidates satisfying thresholds (${L.length} failed threshold checks) from ${w} states`:`Found ${ee.length} candidates from ${w} states`}),ee}class bk{worker=null;requestId=0;currentReject=null;currentRequestId=null;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL(""+new URL("worker-runtime-2a3hGgJm.js",import.meta.url).href,import.meta.url),{type:"module"}))}async run(n,s,l={}){if(!this.worker)return sS({catalog:n,constraints:s,onProgress:l.onProgress,signal:l.signal});const r=++this.requestId;return this.currentRequestId=r,new Promise((c,u)=>{this.currentReject=u;const f=()=>{this.worker?.postMessage({type:"cancel",requestId:r}),u(new DOMException("Recipe solver cancelled","AbortError"))};l.signal?.addEventListener("abort",f,{once:!0});const g=p=>{const y=p.data;if(y.requestId===r){if(y.type==="progress"){l.onProgress?.(y.progress);return}if(this.worker?.removeEventListener("message",g),l.signal?.removeEventListener("abort",f),this.currentReject=null,this.currentRequestId=null,y.type==="error"){u(new Error(y.message));return}c(y.candidates)}};this.worker.addEventListener("message",g),this.worker.postMessage({type:"run",requestId:r,catalog:n,constraints:s})})}cancelCurrent(){this.currentRequestId!==null&&(this.worker?.postMessage({type:"cancel",requestId:this.currentRequestId}),this.currentReject?.(new DOMException("Recipe solver cancelled","AbortError")),this.currentReject=null,this.currentRequestId=null)}dispose(){this.worker?.terminate(),this.worker=null}}function $i(e){return e?[e.minimum,e.maximum]:[0,0]}function xk(e){const n={item:e.materials[0].item,amount:e.materials[0].amount},s={item:e.materials[1].item,amount:e.materials[1].amount};return{id:e.id,name:e.name,type:e.type,skill:e.skill,materials:[n,s],healthOrDamage:$i(e.healthOrDamage),durability:$i(e.durability),duration:$i(e.duration),basicDuration:$i(e.basicDuration),lvl:$i(e.lvl)}}function Sk(e){const n={};if(e.ids)for(const[c,u]of Object.entries(e.ids))u&&typeof u=="object"&&"minimum"in u&&(n[c]={min:u.minimum,max:u.maximum});const s={left:e.posMods?.left??0,right:e.posMods?.right??0,above:e.posMods?.above??0,under:e.posMods?.under??0,touching:e.posMods?.touching??0,notTouching:e.posMods?.notTouching??0},l={dura:e.itemIDs?.dura??0,strReq:e.itemIDs?.strReq??0,dexReq:e.itemIDs?.dexReq??0,intReq:e.itemIDs?.intReq??0,defReq:e.itemIDs?.defReq??0,agiReq:e.itemIDs?.agiReq??0},r={dura:e.consumableIDs?.dura??0,charges:e.consumableIDs?.charges??0};return{id:e.id,name:e.name,displayName:e.displayName??e.name,lvl:e.lvl,tier:e.tier,skills:e.skills??[],ids:n,itemIDs:l,consumableIDs:r,posMods:s,isPowder:e.isPowder,pid:e.pid}}function wk(){return{id:fc,name:"No Ingredient",displayName:"No Ingredient",lvl:0,tier:0,skills:[],ids:{},itemIDs:{dura:0,strReq:0,dexReq:0,intReq:0,defReq:0,agiReq:0},consumableIDs:{dura:0,charges:0},posMods:{left:0,right:0,above:0,under:0,touching:0,notTouching:0}}}function _k(e,n){const s=new Map,l=new Map;for(const p of e){s.set(p.id,p);const y=p.type.toUpperCase(),v=l.get(y)??[];v.push(p),l.set(y,v)}const r=wk(),c=[r,...n],u=new Map,f=new Map,g=new Map;for(const p of c){u.set(p.id,p),g.set(p.name.toLowerCase(),p.id),p.displayName&&g.set(p.displayName.toLowerCase(),p.id);for(const y of p.skills){const v=y.toUpperCase(),x=f.get(v)??[];x.push(p),f.set(v,x)}}return{recipes:e,recipesById:s,recipesByType:l,ingredients:c,ingredientsById:u,ingredientsBySkill:f,ingredientIdByName:g,noIngredient:r}}async function uy(e){let n=null;for(const s of e)try{const l=await fetch(s,{cache:"force-cache"});if(!l.ok)throw new Error(`HTTP ${l.status} for ${s}`);return await l.json()}catch(l){n=l}throw n instanceof Error?n:new Error("Failed to fetch data")}class Ek{snapshotPromise=null;async getCatalog(){return this.snapshotPromise||(this.snapshotPromise=this.load()),this.snapshotPromise}async load(){const n=g=>{if(typeof window>"u")return g;const p=window.location.href.split("?")[0].replace(/\/[^/]*$/,"/")||window.location.origin+"/";return new URL(g,p).href},s=[n("recipes_compress.json"),"./recipes_compress.json","../recipes_compress.json","recipes_compress.json"],l=[n("ingreds_compress.json"),"./ingreds_compress.json","../ingreds_compress.json","ingreds_compress.json"],[r,c]=await Promise.all([uy(s),uy(l)]),u=r.recipes.map(xk),f=c.map(Sk);return _k(u,f)}}const Nk=new Ek,Tk={helmet:"helmet",chestplate:"chestplate",leggings:"leggings",boots:"boots",ring:"ring1",bracelet:"bracelet",necklace:"necklace",spear:"weapon",bow:"weapon",wand:"weapon",dagger:"weapon",relik:"weapon"},jk={advancedIds:"Advanced IDs only",balanced:"Balanced",offense:"Offense",defense:"Defense",utility:"Utility / Sustain",skillpoints:"Skill Points"},Mk=["advancedIds","balanced","offense","defense","utility","skillpoints"];function Dk(e){const n={...Kx};switch(e){case"advancedIds":return{offense:.25,defense:.25,utility:.25,skillPoints:.25,reqPenalty:.25};case"offense":return{offense:2,defense:0,utility:0,skillPoints:0,reqPenalty:0};case"defense":return{offense:0,defense:2,utility:0,skillPoints:0,reqPenalty:0};case"utility":return{offense:0,defense:0,utility:2,skillPoints:0,reqPenalty:0};case"skillpoints":return{offense:0,defense:0,utility:0,skillPoints:2,reqPenalty:0};default:return n}}const Rk={durability:"Durability",duration:"Duration",sdPct:"Spell Dmg %",sdRaw:"Spell Dmg Raw",mdPct:"Melee Dmg %",mdRaw:"Melee Dmg Raw",damPct:"Damage %",poison:"Poison",hpBonus:"HP Bonus",hprRaw:"HPR Raw",hprPct:"HPR %",mr:"Mana Regen",ms:"Mana Steal",ls:"Life Steal",spd:"Walk Speed",xpb:"XP Bonus",lb:"Loot Bonus",ref:"Reflection",thorns:"Thorns",expd:"Exploding",str:"STR",dex:"DEX",int:"INT",def:"DEF",agi:"AGI",eDamPct:"Earth Dmg %",tDamPct:"Thunder Dmg %",wDamPct:"Water Dmg %",fDamPct:"Fire Dmg %",aDamPct:"Air Dmg %",nDamPct:"Neutral Dmg %",rDamPct:"Elem Dmg %",eDefPct:"Earth Def %",tDefPct:"Thunder Def %",wDefPct:"Water Def %",fDefPct:"Fire Def %",aDefPct:"Air Def %",rDefPct:"Elem Def %",atkTier:"Atk Speed Bonus",spRegen:"Soul Point Regen",eSteal:"Emerald Steal",rSdRaw:"Rainbow Spell Raw",critDamPct:"Crit Damage %",spPct1:"1st Spell Cost %",spRaw1:"1st Spell Cost Raw",spPct2:"2nd Spell Cost %",spRaw2:"2nd Spell Cost Raw",spPct3:"3rd Spell Cost %",spRaw3:"3rd Spell Cost Raw",spPct4:"4th Spell Cost %",spRaw4:"4th Spell Cost Raw",sprint:"Sprint",sprintReg:"Sprint Regen",jh:"Jump Height",lq:"Loot Quality",gXp:"Gather XP",gSpd:"Gather Speed",healPct:"Healing %",kb:"Knockback",weakenEnemy:"Weaken Enemy",slowEnemy:"Slow Enemy",maxMana:"Max Mana",mainAttackRange:"Main Attack Range",eDamRaw:"Earth Dmg Raw",tDamRaw:"Thunder Dmg Raw",wDamRaw:"Water Dmg Raw",fDamRaw:"Fire Dmg Raw",aDamRaw:"Air Dmg Raw",nDamRaw:"Neutral Dmg Raw",damRaw:"Damage Raw",rDamRaw:"Elem Dmg Raw"},dy=["durability","duration","hprPct","mr","sdPct","mdPct","ls","ms","xpb","lb","ref","thorns","expd","spd","atkTier","poison","hpBonus","spRegen","eSteal","hprRaw","sdRaw","mdRaw","fDamPct","wDamPct","aDamPct","tDamPct","eDamPct","nDamPct","rDamPct","damPct","fDefPct","wDefPct","aDefPct","tDefPct","eDefPct","rDefPct","spPct1","spRaw1","spPct2","spRaw2","spPct3","spRaw3","spPct4","spRaw4","rSdRaw","sprint","sprintReg","jh","lq","gXp","gSpd","eDamRaw","tDamRaw","wDamRaw","fDamRaw","aDamRaw","nDamRaw","damRaw","rDamRaw","critDamPct","healPct","maxMana","str","dex","int","def","agi"];function lS(e){return Rk[e]??e}const Lo={HELMET:"ARMOURING",CHESTPLATE:"TAILORING",LEGGINGS:"TAILORING",BOOTS:"TAILORING",SPEAR:"WEAPONSMITHING",DAGGER:"WEAPONSMITHING",WAND:"WOODWORKING",BOW:"WOODWORKING",RELIK:"WOODWORKING",RING:"JEWELING",NECKLACE:"JEWELING",BRACELET:"JEWELING",POTION:"ALCHEMISM",SCROLL:"SCRIBING",FOOD:"COOKING"};function Ck(e){const n=_.useRef(null);n.current||(n.current=new bk);const[s,l]=_.useState(null),[r,c]=_.useState(null),[u,f]=_.useState("HELMET"),[g,p]=_.useState("103-105"),[y,v]=_.useState("auto"),[x,S]=_.useState(3),[T,w]=_.useState(3),[D,C]=_.useState("auto"),[B,z]=_.useState("FAST"),[P,I]=_.useState("advancedIds"),[j,N]=_.useState(""),[L,se]=_.useState(""),[ce,ee]=_.useState([]),fe=_.useRef(1),[A,ie]=_.useState(Bs.beamWidth),[oe,k]=_.useState(Bs.topKPerSlot),[Y,ae]=_.useState(Bs.topN),[H,le]=_.useState([null,null,null,null,null]),[M,U]=_.useState([]),[K,W]=_.useState(""),[he,ge]=_.useState(!1),[_e,Me]=_.useState(null),[ve,Ze]=_.useState(null),[Yt,Mt]=_.useState(null),En=_.useRef(null),bt=jh(u.toLowerCase())==="weapon";_.useEffect(()=>{e.open&&(s||Nk.getCatalog().then(l).catch(re=>{c(re instanceof Error?re.message:"Failed to load crafting data")}))},[e.open,s]);const Jt=_.useMemo(()=>{if(!s)return 0;const re=Lo[u]??"";return s.ingredientsBySkill.get(re)?.length??0},[s,u]);function Ge(re){if(!s)return{ids:[],unknown:[]};const ze=re.split(",").map(V=>V.trim()).filter(Boolean),Qe=[],at=[];for(const V of ze){const ue=s.ingredientIdByName.get(V.toLowerCase());ue==null?at.push(V):Qe.push(ue)}return{ids:Qe,unknown:at}}const en=re=>{navigator.clipboard.writeText(re).then(()=>{Mt(re),setTimeout(()=>Mt(null),2e3)})},tn=async()=>{if(!s)return;Me(null),U([]),Ze(null);const re=Ge(j),ze=Ge(L);if(re.unknown.length>0||ze.unknown.length>0){Me([re.unknown.length?`Unknown must-include: ${re.unknown.join(", ")}`:"",ze.unknown.length?`Unknown excluded: ${ze.unknown.join(", ")}`:""].filter(Boolean).join(" | "));return}const Qe=(Lo[u]??"").toUpperCase(),at=[];for(const xe of re.ids){const qe=s.ingredientsById.get(xe);qe&&!qe.skills.some(It=>It.toUpperCase()===Qe)&&at.push(qe.displayName||qe.name)}if(at.length>0){Me(`${at.join(", ")} cannot be used for ${u} (${Qe})  they require a different profession.`);return}const V={};for(const xe of ce)xe.key&&(xe.min==null&&xe.max==null||(V[xe.key]={min:xe.min??void 0,max:xe.max??void 0}));const ue={...Bs,recipeType:u,levelRange:g,matTiers:y==="manual"?[x,T]:null,atkSpd:bt&&D==="manual"?B:null,weights:Dk(P),mustIncludeIngredients:re.ids,excludedIngredients:ze.ids,topN:Math.max(1,Math.min(100,Y)),topKPerSlot:Math.max(10,Math.min(300,oe)),beamWidth:Math.max(20,Math.min(3e3,A)),target:V,maxReqs:H};En.current?.abort();const Ve=new AbortController;En.current=Ve,ge(!0),W("Starting...");try{const xe=await n.current.run(s,ue,{signal:Ve.signal,onProgress:qe=>{Ze(qe),W(`${qe.phase}: ${qe.expandedSlots}/${qe.totalSlots} slots, beam ${qe.beamSize}, states ${qe.processedStates}${qe.detail?` | ${qe.detail}`:""}`)}});U(xe),xe.length===0?Me("No valid candidates found. Try relaxing constraints, increasing beam width/top K, or choosing a different recipe."):W(`Done. ${xe.length} candidates found.`)}catch(xe){xe instanceof DOMException&&xe.name==="AbortError"?W("Cancelled"):(Me(xe instanceof Error?xe.message:"Recipe solver failed"),W(""))}finally{ge(!1),Ze(null)}},sn=()=>{En.current?.abort(),n.current?.cancelCurrent(),ge(!1),W("Cancelled"),Ze(null)};return m.jsxs(Sh,{open:e.open,onOpenChange:e.onOpenChange,title:"Recipe Solver",description:"Find optimal ingredient combinations for crafted items. Uses beam search over the ingredient pool.",className:"!w-[min(95vw,1360px)]",footer:m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("div",{className:"text-sm text-[var(--wb-muted)]",children:K}),m.jsxs("div",{className:"flex gap-2",children:[he?m.jsx(Te,{variant:"ghost",onClick:sn,children:"Cancel"}):null,m.jsx(Te,{variant:"primary",onClick:tn,disabled:!s||he,children:"Solve Recipe"})]})]}),children:[r?m.jsx("div",{className:"mb-4 rounded-xl border border-rose-400/30 bg-rose-400/5 p-3 text-sm text-rose-200",children:r}):null,he&&ve?m.jsxs("div",{className:"mb-4 rounded-xl border border-sky-400/30 bg-sky-400/5 p-3",children:[m.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:"rounded-md bg-sky-400/20 px-2 py-0.5 text-xs font-medium text-sky-100",children:ve.phase}),ve.totalSlots>0?m.jsxs("span",{className:"text-xs text-[var(--wb-muted)]",children:["Slots ",ve.expandedSlots,"/",ve.totalSlots]}):null]}),m.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-black/20",children:m.jsx("div",{className:"h-full rounded-full bg-sky-400/70 transition-all duration-300",style:{width:ve.totalSlots>0?`${100*ve.expandedSlots/ve.totalSlots}%`:"0%"}})}),m.jsxs("div",{className:"mt-2 flex flex-wrap gap-4 text-xs text-[var(--wb-muted)]",children:[m.jsxs("span",{children:["States: ",ve.processedStates.toLocaleString()]}),m.jsxs("span",{children:["Beam: ",ve.beamSize.toLocaleString()]})]})]}):null,m.jsxs("div",{className:"grid h-[52vh] min-h-0 gap-4 overflow-hidden lg:h-[56vh] lg:grid-cols-[1fr_1fr] lg:items-stretch",children:[m.jsxs("div",{className:"grid h-full min-h-0 min-w-0 gap-3 overflow-auto pr-1 wb-scrollbar",children:[m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Recipe"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{children:[m.jsx(Be,{children:"Item Type"}),m.jsx("select",{className:"wb-select",value:u,onChange:re=>f(re.target.value),children:ek.map(re=>m.jsxs("option",{value:re,children:[re," (",Lo[re],")"]},re))})]}),m.jsxs("div",{children:[m.jsx(Be,{children:"Level Range"}),m.jsx("select",{className:"wb-select",value:g,onChange:re=>p(re.target.value),children:tk.map(re=>m.jsx("option",{value:re,children:re},re))})]}),s?m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[Jt," compatible ingredients in pool for ",Lo[u]]}):null]})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Material Tiers"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx(dt,{active:y==="auto",onClick:()=>v("auto"),children:"Auto-optimize"}),m.jsx(dt,{active:y==="manual",onClick:()=>v("manual"),children:"Manual"})]}),y==="manual"?m.jsxs("div",{className:"flex gap-3",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx(Be,{children:"Material 1 Tier"}),m.jsx("div",{className:"flex gap-2",children:[1,2,3].map(re=>m.jsx(dt,{active:x===re,onClick:()=>S(re),children:re},re))})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx(Be,{children:"Material 2 Tier"}),m.jsx("div",{className:"flex gap-2",children:[1,2,3].map(re=>m.jsx(dt,{active:T===re,onClick:()=>w(re),children:re},re))})]})]}):null]})]}),bt?m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Attack Speed"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx(dt,{active:D==="auto",onClick:()=>C("auto"),children:"Auto-optimize"}),m.jsx(dt,{active:D==="manual",onClick:()=>C("manual"),children:"Manual"})]}),D==="manual"?m.jsx("div",{className:"flex gap-2",children:Vx.map(re=>m.jsx(dt,{active:B===re,onClick:()=>z(re),children:re},re))}):null]})]}):null,m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Optimization Goal"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:Mk.map(re=>m.jsx(dt,{active:P===re,onClick:()=>I(re),children:jk[re]},re))})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Ingredient Constraints"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{children:[m.jsx(Be,{children:"Must-Include Ingredients (comma-separated)"}),m.jsx("textarea",{className:"wb-textarea min-h-16",value:j,onChange:re=>N(re.target.value),placeholder:"e.g. Blueshift Beacon, Depurinated Genome"})]}),m.jsxs("div",{children:[m.jsx(Be,{children:"Excluded Ingredients (comma-separated)"}),m.jsx("textarea",{className:"wb-textarea min-h-16",value:L,onChange:re=>se(re.target.value),placeholder:"Blacklist ingredient names"})]})]})]}),m.jsx("div",{className:"wb-card p-3",children:m.jsxs("details",{className:"group",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-semibold",children:"Advanced: Stat Thresholds"}),m.jsxs("div",{className:"mt-3 grid gap-3",children:[m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Set minimum / maximum targets for specific stats on the crafted item."}),ce.map(re=>m.jsx("div",{className:"rounded-lg border border-[var(--wb-border-muted)] p-2",children:m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsxs("div",{children:[m.jsx(Be,{children:"Stat"}),m.jsx("select",{className:"wb-select w-full",value:re.key,onChange:ze=>ee(Qe=>Qe.map(at=>at.id===re.id?{...at,key:ze.target.value}:at)),children:dy.map(ze=>m.jsxs("option",{value:ze,children:[lS(ze)," (",ze,")"]},ze))})]}),m.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[m.jsxs("div",{className:"min-w-[80px] flex-1",children:[m.jsx(Be,{children:"Min"}),m.jsx("input",{className:"wb-input w-full",type:"number",value:re.min??"",onChange:ze=>{const Qe=ze.target.value.trim();ee(at=>at.map(V=>V.id===re.id?{...V,min:Qe===""?null:Number(Qe)}:V))}})]}),m.jsxs("div",{className:"min-w-[80px] flex-1",children:[m.jsx(Be,{children:"Max"}),m.jsx("input",{className:"wb-input w-full",type:"number",value:re.max??"",onChange:ze=>{const Qe=ze.target.value.trim();ee(at=>at.map(V=>V.id===re.id?{...V,max:Qe===""?null:Number(Qe)}:V))}})]}),m.jsx(Te,{variant:"ghost",className:"shrink-0",onClick:()=>ee(ze=>ze.filter(Qe=>Qe.id!==re.id)),children:"Remove"})]})]})},re.id)),m.jsx("div",{children:m.jsx(Te,{variant:"ghost",onClick:()=>ee(re=>[...re,{id:fe.current++,key:dy[0],min:null,max:null}]),children:"Add Threshold"})}),m.jsxs("div",{className:"mt-3 border-t border-[var(--wb-border-muted)] pt-3",children:[m.jsx(Be,{children:"Max Skill Points (Req Limit)"}),m.jsx("div",{className:"mt-1 text-[11px] text-[var(--wb-muted)]",children:"Exclude recipes that exceed any of these. Leave empty for no limit."}),m.jsx("div",{className:"mt-2 grid grid-cols-5 gap-2",children:["STR","DEX","INT","DEF","AGI"].map((re,ze)=>m.jsxs("div",{children:[m.jsx("label",{className:"mb-0.5 block text-[11px] text-[var(--wb-muted)]",children:re}),m.jsx("input",{className:"wb-input w-full",type:"number",min:0,placeholder:"",value:H[ze]??"",onChange:Qe=>{const at=Qe.target.value.trim();le(V=>{const ue=[...V];return ue[ze]=at===""?null:Math.max(0,Number(at)),ue})}})]},re))})]})]})]})}),m.jsx("div",{className:"wb-card p-3",children:m.jsxs("details",{className:"group",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-semibold",children:"Search Heuristics"}),m.jsxs("div",{className:"mt-3 grid gap-3",children:[m.jsx(Oa,{label:"Beam Width",value:A,onChange:re=>ie(re??Bs.beamWidth),min:20,max:3e3}),m.jsx(Oa,{label:"Top K per Slot",value:oe,onChange:re=>k(re??Bs.topKPerSlot),min:10,max:300}),m.jsx(Oa,{label:"Top N Results",value:Y,onChange:re=>ae(re??Bs.topN),min:1,max:100})]})]})})]}),m.jsx("div",{className:"h-full min-h-0 min-w-0",children:m.jsxs("div",{className:"wb-card flex h-full min-h-0 flex-col overflow-hidden p-3",children:[m.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[m.jsx("div",{className:"text-sm font-semibold",children:"Candidates"}),m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[M.length," shown"]})]}),m.jsx("div",{className:"min-h-0 flex-1 space-y-2 overflow-auto pr-1 wb-scrollbar",children:M.length===0?m.jsx("div",{className:"rounded-xl border border-dashed border-[var(--wb-border)] p-4 text-sm text-[var(--wb-muted)]",children:"Run Recipe Solver to find optimal ingredient combinations."}):M.map((re,ze)=>m.jsx(kk,{candidate:re,index:ze,catalog:s,copiedHash:Yt,onCopyHash:en,onEquipCraft:e.onEquipCraft},`${re.hash}-${ze}`))}),_e?m.jsx("div",{className:"mt-2 rounded-xl border border-rose-400/30 bg-rose-400/8 p-2 text-xs text-rose-100",children:_e}):null]})})]})]})}function Ak(e){const n=e.startsWith("CR-")?e.slice(3):e;return`${typeof window<"u"?new URL("crafter/",window.location.href).href:"crafter/"}#${n}`}function kk(e){const{candidate:n,index:s,catalog:l}=e,{stats:r,scoreBreakdown:c}=n,u=n.ingredientIds.map(v=>{const x=l?.ingredientsById.get(v);return x?.displayName??x?.name??`#${v}`}),f=[];for(const[v,x]of Object.entries(r.maxRolls))x!==0&&f.push({label:lS(v),value:x>0?`+${x}`:`${x}`});f.sort((v,x)=>{const S=typeof v.value=="string"?parseInt(v.value):v.value,T=typeof x.value=="string"?parseInt(x.value):x.value;return Math.abs(T)-Math.abs(S)});const g=()=>{window.open(Ak(n.hash),"_blank","noopener,noreferrer")},p=Tk[r.type.toLowerCase()]??null,y=()=>{p&&e.onEquipCraft&&e.onEquipCraft(p,{hash:n.hash,type:r.type,category:r.category,lvl:r.lvl})};return m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3",children:[m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"text-sm font-semibold",children:["#",s+1," | Score ",Math.round(n.score)]}),m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Off ",Math.round(c.offense)," | Def ",Math.round(c.defense)," | ","Util ",Math.round(c.utility)," | SP ",Math.round(c.skillPoints),c.reqPenalty>0?` | Req -${Math.round(c.reqPenalty)}`:""]}),m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Mat Tiers: ",n.matTiers[0],"/",n.matTiers[1],r.category==="weapon"?` | Atk Spd: ${n.atkSpd}`:""]})]}),m.jsxs("div",{className:"flex shrink-0 flex-col gap-1",children:[m.jsx(Te,{className:"px-2 py-1 text-xs",onClick:()=>e.onCopyHash(n.hash),children:e.copiedHash===n.hash?"Copied!":"Copy Hash"}),m.jsx(Te,{variant:"ghost",className:"px-2 py-1 text-xs",onClick:g,children:"Open in Crafter"}),p?m.jsx(Te,{className:"border border-emerald-400/40 bg-emerald-400/15 px-2 py-1 text-xs text-emerald-100 hover:bg-emerald-400/25",onClick:y,children:"Use in Build"}):null]})]}),m.jsxs("div",{className:"mt-2",children:[m.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Ingredients (3x2 grid)"}),m.jsx("div",{className:"grid grid-cols-2 gap-1",children:u.map((v,x)=>m.jsxs("div",{className:"rounded-md border border-[var(--wb-border-muted)] bg-black/10 px-2 py-1 text-xs",children:[m.jsx("div",{className:"truncate",children:v}),m.jsxs("div",{className:"text-[10px] text-[var(--wb-muted)]",children:["Eff: ",n.effectiveness[x],"%"]})]},x))})]}),f.length>0?m.jsxs("div",{className:"mt-2",children:[m.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Stats (max rolls)"}),m.jsx("div",{className:"flex flex-wrap gap-1",children:f.slice(0,12).map(({label:v,value:x})=>{const S=typeof x=="string"?x.startsWith("+"):x>0;return m.jsxs("span",{className:`rounded px-1.5 py-0.5 text-[11px] ${S?"bg-emerald-400/15 text-emerald-200":"bg-rose-400/15 text-rose-200"}`,children:[v,": ",x]},v)})})]}):null,r.category==="armor"?m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["HP: ",r.hpLow,"-",r.hp," | Dur: ",r.durability[0],"-",r.durability[1],"| Reqs: [",r.reqs.join(", "),"]"]}):null,r.category==="consumable"?m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Duration: ",r.duration[0],"-",r.duration[1],"s | Charges: ",r.charges]}):null,r.category==="weapon"?m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["nDam: ",r.nDam," | Dur: ",r.durability[0],"-",r.durability[1],"| Reqs: [",r.reqs.join(", "),"]"]}):null]})}const fy="2.1.6.0";function zk(e){return typeof e=="string"&&/^\d+\.\d+\.\d+\.\d+$/.test(e)}function Ok(e){return[...new Set(e)]}class Pk{cache=new Map;async getDataset(n){const s=zk(n)?n:fy;return this.cache.has(s)||this.cache.set(s,this.loadDataset(s)),this.cache.get(s)}async loadDataset(n){const s=Ok([n,fy]),l=[];for(const r of s){const c=this.buildUrls(r);for(const u of c)try{const f=await fetch(u,{cache:"force-cache"});if(!f.ok)throw new Error(`Failed to fetch ${u}: ${f.status}`);const g=await f.json();return $A(g,r)}catch(f){l.push(f instanceof Error?f.message:`Failed to fetch ${u}`)}}throw new Error(`Unable to load ability tree data. Tried versions: ${s.join(", ")}. ${l.slice(-4).join(" | ")}`)}buildUrls(n){return[(l=>{if(typeof window>"u")return l;const r=window.location.href.split("?")[0].replace(/\/[^/]*$/,"/")||window.location.origin+"/";return new URL(l,r).href})(`data/${n}/atree.json`),`./data/${n}/atree.json`,`../data/${n}/atree.json`,`data/${n}/atree.json`]}}const Bk=new Pk;class Ik{numeric=new Map;maps=new Map;get(n){return this.maps.has(n)?this.maps.get(n):this.numeric.get(n)??0}getNum(n){const s=this.get(n);return typeof s=="number"?s:0}has(n){return this.maps.has(n)||this.numeric.has(n)}add(n,s){!Number.isFinite(s)||s===0||this.numeric.set(n,(this.numeric.get(n)??0)+s)}set(n,s){Number.isFinite(s)&&this.numeric.set(n,s)}getMap(n){let s=this.maps.get(n);return s||(s=new Map,this.maps.set(n,s)),s}addMap(n,s,l){if(!Number.isFinite(l)||l===0)return;const r=this.getMap(n);r.set(s,(r.get(s)??0)+l)}}const hy=["str","dex","int","def","agi"],Lk=["e","t","w","f","a"],ea=["n",...Lk],Wf=["SUPER_SLOW","VERY_SLOW","SLOW","NORMAL","FAST","VERY_FAST","SUPER_FAST"],Xf=[.51,.83,1.5,2.05,2.5,3.1,4.3],qk=[1,1,1,.867,.951],Uk=[1,1,.5/Rc(150),.867,.951],Hk=["nDam","eDam","tDam","wDam","fDam","aDam"],$k=["Super Slow","Very Slow","Slow","Normal","Fast","Very Fast","Super Fast"],my=["str","dex","int","def","agi","sdPct","sdRaw","mdPct","mdRaw","atkTier","damPct","damRaw","rSdPct","rSdRaw","rMdPct","rMdRaw","rDamPct","rDamRaw","critDamPct","healPct","spPct1","spPct2","spPct3","spPct4","spRaw1","spRaw2","spRaw3","spRaw4","spPct1Final","spPct2Final","spPct3Final","spPct4Final","nSdPct","eSdPct","tSdPct","wSdPct","fSdPct","aSdPct","nMdPct","eMdPct","tMdPct","wMdPct","fMdPct","aMdPct","nDamPct","eDamPct","tDamPct","wDamPct","fDamPct","aDamPct","nSdRaw","eSdRaw","tSdRaw","wSdRaw","fSdRaw","aSdRaw","nMdRaw","eMdRaw","tMdRaw","wMdRaw","fMdRaw","aMdRaw","nDamRaw","eDamRaw","tDamRaw","wDamRaw","fDamRaw","aDamRaw","nDamAddMin","nDamAddMax","eDamAddMin","eDamAddMax","tDamAddMin","tDamAddMax","wDamAddMin","wDamAddMax","fDamAddMin","fDamAddMax","aDamAddMin","aDamAddMax","rDamAddMin","rDamAddMax","damAddMin","damAddMax","hp","hpBonus","defMult"];function ft(e,n=0){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const s=Number(e);if(Number.isFinite(s))return s}return n}function Rc(e){if(e<=0)return 0;let n=e;n>=150&&(n=150);const s=.9908;return s/(1-s)*(1-Math.pow(s,n))/100}function Zk(e){return Math.max(1,Math.min(106,Math.round(e||1)))*5+5}function Fk(e){if(Array.isArray(e)&&e.length>=2)return[ft(e[0]),ft(e[1])];if(typeof e=="string"){const n=e.match(/(-?\d+(?:\.\d+)?)\s*-\s*(-?\d+(?:\.\d+)?)/);if(n)return[Number(n[1]),Number(n[2])]}return[0,0]}function Yk(e){if(e.category!=="weapon")return null;const n=e.legacyRaw??{},s=Hk.map(r=>Fk(n[r])),l=s.map(([r,c])=>r!==0||c!==0);return{atkSpd:typeof n.atkSpd=="string"&&n.atkSpd?n.atkSpd:e.atkSpd,type:e.type,tier:typeof n.tier=="string"?n.tier:e.tier,damages:s,damagePresent:l}}function Gk(e){switch(e){case"bow":return{type:"replace_spell",name:"Bow Shot",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Single Shot",parts:[{name:"Single Shot",multipliers:[100,0,0,0,0,0]}]};case"relik":return{type:"replace_spell",name:"Relik Melee",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Total",parts:[{name:"Single Beam",multipliers:[33,0,0,0,0,0]},{name:"Total",hits:{"Single Beam":3}}]};case"wand":return{type:"replace_spell",name:"Wand Melee",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Melee",parts:[{name:"Melee",multipliers:[100,0,0,0,0,0]}]};default:return{type:"replace_spell",name:"Melee",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Melee",parts:[{name:"Melee",multipliers:[100,0,0,0,0,0]}]}}}function Il(e){return structuredClone(e)}function Nf(e,n){if(typeof n=="string"){const[s,l]=n.split("."),r=Number(s);if(!Number.isFinite(r)||!l)return 0;const c=e.get(r);return ft(c?.properties?.[l])}return ft(n)}function Vk(e,n){const s=new Set(n.activeIds),l=new Map,r=c=>{const u={id:c.id,baseAbilityId:c.baseAbilityId??null,properties:Il(c.properties??{}),effects:Il(c.effects??[])};if(u.baseAbilityId!=null&&l.has(u.baseAbilityId)){const f=l.get(u.baseAbilityId);f.effects=f.effects.concat(u.effects);for(const[g,p]of Object.entries(u.properties))f.properties[g]=ft(f.properties[g])+ft(p);return}l.set(u.id,u)};for(const c of e.nodes)s.has(c.id)&&r(c);return l}function Kk(e,n=[]){const s=new Map;for(const l of n)s.set(l.base_spell,Il(l));for(const[,l]of e)for(const r of l.effects){if(r.type!=="replace_spell")continue;const c=ft(r.base_spell,Number.NaN);if(!Number.isFinite(c))continue;const u=Il(r);let f=s.get(c);if(!f)f=u,s.set(c,f);else for(const[g,p]of Object.entries(u))f[g]=Il(p);for(const g of f.parts??[]){const p=g.hits;if(p)for(const[y,v]of Object.entries(p))p[y]=Nf(e,v)}}for(const[,l]of e)for(const r of l.effects){const c=typeof r.type=="string"?r.type:"";if(c!=="replace_spell"){if(c==="add_spell_prop"){const u=ft(r.base_spell,Number.NaN);if(!Number.isFinite(u)||!s.has(u))continue;const f=s.get(u),g=typeof r.target_part=="string"?r.target_part:null,p=typeof r.behavior=="string"?r.behavior:"merge",y=ft(r.cost);if(typeof f.cost=="number"&&(f.cost+=y),!g)continue;let v=!1;for(const x of f.parts)if(x.name===g){if("multipliers"in r&&Array.isArray(r.multipliers)&&"multipliers"in x)for(let S=0;S<r.multipliers.length;S++){const T=ft(r.multipliers[S]);Array.isArray(x.multipliers)&&(p==="overwrite"?x.multipliers[S]=T:x.multipliers[S]=(x.multipliers[S]??0)+T)}else if("power"in r&&"power"in x){const S=ft(r.power);x.power=p==="overwrite"?S:ft(x.power)+S}else if("hits"in r&&typeof r.hits=="object"&&r.hits&&"hits"in x)for(const[S,T]of Object.entries(r.hits)){const w=Nf(e,T);p==="overwrite"?x.hits[S]=w:x.hits[S]=(x.hits[S]??0)+w}if("hide"in r&&(x.display=!1),"ignored_mults"in r){const S=Array.isArray(r.ignored_mults)?r.ignored_mults.filter(T=>typeof T=="string"):[];"ignored_mults"in x&&Array.isArray(x.ignored_mults)?x.ignored_mults.push(...S):"multipliers"in x&&(x.ignored_mults=S)}v=!0;break}if(!v&&p==="merge"){const x=Il(r);if(x.name=g,typeof x.hits=="object"&&x.hits)for(const[S,T]of Object.entries(x.hits))x.hits[S]=Nf(e,T);"hide"in r&&(x.display=!1),f.parts.push(x)}typeof r.display=="string"&&(f.display=r.display)}else if(c==="convert_spell_conv"){const u=ft(r.base_spell,Number.NaN);if(!Number.isFinite(u)||!s.has(u))continue;const f=s.get(u),g=typeof r.target_part=="string"?r.target_part:"all",p=typeof r.conversion=="string"?r.conversion:"",y=ea.indexOf(p);if(y<0)continue;const v=g==="all";for(const x of f.parts){if(!("multipliers"in x)||!v&&x.name!==g)continue;const S=x.multipliers.slice(1).reduce((w,D)=>w+ft(D),0),T=[ft(x.multipliers[0]),0,0,0,0,0];T[y]=S,x.multipliers=T}}}}return s}function Wk(e,n,s){let l=!1,r=!1;for(const[,c]of e)for(const u of c.effects){const f=typeof u.type=="string"?u.type:"";if(f==="raw_stat"){if(u.toggle){l=!0;continue}const g=Array.isArray(u.bonuses)?u.bonuses:[];for(const p of g){if(!p||typeof p!="object")continue;const y=typeof p.type=="string"?p.type:"",v=typeof p.name=="string"?p.name:"",x=ft(p.value);!v||x===0||y==="stat"&&(v.startsWith("damMult.")?n.addMap("damMult",v.slice(8),x):v.startsWith("healMult.")?n.addMap("healMult",v.slice(9),x):v.startsWith("defMult.")?n.add("defMult",x):n.add(v,x))}continue}f==="stat_scaling"&&(r=!0)}l&&s.push("Some ability-tree toggle effects are not applied in Workbench spell damage yet."),r&&s.push("Some ability-tree scaling/slider effects are not applied in Workbench spell damage yet.")}function Xk(e,n,s){const l=new Ik;for(const g of my)l.set(g,0);l.getMap("damMult"),l.getMap("healMult");let r=0,c=0,u=[0,0,0,0,0];for(const g of nt){const p=e.slots[g];if(p==null)continue;const y=n.itemsById.get(p);if(!y)continue;const v=y.legacyRaw??{};for(const x of my)l.add(x,ft(v[x]));r+=ft(v.hp),c+=ft(v.hpBonus),u=[u[0]+ft(v.str),u[1]+ft(v.dex),u[2]+ft(v.int),u[3]+ft(v.def),u[4]+ft(v.agi)]}const f=s??[0,0,0,0,0];return l.set("str",u[0]+f[0]),l.set("dex",u[1]+f[1]),l.set("int",u[2]+f[2]),l.set("def",u[3]+f[3]),l.set("agi",u[4]+f[4]),l.set("hp",r+c+Zk(e.level)),l}function Qk(e,n,s,l,r=!1,c,u=!1,f=[]){const g=n.damages.map(H=>[...H]),p=[...n.damagePresent],y=s.map(H=>ft(H));for(let H=0;H<ea.length;H++){const le=c?`:${c}`:"",M=`${ea[H]}ConvBase${le}`;c&&e.has(M)&&(y[H]+=e.getNum(M));const U=`${ea[H]}ConvBase`;e.has(U)&&(y[H]+=e.getNum(U))}const v=[],x=(y[0]??0)/100;if(x===0)for(let H=0;H<p.length;H++)p[H]=!1;let S=0,T=0;for(const H of g)v.push([H[0]*x,H[1]*x]),S+=H[0],T+=H[1];let w=0;for(let H=1;H<=5;H++){const le=y[H]??0;if(le>0){const M=le/100;v[H][0]+=M*S,v[H][1]+=M*T,p[H]=!0,w+=M}}if(w+=x,!r){const H=Wf.indexOf(n.atkSpd||"NORMAL"),le=Xf[H>=0?H:3]??Xf[3];for(let M=0;M<v.length;M++)v[M][0]*=le,v[M][1]*=le}for(let H=0;H<ea.length;H++){if(!p[H])continue;const le=ea[H];v[H][0]+=e.getNum(`${le}DamAddMin`),v[H][1]+=e.getNum(`${le}DamAddMax`)}const D=l?"Sd":"Md",C=[0];for(let H=0;H<hy.length;H++)C.push(Rc(e.getNum(hy[H]))*qk[H]);const B=(e.getNum(`${D.toLowerCase()}Pct`)+e.getNum("damPct"))/100;let z=0,P=0;const I=[];for(let H=0;H<ea.length;H++){I.push([...v[H]]),z+=v[H][0],P+=v[H][1];const le=ea[H],M=`${le}${D}Pct`;let U=1+(C[H]??0)+B+(e.getNum(M)+e.getNum(`${le}DamPct`))/100;H>0&&(U+=(e.getNum(`r${D}Pct`)+e.getNum("rDamPct"))/100),v[H][0]*=U,v[H][1]*=U}const j=z-I[0][0],N=P-I[0][1],L=e.getNum(`${D.toLowerCase()}Raw`)+e.getNum("damRaw"),se=e.getNum(`r${D}Raw`)+e.getNum("rDamRaw");for(let H=0;H<v.length;H++){const le=I[H],M=ea[H];let U=0;p[H]&&(U+=e.getNum(`${M}${D}Raw`)+e.getNum(`${M}DamRaw`));let K=U,W=U;P>0&&(K+=(z===0?le[1]/P:le[0]/z)*L,W+=le[1]/P*L),H!==0&&N>0&&(K+=(j===0?le[1]/N:le[0]/j)*se,W+=le[1]/N*se),v[H][0]+=K*w,v[H][1]+=W*w}const ce=u?1:1+(C[1]??0),ee=e.getMap("damMult");let fe=1;const A=[1,1,1,1,1,1],ie=[...y];for(const[H,le]of ee.entries())if(!(H.includes(":")&&H.split(":")[1]!==c)&&!f.includes(H))if(H.includes(";")){const M=ea.indexOf(H.split(";")[1]);M!==-1&&(A[M]*=1+le/100)}else fe*=1+le/100;const oe=u?0:1+e.getNum("critDamPct")/100,k=[0,0],Y=[0,0],ae=[];for(let H=0;H<ea.length;H++){v[H][0]*=A[H]*fe,v[H][1]*=A[H]*fe,ie[H]*=A[H]*fe,v[H][0]<0&&(v[H][0]=0),v[H][1]<0&&(v[H][1]=0);const le=[v[H][0]*ce,v[H][1]*ce,v[H][0]*(ce+oe),v[H][1]*(ce+oe)];ae.push(le),k[0]+=le[0],k[1]+=le[1],Y[0]+=le[2],Y[1]+=le[3]}return[k,Y,ae,ie]}function iS(e,n,s){const l=new Map;for(const p of e.parts)l.set(p.name,{type:"need_eval",store:p});const r="use_atkspd"in e?!!e.use_atkspd:!0,c="scaling"in e?e.scaling==="spell":!0,u=p=>{const y=l.get(p);if(!y)return null;if(y.type!=="need_eval")return y;const v=y.store,x=`${e.base_spell}.${v.name}`;let S;if("multipliers"in v){const T=Array.isArray(v.ignored_mults)?v.ignored_mults:[],w=Qk(n,s,v.multipliers.map(D=>ft(D)),c,!r,x,v.use_str===!1,T);S={type:"damage",name:v.name,display:v.display!==!1,normal_total:w[0],crit_total:w[1]}}else if("power"in v){const T=n.getNum("hp"),w=1+n.getNum("healPct")/100;S={type:"heal",name:v.name,display:v.display!==!1,heal_amount:ft(v.power)*T*w}}else{let T=null,w=[0,0],D=[0,0],C=0;for(const[B,z]of Object.entries(v.hits)){const P=u(B);P&&(T&&T!==P.type||(T=P.type,P.type==="damage"?(w=[w[0]+P.normal_total[0]*z,w[1]+P.normal_total[1]*z],D=[D[0]+P.crit_total[0]*z,D[1]+P.crit_total[1]*z]):C+=P.heal_amount*z))}T==="heal"?S={type:"heal",name:v.name,display:v.display!==!1,heal_amount:C}:S={type:"damage",name:v.name,display:v.display!==!1,normal_total:w,crit_total:D}}return l.set(v.name,S),S},f=[],g=Rc(n.getNum("dex"));for(const p of e.parts){const y=u(p.name);if(y)if(y.type==="damage"){const v=(y.normal_total[0]+y.normal_total[1])/2,x=(y.crit_total[0]+y.crit_total[1])/2;f.push({type:"damage",name:y.name,display:y.display,normalTotal:y.normal_total,critTotal:y.crit_total,averageNonCrit:v,averageCrit:x,averageTotal:(1-g)*v+g*x})}else f.push({type:"heal",name:y.name,display:y.display,healAmount:y.heal_amount,averageTotal:y.heal_amount})}return f}function Jk(e){const{spells:n,stats:s,weapon:l}=e,r=n.get(0);if(!r||!Array.isArray(r.parts)||r.parts.length===0)return null;const c=iS(r,s,l);if(c.length===0)return null;const u=(r.display||"").trim(),f=u&&c.find(x=>x.name===u)||c.find(x=>x.display)||c[0];if(!f||f.type!=="damage")return null;const g=f.averageTotal??0,p=Wf.indexOf(l.atkSpd||"NORMAL"),y=Math.max(0,Math.min(Wf.length-1,(p>=0?p:3)+Math.round(s.getNum("atkTier")))),v=g*Xf[y];return{perAttackAverage:g,dps:v,attackSpeedTier:$k[y]}}function ez(e,n){if(typeof n.cost!="number"||n.base_spell<1||n.base_spell>4)return null;const s=n.base_spell;let l=n.cost*(1-Rc(e.getNum("int"))*Uk[2]);return l+=e.getNum(`spRaw${s}`),l=l*(1+e.getNum(`spPct${s}`)/100),l=Math.max(1,l*(1+e.getNum(`spPct${s}Final`)/100)),l}function tz(e){const{catalog:n,snapshot:s,abilityTreeTree:l,abilityTreeEvaluation:r}=e;if(!l||!r)return null;const c=s.slots.weapon;if(c==null)return null;const u=n.itemsById.get(c);if(!u)return null;const f=Yk(u);if(!f)return null;const g={...s.slots},p=wh(g,n,s.level),y=Xk(s,n,p.assignedByStat),v=[];p.feasible||v.push("Spell preview uses current build state, but skill-point feasibility is invalid.");const x=Vk(l,r);Wk(x,y,v);const S=Kk(x,[Gk(f.type)]),T=Jk({spells:S,stats:y,weapon:f});if(S.size===0)return{melee:T,spells:[],notes:v};const w=[];for(const D of[...S.values()].sort((C,B)=>C.base_spell-B.base_spell)){if(!Array.isArray(D.parts)||D.parts.length===0)continue;const C=iS(D,y,f);if(C.length===0)continue;const B=(D.display||"").trim(),z=B&&C.find(I=>I.name===B)||C.find(I=>I.display)||C[0];if(!z)continue;const P=z.type==="heal";w.push({baseSpell:D.base_spell,name:D.name,displayPartName:z.name,averageDisplayValue:z.averageTotal??0,isHealing:P,manaCost:ez(y,D),parts:C})}return r.activeIds.length>0&&w.length===0&&v.push("No spell damage entries found in the selected ability tree nodes."),{melee:T,spells:w,notes:v}}function gy(e){return navigator.clipboard?.writeText?navigator.clipboard.writeText(e):(window.prompt("Copy text:",e),Promise.resolve())}function py(e){return typeof e!="string"?null:e.startsWith("slot:")?{kind:"slot",slot:e.slice(5)}:e.startsWith("bin:")?{kind:"bin",category:e.slice(4)}:null}function nz(e,n,s){const l=n.itemsById.get(e);if(!l)return null;const r=l.category;if(s.selectedSlot&&ha(s.selectedSlot)===r)return s.selectedSlot;const c=nt.filter(f=>ha(f)===r);return c.find(f=>s.slots[f]==null)??c[0]??null}function az(e){return{slots:{...e.slots},craftedSlots:{...e.craftedSlots},binsByCategory:{helmet:[...e.binsByCategory.helmet],chestplate:[...e.binsByCategory.chestplate],leggings:[...e.binsByCategory.leggings],boots:[...e.binsByCategory.boots],ring:[...e.binsByCategory.ring],bracelet:[...e.binsByCategory.bracelet],necklace:[...e.binsByCategory.necklace],weapon:[...e.binsByCategory.weapon]},locks:{...e.locks},level:e.level,characterClass:e.characterClass,selectedSlot:e.selectedSlot,comparePreview:{...e.comparePreview},legacyHash:e.legacyHash}}function sz(){const e=_.useRef(null);!e.current&&typeof window<"u"&&(e.current=rA(window.location));const n=e.current,[s,l]=_.useState(null),[r,c]=_.useState(null),[u,f]=_.useState(n?.search??za),[g,p]=_.useState(null),[y,v]=_.useState(!1),[x,S]=_.useState(!1),[T,w]=_.useState(n?.mode==="autobuilder"),[D,C]=_.useState(n?.mode==="abilitytree"),[B,z]=_.useState(!1),[P,I]=_.useState(null),[j,N]=_.useState(!1),[L,se]=_.useState(null),[ce,ee]=_.useState(n?.abilityTree?.selectedByClass??{}),[fe,A]=_.useState(n?.abilityTree?.version??null),[ie,oe]=_.useState(""),[k,Y]=_.useState(0),ae=_.useRef(null),H=_.useRef(null),le=_.useRef(null),M=Oo(V=>V.hydrateSnapshot),U=Oo(V=>V.setLegacyHash),K=Oo(tE(V=>({slots:V.slots,craftedSlots:V.craftedSlots,binsByCategory:V.binsByCategory,locks:V.locks,level:V.level,characterClass:V.characterClass,selectedSlot:V.selectedSlot,comparePreview:V.comparePreview,legacyHash:V.legacyHash,undoStack:V.undoStack,redoStack:V.redoStack,setLevel:V.setLevel,setCharacterClass:V.setCharacterClass,setSelectedSlot:V.setSelectedSlot,setComparePreview:V.setComparePreview,pinItem:V.pinItem,removePinnedItem:V.removePinnedItem,clearCategory:V.clearCategory,clearAll:V.clearAll,equipItem:V.equipItem,equipCraftedItem:V.equipCraftedItem,clearCraftedSlot:V.clearCraftedSlot,moveSlotToBin:V.moveSlotToBin,swapSlots:V.swapSlots,assignDraggedItemToSlot:V.assignDraggedItemToSlot,assignDraggedItemToBin:V.assignDraggedItemToBin,toggleLock:V.toggleLock,undo:V.undo,redo:V.redo,hydrateSnapshot:V.hydrateSnapshot,loadCandidate:V.loadCandidate,setLegacyHash:V.setLegacyHash}))),W=_.useMemo(()=>az(K),[K]);_.useEffect(()=>{n?.workbenchPatch&&M(n.workbenchPatch)},[n?.workbenchPatch,M]),_.useEffect(()=>{let V=!1;return(async()=>{try{const ue=await KE.getCatalog();if(V)return;S(!1);const Ve=new eD;if(await Ve.init(ue.items),V){Ve.dispose();return}if(ae.current=Ve,l(ue),S(!0),n?.legacyHash){oe("Importing legacy builder hash...");try{const xe=await hf.decodeLegacyHash(n.legacyHash),qe={};for(const[ln,Lt]of Object.entries(xe.slots)){if(!Lt)continue;const la=ue.itemIdByName.get(Lt.toLowerCase());typeof la=="number"&&(qe[ln]=la)}const It=Oo.getState().level;M({...n.workbenchPatch,slots:{...n.workbenchPatch?.slots??{},...qe},level:xe.level??n.workbenchPatch?.level??It,legacyHash:xe.legacyHash}),U(xe.legacyHash),oe("Imported legacy builder hash into Workbench.")}catch(xe){console.error(xe),oe("Failed to import legacy hash automatically. You can still open it in legacy builder.")}}}catch(ue){console.error(ue),c(ue instanceof Error?ue.message:"Failed to load item catalog")}})(),()=>{V=!0,ae.current?.dispose(),H.current&&window.clearTimeout(H.current),le.current&&window.clearTimeout(le.current)}},[n,M,U]),_.useEffect(()=>{if(!(!s||!x||!ae.current)){if(!CM(u)&&k===0){p(null),v(!1);return}return H.current&&window.clearTimeout(H.current),v(!0),H.current=window.setTimeout(async()=>{try{const V=await ae.current.search(u);p(V)}catch(V){console.error(V),c(V instanceof Error?V.message:"Search failed")}finally{v(!1)}},180),()=>{H.current&&window.clearTimeout(H.current)}}},[s,x,u,k]),_.useEffect(()=>{if(!D||!s||j||P||L)return;let V=!1;return N(!0),se(null),(async()=>{try{const ue=await Bk.getDataset(fe||s.version);if(V)return;I(ue),A(ue.version)}catch(ue){if(V)return;console.error(ue),se(ue instanceof Error?ue.message:"Failed to load ability tree data")}finally{V||N(!1)}})(),()=>{V=!0}},[D,P,s,fe,L]),_.useEffect(()=>{if(!(typeof window>"u"))return le.current&&window.clearTimeout(le.current),le.current=window.setTimeout(()=>{try{ny({search:u,workbenchSnapshot:W,mode:T?"autobuilder":D?"abilitytree":null,abilityTreeState:{version:fe,selectedByClass:ce},replace:!0})}catch(V){console.error(V)}},250),()=>{le.current&&window.clearTimeout(le.current)}},[u,W,T,D,ce,fe]);const he=_.useMemo(()=>s?ic({slots:W.slots,level:W.level,characterClass:W.characterClass},s):null,[s,W]),ge=_.useMemo(()=>{if(!s)return null;const V=W.slots.weapon;if(V==null)return null;const ue=s.itemsById.get(V);return ue?ue.classReq??Qo(ue.type):null},[s,W.slots.weapon]),_e=W.characterClass??ge,Me=_.useMemo(()=>Gx(P,_e),[P,_e]),ve=_.useMemo(()=>{if(!Me||!_e)return null;const V=ce[_e]??[];return Dc(Me,V,W.level)},[ce,Me,_e,W.level]),Ze=_.useMemo(()=>{if(!s||!he)return null;const V=W.comparePreview;if(!V.itemId||!V.slot)return null;const ue={...W.slots,[V.slot]:V.itemId};return ic({slots:ue,level:W.level,characterClass:W.characterClass},s)},[s,he,W]),Yt=_.useMemo(()=>s?tz({catalog:s,snapshot:W,abilityTreeTree:Me,abilityTreeEvaluation:ve}):null,[s,W,Me,ve]),Mt=Hw(Dv(ih,{activationConstraint:{distance:6}}),Dv(sh,{coordinateGetter:X_})),En=V=>{const ue=V.active.data.current?.dragItem;if(!ue)return;const Ve=ue.kind==="slot"?ue.sourceSlot??null:W.selectedSlot??null;K.setComparePreview({itemId:ue.itemId,slot:Ve})},bt=V=>{const ue=V.active.data.current?.dragItem,Ve=py(V.over?.id);!ue||!Ve||Ve.kind==="slot"&&K.setComparePreview({itemId:ue.itemId,slot:Ve.slot})},Jt=V=>{const ue=V.active.data.current?.dragItem,Ve=py(V.over?.id);if(K.setComparePreview(null),!s||!ue||!Ve)return;const xe=s.itemsById.get(ue.itemId);if(xe){if(Ve.kind==="slot"){if(ha(Ve.slot)!==xe.category)return;K.assignDraggedItemToSlot({targetSlot:Ve.slot,source:ue.kind,itemId:ue.itemId,sourceCategory:ue.sourceCategory,sourceSlot:ue.sourceSlot});return}if(Ve.kind==="bin"){if(Ve.category!==xe.category)return;K.assignDraggedItemToBin({targetCategory:Ve.category,source:ue.kind,itemId:ue.itemId,sourceCategory:ue.sourceCategory,sourceSlot:ue.sourceSlot})}}},Ge=V=>{if(!s)return;const ue=nz(V,s,W);ue&&(K.equipItem(ue,V),K.setSelectedSlot(ue),oe(`Equipped item into ${ue}.`))},en=V=>{if(!s)return;const ue=s.itemsById.get(V);ue&&K.pinItem(ue.category,ue.id)},tn=()=>{const V=kx(W),ue=JSON.stringify(W,null,2);window.prompt("Copy Workbench export (JSON). URL-safe code is also in the current ?wb= param.",ue),oe(`Workbench export ready. Code length: ${V.length}`)},sn=async()=>{const V=window.prompt("Paste a Workbench JSON export, Workbench URL, or legacy builder URL/hash.");if(!V)return;const ue=V.trim();try{if(hf.isSupported(ue)&&s){const xe=await hf.decodeLegacyHash(ue),qe={};for(const[It,ln]of Object.entries(xe.slots)){const Lt=s.itemIdByName.get((ln??"").toLowerCase());Lt!=null&&(qe[It]=Lt)}K.hydrateSnapshot({slots:{...W.slots,...qe},level:xe.level??W.level,legacyHash:xe.legacyHash}),K.setLegacyHash(xe.legacyHash),oe("Imported legacy build hash.");return}if(ue.startsWith("http://")||ue.startsWith("https://")){const xe=new URL(ue),qe=Rx(xe),It=Cx(xe),ln=Ax(xe);f(qe),It&&K.hydrateSnapshot(It),ln&&(ee(ln.selectedByClass??{}),A(ln.version??null)),oe("Imported Workbench URL state.");return}const Ve=JSON.parse(ue);K.hydrateSnapshot(Ve),oe("Imported Workbench JSON.")}catch(Ve){console.error(Ve),oe("Import failed. Check the pasted JSON/URL/hash.")}},re=async()=>{ny({workbenchSnapshot:W,mode:T?"autobuilder":D?"abilitytree":null,abilityTreeState:{version:fe,selectedByClass:ce},replace:!0}),await gy(window.location.href),oe("Workbench link copied.")},ze=async()=>{if(!W.legacyHash){oe("No imported legacy hash is currently available.");return}const V=new URL(Z0(W.legacyHash),window.location.href).href;await gy(V),oe("Legacy builder link copied.")},Qe=()=>{window.open(Z0(W.legacyHash),"_blank","noopener,noreferrer")},at=()=>{se(null),w(!1),C(!0)};return r?m.jsx("div",{className:"flex min-h-full items-center justify-center p-6",children:m.jsxs("div",{className:"wb-panel max-w-xl rounded-2xl p-6",children:[m.jsx("div",{className:"text-xl font-semibold",children:"Failed to load"}),m.jsx("div",{className:"mt-2 text-sm text-[var(--wb-muted)]",children:r})]})}):!s||!he?m.jsx("div",{className:"flex min-h-full items-center justify-center p-6",children:m.jsxs("div",{className:"wb-panel max-w-xl rounded-2xl p-6",children:[m.jsx("div",{className:"text-xl font-semibold",children:"Loading..."}),m.jsx("div",{className:"mt-2 text-sm text-[var(--wb-muted)]",children:"Preparing item catalog, search index, and build state."})]})}):m.jsxs(F_,{sensors:Mt,collisionDetection:Zw,onDragStart:En,onDragOver:bt,onDragEnd:Jt,children:[m.jsxs("div",{className:"flex min-h-full flex-col gap-3 p-3 lg:p-4",children:[m.jsxs("header",{className:"wb-panel wb-hero rounded-2xl px-4 py-3",children:[m.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[m.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:"wb-chip border-cyan-300/30 bg-cyan-300/8 text-cyan-100",children:"Standalone Alpha"}),m.jsx("span",{className:"wb-chip",children:"Legacy-compatible imports"}),ve?m.jsxs("span",{className:"wb-chip border-emerald-300/30 bg-emerald-300/8 text-emerald-100",children:["Ability Tree ",ve.apUsed,"/",ve.apCap," AP"]}):null]}),m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Modular loadout planning studio with legacy builder compatibility."})]}),m.jsxs("button",{type:"button",className:"build-solver-logo-btn order-first flex shrink-0 cursor-pointer items-center justify-center gap-2 self-center rounded-xl px-6 py-3 text-lg font-bold tracking-tight text-cyan-50 shadow-lg sm:px-8 sm:py-4 sm:text-xl lg:order-none",onClick:()=>{C(!1),z(!1),w(!0)},title:"Open Build Solver  beam search over item combinations",children:[m.jsx(pE,{size:28,className:"text-amber-200/90",strokeWidth:2.5}),"Build Solver"]}),m.jsxs("div",{className:"flex min-w-0 flex-1 flex-wrap items-center justify-end gap-2",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:"text-xs text-[var(--wb-muted)]",children:"Class"}),m.jsxs("select",{className:"wb-select w-36",value:W.characterClass??"",onChange:V=>K.setCharacterClass(V.target.value||null),children:[m.jsx("option",{value:"",children:"Auto / Any"}),m.jsx("option",{value:"Warrior",children:"Warrior"}),m.jsx("option",{value:"Assassin",children:"Assassin"}),m.jsx("option",{value:"Mage",children:"Mage"}),m.jsx("option",{value:"Archer",children:"Archer"}),m.jsx("option",{value:"Shaman",children:"Shaman"})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:"text-xs text-[var(--wb-muted)]",children:"Level"}),m.jsx("input",{className:"wb-input w-22",type:"number",min:1,max:106,value:W.level,onChange:V=>K.setLevel(Number(V.target.value))})]}),m.jsxs(Te,{variant:"ghost",onClick:re,children:[m.jsx(rh,{size:13,className:"mr-1 inline"}),"Share Session"]}),m.jsxs(Te,{variant:"ghost",onClick:at,children:[m.jsx($y,{size:13,className:"mr-1 inline"}),"Ability Tree"]}),m.jsx(Te,{className:"rounded-lg border border-violet-400/40 bg-violet-400/15 px-4 py-2 text-sm font-semibold text-violet-100 hover:bg-violet-400/25",onClick:()=>{w(!1),C(!1),z(!0)},children:"Recipe Solver"})]})]}),ie?m.jsx("div",{className:"mt-2 text-xs text-emerald-200",children:ie}):null]}),m.jsxs("main",{className:"grid min-h-0 flex-1 grid-cols-1 gap-3 xl:grid-cols-[minmax(300px,22vw)_minmax(0,1fr)_440px] 2xl:grid-cols-[320px_minmax(0,1fr)_480px]",children:[m.jsx(dC,{catalog:s,state:u,setState:f,result:g,loading:y,selectedSlot:W.selectedSlot,onPin:en,onEquip:Ge,onHover:()=>{},onSearch:()=>Y(V=>V+1)}),m.jsx(AC,{catalog:s,store:K,onHoverItem:(V,ue)=>K.setComparePreview(V&&ue?{itemId:V,slot:ue}:null),onShareWorkbench:()=>{re()},onExportWorkbench:tn,onImportWorkbench:()=>{sn()},searchResults:u.resultsBelowBuild?m.jsx(yx,{catalog:s,result:g,selectedSlot:W.selectedSlot,state:u,loading:y,onPin:en,onEquip:Ge,onHover:()=>{},embedded:!0}):void 0}),m.jsx(RC,{catalog:s,snapshot:W,summary:he,compareSummary:Ze,compareSlot:W.comparePreview.slot,spellPreview:Yt,abilityTreeSummary:ve&&_e?{className:_e,apUsed:ve.apUsed,apCap:ve.apCap,selectedCount:ve.activeIds.length,hasErrors:ve.errors.length>0||ve.apUsed>ve.apCap}:null,actions:{onOpenAbilityTree:at,onCopyLegacyLink:()=>{ze()},onOpenLegacyBuilder:Qe}})]})]}),m.jsx(LA,{open:T,onOpenChange:w,catalog:s,snapshot:W,onLoadCandidate:V=>{K.loadCandidate(V.slots),w(!1),oe("Loaded Build Solver candidate into Workbench.")}}),m.jsx(WA,{open:D,onOpenChange:V=>{V&&se(null),C(V)},dataset:P,loading:j,error:L,level:W.level,selectedClass:W.characterClass,inferredClass:ge,selectionsByClass:ce,onSelectionsChange:ee}),m.jsx(Ck,{open:B,onOpenChange:z,onEquipCraft:(V,ue)=>{K.equipCraftedItem(V,ue),z(!1),oe(`Crafted ${ue.type} equipped to ${V}.`)}})]})}class lz extends _.Component{state={hasError:!1,error:void 0};static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,s){console.error("App failed to render:",n,s)}render(){return this.state.hasError?m.jsx("div",{className:"flex min-h-screen items-center justify-center p-6",style:{background:"#070c14",color:"#e5f4ff"},children:m.jsxs("div",{className:"max-w-xl rounded-2xl p-6",style:{background:"#0f1725",border:"1px solid #2d3f58"},children:[m.jsx("div",{className:"text-xl font-semibold",children:"Something went wrong"}),m.jsxs("div",{className:"mt-2 text-sm",style:{color:"#93aac3"},children:[this.state.error?.message??"Failed to load the app."," Try refreshing the page."]})]})}):this.props.children}}jw.createRoot(document.getElementById("root")).render(m.jsx(_.StrictMode,{children:m.jsx(lz,{children:m.jsx(sz,{})})}));
