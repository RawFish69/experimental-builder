function Gw(e,n){for(var s=0;s<n.length;s++){const i=n[s];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const c=Object.getOwnPropertyDescriptor(i,r);c&&Object.defineProperty(e,r,c.get?c:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}})();function mh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tf={exports:{}},Yl={};var Bv;function Yw(){if(Bv)return Yl;Bv=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(i,r,c){var u=null;if(c!==void 0&&(u=""+c),r.key!==void 0&&(u=""+r.key),"key"in r){c={};for(var d in r)d!=="key"&&(c[d]=r[d])}else c=r;return r=c.ref,{$$typeof:e,type:i,key:u,ref:r!==void 0?r:null,props:c}}return Yl.Fragment=n,Yl.jsx=s,Yl.jsxs=s,Yl}var Lv;function Vw(){return Lv||(Lv=1,tf.exports=Yw()),tf.exports}var h=Vw(),nf={exports:{}},je={};var qv;function Kw(){if(qv)return je;qv=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),b=Symbol.iterator;function S(N){return N===null||typeof N!="object"?null:(N=b&&N[b]||N["@@iterator"],typeof N=="function"?N:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,C={};function k(N,I,J){this.props=N,this.context=I,this.refs=C,this.updater=J||_}k.prototype.isReactComponent={},k.prototype.setState=function(N,I){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,I,"setState")},k.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function R(){}R.prototype=k.prototype;function z(N,I,J){this.props=N,this.context=I,this.refs=C,this.updater=J||_}var B=z.prototype=new R;B.constructor=z,E(B,k.prototype),B.isPureReactComponent=!0;var q=Array.isArray;function M(){}var j={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function Z(N,I,J){var oe=J.ref;return{$$typeof:e,type:N,key:I,ref:oe!==void 0?oe:null,props:J}}function le(N,I){return Z(N.type,I,N.props)}function de(N){return typeof N=="object"&&N!==null&&N.$$typeof===e}function ne(N){var I={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(J){return I[J]})}var ce=/\/+/g;function $(N,I){return typeof N=="object"&&N!==null&&N.key!=null?ne(""+N.key):I.toString(36)}function X(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(M,M):(N.status="pending",N.then(function(I){N.status==="pending"&&(N.status="fulfilled",N.value=I)},function(I){N.status==="pending"&&(N.status="rejected",N.reason=I)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function L(N,I,J,oe,ue){var re=typeof N;(re==="undefined"||re==="boolean")&&(N=null);var ye=!1;if(N===null)ye=!0;else switch(re){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(N.$$typeof){case e:case n:ye=!0;break;case v:return ye=N._init,L(ye(N._payload),I,J,oe,ue)}}if(ye)return ue=ue(N),ye=oe===""?"."+$(N,0):oe,q(ue)?(J="",ye!=null&&(J=ye.replace(ce,"$&/")+"/"),L(ue,I,J,"",function(Ee){return Ee})):ue!=null&&(de(ue)&&(ue=le(ue,J+(ue.key==null||N&&N.key===ue.key?"":(""+ue.key).replace(ce,"$&/")+"/")+ye)),I.push(ue)),1;ye=0;var xe=oe===""?".":oe+":";if(q(N))for(var ge=0;ge<N.length;ge++)oe=N[ge],re=xe+$(oe,ge),ye+=L(oe,I,J,re,ue);else if(ge=S(N),typeof ge=="function")for(N=ge.call(N),ge=0;!(oe=N.next()).done;)oe=oe.value,re=xe+$(oe,ge++),ye+=L(oe,I,J,re,ue);else if(re==="object"){if(typeof N.then=="function")return L(X(N),I,J,oe,ue);throw I=String(N),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.")}return ye}function Y(N,I,J){if(N==null)return N;var oe=[],ue=0;return L(N,oe,"","",function(re){return I.call(J,re,ue++)}),oe}function te(N){if(N._status===-1){var I=N._result;I=I(),I.then(function(J){(N._status===0||N._status===-1)&&(N._status=1,N._result=J)},function(J){(N._status===0||N._status===-1)&&(N._status=2,N._result=J)}),N._status===-1&&(N._status=0,N._result=I)}if(N._status===1)return N._result.default;throw N._result}var A=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var I=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(I))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},V={map:Y,forEach:function(N,I,J){Y(N,function(){I.apply(this,arguments)},J)},count:function(N){var I=0;return Y(N,function(){I++}),I},toArray:function(N){return Y(N,function(I){return I})||[]},only:function(N){if(!de(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return je.Activity=y,je.Children=V,je.Component=k,je.Fragment=s,je.Profiler=r,je.PureComponent=z,je.StrictMode=i,je.Suspense=m,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,je.__COMPILER_RUNTIME={__proto__:null,c:function(N){return j.H.useMemoCache(N)}},je.cache=function(N){return function(){return N.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(N,I,J){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var oe=E({},N.props),ue=N.key;if(I!=null)for(re in I.key!==void 0&&(ue=""+I.key),I)!D.call(I,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&I.ref===void 0||(oe[re]=I[re]);var re=arguments.length-2;if(re===1)oe.children=J;else if(1<re){for(var ye=Array(re),xe=0;xe<re;xe++)ye[xe]=arguments[xe+2];oe.children=ye}return Z(N.type,ue,oe)},je.createContext=function(N){return N={$$typeof:u,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:c,_context:N},N},je.createElement=function(N,I,J){var oe,ue={},re=null;if(I!=null)for(oe in I.key!==void 0&&(re=""+I.key),I)D.call(I,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(ue[oe]=I[oe]);var ye=arguments.length-2;if(ye===1)ue.children=J;else if(1<ye){for(var xe=Array(ye),ge=0;ge<ye;ge++)xe[ge]=arguments[ge+2];ue.children=xe}if(N&&N.defaultProps)for(oe in ye=N.defaultProps,ye)ue[oe]===void 0&&(ue[oe]=ye[oe]);return Z(N,re,ue)},je.createRef=function(){return{current:null}},je.forwardRef=function(N){return{$$typeof:d,render:N}},je.isValidElement=de,je.lazy=function(N){return{$$typeof:v,_payload:{_status:-1,_result:N},_init:te}},je.memo=function(N,I){return{$$typeof:p,type:N,compare:I===void 0?null:I}},je.startTransition=function(N){var I=j.T,J={};j.T=J;try{var oe=N(),ue=j.S;ue!==null&&ue(J,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(M,A)}catch(re){A(re)}finally{I!==null&&J.types!==null&&(I.types=J.types),j.T=I}},je.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},je.use=function(N){return j.H.use(N)},je.useActionState=function(N,I,J){return j.H.useActionState(N,I,J)},je.useCallback=function(N,I){return j.H.useCallback(N,I)},je.useContext=function(N){return j.H.useContext(N)},je.useDebugValue=function(){},je.useDeferredValue=function(N,I){return j.H.useDeferredValue(N,I)},je.useEffect=function(N,I){return j.H.useEffect(N,I)},je.useEffectEvent=function(N){return j.H.useEffectEvent(N)},je.useId=function(){return j.H.useId()},je.useImperativeHandle=function(N,I,J){return j.H.useImperativeHandle(N,I,J)},je.useInsertionEffect=function(N,I){return j.H.useInsertionEffect(N,I)},je.useLayoutEffect=function(N,I){return j.H.useLayoutEffect(N,I)},je.useMemo=function(N,I){return j.H.useMemo(N,I)},je.useOptimistic=function(N,I){return j.H.useOptimistic(N,I)},je.useReducer=function(N,I,J){return j.H.useReducer(N,I,J)},je.useRef=function(N){return j.H.useRef(N)},je.useState=function(N){return j.H.useState(N)},je.useSyncExternalStore=function(N,I,J){return j.H.useSyncExternalStore(N,I,J)},je.useTransition=function(){return j.H.useTransition()},je.version="19.2.4",je}var Uv;function gh(){return Uv||(Uv=1,nf.exports=Kw()),nf.exports}var w=gh();const en=mh(w),q0=Gw({__proto__:null,default:en},[w]);var af={exports:{}},Vl={},sf={exports:{}},lf={};var $v;function Ww(){return $v||($v=1,(function(e){function n(L,Y){var te=L.length;L.push(Y);e:for(;0<te;){var A=te-1>>>1,V=L[A];if(0<r(V,Y))L[A]=Y,L[te]=V,te=A;else break e}}function s(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var Y=L[0],te=L.pop();if(te!==Y){L[0]=te;e:for(var A=0,V=L.length,N=V>>>1;A<N;){var I=2*(A+1)-1,J=L[I],oe=I+1,ue=L[oe];if(0>r(J,te))oe<V&&0>r(ue,J)?(L[A]=ue,L[oe]=te,A=oe):(L[A]=J,L[I]=te,A=I);else if(oe<V&&0>r(ue,te))L[A]=ue,L[oe]=te,A=oe;else break e}}return Y}function r(L,Y){var te=L.sortIndex-Y.sortIndex;return te!==0?te:L.id-Y.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var m=[],p=[],v=1,y=null,b=3,S=!1,_=!1,E=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function B(L){for(var Y=s(p);Y!==null;){if(Y.callback===null)i(p);else if(Y.startTime<=L)i(p),Y.sortIndex=Y.expirationTime,n(m,Y);else break;Y=s(p)}}function q(L){if(E=!1,B(L),!_)if(s(m)!==null)_=!0,M||(M=!0,ne());else{var Y=s(p);Y!==null&&X(q,Y.startTime-L)}}var M=!1,j=-1,D=5,Z=-1;function le(){return C?!0:!(e.unstable_now()-Z<D)}function de(){if(C=!1,M){var L=e.unstable_now();Z=L;var Y=!0;try{e:{_=!1,E&&(E=!1,R(j),j=-1),S=!0;var te=b;try{t:{for(B(L),y=s(m);y!==null&&!(y.expirationTime>L&&le());){var A=y.callback;if(typeof A=="function"){y.callback=null,b=y.priorityLevel;var V=A(y.expirationTime<=L);if(L=e.unstable_now(),typeof V=="function"){y.callback=V,B(L),Y=!0;break t}y===s(m)&&i(m),B(L)}else i(m);y=s(m)}if(y!==null)Y=!0;else{var N=s(p);N!==null&&X(q,N.startTime-L),Y=!1}}break e}finally{y=null,b=te,S=!1}Y=void 0}}finally{Y?ne():M=!1}}}var ne;if(typeof z=="function")ne=function(){z(de)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,$=ce.port2;ce.port1.onmessage=de,ne=function(){$.postMessage(null)}}else ne=function(){k(de,0)};function X(L,Y){j=k(function(){L(e.unstable_now())},Y)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(L){switch(b){case 1:case 2:case 3:var Y=3;break;default:Y=b}var te=b;b=Y;try{return L()}finally{b=te}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(L,Y){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var te=b;b=L;try{return Y()}finally{b=te}},e.unstable_scheduleCallback=function(L,Y,te){var A=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?A+te:A):te=A,L){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=te+V,L={id:v++,callback:Y,priorityLevel:L,startTime:te,expirationTime:V,sortIndex:-1},te>A?(L.sortIndex=te,n(p,L),s(m)===null&&L===s(p)&&(E?(R(j),j=-1):E=!0,X(q,te-A))):(L.sortIndex=V,n(m,L),_||S||(_=!0,M||(M=!0,ne()))),L},e.unstable_shouldYield=le,e.unstable_wrapCallback=function(L){var Y=b;return function(){var te=b;b=Y;try{return L.apply(this,arguments)}finally{b=te}}}})(lf)),lf}var Hv;function Xw(){return Hv||(Hv=1,sf.exports=Ww()),sf.exports}var rf={exports:{}},dn={};var Zv;function Qw(){if(Zv)return dn;Zv=1;var e=gh();function n(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},r=Symbol.for("react.portal");function c(m,p,v){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:y==null?null:""+y,children:m,containerInfo:p,implementation:v}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,dn.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(n(299));return c(m,p,null,v)},dn.flushSync=function(m){var p=u.T,v=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=p,i.p=v,i.d.f()}},dn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},dn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},dn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,y=d(v,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:b,fetchPriority:S}):v==="script"&&i.d.X(m,{crossOrigin:y,integrity:b,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},dn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},dn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,y=d(v,p.crossOrigin);i.d.L(m,v,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},dn.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=d(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},dn.requestFormReset=function(m){i.d.r(m)},dn.unstable_batchedUpdates=function(m,p){return m(p)},dn.useFormState=function(m,p,v){return u.H.useFormState(m,p,v)},dn.useFormStatus=function(){return u.H.useHostTransitionStatus()},dn.version="19.2.4",dn}var Fv;function U0(){if(Fv)return rf.exports;Fv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),rf.exports=Qw(),rf.exports}var Gv;function Jw(){if(Gv)return Vl;Gv=1;var e=Xw(),n=gh(),s=U0();function i(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var a=t,l=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(l=a.return),t=a.return;while(t)}return a.tag===3?l:null}function u(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function d(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function m(t){if(c(t)!==t)throw Error(i(188))}function p(t){var a=t.alternate;if(!a){if(a=c(t),a===null)throw Error(i(188));return a!==t?null:t}for(var l=t,o=a;;){var f=l.return;if(f===null)break;var g=f.alternate;if(g===null){if(o=f.return,o!==null){l=o;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===l)return m(f),t;if(g===o)return m(f),a;g=g.sibling}throw Error(i(188))}if(l.return!==o.return)l=f,o=g;else{for(var x=!1,T=f.child;T;){if(T===l){x=!0,l=f,o=g;break}if(T===o){x=!0,o=f,l=g;break}T=T.sibling}if(!x){for(T=g.child;T;){if(T===l){x=!0,l=g,o=f;break}if(T===o){x=!0,o=g,l=f;break}T=T.sibling}if(!x)throw Error(i(189))}}if(l.alternate!==o)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?t:a}function v(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=v(t),a!==null)return a;t=t.sibling}return null}var y=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),z=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),de=Symbol.iterator;function ne(t){return t===null||typeof t!="object"?null:(t=de&&t[de]||t["@@iterator"],typeof t=="function"?t:null)}var ce=Symbol.for("react.client.reference");function $(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ce?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case E:return"Fragment";case k:return"Profiler";case C:return"StrictMode";case q:return"Suspense";case M:return"SuspenseList";case Z:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case _:return"Portal";case z:return t.displayName||"Context";case R:return(t._context.displayName||"Context")+".Consumer";case B:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j:return a=t.displayName||null,a!==null?a:$(t.type)||"Memo";case D:a=t._payload,t=t._init;try{return $(t(a))}catch{}}return null}var X=Array.isArray,L=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},A=[],V=-1;function N(t){return{current:t}}function I(t){0>V||(t.current=A[V],A[V]=null,V--)}function J(t,a){V++,A[V]=t.current,t.current=a}var oe=N(null),ue=N(null),re=N(null),ye=N(null);function xe(t,a){switch(J(re,a),J(ue,t),J(oe,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?rv(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=rv(a),t=ov(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}I(oe),J(oe,t)}function ge(){I(oe),I(ue),I(re)}function Ee(t){t.memoizedState!==null&&J(ye,t);var a=oe.current,l=ov(a,t.type);a!==l&&(J(ue,t),J(oe,l))}function Be(t){ue.current===t&&(I(oe),I(ue)),ye.current===t&&(I(ye),Hl._currentValue=te)}var lt,At;function dt(t){if(lt===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);lt=a&&a[1]||"",At=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+lt+t+At}var Kt=!1;function gt(t,a){if(!t||Kt)return"";Kt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(a){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(W){var G=W}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(W){G=W}t.call(ie.prototype)}}else{try{throw Error()}catch(W){G=W}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(W){if(W&&G&&typeof W.stack=="string")return[W.stack,G.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=o.DetermineComponentFrameRoot(),x=g[0],T=g[1];if(x&&T){var O=x.split(`
`),F=T.split(`
`);for(f=o=0;o<O.length&&!O[o].includes("DetermineComponentFrameRoot");)o++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(o===O.length||f===F.length)for(o=O.length-1,f=F.length-1;1<=o&&0<=f&&O[o]!==F[f];)f--;for(;1<=o&&0<=f;o--,f--)if(O[o]!==F[f]){if(o!==1||f!==1)do if(o--,f--,0>f||O[o]!==F[f]){var Q=`
`+O[o].replace(" at new "," at ");return t.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",t.displayName)),Q}while(1<=o&&0<=f);break}}}finally{Kt=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?dt(l):""}function tn(t,a){switch(t.tag){case 26:case 27:case 5:return dt(t.type);case 16:return dt("Lazy");case 13:return t.child!==a&&a!==null?dt("Suspense Fallback"):dt("Suspense");case 19:return dt("SuspenseList");case 0:case 15:return gt(t.type,!1);case 11:return gt(t.type.render,!1);case 1:return gt(t.type,!0);case 31:return dt("Activity");default:return""}}function nn(t){try{var a="",l=null;do a+=tn(t,l),l=t,t=t.return;while(t);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Gt=Object.prototype.hasOwnProperty,fe=e.unstable_scheduleCallback,Oe=e.unstable_cancelCallback,De=e.unstable_shouldYield,Je=e.unstable_requestPaint,Pe=e.unstable_now,Wt=e.unstable_getCurrentPriorityLevel,un=e.unstable_ImmediatePriority,Pt=e.unstable_UserBlockingPriority,K=e.unstable_NormalPriority,he=e.unstable_LowPriority,et=e.unstable_IdlePriority,Ge=e.log,fn=e.unstable_setDisableYieldValue,an=null,ft=null;function It(t){if(typeof Ge=="function"&&fn(t),ft&&typeof ft.setStrictMode=="function")try{ft.setStrictMode(an,t)}catch{}}var Nt=Math.clz32?Math.clz32:al,nl=Math.log,Vs=Math.LN2;function al(t){return t>>>=0,t===0?32:31-(nl(t)/Vs|0)|0}var qa=256,fa=262144,wt=4194304;function ze(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Bt(t,a,l){var o=t.pendingLanes;if(o===0)return 0;var f=0,g=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var T=o&134217727;return T!==0?(o=T&~g,o!==0?f=ze(o):(x&=T,x!==0?f=ze(x):l||(l=T&~t,l!==0&&(f=ze(l))))):(T=o&~g,T!==0?f=ze(T):x!==0?f=ze(x):l||(l=o&~t,l!==0&&(f=ze(l)))),f===0?0:a!==0&&a!==f&&(a&g)===0&&(g=f&-f,l=a&-a,g>=l||g===32&&(l&4194048)!==0)?a:f}function se(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function me(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function be(){var t=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),t}function Me(t){for(var a=[],l=0;31>l;l++)a.push(t);return a}function Ye(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function rt(t,a,l,o,f,g){var x=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var T=t.entanglements,O=t.expirationTimes,F=t.hiddenUpdates;for(l=x&~l;0<l;){var Q=31-Nt(l),ie=1<<Q;T[Q]=0,O[Q]=-1;var G=F[Q];if(G!==null)for(F[Q]=null,Q=0;Q<G.length;Q++){var W=G[Q];W!==null&&(W.lane&=-536870913)}l&=~ie}o!==0&&Ue(t,o,0),g!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=g&~(x&~a))}function Ue(t,a,l){t.pendingLanes|=a,t.suspendedLanes&=~a;var o=31-Nt(a);t.entangledLanes|=a,t.entanglements[o]=t.entanglements[o]|1073741824|l&261930}function Ve(t,a){var l=t.entangledLanes|=a;for(t=t.entanglements;l;){var o=31-Nt(l),f=1<<o;f&a|t[o]&a&&(t[o]|=a),l&=~f}}function vt(t,a){var l=a&-a;return l=(l&42)!==0?1:jt(l),(l&(t.suspendedLanes|a))!==0?0:l}function jt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Se(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function hn(){var t=Y.p;return t!==0?t:(t=window.event,t===void 0?32:Rv(t.type))}function mn(t,a){var l=Y.p;try{return Y.p=t,a()}finally{Y.p=l}}var Te=Math.random().toString(36).slice(2),yt="__reactFiber$"+Te,Ke="__reactProps$"+Te,ha="__reactContainer$"+Te,Ks="__reactEvents$"+Te,xr="__reactListeners$"+Te,Sr="__reactHandles$"+Te,sl="__reactResources$"+Te,Ua="__reactMarker$"+Te;function Ws(t){delete t[yt],delete t[Ke],delete t[Ks],delete t[xr],delete t[Sr]}function ma(t){var a=t[yt];if(a)return a;for(var l=t.parentNode;l;){if(a=l[ha]||l[yt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(t=gv(t);t!==null;){if(l=t[yt])return l;t=gv(t)}return a}t=l,l=t.parentNode}return null}function Xs(t){if(t=t[yt]||t[ha]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function il(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(i(33))}function Qs(t){var a=t[sl];return a||(a=t[sl]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Xt(t){t[Ua]=!0}var Kh=new Set,Wh={};function _s(t,a){Js(t,a),Js(t+"Capture",a)}function Js(t,a){for(Wh[t]=a,t=0;t<a.length;t++)Kh.add(a[t])}var IS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xh={},Qh={};function BS(t){return Gt.call(Qh,t)?!0:Gt.call(Xh,t)?!1:IS.test(t)?Qh[t]=!0:(Xh[t]=!0,!1)}function wr(t,a,l){if(BS(a))if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var o=a.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+l)}}function _r(t,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+l)}}function ga(t,a,l,o){if(o===null)t.removeAttribute(l);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(a,l,""+o)}}function Bn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Jh(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function LS(t,a,l){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return f.call(this)},set:function(x){l=""+x,g.call(this,x)}}),Object.defineProperty(t,a,{enumerable:o.enumerable}),{getValue:function(){return l},setValue:function(x){l=""+x},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Vc(t){if(!t._valueTracker){var a=Jh(t)?"checked":"value";t._valueTracker=LS(t,a,""+t[a])}}function em(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var l=a.getValue(),o="";return t&&(o=Jh(t)?t.checked?"true":"false":t.value),t=o,t!==l?(a.setValue(t),!0):!1}function Er(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var qS=/[\n"\\]/g;function Ln(t){return t.replace(qS,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Kc(t,a,l,o,f,g,x,T){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),a!=null?x==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Bn(a)):t.value!==""+Bn(a)&&(t.value=""+Bn(a)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),a!=null?Wc(t,x,Bn(a)):l!=null?Wc(t,x,Bn(l)):o!=null&&t.removeAttribute("value"),f==null&&g!=null&&(t.defaultChecked=!!g),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Bn(T):t.removeAttribute("name")}function tm(t,a,l,o,f,g,x,T){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.type=g),a!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||a!=null)){Vc(t);return}l=l!=null?""+Bn(l):"",a=a!=null?""+Bn(a):l,T||a===t.value||(t.value=a),t.defaultValue=a}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=T?t.checked:!!o,t.defaultChecked=!!o,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),Vc(t)}function Wc(t,a,l){a==="number"&&Er(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function ei(t,a,l,o){if(t=t.options,a){a={};for(var f=0;f<l.length;f++)a["$"+l[f]]=!0;for(l=0;l<t.length;l++)f=a.hasOwnProperty("$"+t[l].value),t[l].selected!==f&&(t[l].selected=f),f&&o&&(t[l].defaultSelected=!0)}else{for(l=""+Bn(l),a=null,f=0;f<t.length;f++){if(t[f].value===l){t[f].selected=!0,o&&(t[f].defaultSelected=!0);return}a!==null||t[f].disabled||(a=t[f])}a!==null&&(a.selected=!0)}}function nm(t,a,l){if(a!=null&&(a=""+Bn(a),a!==t.value&&(t.value=a),l==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=l!=null?""+Bn(l):""}function am(t,a,l,o){if(a==null){if(o!=null){if(l!=null)throw Error(i(92));if(X(o)){if(1<o.length)throw Error(i(93));o=o[0]}l=o}l==null&&(l=""),a=l}l=Bn(a),t.defaultValue=l,o=t.textContent,o===l&&o!==""&&o!==null&&(t.value=o),Vc(t)}function ti(t,a){if(a){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=a;return}}t.textContent=a}var US=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sm(t,a,l){var o=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?o?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":o?t.setProperty(a,l):typeof l!="number"||l===0||US.has(a)?a==="float"?t.cssFloat=l:t[a]=(""+l).trim():t[a]=l+"px"}function im(t,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(t=t.style,l!=null){for(var o in l)!l.hasOwnProperty(o)||a!=null&&a.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var f in a)o=a[f],a.hasOwnProperty(f)&&l[f]!==o&&sm(t,f,o)}else for(var g in a)a.hasOwnProperty(g)&&sm(t,g,a[g])}function Xc(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $S=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),HS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Tr(t){return HS.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function pa(){}var Qc=null;function Jc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ni=null,ai=null;function lm(t){var a=Xs(t);if(a&&(t=a.stateNode)){var l=t[Ke]||null;e:switch(t=a.stateNode,a.type){case"input":if(Kc(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Ln(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var o=l[a];if(o!==t&&o.form===t.form){var f=o[Ke]||null;if(!f)throw Error(i(90));Kc(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<l.length;a++)o=l[a],o.form===t.form&&em(o)}break e;case"textarea":nm(t,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&ei(t,!!l.multiple,a,!1)}}}var eu=!1;function rm(t,a,l){if(eu)return t(a,l);eu=!0;try{var o=t(a);return o}finally{if(eu=!1,(ni!==null||ai!==null)&&(ho(),ni&&(a=ni,t=ai,ai=ni=null,lm(a),t)))for(a=0;a<t.length;a++)lm(t[a])}}function ll(t,a){var l=t.stateNode;if(l===null)return null;var o=l[Ke]||null;if(o===null)return null;l=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tu=!1;if(va)try{var rl={};Object.defineProperty(rl,"passive",{get:function(){tu=!0}}),window.addEventListener("test",rl,rl),window.removeEventListener("test",rl,rl)}catch{tu=!1}var $a=null,nu=null,Nr=null;function om(){if(Nr)return Nr;var t,a=nu,l=a.length,o,f="value"in $a?$a.value:$a.textContent,g=f.length;for(t=0;t<l&&a[t]===f[t];t++);var x=l-t;for(o=1;o<=x&&a[l-o]===f[g-o];o++);return Nr=f.slice(t,1<o?1-o:void 0)}function Mr(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function jr(){return!0}function cm(){return!1}function yn(t){function a(l,o,f,g,x){this._reactName=l,this._targetInst=f,this.type=o,this.nativeEvent=g,this.target=x,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(l=t[T],this[T]=l?l(g):g[T]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?jr:cm,this.isPropagationStopped=cm,this}return y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=jr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=jr)},persist:function(){},isPersistent:jr}),a}var Es={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cr=yn(Es),ol=y({},Es,{view:0,detail:0}),ZS=yn(ol),au,su,cl,Dr=y({},ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==cl&&(cl&&t.type==="mousemove"?(au=t.screenX-cl.screenX,su=t.screenY-cl.screenY):su=au=0,cl=t),au)},movementY:function(t){return"movementY"in t?t.movementY:su}}),um=yn(Dr),FS=y({},Dr,{dataTransfer:0}),GS=yn(FS),YS=y({},ol,{relatedTarget:0}),iu=yn(YS),VS=y({},Es,{animationName:0,elapsedTime:0,pseudoElement:0}),KS=yn(VS),WS=y({},Es,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),XS=yn(WS),QS=y({},Es,{data:0}),dm=yn(QS),JS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function n1(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=t1[t])?!!a[t]:!1}function lu(){return n1}var a1=y({},ol,{key:function(t){if(t.key){var a=JS[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Mr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?e1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lu,charCode:function(t){return t.type==="keypress"?Mr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Mr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),s1=yn(a1),i1=y({},Dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fm=yn(i1),l1=y({},ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lu}),r1=yn(l1),o1=y({},Es,{propertyName:0,elapsedTime:0,pseudoElement:0}),c1=yn(o1),u1=y({},Dr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),d1=yn(u1),f1=y({},Es,{newState:0,oldState:0}),h1=yn(f1),m1=[9,13,27,32],ru=va&&"CompositionEvent"in window,ul=null;va&&"documentMode"in document&&(ul=document.documentMode);var g1=va&&"TextEvent"in window&&!ul,hm=va&&(!ru||ul&&8<ul&&11>=ul),mm=" ",gm=!1;function pm(t,a){switch(t){case"keyup":return m1.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var si=!1;function p1(t,a){switch(t){case"compositionend":return vm(a);case"keypress":return a.which!==32?null:(gm=!0,mm);case"textInput":return t=a.data,t===mm&&gm?null:t;default:return null}}function v1(t,a){if(si)return t==="compositionend"||!ru&&pm(t,a)?(t=om(),Nr=nu=$a=null,si=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return hm&&a.locale!=="ko"?null:a.data;default:return null}}var y1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ym(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!y1[t.type]:a==="textarea"}function bm(t,a,l,o){ni?ai?ai.push(o):ai=[o]:ni=o,a=xo(a,"onChange"),0<a.length&&(l=new Cr("onChange","change",null,l,o),t.push({event:l,listeners:a}))}var dl=null,fl=null;function b1(t){tv(t,0)}function Rr(t){var a=il(t);if(em(a))return t}function xm(t,a){if(t==="change")return a}var Sm=!1;if(va){var ou;if(va){var cu="oninput"in document;if(!cu){var wm=document.createElement("div");wm.setAttribute("oninput","return;"),cu=typeof wm.oninput=="function"}ou=cu}else ou=!1;Sm=ou&&(!document.documentMode||9<document.documentMode)}function _m(){dl&&(dl.detachEvent("onpropertychange",Em),fl=dl=null)}function Em(t){if(t.propertyName==="value"&&Rr(fl)){var a=[];bm(a,fl,t,Jc(t)),rm(b1,a)}}function x1(t,a,l){t==="focusin"?(_m(),dl=a,fl=l,dl.attachEvent("onpropertychange",Em)):t==="focusout"&&_m()}function S1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rr(fl)}function w1(t,a){if(t==="click")return Rr(a)}function _1(t,a){if(t==="input"||t==="change")return Rr(a)}function E1(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var Mn=typeof Object.is=="function"?Object.is:E1;function hl(t,a){if(Mn(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var l=Object.keys(t),o=Object.keys(a);if(l.length!==o.length)return!1;for(o=0;o<l.length;o++){var f=l[o];if(!Gt.call(a,f)||!Mn(t[f],a[f]))return!1}return!0}function Tm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Nm(t,a){var l=Tm(t);t=0;for(var o;l;){if(l.nodeType===3){if(o=t+l.textContent.length,t<=a&&o>=a)return{node:l,offset:a-t};t=o}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Tm(l)}}function Mm(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Mm(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function jm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=Er(t.document);a instanceof t.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)t=a.contentWindow;else break;a=Er(t.document)}return a}function uu(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var T1=va&&"documentMode"in document&&11>=document.documentMode,ii=null,du=null,ml=null,fu=!1;function Cm(t,a,l){var o=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;fu||ii==null||ii!==Er(o)||(o=ii,"selectionStart"in o&&uu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ml&&hl(ml,o)||(ml=o,o=xo(du,"onSelect"),0<o.length&&(a=new Cr("onSelect","select",null,a,l),t.push({event:a,listeners:o}),a.target=ii)))}function Ts(t,a){var l={};return l[t.toLowerCase()]=a.toLowerCase(),l["Webkit"+t]="webkit"+a,l["Moz"+t]="moz"+a,l}var li={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionrun:Ts("Transition","TransitionRun"),transitionstart:Ts("Transition","TransitionStart"),transitioncancel:Ts("Transition","TransitionCancel"),transitionend:Ts("Transition","TransitionEnd")},hu={},Dm={};va&&(Dm=document.createElement("div").style,"AnimationEvent"in window||(delete li.animationend.animation,delete li.animationiteration.animation,delete li.animationstart.animation),"TransitionEvent"in window||delete li.transitionend.transition);function Ns(t){if(hu[t])return hu[t];if(!li[t])return t;var a=li[t],l;for(l in a)if(a.hasOwnProperty(l)&&l in Dm)return hu[t]=a[l];return t}var Rm=Ns("animationend"),km=Ns("animationiteration"),Am=Ns("animationstart"),N1=Ns("transitionrun"),M1=Ns("transitionstart"),j1=Ns("transitioncancel"),Om=Ns("transitionend"),zm=new Map,mu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mu.push("scrollEnd");function Wn(t,a){zm.set(t,a),_s(a,[t])}var kr=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},qn=[],ri=0,gu=0;function Ar(){for(var t=ri,a=gu=ri=0;a<t;){var l=qn[a];qn[a++]=null;var o=qn[a];qn[a++]=null;var f=qn[a];qn[a++]=null;var g=qn[a];if(qn[a++]=null,o!==null&&f!==null){var x=o.pending;x===null?f.next=f:(f.next=x.next,x.next=f),o.pending=f}g!==0&&Pm(l,f,g)}}function Or(t,a,l,o){qn[ri++]=t,qn[ri++]=a,qn[ri++]=l,qn[ri++]=o,gu|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function pu(t,a,l,o){return Or(t,a,l,o),zr(t)}function Ms(t,a){return Or(t,null,null,a),zr(t)}function Pm(t,a,l){t.lanes|=l;var o=t.alternate;o!==null&&(o.lanes|=l);for(var f=!1,g=t.return;g!==null;)g.childLanes|=l,o=g.alternate,o!==null&&(o.childLanes|=l),g.tag===22&&(t=g.stateNode,t===null||t._visibility&1||(f=!0)),t=g,g=g.return;return t.tag===3?(g=t.stateNode,f&&a!==null&&(f=31-Nt(l),t=g.hiddenUpdates,o=t[f],o===null?t[f]=[a]:o.push(a),a.lane=l|536870912),g):null}function zr(t){if(50<Pl)throw Pl=0,Td=null,Error(i(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var oi={};function C1(t,a,l,o){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(t,a,l,o){return new C1(t,a,l,o)}function vu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ya(t,a){var l=t.alternate;return l===null?(l=jn(t.tag,a,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=a,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,a=t.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function Im(t,a){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,a=l.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Pr(t,a,l,o,f,g){var x=0;if(o=t,typeof t=="function")vu(t)&&(x=1);else if(typeof t=="string")x=Ow(t,l,oe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Z:return t=jn(31,l,a,f),t.elementType=Z,t.lanes=g,t;case E:return js(l.children,f,g,a);case C:x=8,f|=24;break;case k:return t=jn(12,l,a,f|2),t.elementType=k,t.lanes=g,t;case q:return t=jn(13,l,a,f),t.elementType=q,t.lanes=g,t;case M:return t=jn(19,l,a,f),t.elementType=M,t.lanes=g,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case z:x=10;break e;case R:x=9;break e;case B:x=11;break e;case j:x=14;break e;case D:x=16,o=null;break e}x=29,l=Error(i(130,t===null?"null":typeof t,"")),o=null}return a=jn(x,l,a,f),a.elementType=t,a.type=o,a.lanes=g,a}function js(t,a,l,o){return t=jn(7,t,o,a),t.lanes=l,t}function yu(t,a,l){return t=jn(6,t,null,a),t.lanes=l,t}function Bm(t){var a=jn(18,null,null,0);return a.stateNode=t,a}function bu(t,a,l){return a=jn(4,t.children!==null?t.children:[],t.key,a),a.lanes=l,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Lm=new WeakMap;function Un(t,a){if(typeof t=="object"&&t!==null){var l=Lm.get(t);return l!==void 0?l:(a={value:t,source:a,stack:nn(a)},Lm.set(t,a),a)}return{value:t,source:a,stack:nn(a)}}var ci=[],ui=0,Ir=null,gl=0,$n=[],Hn=0,Ha=null,ia=1,la="";function ba(t,a){ci[ui++]=gl,ci[ui++]=Ir,Ir=t,gl=a}function qm(t,a,l){$n[Hn++]=ia,$n[Hn++]=la,$n[Hn++]=Ha,Ha=t;var o=ia;t=la;var f=32-Nt(o)-1;o&=~(1<<f),l+=1;var g=32-Nt(a)+f;if(30<g){var x=f-f%5;g=(o&(1<<x)-1).toString(32),o>>=x,f-=x,ia=1<<32-Nt(a)+f|l<<f|o,la=g+t}else ia=1<<g|l<<f|o,la=t}function xu(t){t.return!==null&&(ba(t,1),qm(t,1,0))}function Su(t){for(;t===Ir;)Ir=ci[--ui],ci[ui]=null,gl=ci[--ui],ci[ui]=null;for(;t===Ha;)Ha=$n[--Hn],$n[Hn]=null,la=$n[--Hn],$n[Hn]=null,ia=$n[--Hn],$n[Hn]=null}function Um(t,a){$n[Hn++]=ia,$n[Hn++]=la,$n[Hn++]=Ha,ia=a.id,la=a.overflow,Ha=t}var sn=null,bt=null,Ze=!1,Za=null,Zn=!1,wu=Error(i(519));function Fa(t){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw pl(Un(a,t)),wu}function $m(t){var a=t.stateNode,l=t.type,o=t.memoizedProps;switch(a[yt]=t,a[Ke]=o,l){case"dialog":qe("cancel",a),qe("close",a);break;case"iframe":case"object":case"embed":qe("load",a);break;case"video":case"audio":for(l=0;l<Bl.length;l++)qe(Bl[l],a);break;case"source":qe("error",a);break;case"img":case"image":case"link":qe("error",a),qe("load",a);break;case"details":qe("toggle",a);break;case"input":qe("invalid",a),tm(a,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":qe("invalid",a);break;case"textarea":qe("invalid",a),am(a,o.value,o.defaultValue,o.children)}l=o.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||o.suppressHydrationWarning===!0||iv(a.textContent,l)?(o.popover!=null&&(qe("beforetoggle",a),qe("toggle",a)),o.onScroll!=null&&qe("scroll",a),o.onScrollEnd!=null&&qe("scrollend",a),o.onClick!=null&&(a.onclick=pa),a=!0):a=!1,a||Fa(t,!0)}function Hm(t){for(sn=t.return;sn;)switch(sn.tag){case 5:case 31:case 13:Zn=!1;return;case 27:case 3:Zn=!0;return;default:sn=sn.return}}function di(t){if(t!==sn)return!1;if(!Ze)return Hm(t),Ze=!0,!1;var a=t.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||qd(t.type,t.memoizedProps)),l=!l),l&&bt&&Fa(t),Hm(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));bt=mv(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));bt=mv(t)}else a===27?(a=bt,is(t.type)?(t=Fd,Fd=null,bt=t):bt=a):bt=sn?Gn(t.stateNode.nextSibling):null;return!0}function Cs(){bt=sn=null,Ze=!1}function _u(){var t=Za;return t!==null&&(wn===null?wn=t:wn.push.apply(wn,t),Za=null),t}function pl(t){Za===null?Za=[t]:Za.push(t)}var Eu=N(null),Ds=null,xa=null;function Ga(t,a,l){J(Eu,a._currentValue),a._currentValue=l}function Sa(t){t._currentValue=Eu.current,I(Eu)}function Tu(t,a,l){for(;t!==null;){var o=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),t===l)break;t=t.return}}function Nu(t,a,l,o){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var g=f.dependencies;if(g!==null){var x=f.child;g=g.firstContext;e:for(;g!==null;){var T=g;g=f;for(var O=0;O<a.length;O++)if(T.context===a[O]){g.lanes|=l,T=g.alternate,T!==null&&(T.lanes|=l),Tu(g.return,l,t),o||(x=null);break e}g=T.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(i(341));x.lanes|=l,g=x.alternate,g!==null&&(g.lanes|=l),Tu(x,l,t),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===t){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function fi(t,a,l,o){t=null;for(var f=a,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var T=f.type;Mn(f.pendingProps.value,x.value)||(t!==null?t.push(T):t=[T])}}else if(f===ye.current){if(x=f.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Hl):t=[Hl])}f=f.return}t!==null&&Nu(a,t,l,o),a.flags|=262144}function Br(t){for(t=t.firstContext;t!==null;){if(!Mn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Rs(t){Ds=t,xa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ln(t){return Zm(Ds,t)}function Lr(t,a){return Ds===null&&Rs(t),Zm(t,a)}function Zm(t,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},xa===null){if(t===null)throw Error(i(308));xa=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else xa=xa.next=a;return l}var D1=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(l,o){t.push(o)}};this.abort=function(){a.aborted=!0,t.forEach(function(l){return l()})}},R1=e.unstable_scheduleCallback,k1=e.unstable_NormalPriority,Lt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Mu(){return{controller:new D1,data:new Map,refCount:0}}function vl(t){t.refCount--,t.refCount===0&&R1(k1,function(){t.controller.abort()})}var yl=null,ju=0,hi=0,mi=null;function A1(t,a){if(yl===null){var l=yl=[];ju=0,hi=Rd(),mi={status:"pending",value:void 0,then:function(o){l.push(o)}}}return ju++,a.then(Fm,Fm),a}function Fm(){if(--ju===0&&yl!==null){mi!==null&&(mi.status="fulfilled");var t=yl;yl=null,hi=0,mi=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function O1(t,a){var l=[],o={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return t.then(function(){o.status="fulfilled",o.value=a;for(var f=0;f<l.length;f++)(0,l[f])(a)},function(f){for(o.status="rejected",o.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),o}var Gm=L.S;L.S=function(t,a){Cp=Pe(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&A1(t,a),Gm!==null&&Gm(t,a)};var ks=N(null);function Cu(){var t=ks.current;return t!==null?t:ht.pooledCache}function qr(t,a){a===null?J(ks,ks.current):J(ks,a.pool)}function Ym(){var t=Cu();return t===null?null:{parent:Lt._currentValue,pool:t}}var gi=Error(i(460)),Du=Error(i(474)),Ur=Error(i(542)),$r={then:function(){}};function Vm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Km(t,a,l){switch(l=t[l],l===void 0?t.push(a):l!==a&&(a.then(pa,pa),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Xm(t),t;default:if(typeof a.status=="string")a.then(pa,pa);else{if(t=ht,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=a,t.status="pending",t.then(function(o){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=o}},function(o){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=o}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Xm(t),t}throw Os=a,gi}}function As(t){try{var a=t._init;return a(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Os=l,gi):l}}var Os=null;function Wm(){if(Os===null)throw Error(i(459));var t=Os;return Os=null,t}function Xm(t){if(t===gi||t===Ur)throw Error(i(483))}var pi=null,bl=0;function Hr(t){var a=bl;return bl+=1,pi===null&&(pi=[]),Km(pi,t,a)}function xl(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Zr(t,a){throw a.$$typeof===b?Error(i(525)):(t=Object.prototype.toString.call(a),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function Qm(t){function a(U,P){if(t){var H=U.deletions;H===null?(U.deletions=[P],U.flags|=16):H.push(P)}}function l(U,P){if(!t)return null;for(;P!==null;)a(U,P),P=P.sibling;return null}function o(U){for(var P=new Map;U!==null;)U.key!==null?P.set(U.key,U):P.set(U.index,U),U=U.sibling;return P}function f(U,P){return U=ya(U,P),U.index=0,U.sibling=null,U}function g(U,P,H){return U.index=H,t?(H=U.alternate,H!==null?(H=H.index,H<P?(U.flags|=67108866,P):H):(U.flags|=67108866,P)):(U.flags|=1048576,P)}function x(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function T(U,P,H,ee){return P===null||P.tag!==6?(P=yu(H,U.mode,ee),P.return=U,P):(P=f(P,H),P.return=U,P)}function O(U,P,H,ee){var we=H.type;return we===E?Q(U,P,H.props.children,ee,H.key):P!==null&&(P.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===D&&As(we)===P.type)?(P=f(P,H.props),xl(P,H),P.return=U,P):(P=Pr(H.type,H.key,H.props,null,U.mode,ee),xl(P,H),P.return=U,P)}function F(U,P,H,ee){return P===null||P.tag!==4||P.stateNode.containerInfo!==H.containerInfo||P.stateNode.implementation!==H.implementation?(P=bu(H,U.mode,ee),P.return=U,P):(P=f(P,H.children||[]),P.return=U,P)}function Q(U,P,H,ee,we){return P===null||P.tag!==7?(P=js(H,U.mode,ee,we),P.return=U,P):(P=f(P,H),P.return=U,P)}function ie(U,P,H){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=yu(""+P,U.mode,H),P.return=U,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case S:return H=Pr(P.type,P.key,P.props,null,U.mode,H),xl(H,P),H.return=U,H;case _:return P=bu(P,U.mode,H),P.return=U,P;case D:return P=As(P),ie(U,P,H)}if(X(P)||ne(P))return P=js(P,U.mode,H,null),P.return=U,P;if(typeof P.then=="function")return ie(U,Hr(P),H);if(P.$$typeof===z)return ie(U,Lr(U,P),H);Zr(U,P)}return null}function G(U,P,H,ee){var we=P!==null?P.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return we!==null?null:T(U,P,""+H,ee);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case S:return H.key===we?O(U,P,H,ee):null;case _:return H.key===we?F(U,P,H,ee):null;case D:return H=As(H),G(U,P,H,ee)}if(X(H)||ne(H))return we!==null?null:Q(U,P,H,ee,null);if(typeof H.then=="function")return G(U,P,Hr(H),ee);if(H.$$typeof===z)return G(U,P,Lr(U,H),ee);Zr(U,H)}return null}function W(U,P,H,ee,we){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return U=U.get(H)||null,T(P,U,""+ee,we);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case S:return U=U.get(ee.key===null?H:ee.key)||null,O(P,U,ee,we);case _:return U=U.get(ee.key===null?H:ee.key)||null,F(P,U,ee,we);case D:return ee=As(ee),W(U,P,H,ee,we)}if(X(ee)||ne(ee))return U=U.get(H)||null,Q(P,U,ee,we,null);if(typeof ee.then=="function")return W(U,P,H,Hr(ee),we);if(ee.$$typeof===z)return W(U,P,H,Lr(P,ee),we);Zr(P,ee)}return null}function pe(U,P,H,ee){for(var we=null,We=null,ve=P,Ae=P=0,He=null;ve!==null&&Ae<H.length;Ae++){ve.index>Ae?(He=ve,ve=null):He=ve.sibling;var Xe=G(U,ve,H[Ae],ee);if(Xe===null){ve===null&&(ve=He);break}t&&ve&&Xe.alternate===null&&a(U,ve),P=g(Xe,P,Ae),We===null?we=Xe:We.sibling=Xe,We=Xe,ve=He}if(Ae===H.length)return l(U,ve),Ze&&ba(U,Ae),we;if(ve===null){for(;Ae<H.length;Ae++)ve=ie(U,H[Ae],ee),ve!==null&&(P=g(ve,P,Ae),We===null?we=ve:We.sibling=ve,We=ve);return Ze&&ba(U,Ae),we}for(ve=o(ve);Ae<H.length;Ae++)He=W(ve,U,Ae,H[Ae],ee),He!==null&&(t&&He.alternate!==null&&ve.delete(He.key===null?Ae:He.key),P=g(He,P,Ae),We===null?we=He:We.sibling=He,We=He);return t&&ve.forEach(function(us){return a(U,us)}),Ze&&ba(U,Ae),we}function Ne(U,P,H,ee){if(H==null)throw Error(i(151));for(var we=null,We=null,ve=P,Ae=P=0,He=null,Xe=H.next();ve!==null&&!Xe.done;Ae++,Xe=H.next()){ve.index>Ae?(He=ve,ve=null):He=ve.sibling;var us=G(U,ve,Xe.value,ee);if(us===null){ve===null&&(ve=He);break}t&&ve&&us.alternate===null&&a(U,ve),P=g(us,P,Ae),We===null?we=us:We.sibling=us,We=us,ve=He}if(Xe.done)return l(U,ve),Ze&&ba(U,Ae),we;if(ve===null){for(;!Xe.done;Ae++,Xe=H.next())Xe=ie(U,Xe.value,ee),Xe!==null&&(P=g(Xe,P,Ae),We===null?we=Xe:We.sibling=Xe,We=Xe);return Ze&&ba(U,Ae),we}for(ve=o(ve);!Xe.done;Ae++,Xe=H.next())Xe=W(ve,U,Ae,Xe.value,ee),Xe!==null&&(t&&Xe.alternate!==null&&ve.delete(Xe.key===null?Ae:Xe.key),P=g(Xe,P,Ae),We===null?we=Xe:We.sibling=Xe,We=Xe);return t&&ve.forEach(function(Fw){return a(U,Fw)}),Ze&&ba(U,Ae),we}function ut(U,P,H,ee){if(typeof H=="object"&&H!==null&&H.type===E&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case S:e:{for(var we=H.key;P!==null;){if(P.key===we){if(we=H.type,we===E){if(P.tag===7){l(U,P.sibling),ee=f(P,H.props.children),ee.return=U,U=ee;break e}}else if(P.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===D&&As(we)===P.type){l(U,P.sibling),ee=f(P,H.props),xl(ee,H),ee.return=U,U=ee;break e}l(U,P);break}else a(U,P);P=P.sibling}H.type===E?(ee=js(H.props.children,U.mode,ee,H.key),ee.return=U,U=ee):(ee=Pr(H.type,H.key,H.props,null,U.mode,ee),xl(ee,H),ee.return=U,U=ee)}return x(U);case _:e:{for(we=H.key;P!==null;){if(P.key===we)if(P.tag===4&&P.stateNode.containerInfo===H.containerInfo&&P.stateNode.implementation===H.implementation){l(U,P.sibling),ee=f(P,H.children||[]),ee.return=U,U=ee;break e}else{l(U,P);break}else a(U,P);P=P.sibling}ee=bu(H,U.mode,ee),ee.return=U,U=ee}return x(U);case D:return H=As(H),ut(U,P,H,ee)}if(X(H))return pe(U,P,H,ee);if(ne(H)){if(we=ne(H),typeof we!="function")throw Error(i(150));return H=we.call(H),Ne(U,P,H,ee)}if(typeof H.then=="function")return ut(U,P,Hr(H),ee);if(H.$$typeof===z)return ut(U,P,Lr(U,H),ee);Zr(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,P!==null&&P.tag===6?(l(U,P.sibling),ee=f(P,H),ee.return=U,U=ee):(l(U,P),ee=yu(H,U.mode,ee),ee.return=U,U=ee),x(U)):l(U,P)}return function(U,P,H,ee){try{bl=0;var we=ut(U,P,H,ee);return pi=null,we}catch(ve){if(ve===gi||ve===Ur)throw ve;var We=jn(29,ve,null,U.mode);return We.lanes=ee,We.return=U,We}}}var zs=Qm(!0),Jm=Qm(!1),Ya=!1;function Ru(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ku(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Va(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ka(t,a,l){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(tt&2)!==0){var f=o.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),o.pending=a,a=zr(t),Pm(t,null,l),a}return Or(t,o,a,l),zr(t)}function Sl(t,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var o=a.lanes;o&=t.pendingLanes,l|=o,a.lanes=l,Ve(t,l)}}function Au(t,a){var l=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,l===o)){var f=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?f=g=x:g=g.next=x,l=l.next}while(l!==null);g===null?f=g=a:g=g.next=a}else f=g=a;l={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:o.shared,callbacks:o.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=a:t.next=a,l.lastBaseUpdate=a}var Ou=!1;function wl(){if(Ou){var t=mi;if(t!==null)throw t}}function _l(t,a,l,o){Ou=!1;var f=t.updateQueue;Ya=!1;var g=f.firstBaseUpdate,x=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var O=T,F=O.next;O.next=null,x===null?g=F:x.next=F,x=O;var Q=t.alternate;Q!==null&&(Q=Q.updateQueue,T=Q.lastBaseUpdate,T!==x&&(T===null?Q.firstBaseUpdate=F:T.next=F,Q.lastBaseUpdate=O))}if(g!==null){var ie=f.baseState;x=0,Q=F=O=null,T=g;do{var G=T.lane&-536870913,W=G!==T.lane;if(W?($e&G)===G:(o&G)===G){G!==0&&G===hi&&(Ou=!0),Q!==null&&(Q=Q.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var pe=t,Ne=T;G=a;var ut=l;switch(Ne.tag){case 1:if(pe=Ne.payload,typeof pe=="function"){ie=pe.call(ut,ie,G);break e}ie=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Ne.payload,G=typeof pe=="function"?pe.call(ut,ie,G):pe,G==null)break e;ie=y({},ie,G);break e;case 2:Ya=!0}}G=T.callback,G!==null&&(t.flags|=64,W&&(t.flags|=8192),W=f.callbacks,W===null?f.callbacks=[G]:W.push(G))}else W={lane:G,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Q===null?(F=Q=W,O=ie):Q=Q.next=W,x|=G;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;W=T,T=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);Q===null&&(O=ie),f.baseState=O,f.firstBaseUpdate=F,f.lastBaseUpdate=Q,g===null&&(f.shared.lanes=0),es|=x,t.lanes=x,t.memoizedState=ie}}function eg(t,a){if(typeof t!="function")throw Error(i(191,t));t.call(a)}function tg(t,a){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)eg(l[t],a)}var vi=N(null),Fr=N(0);function ng(t,a){t=Da,J(Fr,t),J(vi,a),Da=t|a.baseLanes}function zu(){J(Fr,Da),J(vi,vi.current)}function Pu(){Da=Fr.current,I(vi),I(Fr)}var Cn=N(null),Fn=null;function Wa(t){var a=t.alternate;J(Ot,Ot.current&1),J(Cn,t),Fn===null&&(a===null||vi.current!==null||a.memoizedState!==null)&&(Fn=t)}function Iu(t){J(Ot,Ot.current),J(Cn,t),Fn===null&&(Fn=t)}function ag(t){t.tag===22?(J(Ot,Ot.current),J(Cn,t),Fn===null&&(Fn=t)):Xa()}function Xa(){J(Ot,Ot.current),J(Cn,Cn.current)}function Dn(t){I(Cn),Fn===t&&(Fn=null),I(Ot)}var Ot=N(0);function Gr(t){for(var a=t;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Hd(l)||Zd(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var wa=0,Re=null,ot=null,qt=null,Yr=!1,yi=!1,Ps=!1,Vr=0,El=0,bi=null,z1=0;function Ct(){throw Error(i(321))}function Bu(t,a){if(a===null)return!1;for(var l=0;l<a.length&&l<t.length;l++)if(!Mn(t[l],a[l]))return!1;return!0}function Lu(t,a,l,o,f,g){return wa=g,Re=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,L.H=t===null||t.memoizedState===null?qg:ed,Ps=!1,g=l(o,f),Ps=!1,yi&&(g=ig(a,l,o,f)),sg(t),g}function sg(t){L.H=Ml;var a=ot!==null&&ot.next!==null;if(wa=0,qt=ot=Re=null,Yr=!1,El=0,bi=null,a)throw Error(i(300));t===null||Ut||(t=t.dependencies,t!==null&&Br(t)&&(Ut=!0))}function ig(t,a,l,o){Re=t;var f=0;do{if(yi&&(bi=null),El=0,yi=!1,25<=f)throw Error(i(301));if(f+=1,qt=ot=null,t.updateQueue!=null){var g=t.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}L.H=Ug,g=a(l,o)}while(yi);return g}function P1(){var t=L.H,a=t.useState()[0];return a=typeof a.then=="function"?Tl(a):a,t=t.useState()[0],(ot!==null?ot.memoizedState:null)!==t&&(Re.flags|=1024),a}function qu(){var t=Vr!==0;return Vr=0,t}function Uu(t,a,l){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~l}function $u(t){if(Yr){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Yr=!1}wa=0,qt=ot=Re=null,yi=!1,El=Vr=0,bi=null}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?Re.memoizedState=qt=t:qt=qt.next=t,qt}function zt(){if(ot===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var a=qt===null?Re.memoizedState:qt.next;if(a!==null)qt=a,ot=t;else{if(t===null)throw Re.alternate===null?Error(i(467)):Error(i(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},qt===null?Re.memoizedState=qt=t:qt=qt.next=t}return qt}function Kr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(t){var a=El;return El+=1,bi===null&&(bi=[]),t=Km(bi,t,a),a=Re,(qt===null?a.memoizedState:qt.next)===null&&(a=a.alternate,L.H=a===null||a.memoizedState===null?qg:ed),t}function Wr(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Tl(t);if(t.$$typeof===z)return ln(t)}throw Error(i(438,String(t)))}function Hu(t){var a=null,l=Re.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var o=Re.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(a={data:o.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Kr(),Re.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(t),o=0;o<t;o++)l[o]=le;return a.index++,l}function _a(t,a){return typeof a=="function"?a(t):a}function Xr(t){var a=zt();return Zu(a,ot,t)}function Zu(t,a,l){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=l;var f=t.baseQueue,g=o.pending;if(g!==null){if(f!==null){var x=f.next;f.next=g.next,g.next=x}a.baseQueue=f=g,o.pending=null}if(g=t.baseState,f===null)t.memoizedState=g;else{a=f.next;var T=x=null,O=null,F=a,Q=!1;do{var ie=F.lane&-536870913;if(ie!==F.lane?($e&ie)===ie:(wa&ie)===ie){var G=F.revertLane;if(G===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ie===hi&&(Q=!0);else if((wa&G)===G){F=F.next,G===hi&&(Q=!0);continue}else ie={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(T=O=ie,x=g):O=O.next=ie,Re.lanes|=G,es|=G;ie=F.action,Ps&&l(g,ie),g=F.hasEagerState?F.eagerState:l(g,ie)}else G={lane:ie,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(T=O=G,x=g):O=O.next=G,Re.lanes|=ie,es|=ie;F=F.next}while(F!==null&&F!==a);if(O===null?x=g:O.next=T,!Mn(g,t.memoizedState)&&(Ut=!0,Q&&(l=mi,l!==null)))throw l;t.memoizedState=g,t.baseState=x,t.baseQueue=O,o.lastRenderedState=g}return f===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Fu(t){var a=zt(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=t;var o=l.dispatch,f=l.pending,g=a.memoizedState;if(f!==null){l.pending=null;var x=f=f.next;do g=t(g,x.action),x=x.next;while(x!==f);Mn(g,a.memoizedState)||(Ut=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),l.lastRenderedState=g}return[g,o]}function lg(t,a,l){var o=Re,f=zt(),g=Ze;if(g){if(l===void 0)throw Error(i(407));l=l()}else l=a();var x=!Mn((ot||f).memoizedState,l);if(x&&(f.memoizedState=l,Ut=!0),f=f.queue,Vu(cg.bind(null,o,f,t),[t]),f.getSnapshot!==a||x||qt!==null&&qt.memoizedState.tag&1){if(o.flags|=2048,xi(9,{destroy:void 0},og.bind(null,o,f,l,a),null),ht===null)throw Error(i(349));g||(wa&127)!==0||rg(o,a,l)}return l}function rg(t,a,l){t.flags|=16384,t={getSnapshot:a,value:l},a=Re.updateQueue,a===null?(a=Kr(),Re.updateQueue=a,a.stores=[t]):(l=a.stores,l===null?a.stores=[t]:l.push(t))}function og(t,a,l,o){a.value=l,a.getSnapshot=o,ug(a)&&dg(t)}function cg(t,a,l){return l(function(){ug(a)&&dg(t)})}function ug(t){var a=t.getSnapshot;t=t.value;try{var l=a();return!Mn(t,l)}catch{return!0}}function dg(t){var a=Ms(t,2);a!==null&&_n(a,t,2)}function Gu(t){var a=gn();if(typeof t=="function"){var l=t;if(t=l(),Ps){It(!0);try{l()}finally{It(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:t},a}function fg(t,a,l,o){return t.baseState=l,Zu(t,ot,typeof o=="function"?o:_a)}function I1(t,a,l,o,f){if(eo(t))throw Error(i(485));if(t=a.action,t!==null){var g={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){g.listeners.push(x)}};L.T!==null?l(!0):g.isTransition=!1,o(g),l=a.pending,l===null?(g.next=a.pending=g,hg(a,g)):(g.next=l.next,a.pending=l.next=g)}}function hg(t,a){var l=a.action,o=a.payload,f=t.state;if(a.isTransition){var g=L.T,x={};L.T=x;try{var T=l(f,o),O=L.S;O!==null&&O(x,T),mg(t,a,T)}catch(F){Yu(t,a,F)}finally{g!==null&&x.types!==null&&(g.types=x.types),L.T=g}}else try{g=l(f,o),mg(t,a,g)}catch(F){Yu(t,a,F)}}function mg(t,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(o){gg(t,a,o)},function(o){return Yu(t,a,o)}):gg(t,a,l)}function gg(t,a,l){a.status="fulfilled",a.value=l,pg(a),t.state=l,a=t.pending,a!==null&&(l=a.next,l===a?t.pending=null:(l=l.next,a.next=l,hg(t,l)))}function Yu(t,a,l){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do a.status="rejected",a.reason=l,pg(a),a=a.next;while(a!==o)}t.action=null}function pg(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function vg(t,a){return a}function yg(t,a){if(Ze){var l=ht.formState;if(l!==null){e:{var o=Re;if(Ze){if(bt){t:{for(var f=bt,g=Zn;f.nodeType!==8;){if(!g){f=null;break t}if(f=Gn(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){bt=Gn(f.nextSibling),o=f.data==="F!";break e}}Fa(o)}o=!1}o&&(a=l[0])}}return l=gn(),l.memoizedState=l.baseState=a,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vg,lastRenderedState:a},l.queue=o,l=Ig.bind(null,Re,o),o.dispatch=l,o=Gu(!1),g=Ju.bind(null,Re,!1,o.queue),o=gn(),f={state:a,dispatch:null,action:t,pending:null},o.queue=f,l=I1.bind(null,Re,f,g,l),f.dispatch=l,o.memoizedState=t,[a,l,!1]}function bg(t){var a=zt();return xg(a,ot,t)}function xg(t,a,l){if(a=Zu(t,a,vg)[0],t=Xr(_a)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var o=Tl(a)}catch(x){throw x===gi?Ur:x}else o=a;a=zt();var f=a.queue,g=f.dispatch;return l!==a.memoizedState&&(Re.flags|=2048,xi(9,{destroy:void 0},B1.bind(null,f,l),null)),[o,g,t]}function B1(t,a){t.action=a}function Sg(t){var a=zt(),l=ot;if(l!==null)return xg(a,l,t);zt(),a=a.memoizedState,l=zt();var o=l.queue.dispatch;return l.memoizedState=t,[a,o,!1]}function xi(t,a,l,o){return t={tag:t,create:l,deps:o,inst:a,next:null},a=Re.updateQueue,a===null&&(a=Kr(),Re.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=t.next=t:(o=l.next,l.next=t,t.next=o,a.lastEffect=t),t}function wg(){return zt().memoizedState}function Qr(t,a,l,o){var f=gn();Re.flags|=t,f.memoizedState=xi(1|a,{destroy:void 0},l,o===void 0?null:o)}function Jr(t,a,l,o){var f=zt();o=o===void 0?null:o;var g=f.memoizedState.inst;ot!==null&&o!==null&&Bu(o,ot.memoizedState.deps)?f.memoizedState=xi(a,g,l,o):(Re.flags|=t,f.memoizedState=xi(1|a,g,l,o))}function _g(t,a){Qr(8390656,8,t,a)}function Vu(t,a){Jr(2048,8,t,a)}function L1(t){Re.flags|=4;var a=Re.updateQueue;if(a===null)a=Kr(),Re.updateQueue=a,a.events=[t];else{var l=a.events;l===null?a.events=[t]:l.push(t)}}function Eg(t){var a=zt().memoizedState;return L1({ref:a,nextImpl:t}),function(){if((tt&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function Tg(t,a){return Jr(4,2,t,a)}function Ng(t,a){return Jr(4,4,t,a)}function Mg(t,a){if(typeof a=="function"){t=t();var l=a(t);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function jg(t,a,l){l=l!=null?l.concat([t]):null,Jr(4,4,Mg.bind(null,a,t),l)}function Ku(){}function Cg(t,a){var l=zt();a=a===void 0?null:a;var o=l.memoizedState;return a!==null&&Bu(a,o[1])?o[0]:(l.memoizedState=[t,a],t)}function Dg(t,a){var l=zt();a=a===void 0?null:a;var o=l.memoizedState;if(a!==null&&Bu(a,o[1]))return o[0];if(o=t(),Ps){It(!0);try{t()}finally{It(!1)}}return l.memoizedState=[o,a],o}function Wu(t,a,l){return l===void 0||(wa&1073741824)!==0&&($e&261930)===0?t.memoizedState=a:(t.memoizedState=l,t=Rp(),Re.lanes|=t,es|=t,l)}function Rg(t,a,l,o){return Mn(l,a)?l:vi.current!==null?(t=Wu(t,l,o),Mn(t,a)||(Ut=!0),t):(wa&42)===0||(wa&1073741824)!==0&&($e&261930)===0?(Ut=!0,t.memoizedState=l):(t=Rp(),Re.lanes|=t,es|=t,a)}function kg(t,a,l,o,f){var g=Y.p;Y.p=g!==0&&8>g?g:8;var x=L.T,T={};L.T=T,Ju(t,!1,a,l);try{var O=f(),F=L.S;if(F!==null&&F(T,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Q=O1(O,o);Nl(t,a,Q,An(t))}else Nl(t,a,o,An(t))}catch(ie){Nl(t,a,{then:function(){},status:"rejected",reason:ie},An())}finally{Y.p=g,x!==null&&T.types!==null&&(x.types=T.types),L.T=x}}function q1(){}function Xu(t,a,l,o){if(t.tag!==5)throw Error(i(476));var f=Ag(t).queue;kg(t,f,a,te,l===null?q1:function(){return Og(t),l(o)})}function Ag(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:te},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:l},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function Og(t){var a=Ag(t);a.next===null&&(a=t.alternate.memoizedState),Nl(t,a.next.queue,{},An())}function Qu(){return ln(Hl)}function zg(){return zt().memoizedState}function Pg(){return zt().memoizedState}function U1(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var l=An();t=Va(l);var o=Ka(a,t,l);o!==null&&(_n(o,a,l),Sl(o,a,l)),a={cache:Mu()},t.payload=a;return}a=a.return}}function $1(t,a,l){var o=An();l={lane:o,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},eo(t)?Bg(a,l):(l=pu(t,a,l,o),l!==null&&(_n(l,t,o),Lg(l,a,o)))}function Ig(t,a,l){var o=An();Nl(t,a,l,o)}function Nl(t,a,l,o){var f={lane:o,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(eo(t))Bg(a,f);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var x=a.lastRenderedState,T=g(x,l);if(f.hasEagerState=!0,f.eagerState=T,Mn(T,x))return Or(t,a,f,0),ht===null&&Ar(),!1}catch{}if(l=pu(t,a,f,o),l!==null)return _n(l,t,o),Lg(l,a,o),!0}return!1}function Ju(t,a,l,o){if(o={lane:2,revertLane:Rd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},eo(t)){if(a)throw Error(i(479))}else a=pu(t,l,o,2),a!==null&&_n(a,t,2)}function eo(t){var a=t.alternate;return t===Re||a!==null&&a===Re}function Bg(t,a){yi=Yr=!0;var l=t.pending;l===null?a.next=a:(a.next=l.next,l.next=a),t.pending=a}function Lg(t,a,l){if((l&4194048)!==0){var o=a.lanes;o&=t.pendingLanes,l|=o,a.lanes=l,Ve(t,l)}}var Ml={readContext:ln,use:Wr,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct};Ml.useEffectEvent=Ct;var qg={readContext:ln,use:Wr,useCallback:function(t,a){return gn().memoizedState=[t,a===void 0?null:a],t},useContext:ln,useEffect:_g,useImperativeHandle:function(t,a,l){l=l!=null?l.concat([t]):null,Qr(4194308,4,Mg.bind(null,a,t),l)},useLayoutEffect:function(t,a){return Qr(4194308,4,t,a)},useInsertionEffect:function(t,a){Qr(4,2,t,a)},useMemo:function(t,a){var l=gn();a=a===void 0?null:a;var o=t();if(Ps){It(!0);try{t()}finally{It(!1)}}return l.memoizedState=[o,a],o},useReducer:function(t,a,l){var o=gn();if(l!==void 0){var f=l(a);if(Ps){It(!0);try{l(a)}finally{It(!1)}}}else f=a;return o.memoizedState=o.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},o.queue=t,t=t.dispatch=$1.bind(null,Re,t),[o.memoizedState,t]},useRef:function(t){var a=gn();return t={current:t},a.memoizedState=t},useState:function(t){t=Gu(t);var a=t.queue,l=Ig.bind(null,Re,a);return a.dispatch=l,[t.memoizedState,l]},useDebugValue:Ku,useDeferredValue:function(t,a){var l=gn();return Wu(l,t,a)},useTransition:function(){var t=Gu(!1);return t=kg.bind(null,Re,t.queue,!0,!1),gn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,l){var o=Re,f=gn();if(Ze){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),ht===null)throw Error(i(349));($e&127)!==0||rg(o,a,l)}f.memoizedState=l;var g={value:l,getSnapshot:a};return f.queue=g,_g(cg.bind(null,o,g,t),[t]),o.flags|=2048,xi(9,{destroy:void 0},og.bind(null,o,g,l,a),null),l},useId:function(){var t=gn(),a=ht.identifierPrefix;if(Ze){var l=la,o=ia;l=(o&~(1<<32-Nt(o)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Vr++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=z1++,a="_"+a+"r_"+l.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:Qu,useFormState:yg,useActionState:yg,useOptimistic:function(t){var a=gn();a.memoizedState=a.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Ju.bind(null,Re,!0,l),l.dispatch=a,[t,a]},useMemoCache:Hu,useCacheRefresh:function(){return gn().memoizedState=U1.bind(null,Re)},useEffectEvent:function(t){var a=gn(),l={impl:t};return a.memoizedState=l,function(){if((tt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},ed={readContext:ln,use:Wr,useCallback:Cg,useContext:ln,useEffect:Vu,useImperativeHandle:jg,useInsertionEffect:Tg,useLayoutEffect:Ng,useMemo:Dg,useReducer:Xr,useRef:wg,useState:function(){return Xr(_a)},useDebugValue:Ku,useDeferredValue:function(t,a){var l=zt();return Rg(l,ot.memoizedState,t,a)},useTransition:function(){var t=Xr(_a)[0],a=zt().memoizedState;return[typeof t=="boolean"?t:Tl(t),a]},useSyncExternalStore:lg,useId:zg,useHostTransitionStatus:Qu,useFormState:bg,useActionState:bg,useOptimistic:function(t,a){var l=zt();return fg(l,ot,t,a)},useMemoCache:Hu,useCacheRefresh:Pg};ed.useEffectEvent=Eg;var Ug={readContext:ln,use:Wr,useCallback:Cg,useContext:ln,useEffect:Vu,useImperativeHandle:jg,useInsertionEffect:Tg,useLayoutEffect:Ng,useMemo:Dg,useReducer:Fu,useRef:wg,useState:function(){return Fu(_a)},useDebugValue:Ku,useDeferredValue:function(t,a){var l=zt();return ot===null?Wu(l,t,a):Rg(l,ot.memoizedState,t,a)},useTransition:function(){var t=Fu(_a)[0],a=zt().memoizedState;return[typeof t=="boolean"?t:Tl(t),a]},useSyncExternalStore:lg,useId:zg,useHostTransitionStatus:Qu,useFormState:Sg,useActionState:Sg,useOptimistic:function(t,a){var l=zt();return ot!==null?fg(l,ot,t,a):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:Hu,useCacheRefresh:Pg};Ug.useEffectEvent=Eg;function td(t,a,l,o){a=t.memoizedState,l=l(o,a),l=l==null?a:y({},a,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var nd={enqueueSetState:function(t,a,l){t=t._reactInternals;var o=An(),f=Va(o);f.payload=a,l!=null&&(f.callback=l),a=Ka(t,f,o),a!==null&&(_n(a,t,o),Sl(a,t,o))},enqueueReplaceState:function(t,a,l){t=t._reactInternals;var o=An(),f=Va(o);f.tag=1,f.payload=a,l!=null&&(f.callback=l),a=Ka(t,f,o),a!==null&&(_n(a,t,o),Sl(a,t,o))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var l=An(),o=Va(l);o.tag=2,a!=null&&(o.callback=a),a=Ka(t,o,l),a!==null&&(_n(a,t,l),Sl(a,t,l))}};function $g(t,a,l,o,f,g,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,g,x):a.prototype&&a.prototype.isPureReactComponent?!hl(l,o)||!hl(f,g):!0}function Hg(t,a,l,o){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,o),a.state!==t&&nd.enqueueReplaceState(a,a.state,null)}function Is(t,a){var l=a;if("ref"in a){l={};for(var o in a)o!=="ref"&&(l[o]=a[o])}if(t=t.defaultProps){l===a&&(l=y({},l));for(var f in t)l[f]===void 0&&(l[f]=t[f])}return l}function Zg(t){kr(t)}function Fg(t){console.error(t)}function Gg(t){kr(t)}function to(t,a){try{var l=t.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(o){setTimeout(function(){throw o})}}function Yg(t,a,l){try{var o=t.onCaughtError;o(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function ad(t,a,l){return l=Va(l),l.tag=3,l.payload={element:null},l.callback=function(){to(t,a)},l}function Vg(t){return t=Va(t),t.tag=3,t}function Kg(t,a,l,o){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;t.payload=function(){return f(g)},t.callback=function(){Yg(a,l,o)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){Yg(a,l,o),typeof f!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var T=o.stack;this.componentDidCatch(o.value,{componentStack:T!==null?T:""})})}function H1(t,a,l,o,f){if(l.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(a=l.alternate,a!==null&&fi(a,l,f,!0),l=Cn.current,l!==null){switch(l.tag){case 31:case 13:return Fn===null?mo():l.alternate===null&&Dt===0&&(Dt=3),l.flags&=-257,l.flags|=65536,l.lanes=f,o===$r?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([o]):a.add(o),jd(t,o,f)),!1;case 22:return l.flags|=65536,o===$r?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([o])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([o]):l.add(o)),jd(t,o,f)),!1}throw Error(i(435,l.tag))}return jd(t,o,f),mo(),!1}if(Ze)return a=Cn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,o!==wu&&(t=Error(i(422),{cause:o}),pl(Un(t,l)))):(o!==wu&&(a=Error(i(423),{cause:o}),pl(Un(a,l))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,o=Un(o,l),f=ad(t.stateNode,o,f),Au(t,f),Dt!==4&&(Dt=2)),!1;var g=Error(i(520),{cause:o});if(g=Un(g,l),zl===null?zl=[g]:zl.push(g),Dt!==4&&(Dt=2),a===null)return!0;o=Un(o,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,t=f&-f,l.lanes|=t,t=ad(l.stateNode,o,t),Au(l,t),!1;case 1:if(a=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ts===null||!ts.has(g))))return l.flags|=65536,f&=-f,l.lanes|=f,f=Vg(f),Kg(f,t,l,o),Au(l,f),!1}l=l.return}while(l!==null);return!1}var sd=Error(i(461)),Ut=!1;function rn(t,a,l,o){a.child=t===null?Jm(a,null,l,o):zs(a,t.child,l,o)}function Wg(t,a,l,o,f){l=l.render;var g=a.ref;if("ref"in o){var x={};for(var T in o)T!=="ref"&&(x[T]=o[T])}else x=o;return Rs(a),o=Lu(t,a,l,x,g,f),T=qu(),t!==null&&!Ut?(Uu(t,a,f),Ea(t,a,f)):(Ze&&T&&xu(a),a.flags|=1,rn(t,a,o,f),a.child)}function Xg(t,a,l,o,f){if(t===null){var g=l.type;return typeof g=="function"&&!vu(g)&&g.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=g,Qg(t,a,g,o,f)):(t=Pr(l.type,null,o,a,a.mode,f),t.ref=a.ref,t.return=a,a.child=t)}if(g=t.child,!fd(t,f)){var x=g.memoizedProps;if(l=l.compare,l=l!==null?l:hl,l(x,o)&&t.ref===a.ref)return Ea(t,a,f)}return a.flags|=1,t=ya(g,o),t.ref=a.ref,t.return=a,a.child=t}function Qg(t,a,l,o,f){if(t!==null){var g=t.memoizedProps;if(hl(g,o)&&t.ref===a.ref)if(Ut=!1,a.pendingProps=o=g,fd(t,f))(t.flags&131072)!==0&&(Ut=!0);else return a.lanes=t.lanes,Ea(t,a,f)}return id(t,a,l,o,f)}function Jg(t,a,l,o){var f=o.children,g=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((a.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,t!==null){for(o=a.child=t.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~g}else o=0,a.child=null;return ep(t,a,g,l,o)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&qr(a,g!==null?g.cachePool:null),g!==null?ng(a,g):zu(),ag(a);else return o=a.lanes=536870912,ep(t,a,g!==null?g.baseLanes|l:l,l,o)}else g!==null?(qr(a,g.cachePool),ng(a,g),Xa(),a.memoizedState=null):(t!==null&&qr(a,null),zu(),Xa());return rn(t,a,f,l),a.child}function jl(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function ep(t,a,l,o,f){var g=Cu();return g=g===null?null:{parent:Lt._currentValue,pool:g},a.memoizedState={baseLanes:l,cachePool:g},t!==null&&qr(a,null),zu(),ag(a),t!==null&&fi(t,a,o,!0),a.childLanes=f,null}function no(t,a){return a=so({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function tp(t,a,l){return zs(a,t.child,null,l),t=no(a,a.pendingProps),t.flags|=2,Dn(a),a.memoizedState=null,t}function Z1(t,a,l){var o=a.pendingProps,f=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(Ze){if(o.mode==="hidden")return t=no(a,o),a.lanes=536870912,jl(null,t);if(Iu(a),(t=bt)?(t=hv(t,Zn),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Ha!==null?{id:ia,overflow:la}:null,retryLane:536870912,hydrationErrors:null},l=Bm(t),l.return=a,a.child=l,sn=a,bt=null)):t=null,t===null)throw Fa(a);return a.lanes=536870912,null}return no(a,o)}var g=t.memoizedState;if(g!==null){var x=g.dehydrated;if(Iu(a),f)if(a.flags&256)a.flags&=-257,a=tp(t,a,l);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(i(558));else if(Ut||fi(t,a,l,!1),f=(l&t.childLanes)!==0,Ut||f){if(o=ht,o!==null&&(x=vt(o,l),x!==0&&x!==g.retryLane))throw g.retryLane=x,Ms(t,x),_n(o,t,x),sd;mo(),a=tp(t,a,l)}else t=g.treeContext,bt=Gn(x.nextSibling),sn=a,Ze=!0,Za=null,Zn=!1,t!==null&&Um(a,t),a=no(a,o),a.flags|=4096;return a}return t=ya(t.child,{mode:o.mode,children:o.children}),t.ref=a.ref,a.child=t,t.return=a,t}function ao(t,a){var l=a.ref;if(l===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(t===null||t.ref!==l)&&(a.flags|=4194816)}}function id(t,a,l,o,f){return Rs(a),l=Lu(t,a,l,o,void 0,f),o=qu(),t!==null&&!Ut?(Uu(t,a,f),Ea(t,a,f)):(Ze&&o&&xu(a),a.flags|=1,rn(t,a,l,f),a.child)}function np(t,a,l,o,f,g){return Rs(a),a.updateQueue=null,l=ig(a,o,l,f),sg(t),o=qu(),t!==null&&!Ut?(Uu(t,a,g),Ea(t,a,g)):(Ze&&o&&xu(a),a.flags|=1,rn(t,a,l,g),a.child)}function ap(t,a,l,o,f){if(Rs(a),a.stateNode===null){var g=oi,x=l.contextType;typeof x=="object"&&x!==null&&(g=ln(x)),g=new l(o,g),a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=nd,a.stateNode=g,g._reactInternals=a,g=a.stateNode,g.props=o,g.state=a.memoizedState,g.refs={},Ru(a),x=l.contextType,g.context=typeof x=="object"&&x!==null?ln(x):oi,g.state=a.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(td(a,l,x,o),g.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(x=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),x!==g.state&&nd.enqueueReplaceState(g,g.state,null),_l(a,o,g,f),wl(),g.state=a.memoizedState),typeof g.componentDidMount=="function"&&(a.flags|=4194308),o=!0}else if(t===null){g=a.stateNode;var T=a.memoizedProps,O=Is(l,T);g.props=O;var F=g.context,Q=l.contextType;x=oi,typeof Q=="object"&&Q!==null&&(x=ln(Q));var ie=l.getDerivedStateFromProps;Q=typeof ie=="function"||typeof g.getSnapshotBeforeUpdate=="function",T=a.pendingProps!==T,Q||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T||F!==x)&&Hg(a,g,o,x),Ya=!1;var G=a.memoizedState;g.state=G,_l(a,o,g,f),wl(),F=a.memoizedState,T||G!==F||Ya?(typeof ie=="function"&&(td(a,l,ie,o),F=a.memoizedState),(O=Ya||$g(a,l,O,o,G,F,x))?(Q||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=F),g.props=o,g.state=F,g.context=x,o=O):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{g=a.stateNode,ku(t,a),x=a.memoizedProps,Q=Is(l,x),g.props=Q,ie=a.pendingProps,G=g.context,F=l.contextType,O=oi,typeof F=="object"&&F!==null&&(O=ln(F)),T=l.getDerivedStateFromProps,(F=typeof T=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==ie||G!==O)&&Hg(a,g,o,O),Ya=!1,G=a.memoizedState,g.state=G,_l(a,o,g,f),wl();var W=a.memoizedState;x!==ie||G!==W||Ya||t!==null&&t.dependencies!==null&&Br(t.dependencies)?(typeof T=="function"&&(td(a,l,T,o),W=a.memoizedState),(Q=Ya||$g(a,l,Q,o,G,W,O)||t!==null&&t.dependencies!==null&&Br(t.dependencies))?(F||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,W,O),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,W,O)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=W),g.props=o,g.state=W,g.context=O,o=Q):(typeof g.componentDidUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(a.flags|=1024),o=!1)}return g=o,ao(t,a),o=(a.flags&128)!==0,g||o?(g=a.stateNode,l=o&&typeof l.getDerivedStateFromError!="function"?null:g.render(),a.flags|=1,t!==null&&o?(a.child=zs(a,t.child,null,f),a.child=zs(a,null,l,f)):rn(t,a,l,f),a.memoizedState=g.state,t=a.child):t=Ea(t,a,f),t}function sp(t,a,l,o){return Cs(),a.flags|=256,rn(t,a,l,o),a.child}var ld={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function rd(t){return{baseLanes:t,cachePool:Ym()}}function od(t,a,l){return t=t!==null?t.childLanes&~l:0,a&&(t|=kn),t}function ip(t,a,l){var o=a.pendingProps,f=!1,g=(a.flags&128)!==0,x;if((x=g)||(x=t!==null&&t.memoizedState===null?!1:(Ot.current&2)!==0),x&&(f=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,t===null){if(Ze){if(f?Wa(a):Xa(),(t=bt)?(t=hv(t,Zn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Ha!==null?{id:ia,overflow:la}:null,retryLane:536870912,hydrationErrors:null},l=Bm(t),l.return=a,a.child=l,sn=a,bt=null)):t=null,t===null)throw Fa(a);return Zd(t)?a.lanes=32:a.lanes=536870912,null}var T=o.children;return o=o.fallback,f?(Xa(),f=a.mode,T=so({mode:"hidden",children:T},f),o=js(o,f,l,null),T.return=a,o.return=a,T.sibling=o,a.child=T,o=a.child,o.memoizedState=rd(l),o.childLanes=od(t,x,l),a.memoizedState=ld,jl(null,o)):(Wa(a),cd(a,T))}var O=t.memoizedState;if(O!==null&&(T=O.dehydrated,T!==null)){if(g)a.flags&256?(Wa(a),a.flags&=-257,a=ud(t,a,l)):a.memoizedState!==null?(Xa(),a.child=t.child,a.flags|=128,a=null):(Xa(),T=o.fallback,f=a.mode,o=so({mode:"visible",children:o.children},f),T=js(T,f,l,null),T.flags|=2,o.return=a,T.return=a,o.sibling=T,a.child=o,zs(a,t.child,null,l),o=a.child,o.memoizedState=rd(l),o.childLanes=od(t,x,l),a.memoizedState=ld,a=jl(null,o));else if(Wa(a),Zd(T)){if(x=T.nextSibling&&T.nextSibling.dataset,x)var F=x.dgst;x=F,o=Error(i(419)),o.stack="",o.digest=x,pl({value:o,source:null,stack:null}),a=ud(t,a,l)}else if(Ut||fi(t,a,l,!1),x=(l&t.childLanes)!==0,Ut||x){if(x=ht,x!==null&&(o=vt(x,l),o!==0&&o!==O.retryLane))throw O.retryLane=o,Ms(t,o),_n(x,t,o),sd;Hd(T)||mo(),a=ud(t,a,l)}else Hd(T)?(a.flags|=192,a.child=t.child,a=null):(t=O.treeContext,bt=Gn(T.nextSibling),sn=a,Ze=!0,Za=null,Zn=!1,t!==null&&Um(a,t),a=cd(a,o.children),a.flags|=4096);return a}return f?(Xa(),T=o.fallback,f=a.mode,O=t.child,F=O.sibling,o=ya(O,{mode:"hidden",children:o.children}),o.subtreeFlags=O.subtreeFlags&65011712,F!==null?T=ya(F,T):(T=js(T,f,l,null),T.flags|=2),T.return=a,o.return=a,o.sibling=T,a.child=o,jl(null,o),o=a.child,T=t.child.memoizedState,T===null?T=rd(l):(f=T.cachePool,f!==null?(O=Lt._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=Ym(),T={baseLanes:T.baseLanes|l,cachePool:f}),o.memoizedState=T,o.childLanes=od(t,x,l),a.memoizedState=ld,jl(t.child,o)):(Wa(a),l=t.child,t=l.sibling,l=ya(l,{mode:"visible",children:o.children}),l.return=a,l.sibling=null,t!==null&&(x=a.deletions,x===null?(a.deletions=[t],a.flags|=16):x.push(t)),a.child=l,a.memoizedState=null,l)}function cd(t,a){return a=so({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function so(t,a){return t=jn(22,t,null,a),t.lanes=0,t}function ud(t,a,l){return zs(a,t.child,null,l),t=cd(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function lp(t,a,l){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a),Tu(t.return,a,l)}function dd(t,a,l,o,f,g){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:l,tailMode:f,treeForkCount:g}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=o,x.tail=l,x.tailMode=f,x.treeForkCount=g)}function rp(t,a,l){var o=a.pendingProps,f=o.revealOrder,g=o.tail;o=o.children;var x=Ot.current,T=(x&2)!==0;if(T?(x=x&1|2,a.flags|=128):x&=1,J(Ot,x),rn(t,a,o,l),o=Ze?gl:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lp(t,l,a);else if(t.tag===19)lp(t,l,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(l=a.child,f=null;l!==null;)t=l.alternate,t!==null&&Gr(t)===null&&(f=l),l=l.sibling;l=f,l===null?(f=a.child,a.child=null):(f=l.sibling,l.sibling=null),dd(a,!1,f,l,g,o);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=a.child,a.child=null;f!==null;){if(t=f.alternate,t!==null&&Gr(t)===null){a.child=f;break}t=f.sibling,f.sibling=l,l=f,f=t}dd(a,!0,l,null,g,o);break;case"together":dd(a,!1,null,null,void 0,o);break;default:a.memoizedState=null}return a.child}function Ea(t,a,l){if(t!==null&&(a.dependencies=t.dependencies),es|=a.lanes,(l&a.childLanes)===0)if(t!==null){if(fi(t,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(i(153));if(a.child!==null){for(t=a.child,l=ya(t,t.pendingProps),a.child=l,l.return=a;t.sibling!==null;)t=t.sibling,l=l.sibling=ya(t,t.pendingProps),l.return=a;l.sibling=null}return a.child}function fd(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Br(t)))}function F1(t,a,l){switch(a.tag){case 3:xe(a,a.stateNode.containerInfo),Ga(a,Lt,t.memoizedState.cache),Cs();break;case 27:case 5:Ee(a);break;case 4:xe(a,a.stateNode.containerInfo);break;case 10:Ga(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Iu(a),null;break;case 13:var o=a.memoizedState;if(o!==null)return o.dehydrated!==null?(Wa(a),a.flags|=128,null):(l&a.child.childLanes)!==0?ip(t,a,l):(Wa(a),t=Ea(t,a,l),t!==null?t.sibling:null);Wa(a);break;case 19:var f=(t.flags&128)!==0;if(o=(l&a.childLanes)!==0,o||(fi(t,a,l,!1),o=(l&a.childLanes)!==0),f){if(o)return rp(t,a,l);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),J(Ot,Ot.current),o)break;return null;case 22:return a.lanes=0,Jg(t,a,l,a.pendingProps);case 24:Ga(a,Lt,t.memoizedState.cache)}return Ea(t,a,l)}function op(t,a,l){if(t!==null)if(t.memoizedProps!==a.pendingProps)Ut=!0;else{if(!fd(t,l)&&(a.flags&128)===0)return Ut=!1,F1(t,a,l);Ut=(t.flags&131072)!==0}else Ut=!1,Ze&&(a.flags&1048576)!==0&&qm(a,gl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var o=a.pendingProps;if(t=As(a.elementType),a.type=t,typeof t=="function")vu(t)?(o=Is(t,o),a.tag=1,a=ap(null,a,t,o,l)):(a.tag=0,a=id(null,a,t,o,l));else{if(t!=null){var f=t.$$typeof;if(f===B){a.tag=11,a=Wg(null,a,t,o,l);break e}else if(f===j){a.tag=14,a=Xg(null,a,t,o,l);break e}}throw a=$(t)||t,Error(i(306,a,""))}}return a;case 0:return id(t,a,a.type,a.pendingProps,l);case 1:return o=a.type,f=Is(o,a.pendingProps),ap(t,a,o,f,l);case 3:e:{if(xe(a,a.stateNode.containerInfo),t===null)throw Error(i(387));o=a.pendingProps;var g=a.memoizedState;f=g.element,ku(t,a),_l(a,o,null,l);var x=a.memoizedState;if(o=x.cache,Ga(a,Lt,o),o!==g.cache&&Nu(a,[Lt],l,!0),wl(),o=x.element,g.isDehydrated)if(g={element:o,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=g,a.memoizedState=g,a.flags&256){a=sp(t,a,o,l);break e}else if(o!==f){f=Un(Error(i(424)),a),pl(f),a=sp(t,a,o,l);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,bt=Gn(t.firstChild),sn=a,Ze=!0,Za=null,Zn=!0,l=Jm(a,null,o,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Cs(),o===f){a=Ea(t,a,l);break e}rn(t,a,o,l)}a=a.child}return a;case 26:return ao(t,a),t===null?(l=bv(a.type,null,a.pendingProps,null))?a.memoizedState=l:Ze||(l=a.type,t=a.pendingProps,o=So(re.current).createElement(l),o[yt]=a,o[Ke]=t,on(o,l,t),Xt(o),a.stateNode=o):a.memoizedState=bv(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Ee(a),t===null&&Ze&&(o=a.stateNode=pv(a.type,a.pendingProps,re.current),sn=a,Zn=!0,f=bt,is(a.type)?(Fd=f,bt=Gn(o.firstChild)):bt=f),rn(t,a,a.pendingProps.children,l),ao(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Ze&&((f=o=bt)&&(o=Sw(o,a.type,a.pendingProps,Zn),o!==null?(a.stateNode=o,sn=a,bt=Gn(o.firstChild),Zn=!1,f=!0):f=!1),f||Fa(a)),Ee(a),f=a.type,g=a.pendingProps,x=t!==null?t.memoizedProps:null,o=g.children,qd(f,g)?o=null:x!==null&&qd(f,x)&&(a.flags|=32),a.memoizedState!==null&&(f=Lu(t,a,P1,null,null,l),Hl._currentValue=f),ao(t,a),rn(t,a,o,l),a.child;case 6:return t===null&&Ze&&((t=l=bt)&&(l=ww(l,a.pendingProps,Zn),l!==null?(a.stateNode=l,sn=a,bt=null,t=!0):t=!1),t||Fa(a)),null;case 13:return ip(t,a,l);case 4:return xe(a,a.stateNode.containerInfo),o=a.pendingProps,t===null?a.child=zs(a,null,o,l):rn(t,a,o,l),a.child;case 11:return Wg(t,a,a.type,a.pendingProps,l);case 7:return rn(t,a,a.pendingProps,l),a.child;case 8:return rn(t,a,a.pendingProps.children,l),a.child;case 12:return rn(t,a,a.pendingProps.children,l),a.child;case 10:return o=a.pendingProps,Ga(a,a.type,o.value),rn(t,a,o.children,l),a.child;case 9:return f=a.type._context,o=a.pendingProps.children,Rs(a),f=ln(f),o=o(f),a.flags|=1,rn(t,a,o,l),a.child;case 14:return Xg(t,a,a.type,a.pendingProps,l);case 15:return Qg(t,a,a.type,a.pendingProps,l);case 19:return rp(t,a,l);case 31:return Z1(t,a,l);case 22:return Jg(t,a,l,a.pendingProps);case 24:return Rs(a),o=ln(Lt),t===null?(f=Cu(),f===null&&(f=ht,g=Mu(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=l),f=g),a.memoizedState={parent:o,cache:f},Ru(a),Ga(a,Lt,f)):((t.lanes&l)!==0&&(ku(t,a),_l(a,null,null,l),wl()),f=t.memoizedState,g=a.memoizedState,f.parent!==o?(f={parent:o,cache:o},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),Ga(a,Lt,o)):(o=g.cache,Ga(a,Lt,o),o!==f.cache&&Nu(a,[Lt],l,!0))),rn(t,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Ta(t){t.flags|=4}function hd(t,a,l,o,f){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(zp())t.flags|=8192;else throw Os=$r,Du}else t.flags&=-16777217}function cp(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Ev(a))if(zp())t.flags|=8192;else throw Os=$r,Du}function io(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?be():536870912,t.lanes|=a,Ei|=a)}function Cl(t,a){if(!Ze)switch(t.tailMode){case"hidden":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var o=null;l!==null;)l.alternate!==null&&(o=l),l=l.sibling;o===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function xt(t){var a=t.alternate!==null&&t.alternate.child===t.child,l=0,o=0;if(a)for(var f=t.child;f!==null;)l|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)l|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=o,t.childLanes=l,a}function G1(t,a,l){var o=a.pendingProps;switch(Su(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(a),null;case 1:return xt(a),null;case 3:return l=a.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),Sa(Lt),ge(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(di(a)?Ta(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,_u())),xt(a),null;case 26:var f=a.type,g=a.memoizedState;return t===null?(Ta(a),g!==null?(xt(a),cp(a,g)):(xt(a),hd(a,f,null,o,l))):g?g!==t.memoizedState?(Ta(a),xt(a),cp(a,g)):(xt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==o&&Ta(a),xt(a),hd(a,f,t,o,l)),null;case 27:if(Be(a),l=re.current,f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Ta(a);else{if(!o){if(a.stateNode===null)throw Error(i(166));return xt(a),null}t=oe.current,di(a)?$m(a):(t=pv(f,o,l),a.stateNode=t,Ta(a))}return xt(a),null;case 5:if(Be(a),f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Ta(a);else{if(!o){if(a.stateNode===null)throw Error(i(166));return xt(a),null}if(g=oe.current,di(a))$m(a);else{var x=So(re.current);switch(g){case 1:g=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=x.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof o.is=="string"?x.createElement("select",{is:o.is}):x.createElement("select"),o.multiple?g.multiple=!0:o.size&&(g.size=o.size);break;default:g=typeof o.is=="string"?x.createElement(f,{is:o.is}):x.createElement(f)}}g[yt]=a,g[Ke]=o;e:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)g.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break e;for(;x.sibling===null;){if(x.return===null||x.return===a)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=g;e:switch(on(g,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ta(a)}}return xt(a),hd(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,l),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==o&&Ta(a);else{if(typeof o!="string"&&a.stateNode===null)throw Error(i(166));if(t=re.current,di(a)){if(t=a.stateNode,l=a.memoizedProps,o=null,f=sn,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}t[yt]=a,t=!!(t.nodeValue===l||o!==null&&o.suppressHydrationWarning===!0||iv(t.nodeValue,l)),t||Fa(a,!0)}else t=So(t).createTextNode(o),t[yt]=a,a.stateNode=t}return xt(a),null;case 31:if(l=a.memoizedState,t===null||t.memoizedState!==null){if(o=di(a),l!==null){if(t===null){if(!o)throw Error(i(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[yt]=a}else Cs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;xt(a),t=!1}else l=_u(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return a.flags&256?(Dn(a),a):(Dn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return xt(a),null;case 13:if(o=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=di(a),o!==null&&o.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[yt]=a}else Cs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;xt(a),f=!1}else f=_u(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(Dn(a),a):(Dn(a),null)}return Dn(a),(a.flags&128)!==0?(a.lanes=l,a):(l=o!==null,t=t!==null&&t.memoizedState!==null,l&&(o=a.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),g=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==f&&(o.flags|=2048)),l!==t&&l&&(a.child.flags|=8192),io(a,a.updateQueue),xt(a),null);case 4:return ge(),t===null&&zd(a.stateNode.containerInfo),xt(a),null;case 10:return Sa(a.type),xt(a),null;case 19:if(I(Ot),o=a.memoizedState,o===null)return xt(a),null;if(f=(a.flags&128)!==0,g=o.rendering,g===null)if(f)Cl(o,!1);else{if(Dt!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(g=Gr(t),g!==null){for(a.flags|=128,Cl(o,!1),t=g.updateQueue,a.updateQueue=t,io(a,t),a.subtreeFlags=0,t=l,l=a.child;l!==null;)Im(l,t),l=l.sibling;return J(Ot,Ot.current&1|2),Ze&&ba(a,o.treeForkCount),a.child}t=t.sibling}o.tail!==null&&Pe()>uo&&(a.flags|=128,f=!0,Cl(o,!1),a.lanes=4194304)}else{if(!f)if(t=Gr(g),t!==null){if(a.flags|=128,f=!0,t=t.updateQueue,a.updateQueue=t,io(a,t),Cl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!g.alternate&&!Ze)return xt(a),null}else 2*Pe()-o.renderingStartTime>uo&&l!==536870912&&(a.flags|=128,f=!0,Cl(o,!1),a.lanes=4194304);o.isBackwards?(g.sibling=a.child,a.child=g):(t=o.last,t!==null?t.sibling=g:a.child=g,o.last=g)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Pe(),t.sibling=null,l=Ot.current,J(Ot,f?l&1|2:l&1),Ze&&ba(a,o.treeForkCount),t):(xt(a),null);case 22:case 23:return Dn(a),Pu(),o=a.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(a.flags|=8192):o&&(a.flags|=8192),o?(l&536870912)!==0&&(a.flags&128)===0&&(xt(a),a.subtreeFlags&6&&(a.flags|=8192)):xt(a),l=a.updateQueue,l!==null&&io(a,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==l&&(a.flags|=2048),t!==null&&I(ks),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Sa(Lt),xt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function Y1(t,a){switch(Su(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Sa(Lt),ge(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Be(a),null;case 31:if(a.memoizedState!==null){if(Dn(a),a.alternate===null)throw Error(i(340));Cs()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(Dn(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Cs()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return I(Ot),null;case 4:return ge(),null;case 10:return Sa(a.type),null;case 22:case 23:return Dn(a),Pu(),t!==null&&I(ks),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Sa(Lt),null;case 25:return null;default:return null}}function up(t,a){switch(Su(a),a.tag){case 3:Sa(Lt),ge();break;case 26:case 27:case 5:Be(a);break;case 4:ge();break;case 31:a.memoizedState!==null&&Dn(a);break;case 13:Dn(a);break;case 19:I(Ot);break;case 10:Sa(a.type);break;case 22:case 23:Dn(a),Pu(),t!==null&&I(ks);break;case 24:Sa(Lt)}}function Dl(t,a){try{var l=a.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var f=o.next;l=f;do{if((l.tag&t)===t){o=void 0;var g=l.create,x=l.inst;o=g(),x.destroy=o}l=l.next}while(l!==f)}}catch(T){st(a,a.return,T)}}function Qa(t,a,l){try{var o=a.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var g=f.next;o=g;do{if((o.tag&t)===t){var x=o.inst,T=x.destroy;if(T!==void 0){x.destroy=void 0,f=a;var O=l,F=T;try{F()}catch(Q){st(f,O,Q)}}}o=o.next}while(o!==g)}}catch(Q){st(a,a.return,Q)}}function dp(t){var a=t.updateQueue;if(a!==null){var l=t.stateNode;try{tg(a,l)}catch(o){st(t,t.return,o)}}}function fp(t,a,l){l.props=Is(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(o){st(t,a,o)}}function Rl(t,a){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof l=="function"?t.refCleanup=l(o):l.current=o}}catch(f){st(t,a,f)}}function ra(t,a){var l=t.ref,o=t.refCleanup;if(l!==null)if(typeof o=="function")try{o()}catch(f){st(t,a,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){st(t,a,f)}else l.current=null}function hp(t){var a=t.type,l=t.memoizedProps,o=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&o.focus();break e;case"img":l.src?o.src=l.src:l.srcSet&&(o.srcset=l.srcSet)}}catch(f){st(t,t.return,f)}}function md(t,a,l){try{var o=t.stateNode;gw(o,t.type,l,a),o[Ke]=a}catch(f){st(t,t.return,f)}}function mp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&is(t.type)||t.tag===4}function gd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&is(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pd(t,a,l){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(t),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=pa));else if(o!==4&&(o===27&&is(t.type)&&(l=t.stateNode,a=null),t=t.child,t!==null))for(pd(t,a,l),t=t.sibling;t!==null;)pd(t,a,l),t=t.sibling}function lo(t,a,l){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?l.insertBefore(t,a):l.appendChild(t);else if(o!==4&&(o===27&&is(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(lo(t,a,l),t=t.sibling;t!==null;)lo(t,a,l),t=t.sibling}function gp(t){var a=t.stateNode,l=t.memoizedProps;try{for(var o=t.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);on(a,o,l),a[yt]=t,a[Ke]=l}catch(g){st(t,t.return,g)}}var Na=!1,$t=!1,vd=!1,pp=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function V1(t,a){if(t=t.containerInfo,Bd=jo,t=jm(t),uu(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var o=l.getSelection&&l.getSelection();if(o&&o.rangeCount!==0){l=o.anchorNode;var f=o.anchorOffset,g=o.focusNode;o=o.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var x=0,T=-1,O=-1,F=0,Q=0,ie=t,G=null;t:for(;;){for(var W;ie!==l||f!==0&&ie.nodeType!==3||(T=x+f),ie!==g||o!==0&&ie.nodeType!==3||(O=x+o),ie.nodeType===3&&(x+=ie.nodeValue.length),(W=ie.firstChild)!==null;)G=ie,ie=W;for(;;){if(ie===t)break t;if(G===l&&++F===f&&(T=x),G===g&&++Q===o&&(O=x),(W=ie.nextSibling)!==null)break;ie=G,G=ie.parentNode}ie=W}l=T===-1||O===-1?null:{start:T,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(Ld={focusedElem:t,selectionRange:l},jo=!1,Qt=a;Qt!==null;)if(a=Qt,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Qt=t;else for(;Qt!==null;){switch(a=Qt,g=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)f=t[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&g!==null){t=void 0,l=a,f=g.memoizedProps,g=g.memoizedState,o=l.stateNode;try{var pe=Is(l.type,f);t=o.getSnapshotBeforeUpdate(pe,g),o.__reactInternalSnapshotBeforeUpdate=t}catch(Ne){st(l,l.return,Ne)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,l=t.nodeType,l===9)$d(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":$d(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=a.sibling,t!==null){t.return=a.return,Qt=t;break}Qt=a.return}}function vp(t,a,l){var o=l.flags;switch(l.tag){case 0:case 11:case 15:ja(t,l),o&4&&Dl(5,l);break;case 1:if(ja(t,l),o&4)if(t=l.stateNode,a===null)try{t.componentDidMount()}catch(x){st(l,l.return,x)}else{var f=Is(l.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(f,a,t.__reactInternalSnapshotBeforeUpdate)}catch(x){st(l,l.return,x)}}o&64&&dp(l),o&512&&Rl(l,l.return);break;case 3:if(ja(t,l),o&64&&(t=l.updateQueue,t!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{tg(t,a)}catch(x){st(l,l.return,x)}}break;case 27:a===null&&o&4&&gp(l);case 26:case 5:ja(t,l),a===null&&o&4&&hp(l),o&512&&Rl(l,l.return);break;case 12:ja(t,l);break;case 31:ja(t,l),o&4&&xp(t,l);break;case 13:ja(t,l),o&4&&Sp(t,l),o&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=aw.bind(null,l),_w(t,l))));break;case 22:if(o=l.memoizedState!==null||Na,!o){a=a!==null&&a.memoizedState!==null||$t,f=Na;var g=$t;Na=o,($t=a)&&!g?Ca(t,l,(l.subtreeFlags&8772)!==0):ja(t,l),Na=f,$t=g}break;case 30:break;default:ja(t,l)}}function yp(t){var a=t.alternate;a!==null&&(t.alternate=null,yp(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Ws(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var _t=null,bn=!1;function Ma(t,a,l){for(l=l.child;l!==null;)bp(t,a,l),l=l.sibling}function bp(t,a,l){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(an,l)}catch{}switch(l.tag){case 26:$t||ra(l,a),Ma(t,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:$t||ra(l,a);var o=_t,f=bn;is(l.type)&&(_t=l.stateNode,bn=!1),Ma(t,a,l),ql(l.stateNode),_t=o,bn=f;break;case 5:$t||ra(l,a);case 6:if(o=_t,f=bn,_t=null,Ma(t,a,l),_t=o,bn=f,_t!==null)if(bn)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(l.stateNode)}catch(g){st(l,a,g)}else try{_t.removeChild(l.stateNode)}catch(g){st(l,a,g)}break;case 18:_t!==null&&(bn?(t=_t,dv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),ki(t)):dv(_t,l.stateNode));break;case 4:o=_t,f=bn,_t=l.stateNode.containerInfo,bn=!0,Ma(t,a,l),_t=o,bn=f;break;case 0:case 11:case 14:case 15:Qa(2,l,a),$t||Qa(4,l,a),Ma(t,a,l);break;case 1:$t||(ra(l,a),o=l.stateNode,typeof o.componentWillUnmount=="function"&&fp(l,a,o)),Ma(t,a,l);break;case 21:Ma(t,a,l);break;case 22:$t=(o=$t)||l.memoizedState!==null,Ma(t,a,l),$t=o;break;default:Ma(t,a,l)}}function xp(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ki(t)}catch(l){st(a,a.return,l)}}}function Sp(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ki(t)}catch(l){st(a,a.return,l)}}function K1(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new pp),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new pp),a;default:throw Error(i(435,t.tag))}}function ro(t,a){var l=K1(t);a.forEach(function(o){if(!l.has(o)){l.add(o);var f=sw.bind(null,t,o);o.then(f,f)}})}function xn(t,a){var l=a.deletions;if(l!==null)for(var o=0;o<l.length;o++){var f=l[o],g=t,x=a,T=x;e:for(;T!==null;){switch(T.tag){case 27:if(is(T.type)){_t=T.stateNode,bn=!1;break e}break;case 5:_t=T.stateNode,bn=!1;break e;case 3:case 4:_t=T.stateNode.containerInfo,bn=!0;break e}T=T.return}if(_t===null)throw Error(i(160));bp(g,x,f),_t=null,bn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)wp(a,t),a=a.sibling}var Xn=null;function wp(t,a){var l=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:xn(a,t),Sn(t),o&4&&(Qa(3,t,t.return),Dl(3,t),Qa(5,t,t.return));break;case 1:xn(a,t),Sn(t),o&512&&($t||l===null||ra(l,l.return)),o&64&&Na&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?o:l.concat(o))));break;case 26:var f=Xn;if(xn(a,t),Sn(t),o&512&&($t||l===null||ra(l,l.return)),o&4){var g=l!==null?l.memoizedState:null;if(o=t.memoizedState,l===null)if(o===null)if(t.stateNode===null){e:{o=t.type,l=t.memoizedProps,f=f.ownerDocument||f;t:switch(o){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Ua]||g[yt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(o),f.head.insertBefore(g,f.querySelector("head > title"))),on(g,o,l),g[yt]=t,Xt(g),o=g;break e;case"link":var x=wv("link","href",f).get(o+(l.href||""));if(x){for(var T=0;T<x.length;T++)if(g=x[T],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(T,1);break t}}g=f.createElement(o),on(g,o,l),f.head.appendChild(g);break;case"meta":if(x=wv("meta","content",f).get(o+(l.content||""))){for(T=0;T<x.length;T++)if(g=x[T],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(T,1);break t}}g=f.createElement(o),on(g,o,l),f.head.appendChild(g);break;default:throw Error(i(468,o))}g[yt]=t,Xt(g),o=g}t.stateNode=o}else _v(f,t.type,t.stateNode);else t.stateNode=Sv(f,o,t.memoizedProps);else g!==o?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,o===null?_v(f,t.type,t.stateNode):Sv(f,o,t.memoizedProps)):o===null&&t.stateNode!==null&&md(t,t.memoizedProps,l.memoizedProps)}break;case 27:xn(a,t),Sn(t),o&512&&($t||l===null||ra(l,l.return)),l!==null&&o&4&&md(t,t.memoizedProps,l.memoizedProps);break;case 5:if(xn(a,t),Sn(t),o&512&&($t||l===null||ra(l,l.return)),t.flags&32){f=t.stateNode;try{ti(f,"")}catch(pe){st(t,t.return,pe)}}o&4&&t.stateNode!=null&&(f=t.memoizedProps,md(t,f,l!==null?l.memoizedProps:f)),o&1024&&(vd=!0);break;case 6:if(xn(a,t),Sn(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,l=t.stateNode;try{l.nodeValue=o}catch(pe){st(t,t.return,pe)}}break;case 3:if(Eo=null,f=Xn,Xn=wo(a.containerInfo),xn(a,t),Xn=f,Sn(t),o&4&&l!==null&&l.memoizedState.isDehydrated)try{ki(a.containerInfo)}catch(pe){st(t,t.return,pe)}vd&&(vd=!1,_p(t));break;case 4:o=Xn,Xn=wo(t.stateNode.containerInfo),xn(a,t),Sn(t),Xn=o;break;case 12:xn(a,t),Sn(t);break;case 31:xn(a,t),Sn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ro(t,o)));break;case 13:xn(a,t),Sn(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(co=Pe()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ro(t,o)));break;case 22:f=t.memoizedState!==null;var O=l!==null&&l.memoizedState!==null,F=Na,Q=$t;if(Na=F||f,$t=Q||O,xn(a,t),$t=Q,Na=F,Sn(t),o&8192)e:for(a=t.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(l===null||O||Na||$t||Bs(t)),l=null,a=t;;){if(a.tag===5||a.tag===26){if(l===null){O=l=a;try{if(g=O.stateNode,f)x=g.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{T=O.stateNode;var ie=O.memoizedProps.style,G=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;T.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(pe){st(O,O.return,pe)}}}else if(a.tag===6){if(l===null){O=a;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(pe){st(O,O.return,pe)}}}else if(a.tag===18){if(l===null){O=a;try{var W=O.stateNode;f?fv(W,!0):fv(O.stateNode,!1)}catch(pe){st(O,O.return,pe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}o&4&&(o=t.updateQueue,o!==null&&(l=o.retryQueue,l!==null&&(o.retryQueue=null,ro(t,l))));break;case 19:xn(a,t),Sn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ro(t,o)));break;case 30:break;case 21:break;default:xn(a,t),Sn(t)}}function Sn(t){var a=t.flags;if(a&2){try{for(var l,o=t.return;o!==null;){if(mp(o)){l=o;break}o=o.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var f=l.stateNode,g=gd(t);lo(t,g,f);break;case 5:var x=l.stateNode;l.flags&32&&(ti(x,""),l.flags&=-33);var T=gd(t);lo(t,T,x);break;case 3:case 4:var O=l.stateNode.containerInfo,F=gd(t);pd(t,F,O);break;default:throw Error(i(161))}}catch(Q){st(t,t.return,Q)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function _p(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;_p(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function ja(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)vp(t,a.alternate,a),a=a.sibling}function Bs(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Qa(4,a,a.return),Bs(a);break;case 1:ra(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&fp(a,a.return,l),Bs(a);break;case 27:ql(a.stateNode);case 26:case 5:ra(a,a.return),Bs(a);break;case 22:a.memoizedState===null&&Bs(a);break;case 30:Bs(a);break;default:Bs(a)}t=t.sibling}}function Ca(t,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var o=a.alternate,f=t,g=a,x=g.flags;switch(g.tag){case 0:case 11:case 15:Ca(f,g,l),Dl(4,g);break;case 1:if(Ca(f,g,l),o=g,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){st(o,o.return,F)}if(o=g,f=o.updateQueue,f!==null){var T=o.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)eg(O[f],T)}catch(F){st(o,o.return,F)}}l&&x&64&&dp(g),Rl(g,g.return);break;case 27:gp(g);case 26:case 5:Ca(f,g,l),l&&o===null&&x&4&&hp(g),Rl(g,g.return);break;case 12:Ca(f,g,l);break;case 31:Ca(f,g,l),l&&x&4&&xp(f,g);break;case 13:Ca(f,g,l),l&&x&4&&Sp(f,g);break;case 22:g.memoizedState===null&&Ca(f,g,l),Rl(g,g.return);break;case 30:break;default:Ca(f,g,l)}a=a.sibling}}function yd(t,a){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&vl(l))}function bd(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&vl(t))}function Qn(t,a,l,o){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ep(t,a,l,o),a=a.sibling}function Ep(t,a,l,o){var f=a.flags;switch(a.tag){case 0:case 11:case 15:Qn(t,a,l,o),f&2048&&Dl(9,a);break;case 1:Qn(t,a,l,o);break;case 3:Qn(t,a,l,o),f&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&vl(t)));break;case 12:if(f&2048){Qn(t,a,l,o),t=a.stateNode;try{var g=a.memoizedProps,x=g.id,T=g.onPostCommit;typeof T=="function"&&T(x,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){st(a,a.return,O)}}else Qn(t,a,l,o);break;case 31:Qn(t,a,l,o);break;case 13:Qn(t,a,l,o);break;case 23:break;case 22:g=a.stateNode,x=a.alternate,a.memoizedState!==null?g._visibility&2?Qn(t,a,l,o):kl(t,a):g._visibility&2?Qn(t,a,l,o):(g._visibility|=2,Si(t,a,l,o,(a.subtreeFlags&10256)!==0||!1)),f&2048&&yd(x,a);break;case 24:Qn(t,a,l,o),f&2048&&bd(a.alternate,a);break;default:Qn(t,a,l,o)}}function Si(t,a,l,o,f){for(f=f&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var g=t,x=a,T=l,O=o,F=x.flags;switch(x.tag){case 0:case 11:case 15:Si(g,x,T,O,f),Dl(8,x);break;case 23:break;case 22:var Q=x.stateNode;x.memoizedState!==null?Q._visibility&2?Si(g,x,T,O,f):kl(g,x):(Q._visibility|=2,Si(g,x,T,O,f)),f&&F&2048&&yd(x.alternate,x);break;case 24:Si(g,x,T,O,f),f&&F&2048&&bd(x.alternate,x);break;default:Si(g,x,T,O,f)}a=a.sibling}}function kl(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=t,o=a,f=o.flags;switch(o.tag){case 22:kl(l,o),f&2048&&yd(o.alternate,o);break;case 24:kl(l,o),f&2048&&bd(o.alternate,o);break;default:kl(l,o)}a=a.sibling}}var Al=8192;function wi(t,a,l){if(t.subtreeFlags&Al)for(t=t.child;t!==null;)Tp(t,a,l),t=t.sibling}function Tp(t,a,l){switch(t.tag){case 26:wi(t,a,l),t.flags&Al&&t.memoizedState!==null&&zw(l,Xn,t.memoizedState,t.memoizedProps);break;case 5:wi(t,a,l);break;case 3:case 4:var o=Xn;Xn=wo(t.stateNode.containerInfo),wi(t,a,l),Xn=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Al,Al=16777216,wi(t,a,l),Al=o):wi(t,a,l));break;default:wi(t,a,l)}}function Np(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Ol(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var o=a[l];Qt=o,jp(o,t)}Np(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Mp(t),t=t.sibling}function Mp(t){switch(t.tag){case 0:case 11:case 15:Ol(t),t.flags&2048&&Qa(9,t,t.return);break;case 3:Ol(t);break;case 12:Ol(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,oo(t)):Ol(t);break;default:Ol(t)}}function oo(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var o=a[l];Qt=o,jp(o,t)}Np(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Qa(8,a,a.return),oo(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,oo(a));break;default:oo(a)}t=t.sibling}}function jp(t,a){for(;Qt!==null;){var l=Qt;switch(l.tag){case 0:case 11:case 15:Qa(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var o=l.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:vl(l.memoizedState.cache)}if(o=l.child,o!==null)o.return=l,Qt=o;else e:for(l=t;Qt!==null;){o=Qt;var f=o.sibling,g=o.return;if(yp(o),o===l){Qt=null;break e}if(f!==null){f.return=g,Qt=f;break e}Qt=g}}}var W1={getCacheForType:function(t){var a=ln(Lt),l=a.data.get(t);return l===void 0&&(l=t(),a.data.set(t,l)),l},cacheSignal:function(){return ln(Lt).controller.signal}},X1=typeof WeakMap=="function"?WeakMap:Map,tt=0,ht=null,Le=null,$e=0,at=0,Rn=null,Ja=!1,_i=!1,xd=!1,Da=0,Dt=0,es=0,Ls=0,Sd=0,kn=0,Ei=0,zl=null,wn=null,wd=!1,co=0,Cp=0,uo=1/0,fo=null,ts=null,Yt=0,ns=null,Ti=null,Ra=0,_d=0,Ed=null,Dp=null,Pl=0,Td=null;function An(){return(tt&2)!==0&&$e!==0?$e&-$e:L.T!==null?Rd():hn()}function Rp(){if(kn===0)if(($e&536870912)===0||Ze){var t=fa;fa<<=1,(fa&3932160)===0&&(fa=262144),kn=t}else kn=536870912;return t=Cn.current,t!==null&&(t.flags|=32),kn}function _n(t,a,l){(t===ht&&(at===2||at===9)||t.cancelPendingCommit!==null)&&(Ni(t,0),as(t,$e,kn,!1)),Ye(t,l),((tt&2)===0||t!==ht)&&(t===ht&&((tt&2)===0&&(Ls|=l),Dt===4&&as(t,$e,kn,!1)),oa(t))}function kp(t,a,l){if((tt&6)!==0)throw Error(i(327));var o=!l&&(a&127)===0&&(a&t.expiredLanes)===0||se(t,a),f=o?ew(t,a):Md(t,a,!0),g=o;do{if(f===0){_i&&!o&&as(t,a,0,!1);break}else{if(l=t.current.alternate,g&&!Q1(l)){f=Md(t,a,!1),g=!1;continue}if(f===2){if(g=a,t.errorRecoveryDisabledLanes&g)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var T=t;f=zl;var O=T.current.memoizedState.isDehydrated;if(O&&(Ni(T,x).flags|=256),x=Md(T,x,!1),x!==2){if(xd&&!O){T.errorRecoveryDisabledLanes|=g,Ls|=g,f=4;break e}g=wn,wn=f,g!==null&&(wn===null?wn=g:wn.push.apply(wn,g))}f=x}if(g=!1,f!==2)continue}}if(f===1){Ni(t,0),as(t,a,0,!0);break}e:{switch(o=t,g=f,g){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:as(o,a,kn,!Ja);break e;case 2:wn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(f=co+300-Pe(),10<f)){if(as(o,a,kn,!Ja),Bt(o,0,!0)!==0)break e;Ra=a,o.timeoutHandle=cv(Ap.bind(null,o,l,wn,fo,wd,a,kn,Ls,Ei,Ja,g,"Throttled",-0,0),f);break e}Ap(o,l,wn,fo,wd,a,kn,Ls,Ei,Ja,g,null,-0,0)}}break}while(!0);oa(t)}function Ap(t,a,l,o,f,g,x,T,O,F,Q,ie,G,W){if(t.timeoutHandle=-1,ie=a.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pa},Tp(a,g,ie);var pe=(g&62914560)===g?co-Pe():(g&4194048)===g?Cp-Pe():0;if(pe=Pw(ie,pe),pe!==null){Ra=g,t.cancelPendingCommit=pe(Up.bind(null,t,a,g,l,o,f,x,T,O,Q,ie,null,G,W)),as(t,g,x,!F);return}}Up(t,a,g,l,o,f,x,T,O)}function Q1(t){for(var a=t;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var o=0;o<l.length;o++){var f=l[o],g=f.getSnapshot;f=f.value;try{if(!Mn(g(),f))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function as(t,a,l,o){a&=~Sd,a&=~Ls,t.suspendedLanes|=a,t.pingedLanes&=~a,o&&(t.warmLanes|=a),o=t.expirationTimes;for(var f=a;0<f;){var g=31-Nt(f),x=1<<g;o[g]=-1,f&=~x}l!==0&&Ue(t,l,a)}function ho(){return(tt&6)===0?(Il(0),!1):!0}function Nd(){if(Le!==null){if(at===0)var t=Le.return;else t=Le,xa=Ds=null,$u(t),pi=null,bl=0,t=Le;for(;t!==null;)up(t.alternate,t),t=t.return;Le=null}}function Ni(t,a){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,yw(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),Ra=0,Nd(),ht=t,Le=l=ya(t.current,null),$e=a,at=0,Rn=null,Ja=!1,_i=se(t,a),xd=!1,Ei=kn=Sd=Ls=es=Dt=0,wn=zl=null,wd=!1,(a&8)!==0&&(a|=a&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=a;0<o;){var f=31-Nt(o),g=1<<f;a|=t[f],o&=~g}return Da=a,Ar(),l}function Op(t,a){Re=null,L.H=Ml,a===gi||a===Ur?(a=Wm(),at=3):a===Du?(a=Wm(),at=4):at=a===sd?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Rn=a,Le===null&&(Dt=1,to(t,Un(a,t.current)))}function zp(){var t=Cn.current;return t===null?!0:($e&4194048)===$e?Fn===null:($e&62914560)===$e||($e&536870912)!==0?t===Fn:!1}function Pp(){var t=L.H;return L.H=Ml,t===null?Ml:t}function Ip(){var t=L.A;return L.A=W1,t}function mo(){Dt=4,Ja||($e&4194048)!==$e&&Cn.current!==null||(_i=!0),(es&134217727)===0&&(Ls&134217727)===0||ht===null||as(ht,$e,kn,!1)}function Md(t,a,l){var o=tt;tt|=2;var f=Pp(),g=Ip();(ht!==t||$e!==a)&&(fo=null,Ni(t,a)),a=!1;var x=Dt;e:do try{if(at!==0&&Le!==null){var T=Le,O=Rn;switch(at){case 8:Nd(),x=6;break e;case 3:case 2:case 9:case 6:Cn.current===null&&(a=!0);var F=at;if(at=0,Rn=null,Mi(t,T,O,F),l&&_i){x=0;break e}break;default:F=at,at=0,Rn=null,Mi(t,T,O,F)}}J1(),x=Dt;break}catch(Q){Op(t,Q)}while(!0);return a&&t.shellSuspendCounter++,xa=Ds=null,tt=o,L.H=f,L.A=g,Le===null&&(ht=null,$e=0,Ar()),x}function J1(){for(;Le!==null;)Bp(Le)}function ew(t,a){var l=tt;tt|=2;var o=Pp(),f=Ip();ht!==t||$e!==a?(fo=null,uo=Pe()+500,Ni(t,a)):_i=se(t,a);e:do try{if(at!==0&&Le!==null){a=Le;var g=Rn;t:switch(at){case 1:at=0,Rn=null,Mi(t,a,g,1);break;case 2:case 9:if(Vm(g)){at=0,Rn=null,Lp(a);break}a=function(){at!==2&&at!==9||ht!==t||(at=7),oa(t)},g.then(a,a);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:Vm(g)?(at=0,Rn=null,Lp(a)):(at=0,Rn=null,Mi(t,a,g,7));break;case 5:var x=null;switch(Le.tag){case 26:x=Le.memoizedState;case 5:case 27:var T=Le;if(x?Ev(x):T.stateNode.complete){at=0,Rn=null;var O=T.sibling;if(O!==null)Le=O;else{var F=T.return;F!==null?(Le=F,go(F)):Le=null}break t}}at=0,Rn=null,Mi(t,a,g,5);break;case 6:at=0,Rn=null,Mi(t,a,g,6);break;case 8:Nd(),Dt=6;break e;default:throw Error(i(462))}}tw();break}catch(Q){Op(t,Q)}while(!0);return xa=Ds=null,L.H=o,L.A=f,tt=l,Le!==null?0:(ht=null,$e=0,Ar(),Dt)}function tw(){for(;Le!==null&&!De();)Bp(Le)}function Bp(t){var a=op(t.alternate,t,Da);t.memoizedProps=t.pendingProps,a===null?go(t):Le=a}function Lp(t){var a=t,l=a.alternate;switch(a.tag){case 15:case 0:a=np(l,a,a.pendingProps,a.type,void 0,$e);break;case 11:a=np(l,a,a.pendingProps,a.type.render,a.ref,$e);break;case 5:$u(a);default:up(l,a),a=Le=Im(a,Da),a=op(l,a,Da)}t.memoizedProps=t.pendingProps,a===null?go(t):Le=a}function Mi(t,a,l,o){xa=Ds=null,$u(a),pi=null,bl=0;var f=a.return;try{if(H1(t,f,a,l,$e)){Dt=1,to(t,Un(l,t.current)),Le=null;return}}catch(g){if(f!==null)throw Le=f,g;Dt=1,to(t,Un(l,t.current)),Le=null;return}a.flags&32768?(Ze||o===1?t=!0:_i||($e&536870912)!==0?t=!1:(Ja=t=!0,(o===2||o===9||o===3||o===6)&&(o=Cn.current,o!==null&&o.tag===13&&(o.flags|=16384))),qp(a,t)):go(a)}function go(t){var a=t;do{if((a.flags&32768)!==0){qp(a,Ja);return}t=a.return;var l=G1(a.alternate,a,Da);if(l!==null){Le=l;return}if(a=a.sibling,a!==null){Le=a;return}Le=a=t}while(a!==null);Dt===0&&(Dt=5)}function qp(t,a){do{var l=Y1(t.alternate,t);if(l!==null){l.flags&=32767,Le=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(t=t.sibling,t!==null)){Le=t;return}Le=t=l}while(t!==null);Dt=6,Le=null}function Up(t,a,l,o,f,g,x,T,O){t.cancelPendingCommit=null;do po();while(Yt!==0);if((tt&6)!==0)throw Error(i(327));if(a!==null){if(a===t.current)throw Error(i(177));if(g=a.lanes|a.childLanes,g|=gu,rt(t,l,g,x,T,O),t===ht&&(Le=ht=null,$e=0),Ti=a,ns=t,Ra=l,_d=g,Ed=f,Dp=o,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,iw(K,function(){return Gp(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||o){o=L.T,L.T=null,f=Y.p,Y.p=2,x=tt,tt|=4;try{V1(t,a,l)}finally{tt=x,Y.p=f,L.T=o}}Yt=1,$p(),Hp(),Zp()}}function $p(){if(Yt===1){Yt=0;var t=ns,a=Ti,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=L.T,L.T=null;var o=Y.p;Y.p=2;var f=tt;tt|=4;try{wp(a,t);var g=Ld,x=jm(t.containerInfo),T=g.focusedElem,O=g.selectionRange;if(x!==T&&T&&T.ownerDocument&&Mm(T.ownerDocument.documentElement,T)){if(O!==null&&uu(T)){var F=O.start,Q=O.end;if(Q===void 0&&(Q=F),"selectionStart"in T)T.selectionStart=F,T.selectionEnd=Math.min(Q,T.value.length);else{var ie=T.ownerDocument||document,G=ie&&ie.defaultView||window;if(G.getSelection){var W=G.getSelection(),pe=T.textContent.length,Ne=Math.min(O.start,pe),ut=O.end===void 0?Ne:Math.min(O.end,pe);!W.extend&&Ne>ut&&(x=ut,ut=Ne,Ne=x);var U=Nm(T,Ne),P=Nm(T,ut);if(U&&P&&(W.rangeCount!==1||W.anchorNode!==U.node||W.anchorOffset!==U.offset||W.focusNode!==P.node||W.focusOffset!==P.offset)){var H=ie.createRange();H.setStart(U.node,U.offset),W.removeAllRanges(),Ne>ut?(W.addRange(H),W.extend(P.node,P.offset)):(H.setEnd(P.node,P.offset),W.addRange(H))}}}}for(ie=[],W=T;W=W.parentNode;)W.nodeType===1&&ie.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ie.length;T++){var ee=ie[T];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}jo=!!Bd,Ld=Bd=null}finally{tt=f,Y.p=o,L.T=l}}t.current=a,Yt=2}}function Hp(){if(Yt===2){Yt=0;var t=ns,a=Ti,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=L.T,L.T=null;var o=Y.p;Y.p=2;var f=tt;tt|=4;try{vp(t,a.alternate,a)}finally{tt=f,Y.p=o,L.T=l}}Yt=3}}function Zp(){if(Yt===4||Yt===3){Yt=0,Je();var t=ns,a=Ti,l=Ra,o=Dp;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Yt=5:(Yt=0,Ti=ns=null,Fp(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(ts=null),Se(l),a=a.stateNode,ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(an,a,void 0,(a.current.flags&128)===128)}catch{}if(o!==null){a=L.T,f=Y.p,Y.p=2,L.T=null;try{for(var g=t.onRecoverableError,x=0;x<o.length;x++){var T=o[x];g(T.value,{componentStack:T.stack})}}finally{L.T=a,Y.p=f}}(Ra&3)!==0&&po(),oa(t),f=t.pendingLanes,(l&261930)!==0&&(f&42)!==0?t===Td?Pl++:(Pl=0,Td=t):Pl=0,Il(0)}}function Fp(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,vl(a)))}function po(){return $p(),Hp(),Zp(),Gp()}function Gp(){if(Yt!==5)return!1;var t=ns,a=_d;_d=0;var l=Se(Ra),o=L.T,f=Y.p;try{Y.p=32>l?32:l,L.T=null,l=Ed,Ed=null;var g=ns,x=Ra;if(Yt=0,Ti=ns=null,Ra=0,(tt&6)!==0)throw Error(i(331));var T=tt;if(tt|=4,Mp(g.current),Ep(g,g.current,x,l),tt=T,Il(0,!1),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(an,g)}catch{}return!0}finally{Y.p=f,L.T=o,Fp(t,a)}}function Yp(t,a,l){a=Un(l,a),a=ad(t.stateNode,a,2),t=Ka(t,a,2),t!==null&&(Ye(t,2),oa(t))}function st(t,a,l){if(t.tag===3)Yp(t,t,l);else for(;a!==null;){if(a.tag===3){Yp(a,t,l);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ts===null||!ts.has(o))){t=Un(l,t),l=Vg(2),o=Ka(a,l,2),o!==null&&(Kg(l,o,a,t),Ye(o,2),oa(o));break}}a=a.return}}function jd(t,a,l){var o=t.pingCache;if(o===null){o=t.pingCache=new X1;var f=new Set;o.set(a,f)}else f=o.get(a),f===void 0&&(f=new Set,o.set(a,f));f.has(l)||(xd=!0,f.add(l),t=nw.bind(null,t,a,l),a.then(t,t))}function nw(t,a,l){var o=t.pingCache;o!==null&&o.delete(a),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,ht===t&&($e&l)===l&&(Dt===4||Dt===3&&($e&62914560)===$e&&300>Pe()-co?(tt&2)===0&&Ni(t,0):Sd|=l,Ei===$e&&(Ei=0)),oa(t)}function Vp(t,a){a===0&&(a=be()),t=Ms(t,a),t!==null&&(Ye(t,a),oa(t))}function aw(t){var a=t.memoizedState,l=0;a!==null&&(l=a.retryLane),Vp(t,l)}function sw(t,a){var l=0;switch(t.tag){case 31:case 13:var o=t.stateNode,f=t.memoizedState;f!==null&&(l=f.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(a),Vp(t,l)}function iw(t,a){return fe(t,a)}var vo=null,ji=null,Cd=!1,yo=!1,Dd=!1,ss=0;function oa(t){t!==ji&&t.next===null&&(ji===null?vo=ji=t:ji=ji.next=t),yo=!0,Cd||(Cd=!0,rw())}function Il(t,a){if(!Dd&&yo){Dd=!0;do for(var l=!1,o=vo;o!==null;){if(t!==0){var f=o.pendingLanes;if(f===0)var g=0;else{var x=o.suspendedLanes,T=o.pingedLanes;g=(1<<31-Nt(42|t)+1)-1,g&=f&~(x&~T),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,Qp(o,g))}else g=$e,g=Bt(o,o===ht?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(g&3)===0||se(o,g)||(l=!0,Qp(o,g));o=o.next}while(l);Dd=!1}}function lw(){Kp()}function Kp(){yo=Cd=!1;var t=0;ss!==0&&vw()&&(t=ss);for(var a=Pe(),l=null,o=vo;o!==null;){var f=o.next,g=Wp(o,a);g===0?(o.next=null,l===null?vo=f:l.next=f,f===null&&(ji=l)):(l=o,(t!==0||(g&3)!==0)&&(yo=!0)),o=f}Yt!==0&&Yt!==5||Il(t),ss!==0&&(ss=0)}function Wp(t,a){for(var l=t.suspendedLanes,o=t.pingedLanes,f=t.expirationTimes,g=t.pendingLanes&-62914561;0<g;){var x=31-Nt(g),T=1<<x,O=f[x];O===-1?((T&l)===0||(T&o)!==0)&&(f[x]=me(T,a)):O<=a&&(t.expiredLanes|=T),g&=~T}if(a=ht,l=$e,l=Bt(t,t===a?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,l===0||t===a&&(at===2||at===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Oe(o),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||se(t,l)){if(a=l&-l,a===t.callbackPriority)return a;switch(o!==null&&Oe(o),Se(l)){case 2:case 8:l=Pt;break;case 32:l=K;break;case 268435456:l=et;break;default:l=K}return o=Xp.bind(null,t),l=fe(l,o),t.callbackPriority=a,t.callbackNode=l,a}return o!==null&&o!==null&&Oe(o),t.callbackPriority=2,t.callbackNode=null,2}function Xp(t,a){if(Yt!==0&&Yt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(po()&&t.callbackNode!==l)return null;var o=$e;return o=Bt(t,t===ht?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(kp(t,o,a),Wp(t,Pe()),t.callbackNode!=null&&t.callbackNode===l?Xp.bind(null,t):null)}function Qp(t,a){if(po())return null;kp(t,a,!0)}function rw(){bw(function(){(tt&6)!==0?fe(un,lw):Kp()})}function Rd(){if(ss===0){var t=hi;t===0&&(t=qa,qa<<=1,(qa&261888)===0&&(qa=256)),ss=t}return ss}function Jp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Tr(""+t)}function ev(t,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,t.id&&l.setAttribute("form",t.id),a.parentNode.insertBefore(l,a),t=new FormData(t),l.parentNode.removeChild(l),t}function ow(t,a,l,o,f){if(a==="submit"&&l&&l.stateNode===f){var g=Jp((f[Ke]||null).action),x=o.submitter;x&&(a=(a=x[Ke]||null)?Jp(a.formAction):x.getAttribute("formAction"),a!==null&&(g=a,x=null));var T=new Cr("action","action",null,o,f);t.push({event:T,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ss!==0){var O=x?ev(f,x):new FormData(f);Xu(l,{pending:!0,data:O,method:f.method,action:g},null,O)}}else typeof g=="function"&&(T.preventDefault(),O=x?ev(f,x):new FormData(f),Xu(l,{pending:!0,data:O,method:f.method,action:g},g,O))},currentTarget:f}]})}}for(var kd=0;kd<mu.length;kd++){var Ad=mu[kd],cw=Ad.toLowerCase(),uw=Ad[0].toUpperCase()+Ad.slice(1);Wn(cw,"on"+uw)}Wn(Rm,"onAnimationEnd"),Wn(km,"onAnimationIteration"),Wn(Am,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(N1,"onTransitionRun"),Wn(M1,"onTransitionStart"),Wn(j1,"onTransitionCancel"),Wn(Om,"onTransitionEnd"),Js("onMouseEnter",["mouseout","mouseover"]),Js("onMouseLeave",["mouseout","mouseover"]),Js("onPointerEnter",["pointerout","pointerover"]),Js("onPointerLeave",["pointerout","pointerover"]),_s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),_s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),_s("onBeforeInput",["compositionend","keypress","textInput","paste"]),_s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),_s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),_s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bl));function tv(t,a){a=(a&4)!==0;for(var l=0;l<t.length;l++){var o=t[l],f=o.event;o=o.listeners;e:{var g=void 0;if(a)for(var x=o.length-1;0<=x;x--){var T=o[x],O=T.instance,F=T.currentTarget;if(T=T.listener,O!==g&&f.isPropagationStopped())break e;g=T,f.currentTarget=F;try{g(f)}catch(Q){kr(Q)}f.currentTarget=null,g=O}else for(x=0;x<o.length;x++){if(T=o[x],O=T.instance,F=T.currentTarget,T=T.listener,O!==g&&f.isPropagationStopped())break e;g=T,f.currentTarget=F;try{g(f)}catch(Q){kr(Q)}f.currentTarget=null,g=O}}}}function qe(t,a){var l=a[Ks];l===void 0&&(l=a[Ks]=new Set);var o=t+"__bubble";l.has(o)||(nv(a,t,2,!1),l.add(o))}function Od(t,a,l){var o=0;a&&(o|=4),nv(l,t,o,a)}var bo="_reactListening"+Math.random().toString(36).slice(2);function zd(t){if(!t[bo]){t[bo]=!0,Kh.forEach(function(l){l!=="selectionchange"&&(dw.has(l)||Od(l,!1,t),Od(l,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[bo]||(a[bo]=!0,Od("selectionchange",!1,a))}}function nv(t,a,l,o){switch(Rv(a)){case 2:var f=Lw;break;case 8:f=qw;break;default:f=Wd}l=f.bind(null,a,l,t),f=void 0,!tu||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),o?f!==void 0?t.addEventListener(a,l,{capture:!0,passive:f}):t.addEventListener(a,l,!0):f!==void 0?t.addEventListener(a,l,{passive:f}):t.addEventListener(a,l,!1)}function Pd(t,a,l,o,f){var g=o;if((a&1)===0&&(a&2)===0&&o!==null)e:for(;;){if(o===null)return;var x=o.tag;if(x===3||x===4){var T=o.stateNode.containerInfo;if(T===f)break;if(x===4)for(x=o.return;x!==null;){var O=x.tag;if((O===3||O===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;T!==null;){if(x=ma(T),x===null)return;if(O=x.tag,O===5||O===6||O===26||O===27){o=g=x;continue e}T=T.parentNode}}o=o.return}rm(function(){var F=g,Q=Jc(l),ie=[];e:{var G=zm.get(t);if(G!==void 0){var W=Cr,pe=t;switch(t){case"keypress":if(Mr(l)===0)break e;case"keydown":case"keyup":W=s1;break;case"focusin":pe="focus",W=iu;break;case"focusout":pe="blur",W=iu;break;case"beforeblur":case"afterblur":W=iu;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=um;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=GS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=r1;break;case Rm:case km:case Am:W=KS;break;case Om:W=c1;break;case"scroll":case"scrollend":W=ZS;break;case"wheel":W=d1;break;case"copy":case"cut":case"paste":W=XS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=fm;break;case"toggle":case"beforetoggle":W=h1}var Ne=(a&4)!==0,ut=!Ne&&(t==="scroll"||t==="scrollend"),U=Ne?G!==null?G+"Capture":null:G;Ne=[];for(var P=F,H;P!==null;){var ee=P;if(H=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||H===null||U===null||(ee=ll(P,U),ee!=null&&Ne.push(Ll(P,ee,H))),ut)break;P=P.return}0<Ne.length&&(G=new W(G,pe,null,l,Q),ie.push({event:G,listeners:Ne}))}}if((a&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",W=t==="mouseout"||t==="pointerout",G&&l!==Qc&&(pe=l.relatedTarget||l.fromElement)&&(ma(pe)||pe[ha]))break e;if((W||G)&&(G=Q.window===Q?Q:(G=Q.ownerDocument)?G.defaultView||G.parentWindow:window,W?(pe=l.relatedTarget||l.toElement,W=F,pe=pe?ma(pe):null,pe!==null&&(ut=c(pe),Ne=pe.tag,pe!==ut||Ne!==5&&Ne!==27&&Ne!==6)&&(pe=null)):(W=null,pe=F),W!==pe)){if(Ne=um,ee="onMouseLeave",U="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(Ne=fm,ee="onPointerLeave",U="onPointerEnter",P="pointer"),ut=W==null?G:il(W),H=pe==null?G:il(pe),G=new Ne(ee,P+"leave",W,l,Q),G.target=ut,G.relatedTarget=H,ee=null,ma(Q)===F&&(Ne=new Ne(U,P+"enter",pe,l,Q),Ne.target=H,Ne.relatedTarget=ut,ee=Ne),ut=ee,W&&pe)t:{for(Ne=fw,U=W,P=pe,H=0,ee=U;ee;ee=Ne(ee))H++;ee=0;for(var we=P;we;we=Ne(we))ee++;for(;0<H-ee;)U=Ne(U),H--;for(;0<ee-H;)P=Ne(P),ee--;for(;H--;){if(U===P||P!==null&&U===P.alternate){Ne=U;break t}U=Ne(U),P=Ne(P)}Ne=null}else Ne=null;W!==null&&av(ie,G,W,Ne,!1),pe!==null&&ut!==null&&av(ie,ut,pe,Ne,!0)}}e:{if(G=F?il(F):window,W=G.nodeName&&G.nodeName.toLowerCase(),W==="select"||W==="input"&&G.type==="file")var We=xm;else if(ym(G))if(Sm)We=_1;else{We=S1;var ve=x1}else W=G.nodeName,!W||W.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&Xc(F.elementType)&&(We=xm):We=w1;if(We&&(We=We(t,F))){bm(ie,We,l,Q);break e}ve&&ve(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&Wc(G,"number",G.value)}switch(ve=F?il(F):window,t){case"focusin":(ym(ve)||ve.contentEditable==="true")&&(ii=ve,du=F,ml=null);break;case"focusout":ml=du=ii=null;break;case"mousedown":fu=!0;break;case"contextmenu":case"mouseup":case"dragend":fu=!1,Cm(ie,l,Q);break;case"selectionchange":if(T1)break;case"keydown":case"keyup":Cm(ie,l,Q)}var Ae;if(ru)e:{switch(t){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else si?pm(t,l)&&(He="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(He="onCompositionStart");He&&(hm&&l.locale!=="ko"&&(si||He!=="onCompositionStart"?He==="onCompositionEnd"&&si&&(Ae=om()):($a=Q,nu="value"in $a?$a.value:$a.textContent,si=!0)),ve=xo(F,He),0<ve.length&&(He=new dm(He,t,null,l,Q),ie.push({event:He,listeners:ve}),Ae?He.data=Ae:(Ae=vm(l),Ae!==null&&(He.data=Ae)))),(Ae=g1?p1(t,l):v1(t,l))&&(He=xo(F,"onBeforeInput"),0<He.length&&(ve=new dm("onBeforeInput","beforeinput",null,l,Q),ie.push({event:ve,listeners:He}),ve.data=Ae)),ow(ie,t,F,l,Q)}tv(ie,a)})}function Ll(t,a,l){return{instance:t,listener:a,currentTarget:l}}function xo(t,a){for(var l=a+"Capture",o=[];t!==null;){var f=t,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=ll(t,l),f!=null&&o.unshift(Ll(t,f,g)),f=ll(t,a),f!=null&&o.push(Ll(t,f,g))),t.tag===3)return o;t=t.return}return[]}function fw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function av(t,a,l,o,f){for(var g=a._reactName,x=[];l!==null&&l!==o;){var T=l,O=T.alternate,F=T.stateNode;if(T=T.tag,O!==null&&O===o)break;T!==5&&T!==26&&T!==27||F===null||(O=F,f?(F=ll(l,g),F!=null&&x.unshift(Ll(l,F,O))):f||(F=ll(l,g),F!=null&&x.push(Ll(l,F,O)))),l=l.return}x.length!==0&&t.push({event:a,listeners:x})}var hw=/\r\n?/g,mw=/\u0000|\uFFFD/g;function sv(t){return(typeof t=="string"?t:""+t).replace(hw,`
`).replace(mw,"")}function iv(t,a){return a=sv(a),sv(t)===a}function ct(t,a,l,o,f,g){switch(l){case"children":typeof o=="string"?a==="body"||a==="textarea"&&o===""||ti(t,o):(typeof o=="number"||typeof o=="bigint")&&a!=="body"&&ti(t,""+o);break;case"className":_r(t,"class",o);break;case"tabIndex":_r(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":_r(t,l,o);break;case"style":im(t,o,g);break;case"data":if(a!=="object"){_r(t,"data",o);break}case"src":case"href":if(o===""&&(a!=="a"||l!=="href")){t.removeAttribute(l);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(l);break}o=Tr(""+o),t.setAttribute(l,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(a!=="input"&&ct(t,a,"name",f.name,f,null),ct(t,a,"formEncType",f.formEncType,f,null),ct(t,a,"formMethod",f.formMethod,f,null),ct(t,a,"formTarget",f.formTarget,f,null)):(ct(t,a,"encType",f.encType,f,null),ct(t,a,"method",f.method,f,null),ct(t,a,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(l);break}o=Tr(""+o),t.setAttribute(l,o);break;case"onClick":o!=null&&(t.onclick=pa);break;case"onScroll":o!=null&&qe("scroll",t);break;case"onScrollEnd":o!=null&&qe("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(l=o.__html,l!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=l}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}l=Tr(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(l,""+o):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":o===!0?t.setAttribute(l,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(l,o):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(l,o):t.removeAttribute(l);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(l):t.setAttribute(l,o);break;case"popover":qe("beforetoggle",t),qe("toggle",t),wr(t,"popover",o);break;case"xlinkActuate":ga(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ga(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ga(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ga(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ga(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ga(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ga(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ga(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ga(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":wr(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=$S.get(l)||l,wr(t,l,o))}}function Id(t,a,l,o,f,g){switch(l){case"style":im(t,o,g);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(l=o.__html,l!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=l}}break;case"children":typeof o=="string"?ti(t,o):(typeof o=="number"||typeof o=="bigint")&&ti(t,""+o);break;case"onScroll":o!=null&&qe("scroll",t);break;case"onScrollEnd":o!=null&&qe("scrollend",t);break;case"onClick":o!=null&&(t.onclick=pa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wh.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),a=l.slice(2,f?l.length-7:void 0),g=t[Ke]||null,g=g!=null?g[l]:null,typeof g=="function"&&t.removeEventListener(a,g,f),typeof o=="function")){typeof g!="function"&&g!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(a,o,f);break e}l in t?t[l]=o:o===!0?t.setAttribute(l,""):wr(t,l,o)}}}function on(t,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",t),qe("load",t);var o=!1,f=!1,g;for(g in l)if(l.hasOwnProperty(g)){var x=l[g];if(x!=null)switch(g){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ct(t,a,g,x,l,null)}}f&&ct(t,a,"srcSet",l.srcSet,l,null),o&&ct(t,a,"src",l.src,l,null);return;case"input":qe("invalid",t);var T=g=x=f=null,O=null,F=null;for(o in l)if(l.hasOwnProperty(o)){var Q=l[o];if(Q!=null)switch(o){case"name":f=Q;break;case"type":x=Q;break;case"checked":O=Q;break;case"defaultChecked":F=Q;break;case"value":g=Q;break;case"defaultValue":T=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,a));break;default:ct(t,a,o,Q,l,null)}}tm(t,g,T,O,F,x,f,!1);return;case"select":qe("invalid",t),o=x=g=null;for(f in l)if(l.hasOwnProperty(f)&&(T=l[f],T!=null))switch(f){case"value":g=T;break;case"defaultValue":x=T;break;case"multiple":o=T;default:ct(t,a,f,T,l,null)}a=g,l=x,t.multiple=!!o,a!=null?ei(t,!!o,a,!1):l!=null&&ei(t,!!o,l,!0);return;case"textarea":qe("invalid",t),g=f=o=null;for(x in l)if(l.hasOwnProperty(x)&&(T=l[x],T!=null))switch(x){case"value":o=T;break;case"defaultValue":f=T;break;case"children":g=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(i(91));break;default:ct(t,a,x,T,l,null)}am(t,o,f,g);return;case"option":for(O in l)l.hasOwnProperty(O)&&(o=l[O],o!=null)&&(O==="selected"?t.selected=o&&typeof o!="function"&&typeof o!="symbol":ct(t,a,O,o,l,null));return;case"dialog":qe("beforetoggle",t),qe("toggle",t),qe("cancel",t),qe("close",t);break;case"iframe":case"object":qe("load",t);break;case"video":case"audio":for(o=0;o<Bl.length;o++)qe(Bl[o],t);break;case"image":qe("error",t),qe("load",t);break;case"details":qe("toggle",t);break;case"embed":case"source":case"link":qe("error",t),qe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in l)if(l.hasOwnProperty(F)&&(o=l[F],o!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:ct(t,a,F,o,l,null)}return;default:if(Xc(a)){for(Q in l)l.hasOwnProperty(Q)&&(o=l[Q],o!==void 0&&Id(t,a,Q,o,l,void 0));return}}for(T in l)l.hasOwnProperty(T)&&(o=l[T],o!=null&&ct(t,a,T,o,l,null))}function gw(t,a,l,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,x=null,T=null,O=null,F=null,Q=null;for(W in l){var ie=l[W];if(l.hasOwnProperty(W)&&ie!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":O=ie;default:o.hasOwnProperty(W)||ct(t,a,W,null,o,ie)}}for(var G in o){var W=o[G];if(ie=l[G],o.hasOwnProperty(G)&&(W!=null||ie!=null))switch(G){case"type":g=W;break;case"name":f=W;break;case"checked":F=W;break;case"defaultChecked":Q=W;break;case"value":x=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,a));break;default:W!==ie&&ct(t,a,G,W,o,ie)}}Kc(t,x,T,O,F,Q,g,f);return;case"select":W=x=T=G=null;for(g in l)if(O=l[g],l.hasOwnProperty(g)&&O!=null)switch(g){case"value":break;case"multiple":W=O;default:o.hasOwnProperty(g)||ct(t,a,g,null,o,O)}for(f in o)if(g=o[f],O=l[f],o.hasOwnProperty(f)&&(g!=null||O!=null))switch(f){case"value":G=g;break;case"defaultValue":T=g;break;case"multiple":x=g;default:g!==O&&ct(t,a,f,g,o,O)}a=T,l=x,o=W,G!=null?ei(t,!!l,G,!1):!!o!=!!l&&(a!=null?ei(t,!!l,a,!0):ei(t,!!l,l?[]:"",!1));return;case"textarea":W=G=null;for(T in l)if(f=l[T],l.hasOwnProperty(T)&&f!=null&&!o.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:ct(t,a,T,null,o,f)}for(x in o)if(f=o[x],g=l[x],o.hasOwnProperty(x)&&(f!=null||g!=null))switch(x){case"value":G=f;break;case"defaultValue":W=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==g&&ct(t,a,x,f,o,g)}nm(t,G,W);return;case"option":for(var pe in l)G=l[pe],l.hasOwnProperty(pe)&&G!=null&&!o.hasOwnProperty(pe)&&(pe==="selected"?t.selected=!1:ct(t,a,pe,null,o,G));for(O in o)G=o[O],W=l[O],o.hasOwnProperty(O)&&G!==W&&(G!=null||W!=null)&&(O==="selected"?t.selected=G&&typeof G!="function"&&typeof G!="symbol":ct(t,a,O,G,o,W));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in l)G=l[Ne],l.hasOwnProperty(Ne)&&G!=null&&!o.hasOwnProperty(Ne)&&ct(t,a,Ne,null,o,G);for(F in o)if(G=o[F],W=l[F],o.hasOwnProperty(F)&&G!==W&&(G!=null||W!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,a));break;default:ct(t,a,F,G,o,W)}return;default:if(Xc(a)){for(var ut in l)G=l[ut],l.hasOwnProperty(ut)&&G!==void 0&&!o.hasOwnProperty(ut)&&Id(t,a,ut,void 0,o,G);for(Q in o)G=o[Q],W=l[Q],!o.hasOwnProperty(Q)||G===W||G===void 0&&W===void 0||Id(t,a,Q,G,o,W);return}}for(var U in l)G=l[U],l.hasOwnProperty(U)&&G!=null&&!o.hasOwnProperty(U)&&ct(t,a,U,null,o,G);for(ie in o)G=o[ie],W=l[ie],!o.hasOwnProperty(ie)||G===W||G==null&&W==null||ct(t,a,ie,G,o,W)}function lv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,l=performance.getEntriesByType("resource"),o=0;o<l.length;o++){var f=l[o],g=f.transferSize,x=f.initiatorType,T=f.duration;if(g&&T&&lv(x)){for(x=0,T=f.responseEnd,o+=1;o<l.length;o++){var O=l[o],F=O.startTime;if(F>T)break;var Q=O.transferSize,ie=O.initiatorType;Q&&lv(ie)&&(O=O.responseEnd,x+=Q*(O<T?1:(T-F)/(O-F)))}if(--o,a+=8*(g+x)/(f.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Bd=null,Ld=null;function So(t){return t.nodeType===9?t:t.ownerDocument}function rv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ov(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function qd(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ud=null;function vw(){var t=window.event;return t&&t.type==="popstate"?t===Ud?!1:(Ud=t,!0):(Ud=null,!1)}var cv=typeof setTimeout=="function"?setTimeout:void 0,yw=typeof clearTimeout=="function"?clearTimeout:void 0,uv=typeof Promise=="function"?Promise:void 0,bw=typeof queueMicrotask=="function"?queueMicrotask:typeof uv<"u"?function(t){return uv.resolve(null).then(t).catch(xw)}:cv;function xw(t){setTimeout(function(){throw t})}function is(t){return t==="head"}function dv(t,a){var l=a,o=0;do{var f=l.nextSibling;if(t.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(o===0){t.removeChild(f),ki(a);return}o--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")o++;else if(l==="html")ql(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,ql(l);for(var g=l.firstChild;g;){var x=g.nextSibling,T=g.nodeName;g[Ua]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=x}}else l==="body"&&ql(t.ownerDocument.body);l=f}while(l);ki(a)}function fv(t,a){var l=t;t=0;do{var o=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),o&&o.nodeType===8)if(l=o.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=o}while(l)}function $d(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":$d(l),Ws(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function Sw(t,a,l,o){for(;t.nodeType===1;){var f=l;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Ua])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(g=t.getAttribute("rel"),g==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(g!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(g=t.getAttribute("src"),(g!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===g)return t}else return t;if(t=Gn(t.nextSibling),t===null)break}return null}function ww(t,a,l){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=Gn(t.nextSibling),t===null))return null;return t}function hv(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Gn(t.nextSibling),t===null))return null;return t}function Hd(t){return t.data==="$?"||t.data==="$~"}function Zd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function _w(t,a){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||l.readyState!=="loading")a();else{var o=function(){a(),l.removeEventListener("DOMContentLoaded",o)};l.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Gn(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var Fd=null;function mv(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(a===0)return Gn(t.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}t=t.nextSibling}return null}function gv(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return t;a--}else l!=="/$"&&l!=="/&"||a++}t=t.previousSibling}return null}function pv(t,a,l){switch(a=So(l),t){case"html":if(t=a.documentElement,!t)throw Error(i(452));return t;case"head":if(t=a.head,!t)throw Error(i(453));return t;case"body":if(t=a.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function ql(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Ws(t)}var Yn=new Map,vv=new Set;function wo(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ka=Y.d;Y.d={f:Ew,r:Tw,D:Nw,C:Mw,L:jw,m:Cw,X:Rw,S:Dw,M:kw};function Ew(){var t=ka.f(),a=ho();return t||a}function Tw(t){var a=Xs(t);a!==null&&a.tag===5&&a.type==="form"?Og(a):ka.r(t)}var Ci=typeof document>"u"?null:document;function yv(t,a,l){var o=Ci;if(o&&typeof a=="string"&&a){var f=Ln(a);f='link[rel="'+t+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),vv.has(f)||(vv.add(f),t={rel:t,crossOrigin:l,href:a},o.querySelector(f)===null&&(a=o.createElement("link"),on(a,"link",t),Xt(a),o.head.appendChild(a)))}}function Nw(t){ka.D(t),yv("dns-prefetch",t,null)}function Mw(t,a){ka.C(t,a),yv("preconnect",t,a)}function jw(t,a,l){ka.L(t,a,l);var o=Ci;if(o&&t&&a){var f='link[rel="preload"][as="'+Ln(a)+'"]';a==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+Ln(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+Ln(l.imageSizes)+'"]')):f+='[href="'+Ln(t)+'"]';var g=f;switch(a){case"style":g=Di(t);break;case"script":g=Ri(t)}Yn.has(g)||(t=y({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:t,as:a},l),Yn.set(g,t),o.querySelector(f)!==null||a==="style"&&o.querySelector(Ul(g))||a==="script"&&o.querySelector($l(g))||(a=o.createElement("link"),on(a,"link",t),Xt(a),o.head.appendChild(a)))}}function Cw(t,a){ka.m(t,a);var l=Ci;if(l&&t){var o=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+Ln(o)+'"][href="'+Ln(t)+'"]',g=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Ri(t)}if(!Yn.has(g)&&(t=y({rel:"modulepreload",href:t},a),Yn.set(g,t),l.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector($l(g)))return}o=l.createElement("link"),on(o,"link",t),Xt(o),l.head.appendChild(o)}}}function Dw(t,a,l){ka.S(t,a,l);var o=Ci;if(o&&t){var f=Qs(o).hoistableStyles,g=Di(t);a=a||"default";var x=f.get(g);if(!x){var T={loading:0,preload:null};if(x=o.querySelector(Ul(g)))T.loading=5;else{t=y({rel:"stylesheet",href:t,"data-precedence":a},l),(l=Yn.get(g))&&Gd(t,l);var O=x=o.createElement("link");Xt(O),on(O,"link",t),O._p=new Promise(function(F,Q){O.onload=F,O.onerror=Q}),O.addEventListener("load",function(){T.loading|=1}),O.addEventListener("error",function(){T.loading|=2}),T.loading|=4,_o(x,a,o)}x={type:"stylesheet",instance:x,count:1,state:T},f.set(g,x)}}}function Rw(t,a){ka.X(t,a);var l=Ci;if(l&&t){var o=Qs(l).hoistableScripts,f=Ri(t),g=o.get(f);g||(g=l.querySelector($l(f)),g||(t=y({src:t,async:!0},a),(a=Yn.get(f))&&Yd(t,a),g=l.createElement("script"),Xt(g),on(g,"link",t),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(f,g))}}function kw(t,a){ka.M(t,a);var l=Ci;if(l&&t){var o=Qs(l).hoistableScripts,f=Ri(t),g=o.get(f);g||(g=l.querySelector($l(f)),g||(t=y({src:t,async:!0,type:"module"},a),(a=Yn.get(f))&&Yd(t,a),g=l.createElement("script"),Xt(g),on(g,"link",t),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(f,g))}}function bv(t,a,l,o){var f=(f=re.current)?wo(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Di(l.href),l=Qs(f).hoistableStyles,o=l.get(a),o||(o={type:"style",instance:null,count:0,state:null},l.set(a,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=Di(l.href);var g=Qs(f).hoistableStyles,x=g.get(t);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(t,x),(g=f.querySelector(Ul(t)))&&!g._p&&(x.instance=g,x.state.loading=5),Yn.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Yn.set(t,l),g||Aw(f,t,l,x.state))),a&&o===null)throw Error(i(528,""));return x}if(a&&o!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ri(l),l=Qs(f).hoistableScripts,o=l.get(a),o||(o={type:"script",instance:null,count:0,state:null},l.set(a,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Di(t){return'href="'+Ln(t)+'"'}function Ul(t){return'link[rel="stylesheet"]['+t+"]"}function xv(t){return y({},t,{"data-precedence":t.precedence,precedence:null})}function Aw(t,a,l,o){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=t.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),on(a,"link",l),Xt(a),t.head.appendChild(a))}function Ri(t){return'[src="'+Ln(t)+'"]'}function $l(t){return"script[async]"+t}function Sv(t,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var o=t.querySelector('style[data-href~="'+Ln(l.href)+'"]');if(o)return a.instance=o,Xt(o),o;var f=y({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Xt(o),on(o,"style",f),_o(o,l.precedence,t),a.instance=o;case"stylesheet":f=Di(l.href);var g=t.querySelector(Ul(f));if(g)return a.state.loading|=4,a.instance=g,Xt(g),g;o=xv(l),(f=Yn.get(f))&&Gd(o,f),g=(t.ownerDocument||t).createElement("link"),Xt(g);var x=g;return x._p=new Promise(function(T,O){x.onload=T,x.onerror=O}),on(g,"link",o),a.state.loading|=4,_o(g,l.precedence,t),a.instance=g;case"script":return g=Ri(l.src),(f=t.querySelector($l(g)))?(a.instance=f,Xt(f),f):(o=l,(f=Yn.get(g))&&(o=y({},l),Yd(o,f)),t=t.ownerDocument||t,f=t.createElement("script"),Xt(f),on(f,"link",o),t.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(o=a.instance,a.state.loading|=4,_o(o,l.precedence,t));return a.instance}function _o(t,a,l){for(var o=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,g=f,x=0;x<o.length;x++){var T=o[x];if(T.dataset.precedence===a)g=T;else if(g!==f)break}g?g.parentNode.insertBefore(t,g.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(t,a.firstChild))}function Gd(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Yd(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Eo=null;function wv(t,a,l){if(Eo===null){var o=new Map,f=Eo=new Map;f.set(l,o)}else f=Eo,o=f.get(l),o||(o=new Map,f.set(l,o));if(o.has(t))return o;for(o.set(t,null),l=l.getElementsByTagName(t),f=0;f<l.length;f++){var g=l[f];if(!(g[Ua]||g[yt]||t==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var x=g.getAttribute(a)||"";x=t+x;var T=o.get(x);T?T.push(g):o.set(x,[g])}}return o}function _v(t,a,l){t=t.ownerDocument||t,t.head.insertBefore(l,a==="title"?t.querySelector("head > title"):null)}function Ow(t,a,l){if(l===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Ev(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function zw(t,a,l,o){if(l.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=Di(o.href),g=a.querySelector(Ul(f));if(g){a=g._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=To.bind(t),a.then(t,t)),l.state.loading|=4,l.instance=g,Xt(g);return}g=a.ownerDocument||a,o=xv(o),(f=Yn.get(f))&&Gd(o,f),g=g.createElement("link"),Xt(g);var x=g;x._p=new Promise(function(T,O){x.onload=T,x.onerror=O}),on(g,"link",o),l.instance=g}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=To.bind(t),a.addEventListener("load",l),a.addEventListener("error",l))}}var Vd=0;function Pw(t,a){return t.stylesheets&&t.count===0&&Mo(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var o=setTimeout(function(){if(t.stylesheets&&Mo(t,t.stylesheets),t.unsuspend){var g=t.unsuspend;t.unsuspend=null,g()}},6e4+a);0<t.imgBytes&&Vd===0&&(Vd=62500*pw());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Mo(t,t.stylesheets),t.unsuspend)){var g=t.unsuspend;t.unsuspend=null,g()}},(t.imgBytes>Vd?50:800)+a);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function To(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Mo(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var No=null;function Mo(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,No=new Map,a.forEach(Iw,t),No=null,To.call(t))}function Iw(t,a){if(!(a.state.loading&4)){var l=No.get(t);if(l)var o=l.get(null);else{l=new Map,No.set(t,l);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var x=f[g];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),o=x)}o&&l.set(null,o)}f=a.instance,x=f.getAttribute("data-precedence"),g=l.get(x)||o,g===o&&l.set(null,f),l.set(x,f),this.count++,o=To.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),g?g.parentNode.insertBefore(f,g.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),a.state.loading|=4}}var Hl={$$typeof:z,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function Bw(t,a,l,o,f,g,x,T,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Me(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Me(0),this.hiddenUpdates=Me(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Tv(t,a,l,o,f,g,x,T,O,F,Q,ie){return t=new Bw(t,a,l,x,O,F,Q,ie,T),a=1,g===!0&&(a|=24),g=jn(3,null,null,a),t.current=g,g.stateNode=t,a=Mu(),a.refCount++,t.pooledCache=a,a.refCount++,g.memoizedState={element:o,isDehydrated:l,cache:a},Ru(g),t}function Nv(t){return t?(t=oi,t):oi}function Mv(t,a,l,o,f,g){f=Nv(f),o.context===null?o.context=f:o.pendingContext=f,o=Va(a),o.payload={element:l},g=g===void 0?null:g,g!==null&&(o.callback=g),l=Ka(t,o,a),l!==null&&(_n(l,t,a),Sl(l,t,a))}function jv(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<a?l:a}}function Kd(t,a){jv(t,a),(t=t.alternate)&&jv(t,a)}function Cv(t){if(t.tag===13||t.tag===31){var a=Ms(t,67108864);a!==null&&_n(a,t,67108864),Kd(t,67108864)}}function Dv(t){if(t.tag===13||t.tag===31){var a=An();a=jt(a);var l=Ms(t,a);l!==null&&_n(l,t,a),Kd(t,a)}}var jo=!0;function Lw(t,a,l,o){var f=L.T;L.T=null;var g=Y.p;try{Y.p=2,Wd(t,a,l,o)}finally{Y.p=g,L.T=f}}function qw(t,a,l,o){var f=L.T;L.T=null;var g=Y.p;try{Y.p=8,Wd(t,a,l,o)}finally{Y.p=g,L.T=f}}function Wd(t,a,l,o){if(jo){var f=Xd(o);if(f===null)Pd(t,a,o,Co,l),kv(t,o);else if($w(f,t,a,l,o))o.stopPropagation();else if(kv(t,o),a&4&&-1<Uw.indexOf(t)){for(;f!==null;){var g=Xs(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var x=ze(g.pendingLanes);if(x!==0){var T=g;for(T.pendingLanes|=2,T.entangledLanes|=2;x;){var O=1<<31-Nt(x);T.entanglements[1]|=O,x&=~O}oa(g),(tt&6)===0&&(uo=Pe()+500,Il(0))}}break;case 31:case 13:T=Ms(g,2),T!==null&&_n(T,g,2),ho(),Kd(g,2)}if(g=Xd(o),g===null&&Pd(t,a,o,Co,l),g===f)break;f=g}f!==null&&o.stopPropagation()}else Pd(t,a,o,null,l)}}function Xd(t){return t=Jc(t),Qd(t)}var Co=null;function Qd(t){if(Co=null,t=ma(t),t!==null){var a=c(t);if(a===null)t=null;else{var l=a.tag;if(l===13){if(t=u(a),t!==null)return t;t=null}else if(l===31){if(t=d(a),t!==null)return t;t=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Co=t,null}function Rv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wt()){case un:return 2;case Pt:return 8;case K:case he:return 32;case et:return 268435456;default:return 32}default:return 32}}var Jd=!1,ls=null,rs=null,os=null,Zl=new Map,Fl=new Map,cs=[],Uw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kv(t,a){switch(t){case"focusin":case"focusout":ls=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":os=null;break;case"pointerover":case"pointerout":Zl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(a.pointerId)}}function Gl(t,a,l,o,f,g){return t===null||t.nativeEvent!==g?(t={blockedOn:a,domEventName:l,eventSystemFlags:o,nativeEvent:g,targetContainers:[f]},a!==null&&(a=Xs(a),a!==null&&Cv(a)),t):(t.eventSystemFlags|=o,a=t.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),t)}function $w(t,a,l,o,f){switch(a){case"focusin":return ls=Gl(ls,t,a,l,o,f),!0;case"dragenter":return rs=Gl(rs,t,a,l,o,f),!0;case"mouseover":return os=Gl(os,t,a,l,o,f),!0;case"pointerover":var g=f.pointerId;return Zl.set(g,Gl(Zl.get(g)||null,t,a,l,o,f)),!0;case"gotpointercapture":return g=f.pointerId,Fl.set(g,Gl(Fl.get(g)||null,t,a,l,o,f)),!0}return!1}function Av(t){var a=ma(t.target);if(a!==null){var l=c(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){t.blockedOn=a,mn(t.priority,function(){Dv(l)});return}}else if(a===31){if(a=d(l),a!==null){t.blockedOn=a,mn(t.priority,function(){Dv(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Do(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var l=Xd(t.nativeEvent);if(l===null){l=t.nativeEvent;var o=new l.constructor(l.type,l);Qc=o,l.target.dispatchEvent(o),Qc=null}else return a=Xs(l),a!==null&&Cv(a),t.blockedOn=l,!1;a.shift()}return!0}function Ov(t,a,l){Do(t)&&l.delete(a)}function Hw(){Jd=!1,ls!==null&&Do(ls)&&(ls=null),rs!==null&&Do(rs)&&(rs=null),os!==null&&Do(os)&&(os=null),Zl.forEach(Ov),Fl.forEach(Ov)}function Ro(t,a){t.blockedOn===a&&(t.blockedOn=null,Jd||(Jd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Hw)))}var ko=null;function zv(t){ko!==t&&(ko=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ko===t&&(ko=null);for(var a=0;a<t.length;a+=3){var l=t[a],o=t[a+1],f=t[a+2];if(typeof o!="function"){if(Qd(o||l)===null)continue;break}var g=Xs(l);g!==null&&(t.splice(a,3),a-=3,Xu(g,{pending:!0,data:f,method:l.method,action:o},o,f))}}))}function ki(t){function a(O){return Ro(O,t)}ls!==null&&Ro(ls,t),rs!==null&&Ro(rs,t),os!==null&&Ro(os,t),Zl.forEach(a),Fl.forEach(a);for(var l=0;l<cs.length;l++){var o=cs[l];o.blockedOn===t&&(o.blockedOn=null)}for(;0<cs.length&&(l=cs[0],l.blockedOn===null);)Av(l),l.blockedOn===null&&cs.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(o=0;o<l.length;o+=3){var f=l[o],g=l[o+1],x=f[Ke]||null;if(typeof g=="function")x||zv(l);else if(x){var T=null;if(g&&g.hasAttribute("formAction")){if(f=g,x=g[Ke]||null)T=x.formAction;else if(Qd(f)!==null)continue}else T=x.action;typeof T=="function"?l[o+1]=T:(l.splice(o,3),o-=3),zv(l)}}}function Pv(){function t(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function a(){f!==null&&(f(),f=null),o||setTimeout(l,20)}function l(){if(!o&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),f!==null&&(f(),f=null)}}}function ef(t){this._internalRoot=t}Ao.prototype.render=ef.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,o=An();Mv(l,o,t,a,null,null)},Ao.prototype.unmount=ef.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Mv(t.current,2,null,t,null,null),ho(),a[ha]=null}};function Ao(t){this._internalRoot=t}Ao.prototype.unstable_scheduleHydration=function(t){if(t){var a=hn();t={blockedOn:null,target:t,priority:a};for(var l=0;l<cs.length&&a!==0&&a<cs[l].priority;l++);cs.splice(l,0,t),l===0&&Av(t)}};var Iv=n.version;if(Iv!=="19.2.4")throw Error(i(527,Iv,"19.2.4"));Y.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=p(a),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var Zw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oo.isDisabled&&Oo.supportsFiber)try{an=Oo.inject(Zw),ft=Oo}catch{}}return Vl.createRoot=function(t,a){if(!r(t))throw Error(i(299));var l=!1,o="",f=Zg,g=Fg,x=Gg;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Tv(t,1,!1,null,null,l,o,null,f,g,x,Pv),t[ha]=a.current,zd(t),new ef(a)},Vl.hydrateRoot=function(t,a,l){if(!r(t))throw Error(i(299));var o=!1,f="",g=Zg,x=Fg,T=Gg,O=null;return l!=null&&(l.unstable_strictMode===!0&&(o=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError),l.formState!==void 0&&(O=l.formState)),a=Tv(t,1,!0,a,l??null,o,f,O,g,x,T,Pv),a.context=Nv(null),l=a.current,o=An(),o=jt(o),f=Va(o),f.callback=null,Ka(l,f,o),l=o,a.current.lanes=l,Ye(a,l),oa(a),t[ha]=a.current,zd(t),new Ao(a)},Vl.version="19.2.4",Vl}var Yv;function e_(){if(Yv)return af.exports;Yv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),af.exports=Jw(),af.exports}var t_=e_(),Pa=U0();const n_=mh(Pa),Tc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ji(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function ph(e){return"nodeType"in e}function Tn(e){var n,s;return e?Ji(e)?e:ph(e)&&(n=(s=e.ownerDocument)==null?void 0:s.defaultView)!=null?n:window:window}function vh(e){const{Document:n}=Tn(e);return e instanceof n}function gr(e){return Ji(e)?!1:e instanceof Tn(e).HTMLElement}function $0(e){return e instanceof Tn(e).SVGElement}function el(e){return e?Ji(e)?e.document:ph(e)?vh(e)?e:gr(e)||$0(e)?e.ownerDocument:document:document:document}const vs=Tc?w.useLayoutEffect:w.useEffect;function yh(e){const n=w.useRef(e);return vs(()=>{n.current=e}),w.useCallback(function(){for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return n.current==null?void 0:n.current(...i)},[])}function a_(){const e=w.useRef(null),n=w.useCallback((i,r)=>{e.current=setInterval(i,r)},[]),s=w.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,s]}function ir(e,n){n===void 0&&(n=[e]);const s=w.useRef(e);return vs(()=>{s.current!==e&&(s.current=e)},n),s}function pr(e,n){const s=w.useRef();return w.useMemo(()=>{const i=e(s.current);return s.current=i,i},[...n])}function sc(e){const n=yh(e),s=w.useRef(null),i=w.useCallback(r=>{r!==s.current&&n?.(r,s.current),s.current=r},[]);return[s,i]}function Lf(e){const n=w.useRef();return w.useEffect(()=>{n.current=e},[e]),n.current}let of={};function Nc(e,n){return w.useMemo(()=>{if(n)return n;const s=of[e]==null?0:of[e]+1;return of[e]=s,e+"-"+s},[e,n])}function H0(e){return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),r=1;r<s;r++)i[r-1]=arguments[r];return i.reduce((c,u)=>{const d=Object.entries(u);for(const[m,p]of d){const v=c[m];v!=null&&(c[m]=v+e*p)}return c},{...n})}}const Hi=H0(1),lr=H0(-1);function s_(e){return"clientX"in e&&"clientY"in e}function Z0(e){if(!e)return!1;const{KeyboardEvent:n}=Tn(e.target);return n&&e instanceof n}function i_(e){if(!e)return!1;const{TouchEvent:n}=Tn(e.target);return n&&e instanceof n}function qf(e){if(i_(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:s}=e.touches[0];return{x:n,y:s}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:s}=e.changedTouches[0];return{x:n,y:s}}}return s_(e)?{x:e.clientX,y:e.clientY}:null}const ic=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:s}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(s?Math.round(s):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:s}=e;return"scaleX("+n+") scaleY("+s+")"}},Transform:{toString(e){if(e)return[ic.Translate.toString(e),ic.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:s,easing:i}=e;return n+" "+s+"ms "+i}}}),Vv="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function l_(e){return e.matches(Vv)?e:e.querySelector(Vv)}const r_={display:"none"};function o_(e){let{id:n,value:s}=e;return en.createElement("div",{id:n,style:r_},s)}function c_(e){let{id:n,announcement:s,ariaLiveType:i="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return en.createElement("div",{id:n,style:r,role:"status","aria-live":i,"aria-atomic":!0},s)}function u_(){const[e,n]=w.useState("");return{announce:w.useCallback(i=>{i!=null&&n(i)},[]),announcement:e}}const F0=w.createContext(null);function d_(e){const n=w.useContext(F0);w.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function f_(){const[e]=w.useState(()=>new Set),n=w.useCallback(i=>(e.add(i),()=>e.delete(i)),[e]);return[w.useCallback(i=>{let{type:r,event:c}=i;e.forEach(u=>{var d;return(d=u[r])==null?void 0:d.call(u,c)})},[e]),n]}const h_={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},m_={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was moved over droppable area "+s.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was dropped over droppable area "+s.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function g_(e){let{announcements:n=m_,container:s,hiddenTextDescribedById:i,screenReaderInstructions:r=h_}=e;const{announce:c,announcement:u}=u_(),d=Nc("DndLiveRegion"),[m,p]=w.useState(!1);if(w.useEffect(()=>{p(!0)},[]),d_(w.useMemo(()=>({onDragStart(y){let{active:b}=y;c(n.onDragStart({active:b}))},onDragMove(y){let{active:b,over:S}=y;n.onDragMove&&c(n.onDragMove({active:b,over:S}))},onDragOver(y){let{active:b,over:S}=y;c(n.onDragOver({active:b,over:S}))},onDragEnd(y){let{active:b,over:S}=y;c(n.onDragEnd({active:b,over:S}))},onDragCancel(y){let{active:b,over:S}=y;c(n.onDragCancel({active:b,over:S}))}}),[c,n])),!m)return null;const v=en.createElement(en.Fragment,null,en.createElement(o_,{id:i,value:r.draggable}),en.createElement(c_,{id:d,announcement:u}));return s?Pa.createPortal(v,s):v}var Vt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Vt||(Vt={}));function lc(){}function Kv(e,n){return w.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function p_(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return w.useMemo(()=>[...n].filter(i=>i!=null),[...n])}const aa=Object.freeze({x:0,y:0});function G0(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Y0(e,n){let{data:{value:s}}=e,{data:{value:i}}=n;return s-i}function v_(e,n){let{data:{value:s}}=e,{data:{value:i}}=n;return i-s}function Wv(e){let{left:n,top:s,height:i,width:r}=e;return[{x:n,y:s},{x:n+r,y:s},{x:n,y:s+i},{x:n+r,y:s+i}]}function V0(e,n){if(!e||e.length===0)return null;const[s]=e;return s[n]}function Xv(e,n,s){return n===void 0&&(n=e.left),s===void 0&&(s=e.top),{x:n+e.width*.5,y:s+e.height*.5}}const y_=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:i}=e;const r=Xv(n,n.left,n.top),c=[];for(const u of i){const{id:d}=u,m=s.get(d);if(m){const p=G0(Xv(m),r);c.push({id:d,data:{droppableContainer:u,value:p}})}}return c.sort(Y0)},b_=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:i}=e;const r=Wv(n),c=[];for(const u of i){const{id:d}=u,m=s.get(d);if(m){const p=Wv(m),v=r.reduce((b,S,_)=>b+G0(p[_],S),0),y=Number((v/4).toFixed(4));c.push({id:d,data:{droppableContainer:u,value:y}})}}return c.sort(Y0)};function x_(e,n){const s=Math.max(n.top,e.top),i=Math.max(n.left,e.left),r=Math.min(n.left+n.width,e.left+e.width),c=Math.min(n.top+n.height,e.top+e.height),u=r-i,d=c-s;if(i<r&&s<c){const m=n.width*n.height,p=e.width*e.height,v=u*d,y=v/(m+p-v);return Number(y.toFixed(4))}return 0}const S_=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:i}=e;const r=[];for(const c of i){const{id:u}=c,d=s.get(u);if(d){const m=x_(d,n);m>0&&r.push({id:u,data:{droppableContainer:c,value:m}})}}return r.sort(v_)};function w_(e,n,s){return{...e,scaleX:n&&s?n.width/s.width:1,scaleY:n&&s?n.height/s.height:1}}function K0(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:aa}function __(e){return function(s){for(var i=arguments.length,r=new Array(i>1?i-1:0),c=1;c<i;c++)r[c-1]=arguments[c];return r.reduce((u,d)=>({...u,top:u.top+e*d.y,bottom:u.bottom+e*d.y,left:u.left+e*d.x,right:u.right+e*d.x}),{...s})}}const E_=__(1);function T_(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function N_(e,n,s){const i=T_(n);if(!i)return e;const{scaleX:r,scaleY:c,x:u,y:d}=i,m=e.left-u-(1-r)*parseFloat(s),p=e.top-d-(1-c)*parseFloat(s.slice(s.indexOf(" ")+1)),v=r?e.width/r:e.width,y=c?e.height/c:e.height;return{width:v,height:y,top:p,right:m+v,bottom:p+y,left:m}}const M_={ignoreTransform:!1};function vr(e,n){n===void 0&&(n=M_);let s=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:p,transformOrigin:v}=Tn(e).getComputedStyle(e);p&&(s=N_(s,p,v))}const{top:i,left:r,width:c,height:u,bottom:d,right:m}=s;return{top:i,left:r,width:c,height:u,bottom:d,right:m}}function Qv(e){return vr(e,{ignoreTransform:!0})}function j_(e){const n=e.innerWidth,s=e.innerHeight;return{top:0,left:0,right:n,bottom:s,width:n,height:s}}function C_(e,n){return n===void 0&&(n=Tn(e).getComputedStyle(e)),n.position==="fixed"}function D_(e,n){n===void 0&&(n=Tn(e).getComputedStyle(e));const s=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const c=n[r];return typeof c=="string"?s.test(c):!1})}function Mc(e,n){const s=[];function i(r){if(n!=null&&s.length>=n||!r)return s;if(vh(r)&&r.scrollingElement!=null&&!s.includes(r.scrollingElement))return s.push(r.scrollingElement),s;if(!gr(r)||$0(r)||s.includes(r))return s;const c=Tn(e).getComputedStyle(r);return r!==e&&D_(r,c)&&s.push(r),C_(r,c)?s:i(r.parentNode)}return e?i(e):s}function W0(e){const[n]=Mc(e,1);return n??null}function cf(e){return!Tc||!e?null:Ji(e)?e:ph(e)?vh(e)||e===el(e).scrollingElement?window:gr(e)?e:null:null}function X0(e){return Ji(e)?e.scrollX:e.scrollLeft}function Q0(e){return Ji(e)?e.scrollY:e.scrollTop}function Uf(e){return{x:X0(e),y:Q0(e)}}var Jt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Jt||(Jt={}));function J0(e){return!Tc||!e?!1:e===document.scrollingElement}function eb(e){const n={x:0,y:0},s=J0(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-s.width,y:e.scrollHeight-s.height},r=e.scrollTop<=n.y,c=e.scrollLeft<=n.x,u=e.scrollTop>=i.y,d=e.scrollLeft>=i.x;return{isTop:r,isLeft:c,isBottom:u,isRight:d,maxScroll:i,minScroll:n}}const R_={x:.2,y:.2};function k_(e,n,s,i,r){let{top:c,left:u,right:d,bottom:m}=s;i===void 0&&(i=10),r===void 0&&(r=R_);const{isTop:p,isBottom:v,isLeft:y,isRight:b}=eb(e),S={x:0,y:0},_={x:0,y:0},E={height:n.height*r.y,width:n.width*r.x};return!p&&c<=n.top+E.height?(S.y=Jt.Backward,_.y=i*Math.abs((n.top+E.height-c)/E.height)):!v&&m>=n.bottom-E.height&&(S.y=Jt.Forward,_.y=i*Math.abs((n.bottom-E.height-m)/E.height)),!b&&d>=n.right-E.width?(S.x=Jt.Forward,_.x=i*Math.abs((n.right-E.width-d)/E.width)):!y&&u<=n.left+E.width&&(S.x=Jt.Backward,_.x=i*Math.abs((n.left+E.width-u)/E.width)),{direction:S,speed:_}}function A_(e){if(e===document.scrollingElement){const{innerWidth:c,innerHeight:u}=window;return{top:0,left:0,right:c,bottom:u,width:c,height:u}}const{top:n,left:s,right:i,bottom:r}=e.getBoundingClientRect();return{top:n,left:s,right:i,bottom:r,width:e.clientWidth,height:e.clientHeight}}function tb(e){return e.reduce((n,s)=>Hi(n,Uf(s)),aa)}function O_(e){return e.reduce((n,s)=>n+X0(s),0)}function z_(e){return e.reduce((n,s)=>n+Q0(s),0)}function P_(e,n){if(n===void 0&&(n=vr),!e)return;const{top:s,left:i,bottom:r,right:c}=n(e);W0(e)&&(r<=0||c<=0||s>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const I_=[["x",["left","right"],O_],["y",["top","bottom"],z_]];class bh{constructor(n,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=Mc(s),r=tb(i);this.rect={...n},this.width=n.width,this.height=n.height;for(const[c,u,d]of I_)for(const m of u)Object.defineProperty(this,m,{get:()=>{const p=d(i),v=r[c]-p;return this.rect[m]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class er{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(s=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...s)})},this.target=n}add(n,s,i){var r;(r=this.target)==null||r.addEventListener(n,s,i),this.listeners.push([n,s,i])}}function B_(e){const{EventTarget:n}=Tn(e);return e instanceof n?e:el(e)}function uf(e,n){const s=Math.abs(e.x),i=Math.abs(e.y);return typeof n=="number"?Math.sqrt(s**2+i**2)>n:"x"in n&&"y"in n?s>n.x&&i>n.y:"x"in n?s>n.x:"y"in n?i>n.y:!1}var Vn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Vn||(Vn={}));function Jv(e){e.preventDefault()}function L_(e){e.stopPropagation()}var Fe;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Fe||(Fe={}));const nb={start:[Fe.Space,Fe.Enter],cancel:[Fe.Esc],end:[Fe.Space,Fe.Enter,Fe.Tab]},q_=(e,n)=>{let{currentCoordinates:s}=n;switch(e.code){case Fe.Right:return{...s,x:s.x+25};case Fe.Left:return{...s,x:s.x-25};case Fe.Down:return{...s,y:s.y+25};case Fe.Up:return{...s,y:s.y-25}}};class xh{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:s}}=n;this.props=n,this.listeners=new er(el(s)),this.windowListeners=new er(Tn(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vn.Resize,this.handleCancel),this.windowListeners.add(Vn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:s}=this.props,i=n.node.current;i&&P_(i),s(aa)}handleKeyDown(n){if(Z0(n)){const{active:s,context:i,options:r}=this.props,{keyboardCodes:c=nb,coordinateGetter:u=q_,scrollBehavior:d="smooth"}=r,{code:m}=n;if(c.end.includes(m)){this.handleEnd(n);return}if(c.cancel.includes(m)){this.handleCancel(n);return}const{collisionRect:p}=i.current,v=p?{x:p.left,y:p.top}:aa;this.referenceCoordinates||(this.referenceCoordinates=v);const y=u(n,{active:s,context:i.current,currentCoordinates:v});if(y){const b=lr(y,v),S={x:0,y:0},{scrollableAncestors:_}=i.current;for(const E of _){const C=n.code,{isTop:k,isRight:R,isLeft:z,isBottom:B,maxScroll:q,minScroll:M}=eb(E),j=A_(E),D={x:Math.min(C===Fe.Right?j.right-j.width/2:j.right,Math.max(C===Fe.Right?j.left:j.left+j.width/2,y.x)),y:Math.min(C===Fe.Down?j.bottom-j.height/2:j.bottom,Math.max(C===Fe.Down?j.top:j.top+j.height/2,y.y))},Z=C===Fe.Right&&!R||C===Fe.Left&&!z,le=C===Fe.Down&&!B||C===Fe.Up&&!k;if(Z&&D.x!==y.x){const de=E.scrollLeft+b.x,ne=C===Fe.Right&&de<=q.x||C===Fe.Left&&de>=M.x;if(ne&&!b.y){E.scrollTo({left:de,behavior:d});return}ne?S.x=E.scrollLeft-de:S.x=C===Fe.Right?E.scrollLeft-q.x:E.scrollLeft-M.x,S.x&&E.scrollBy({left:-S.x,behavior:d});break}else if(le&&D.y!==y.y){const de=E.scrollTop+b.y,ne=C===Fe.Down&&de<=q.y||C===Fe.Up&&de>=M.y;if(ne&&!b.x){E.scrollTo({top:de,behavior:d});return}ne?S.y=E.scrollTop-de:S.y=C===Fe.Down?E.scrollTop-q.y:E.scrollTop-M.y,S.y&&E.scrollBy({top:-S.y,behavior:d});break}}this.handleMove(n,Hi(lr(y,this.referenceCoordinates),S))}}}handleMove(n,s){const{onMove:i}=this.props;n.preventDefault(),i(s)}handleEnd(n){const{onEnd:s}=this.props;n.preventDefault(),this.detach(),s()}handleCancel(n){const{onCancel:s}=this.props;n.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}xh.activators=[{eventName:"onKeyDown",handler:(e,n,s)=>{let{keyboardCodes:i=nb,onActivation:r}=n,{active:c}=s;const{code:u}=e.nativeEvent;if(i.start.includes(u)){const d=c.activatorNode.current;return d&&e.target!==d?!1:(e.preventDefault(),r?.({event:e.nativeEvent}),!0)}return!1}}];function ey(e){return!!(e&&"distance"in e)}function ty(e){return!!(e&&"delay"in e)}class Sh{constructor(n,s,i){var r;i===void 0&&(i=B_(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=s;const{event:c}=n,{target:u}=c;this.props=n,this.events=s,this.document=el(u),this.documentListeners=new er(this.document),this.listeners=new er(i),this.windowListeners=new er(Tn(u)),this.initialCoordinates=(r=qf(c))!=null?r:aa,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:s,bypassActivationConstraint:i}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(Vn.Resize,this.handleCancel),this.windowListeners.add(Vn.DragStart,Jv),this.windowListeners.add(Vn.VisibilityChange,this.handleCancel),this.windowListeners.add(Vn.ContextMenu,Jv),this.documentListeners.add(Vn.Keydown,this.handleKeydown),s){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ty(s)){this.timeoutId=setTimeout(this.handleStart,s.delay),this.handlePending(s);return}if(ey(s)){this.handlePending(s);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,s){const{active:i,onPending:r}=this.props;r(i,n,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:n}=this,{onStart:s}=this.props;n&&(this.activated=!0,this.documentListeners.add(Vn.Click,L_,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vn.SelectionChange,this.removeTextSelection),s(n))}handleMove(n){var s;const{activated:i,initialCoordinates:r,props:c}=this,{onMove:u,options:{activationConstraint:d}}=c;if(!r)return;const m=(s=qf(n))!=null?s:aa,p=lr(r,m);if(!i&&d){if(ey(d)){if(d.tolerance!=null&&uf(p,d.tolerance))return this.handleCancel();if(uf(p,d.distance))return this.handleStart()}if(ty(d)&&uf(p,d.tolerance))return this.handleCancel();this.handlePending(d,p);return}n.cancelable&&n.preventDefault(),u(m)}handleEnd(){const{onAbort:n,onEnd:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleCancel(){const{onAbort:n,onCancel:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleKeydown(n){n.code===Fe.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const U_={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class wh extends Sh{constructor(n){const{event:s}=n,i=el(s.target);super(n,U_,i)}}wh.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:i}=n;return!s.isPrimary||s.button!==0?!1:(i?.({event:s}),!0)}}];const $_={move:{name:"mousemove"},end:{name:"mouseup"}};var $f;(function(e){e[e.RightClick=2]="RightClick"})($f||($f={}));class H_ extends Sh{constructor(n){super(n,$_,el(n.event.target))}}H_.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:i}=n;return s.button===$f.RightClick?!1:(i?.({event:s}),!0)}}];const df={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Z_ extends Sh{constructor(n){super(n,df)}static setup(){return window.addEventListener(df.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(df.move.name,n)};function n(){}}}Z_.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:i}=n;const{touches:r}=s;return r.length>1?!1:(i?.({event:s}),!0)}}];var tr;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(tr||(tr={}));var rc;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(rc||(rc={}));function F_(e){let{acceleration:n,activator:s=tr.Pointer,canScroll:i,draggingRect:r,enabled:c,interval:u=5,order:d=rc.TreeOrder,pointerCoordinates:m,scrollableAncestors:p,scrollableAncestorRects:v,delta:y,threshold:b}=e;const S=Y_({delta:y,disabled:!c}),[_,E]=a_(),C=w.useRef({x:0,y:0}),k=w.useRef({x:0,y:0}),R=w.useMemo(()=>{switch(s){case tr.Pointer:return m?{top:m.y,bottom:m.y,left:m.x,right:m.x}:null;case tr.DraggableRect:return r}},[s,r,m]),z=w.useRef(null),B=w.useCallback(()=>{const M=z.current;if(!M)return;const j=C.current.x*k.current.x,D=C.current.y*k.current.y;M.scrollBy(j,D)},[]),q=w.useMemo(()=>d===rc.TreeOrder?[...p].reverse():p,[d,p]);w.useEffect(()=>{if(!c||!p.length||!R){E();return}for(const M of q){if(i?.(M)===!1)continue;const j=p.indexOf(M),D=v[j];if(!D)continue;const{direction:Z,speed:le}=k_(M,D,R,n,b);for(const de of["x","y"])S[de][Z[de]]||(le[de]=0,Z[de]=0);if(le.x>0||le.y>0){E(),z.current=M,_(B,u),C.current=le,k.current=Z;return}}C.current={x:0,y:0},k.current={x:0,y:0},E()},[n,B,i,E,c,u,JSON.stringify(R),JSON.stringify(S),_,p,q,v,JSON.stringify(b)])}const G_={x:{[Jt.Backward]:!1,[Jt.Forward]:!1},y:{[Jt.Backward]:!1,[Jt.Forward]:!1}};function Y_(e){let{delta:n,disabled:s}=e;const i=Lf(n);return pr(r=>{if(s||!i||!r)return G_;const c={x:Math.sign(n.x-i.x),y:Math.sign(n.y-i.y)};return{x:{[Jt.Backward]:r.x[Jt.Backward]||c.x===-1,[Jt.Forward]:r.x[Jt.Forward]||c.x===1},y:{[Jt.Backward]:r.y[Jt.Backward]||c.y===-1,[Jt.Forward]:r.y[Jt.Forward]||c.y===1}}},[s,n,i])}function V_(e,n){const s=n!=null?e.get(n):void 0,i=s?s.node.current:null;return pr(r=>{var c;return n==null?null:(c=i??r)!=null?c:null},[i,n])}function K_(e,n){return w.useMemo(()=>e.reduce((s,i)=>{const{sensor:r}=i,c=r.activators.map(u=>({eventName:u.eventName,handler:n(u.handler,i)}));return[...s,...c]},[]),[e,n])}var rr;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(rr||(rr={}));var Hf;(function(e){e.Optimized="optimized"})(Hf||(Hf={}));const ny=new Map;function W_(e,n){let{dragging:s,dependencies:i,config:r}=n;const[c,u]=w.useState(null),{frequency:d,measure:m,strategy:p}=r,v=w.useRef(e),y=C(),b=ir(y),S=w.useCallback(function(k){k===void 0&&(k=[]),!b.current&&u(R=>R===null?k:R.concat(k.filter(z=>!R.includes(z))))},[b]),_=w.useRef(null),E=pr(k=>{if(y&&!s)return ny;if(!k||k===ny||v.current!==e||c!=null){const R=new Map;for(let z of e){if(!z)continue;if(c&&c.length>0&&!c.includes(z.id)&&z.rect.current){R.set(z.id,z.rect.current);continue}const B=z.node.current,q=B?new bh(m(B),B):null;z.rect.current=q,q&&R.set(z.id,q)}return R}return k},[e,c,s,y,m]);return w.useEffect(()=>{v.current=e},[e]),w.useEffect(()=>{y||S()},[s,y]),w.useEffect(()=>{c&&c.length>0&&u(null)},[JSON.stringify(c)]),w.useEffect(()=>{y||typeof d!="number"||_.current!==null||(_.current=setTimeout(()=>{S(),_.current=null},d))},[d,y,S,...i]),{droppableRects:E,measureDroppableContainers:S,measuringScheduled:c!=null};function C(){switch(p){case rr.Always:return!1;case rr.BeforeDragging:return s;default:return!s}}}function ab(e,n){return pr(s=>e?s||(typeof n=="function"?n(e):e):null,[n,e])}function X_(e,n){return ab(e,n)}function Q_(e){let{callback:n,disabled:s}=e;const i=yh(n),r=w.useMemo(()=>{if(s||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(i)},[i,s]);return w.useEffect(()=>()=>r?.disconnect(),[r]),r}function jc(e){let{callback:n,disabled:s}=e;const i=yh(n),r=w.useMemo(()=>{if(s||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(i)},[s]);return w.useEffect(()=>()=>r?.disconnect(),[r]),r}function J_(e){return new bh(vr(e),e)}function ay(e,n,s){n===void 0&&(n=J_);const[i,r]=w.useState(null);function c(){r(m=>{if(!e)return null;if(e.isConnected===!1){var p;return(p=m??s)!=null?p:null}const v=n(e);return JSON.stringify(m)===JSON.stringify(v)?m:v})}const u=Q_({callback(m){if(e)for(const p of m){const{type:v,target:y}=p;if(v==="childList"&&y instanceof HTMLElement&&y.contains(e)){c();break}}}}),d=jc({callback:c});return vs(()=>{c(),e?(d?.observe(e),u?.observe(document.body,{childList:!0,subtree:!0})):(d?.disconnect(),u?.disconnect())},[e]),i}function eE(e){const n=ab(e);return K0(e,n)}const sy=[];function tE(e){const n=w.useRef(e),s=pr(i=>e?i&&i!==sy&&e&&n.current&&e.parentNode===n.current.parentNode?i:Mc(e):sy,[e]);return w.useEffect(()=>{n.current=e},[e]),s}function nE(e){const[n,s]=w.useState(null),i=w.useRef(e),r=w.useCallback(c=>{const u=cf(c.target);u&&s(d=>d?(d.set(u,Uf(u)),new Map(d)):null)},[]);return w.useEffect(()=>{const c=i.current;if(e!==c){u(c);const d=e.map(m=>{const p=cf(m);return p?(p.addEventListener("scroll",r,{passive:!0}),[p,Uf(p)]):null}).filter(m=>m!=null);s(d.length?new Map(d):null),i.current=e}return()=>{u(e),u(c)};function u(d){d.forEach(m=>{const p=cf(m);p?.removeEventListener("scroll",r)})}},[r,e]),w.useMemo(()=>e.length?n?Array.from(n.values()).reduce((c,u)=>Hi(c,u),aa):tb(e):aa,[e,n])}function iy(e,n){n===void 0&&(n=[]);const s=w.useRef(null);return w.useEffect(()=>{s.current=null},n),w.useEffect(()=>{const i=e!==aa;i&&!s.current&&(s.current=e),!i&&s.current&&(s.current=null)},[e]),s.current?lr(e,s.current):aa}function aE(e){w.useEffect(()=>{if(!Tc)return;const n=e.map(s=>{let{sensor:i}=s;return i.setup==null?void 0:i.setup()});return()=>{for(const s of n)s?.()}},e.map(n=>{let{sensor:s}=n;return s}))}function sE(e,n){return w.useMemo(()=>e.reduce((s,i)=>{let{eventName:r,handler:c}=i;return s[r]=u=>{c(u,n)},s},{}),[e,n])}function sb(e){return w.useMemo(()=>e?j_(e):null,[e])}const ly=[];function iE(e,n){n===void 0&&(n=vr);const[s]=e,i=sb(s?Tn(s):null),[r,c]=w.useState(ly);function u(){c(()=>e.length?e.map(m=>J0(m)?i:new bh(n(m),m)):ly)}const d=jc({callback:u});return vs(()=>{d?.disconnect(),u(),e.forEach(m=>d?.observe(m))},[e]),r}function lE(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return gr(n)?n:e}function rE(e){let{measure:n}=e;const[s,i]=w.useState(null),r=w.useCallback(p=>{for(const{target:v}of p)if(gr(v)){i(y=>{const b=n(v);return y?{...y,width:b.width,height:b.height}:b});break}},[n]),c=jc({callback:r}),u=w.useCallback(p=>{const v=lE(p);c?.disconnect(),v&&c?.observe(v),i(v?n(v):null)},[n,c]),[d,m]=sc(u);return w.useMemo(()=>({nodeRef:d,rect:s,setRef:m}),[s,d,m])}const oE=[{sensor:wh,options:{}},{sensor:xh,options:{}}],cE={current:{}},Jo={draggable:{measure:Qv},droppable:{measure:Qv,strategy:rr.WhileDragging,frequency:Hf.Optimized},dragOverlay:{measure:vr}};class nr extends Map{get(n){var s;return n!=null&&(s=super.get(n))!=null?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:s}=n;return!s})}getNodeFor(n){var s,i;return(s=(i=this.get(n))==null?void 0:i.node.current)!=null?s:void 0}}const uE={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new nr,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:lc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Jo,measureDroppableContainers:lc,windowRect:null,measuringScheduled:!1},dE={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:lc,draggableNodes:new Map,over:null,measureDroppableContainers:lc},Cc=w.createContext(dE),fE=w.createContext(uE);function hE(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new nr}}}function mE(e,n){switch(n.type){case Vt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case Vt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case Vt.DragEnd:case Vt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Vt.RegisterDroppable:{const{element:s}=n,{id:i}=s,r=new nr(e.droppable.containers);return r.set(i,s),{...e,droppable:{...e.droppable,containers:r}}}case Vt.SetDroppableDisabled:{const{id:s,key:i,disabled:r}=n,c=e.droppable.containers.get(s);if(!c||i!==c.key)return e;const u=new nr(e.droppable.containers);return u.set(s,{...c,disabled:r}),{...e,droppable:{...e.droppable,containers:u}}}case Vt.UnregisterDroppable:{const{id:s,key:i}=n,r=e.droppable.containers.get(s);if(!r||i!==r.key)return e;const c=new nr(e.droppable.containers);return c.delete(s),{...e,droppable:{...e.droppable,containers:c}}}default:return e}}function gE(e){let{disabled:n}=e;const{active:s,activatorEvent:i,draggableNodes:r}=w.useContext(Cc),c=Lf(i),u=Lf(s?.id);return w.useEffect(()=>{if(!n&&!i&&c&&u!=null){if(!Z0(c)||document.activeElement===c.target)return;const d=r.get(u);if(!d)return;const{activatorNode:m,node:p}=d;if(!m.current&&!p.current)return;requestAnimationFrame(()=>{for(const v of[m.current,p.current]){if(!v)continue;const y=l_(v);if(y){y.focus();break}}})}},[i,n,r,u,c]),null}function pE(e,n){let{transform:s,...i}=n;return e!=null&&e.length?e.reduce((r,c)=>c({transform:r,...i}),s):s}function vE(e){return w.useMemo(()=>({draggable:{...Jo.draggable,...e?.draggable},droppable:{...Jo.droppable,...e?.droppable},dragOverlay:{...Jo.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function yE(e){let{activeNode:n,measure:s,initialRect:i,config:r=!0}=e;const c=w.useRef(!1),{x:u,y:d}=typeof r=="boolean"?{x:r,y:r}:r;vs(()=>{if(!u&&!d||!n){c.current=!1;return}if(c.current||!i)return;const p=n?.node.current;if(!p||p.isConnected===!1)return;const v=s(p),y=K0(v,i);if(u||(y.x=0),d||(y.y=0),c.current=!0,Math.abs(y.x)>0||Math.abs(y.y)>0){const b=W0(p);b&&b.scrollBy({top:y.y,left:y.x})}},[n,u,d,i,s])}const ib=w.createContext({...aa,scaleX:1,scaleY:1});var fs;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(fs||(fs={}));const bE=w.memo(function(n){var s,i,r,c;let{id:u,accessibility:d,autoScroll:m=!0,children:p,sensors:v=oE,collisionDetection:y=S_,measuring:b,modifiers:S,..._}=n;const E=w.useReducer(mE,void 0,hE),[C,k]=E,[R,z]=f_(),[B,q]=w.useState(fs.Uninitialized),M=B===fs.Initialized,{draggable:{active:j,nodes:D,translate:Z},droppable:{containers:le}}=C,de=j!=null?D.get(j):null,ne=w.useRef({initial:null,translated:null}),ce=w.useMemo(()=>{var wt;return j!=null?{id:j,data:(wt=de?.data)!=null?wt:cE,rect:ne}:null},[j,de]),$=w.useRef(null),[X,L]=w.useState(null),[Y,te]=w.useState(null),A=ir(_,Object.values(_)),V=Nc("DndDescribedBy",u),N=w.useMemo(()=>le.getEnabled(),[le]),I=vE(b),{droppableRects:J,measureDroppableContainers:oe,measuringScheduled:ue}=W_(N,{dragging:M,dependencies:[Z.x,Z.y],config:I.droppable}),re=V_(D,j),ye=w.useMemo(()=>Y?qf(Y):null,[Y]),xe=fa(),ge=X_(re,I.draggable.measure);yE({activeNode:j!=null?D.get(j):null,config:xe.layoutShiftCompensation,initialRect:ge,measure:I.draggable.measure});const Ee=ay(re,I.draggable.measure,ge),Be=ay(re?re.parentElement:null),lt=w.useRef({activatorEvent:null,active:null,activeNode:re,collisionRect:null,collisions:null,droppableRects:J,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:le,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),At=le.getNodeFor((s=lt.current.over)==null?void 0:s.id),dt=rE({measure:I.dragOverlay.measure}),Kt=(i=dt.nodeRef.current)!=null?i:re,gt=M?(r=dt.rect)!=null?r:Ee:null,tn=!!(dt.nodeRef.current&&dt.rect),nn=eE(tn?null:Ee),Gt=sb(Kt?Tn(Kt):null),fe=tE(M?At??re:null),Oe=iE(fe),De=pE(S,{transform:{x:Z.x-nn.x,y:Z.y-nn.y,scaleX:1,scaleY:1},activatorEvent:Y,active:ce,activeNodeRect:Ee,containerNodeRect:Be,draggingNodeRect:gt,over:lt.current.over,overlayNodeRect:dt.rect,scrollableAncestors:fe,scrollableAncestorRects:Oe,windowRect:Gt}),Je=ye?Hi(ye,Z):null,Pe=nE(fe),Wt=iy(Pe),un=iy(Pe,[Ee]),Pt=Hi(De,Wt),K=gt?E_(gt,De):null,he=ce&&K?y({active:ce,collisionRect:K,droppableRects:J,droppableContainers:N,pointerCoordinates:Je}):null,et=V0(he,"id"),[Ge,fn]=w.useState(null),an=tn?De:Hi(De,un),ft=w_(an,(c=Ge?.rect)!=null?c:null,Ee),It=w.useRef(null),Nt=w.useCallback((wt,ze)=>{let{sensor:Bt,options:se}=ze;if($.current==null)return;const me=D.get($.current);if(!me)return;const be=wt.nativeEvent,Me=new Bt({active:$.current,activeNode:me,event:be,options:se,context:lt,onAbort(rt){if(!D.get(rt))return;const{onDragAbort:Ve}=A.current,vt={id:rt};Ve?.(vt),R({type:"onDragAbort",event:vt})},onPending(rt,Ue,Ve,vt){if(!D.get(rt))return;const{onDragPending:Se}=A.current,hn={id:rt,constraint:Ue,initialCoordinates:Ve,offset:vt};Se?.(hn),R({type:"onDragPending",event:hn})},onStart(rt){const Ue=$.current;if(Ue==null)return;const Ve=D.get(Ue);if(!Ve)return;const{onDragStart:vt}=A.current,jt={activatorEvent:be,active:{id:Ue,data:Ve.data,rect:ne}};Pa.unstable_batchedUpdates(()=>{vt?.(jt),q(fs.Initializing),k({type:Vt.DragStart,initialCoordinates:rt,active:Ue}),R({type:"onDragStart",event:jt}),L(It.current),te(be)})},onMove(rt){k({type:Vt.DragMove,coordinates:rt})},onEnd:Ye(Vt.DragEnd),onCancel:Ye(Vt.DragCancel)});It.current=Me;function Ye(rt){return async function(){const{active:Ve,collisions:vt,over:jt,scrollAdjustedTranslate:Se}=lt.current;let hn=null;if(Ve&&Se){const{cancelDrop:mn}=A.current;hn={activatorEvent:be,active:Ve,collisions:vt,delta:Se,over:jt},rt===Vt.DragEnd&&typeof mn=="function"&&await Promise.resolve(mn(hn))&&(rt=Vt.DragCancel)}$.current=null,Pa.unstable_batchedUpdates(()=>{k({type:rt}),q(fs.Uninitialized),fn(null),L(null),te(null),It.current=null;const mn=rt===Vt.DragEnd?"onDragEnd":"onDragCancel";if(hn){const Te=A.current[mn];Te?.(hn),R({type:mn,event:hn})}})}}},[D]),nl=w.useCallback((wt,ze)=>(Bt,se)=>{const me=Bt.nativeEvent,be=D.get(se);if($.current!==null||!be||me.dndKit||me.defaultPrevented)return;const Me={active:be};wt(Bt,ze.options,Me)===!0&&(me.dndKit={capturedBy:ze.sensor},$.current=se,Nt(Bt,ze))},[D,Nt]),Vs=K_(v,nl);aE(v),vs(()=>{Ee&&B===fs.Initializing&&q(fs.Initialized)},[Ee,B]),w.useEffect(()=>{const{onDragMove:wt}=A.current,{active:ze,activatorEvent:Bt,collisions:se,over:me}=lt.current;if(!ze||!Bt)return;const be={active:ze,activatorEvent:Bt,collisions:se,delta:{x:Pt.x,y:Pt.y},over:me};Pa.unstable_batchedUpdates(()=>{wt?.(be),R({type:"onDragMove",event:be})})},[Pt.x,Pt.y]),w.useEffect(()=>{const{active:wt,activatorEvent:ze,collisions:Bt,droppableContainers:se,scrollAdjustedTranslate:me}=lt.current;if(!wt||$.current==null||!ze||!me)return;const{onDragOver:be}=A.current,Me=se.get(et),Ye=Me&&Me.rect.current?{id:Me.id,rect:Me.rect.current,data:Me.data,disabled:Me.disabled}:null,rt={active:wt,activatorEvent:ze,collisions:Bt,delta:{x:me.x,y:me.y},over:Ye};Pa.unstable_batchedUpdates(()=>{fn(Ye),be?.(rt),R({type:"onDragOver",event:rt})})},[et]),vs(()=>{lt.current={activatorEvent:Y,active:ce,activeNode:re,collisionRect:K,collisions:he,droppableRects:J,draggableNodes:D,draggingNode:Kt,draggingNodeRect:gt,droppableContainers:le,over:Ge,scrollableAncestors:fe,scrollAdjustedTranslate:Pt},ne.current={initial:gt,translated:K}},[ce,re,he,K,D,Kt,gt,J,le,Ge,fe,Pt]),F_({...xe,delta:Z,draggingRect:K,pointerCoordinates:Je,scrollableAncestors:fe,scrollableAncestorRects:Oe});const al=w.useMemo(()=>({active:ce,activeNode:re,activeNodeRect:Ee,activatorEvent:Y,collisions:he,containerNodeRect:Be,dragOverlay:dt,draggableNodes:D,droppableContainers:le,droppableRects:J,over:Ge,measureDroppableContainers:oe,scrollableAncestors:fe,scrollableAncestorRects:Oe,measuringConfiguration:I,measuringScheduled:ue,windowRect:Gt}),[ce,re,Ee,Y,he,Be,dt,D,le,J,Ge,oe,fe,Oe,I,ue,Gt]),qa=w.useMemo(()=>({activatorEvent:Y,activators:Vs,active:ce,activeNodeRect:Ee,ariaDescribedById:{draggable:V},dispatch:k,draggableNodes:D,over:Ge,measureDroppableContainers:oe}),[Y,Vs,ce,Ee,k,V,D,Ge,oe]);return en.createElement(F0.Provider,{value:z},en.createElement(Cc.Provider,{value:qa},en.createElement(fE.Provider,{value:al},en.createElement(ib.Provider,{value:ft},p)),en.createElement(gE,{disabled:d?.restoreFocus===!1})),en.createElement(g_,{...d,hiddenTextDescribedById:V}));function fa(){const wt=X?.autoScrollEnabled===!1,ze=typeof m=="object"?m.enabled===!1:m===!1,Bt=M&&!wt&&!ze;return typeof m=="object"?{...m,enabled:Bt}:{enabled:Bt}}}),xE=w.createContext(null),ry="button",SE="Draggable";function lb(e){let{id:n,data:s,disabled:i=!1,attributes:r}=e;const c=Nc(SE),{activators:u,activatorEvent:d,active:m,activeNodeRect:p,ariaDescribedById:v,draggableNodes:y,over:b}=w.useContext(Cc),{role:S=ry,roleDescription:_="draggable",tabIndex:E=0}=r??{},C=m?.id===n,k=w.useContext(C?ib:xE),[R,z]=sc(),[B,q]=sc(),M=sE(u,n),j=ir(s);vs(()=>(y.set(n,{id:n,key:c,node:R,activatorNode:B,data:j}),()=>{const Z=y.get(n);Z&&Z.key===c&&y.delete(n)}),[y,n]);const D=w.useMemo(()=>({role:S,tabIndex:E,"aria-disabled":i,"aria-pressed":C&&S===ry?!0:void 0,"aria-roledescription":_,"aria-describedby":v.draggable}),[i,S,E,C,_,v.draggable]);return{active:m,activatorEvent:d,activeNodeRect:p,attributes:D,isDragging:C,listeners:i?void 0:M,node:R,over:b,setNodeRef:z,setActivatorNodeRef:q,transform:k}}const wE="Droppable",_E={timeout:25};function rb(e){let{data:n,disabled:s=!1,id:i,resizeObserverConfig:r}=e;const c=Nc(wE),{active:u,dispatch:d,over:m,measureDroppableContainers:p}=w.useContext(Cc),v=w.useRef({disabled:s}),y=w.useRef(!1),b=w.useRef(null),S=w.useRef(null),{disabled:_,updateMeasurementsFor:E,timeout:C}={..._E,...r},k=ir(E??i),R=w.useCallback(()=>{if(!y.current){y.current=!0;return}S.current!=null&&clearTimeout(S.current),S.current=setTimeout(()=>{p(Array.isArray(k.current)?k.current:[k.current]),S.current=null},C)},[C]),z=jc({callback:R,disabled:_||!u}),B=w.useCallback((D,Z)=>{z&&(Z&&(z.unobserve(Z),y.current=!1),D&&z.observe(D))},[z]),[q,M]=sc(B),j=ir(n);return w.useEffect(()=>{!z||!q.current||(z.disconnect(),y.current=!1,z.observe(q.current))},[q,z]),w.useEffect(()=>(d({type:Vt.RegisterDroppable,element:{id:i,key:c,disabled:s,node:q,rect:b,data:j}}),()=>d({type:Vt.UnregisterDroppable,key:c,id:i})),[i]),w.useEffect(()=>{s!==v.current.disabled&&(d({type:Vt.SetDroppableDisabled,id:i,key:c,disabled:s}),v.current.disabled=s)},[i,c,s,d]),{active:u,rect:b,isOver:m?.id===i,node:q,over:m,setNodeRef:M}}function oc(e){if(!e)return!1;const n=e.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const EE=[Fe.Down,Fe.Right,Fe.Up,Fe.Left],TE=(e,n)=>{let{context:{active:s,collisionRect:i,droppableRects:r,droppableContainers:c,over:u,scrollableAncestors:d}}=n;if(EE.includes(e.code)){if(e.preventDefault(),!s||!i)return;const m=[];c.getEnabled().forEach(y=>{if(!y||y!=null&&y.disabled)return;const b=r.get(y.id);if(b)switch(e.code){case Fe.Down:i.top<b.top&&m.push(y);break;case Fe.Up:i.top>b.top&&m.push(y);break;case Fe.Left:i.left>b.left&&m.push(y);break;case Fe.Right:i.left<b.left&&m.push(y);break}});const p=b_({collisionRect:i,droppableRects:r,droppableContainers:m});let v=V0(p,"id");if(v===u?.id&&p.length>1&&(v=p[1].id),v!=null){const y=c.get(s.id),b=c.get(v),S=b?r.get(b.id):null,_=b?.node.current;if(_&&S&&y&&b){const C=Mc(_).some((M,j)=>d[j]!==M),k=ob(y,b),R=NE(y,b),z=C||!k?{x:0,y:0}:{x:R?i.width-S.width:0,y:R?i.height-S.height:0},B={x:S.left,y:S.top};return z.x&&z.y?B:lr(B,z)}}}};function ob(e,n){return!oc(e)||!oc(n)?!1:e.data.current.sortable.containerId===n.data.current.sortable.containerId}function NE(e,n){return!oc(e)||!oc(n)||!ob(e,n)?!1:e.data.current.sortable.index<n.data.current.sortable.index}const oy=e=>Symbol.iterator in e,cy=e=>"entries"in e,uy=(e,n)=>{const s=e instanceof Map?e:new Map(e.entries()),i=n instanceof Map?n:new Map(n.entries());if(s.size!==i.size)return!1;for(const[r,c]of s)if(!i.has(r)||!Object.is(c,i.get(r)))return!1;return!0},ME=(e,n)=>{const s=e[Symbol.iterator](),i=n[Symbol.iterator]();let r=s.next(),c=i.next();for(;!r.done&&!c.done;){if(!Object.is(r.value,c.value))return!1;r=s.next(),c=i.next()}return!!r.done&&!!c.done};function jE(e,n){return Object.is(e,n)?!0:typeof e!="object"||e===null||typeof n!="object"||n===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(n)?!1:oy(e)&&oy(n)?cy(e)&&cy(n)?uy(e,n):ME(e,n):uy({entries:()=>Object.entries(e)},{entries:()=>Object.entries(n)})}function CE(e){const n=en.useRef(void 0);return s=>{const i=e(s);return jE(n.current,i)?n.current:n.current=i}}const DE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),RE=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,s,i)=>i?i.toUpperCase():s.toLowerCase()),dy=e=>{const n=RE(e);return n.charAt(0).toUpperCase()+n.slice(1)},cb=(...e)=>e.filter((n,s,i)=>!!n&&n.trim()!==""&&i.indexOf(n)===s).join(" ").trim(),kE=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};var AE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const OE=w.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:r="",children:c,iconNode:u,...d},m)=>w.createElement("svg",{ref:m,...AE,width:n,height:n,stroke:e,strokeWidth:i?Number(s)*24/Number(n):s,className:cb("lucide",r),...!c&&!kE(d)&&{"aria-hidden":"true"},...d},[...u.map(([p,v])=>w.createElement(p,v)),...Array.isArray(c)?c:[c]]));const Ft=(e,n)=>{const s=w.forwardRef(({className:i,...r},c)=>w.createElement(OE,{ref:c,iconNode:n,className:cb(`lucide-${DE(dy(e))}`,`lucide-${e}`,i),...r}));return s.displayName=dy(e),s};const zE=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],PE=Ft("chevron-down",zE);const IE=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],BE=Ft("chevron-right",IE);const LE=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],qE=Ft("copy",LE);const UE=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],$E=Ft("external-link",UE);const HE=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],ZE=Ft("git-branch",HE);const FE=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],GE=Ft("grip-vertical",FE);const YE=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],VE=Ft("hammer",YE);const KE=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],_h=Ft("link-2",KE);const WE=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ub=Ft("lock",WE);const XE=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],QE=Ft("pin",XE);const JE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],eT=Ft("plus",JE);const tT=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],nT=Ft("search",tT);const aT=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],fy=Ft("sliders-horizontal",aT);const sT=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],iT=Ft("sparkles",sT);const lT=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],db=Ft("trash-2",lT);const rT=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]],fb=Ft("tree-pine",rT);const oT=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],cT=Ft("triangle-alert",oT);const uT=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],dT=Ft("undo-2",uT);const fT=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],hT=Ft("upload",fT);const mT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gT=Ft("x",mT),hb="build-solver:theme-mode",mb="minimal";function pT(e){return e==="classic"?"classic":mb}function gb(){return typeof window>"u"?mb:pT(window.localStorage.getItem(hb))}function vT(e){typeof window>"u"||window.localStorage.setItem(hb,e)}function pb(e){typeof document>"u"||(document.documentElement.dataset.wbTheme=e)}const ys=["helmet","chestplate","leggings","boots","ring","bracelet","necklace","weapon"],nt=["helmet","chestplate","leggings","boots","ring1","ring2","bracelet","necklace","weapon"],da=e=>e==="ring1"||e==="ring2"?"ring":e,cc=e=>{switch(e){case"ring1":return"Ring 1";case"ring2":return"Ring 2";default:return e.charAt(0).toUpperCase()+e.slice(1)}};function Eh(e){return e==="weapon"?"Weapon":e.charAt(0).toUpperCase()+e.slice(1)}const vb={spear:"Warrior",dagger:"Assassin",wand:"Mage",bow:"Archer",relik:"Shaman"};function uc(e){return vb[e]??null}function yT(e,n){return e in vb?"weapon":ys.includes(e)?e:n==="weapon"?"weapon":e==="ring"?"ring":null}function yb(e,n){return!n||!e.classReq?!0:e.classReq===n}function bT(e,n){return e.level<=n}const xT=["hp","hpBonus","hprRaw","hprPct","mr","ms","ls","sdPct","sdRaw","mdPct","mdRaw","poison","spd","atkTier","averageDps","strReq","dexReq","intReq","defReq","agiReq","str","dex","int","def","agi","eDef","tDef","wDef","fDef","aDef","eDamPct","tDamPct","wDamPct","fDamPct","aDamPct","damPct","rDamPct","nDamPct","slots","lvl"],ST=["hpBonus","hprRaw","hprPct","mr","ms","ls","sdPct","sdRaw","mdPct","mdRaw","poison","spd","atkTier","eDamPct","tDamPct","wDamPct","fDamPct","aDamPct","damPct"];function hy(e){const n=Math.round(e);return n===0&&e!==0?e>0?1:-1:n}function wT(e,n){return!Number.isFinite(n)||n===0?0:n>0?hy(n*1.3):hy(n*.7)}const _T=new Set(["Twilight-Gilded Cloak"]);function ke(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const n=Number(e);if(Number.isFinite(n))return n}return 0}function On(e){return typeof e=="string"?e:""}function ET(e){return Array.isArray(e)?e.filter(n=>typeof n=="string"):[]}function TT(e,n){const s=On(e).trim();if(!s)return uc(n);switch(s.toLowerCase()){case"warrior":return"Warrior";case"assassin":return"Assassin";case"mage":return"Mage";case"archer":return"Archer";case"shaman":return"Shaman";default:return uc(n)}}function NT(e){return{hp:ke(e.hp),hpBonus:ke(e.hpBonus),hprRaw:ke(e.hprRaw),hprPct:ke(e.hprPct),mr:ke(e.mr),ms:ke(e.ms),ls:ke(e.ls),sdPct:ke(e.sdPct),sdRaw:ke(e.sdRaw),mdPct:ke(e.mdPct),mdRaw:ke(e.mdRaw),poison:ke(e.poison),spd:ke(e.spd),atkTier:ke(e.atkTier),baseDps:ke(e.averageDps),reqStr:ke(e.strReq),reqDex:ke(e.dexReq),reqInt:ke(e.intReq),reqDef:ke(e.defReq),reqAgi:ke(e.agiReq),spStr:ke(e.str),spDex:ke(e.dex),spInt:ke(e.int),spDef:ke(e.def),spAgi:ke(e.agi),eDef:ke(e.eDef),tDef:ke(e.tDef),wDef:ke(e.wDef),fDef:ke(e.fDef),aDef:ke(e.aDef),eDamPct:ke(e.eDamPct),tDamPct:ke(e.tDamPct),wDamPct:ke(e.wDamPct),fDamPct:ke(e.fDamPct),aDamPct:ke(e.aDamPct),damPct:ke(e.damPct),rDamPct:ke(e.rDamPct),nDamPct:ke(e.nDamPct)}}function MT(e){const n={};for(const s of xT)n[s]=ke(e[s]);return n.reqTotal=n.strReq+n.dexReq+n.intReq+n.defReq+n.agiReq,n.skillPointTotal=n.str+n.dex+n.int+n.def+n.agi,n.offenseScore=n.averageDps+n.sdPct*1.4+n.mdPct*1.15+n.sdRaw*.12+n.mdRaw*.12+(n.damPct+n.rDamPct+n.nDamPct)*.8+(n.eDamPct+n.tDamPct+n.wDamPct+n.fDamPct+n.aDamPct)*.5+n.atkTier*7+n.poison*.03,n.ehpProxy=n.hp+n.hpBonus+(n.eDef+n.tDef+n.wDef+n.fDef+n.aDef)*.45+n.hprRaw*1.2+n.hprPct*2.5,n.utilityScore=n.spd*1.8+n.mr*8+n.ms*7+n.ls*6,n.sumSpPct=n.spPct1+n.spPct2+n.spPct3+n.spPct4,n.sumSpRaw=n.spRaw1+n.spRaw2+n.spRaw3+n.spRaw4,n}function jT(e){if(typeof e.remapID<"u")return null;const n=On(e.type).toLowerCase(),s=On(e.category).toLowerCase(),i=yT(n,s);if(!i)return null;const r=On(e.displayName)||On(e.name),c=On(e.tier)||"Normal",u=ke(e.lvl),d=ET(e.majorIds),m=NT(e),p=MT(e),v=!!e.fixID||!!e.identified,y=_T.has(r),b=v||y;if(!b)for(const E of ST){const C=m[E],k=wT(E,C);m[E]=k,Object.prototype.hasOwnProperty.call(p,E)&&(p[E]=k)}const S={baseDps:m.baseDps,offense:p.offenseScore,ehpProxy:p.ehpProxy,utility:p.utilityScore,skillPointTotal:p.skillPointTotal,reqTotal:p.reqTotal},_=[r,On(e.name),On(e.lore),n,c,s,On(e.classReq),...d];return{id:ke(e.id),name:On(e.name),displayName:r,category:i,type:n,sourceCategory:s,tier:c,level:u,classReq:TT(e.classReq,n),majorIds:d,powderSlots:ke(e.slots),atkSpd:On(e.atkSpd),restricted:On(e.restrict)!=="",deprecated:On(e.restrict).toUpperCase()==="DEPRECATED",numeric:m,numericIndex:p,fixRolledIds:b,searchText:_.filter(Boolean).join(" ").toLowerCase(),majorIdsText:d.join(" ").toLowerCase(),roughScoreFields:S,legacyRaw:e}}function CT(e,n,s){if(!Number.isFinite(s))return;const i=e[n];if(!i){e[n]={min:s,max:s};return}i.min=Math.min(i.min,s),i.max=Math.max(i.max,s)}function DT(e){const n=e.items.map(jT).filter(E=>E!==null);n.sort((E,C)=>E.displayName.localeCompare(C.displayName));const s=new Map,i=new Map,r=new Map,c=new Map(ys.map(E=>[E,[]])),u=new Set,d=new Set,m=new Set,p=new Set,v={},y=new Map;for(const E of n){s.set(E.id,E),i.set(E.displayName.toLowerCase(),E.id),r.has(E.type)||r.set(E.type,[]),r.get(E.type).push(E.id),c.get(E.category).push(E.id),u.add(E.tier),d.add(E.type),E.classReq&&m.add(E.classReq);for(const C of E.majorIds)C&&p.add(C);for(const[C,k]of Object.entries(E.numericIndex))CT(v,C,k)}const b=e.sets??{},S=new Map;for(const[E,C]of Object.entries(b)){const k=C?.bonuses;if(!Array.isArray(k))continue;const R=[];k.forEach((B,q)=>{B&&typeof B=="object"&&B.illegal&&R.push(q+1)}),R.length>0&&y.set(E,{illegalCounts:R});const z=C?.items;if(Array.isArray(z))for(const B of z)typeof B=="string"&&S.set(B.toLowerCase(),E)}const _=new Map;for(const[E,C]of S){const k=i.get(E);k!=null&&_.set(k,C)}return{version:String(e.version??"unknown"),items:n,itemsById:s,itemIdByName:i,itemsByType:r,itemsByCategory:c,facetsMeta:{categories:[...ys],types:[...d].sort(),tiers:[...u].sort(),classReqs:[...m].sort(),majorIds:[...p].sort(),numericRanges:v},setsMeta:y,itemSetName:_}}class RT{snapshotPromise=null;async getCatalog(){return this.snapshotPromise||(this.snapshotPromise=this.loadCatalog()),this.snapshotPromise}async getItemById(n){return(await this.getCatalog()).itemsById.get(n)}async loadCatalog(){const n=await this.fetchCompressPayload();return DT(n)}async fetchCompressPayload(){const n=c=>{if(typeof window>"u")return c;const u=window.location.href.split("?")[0].replace(/\/[^/]*$/,"/")||window.location.origin+"/";return new URL(c,u).href},s=[n("compress.json"),n("./compress.json"),"./compress.json","../compress.json","compress.json"];let i=null;const r=[];for(const c of s)try{const u=await fetch(c,{cache:"force-cache"});if(!u.ok)throw new Error(`Failed to fetch ${c}: ${u.status}`);const d=await u.json();if(!d?.items||!Array.isArray(d.items))throw new Error(`Invalid compress payload from ${c}`);return d}catch(u){i=u,r.push(u instanceof Error?u.message:`Failed to fetch ${c}`)}throw i instanceof Error?new Error(`Unable to load compress.json. Tried: ${s.join(", ")}. Last error: ${i.message}`):new Error(`Unable to load compress.json. Tried: ${s.join(", ")}. Failures: ${r.join(" | ")}`)}}const kT=new RT;function ae(e,n,s){function i(d,m){if(d._zod||Object.defineProperty(d,"_zod",{value:{def:m,constr:u,traits:new Set},enumerable:!1}),d._zod.traits.has(e))return;d._zod.traits.add(e),n(d,m);const p=u.prototype,v=Object.keys(p);for(let y=0;y<v.length;y++){const b=v[y];b in d||(d[b]=p[b].bind(d))}}const r=s?.Parent??Object;class c extends r{}Object.defineProperty(c,"name",{value:e});function u(d){var m;const p=s?.Parent?new c:this;i(p,d),(m=p._zod).deferred??(m.deferred=[]);for(const v of p._zod.deferred)v();return p}return Object.defineProperty(u,"init",{value:i}),Object.defineProperty(u,Symbol.hasInstance,{value:d=>s?.Parent&&d instanceof s.Parent?!0:d?._zod?.traits?.has(e)}),Object.defineProperty(u,"name",{value:e}),u}class Zi extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class bb extends Error{constructor(n){super(`Encountered unidirectional transform during encode: ${n}`),this.name="ZodEncodeError"}}const xb={};function bs(e){return xb}function Sb(e){const n=Object.values(e).filter(i=>typeof i=="number");return Object.entries(e).filter(([i,r])=>n.indexOf(+i)===-1).map(([i,r])=>r)}function Zf(e,n){return typeof n=="bigint"?n.toString():n}function Th(e){return{get value(){{const n=e();return Object.defineProperty(this,"value",{value:n}),n}}}}function Nh(e){return e==null}function Mh(e){const n=e.startsWith("^")?1:0,s=e.endsWith("$")?e.length-1:e.length;return e.slice(n,s)}function AT(e,n){const s=(e.toString().split(".")[1]||"").length,i=n.toString();let r=(i.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(i)){const m=i.match(/\d?e-(\d?)/);m?.[1]&&(r=Number.parseInt(m[1]))}const c=s>r?s:r,u=Number.parseInt(e.toFixed(c).replace(".","")),d=Number.parseInt(n.toFixed(c).replace(".",""));return u%d/10**c}const my=Symbol("evaluating");function it(e,n,s){let i;Object.defineProperty(e,n,{get(){if(i!==my)return i===void 0&&(i=my,i=s()),i},set(r){Object.defineProperty(e,n,{value:r})},configurable:!0})}function Gs(e,n,s){Object.defineProperty(e,n,{value:s,writable:!0,enumerable:!0,configurable:!0})}function Ss(...e){const n={};for(const s of e){const i=Object.getOwnPropertyDescriptors(s);Object.assign(n,i)}return Object.defineProperties({},n)}function gy(e){return JSON.stringify(e)}function OT(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const wb="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function dc(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const zT=Th(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Wi(e){if(dc(e)===!1)return!1;const n=e.constructor;if(n===void 0||typeof n!="function")return!0;const s=n.prototype;return!(dc(s)===!1||Object.prototype.hasOwnProperty.call(s,"isPrototypeOf")===!1)}function _b(e){return Wi(e)?{...e}:Array.isArray(e)?[...e]:e}const PT=new Set(["string","number","symbol"]);function Dc(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ws(e,n,s){const i=new e._zod.constr(n??e._zod.def);return(!n||s?.parent)&&(i._zod.parent=e),i}function _e(e){const n=e;if(!n)return{};if(typeof n=="string")return{error:()=>n};if(n?.message!==void 0){if(n?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");n.error=n.message}return delete n.message,typeof n.error=="string"?{...n,error:()=>n.error}:n}function IT(e){return Object.keys(e).filter(n=>e[n]._zod.optin==="optional"&&e[n]._zod.optout==="optional")}const BT={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function LT(e,n){const s=e._zod.def,i=s.checks;if(i&&i.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const c=Ss(e._zod.def,{get shape(){const u={};for(const d in n){if(!(d in s.shape))throw new Error(`Unrecognized key: "${d}"`);n[d]&&(u[d]=s.shape[d])}return Gs(this,"shape",u),u},checks:[]});return ws(e,c)}function qT(e,n){const s=e._zod.def,i=s.checks;if(i&&i.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const c=Ss(e._zod.def,{get shape(){const u={...e._zod.def.shape};for(const d in n){if(!(d in s.shape))throw new Error(`Unrecognized key: "${d}"`);n[d]&&delete u[d]}return Gs(this,"shape",u),u},checks:[]});return ws(e,c)}function UT(e,n){if(!Wi(n))throw new Error("Invalid input to extend: expected a plain object");const s=e._zod.def.checks;if(s&&s.length>0){const c=e._zod.def.shape;for(const u in n)if(Object.getOwnPropertyDescriptor(c,u)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const r=Ss(e._zod.def,{get shape(){const c={...e._zod.def.shape,...n};return Gs(this,"shape",c),c}});return ws(e,r)}function $T(e,n){if(!Wi(n))throw new Error("Invalid input to safeExtend: expected a plain object");const s=Ss(e._zod.def,{get shape(){const i={...e._zod.def.shape,...n};return Gs(this,"shape",i),i}});return ws(e,s)}function HT(e,n){const s=Ss(e._zod.def,{get shape(){const i={...e._zod.def.shape,...n._zod.def.shape};return Gs(this,"shape",i),i},get catchall(){return n._zod.def.catchall},checks:[]});return ws(e,s)}function ZT(e,n,s){const r=n._zod.def.checks;if(r&&r.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const u=Ss(n._zod.def,{get shape(){const d=n._zod.def.shape,m={...d};if(s)for(const p in s){if(!(p in d))throw new Error(`Unrecognized key: "${p}"`);s[p]&&(m[p]=e?new e({type:"optional",innerType:d[p]}):d[p])}else for(const p in d)m[p]=e?new e({type:"optional",innerType:d[p]}):d[p];return Gs(this,"shape",m),m},checks:[]});return ws(n,u)}function FT(e,n,s){const i=Ss(n._zod.def,{get shape(){const r=n._zod.def.shape,c={...r};if(s)for(const u in s){if(!(u in c))throw new Error(`Unrecognized key: "${u}"`);s[u]&&(c[u]=new e({type:"nonoptional",innerType:r[u]}))}else for(const u in r)c[u]=new e({type:"nonoptional",innerType:r[u]});return Gs(this,"shape",c),c}});return ws(n,i)}function qi(e,n=0){if(e.aborted===!0)return!0;for(let s=n;s<e.issues.length;s++)if(e.issues[s]?.continue!==!0)return!0;return!1}function Ui(e,n){return n.map(s=>{var i;return(i=s).path??(i.path=[]),s.path.unshift(e),s})}function zo(e){return typeof e=="string"?e:e?.message}function xs(e,n,s){const i={...e,path:e.path??[]};if(!e.message){const r=zo(e.inst?._zod.def?.error?.(e))??zo(n?.error?.(e))??zo(s.customError?.(e))??zo(s.localeError?.(e))??"Invalid input";i.message=r}return delete i.inst,delete i.continue,n?.reportInput||delete i.input,i}function jh(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function or(...e){const[n,s,i]=e;return typeof n=="string"?{message:n,code:"custom",input:s,inst:i}:{...n}}const Eb=(e,n)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:n,enumerable:!1}),e.message=JSON.stringify(n,Zf,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Tb=ae("$ZodError",Eb),Nb=ae("$ZodError",Eb,{Parent:Error});function GT(e,n=s=>s.message){const s={},i=[];for(const r of e.issues)r.path.length>0?(s[r.path[0]]=s[r.path[0]]||[],s[r.path[0]].push(n(r))):i.push(n(r));return{formErrors:i,fieldErrors:s}}function YT(e,n=s=>s.message){const s={_errors:[]},i=r=>{for(const c of r.issues)if(c.code==="invalid_union"&&c.errors.length)c.errors.map(u=>i({issues:u}));else if(c.code==="invalid_key")i({issues:c.issues});else if(c.code==="invalid_element")i({issues:c.issues});else if(c.path.length===0)s._errors.push(n(c));else{let u=s,d=0;for(;d<c.path.length;){const m=c.path[d];d===c.path.length-1?(u[m]=u[m]||{_errors:[]},u[m]._errors.push(n(c))):u[m]=u[m]||{_errors:[]},u=u[m],d++}}};return i(e),s}const Ch=e=>(n,s,i,r)=>{const c=i?Object.assign(i,{async:!1}):{async:!1},u=n._zod.run({value:s,issues:[]},c);if(u instanceof Promise)throw new Zi;if(u.issues.length){const d=new(r?.Err??e)(u.issues.map(m=>xs(m,c,bs())));throw wb(d,r?.callee),d}return u.value},Dh=e=>async(n,s,i,r)=>{const c=i?Object.assign(i,{async:!0}):{async:!0};let u=n._zod.run({value:s,issues:[]},c);if(u instanceof Promise&&(u=await u),u.issues.length){const d=new(r?.Err??e)(u.issues.map(m=>xs(m,c,bs())));throw wb(d,r?.callee),d}return u.value},Rc=e=>(n,s,i)=>{const r=i?{...i,async:!1}:{async:!1},c=n._zod.run({value:s,issues:[]},r);if(c instanceof Promise)throw new Zi;return c.issues.length?{success:!1,error:new(e??Tb)(c.issues.map(u=>xs(u,r,bs())))}:{success:!0,data:c.value}},VT=Rc(Nb),kc=e=>async(n,s,i)=>{const r=i?Object.assign(i,{async:!0}):{async:!0};let c=n._zod.run({value:s,issues:[]},r);return c instanceof Promise&&(c=await c),c.issues.length?{success:!1,error:new e(c.issues.map(u=>xs(u,r,bs())))}:{success:!0,data:c.value}},KT=kc(Nb),WT=e=>(n,s,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Ch(e)(n,s,r)},XT=e=>(n,s,i)=>Ch(e)(n,s,i),QT=e=>async(n,s,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Dh(e)(n,s,r)},JT=e=>async(n,s,i)=>Dh(e)(n,s,i),eN=e=>(n,s,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Rc(e)(n,s,r)},tN=e=>(n,s,i)=>Rc(e)(n,s,i),nN=e=>async(n,s,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return kc(e)(n,s,r)},aN=e=>async(n,s,i)=>kc(e)(n,s,i),sN=/^[cC][^\s-]{8,}$/,iN=/^[0-9a-z]+$/,lN=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,rN=/^[0-9a-vA-V]{20}$/,oN=/^[A-Za-z0-9]{27}$/,cN=/^[a-zA-Z0-9_-]{21}$/,uN=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,dN=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,py=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,fN=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,hN="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function mN(){return new RegExp(hN,"u")}const gN=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,pN=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,vN=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,yN=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,bN=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Mb=/^[A-Za-z0-9_-]*$/,xN=/^\+[1-9]\d{6,14}$/,jb="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",SN=new RegExp(`^${jb}$`);function Cb(e){const n="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${n}`:e.precision===0?`${n}:[0-5]\\d`:`${n}:[0-5]\\d\\.\\d{${e.precision}}`:`${n}(?::[0-5]\\d(?:\\.\\d+)?)?`}function wN(e){return new RegExp(`^${Cb(e)}$`)}function _N(e){const n=Cb({precision:e.precision}),s=["Z"];e.local&&s.push(""),e.offset&&s.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${n}(?:${s.join("|")})`;return new RegExp(`^${jb}T(?:${i})$`)}const EN=e=>{const n=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${n}$`)},TN=/^-?\d+$/,Db=/^-?\d+(?:\.\d+)?$/,NN=/^(?:true|false)$/i,MN=/^[^A-Z]*$/,jN=/^[^a-z]*$/,Nn=ae("$ZodCheck",(e,n)=>{var s;e._zod??(e._zod={}),e._zod.def=n,(s=e._zod).onattach??(s.onattach=[])}),Rb={number:"number",bigint:"bigint",object:"date"},kb=ae("$ZodCheckLessThan",(e,n)=>{Nn.init(e,n);const s=Rb[typeof n.value];e._zod.onattach.push(i=>{const r=i._zod.bag,c=(n.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;n.value<c&&(n.inclusive?r.maximum=n.value:r.exclusiveMaximum=n.value)}),e._zod.check=i=>{(n.inclusive?i.value<=n.value:i.value<n.value)||i.issues.push({origin:s,code:"too_big",maximum:typeof n.value=="object"?n.value.getTime():n.value,input:i.value,inclusive:n.inclusive,inst:e,continue:!n.abort})}}),Ab=ae("$ZodCheckGreaterThan",(e,n)=>{Nn.init(e,n);const s=Rb[typeof n.value];e._zod.onattach.push(i=>{const r=i._zod.bag,c=(n.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;n.value>c&&(n.inclusive?r.minimum=n.value:r.exclusiveMinimum=n.value)}),e._zod.check=i=>{(n.inclusive?i.value>=n.value:i.value>n.value)||i.issues.push({origin:s,code:"too_small",minimum:typeof n.value=="object"?n.value.getTime():n.value,input:i.value,inclusive:n.inclusive,inst:e,continue:!n.abort})}}),CN=ae("$ZodCheckMultipleOf",(e,n)=>{Nn.init(e,n),e._zod.onattach.push(s=>{var i;(i=s._zod.bag).multipleOf??(i.multipleOf=n.value)}),e._zod.check=s=>{if(typeof s.value!=typeof n.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof s.value=="bigint"?s.value%n.value===BigInt(0):AT(s.value,n.value)===0)||s.issues.push({origin:typeof s.value,code:"not_multiple_of",divisor:n.value,input:s.value,inst:e,continue:!n.abort})}}),DN=ae("$ZodCheckNumberFormat",(e,n)=>{Nn.init(e,n),n.format=n.format||"float64";const s=n.format?.includes("int"),i=s?"int":"number",[r,c]=BT[n.format];e._zod.onattach.push(u=>{const d=u._zod.bag;d.format=n.format,d.minimum=r,d.maximum=c,s&&(d.pattern=TN)}),e._zod.check=u=>{const d=u.value;if(s){if(!Number.isInteger(d)){u.issues.push({expected:i,format:n.format,code:"invalid_type",continue:!1,input:d,inst:e});return}if(!Number.isSafeInteger(d)){d>0?u.issues.push({input:d,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,inclusive:!0,continue:!n.abort}):u.issues.push({input:d,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,inclusive:!0,continue:!n.abort});return}}d<r&&u.issues.push({origin:"number",input:d,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!n.abort}),d>c&&u.issues.push({origin:"number",input:d,code:"too_big",maximum:c,inclusive:!0,inst:e,continue:!n.abort})}}),RN=ae("$ZodCheckMaxLength",(e,n)=>{var s;Nn.init(e,n),(s=e._zod.def).when??(s.when=i=>{const r=i.value;return!Nh(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag.maximum??Number.POSITIVE_INFINITY;n.maximum<r&&(i._zod.bag.maximum=n.maximum)}),e._zod.check=i=>{const r=i.value;if(r.length<=n.maximum)return;const u=jh(r);i.issues.push({origin:u,code:"too_big",maximum:n.maximum,inclusive:!0,input:r,inst:e,continue:!n.abort})}}),kN=ae("$ZodCheckMinLength",(e,n)=>{var s;Nn.init(e,n),(s=e._zod.def).when??(s.when=i=>{const r=i.value;return!Nh(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;n.minimum>r&&(i._zod.bag.minimum=n.minimum)}),e._zod.check=i=>{const r=i.value;if(r.length>=n.minimum)return;const u=jh(r);i.issues.push({origin:u,code:"too_small",minimum:n.minimum,inclusive:!0,input:r,inst:e,continue:!n.abort})}}),AN=ae("$ZodCheckLengthEquals",(e,n)=>{var s;Nn.init(e,n),(s=e._zod.def).when??(s.when=i=>{const r=i.value;return!Nh(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag;r.minimum=n.length,r.maximum=n.length,r.length=n.length}),e._zod.check=i=>{const r=i.value,c=r.length;if(c===n.length)return;const u=jh(r),d=c>n.length;i.issues.push({origin:u,...d?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!n.abort})}}),Ac=ae("$ZodCheckStringFormat",(e,n)=>{var s,i;Nn.init(e,n),e._zod.onattach.push(r=>{const c=r._zod.bag;c.format=n.format,n.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(n.pattern))}),n.pattern?(s=e._zod).check??(s.check=r=>{n.pattern.lastIndex=0,!n.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:n.format,input:r.value,...n.pattern?{pattern:n.pattern.toString()}:{},inst:e,continue:!n.abort})}):(i=e._zod).check??(i.check=()=>{})}),ON=ae("$ZodCheckRegex",(e,n)=>{Ac.init(e,n),e._zod.check=s=>{n.pattern.lastIndex=0,!n.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:"regex",input:s.value,pattern:n.pattern.toString(),inst:e,continue:!n.abort})}}),zN=ae("$ZodCheckLowerCase",(e,n)=>{n.pattern??(n.pattern=MN),Ac.init(e,n)}),PN=ae("$ZodCheckUpperCase",(e,n)=>{n.pattern??(n.pattern=jN),Ac.init(e,n)}),IN=ae("$ZodCheckIncludes",(e,n)=>{Nn.init(e,n);const s=Dc(n.includes),i=new RegExp(typeof n.position=="number"?`^.{${n.position}}${s}`:s);n.pattern=i,e._zod.onattach.push(r=>{const c=r._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(i)}),e._zod.check=r=>{r.value.includes(n.includes,n.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:n.includes,input:r.value,inst:e,continue:!n.abort})}}),BN=ae("$ZodCheckStartsWith",(e,n)=>{Nn.init(e,n);const s=new RegExp(`^${Dc(n.prefix)}.*`);n.pattern??(n.pattern=s),e._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(s)}),e._zod.check=i=>{i.value.startsWith(n.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:n.prefix,input:i.value,inst:e,continue:!n.abort})}}),LN=ae("$ZodCheckEndsWith",(e,n)=>{Nn.init(e,n);const s=new RegExp(`.*${Dc(n.suffix)}$`);n.pattern??(n.pattern=s),e._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(s)}),e._zod.check=i=>{i.value.endsWith(n.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:n.suffix,input:i.value,inst:e,continue:!n.abort})}}),qN=ae("$ZodCheckOverwrite",(e,n)=>{Nn.init(e,n),e._zod.check=s=>{s.value=n.tx(s.value)}});class UN{constructor(n=[]){this.content=[],this.indent=0,this&&(this.args=n)}indented(n){this.indent+=1,n(this),this.indent-=1}write(n){if(typeof n=="function"){n(this,{execution:"sync"}),n(this,{execution:"async"});return}const i=n.split(`
`).filter(u=>u),r=Math.min(...i.map(u=>u.length-u.trimStart().length)),c=i.map(u=>u.slice(r)).map(u=>" ".repeat(this.indent*2)+u);for(const u of c)this.content.push(u)}compile(){const n=Function,s=this?.args,r=[...(this?.content??[""]).map(c=>`  ${c}`)];return new n(...s,r.join(`
`))}}const $N={major:4,minor:3,patch:6},Rt=ae("$ZodType",(e,n)=>{var s;e??(e={}),e._zod.def=n,e._zod.bag=e._zod.bag||{},e._zod.version=$N;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const r of i)for(const c of r._zod.onattach)c(e);if(i.length===0)(s=e._zod).deferred??(s.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const r=(u,d,m)=>{let p=qi(u),v;for(const y of d){if(y._zod.def.when){if(!y._zod.def.when(u))continue}else if(p)continue;const b=u.issues.length,S=y._zod.check(u);if(S instanceof Promise&&m?.async===!1)throw new Zi;if(v||S instanceof Promise)v=(v??Promise.resolve()).then(async()=>{await S,u.issues.length!==b&&(p||(p=qi(u,b)))});else{if(u.issues.length===b)continue;p||(p=qi(u,b))}}return v?v.then(()=>u):u},c=(u,d,m)=>{if(qi(u))return u.aborted=!0,u;const p=r(d,i,m);if(p instanceof Promise){if(m.async===!1)throw new Zi;return p.then(v=>e._zod.parse(v,m))}return e._zod.parse(p,m)};e._zod.run=(u,d)=>{if(d.skipChecks)return e._zod.parse(u,d);if(d.direction==="backward"){const p=e._zod.parse({value:u.value,issues:[]},{...d,skipChecks:!0});return p instanceof Promise?p.then(v=>c(v,u,d)):c(p,u,d)}const m=e._zod.parse(u,d);if(m instanceof Promise){if(d.async===!1)throw new Zi;return m.then(p=>r(p,i,d))}return r(m,i,d)}}it(e,"~standard",()=>({validate:r=>{try{const c=VT(e,r);return c.success?{value:c.data}:{issues:c.error?.issues}}catch{return KT(e,r).then(u=>u.success?{value:u.data}:{issues:u.error?.issues})}},vendor:"zod",version:1}))}),Rh=ae("$ZodString",(e,n)=>{Rt.init(e,n),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??EN(e._zod.bag),e._zod.parse=(s,i)=>{if(n.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),Tt=ae("$ZodStringFormat",(e,n)=>{Ac.init(e,n),Rh.init(e,n)}),HN=ae("$ZodGUID",(e,n)=>{n.pattern??(n.pattern=dN),Tt.init(e,n)}),ZN=ae("$ZodUUID",(e,n)=>{if(n.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[n.version];if(i===void 0)throw new Error(`Invalid UUID version: "${n.version}"`);n.pattern??(n.pattern=py(i))}else n.pattern??(n.pattern=py());Tt.init(e,n)}),FN=ae("$ZodEmail",(e,n)=>{n.pattern??(n.pattern=fN),Tt.init(e,n)}),GN=ae("$ZodURL",(e,n)=>{Tt.init(e,n),e._zod.check=s=>{try{const i=s.value.trim(),r=new URL(i);n.hostname&&(n.hostname.lastIndex=0,n.hostname.test(r.hostname)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:n.hostname.source,input:s.value,inst:e,continue:!n.abort})),n.protocol&&(n.protocol.lastIndex=0,n.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:n.protocol.source,input:s.value,inst:e,continue:!n.abort})),n.normalize?s.value=r.href:s.value=i;return}catch{s.issues.push({code:"invalid_format",format:"url",input:s.value,inst:e,continue:!n.abort})}}}),YN=ae("$ZodEmoji",(e,n)=>{n.pattern??(n.pattern=mN()),Tt.init(e,n)}),VN=ae("$ZodNanoID",(e,n)=>{n.pattern??(n.pattern=cN),Tt.init(e,n)}),KN=ae("$ZodCUID",(e,n)=>{n.pattern??(n.pattern=sN),Tt.init(e,n)}),WN=ae("$ZodCUID2",(e,n)=>{n.pattern??(n.pattern=iN),Tt.init(e,n)}),XN=ae("$ZodULID",(e,n)=>{n.pattern??(n.pattern=lN),Tt.init(e,n)}),QN=ae("$ZodXID",(e,n)=>{n.pattern??(n.pattern=rN),Tt.init(e,n)}),JN=ae("$ZodKSUID",(e,n)=>{n.pattern??(n.pattern=oN),Tt.init(e,n)}),eM=ae("$ZodISODateTime",(e,n)=>{n.pattern??(n.pattern=_N(n)),Tt.init(e,n)}),tM=ae("$ZodISODate",(e,n)=>{n.pattern??(n.pattern=SN),Tt.init(e,n)}),nM=ae("$ZodISOTime",(e,n)=>{n.pattern??(n.pattern=wN(n)),Tt.init(e,n)}),aM=ae("$ZodISODuration",(e,n)=>{n.pattern??(n.pattern=uN),Tt.init(e,n)}),sM=ae("$ZodIPv4",(e,n)=>{n.pattern??(n.pattern=gN),Tt.init(e,n),e._zod.bag.format="ipv4"}),iM=ae("$ZodIPv6",(e,n)=>{n.pattern??(n.pattern=pN),Tt.init(e,n),e._zod.bag.format="ipv6",e._zod.check=s=>{try{new URL(`http://[${s.value}]`)}catch{s.issues.push({code:"invalid_format",format:"ipv6",input:s.value,inst:e,continue:!n.abort})}}}),lM=ae("$ZodCIDRv4",(e,n)=>{n.pattern??(n.pattern=vN),Tt.init(e,n)}),rM=ae("$ZodCIDRv6",(e,n)=>{n.pattern??(n.pattern=yN),Tt.init(e,n),e._zod.check=s=>{const i=s.value.split("/");try{if(i.length!==2)throw new Error;const[r,c]=i;if(!c)throw new Error;const u=Number(c);if(`${u}`!==c)throw new Error;if(u<0||u>128)throw new Error;new URL(`http://[${r}]`)}catch{s.issues.push({code:"invalid_format",format:"cidrv6",input:s.value,inst:e,continue:!n.abort})}}});function Ob(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const oM=ae("$ZodBase64",(e,n)=>{n.pattern??(n.pattern=bN),Tt.init(e,n),e._zod.bag.contentEncoding="base64",e._zod.check=s=>{Ob(s.value)||s.issues.push({code:"invalid_format",format:"base64",input:s.value,inst:e,continue:!n.abort})}});function cM(e){if(!Mb.test(e))return!1;const n=e.replace(/[-_]/g,i=>i==="-"?"+":"/"),s=n.padEnd(Math.ceil(n.length/4)*4,"=");return Ob(s)}const uM=ae("$ZodBase64URL",(e,n)=>{n.pattern??(n.pattern=Mb),Tt.init(e,n),e._zod.bag.contentEncoding="base64url",e._zod.check=s=>{cM(s.value)||s.issues.push({code:"invalid_format",format:"base64url",input:s.value,inst:e,continue:!n.abort})}}),dM=ae("$ZodE164",(e,n)=>{n.pattern??(n.pattern=xN),Tt.init(e,n)});function fM(e,n=null){try{const s=e.split(".");if(s.length!==3)return!1;const[i]=s;if(!i)return!1;const r=JSON.parse(atob(i));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||n&&(!("alg"in r)||r.alg!==n))}catch{return!1}}const hM=ae("$ZodJWT",(e,n)=>{Tt.init(e,n),e._zod.check=s=>{fM(s.value,n.alg)||s.issues.push({code:"invalid_format",format:"jwt",input:s.value,inst:e,continue:!n.abort})}}),zb=ae("$ZodNumber",(e,n)=>{Rt.init(e,n),e._zod.pattern=e._zod.bag.pattern??Db,e._zod.parse=(s,i)=>{if(n.coerce)try{s.value=Number(s.value)}catch{}const r=s.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return s;const c=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return s.issues.push({expected:"number",code:"invalid_type",input:r,inst:e,...c?{received:c}:{}}),s}}),mM=ae("$ZodNumberFormat",(e,n)=>{DN.init(e,n),zb.init(e,n)}),gM=ae("$ZodBoolean",(e,n)=>{Rt.init(e,n),e._zod.pattern=NN,e._zod.parse=(s,i)=>{if(n.coerce)try{s.value=!!s.value}catch{}const r=s.value;return typeof r=="boolean"||s.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:e}),s}}),pM=ae("$ZodUnknown",(e,n)=>{Rt.init(e,n),e._zod.parse=s=>s}),vM=ae("$ZodNever",(e,n)=>{Rt.init(e,n),e._zod.parse=(s,i)=>(s.issues.push({expected:"never",code:"invalid_type",input:s.value,inst:e}),s)});function vy(e,n,s){e.issues.length&&n.issues.push(...Ui(s,e.issues)),n.value[s]=e.value}const yM=ae("$ZodArray",(e,n)=>{Rt.init(e,n),e._zod.parse=(s,i)=>{const r=s.value;if(!Array.isArray(r))return s.issues.push({expected:"array",code:"invalid_type",input:r,inst:e}),s;s.value=Array(r.length);const c=[];for(let u=0;u<r.length;u++){const d=r[u],m=n.element._zod.run({value:d,issues:[]},i);m instanceof Promise?c.push(m.then(p=>vy(p,s,u))):vy(m,s,u)}return c.length?Promise.all(c).then(()=>s):s}});function fc(e,n,s,i,r){if(e.issues.length){if(r&&!(s in i))return;n.issues.push(...Ui(s,e.issues))}e.value===void 0?s in i&&(n.value[s]=void 0):n.value[s]=e.value}function Pb(e){const n=Object.keys(e.shape);for(const i of n)if(!e.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const s=IT(e.shape);return{...e,keys:n,keySet:new Set(n),numKeys:n.length,optionalKeys:new Set(s)}}function Ib(e,n,s,i,r,c){const u=[],d=r.keySet,m=r.catchall._zod,p=m.def.type,v=m.optout==="optional";for(const y in n){if(d.has(y))continue;if(p==="never"){u.push(y);continue}const b=m.run({value:n[y],issues:[]},i);b instanceof Promise?e.push(b.then(S=>fc(S,s,y,n,v))):fc(b,s,y,n,v)}return u.length&&s.issues.push({code:"unrecognized_keys",keys:u,input:n,inst:c}),e.length?Promise.all(e).then(()=>s):s}const bM=ae("$ZodObject",(e,n)=>{if(Rt.init(e,n),!Object.getOwnPropertyDescriptor(n,"shape")?.get){const d=n.shape;Object.defineProperty(n,"shape",{get:()=>{const m={...d};return Object.defineProperty(n,"shape",{value:m}),m}})}const i=Th(()=>Pb(n));it(e._zod,"propValues",()=>{const d=n.shape,m={};for(const p in d){const v=d[p]._zod;if(v.values){m[p]??(m[p]=new Set);for(const y of v.values)m[p].add(y)}}return m});const r=dc,c=n.catchall;let u;e._zod.parse=(d,m)=>{u??(u=i.value);const p=d.value;if(!r(p))return d.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),d;d.value={};const v=[],y=u.shape;for(const b of u.keys){const S=y[b],_=S._zod.optout==="optional",E=S._zod.run({value:p[b],issues:[]},m);E instanceof Promise?v.push(E.then(C=>fc(C,d,b,p,_))):fc(E,d,b,p,_)}return c?Ib(v,p,d,m,i.value,e):v.length?Promise.all(v).then(()=>d):d}}),xM=ae("$ZodObjectJIT",(e,n)=>{bM.init(e,n);const s=e._zod.parse,i=Th(()=>Pb(n)),r=b=>{const S=new UN(["shape","payload","ctx"]),_=i.value,E=z=>{const B=gy(z);return`shape[${B}]._zod.run({ value: input[${B}], issues: [] }, ctx)`};S.write("const input = payload.value;");const C=Object.create(null);let k=0;for(const z of _.keys)C[z]=`key_${k++}`;S.write("const newResult = {};");for(const z of _.keys){const B=C[z],q=gy(z),j=b[z]?._zod?.optout==="optional";S.write(`const ${B} = ${E(z)};`),j?S.write(`
        if (${B}.issues.length) {
          if (${q} in input) {
            payload.issues = payload.issues.concat(${B}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${q}, ...iss.path] : [${q}]
            })));
          }
        }
        
        if (${B}.value === undefined) {
          if (${q} in input) {
            newResult[${q}] = undefined;
          }
        } else {
          newResult[${q}] = ${B}.value;
        }
        
      `):S.write(`
        if (${B}.issues.length) {
          payload.issues = payload.issues.concat(${B}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${q}, ...iss.path] : [${q}]
          })));
        }
        
        if (${B}.value === undefined) {
          if (${q} in input) {
            newResult[${q}] = undefined;
          }
        } else {
          newResult[${q}] = ${B}.value;
        }
        
      `)}S.write("payload.value = newResult;"),S.write("return payload;");const R=S.compile();return(z,B)=>R(b,z,B)};let c;const u=dc,d=!xb.jitless,p=d&&zT.value,v=n.catchall;let y;e._zod.parse=(b,S)=>{y??(y=i.value);const _=b.value;return u(_)?d&&p&&S?.async===!1&&S.jitless!==!0?(c||(c=r(n.shape)),b=c(b,S),v?Ib([],_,b,S,y,e):b):s(b,S):(b.issues.push({expected:"object",code:"invalid_type",input:_,inst:e}),b)}});function yy(e,n,s,i){for(const c of e)if(c.issues.length===0)return n.value=c.value,n;const r=e.filter(c=>!qi(c));return r.length===1?(n.value=r[0].value,r[0]):(n.issues.push({code:"invalid_union",input:n.value,inst:s,errors:e.map(c=>c.issues.map(u=>xs(u,i,bs())))}),n)}const SM=ae("$ZodUnion",(e,n)=>{Rt.init(e,n),it(e._zod,"optin",()=>n.options.some(r=>r._zod.optin==="optional")?"optional":void 0),it(e._zod,"optout",()=>n.options.some(r=>r._zod.optout==="optional")?"optional":void 0),it(e._zod,"values",()=>{if(n.options.every(r=>r._zod.values))return new Set(n.options.flatMap(r=>Array.from(r._zod.values)))}),it(e._zod,"pattern",()=>{if(n.options.every(r=>r._zod.pattern)){const r=n.options.map(c=>c._zod.pattern);return new RegExp(`^(${r.map(c=>Mh(c.source)).join("|")})$`)}});const s=n.options.length===1,i=n.options[0]._zod.run;e._zod.parse=(r,c)=>{if(s)return i(r,c);let u=!1;const d=[];for(const m of n.options){const p=m._zod.run({value:r.value,issues:[]},c);if(p instanceof Promise)d.push(p),u=!0;else{if(p.issues.length===0)return p;d.push(p)}}return u?Promise.all(d).then(m=>yy(m,r,e,c)):yy(d,r,e,c)}}),wM=ae("$ZodIntersection",(e,n)=>{Rt.init(e,n),e._zod.parse=(s,i)=>{const r=s.value,c=n.left._zod.run({value:r,issues:[]},i),u=n.right._zod.run({value:r,issues:[]},i);return c instanceof Promise||u instanceof Promise?Promise.all([c,u]).then(([m,p])=>by(s,m,p)):by(s,c,u)}});function Ff(e,n){if(e===n)return{valid:!0,data:e};if(e instanceof Date&&n instanceof Date&&+e==+n)return{valid:!0,data:e};if(Wi(e)&&Wi(n)){const s=Object.keys(n),i=Object.keys(e).filter(c=>s.indexOf(c)!==-1),r={...e,...n};for(const c of i){const u=Ff(e[c],n[c]);if(!u.valid)return{valid:!1,mergeErrorPath:[c,...u.mergeErrorPath]};r[c]=u.data}return{valid:!0,data:r}}if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return{valid:!1,mergeErrorPath:[]};const s=[];for(let i=0;i<e.length;i++){const r=e[i],c=n[i],u=Ff(r,c);if(!u.valid)return{valid:!1,mergeErrorPath:[i,...u.mergeErrorPath]};s.push(u.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}function by(e,n,s){const i=new Map;let r;for(const d of n.issues)if(d.code==="unrecognized_keys"){r??(r=d);for(const m of d.keys)i.has(m)||i.set(m,{}),i.get(m).l=!0}else e.issues.push(d);for(const d of s.issues)if(d.code==="unrecognized_keys")for(const m of d.keys)i.has(m)||i.set(m,{}),i.get(m).r=!0;else e.issues.push(d);const c=[...i].filter(([,d])=>d.l&&d.r).map(([d])=>d);if(c.length&&r&&e.issues.push({...r,keys:c}),qi(e))return e;const u=Ff(n.value,s.value);if(!u.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(u.mergeErrorPath)}`);return e.value=u.data,e}const _M=ae("$ZodRecord",(e,n)=>{Rt.init(e,n),e._zod.parse=(s,i)=>{const r=s.value;if(!Wi(r))return s.issues.push({expected:"record",code:"invalid_type",input:r,inst:e}),s;const c=[],u=n.keyType._zod.values;if(u){s.value={};const d=new Set;for(const p of u)if(typeof p=="string"||typeof p=="number"||typeof p=="symbol"){d.add(typeof p=="number"?p.toString():p);const v=n.valueType._zod.run({value:r[p],issues:[]},i);v instanceof Promise?c.push(v.then(y=>{y.issues.length&&s.issues.push(...Ui(p,y.issues)),s.value[p]=y.value})):(v.issues.length&&s.issues.push(...Ui(p,v.issues)),s.value[p]=v.value)}let m;for(const p in r)d.has(p)||(m=m??[],m.push(p));m&&m.length>0&&s.issues.push({code:"unrecognized_keys",input:r,inst:e,keys:m})}else{s.value={};for(const d of Reflect.ownKeys(r)){if(d==="__proto__")continue;let m=n.keyType._zod.run({value:d,issues:[]},i);if(m instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof d=="string"&&Db.test(d)&&m.issues.length){const y=n.keyType._zod.run({value:Number(d),issues:[]},i);if(y instanceof Promise)throw new Error("Async schemas not supported in object keys currently");y.issues.length===0&&(m=y)}if(m.issues.length){n.mode==="loose"?s.value[d]=r[d]:s.issues.push({code:"invalid_key",origin:"record",issues:m.issues.map(y=>xs(y,i,bs())),input:d,path:[d],inst:e});continue}const v=n.valueType._zod.run({value:r[d],issues:[]},i);v instanceof Promise?c.push(v.then(y=>{y.issues.length&&s.issues.push(...Ui(d,y.issues)),s.value[m.value]=y.value})):(v.issues.length&&s.issues.push(...Ui(d,v.issues)),s.value[m.value]=v.value)}}return c.length?Promise.all(c).then(()=>s):s}}),EM=ae("$ZodEnum",(e,n)=>{Rt.init(e,n);const s=Sb(n.entries),i=new Set(s);e._zod.values=i,e._zod.pattern=new RegExp(`^(${s.filter(r=>PT.has(typeof r)).map(r=>typeof r=="string"?Dc(r):r.toString()).join("|")})$`),e._zod.parse=(r,c)=>{const u=r.value;return i.has(u)||r.issues.push({code:"invalid_value",values:s,input:u,inst:e}),r}}),TM=ae("$ZodTransform",(e,n)=>{Rt.init(e,n),e._zod.parse=(s,i)=>{if(i.direction==="backward")throw new bb(e.constructor.name);const r=n.transform(s.value,s);if(i.async)return(r instanceof Promise?r:Promise.resolve(r)).then(u=>(s.value=u,s));if(r instanceof Promise)throw new Zi;return s.value=r,s}});function xy(e,n){return e.issues.length&&n===void 0?{issues:[],value:void 0}:e}const Bb=ae("$ZodOptional",(e,n)=>{Rt.init(e,n),e._zod.optin="optional",e._zod.optout="optional",it(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,void 0]):void 0),it(e._zod,"pattern",()=>{const s=n.innerType._zod.pattern;return s?new RegExp(`^(${Mh(s.source)})?$`):void 0}),e._zod.parse=(s,i)=>{if(n.innerType._zod.optin==="optional"){const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(c=>xy(c,s.value)):xy(r,s.value)}return s.value===void 0?s:n.innerType._zod.run(s,i)}}),NM=ae("$ZodExactOptional",(e,n)=>{Bb.init(e,n),it(e._zod,"values",()=>n.innerType._zod.values),it(e._zod,"pattern",()=>n.innerType._zod.pattern),e._zod.parse=(s,i)=>n.innerType._zod.run(s,i)}),MM=ae("$ZodNullable",(e,n)=>{Rt.init(e,n),it(e._zod,"optin",()=>n.innerType._zod.optin),it(e._zod,"optout",()=>n.innerType._zod.optout),it(e._zod,"pattern",()=>{const s=n.innerType._zod.pattern;return s?new RegExp(`^(${Mh(s.source)}|null)$`):void 0}),it(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,null]):void 0),e._zod.parse=(s,i)=>s.value===null?s:n.innerType._zod.run(s,i)}),jM=ae("$ZodDefault",(e,n)=>{Rt.init(e,n),e._zod.optin="optional",it(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(s,i)=>{if(i.direction==="backward")return n.innerType._zod.run(s,i);if(s.value===void 0)return s.value=n.defaultValue,s;const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(c=>Sy(c,n)):Sy(r,n)}});function Sy(e,n){return e.value===void 0&&(e.value=n.defaultValue),e}const CM=ae("$ZodPrefault",(e,n)=>{Rt.init(e,n),e._zod.optin="optional",it(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(s,i)=>(i.direction==="backward"||s.value===void 0&&(s.value=n.defaultValue),n.innerType._zod.run(s,i))}),DM=ae("$ZodNonOptional",(e,n)=>{Rt.init(e,n),it(e._zod,"values",()=>{const s=n.innerType._zod.values;return s?new Set([...s].filter(i=>i!==void 0)):void 0}),e._zod.parse=(s,i)=>{const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(c=>wy(c,e)):wy(r,e)}});function wy(e,n){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:n}),e}const RM=ae("$ZodCatch",(e,n)=>{Rt.init(e,n),it(e._zod,"optin",()=>n.innerType._zod.optin),it(e._zod,"optout",()=>n.innerType._zod.optout),it(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(s,i)=>{if(i.direction==="backward")return n.innerType._zod.run(s,i);const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(c=>(s.value=c.value,c.issues.length&&(s.value=n.catchValue({...s,error:{issues:c.issues.map(u=>xs(u,i,bs()))},input:s.value}),s.issues=[]),s)):(s.value=r.value,r.issues.length&&(s.value=n.catchValue({...s,error:{issues:r.issues.map(c=>xs(c,i,bs()))},input:s.value}),s.issues=[]),s)}}),kM=ae("$ZodPipe",(e,n)=>{Rt.init(e,n),it(e._zod,"values",()=>n.in._zod.values),it(e._zod,"optin",()=>n.in._zod.optin),it(e._zod,"optout",()=>n.out._zod.optout),it(e._zod,"propValues",()=>n.in._zod.propValues),e._zod.parse=(s,i)=>{if(i.direction==="backward"){const c=n.out._zod.run(s,i);return c instanceof Promise?c.then(u=>Po(u,n.in,i)):Po(c,n.in,i)}const r=n.in._zod.run(s,i);return r instanceof Promise?r.then(c=>Po(c,n.out,i)):Po(r,n.out,i)}});function Po(e,n,s){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:e.value,issues:e.issues},s)}const AM=ae("$ZodReadonly",(e,n)=>{Rt.init(e,n),it(e._zod,"propValues",()=>n.innerType._zod.propValues),it(e._zod,"values",()=>n.innerType._zod.values),it(e._zod,"optin",()=>n.innerType?._zod?.optin),it(e._zod,"optout",()=>n.innerType?._zod?.optout),e._zod.parse=(s,i)=>{if(i.direction==="backward")return n.innerType._zod.run(s,i);const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(_y):_y(r)}});function _y(e){return e.value=Object.freeze(e.value),e}const OM=ae("$ZodCustom",(e,n)=>{Nn.init(e,n),Rt.init(e,n),e._zod.parse=(s,i)=>s,e._zod.check=s=>{const i=s.value,r=n.fn(i);if(r instanceof Promise)return r.then(c=>Ey(c,s,i,e));Ey(r,s,i,e)}});function Ey(e,n,s,i){if(!e){const r={code:"custom",input:s,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(r.params=i._zod.def.params),n.issues.push(or(r))}}var Ty;class zM{constructor(){this._map=new WeakMap,this._idmap=new Map}add(n,...s){const i=s[0];return this._map.set(n,i),i&&typeof i=="object"&&"id"in i&&this._idmap.set(i.id,n),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(n){const s=this._map.get(n);return s&&typeof s=="object"&&"id"in s&&this._idmap.delete(s.id),this._map.delete(n),this}get(n){const s=n._zod.parent;if(s){const i={...this.get(s)??{}};delete i.id;const r={...i,...this._map.get(n)};return Object.keys(r).length?r:void 0}return this._map.get(n)}has(n){return this._map.has(n)}}function PM(){return new zM}(Ty=globalThis).__zod_globalRegistry??(Ty.__zod_globalRegistry=PM());const Ql=globalThis.__zod_globalRegistry;function IM(e,n){return new e({type:"string",..._e(n)})}function BM(e,n){return new e({type:"string",format:"email",check:"string_format",abort:!1,..._e(n)})}function Ny(e,n){return new e({type:"string",format:"guid",check:"string_format",abort:!1,..._e(n)})}function LM(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,..._e(n)})}function qM(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",..._e(n)})}function UM(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",..._e(n)})}function $M(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",..._e(n)})}function HM(e,n){return new e({type:"string",format:"url",check:"string_format",abort:!1,..._e(n)})}function ZM(e,n){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,..._e(n)})}function FM(e,n){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,..._e(n)})}function GM(e,n){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,..._e(n)})}function YM(e,n){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,..._e(n)})}function VM(e,n){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,..._e(n)})}function KM(e,n){return new e({type:"string",format:"xid",check:"string_format",abort:!1,..._e(n)})}function WM(e,n){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,..._e(n)})}function XM(e,n){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,..._e(n)})}function QM(e,n){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,..._e(n)})}function JM(e,n){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,..._e(n)})}function e2(e,n){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,..._e(n)})}function t2(e,n){return new e({type:"string",format:"base64",check:"string_format",abort:!1,..._e(n)})}function n2(e,n){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,..._e(n)})}function a2(e,n){return new e({type:"string",format:"e164",check:"string_format",abort:!1,..._e(n)})}function s2(e,n){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,..._e(n)})}function i2(e,n){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,..._e(n)})}function l2(e,n){return new e({type:"string",format:"date",check:"string_format",..._e(n)})}function r2(e,n){return new e({type:"string",format:"time",check:"string_format",precision:null,..._e(n)})}function o2(e,n){return new e({type:"string",format:"duration",check:"string_format",..._e(n)})}function c2(e,n){return new e({type:"number",checks:[],..._e(n)})}function u2(e,n){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",..._e(n)})}function d2(e,n){return new e({type:"boolean",..._e(n)})}function f2(e){return new e({type:"unknown"})}function h2(e,n){return new e({type:"never",..._e(n)})}function My(e,n){return new kb({check:"less_than",..._e(n),value:e,inclusive:!1})}function ff(e,n){return new kb({check:"less_than",..._e(n),value:e,inclusive:!0})}function jy(e,n){return new Ab({check:"greater_than",..._e(n),value:e,inclusive:!1})}function hf(e,n){return new Ab({check:"greater_than",..._e(n),value:e,inclusive:!0})}function Cy(e,n){return new CN({check:"multiple_of",..._e(n),value:e})}function Lb(e,n){return new RN({check:"max_length",..._e(n),maximum:e})}function hc(e,n){return new kN({check:"min_length",..._e(n),minimum:e})}function qb(e,n){return new AN({check:"length_equals",..._e(n),length:e})}function m2(e,n){return new ON({check:"string_format",format:"regex",..._e(n),pattern:e})}function g2(e){return new zN({check:"string_format",format:"lowercase",..._e(e)})}function p2(e){return new PN({check:"string_format",format:"uppercase",..._e(e)})}function v2(e,n){return new IN({check:"string_format",format:"includes",..._e(n),includes:e})}function y2(e,n){return new BN({check:"string_format",format:"starts_with",..._e(n),prefix:e})}function b2(e,n){return new LN({check:"string_format",format:"ends_with",..._e(n),suffix:e})}function tl(e){return new qN({check:"overwrite",tx:e})}function x2(e){return tl(n=>n.normalize(e))}function S2(){return tl(e=>e.trim())}function w2(){return tl(e=>e.toLowerCase())}function _2(){return tl(e=>e.toUpperCase())}function E2(){return tl(e=>OT(e))}function T2(e,n,s){return new e({type:"array",element:n,..._e(s)})}function N2(e,n,s){return new e({type:"custom",check:"custom",fn:n,..._e(s)})}function M2(e){const n=j2(s=>(s.addIssue=i=>{if(typeof i=="string")s.issues.push(or(i,s.value,n._zod.def));else{const r=i;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=s.value),r.inst??(r.inst=n),r.continue??(r.continue=!n._zod.def.abort),s.issues.push(or(r))}},e(s.value,s)));return n}function j2(e,n){const s=new Nn({check:"custom",..._e(n)});return s._zod.check=e,s}function Ub(e){let n=e?.target??"draft-2020-12";return n==="draft-4"&&(n="draft-04"),n==="draft-7"&&(n="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??Ql,target:n,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function Zt(e,n,s={path:[],schemaPath:[]}){var i;const r=e._zod.def,c=n.seen.get(e);if(c)return c.count++,s.schemaPath.includes(e)&&(c.cycle=s.path),c.schema;const u={schema:{},count:1,cycle:void 0,path:s.path};n.seen.set(e,u);const d=e._zod.toJSONSchema?.();if(d)u.schema=d;else{const v={...s,schemaPath:[...s.schemaPath,e],path:s.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(n,u.schema,v);else{const b=u.schema,S=n.processors[r.type];if(!S)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${r.type}`);S(e,n,b,v)}const y=e._zod.parent;y&&(u.ref||(u.ref=y),Zt(y,n,v),n.seen.get(y).isParent=!0)}const m=n.metadataRegistry.get(e);return m&&Object.assign(u.schema,m),n.io==="input"&&vn(e)&&(delete u.schema.examples,delete u.schema.default),n.io==="input"&&u.schema._prefault&&((i=u.schema).default??(i.default=u.schema._prefault)),delete u.schema._prefault,n.seen.get(e).schema}function $b(e,n){const s=e.seen.get(n);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=new Map;for(const u of e.seen.entries()){const d=e.metadataRegistry.get(u[0])?.id;if(d){const m=i.get(d);if(m&&m!==u[0])throw new Error(`Duplicate schema id "${d}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);i.set(d,u[0])}}const r=u=>{const d=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const y=e.external.registry.get(u[0])?.id,b=e.external.uri??(_=>_);if(y)return{ref:b(y)};const S=u[1].defId??u[1].schema.id??`schema${e.counter++}`;return u[1].defId=S,{defId:S,ref:`${b("__shared")}#/${d}/${S}`}}if(u[1]===s)return{ref:"#"};const p=`#/${d}/`,v=u[1].schema.id??`__schema${e.counter++}`;return{defId:v,ref:p+v}},c=u=>{if(u[1].schema.$ref)return;const d=u[1],{ref:m,defId:p}=r(u);d.def={...d.schema},p&&(d.defId=p);const v=d.schema;for(const y in v)delete v[y];v.$ref=m};if(e.cycles==="throw")for(const u of e.seen.entries()){const d=u[1];if(d.cycle)throw new Error(`Cycle detected: #/${d.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const u of e.seen.entries()){const d=u[1];if(n===u[0]){c(u);continue}if(e.external){const p=e.external.registry.get(u[0])?.id;if(n!==u[0]&&p){c(u);continue}}if(e.metadataRegistry.get(u[0])?.id){c(u);continue}if(d.cycle){c(u);continue}if(d.count>1&&e.reused==="ref"){c(u);continue}}}function Hb(e,n){const s=e.seen.get(n);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=u=>{const d=e.seen.get(u);if(d.ref===null)return;const m=d.def??d.schema,p={...m},v=d.ref;if(d.ref=null,v){i(v);const b=e.seen.get(v),S=b.schema;if(S.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(m.allOf=m.allOf??[],m.allOf.push(S)):Object.assign(m,S),Object.assign(m,p),u._zod.parent===v)for(const E in m)E==="$ref"||E==="allOf"||E in p||delete m[E];if(S.$ref&&b.def)for(const E in m)E==="$ref"||E==="allOf"||E in b.def&&JSON.stringify(m[E])===JSON.stringify(b.def[E])&&delete m[E]}const y=u._zod.parent;if(y&&y!==v){i(y);const b=e.seen.get(y);if(b?.schema.$ref&&(m.$ref=b.schema.$ref,b.def))for(const S in m)S==="$ref"||S==="allOf"||S in b.def&&JSON.stringify(m[S])===JSON.stringify(b.def[S])&&delete m[S]}e.override({zodSchema:u,jsonSchema:m,path:d.path??[]})};for(const u of[...e.seen.entries()].reverse())i(u[0]);const r={};if(e.target==="draft-2020-12"?r.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?r.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?r.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const u=e.external.registry.get(n)?.id;if(!u)throw new Error("Schema is missing an `id` property");r.$id=e.external.uri(u)}Object.assign(r,s.def??s.schema);const c=e.external?.defs??{};for(const u of e.seen.entries()){const d=u[1];d.def&&d.defId&&(c[d.defId]=d.def)}e.external||Object.keys(c).length>0&&(e.target==="draft-2020-12"?r.$defs=c:r.definitions=c);try{const u=JSON.parse(JSON.stringify(r));return Object.defineProperty(u,"~standard",{value:{...n["~standard"],jsonSchema:{input:mc(n,"input",e.processors),output:mc(n,"output",e.processors)}},enumerable:!1,writable:!1}),u}catch{throw new Error("Error converting schema to JSON.")}}function vn(e,n){const s=n??{seen:new Set};if(s.seen.has(e))return!1;s.seen.add(e);const i=e._zod.def;if(i.type==="transform")return!0;if(i.type==="array")return vn(i.element,s);if(i.type==="set")return vn(i.valueType,s);if(i.type==="lazy")return vn(i.getter(),s);if(i.type==="promise"||i.type==="optional"||i.type==="nonoptional"||i.type==="nullable"||i.type==="readonly"||i.type==="default"||i.type==="prefault")return vn(i.innerType,s);if(i.type==="intersection")return vn(i.left,s)||vn(i.right,s);if(i.type==="record"||i.type==="map")return vn(i.keyType,s)||vn(i.valueType,s);if(i.type==="pipe")return vn(i.in,s)||vn(i.out,s);if(i.type==="object"){for(const r in i.shape)if(vn(i.shape[r],s))return!0;return!1}if(i.type==="union"){for(const r of i.options)if(vn(r,s))return!0;return!1}if(i.type==="tuple"){for(const r of i.items)if(vn(r,s))return!0;return!!(i.rest&&vn(i.rest,s))}return!1}const C2=(e,n={})=>s=>{const i=Ub({...s,processors:n});return Zt(e,i),$b(i,e),Hb(i,e)},mc=(e,n,s={})=>i=>{const{libraryOptions:r,target:c}=i??{},u=Ub({...r??{},target:c,io:n,processors:s});return Zt(e,u),$b(u,e),Hb(u,e)},D2={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},R2=(e,n,s,i)=>{const r=s;r.type="string";const{minimum:c,maximum:u,format:d,patterns:m,contentEncoding:p}=e._zod.bag;if(typeof c=="number"&&(r.minLength=c),typeof u=="number"&&(r.maxLength=u),d&&(r.format=D2[d]??d,r.format===""&&delete r.format,d==="time"&&delete r.format),p&&(r.contentEncoding=p),m&&m.size>0){const v=[...m];v.length===1?r.pattern=v[0].source:v.length>1&&(r.allOf=[...v.map(y=>({...n.target==="draft-07"||n.target==="draft-04"||n.target==="openapi-3.0"?{type:"string"}:{},pattern:y.source}))])}},k2=(e,n,s,i)=>{const r=s,{minimum:c,maximum:u,format:d,multipleOf:m,exclusiveMaximum:p,exclusiveMinimum:v}=e._zod.bag;typeof d=="string"&&d.includes("int")?r.type="integer":r.type="number",typeof v=="number"&&(n.target==="draft-04"||n.target==="openapi-3.0"?(r.minimum=v,r.exclusiveMinimum=!0):r.exclusiveMinimum=v),typeof c=="number"&&(r.minimum=c,typeof v=="number"&&n.target!=="draft-04"&&(v>=c?delete r.minimum:delete r.exclusiveMinimum)),typeof p=="number"&&(n.target==="draft-04"||n.target==="openapi-3.0"?(r.maximum=p,r.exclusiveMaximum=!0):r.exclusiveMaximum=p),typeof u=="number"&&(r.maximum=u,typeof p=="number"&&n.target!=="draft-04"&&(p<=u?delete r.maximum:delete r.exclusiveMaximum)),typeof m=="number"&&(r.multipleOf=m)},A2=(e,n,s,i)=>{s.type="boolean"},O2=(e,n,s,i)=>{s.not={}},z2=(e,n,s,i)=>{},P2=(e,n,s,i)=>{const r=e._zod.def,c=Sb(r.entries);c.every(u=>typeof u=="number")&&(s.type="number"),c.every(u=>typeof u=="string")&&(s.type="string"),s.enum=c},I2=(e,n,s,i)=>{if(n.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},B2=(e,n,s,i)=>{if(n.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},L2=(e,n,s,i)=>{const r=s,c=e._zod.def,{minimum:u,maximum:d}=e._zod.bag;typeof u=="number"&&(r.minItems=u),typeof d=="number"&&(r.maxItems=d),r.type="array",r.items=Zt(c.element,n,{...i,path:[...i.path,"items"]})},q2=(e,n,s,i)=>{const r=s,c=e._zod.def;r.type="object",r.properties={};const u=c.shape;for(const p in u)r.properties[p]=Zt(u[p],n,{...i,path:[...i.path,"properties",p]});const d=new Set(Object.keys(u)),m=new Set([...d].filter(p=>{const v=c.shape[p]._zod;return n.io==="input"?v.optin===void 0:v.optout===void 0}));m.size>0&&(r.required=Array.from(m)),c.catchall?._zod.def.type==="never"?r.additionalProperties=!1:c.catchall?c.catchall&&(r.additionalProperties=Zt(c.catchall,n,{...i,path:[...i.path,"additionalProperties"]})):n.io==="output"&&(r.additionalProperties=!1)},U2=(e,n,s,i)=>{const r=e._zod.def,c=r.inclusive===!1,u=r.options.map((d,m)=>Zt(d,n,{...i,path:[...i.path,c?"oneOf":"anyOf",m]}));c?s.oneOf=u:s.anyOf=u},$2=(e,n,s,i)=>{const r=e._zod.def,c=Zt(r.left,n,{...i,path:[...i.path,"allOf",0]}),u=Zt(r.right,n,{...i,path:[...i.path,"allOf",1]}),d=p=>"allOf"in p&&Object.keys(p).length===1,m=[...d(c)?c.allOf:[c],...d(u)?u.allOf:[u]];s.allOf=m},H2=(e,n,s,i)=>{const r=s,c=e._zod.def;r.type="object";const u=c.keyType,m=u._zod.bag?.patterns;if(c.mode==="loose"&&m&&m.size>0){const v=Zt(c.valueType,n,{...i,path:[...i.path,"patternProperties","*"]});r.patternProperties={};for(const y of m)r.patternProperties[y.source]=v}else(n.target==="draft-07"||n.target==="draft-2020-12")&&(r.propertyNames=Zt(c.keyType,n,{...i,path:[...i.path,"propertyNames"]})),r.additionalProperties=Zt(c.valueType,n,{...i,path:[...i.path,"additionalProperties"]});const p=u._zod.values;if(p){const v=[...p].filter(y=>typeof y=="string"||typeof y=="number");v.length>0&&(r.required=v)}},Z2=(e,n,s,i)=>{const r=e._zod.def,c=Zt(r.innerType,n,i),u=n.seen.get(e);n.target==="openapi-3.0"?(u.ref=r.innerType,s.nullable=!0):s.anyOf=[c,{type:"null"}]},F2=(e,n,s,i)=>{const r=e._zod.def;Zt(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType},G2=(e,n,s,i)=>{const r=e._zod.def;Zt(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType,s.default=JSON.parse(JSON.stringify(r.defaultValue))},Y2=(e,n,s,i)=>{const r=e._zod.def;Zt(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType,n.io==="input"&&(s._prefault=JSON.parse(JSON.stringify(r.defaultValue)))},V2=(e,n,s,i)=>{const r=e._zod.def;Zt(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType;let u;try{u=r.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}s.default=u},K2=(e,n,s,i)=>{const r=e._zod.def,c=n.io==="input"?r.in._zod.def.type==="transform"?r.out:r.in:r.out;Zt(c,n,i);const u=n.seen.get(e);u.ref=c},W2=(e,n,s,i)=>{const r=e._zod.def;Zt(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType,s.readOnly=!0},Zb=(e,n,s,i)=>{const r=e._zod.def;Zt(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType},X2=ae("ZodISODateTime",(e,n)=>{eM.init(e,n),Mt.init(e,n)});function Q2(e){return i2(X2,e)}const J2=ae("ZodISODate",(e,n)=>{tM.init(e,n),Mt.init(e,n)});function ej(e){return l2(J2,e)}const tj=ae("ZodISOTime",(e,n)=>{nM.init(e,n),Mt.init(e,n)});function nj(e){return r2(tj,e)}const aj=ae("ZodISODuration",(e,n)=>{aM.init(e,n),Mt.init(e,n)});function sj(e){return o2(aj,e)}const ij=(e,n)=>{Tb.init(e,n),e.name="ZodError",Object.defineProperties(e,{format:{value:s=>YT(e,s)},flatten:{value:s=>GT(e,s)},addIssue:{value:s=>{e.issues.push(s),e.message=JSON.stringify(e.issues,Zf,2)}},addIssues:{value:s=>{e.issues.push(...s),e.message=JSON.stringify(e.issues,Zf,2)}},isEmpty:{get(){return e.issues.length===0}}})},Kn=ae("ZodError",ij,{Parent:Error}),lj=Ch(Kn),rj=Dh(Kn),oj=Rc(Kn),cj=kc(Kn),uj=WT(Kn),dj=XT(Kn),fj=QT(Kn),hj=JT(Kn),mj=eN(Kn),gj=tN(Kn),pj=nN(Kn),vj=aN(Kn),kt=ae("ZodType",(e,n)=>(Rt.init(e,n),Object.assign(e["~standard"],{jsonSchema:{input:mc(e,"input"),output:mc(e,"output")}}),e.toJSONSchema=C2(e,{}),e.def=n,e.type=n.type,Object.defineProperty(e,"_def",{value:n}),e.check=(...s)=>e.clone(Ss(n,{checks:[...n.checks??[],...s.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]}),{parent:!0}),e.with=e.check,e.clone=(s,i)=>ws(e,s,i),e.brand=()=>e,e.register=((s,i)=>(s.add(e,i),e)),e.parse=(s,i)=>lj(e,s,i,{callee:e.parse}),e.safeParse=(s,i)=>oj(e,s,i),e.parseAsync=async(s,i)=>rj(e,s,i,{callee:e.parseAsync}),e.safeParseAsync=async(s,i)=>cj(e,s,i),e.spa=e.safeParseAsync,e.encode=(s,i)=>uj(e,s,i),e.decode=(s,i)=>dj(e,s,i),e.encodeAsync=async(s,i)=>fj(e,s,i),e.decodeAsync=async(s,i)=>hj(e,s,i),e.safeEncode=(s,i)=>mj(e,s,i),e.safeDecode=(s,i)=>gj(e,s,i),e.safeEncodeAsync=async(s,i)=>pj(e,s,i),e.safeDecodeAsync=async(s,i)=>vj(e,s,i),e.refine=(s,i)=>e.check(uC(s,i)),e.superRefine=s=>e.check(dC(s)),e.overwrite=s=>e.check(tl(s)),e.optional=()=>Ay(e),e.exactOptional=()=>Xj(e),e.nullable=()=>Oy(e),e.nullish=()=>Ay(Oy(e)),e.nonoptional=s=>aC(e,s),e.array=()=>Pn(e),e.or=s=>Zj([e,s]),e.and=s=>Gj(e,s),e.transform=s=>zy(e,Kj(s)),e.default=s=>eC(e,s),e.prefault=s=>nC(e,s),e.catch=s=>iC(e,s),e.pipe=s=>zy(e,s),e.readonly=()=>oC(e),e.describe=s=>{const i=e.clone();return Ql.add(i,{description:s}),i},Object.defineProperty(e,"description",{get(){return Ql.get(e)?.description},configurable:!0}),e.meta=(...s)=>{if(s.length===0)return Ql.get(e);const i=e.clone();return Ql.add(i,s[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=s=>s(e),e)),Fb=ae("_ZodString",(e,n)=>{Rh.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(i,r,c)=>R2(e,i,r);const s=e._zod.bag;e.format=s.format??null,e.minLength=s.minimum??null,e.maxLength=s.maximum??null,e.regex=(...i)=>e.check(m2(...i)),e.includes=(...i)=>e.check(v2(...i)),e.startsWith=(...i)=>e.check(y2(...i)),e.endsWith=(...i)=>e.check(b2(...i)),e.min=(...i)=>e.check(hc(...i)),e.max=(...i)=>e.check(Lb(...i)),e.length=(...i)=>e.check(qb(...i)),e.nonempty=(...i)=>e.check(hc(1,...i)),e.lowercase=i=>e.check(g2(i)),e.uppercase=i=>e.check(p2(i)),e.trim=()=>e.check(S2()),e.normalize=(...i)=>e.check(x2(...i)),e.toLowerCase=()=>e.check(w2()),e.toUpperCase=()=>e.check(_2()),e.slugify=()=>e.check(E2())}),yj=ae("ZodString",(e,n)=>{Rh.init(e,n),Fb.init(e,n),e.email=s=>e.check(BM(bj,s)),e.url=s=>e.check(HM(xj,s)),e.jwt=s=>e.check(s2(zj,s)),e.emoji=s=>e.check(ZM(Sj,s)),e.guid=s=>e.check(Ny(Dy,s)),e.uuid=s=>e.check(LM(Io,s)),e.uuidv4=s=>e.check(qM(Io,s)),e.uuidv6=s=>e.check(UM(Io,s)),e.uuidv7=s=>e.check($M(Io,s)),e.nanoid=s=>e.check(FM(wj,s)),e.guid=s=>e.check(Ny(Dy,s)),e.cuid=s=>e.check(GM(_j,s)),e.cuid2=s=>e.check(YM(Ej,s)),e.ulid=s=>e.check(VM(Tj,s)),e.base64=s=>e.check(t2(kj,s)),e.base64url=s=>e.check(n2(Aj,s)),e.xid=s=>e.check(KM(Nj,s)),e.ksuid=s=>e.check(WM(Mj,s)),e.ipv4=s=>e.check(XM(jj,s)),e.ipv6=s=>e.check(QM(Cj,s)),e.cidrv4=s=>e.check(JM(Dj,s)),e.cidrv6=s=>e.check(e2(Rj,s)),e.e164=s=>e.check(a2(Oj,s)),e.datetime=s=>e.check(Q2(s)),e.date=s=>e.check(ej(s)),e.time=s=>e.check(nj(s)),e.duration=s=>e.check(sj(s))});function En(e){return IM(yj,e)}const Mt=ae("ZodStringFormat",(e,n)=>{Tt.init(e,n),Fb.init(e,n)}),bj=ae("ZodEmail",(e,n)=>{FN.init(e,n),Mt.init(e,n)}),Dy=ae("ZodGUID",(e,n)=>{HN.init(e,n),Mt.init(e,n)}),Io=ae("ZodUUID",(e,n)=>{ZN.init(e,n),Mt.init(e,n)}),xj=ae("ZodURL",(e,n)=>{GN.init(e,n),Mt.init(e,n)}),Sj=ae("ZodEmoji",(e,n)=>{YN.init(e,n),Mt.init(e,n)}),wj=ae("ZodNanoID",(e,n)=>{VN.init(e,n),Mt.init(e,n)}),_j=ae("ZodCUID",(e,n)=>{KN.init(e,n),Mt.init(e,n)}),Ej=ae("ZodCUID2",(e,n)=>{WN.init(e,n),Mt.init(e,n)}),Tj=ae("ZodULID",(e,n)=>{XN.init(e,n),Mt.init(e,n)}),Nj=ae("ZodXID",(e,n)=>{QN.init(e,n),Mt.init(e,n)}),Mj=ae("ZodKSUID",(e,n)=>{JN.init(e,n),Mt.init(e,n)}),jj=ae("ZodIPv4",(e,n)=>{sM.init(e,n),Mt.init(e,n)}),Cj=ae("ZodIPv6",(e,n)=>{iM.init(e,n),Mt.init(e,n)}),Dj=ae("ZodCIDRv4",(e,n)=>{lM.init(e,n),Mt.init(e,n)}),Rj=ae("ZodCIDRv6",(e,n)=>{rM.init(e,n),Mt.init(e,n)}),kj=ae("ZodBase64",(e,n)=>{oM.init(e,n),Mt.init(e,n)}),Aj=ae("ZodBase64URL",(e,n)=>{uM.init(e,n),Mt.init(e,n)}),Oj=ae("ZodE164",(e,n)=>{dM.init(e,n),Mt.init(e,n)}),zj=ae("ZodJWT",(e,n)=>{hM.init(e,n),Mt.init(e,n)}),Gb=ae("ZodNumber",(e,n)=>{zb.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(i,r,c)=>k2(e,i,r),e.gt=(i,r)=>e.check(jy(i,r)),e.gte=(i,r)=>e.check(hf(i,r)),e.min=(i,r)=>e.check(hf(i,r)),e.lt=(i,r)=>e.check(My(i,r)),e.lte=(i,r)=>e.check(ff(i,r)),e.max=(i,r)=>e.check(ff(i,r)),e.int=i=>e.check(Ry(i)),e.safe=i=>e.check(Ry(i)),e.positive=i=>e.check(jy(0,i)),e.nonnegative=i=>e.check(hf(0,i)),e.negative=i=>e.check(My(0,i)),e.nonpositive=i=>e.check(ff(0,i)),e.multipleOf=(i,r)=>e.check(Cy(i,r)),e.step=(i,r)=>e.check(Cy(i,r)),e.finite=()=>e;const s=e._zod.bag;e.minValue=Math.max(s.minimum??Number.NEGATIVE_INFINITY,s.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(s.maximum??Number.POSITIVE_INFINITY,s.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(s.format??"").includes("int")||Number.isSafeInteger(s.multipleOf??.5),e.isFinite=!0,e.format=s.format??null});function ea(e){return c2(Gb,e)}const Pj=ae("ZodNumberFormat",(e,n)=>{mM.init(e,n),Gb.init(e,n)});function Ry(e){return u2(Pj,e)}const Ij=ae("ZodBoolean",(e,n)=>{gM.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>A2(e,s,i)});function Jl(e){return d2(Ij,e)}const Bj=ae("ZodUnknown",(e,n)=>{pM.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>z2()});function ky(){return f2(Bj)}const Lj=ae("ZodNever",(e,n)=>{vM.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>O2(e,s,i)});function qj(e){return h2(Lj,e)}const Uj=ae("ZodArray",(e,n)=>{yM.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>L2(e,s,i,r),e.element=n.element,e.min=(s,i)=>e.check(hc(s,i)),e.nonempty=s=>e.check(hc(1,s)),e.max=(s,i)=>e.check(Lb(s,i)),e.length=(s,i)=>e.check(qb(s,i)),e.unwrap=()=>e.element});function Pn(e,n){return T2(Uj,e,n)}const $j=ae("ZodObject",(e,n)=>{xM.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>q2(e,s,i,r),it(e,"shape",()=>n.shape),e.keyof=()=>gc(Object.keys(e._zod.def.shape)),e.catchall=s=>e.clone({...e._zod.def,catchall:s}),e.passthrough=()=>e.clone({...e._zod.def,catchall:ky()}),e.loose=()=>e.clone({...e._zod.def,catchall:ky()}),e.strict=()=>e.clone({...e._zod.def,catchall:qj()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=s=>UT(e,s),e.safeExtend=s=>$T(e,s),e.merge=s=>HT(e,s),e.pick=s=>LT(e,s),e.omit=s=>qT(e,s),e.partial=(...s)=>ZT(Yb,e,s[0]),e.required=(...s)=>FT(Vb,e,s[0])});function cr(e,n){const s={type:"object",shape:e??{},..._e(n)};return new $j(s)}const Hj=ae("ZodUnion",(e,n)=>{SM.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>U2(e,s,i,r),e.options=n.options});function Zj(e,n){return new Hj({type:"union",options:e,..._e(n)})}const Fj=ae("ZodIntersection",(e,n)=>{wM.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>$2(e,s,i,r)});function Gj(e,n){return new Fj({type:"intersection",left:e,right:n})}const Yj=ae("ZodRecord",(e,n)=>{_M.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>H2(e,s,i,r),e.keyType=n.keyType,e.valueType=n.valueType});function ar(e,n,s){return new Yj({type:"record",keyType:e,valueType:n,..._e(s)})}const Gf=ae("ZodEnum",(e,n)=>{EM.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(i,r,c)=>P2(e,i,r),e.enum=n.entries,e.options=Object.values(n.entries);const s=new Set(Object.keys(n.entries));e.extract=(i,r)=>{const c={};for(const u of i)if(s.has(u))c[u]=n.entries[u];else throw new Error(`Key ${u} not found in enum`);return new Gf({...n,checks:[],..._e(r),entries:c})},e.exclude=(i,r)=>{const c={...n.entries};for(const u of i)if(s.has(u))delete c[u];else throw new Error(`Key ${u} not found in enum`);return new Gf({...n,checks:[],..._e(r),entries:c})}});function gc(e,n){const s=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new Gf({type:"enum",entries:s,..._e(n)})}const Vj=ae("ZodTransform",(e,n)=>{TM.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>B2(e,s),e._zod.parse=(s,i)=>{if(i.direction==="backward")throw new bb(e.constructor.name);s.addIssue=c=>{if(typeof c=="string")s.issues.push(or(c,s.value,n));else{const u=c;u.fatal&&(u.continue=!1),u.code??(u.code="custom"),u.input??(u.input=s.value),u.inst??(u.inst=e),s.issues.push(or(u))}};const r=n.transform(s.value,s);return r instanceof Promise?r.then(c=>(s.value=c,s)):(s.value=r,s)}});function Kj(e){return new Vj({type:"transform",transform:e})}const Yb=ae("ZodOptional",(e,n)=>{Bb.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>Zb(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function Ay(e){return new Yb({type:"optional",innerType:e})}const Wj=ae("ZodExactOptional",(e,n)=>{NM.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>Zb(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function Xj(e){return new Wj({type:"optional",innerType:e})}const Qj=ae("ZodNullable",(e,n)=>{MM.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>Z2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function Oy(e){return new Qj({type:"nullable",innerType:e})}const Jj=ae("ZodDefault",(e,n)=>{jM.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>G2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function eC(e,n){return new Jj({type:"default",innerType:e,get defaultValue(){return typeof n=="function"?n():_b(n)}})}const tC=ae("ZodPrefault",(e,n)=>{CM.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>Y2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function nC(e,n){return new tC({type:"prefault",innerType:e,get defaultValue(){return typeof n=="function"?n():_b(n)}})}const Vb=ae("ZodNonOptional",(e,n)=>{DM.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>F2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function aC(e,n){return new Vb({type:"nonoptional",innerType:e,..._e(n)})}const sC=ae("ZodCatch",(e,n)=>{RM.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>V2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function iC(e,n){return new sC({type:"catch",innerType:e,catchValue:typeof n=="function"?n:()=>n})}const lC=ae("ZodPipe",(e,n)=>{kM.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>K2(e,s,i,r),e.in=n.in,e.out=n.out});function zy(e,n){return new lC({type:"pipe",in:e,out:n})}const rC=ae("ZodReadonly",(e,n)=>{AM.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>W2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function oC(e){return new rC({type:"readonly",innerType:e})}const cC=ae("ZodCustom",(e,n)=>{OM.init(e,n),kt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>I2(e,s)});function uC(e,n={}){return N2(cC,e,n)}function dC(e){return M2(e)}const fC=["list","grid"],Oa={text:"",categories:[],types:[],tiers:[],classReqs:[],majorIds:[],numericRanges:{},exclusionRanges:{},onlyWearableAtLevel:106,onlyClassCompatible:!1,excludeRestricted:!1,sortKeys:["relevance"],sortDescending:!0,viewMode:"list",resultsBelowBuild:!0},Py=cr({min:ea().finite().optional(),max:ea().finite().optional()}),hC=cr({text:En().catch(Oa.text),categories:Pn(En()).catch([]),types:Pn(En()).catch([]),tiers:Pn(En()).catch([]),classReqs:Pn(gc(["Warrior","Assassin","Mage","Archer","Shaman"])).catch([]),majorIds:Pn(En()).catch([]),numericRanges:ar(En(),Py).catch({}),exclusionRanges:ar(En(),Py).catch({}),onlyWearableAtLevel:ea().int().min(1).max(106).nullable().catch(106),onlyClassCompatible:Jl().catch(!1),excludeRestricted:Jl().catch(!1),sortKeys:Pn(En()).catch(["relevance"]),sortDescending:Jl().catch(!0),viewMode:gc(fC).catch("list"),resultsBelowBuild:Jl().catch(!0)});function Kb(e){const n=e,s=hC.parse(e),i=Array.isArray(s.sortKeys)&&s.sortKeys.length>0?s.sortKeys:typeof n?.sort=="string"?[n.sort]:["relevance"];return{text:s.text,categories:s.categories,types:s.types,tiers:s.tiers,classReqs:s.classReqs,majorIds:s.majorIds,numericRanges:s.numericRanges,exclusionRanges:s.exclusionRanges??{},onlyWearableAtLevel:s.onlyWearableAtLevel,onlyClassCompatible:s.onlyClassCompatible,excludeRestricted:s.excludeRestricted,sortKeys:i,sortDescending:s.sortDescending,viewMode:s.viewMode,resultsBelowBuild:!!s.resultsBelowBuild}}function mC(e){return!!(e.text.trim()!==""||e.categories.length>0||e.types.length>0||e.tiers.length>0||e.classReqs.length>0||e.majorIds.length>0||e.numericRanges&&Object.keys(e.numericRanges).length>0||e.exclusionRanges&&Object.keys(e.exclusionRanges).length>0)}function gC(e,n){return Kb({...e,...n,numericRanges:n.numericRanges!==void 0?n.numericRanges:e.numericRanges,exclusionRanges:n.exclusionRanges!==void 0?n.exclusionRanges:e.exclusionRanges??{}})}const pC="ENTRIES",Wb="KEYS",Xb="VALUES",cn="";class mf{constructor(n,s){const i=n._tree,r=Array.from(i.keys());this.set=n,this._type=s,this._path=r.length>0?[{node:i,keys:r}]:[]}next(){const n=this.dive();return this.backtrack(),n}dive(){if(this._path.length===0)return{done:!0,value:void 0};const{node:n,keys:s}=Ai(this._path);if(Ai(s)===cn)return{done:!1,value:this.result()};const i=n.get(Ai(s));return this._path.push({node:i,keys:Array.from(i.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;const n=Ai(this._path).keys;n.pop(),!(n.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:n})=>Ai(n)).filter(n=>n!==cn).join("")}value(){return Ai(this._path).node.get(cn)}result(){switch(this._type){case Xb:return this.value();case Wb:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const Ai=e=>e[e.length-1],vC=(e,n,s)=>{const i=new Map;if(n===void 0)return i;const r=n.length+1,c=r+s,u=new Uint8Array(c*r).fill(s+1);for(let d=0;d<r;++d)u[d]=d;for(let d=1;d<c;++d)u[d*r]=d;return Qb(e,n,s,i,u,1,r,""),i},Qb=(e,n,s,i,r,c,u,d)=>{const m=c*u;e:for(const p of e.keys())if(p===cn){const v=r[m-1];v<=s&&i.set(d,[e.get(p),v])}else{let v=c;for(let y=0;y<p.length;++y,++v){const b=p[y],S=u*v,_=S-u;let E=r[S];const C=Math.max(0,v-s-1),k=Math.min(u-1,v+s);for(let R=C;R<k;++R){const z=b!==n[R],B=r[_+R]+ +z,q=r[_+R+1]+1,M=r[S+R]+1,j=r[S+R+1]=Math.min(B,q,M);j<E&&(E=j)}if(E>s)continue e}Qb(e.get(p),n,s,i,r,v,u,d+p)}};class hs{constructor(n=new Map,s=""){this._size=void 0,this._tree=n,this._prefix=s}atPrefix(n){if(!n.startsWith(this._prefix))throw new Error("Mismatched prefix");const[s,i]=pc(this._tree,n.slice(this._prefix.length));if(s===void 0){const[r,c]=kh(i);for(const u of r.keys())if(u!==cn&&u.startsWith(c)){const d=new Map;return d.set(u.slice(c.length),r.get(u)),new hs(d,n)}}return new hs(s,n)}clear(){this._size=void 0,this._tree.clear()}delete(n){return this._size=void 0,yC(this._tree,n)}entries(){return new mf(this,pC)}forEach(n){for(const[s,i]of this)n(s,i,this)}fuzzyGet(n,s){return vC(this._tree,n,s)}get(n){const s=Yf(this._tree,n);return s!==void 0?s.get(cn):void 0}has(n){const s=Yf(this._tree,n);return s!==void 0&&s.has(cn)}keys(){return new mf(this,Wb)}set(n,s){if(typeof n!="string")throw new Error("key must be a string");return this._size=void 0,gf(this._tree,n).set(cn,s),this}get size(){if(this._size)return this._size;this._size=0;const n=this.entries();for(;!n.next().done;)this._size+=1;return this._size}update(n,s){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;const i=gf(this._tree,n);return i.set(cn,s(i.get(cn))),this}fetch(n,s){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;const i=gf(this._tree,n);let r=i.get(cn);return r===void 0&&i.set(cn,r=s()),r}values(){return new mf(this,Xb)}[Symbol.iterator](){return this.entries()}static from(n){const s=new hs;for(const[i,r]of n)s.set(i,r);return s}static fromObject(n){return hs.from(Object.entries(n))}}const pc=(e,n,s=[])=>{if(n.length===0||e==null)return[e,s];for(const i of e.keys())if(i!==cn&&n.startsWith(i))return s.push([e,i]),pc(e.get(i),n.slice(i.length),s);return s.push([e,n]),pc(void 0,"",s)},Yf=(e,n)=>{if(n.length===0||e==null)return e;for(const s of e.keys())if(s!==cn&&n.startsWith(s))return Yf(e.get(s),n.slice(s.length))},gf=(e,n)=>{const s=n.length;e:for(let i=0;e&&i<s;){for(const c of e.keys())if(c!==cn&&n[i]===c[0]){const u=Math.min(s-i,c.length);let d=1;for(;d<u&&n[i+d]===c[d];)++d;const m=e.get(c);if(d===c.length)e=m;else{const p=new Map;p.set(c.slice(d),m),e.set(n.slice(i,i+d),p),e.delete(c),e=p}i+=d;continue e}const r=new Map;return e.set(n.slice(i),r),r}return e},yC=(e,n)=>{const[s,i]=pc(e,n);if(s!==void 0){if(s.delete(cn),s.size===0)Jb(i);else if(s.size===1){const[r,c]=s.entries().next().value;ex(i,r,c)}}},Jb=e=>{if(e.length===0)return;const[n,s]=kh(e);if(n.delete(s),n.size===0)Jb(e.slice(0,-1));else if(n.size===1){const[i,r]=n.entries().next().value;i!==cn&&ex(e.slice(0,-1),i,r)}},ex=(e,n,s)=>{if(e.length===0)return;const[i,r]=kh(e);i.set(r+n,s),i.delete(r)},kh=e=>e[e.length-1],Ah="or",tx="and",bC="and_not";class Fi{constructor(n){if(n?.fields==null)throw new Error('MiniSearch: option "fields" must be provided');const s=n.autoVacuum==null||n.autoVacuum===!0?yf:n.autoVacuum;this._options={...vf,...n,autoVacuum:s,searchOptions:{...Iy,...n.searchOptions||{}},autoSuggestOptions:{...EC,...n.autoSuggestOptions||{}}},this._index=new hs,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=Kf,this.addFields(this._options.fields)}add(n){const{extractField:s,stringifyField:i,tokenize:r,processTerm:c,fields:u,idField:d}=this._options,m=s(n,d);if(m==null)throw new Error(`MiniSearch: document does not have ID field "${d}"`);if(this._idToShortId.has(m))throw new Error(`MiniSearch: duplicate ID ${m}`);const p=this.addDocumentId(m);this.saveStoredFields(p,n);for(const v of u){const y=s(n,v);if(y==null)continue;const b=r(i(y,v),v),S=this._fieldIds[v],_=new Set(b).size;this.addFieldLength(p,S,this._documentCount-1,_);for(const E of b){const C=c(E,v);if(Array.isArray(C))for(const k of C)this.addTerm(S,p,k);else C&&this.addTerm(S,p,C)}}}addAll(n){for(const s of n)this.add(s)}addAllAsync(n,s={}){const{chunkSize:i=10}=s,r={chunk:[],promise:Promise.resolve()},{chunk:c,promise:u}=n.reduce(({chunk:d,promise:m},p,v)=>(d.push(p),(v+1)%i===0?{chunk:[],promise:m.then(()=>new Promise(y=>setTimeout(y,0))).then(()=>this.addAll(d))}:{chunk:d,promise:m}),r);return u.then(()=>this.addAll(c))}remove(n){const{tokenize:s,processTerm:i,extractField:r,stringifyField:c,fields:u,idField:d}=this._options,m=r(n,d);if(m==null)throw new Error(`MiniSearch: document does not have ID field "${d}"`);const p=this._idToShortId.get(m);if(p==null)throw new Error(`MiniSearch: cannot remove document with ID ${m}: it is not in the index`);for(const v of u){const y=r(n,v);if(y==null)continue;const b=s(c(y,v),v),S=this._fieldIds[v],_=new Set(b).size;this.removeFieldLength(p,S,this._documentCount,_);for(const E of b){const C=i(E,v);if(Array.isArray(C))for(const k of C)this.removeTerm(S,p,k);else C&&this.removeTerm(S,p,C)}}this._storedFields.delete(p),this._documentIds.delete(p),this._idToShortId.delete(m),this._fieldLength.delete(p),this._documentCount-=1}removeAll(n){if(n)for(const s of n)this.remove(s);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new hs,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(n){const s=this._idToShortId.get(n);if(s==null)throw new Error(`MiniSearch: cannot discard document with ID ${n}: it is not in the index`);this._idToShortId.delete(n),this._documentIds.delete(s),this._storedFields.delete(s),(this._fieldLength.get(s)||[]).forEach((i,r)=>{this.removeFieldLength(s,r,this._documentCount,i)}),this._fieldLength.delete(s),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;const{minDirtFactor:n,minDirtCount:s,batchSize:i,batchWait:r}=this._options.autoVacuum;this.conditionalVacuum({batchSize:i,batchWait:r},{minDirtCount:s,minDirtFactor:n})}discardAll(n){const s=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const i of n)this.discard(i)}finally{this._options.autoVacuum=s}this.maybeAutoVacuum()}replace(n){const{idField:s,extractField:i}=this._options,r=i(n,s);this.discard(r),this.add(n)}vacuum(n={}){return this.conditionalVacuum(n)}conditionalVacuum(n,s){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&s,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{const i=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=Kf,this.performVacuuming(n,i)}),this._enqueuedVacuum)):this.vacuumConditionsMet(s)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(n),this._currentVacuum)}async performVacuuming(n,s){const i=this._dirtCount;if(this.vacuumConditionsMet(s)){const r=n.batchSize||Vf.batchSize,c=n.batchWait||Vf.batchWait;let u=1;for(const[d,m]of this._index){for(const[p,v]of m)for(const[y]of v)this._documentIds.has(y)||(v.size<=1?m.delete(p):v.delete(y));this._index.get(d).size===0&&this._index.delete(d),u%r===0&&await new Promise(p=>setTimeout(p,c)),u+=1}this._dirtCount-=i}await null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null}vacuumConditionsMet(n){if(n==null)return!0;let{minDirtCount:s,minDirtFactor:i}=n;return s=s||yf.minDirtCount,i=i||yf.minDirtFactor,this.dirtCount>=s&&this.dirtFactor>=i}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(n){return this._idToShortId.has(n)}getStoredFields(n){const s=this._idToShortId.get(n);if(s!=null)return this._storedFields.get(s)}search(n,s={}){const{searchOptions:i}=this._options,r={...i,...s},c=this.executeQuery(n,s),u=[];for(const[d,{score:m,terms:p,match:v}]of c){const y=p.length||1,b={id:this._documentIds.get(d),score:m*y,terms:Object.keys(v),queryTerms:p,match:v};Object.assign(b,this._storedFields.get(d)),(r.filter==null||r.filter(b))&&u.push(b)}return n===Fi.wildcard&&r.boostDocument==null||u.sort(Ly),u}autoSuggest(n,s={}){s={...this._options.autoSuggestOptions,...s};const i=new Map;for(const{score:c,terms:u}of this.search(n,s)){const d=u.join(" "),m=i.get(d);m!=null?(m.score+=c,m.count+=1):i.set(d,{score:c,terms:u,count:1})}const r=[];for(const[c,{score:u,terms:d,count:m}]of i)r.push({suggestion:c,terms:d,score:u/m});return r.sort(Ly),r}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(n,s){if(s==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(n),s)}static async loadJSONAsync(n,s){if(s==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(n),s)}static getDefault(n){if(vf.hasOwnProperty(n))return pf(vf,n);throw new Error(`MiniSearch: unknown option "${n}"`)}static loadJS(n,s){const{index:i,documentIds:r,fieldLength:c,storedFields:u,serializationVersion:d}=n,m=this.instantiateMiniSearch(n,s);m._documentIds=Bo(r),m._fieldLength=Bo(c),m._storedFields=Bo(u);for(const[p,v]of m._documentIds)m._idToShortId.set(v,p);for(const[p,v]of i){const y=new Map;for(const b of Object.keys(v)){let S=v[b];d===1&&(S=S.ds),y.set(parseInt(b,10),Bo(S))}m._index.set(p,y)}return m}static async loadJSAsync(n,s){const{index:i,documentIds:r,fieldLength:c,storedFields:u,serializationVersion:d}=n,m=this.instantiateMiniSearch(n,s);m._documentIds=await Lo(r),m._fieldLength=await Lo(c),m._storedFields=await Lo(u);for(const[v,y]of m._documentIds)m._idToShortId.set(y,v);let p=0;for(const[v,y]of i){const b=new Map;for(const S of Object.keys(y)){let _=y[S];d===1&&(_=_.ds),b.set(parseInt(S,10),await Lo(_))}++p%1e3===0&&await nx(0),m._index.set(v,b)}return m}static instantiateMiniSearch(n,s){const{documentCount:i,nextId:r,fieldIds:c,averageFieldLength:u,dirtCount:d,serializationVersion:m}=n;if(m!==1&&m!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const p=new Fi(s);return p._documentCount=i,p._nextId=r,p._idToShortId=new Map,p._fieldIds=c,p._avgFieldLength=u,p._dirtCount=d||0,p._index=new hs,p}executeQuery(n,s={}){if(n===Fi.wildcard)return this.executeWildcardQuery(s);if(typeof n!="string"){const b={...s,...n,queries:void 0},S=n.queries.map(_=>this.executeQuery(_,b));return this.combineResults(S,b.combineWith)}const{tokenize:i,processTerm:r,searchOptions:c}=this._options,u={tokenize:i,processTerm:r,...c,...s},{tokenize:d,processTerm:m}=u,y=d(n).flatMap(b=>m(b)).filter(b=>!!b).map(_C(u)).map(b=>this.executeQuerySpec(b,u));return this.combineResults(y,u.combineWith)}executeQuerySpec(n,s){const i={...this._options.searchOptions,...s},r=(i.fields||this._options.fields).reduce((E,C)=>({...E,[C]:pf(i.boost,C)||1}),{}),{boostDocument:c,weights:u,maxFuzzy:d,bm25:m}=i,{fuzzy:p,prefix:v}={...Iy.weights,...u},y=this._index.get(n.term),b=this.termResults(n.term,n.term,1,n.termBoost,y,r,c,m);let S,_;if(n.prefix&&(S=this._index.atPrefix(n.term)),n.fuzzy){const E=n.fuzzy===!0?.2:n.fuzzy,C=E<1?Math.min(d,Math.round(n.term.length*E)):E;C&&(_=this._index.fuzzyGet(n.term,C))}if(S)for(const[E,C]of S){const k=E.length-n.term.length;if(!k)continue;_?.delete(E);const R=v*E.length/(E.length+.3*k);this.termResults(n.term,E,R,n.termBoost,C,r,c,m,b)}if(_)for(const E of _.keys()){const[C,k]=_.get(E);if(!k)continue;const R=p*E.length/(E.length+k);this.termResults(n.term,E,R,n.termBoost,C,r,c,m,b)}return b}executeWildcardQuery(n){const s=new Map,i={...this._options.searchOptions,...n};for(const[r,c]of this._documentIds){const u=i.boostDocument?i.boostDocument(c,"",this._storedFields.get(r)):1;s.set(r,{score:u,terms:[],match:{}})}return s}combineResults(n,s=Ah){if(n.length===0)return new Map;const i=s.toLowerCase(),r=xC[i];if(!r)throw new Error(`Invalid combination operator: ${s}`);return n.reduce(r)||new Map}toJSON(){const n=[];for(const[s,i]of this._index){const r={};for(const[c,u]of i)r[c]=Object.fromEntries(u);n.push([s,r])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:n,serializationVersion:2}}termResults(n,s,i,r,c,u,d,m,p=new Map){if(c==null)return p;for(const v of Object.keys(u)){const y=u[v],b=this._fieldIds[v],S=c.get(b);if(S==null)continue;let _=S.size;const E=this._avgFieldLength[b];for(const C of S.keys()){if(!this._documentIds.has(C)){this.removeTerm(b,C,s),_-=1;continue}const k=d?d(this._documentIds.get(C),s,this._storedFields.get(C)):1;if(!k)continue;const R=S.get(C),z=this._fieldLength.get(C)[b],B=wC(R,_,this._documentCount,z,E,m),q=i*r*y*k*B,M=p.get(C);if(M){M.score+=q,TC(M.terms,n);const j=pf(M.match,s);j?j.push(v):M.match[s]=[v]}else p.set(C,{score:q,terms:[n],match:{[s]:[v]}})}}return p}addTerm(n,s,i){const r=this._index.fetch(i,qy);let c=r.get(n);if(c==null)c=new Map,c.set(s,1),r.set(n,c);else{const u=c.get(s);c.set(s,(u||0)+1)}}removeTerm(n,s,i){if(!this._index.has(i)){this.warnDocumentChanged(s,n,i);return}const r=this._index.fetch(i,qy),c=r.get(n);c==null||c.get(s)==null?this.warnDocumentChanged(s,n,i):c.get(s)<=1?c.size<=1?r.delete(n):c.delete(s):c.set(s,c.get(s)-1),this._index.get(i).size===0&&this._index.delete(i)}warnDocumentChanged(n,s,i){for(const r of Object.keys(this._fieldIds))if(this._fieldIds[r]===s){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(n)} has changed before removal: term "${i}" was not present in field "${r}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(n){const s=this._nextId;return this._idToShortId.set(n,s),this._documentIds.set(s,n),this._documentCount+=1,this._nextId+=1,s}addFields(n){for(let s=0;s<n.length;s++)this._fieldIds[n[s]]=s}addFieldLength(n,s,i,r){let c=this._fieldLength.get(n);c==null&&this._fieldLength.set(n,c=[]),c[s]=r;const d=(this._avgFieldLength[s]||0)*i+r;this._avgFieldLength[s]=d/(i+1)}removeFieldLength(n,s,i,r){if(i===1){this._avgFieldLength[s]=0;return}const c=this._avgFieldLength[s]*i-r;this._avgFieldLength[s]=c/(i-1)}saveStoredFields(n,s){const{storeFields:i,extractField:r}=this._options;if(i==null||i.length===0)return;let c=this._storedFields.get(n);c==null&&this._storedFields.set(n,c={});for(const u of i){const d=r(s,u);d!==void 0&&(c[u]=d)}}}Fi.wildcard=Symbol("*");const pf=(e,n)=>Object.prototype.hasOwnProperty.call(e,n)?e[n]:void 0,xC={[Ah]:(e,n)=>{for(const s of n.keys()){const i=e.get(s);if(i==null)e.set(s,n.get(s));else{const{score:r,terms:c,match:u}=n.get(s);i.score=i.score+r,i.match=Object.assign(i.match,u),By(i.terms,c)}}return e},[tx]:(e,n)=>{const s=new Map;for(const i of n.keys()){const r=e.get(i);if(r==null)continue;const{score:c,terms:u,match:d}=n.get(i);By(r.terms,u),s.set(i,{score:r.score+c,terms:r.terms,match:Object.assign(r.match,d)})}return s},[bC]:(e,n)=>{for(const s of n.keys())e.delete(s);return e}},SC={k:1.2,b:.7,d:.5},wC=(e,n,s,i,r,c)=>{const{k:u,b:d,d:m}=c;return Math.log(1+(s-n+.5)/(n+.5))*(m+e*(u+1)/(e+u*(1-d+d*i/r)))},_C=e=>(n,s,i)=>{const r=typeof e.fuzzy=="function"?e.fuzzy(n,s,i):e.fuzzy||!1,c=typeof e.prefix=="function"?e.prefix(n,s,i):e.prefix===!0,u=typeof e.boostTerm=="function"?e.boostTerm(n,s,i):1;return{term:n,fuzzy:r,prefix:c,termBoost:u}},vf={idField:"id",extractField:(e,n)=>e[n],stringifyField:(e,n)=>e.toString(),tokenize:e=>e.split(NC),processTerm:e=>e.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(e,n)=>{typeof console?.[e]=="function"&&console[e](n)},autoVacuum:!0},Iy={combineWith:Ah,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:SC},EC={combineWith:tx,prefix:(e,n,s)=>n===s.length-1},Vf={batchSize:1e3,batchWait:10},Kf={minDirtFactor:.1,minDirtCount:20},yf={...Vf,...Kf},TC=(e,n)=>{e.includes(n)||e.push(n)},By=(e,n)=>{for(const s of n)e.includes(s)||e.push(s)},Ly=({score:e},{score:n})=>n-e,qy=()=>new Map,Bo=e=>{const n=new Map;for(const s of Object.keys(e))n.set(parseInt(s,10),e[s]);return n},Lo=async e=>{const n=new Map;let s=0;for(const i of Object.keys(e))n.set(parseInt(i,10),e[i]),++s%1e3===0&&await nx(0);return n},nx=e=>new Promise(n=>setTimeout(n,e)),NC=/[\n\r\p{Z}\p{P}]+/u;function ax(e,n){return n==="level"?e.level:n==="powderSlots"||n==="slots"?e.powderSlots:n==="baseDps"?e.roughScoreFields.baseDps:e.numericIndex[n]??0}function MC(e,n){return n.length===0||n.includes(e.category)}function Uy(e,n){return n.length===0?!0:e?n.includes(e):!1}function jC(e,n){for(const[s,i]of Object.entries(n.numericRanges)){if(!i)continue;const r=ax(e,s);if(typeof i.min=="number"&&r<i.min||typeof i.max=="number"&&r>i.max)return!1}return!0}function CC(e,n){for(const[s,i]of Object.entries(n.exclusionRanges??{})){if(!i)continue;const r=ax(e,s);if(typeof i.max=="number"&&r>i.max||typeof i.min=="number"&&r<i.min)return!1}return!0}function DC(e,n){if(n.excludeRestricted&&(e.restricted||e.deprecated)||n.onlyWearableAtLevel!==null&&!bT(e,n.onlyWearableAtLevel))return!1;if(n.onlyClassCompatible){const s=n.classReqs[0]??null;if(!yb(e,s))return!1}return!0}function RC(e,n){return n.length===0?!0:e.majorIds.length===0?!1:n.every(s=>e.majorIds.includes(s))}function kC(e,n){return!(!MC(e,n.categories)||!Uy(e.type,n.types)||!Uy(e.tier,n.tiers)||n.classReqs.length>0&&(e.classReq===null||!n.classReqs.includes(e.classReq))||!RC(e,n.majorIds)||!jC(e,n)||!CC(e,n)||!DC(e,n))}function $y(e,n){return n==="relevance"?0:n==="level"?e.level:n==="powderSlots"||n==="slots"?e.powderSlots:n==="baseDps"?e.roughScoreFields.baseDps:e.numericIndex[n]??0}function AC(e,n,s){const i=n.trim().toLowerCase();if(!i)return 0;const r=e.displayName.toLowerCase();return r===i?s+5e3:r.startsWith(i)?s+3e3:r.includes(i)?s+1200:e.searchText.includes(i)?s+300:s}function OC(e,n,s){const i=s.sortDescending?-1:1,r=s.sortKeys?.length?s.sortKeys:["relevance"];for(const c of r)if(c==="relevance"){if(e.relevance!==n.relevance)return(e.relevance>n.relevance?-1:1)*(s.sortDescending?1:-1)}else{const u=$y(e.item,c),d=$y(n.item,c);if(u!==d)return u<d?-i:i}return e.item.displayName.localeCompare(n.item.displayName)}function zC(){return{categories:{},types:{},tiers:{},majorIds:{}}}function bf(e,n){n&&(e[n]=(e[n]??0)+1)}class PC{miniSearch;itemsById;allItems;constructor(n){this.allItems=n,this.itemsById=new Map(n.map(s=>[s.id,s])),this.miniSearch=new Fi({fields:["displayName","searchText","majorIdsText"],storeFields:["id"],idField:"id",searchOptions:{boost:{displayName:6,searchText:2,majorIdsText:2},prefix:!0,fuzzy:.2,combineWith:"OR"}}),this.miniSearch.addAll(n.map(s=>({id:s.id,displayName:s.displayName,searchText:s.searchText,majorIdsText:s.majorIdsText})))}search(n){const s=n.text.trim(),i=s?this.miniSearch.search(s,{prefix:!0,fuzzy:.2,boost:{displayName:8,searchText:2,majorIdsText:2}}):[],r=new Map;for(const p of i){const v=this.itemsById.get(p.id);v&&r.set(v.id,AC(v,s,Number(p.score??0)))}const c=s?[...this.allItems]:this.allItems,u=[],d=zC();for(const p of c){const v=r.get(p.id)??0;if(!(s&&v===0&&!p.searchText.includes(s.toLowerCase()))&&kC(p,n)){u.push({item:p,relevance:v}),d.categories[p.category]=(d.categories[p.category]??0)+1,bf(d.types,p.type),bf(d.tiers,p.tier);for(const y of p.majorIds)bf(d.majorIds,y)}}u.sort((p,v)=>OC(p,v,n));const m=u.map(({item:p,relevance:v})=>({id:p.id,relevance:v}));return{total:m.length,rows:m,facetCounts:d}}}class IC{worker=null;fallbackEngine=null;requestId=0;pending=new Map;initialized=!1;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL(""+new URL("search-worker-Dray3ejl.js",import.meta.url).href,import.meta.url),{type:"module"}),this.worker.onmessage=n=>{const s=n.data,i=this.pending.get(s.requestId);i&&(this.pending.delete(s.requestId),s.type==="error"?i.reject(new Error(s.message)):s.type==="ready"?i.resolve(void 0):i.resolve(s.result))},this.worker.onerror=n=>{console.error(n),this.worker?.terminate(),this.worker=null})}async init(n){if(!this.initialized){if(this.worker){await this.send({type:"init",items:n}),this.initialized=!0;return}this.fallbackEngine=new PC(n),this.initialized=!0}}async search(n){if(!this.initialized)throw new Error("SearchWorkerClient.init() must be called before search()");if(this.worker)return this.send({type:"search",state:n});if(!this.fallbackEngine)throw new Error("Fallback search engine unavailable");return this.fallbackEngine.search(n)}dispose(){this.worker?.terminate(),this.worker=null,this.fallbackEngine=null,this.pending.clear()}send(n){if(!this.worker)return Promise.reject(new Error("Search worker unavailable"));const s=++this.requestId;return new Promise((i,r)=>{this.pending.set(s,{resolve:i,reject:r}),this.worker.postMessage({...n,requestId:s})})}}function Oi(e,n,s){let i=s.initialDeps??[],r,c=!0;function u(){var d,m,p;let v;s.key&&((d=s.debug)!=null&&d.call(s))&&(v=Date.now());const y=e();if(!(y.length!==i.length||y.some((_,E)=>i[E]!==_)))return r;i=y;let S;if(s.key&&((m=s.debug)!=null&&m.call(s))&&(S=Date.now()),r=n(...y),s.key&&((p=s.debug)!=null&&p.call(s))){const _=Math.round((Date.now()-v)*100)/100,E=Math.round((Date.now()-S)*100)/100,C=E/16,k=(R,z)=>{for(R=String(R);R.length<z;)R=" "+R;return R};console.info(`%c ${k(E,5)} /${k(_,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*C,120))}deg 100% 31%);`,s?.key)}return s?.onChange&&!(c&&s.skipInitialOnChange)&&s.onChange(r),c=!1,r}return u.updateDeps=d=>{i=d},u}function Hy(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const BC=(e,n)=>Math.abs(e-n)<1.01,LC=(e,n,s)=>{let i;return function(...r){e.clearTimeout(i),i=e.setTimeout(()=>n.apply(this,r),s)}},Zy=e=>{const{offsetWidth:n,offsetHeight:s}=e;return{width:n,height:s}},qC=e=>e,UC=e=>{const n=Math.max(e.startIndex-e.overscan,0),s=Math.min(e.endIndex+e.overscan,e.count-1),i=[];for(let r=n;r<=s;r++)i.push(r);return i},$C=(e,n)=>{const s=e.scrollElement;if(!s)return;const i=e.targetWindow;if(!i)return;const r=u=>{const{width:d,height:m}=u;n({width:Math.round(d),height:Math.round(m)})};if(r(Zy(s)),!i.ResizeObserver)return()=>{};const c=new i.ResizeObserver(u=>{const d=()=>{const m=u[0];if(m?.borderBoxSize){const p=m.borderBoxSize[0];if(p){r({width:p.inlineSize,height:p.blockSize});return}}r(Zy(s))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(d):d()});return c.observe(s,{box:"border-box"}),()=>{c.unobserve(s)}},Fy={passive:!0},Gy=typeof window>"u"?!0:"onscrollend"in window,HC=(e,n)=>{const s=e.scrollElement;if(!s)return;const i=e.targetWindow;if(!i)return;let r=0;const c=e.options.useScrollendEvent&&Gy?()=>{}:LC(i,()=>{n(r,!1)},e.options.isScrollingResetDelay),u=v=>()=>{const{horizontal:y,isRtl:b}=e.options;r=y?s.scrollLeft*(b&&-1||1):s.scrollTop,c(),n(r,v)},d=u(!0),m=u(!1);s.addEventListener("scroll",d,Fy);const p=e.options.useScrollendEvent&&Gy;return p&&s.addEventListener("scrollend",m,Fy),()=>{s.removeEventListener("scroll",d),p&&s.removeEventListener("scrollend",m)}},ZC=(e,n,s)=>{if(n?.borderBoxSize){const i=n.borderBoxSize[0];if(i)return Math.round(i[s.options.horizontal?"inlineSize":"blockSize"])}return e[s.options.horizontal?"offsetWidth":"offsetHeight"]},FC=(e,{adjustments:n=0,behavior:s},i)=>{var r,c;const u=e+n;(c=(r=i.scrollElement)==null?void 0:r.scrollTo)==null||c.call(r,{[i.options.horizontal?"left":"top"]:u,behavior:s})};class GC{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let s=null;const i=()=>s||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:s=new this.targetWindow.ResizeObserver(r=>{r.forEach(c=>{const u=()=>{this._measureElement(c.target,c)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(u):u()})}));return{disconnect:()=>{var r;(r=i())==null||r.disconnect(),s=null},observe:r=>{var c;return(c=i())==null?void 0:c.observe(r,{box:"border-box"})},unobserve:r=>{var c;return(c=i())==null?void 0:c.unobserve(r)}}})(),this.range=null,this.setOptions=s=>{Object.entries(s).forEach(([i,r])=>{typeof r>"u"&&delete s[i]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:qC,rangeExtractor:UC,onChange:()=>{},measureElement:ZC,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...s}},this.notify=s=>{var i,r;(r=(i=this.options).onChange)==null||r.call(i,this,s)},this.maybeNotify=Oi(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),s=>{this.notify(s)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(s=>s()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var s;const i=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==i){if(this.cleanup(),!i){this.maybeNotify();return}this.scrollElement=i,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((s=this.scrollElement)==null?void 0:s.window)??null,this.elementsCache.forEach(r=>{this.observer.observe(r)}),this.unsubs.push(this.options.observeElementRect(this,r=>{this.scrollRect=r,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(r,c)=>{this.scrollAdjustments=0,this.scrollDirection=c?this.getScrollOffset()<r?"forward":"backward":null,this.scrollOffset=r,this.isScrolling=c,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(s,i)=>{const r=new Map,c=new Map;for(let u=i-1;u>=0;u--){const d=s[u];if(r.has(d.lane))continue;const m=c.get(d.lane);if(m==null||d.end>m.end?c.set(d.lane,d):d.end<m.end&&r.set(d.lane,!0),r.size===this.options.lanes)break}return c.size===this.options.lanes?Array.from(c.values()).sort((u,d)=>u.end===d.end?u.index-d.index:u.end-d.end)[0]:void 0},this.getMeasurementOptions=Oi(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(s,i,r,c,u,d)=>(this.prevLanes!==void 0&&this.prevLanes!==d&&(this.lanesChangedFlag=!0),this.prevLanes=d,this.pendingMeasuredCacheIndexes=[],{count:s,paddingStart:i,scrollMargin:r,getItemKey:c,enabled:u,lanes:d}),{key:!1}),this.getMeasurements=Oi(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:s,paddingStart:i,scrollMargin:r,getItemKey:c,enabled:u,lanes:d},m)=>{if(!u)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>s)for(const b of this.laneAssignments.keys())b>=s&&this.laneAssignments.delete(b);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(b=>{this.itemSizeCache.set(b.key,b.size)}));const p=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===s&&(this.lanesSettling=!1);const v=this.measurementsCache.slice(0,p),y=new Array(d).fill(void 0);for(let b=0;b<p;b++){const S=v[b];S&&(y[S.lane]=b)}for(let b=p;b<s;b++){const S=c(b),_=this.laneAssignments.get(b);let E,C;if(_!==void 0&&this.options.lanes>1){E=_;const B=y[E],q=B!==void 0?v[B]:void 0;C=q?q.end+this.options.gap:i+r}else{const B=this.options.lanes===1?v[b-1]:this.getFurthestMeasurement(v,b);C=B?B.end+this.options.gap:i+r,E=B?B.lane:b%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(b,E)}const k=m.get(S),R=typeof k=="number"?k:this.options.estimateSize(b),z=C+R;v[b]={index:b,start:C,size:R,end:z,key:S,lane:E},y[E]=b}return this.measurementsCache=v,v},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Oi(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(s,i,r,c)=>this.range=s.length>0&&i>0?YC({measurements:s,outerSize:i,scrollOffset:r,lanes:c}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Oi(()=>{let s=null,i=null;const r=this.calculateRange();return r&&(s=r.startIndex,i=r.endIndex),this.maybeNotify.updateDeps([this.isScrolling,s,i]),[this.options.rangeExtractor,this.options.overscan,this.options.count,s,i]},(s,i,r,c,u)=>c===null||u===null?[]:s({startIndex:c,endIndex:u,overscan:i,count:r}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=s=>{const i=this.options.indexAttribute,r=s.getAttribute(i);return r?parseInt(r,10):(console.warn(`Missing attribute name '${i}={index}' on measured element.`),-1)},this._measureElement=(s,i)=>{const r=this.indexFromElement(s),c=this.measurementsCache[r];if(!c)return;const u=c.key,d=this.elementsCache.get(u);d!==s&&(d&&this.observer.unobserve(d),this.observer.observe(s),this.elementsCache.set(u,s)),s.isConnected&&this.resizeItem(r,this.options.measureElement(s,i,this))},this.resizeItem=(s,i)=>{const r=this.measurementsCache[s];if(!r)return;const c=this.itemSizeCache.get(r.key)??r.size,u=i-c;u!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(r,u,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=u,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,i)),this.notify(!1))},this.measureElement=s=>{if(!s){this.elementsCache.forEach((i,r)=>{i.isConnected||(this.observer.unobserve(i),this.elementsCache.delete(r))});return}this._measureElement(s,void 0)},this.getVirtualItems=Oi(()=>[this.getVirtualIndexes(),this.getMeasurements()],(s,i)=>{const r=[];for(let c=0,u=s.length;c<u;c++){const d=s[c],m=i[d];r.push(m)}return r},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=s=>{const i=this.getMeasurements();if(i.length!==0)return Hy(i[sx(0,i.length-1,r=>Hy(i[r]).start,s)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const s=this.scrollElement.document.documentElement;return this.options.horizontal?s.scrollWidth-this.scrollElement.innerWidth:s.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(s,i,r=0)=>{if(!this.scrollElement)return 0;const c=this.getSize(),u=this.getScrollOffset();i==="auto"&&(i=s>=u+c?"end":"start"),i==="center"?s+=(r-c)/2:i==="end"&&(s-=c);const d=this.getMaxScrollOffset();return Math.max(Math.min(d,s),0)},this.getOffsetForIndex=(s,i="auto")=>{s=Math.max(0,Math.min(s,this.options.count-1));const r=this.measurementsCache[s];if(!r)return;const c=this.getSize(),u=this.getScrollOffset();if(i==="auto")if(r.end>=u+c-this.options.scrollPaddingEnd)i="end";else if(r.start<=u+this.options.scrollPaddingStart)i="start";else return[u,i];if(i==="end"&&s===this.options.count-1)return[this.getMaxScrollOffset(),i];const d=i==="end"?r.end+this.options.scrollPaddingEnd:r.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(d,i,r.size),i]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(s,{align:i="start",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(s,i),{adjustments:void 0,behavior:r})},this.scrollToIndex=(s,{align:i="auto",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),s=Math.max(0,Math.min(s,this.options.count-1)),this.currentScrollToIndex=s;let c=0;const u=10,d=p=>{if(!this.targetWindow)return;const v=this.getOffsetForIndex(s,p);if(!v){console.warn("Failed to get offset for index:",s);return}const[y,b]=v;this._scrollToOffset(y,{adjustments:void 0,behavior:r}),this.targetWindow.requestAnimationFrame(()=>{const S=()=>{if(this.currentScrollToIndex!==s)return;const _=this.getScrollOffset(),E=this.getOffsetForIndex(s,b);if(!E){console.warn("Failed to get offset for index:",s);return}BC(E[0],_)||m(b)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(S):S()})},m=p=>{this.targetWindow&&this.currentScrollToIndex===s&&(c++,c<u?this.targetWindow.requestAnimationFrame(()=>d(p)):console.warn(`Failed to scroll to index ${s} after ${u} attempts.`))};d(i)},this.scrollBy=(s,{behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+s,{adjustments:void 0,behavior:i})},this.getTotalSize=()=>{var s;const i=this.getMeasurements();let r;if(i.length===0)r=this.options.paddingStart;else if(this.options.lanes===1)r=((s=i[i.length-1])==null?void 0:s.end)??0;else{const c=Array(this.options.lanes).fill(null);let u=i.length-1;for(;u>=0&&c.some(d=>d===null);){const d=i[u];c[d.lane]===null&&(c[d.lane]=d.end),u--}r=Math.max(...c.filter(d=>d!==null))}return Math.max(r-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(s,{adjustments:i,behavior:r})=>{this.options.scrollToFn(s,{behavior:r,adjustments:i},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(n)}}const sx=(e,n,s,i)=>{for(;e<=n;){const r=(e+n)/2|0,c=s(r);if(c<i)e=r+1;else if(c>i)n=r-1;else return r}return e>0?e-1:0};function YC({measurements:e,outerSize:n,scrollOffset:s,lanes:i}){const r=e.length-1,c=m=>e[m].start;if(e.length<=i)return{startIndex:0,endIndex:r};let u=sx(0,r,c,s),d=u;if(i===1)for(;d<r&&e[d].end<s+n;)d++;else if(i>1){const m=Array(i).fill(0);for(;d<r&&m.some(v=>v<s+n);){const v=e[d];m[v.lane]=v.end,d++}const p=Array(i).fill(s+n);for(;u>=0&&p.some(v=>v>=s);){const v=e[u];p[v.lane]=v.start,u--}u=Math.max(0,u-u%i),d=Math.min(r,d+(i-1-d%i))}return{startIndex:u,endIndex:d}}const Yy=typeof document<"u"?w.useLayoutEffect:w.useEffect;function VC({useFlushSync:e=!0,...n}){const s=w.useReducer(()=>({}),{})[1],i={...n,onChange:(c,u)=>{var d;e&&u?Pa.flushSync(s):s(),(d=n.onChange)==null||d.call(n,c,u)}},[r]=w.useState(()=>new GC(i));return r.setOptions(i),Yy(()=>r._didMount(),[]),Yy(()=>r._willUpdate()),r}function KC(e){return VC({observeElementRect:$C,observeElementOffset:HC,scrollToFn:FC,...e})}const WC={relevance:"Relevance",level:"Combat Level",baseDps:"Base DPS",slots:"Powder Slots",hp:"Health",hpBonus:"Health Bonus",hprRaw:"Raw Health Regen",hprPct:"Health Regen %",mr:"Mana Regen",ms:"Mana Steal",ls:"Life Steal",sdPct:"Spell Damage %",sdRaw:"Spell Damage Raw",mdPct:"Melee Damage %",mdRaw:"Melee Damage Raw",poison:"Poison",spd:"Walk Speed Bonus",atkTier:"Attack Speed Bonus",averageDps:"Average DPS",str:"Strength",dex:"Dexterity",int:"Intelligence",def:"Defense",agi:"Agility",strReq:"Strength Min",dexReq:"Dexterity Min",intReq:"Intelligence Min",defReq:"Defense Min",agiReq:"Agility Min",eDef:"Earth Defense",tDef:"Thunder Defense",wDef:"Water Defense",fDef:"Fire Defense",aDef:"Air Defense",eDamPct:"Earth Damage %",tDamPct:"Thunder Damage %",wDamPct:"Water Damage %",fDamPct:"Fire Damage %",aDamPct:"Air Damage %",damPct:"Damage %",rDamPct:"Elemental Damage %",nDamPct:"Neutral Damage %",lvl:"Combat Level",reqTotal:"Req Total",skillPointTotal:"Skill Point Total",offenseScore:"Offense Score",ehpProxy:"EHP Proxy",utilityScore:"Utility Score",spPct1:"1st Spell Cost %",spRaw1:"1st Spell Cost Raw",spPct2:"2nd Spell Cost %",spRaw2:"2nd Spell Cost Raw",spPct3:"3rd Spell Cost %",spRaw3:"3rd Spell Cost Raw",spPct4:"4th Spell Cost %",spRaw4:"4th Spell Cost Raw",sumSpPct:"Sum Spell Cost %",sumSpRaw:"Sum Spell Cost Raw"};function Ht(e){return WC[e]??e}function ps(e,n,{checkForDefaultPrevented:s=!0}={}){return function(r){if(e?.(r),s===!1||!r.defaultPrevented)return n?.(r)}}function Vy(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function ix(...e){return n=>{let s=!1;const i=e.map(r=>{const c=Vy(r,n);return!s&&typeof c=="function"&&(s=!0),c});if(s)return()=>{for(let r=0;r<i.length;r++){const c=i[r];typeof c=="function"?c():Vy(e[r],null)}}}}function Ys(...e){return w.useCallback(ix(...e),e)}function XC(e,n){const s=w.createContext(n),i=c=>{const{children:u,...d}=c,m=w.useMemo(()=>d,Object.values(d));return h.jsx(s.Provider,{value:m,children:u})};i.displayName=e+"Provider";function r(c){const u=w.useContext(s);if(u)return u;if(n!==void 0)return n;throw new Error(`\`${c}\` must be used within \`${e}\``)}return[i,r]}function QC(e,n=[]){let s=[];function i(c,u){const d=w.createContext(u),m=s.length;s=[...s,u];const p=y=>{const{scope:b,children:S,..._}=y,E=b?.[e]?.[m]||d,C=w.useMemo(()=>_,Object.values(_));return h.jsx(E.Provider,{value:C,children:S})};p.displayName=c+"Provider";function v(y,b){const S=b?.[e]?.[m]||d,_=w.useContext(S);if(_)return _;if(u!==void 0)return u;throw new Error(`\`${y}\` must be used within \`${c}\``)}return[p,v]}const r=()=>{const c=s.map(u=>w.createContext(u));return function(d){const m=d?.[e]||c;return w.useMemo(()=>({[`__scope${e}`]:{...d,[e]:m}}),[d,m])}};return r.scopeName=e,[i,JC(r,...n)]}function JC(...e){const n=e[0];if(e.length===1)return n;const s=()=>{const i=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(c){const u=i.reduce((d,{useScope:m,scopeName:p})=>{const y=m(c)[`__scope${p}`];return{...d,...y}},{});return w.useMemo(()=>({[`__scope${n.scopeName}`]:u}),[u])}};return s.scopeName=n.scopeName,s}var ur=globalThis?.document?w.useLayoutEffect:()=>{},eD=q0[" useId ".trim().toString()]||(()=>{}),tD=0;function xf(e){const[n,s]=w.useState(eD());return ur(()=>{s(i=>i??String(tD++))},[e]),e||(n?`radix-${n}`:"")}var nD=q0[" useInsertionEffect ".trim().toString()]||ur;function aD({prop:e,defaultProp:n,onChange:s=()=>{},caller:i}){const[r,c,u]=sD({defaultProp:n,onChange:s}),d=e!==void 0,m=d?e:r;{const v=w.useRef(e!==void 0);w.useEffect(()=>{const y=v.current;y!==d&&console.warn(`${i} is changing from ${y?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),v.current=d},[d,i])}const p=w.useCallback(v=>{if(d){const y=iD(v)?v(e):v;y!==e&&u.current?.(y)}else c(v)},[d,e,c,u]);return[m,p]}function sD({defaultProp:e,onChange:n}){const[s,i]=w.useState(e),r=w.useRef(s),c=w.useRef(n);return nD(()=>{c.current=n},[n]),w.useEffect(()=>{r.current!==s&&(c.current?.(s),r.current=s)},[s,r]),[s,i,c]}function iD(e){return typeof e=="function"}function lx(e){const n=lD(e),s=w.forwardRef((i,r)=>{const{children:c,...u}=i,d=w.Children.toArray(c),m=d.find(oD);if(m){const p=m.props.children,v=d.map(y=>y===m?w.Children.count(p)>1?w.Children.only(null):w.isValidElement(p)?p.props.children:null:y);return h.jsx(n,{...u,ref:r,children:w.isValidElement(p)?w.cloneElement(p,void 0,v):null})}return h.jsx(n,{...u,ref:r,children:c})});return s.displayName=`${e}.Slot`,s}function lD(e){const n=w.forwardRef((s,i)=>{const{children:r,...c}=s;if(w.isValidElement(r)){const u=uD(r),d=cD(c,r.props);return r.type!==w.Fragment&&(d.ref=i?ix(i,u):u),w.cloneElement(r,d)}return w.Children.count(r)>1?w.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var rD=Symbol("radix.slottable");function oD(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===rD}function cD(e,n){const s={...n};for(const i in n){const r=e[i],c=n[i];/^on[A-Z]/.test(i)?r&&c?s[i]=(...d)=>{const m=c(...d);return r(...d),m}:r&&(s[i]=r):i==="style"?s[i]={...r,...c}:i==="className"&&(s[i]=[r,c].filter(Boolean).join(" "))}return{...e,...s}}function uD(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var dD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],La=dD.reduce((e,n)=>{const s=lx(`Primitive.${n}`),i=w.forwardRef((r,c)=>{const{asChild:u,...d}=r,m=u?s:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(m,{...d,ref:c})});return i.displayName=`Primitive.${n}`,{...e,[n]:i}},{});function fD(e,n){e&&Pa.flushSync(()=>e.dispatchEvent(n))}function dr(e){const n=w.useRef(e);return w.useEffect(()=>{n.current=e}),w.useMemo(()=>(...s)=>n.current?.(...s),[])}function hD(e,n=globalThis?.document){const s=dr(e);w.useEffect(()=>{const i=r=>{r.key==="Escape"&&s(r)};return n.addEventListener("keydown",i,{capture:!0}),()=>n.removeEventListener("keydown",i,{capture:!0})},[s,n])}var mD="DismissableLayer",Wf="dismissableLayer.update",gD="dismissableLayer.pointerDownOutside",pD="dismissableLayer.focusOutside",Ky,rx=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ox=w.forwardRef((e,n)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:c,onInteractOutside:u,onDismiss:d,...m}=e,p=w.useContext(rx),[v,y]=w.useState(null),b=v?.ownerDocument??globalThis?.document,[,S]=w.useState({}),_=Ys(n,j=>y(j)),E=Array.from(p.layers),[C]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),k=E.indexOf(C),R=v?E.indexOf(v):-1,z=p.layersWithOutsidePointerEventsDisabled.size>0,B=R>=k,q=bD(j=>{const D=j.target,Z=[...p.branches].some(le=>le.contains(D));!B||Z||(r?.(j),u?.(j),j.defaultPrevented||d?.())},b),M=xD(j=>{const D=j.target;[...p.branches].some(le=>le.contains(D))||(c?.(j),u?.(j),j.defaultPrevented||d?.())},b);return hD(j=>{R===p.layers.size-1&&(i?.(j),!j.defaultPrevented&&d&&(j.preventDefault(),d()))},b),w.useEffect(()=>{if(v)return s&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(Ky=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(v)),p.layers.add(v),Wy(),()=>{s&&p.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=Ky)}},[v,b,s,p]),w.useEffect(()=>()=>{v&&(p.layers.delete(v),p.layersWithOutsidePointerEventsDisabled.delete(v),Wy())},[v,p]),w.useEffect(()=>{const j=()=>S({});return document.addEventListener(Wf,j),()=>document.removeEventListener(Wf,j)},[]),h.jsx(La.div,{...m,ref:_,style:{pointerEvents:z?B?"auto":"none":void 0,...e.style},onFocusCapture:ps(e.onFocusCapture,M.onFocusCapture),onBlurCapture:ps(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:ps(e.onPointerDownCapture,q.onPointerDownCapture)})});ox.displayName=mD;var vD="DismissableLayerBranch",yD=w.forwardRef((e,n)=>{const s=w.useContext(rx),i=w.useRef(null),r=Ys(n,i);return w.useEffect(()=>{const c=i.current;if(c)return s.branches.add(c),()=>{s.branches.delete(c)}},[s.branches]),h.jsx(La.div,{...e,ref:r})});yD.displayName=vD;function bD(e,n=globalThis?.document){const s=dr(e),i=w.useRef(!1),r=w.useRef(()=>{});return w.useEffect(()=>{const c=d=>{if(d.target&&!i.current){let m=function(){cx(gD,s,p,{discrete:!0})};const p={originalEvent:d};d.pointerType==="touch"?(n.removeEventListener("click",r.current),r.current=m,n.addEventListener("click",r.current,{once:!0})):m()}else n.removeEventListener("click",r.current);i.current=!1},u=window.setTimeout(()=>{n.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(u),n.removeEventListener("pointerdown",c),n.removeEventListener("click",r.current)}},[n,s]),{onPointerDownCapture:()=>i.current=!0}}function xD(e,n=globalThis?.document){const s=dr(e),i=w.useRef(!1);return w.useEffect(()=>{const r=c=>{c.target&&!i.current&&cx(pD,s,{originalEvent:c},{discrete:!1})};return n.addEventListener("focusin",r),()=>n.removeEventListener("focusin",r)},[n,s]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function Wy(){const e=new CustomEvent(Wf);document.dispatchEvent(e)}function cx(e,n,s,{discrete:i}){const r=s.originalEvent.target,c=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});n&&r.addEventListener(e,n,{once:!0}),i?fD(r,c):r.dispatchEvent(c)}var Sf="focusScope.autoFocusOnMount",wf="focusScope.autoFocusOnUnmount",Xy={bubbles:!1,cancelable:!0},SD="FocusScope",ux=w.forwardRef((e,n)=>{const{loop:s=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:c,...u}=e,[d,m]=w.useState(null),p=dr(r),v=dr(c),y=w.useRef(null),b=Ys(n,E=>m(E)),S=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(i){let E=function(z){if(S.paused||!d)return;const B=z.target;d.contains(B)?y.current=B:ds(y.current,{select:!0})},C=function(z){if(S.paused||!d)return;const B=z.relatedTarget;B!==null&&(d.contains(B)||ds(y.current,{select:!0}))},k=function(z){if(document.activeElement===document.body)for(const q of z)q.removedNodes.length>0&&ds(d)};document.addEventListener("focusin",E),document.addEventListener("focusout",C);const R=new MutationObserver(k);return d&&R.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",E),document.removeEventListener("focusout",C),R.disconnect()}}},[i,d,S.paused]),w.useEffect(()=>{if(d){Jy.add(S);const E=document.activeElement;if(!d.contains(E)){const k=new CustomEvent(Sf,Xy);d.addEventListener(Sf,p),d.dispatchEvent(k),k.defaultPrevented||(wD(MD(dx(d)),{select:!0}),document.activeElement===E&&ds(d))}return()=>{d.removeEventListener(Sf,p),setTimeout(()=>{const k=new CustomEvent(wf,Xy);d.addEventListener(wf,v),d.dispatchEvent(k),k.defaultPrevented||ds(E??document.body,{select:!0}),d.removeEventListener(wf,v),Jy.remove(S)},0)}}},[d,p,v,S]);const _=w.useCallback(E=>{if(!s&&!i||S.paused)return;const C=E.key==="Tab"&&!E.altKey&&!E.ctrlKey&&!E.metaKey,k=document.activeElement;if(C&&k){const R=E.currentTarget,[z,B]=_D(R);z&&B?!E.shiftKey&&k===B?(E.preventDefault(),s&&ds(z,{select:!0})):E.shiftKey&&k===z&&(E.preventDefault(),s&&ds(B,{select:!0})):k===R&&E.preventDefault()}},[s,i,S.paused]);return h.jsx(La.div,{tabIndex:-1,...u,ref:b,onKeyDown:_})});ux.displayName=SD;function wD(e,{select:n=!1}={}){const s=document.activeElement;for(const i of e)if(ds(i,{select:n}),document.activeElement!==s)return}function _D(e){const n=dx(e),s=Qy(n,e),i=Qy(n.reverse(),e);return[s,i]}function dx(e){const n=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)n.push(s.currentNode);return n}function Qy(e,n){for(const s of e)if(!ED(s,{upTo:n}))return s}function ED(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function TD(e){return e instanceof HTMLInputElement&&"select"in e}function ds(e,{select:n=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&TD(e)&&n&&e.select()}}var Jy=ND();function ND(){let e=[];return{add(n){const s=e[0];n!==s&&s?.pause(),e=e0(e,n),e.unshift(n)},remove(n){e=e0(e,n),e[0]?.resume()}}}function e0(e,n){const s=[...e],i=s.indexOf(n);return i!==-1&&s.splice(i,1),s}function MD(e){return e.filter(n=>n.tagName!=="A")}var jD="Portal",fx=w.forwardRef((e,n)=>{const{container:s,...i}=e,[r,c]=w.useState(!1);ur(()=>c(!0),[]);const u=s||r&&globalThis?.document?.body;return u?n_.createPortal(h.jsx(La.div,{...i,ref:n}),u):null});fx.displayName=jD;function CD(e,n){return w.useReducer((s,i)=>n[s][i]??s,e)}var Oc=e=>{const{present:n,children:s}=e,i=DD(n),r=typeof s=="function"?s({present:i.isPresent}):w.Children.only(s),c=Ys(i.ref,RD(r));return typeof s=="function"||i.isPresent?w.cloneElement(r,{ref:c}):null};Oc.displayName="Presence";function DD(e){const[n,s]=w.useState(),i=w.useRef(null),r=w.useRef(e),c=w.useRef("none"),u=e?"mounted":"unmounted",[d,m]=CD(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const p=qo(i.current);c.current=d==="mounted"?p:"none"},[d]),ur(()=>{const p=i.current,v=r.current;if(v!==e){const b=c.current,S=qo(p);e?m("MOUNT"):S==="none"||p?.display==="none"?m("UNMOUNT"):m(v&&b!==S?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,m]),ur(()=>{if(n){let p;const v=n.ownerDocument.defaultView??window,y=S=>{const E=qo(i.current).includes(CSS.escape(S.animationName));if(S.target===n&&E&&(m("ANIMATION_END"),!r.current)){const C=n.style.animationFillMode;n.style.animationFillMode="forwards",p=v.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=C)})}},b=S=>{S.target===n&&(c.current=qo(i.current))};return n.addEventListener("animationstart",b),n.addEventListener("animationcancel",y),n.addEventListener("animationend",y),()=>{v.clearTimeout(p),n.removeEventListener("animationstart",b),n.removeEventListener("animationcancel",y),n.removeEventListener("animationend",y)}}else m("ANIMATION_END")},[n,m]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:w.useCallback(p=>{i.current=p?getComputedStyle(p):null,s(p)},[])}}function qo(e){return e?.animationName||"none"}function RD(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var _f=0;function kD(){w.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??t0()),document.body.insertAdjacentElement("beforeend",e[1]??t0()),_f++,()=>{_f===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),_f--}},[])}function t0(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ua=function(){return ua=Object.assign||function(n){for(var s,i=1,r=arguments.length;i<r;i++){s=arguments[i];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(n[c]=s[c])}return n},ua.apply(this,arguments)};function hx(e,n){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(s[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(s[i[r]]=e[i[r]]);return s}function AD(e,n,s){if(s||arguments.length===2)for(var i=0,r=n.length,c;i<r;i++)(c||!(i in n))&&(c||(c=Array.prototype.slice.call(n,0,i)),c[i]=n[i]);return e.concat(c||Array.prototype.slice.call(n))}var ec="right-scroll-bar-position",tc="width-before-scroll-bar",OD="with-scroll-bars-hidden",zD="--removed-body-scroll-bar-size";function Ef(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function PD(e,n){var s=w.useState(function(){return{value:e,callback:n,facade:{get current(){return s.value},set current(i){var r=s.value;r!==i&&(s.value=i,s.callback(i,r))}}}})[0];return s.callback=n,s.facade}var ID=typeof window<"u"?w.useLayoutEffect:w.useEffect,n0=new WeakMap;function BD(e,n){var s=PD(null,function(i){return e.forEach(function(r){return Ef(r,i)})});return ID(function(){var i=n0.get(s);if(i){var r=new Set(i),c=new Set(e),u=s.current;r.forEach(function(d){c.has(d)||Ef(d,null)}),c.forEach(function(d){r.has(d)||Ef(d,u)})}n0.set(s,e)},[e]),s}function LD(e){return e}function qD(e,n){n===void 0&&(n=LD);var s=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(c){var u=n(c,i);return s.push(u),function(){s=s.filter(function(d){return d!==u})}},assignSyncMedium:function(c){for(i=!0;s.length;){var u=s;s=[],u.forEach(c)}s={push:function(d){return c(d)},filter:function(){return s}}},assignMedium:function(c){i=!0;var u=[];if(s.length){var d=s;s=[],d.forEach(c),u=s}var m=function(){var v=u;u=[],v.forEach(c)},p=function(){return Promise.resolve().then(m)};p(),s={push:function(v){u.push(v),p()},filter:function(v){return u=u.filter(v),s}}}};return r}function UD(e){e===void 0&&(e={});var n=qD(null);return n.options=ua({async:!0,ssr:!1},e),n}var mx=function(e){var n=e.sideCar,s=hx(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=n.read();if(!i)throw new Error("Sidecar medium not found");return w.createElement(i,ua({},s))};mx.isSideCarExport=!0;function $D(e,n){return e.useMedium(n),mx}var gx=UD(),Tf=function(){},zc=w.forwardRef(function(e,n){var s=w.useRef(null),i=w.useState({onScrollCapture:Tf,onWheelCapture:Tf,onTouchMoveCapture:Tf}),r=i[0],c=i[1],u=e.forwardProps,d=e.children,m=e.className,p=e.removeScrollBar,v=e.enabled,y=e.shards,b=e.sideCar,S=e.noRelative,_=e.noIsolation,E=e.inert,C=e.allowPinchZoom,k=e.as,R=k===void 0?"div":k,z=e.gapMode,B=hx(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),q=b,M=BD([s,n]),j=ua(ua({},B),r);return w.createElement(w.Fragment,null,v&&w.createElement(q,{sideCar:gx,removeScrollBar:p,shards:y,noRelative:S,noIsolation:_,inert:E,setCallbacks:c,allowPinchZoom:!!C,lockRef:s,gapMode:z}),u?w.cloneElement(w.Children.only(d),ua(ua({},j),{ref:M})):w.createElement(R,ua({},j,{className:m,ref:M}),d))});zc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};zc.classNames={fullWidth:tc,zeroRight:ec};var HD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ZD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=HD();return n&&e.setAttribute("nonce",n),e}function FD(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function GD(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var YD=function(){var e=0,n=null;return{add:function(s){e==0&&(n=ZD())&&(FD(n,s),GD(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},VD=function(){var e=YD();return function(n,s){w.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&s])}},px=function(){var e=VD(),n=function(s){var i=s.styles,r=s.dynamic;return e(i,r),null};return n},KD={left:0,top:0,right:0,gap:0},Nf=function(e){return parseInt(e||"",10)||0},WD=function(e){var n=window.getComputedStyle(document.body),s=n[e==="padding"?"paddingLeft":"marginLeft"],i=n[e==="padding"?"paddingTop":"marginTop"],r=n[e==="padding"?"paddingRight":"marginRight"];return[Nf(s),Nf(i),Nf(r)]},XD=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return KD;var n=WD(e),s=document.documentElement.clientWidth,i=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,i-s+n[2]-n[0])}},QD=px(),Gi="data-scroll-locked",JD=function(e,n,s,i){var r=e.left,c=e.top,u=e.right,d=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(OD,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(d,"px ").concat(i,`;
  }
  body[`).concat(Gi,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(i,";"),s==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(i,`;
    `),s==="padding"&&"padding-right: ".concat(d,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ec,` {
    right: `).concat(d,"px ").concat(i,`;
  }
  
  .`).concat(tc,` {
    margin-right: `).concat(d,"px ").concat(i,`;
  }
  
  .`).concat(ec," .").concat(ec,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(tc," .").concat(tc,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Gi,`] {
    `).concat(zD,": ").concat(d,`px;
  }
`)},a0=function(){var e=parseInt(document.body.getAttribute(Gi)||"0",10);return isFinite(e)?e:0},eR=function(){w.useEffect(function(){return document.body.setAttribute(Gi,(a0()+1).toString()),function(){var e=a0()-1;e<=0?document.body.removeAttribute(Gi):document.body.setAttribute(Gi,e.toString())}},[])},tR=function(e){var n=e.noRelative,s=e.noImportant,i=e.gapMode,r=i===void 0?"margin":i;eR();var c=w.useMemo(function(){return XD(r)},[r]);return w.createElement(QD,{styles:JD(c,!n,r,s?"":"!important")})},Xf=!1;if(typeof window<"u")try{var Uo=Object.defineProperty({},"passive",{get:function(){return Xf=!0,!0}});window.addEventListener("test",Uo,Uo),window.removeEventListener("test",Uo,Uo)}catch{Xf=!1}var zi=Xf?{passive:!1}:!1,nR=function(e){return e.tagName==="TEXTAREA"},vx=function(e,n){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[n]!=="hidden"&&!(s.overflowY===s.overflowX&&!nR(e)&&s[n]==="visible")},aR=function(e){return vx(e,"overflowY")},sR=function(e){return vx(e,"overflowX")},s0=function(e,n){var s=n.ownerDocument,i=n;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=yx(e,i);if(r){var c=bx(e,i),u=c[1],d=c[2];if(u>d)return!0}i=i.parentNode}while(i&&i!==s.body);return!1},iR=function(e){var n=e.scrollTop,s=e.scrollHeight,i=e.clientHeight;return[n,s,i]},lR=function(e){var n=e.scrollLeft,s=e.scrollWidth,i=e.clientWidth;return[n,s,i]},yx=function(e,n){return e==="v"?aR(n):sR(n)},bx=function(e,n){return e==="v"?iR(n):lR(n)},rR=function(e,n){return e==="h"&&n==="rtl"?-1:1},oR=function(e,n,s,i,r){var c=rR(e,window.getComputedStyle(n).direction),u=c*i,d=s.target,m=n.contains(d),p=!1,v=u>0,y=0,b=0;do{if(!d)break;var S=bx(e,d),_=S[0],E=S[1],C=S[2],k=E-C-c*_;(_||k)&&yx(e,d)&&(y+=k,b+=_);var R=d.parentNode;d=R&&R.nodeType===Node.DOCUMENT_FRAGMENT_NODE?R.host:R}while(!m&&d!==document.body||m&&(n.contains(d)||n===d));return(v&&Math.abs(y)<1||!v&&Math.abs(b)<1)&&(p=!0),p},$o=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},i0=function(e){return[e.deltaX,e.deltaY]},l0=function(e){return e&&"current"in e?e.current:e},cR=function(e,n){return e[0]===n[0]&&e[1]===n[1]},uR=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},dR=0,Pi=[];function fR(e){var n=w.useRef([]),s=w.useRef([0,0]),i=w.useRef(),r=w.useState(dR++)[0],c=w.useState(px)[0],u=w.useRef(e);w.useEffect(function(){u.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var E=AD([e.lockRef.current],(e.shards||[]).map(l0),!0).filter(Boolean);return E.forEach(function(C){return C.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),E.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var d=w.useCallback(function(E,C){if("touches"in E&&E.touches.length===2||E.type==="wheel"&&E.ctrlKey)return!u.current.allowPinchZoom;var k=$o(E),R=s.current,z="deltaX"in E?E.deltaX:R[0]-k[0],B="deltaY"in E?E.deltaY:R[1]-k[1],q,M=E.target,j=Math.abs(z)>Math.abs(B)?"h":"v";if("touches"in E&&j==="h"&&M.type==="range")return!1;var D=window.getSelection(),Z=D&&D.anchorNode,le=Z?Z===M||Z.contains(M):!1;if(le)return!1;var de=s0(j,M);if(!de)return!0;if(de?q=j:(q=j==="v"?"h":"v",de=s0(j,M)),!de)return!1;if(!i.current&&"changedTouches"in E&&(z||B)&&(i.current=q),!q)return!0;var ne=i.current||q;return oR(ne,C,E,ne==="h"?z:B)},[]),m=w.useCallback(function(E){var C=E;if(!(!Pi.length||Pi[Pi.length-1]!==c)){var k="deltaY"in C?i0(C):$o(C),R=n.current.filter(function(q){return q.name===C.type&&(q.target===C.target||C.target===q.shadowParent)&&cR(q.delta,k)})[0];if(R&&R.should){C.cancelable&&C.preventDefault();return}if(!R){var z=(u.current.shards||[]).map(l0).filter(Boolean).filter(function(q){return q.contains(C.target)}),B=z.length>0?d(C,z[0]):!u.current.noIsolation;B&&C.cancelable&&C.preventDefault()}}},[]),p=w.useCallback(function(E,C,k,R){var z={name:E,delta:C,target:k,should:R,shadowParent:hR(k)};n.current.push(z),setTimeout(function(){n.current=n.current.filter(function(B){return B!==z})},1)},[]),v=w.useCallback(function(E){s.current=$o(E),i.current=void 0},[]),y=w.useCallback(function(E){p(E.type,i0(E),E.target,d(E,e.lockRef.current))},[]),b=w.useCallback(function(E){p(E.type,$o(E),E.target,d(E,e.lockRef.current))},[]);w.useEffect(function(){return Pi.push(c),e.setCallbacks({onScrollCapture:y,onWheelCapture:y,onTouchMoveCapture:b}),document.addEventListener("wheel",m,zi),document.addEventListener("touchmove",m,zi),document.addEventListener("touchstart",v,zi),function(){Pi=Pi.filter(function(E){return E!==c}),document.removeEventListener("wheel",m,zi),document.removeEventListener("touchmove",m,zi),document.removeEventListener("touchstart",v,zi)}},[]);var S=e.removeScrollBar,_=e.inert;return w.createElement(w.Fragment,null,_?w.createElement(c,{styles:uR(r)}):null,S?w.createElement(tR,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function hR(e){for(var n=null;e!==null;)e instanceof ShadowRoot&&(n=e.host,e=e.host),e=e.parentNode;return n}const mR=$D(gx,fR);var xx=w.forwardRef(function(e,n){return w.createElement(zc,ua({},e,{ref:n,sideCar:mR}))});xx.classNames=zc.classNames;var gR=function(e){if(typeof document>"u")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},Ii=new WeakMap,Ho=new WeakMap,Zo={},Mf=0,Sx=function(e){return e&&(e.host||Sx(e.parentNode))},pR=function(e,n){return n.map(function(s){if(e.contains(s))return s;var i=Sx(s);return i&&e.contains(i)?i:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},vR=function(e,n,s,i){var r=pR(n,Array.isArray(e)?e:[e]);Zo[s]||(Zo[s]=new WeakMap);var c=Zo[s],u=[],d=new Set,m=new Set(r),p=function(y){!y||d.has(y)||(d.add(y),p(y.parentNode))};r.forEach(p);var v=function(y){!y||m.has(y)||Array.prototype.forEach.call(y.children,function(b){if(d.has(b))v(b);else try{var S=b.getAttribute(i),_=S!==null&&S!=="false",E=(Ii.get(b)||0)+1,C=(c.get(b)||0)+1;Ii.set(b,E),c.set(b,C),u.push(b),E===1&&_&&Ho.set(b,!0),C===1&&b.setAttribute(s,"true"),_||b.setAttribute(i,"true")}catch(k){console.error("aria-hidden: cannot operate on ",b,k)}})};return v(n),d.clear(),Mf++,function(){u.forEach(function(y){var b=Ii.get(y)-1,S=c.get(y)-1;Ii.set(y,b),c.set(y,S),b||(Ho.has(y)||y.removeAttribute(i),Ho.delete(y)),S||y.removeAttribute(s)}),Mf--,Mf||(Ii=new WeakMap,Ii=new WeakMap,Ho=new WeakMap,Zo={})}},yR=function(e,n,s){s===void 0&&(s="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),r=gR(e);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),vR(i,r,s,"aria-hidden")):function(){return null}},Pc="Dialog",[wx]=QC(Pc),[bR,sa]=wx(Pc),_x=e=>{const{__scopeDialog:n,children:s,open:i,defaultOpen:r,onOpenChange:c,modal:u=!0}=e,d=w.useRef(null),m=w.useRef(null),[p,v]=aD({prop:i,defaultProp:r??!1,onChange:c,caller:Pc});return h.jsx(bR,{scope:n,triggerRef:d,contentRef:m,contentId:xf(),titleId:xf(),descriptionId:xf(),open:p,onOpenChange:v,onOpenToggle:w.useCallback(()=>v(y=>!y),[v]),modal:u,children:s})};_x.displayName=Pc;var Ex="DialogTrigger",xR=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=sa(Ex,s),c=Ys(n,r.triggerRef);return h.jsx(La.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":Ph(r.open),...i,ref:c,onClick:ps(e.onClick,r.onOpenToggle)})});xR.displayName=Ex;var Oh="DialogPortal",[SR,Tx]=wx(Oh,{forceMount:void 0}),Nx=e=>{const{__scopeDialog:n,forceMount:s,children:i,container:r}=e,c=sa(Oh,n);return h.jsx(SR,{scope:n,forceMount:s,children:w.Children.map(i,u=>h.jsx(Oc,{present:s||c.open,children:h.jsx(fx,{asChild:!0,container:r,children:u})}))})};Nx.displayName=Oh;var vc="DialogOverlay",Mx=w.forwardRef((e,n)=>{const s=Tx(vc,e.__scopeDialog),{forceMount:i=s.forceMount,...r}=e,c=sa(vc,e.__scopeDialog);return c.modal?h.jsx(Oc,{present:i||c.open,children:h.jsx(_R,{...r,ref:n})}):null});Mx.displayName=vc;var wR=lx("DialogOverlay.RemoveScroll"),_R=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=sa(vc,s);return h.jsx(xx,{as:wR,allowPinchZoom:!0,shards:[r.contentRef],children:h.jsx(La.div,{"data-state":Ph(r.open),...i,ref:n,style:{pointerEvents:"auto",...i.style}})})}),Hs="DialogContent",jx=w.forwardRef((e,n)=>{const s=Tx(Hs,e.__scopeDialog),{forceMount:i=s.forceMount,...r}=e,c=sa(Hs,e.__scopeDialog);return h.jsx(Oc,{present:i||c.open,children:c.modal?h.jsx(ER,{...r,ref:n}):h.jsx(TR,{...r,ref:n})})});jx.displayName=Hs;var ER=w.forwardRef((e,n)=>{const s=sa(Hs,e.__scopeDialog),i=w.useRef(null),r=Ys(n,s.contentRef,i);return w.useEffect(()=>{const c=i.current;if(c)return yR(c)},[]),h.jsx(Cx,{...e,ref:r,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ps(e.onCloseAutoFocus,c=>{c.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:ps(e.onPointerDownOutside,c=>{const u=c.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0;(u.button===2||d)&&c.preventDefault()}),onFocusOutside:ps(e.onFocusOutside,c=>c.preventDefault())})}),TR=w.forwardRef((e,n)=>{const s=sa(Hs,e.__scopeDialog),i=w.useRef(!1),r=w.useRef(!1);return h.jsx(Cx,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{e.onCloseAutoFocus?.(c),c.defaultPrevented||(i.current||s.triggerRef.current?.focus(),c.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:c=>{e.onInteractOutside?.(c),c.defaultPrevented||(i.current=!0,c.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const u=c.target;s.triggerRef.current?.contains(u)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&r.current&&c.preventDefault()}})}),Cx=w.forwardRef((e,n)=>{const{__scopeDialog:s,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:c,...u}=e,d=sa(Hs,s),m=w.useRef(null),p=Ys(n,m);return kD(),h.jsxs(h.Fragment,{children:[h.jsx(ux,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:c,children:h.jsx(ox,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":Ph(d.open),...u,ref:p,onDismiss:()=>d.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(NR,{titleId:d.titleId}),h.jsx(jR,{contentRef:m,descriptionId:d.descriptionId})]})]})}),zh="DialogTitle",Dx=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=sa(zh,s);return h.jsx(La.h2,{id:r.titleId,...i,ref:n})});Dx.displayName=zh;var Rx="DialogDescription",kx=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=sa(Rx,s);return h.jsx(La.p,{id:r.descriptionId,...i,ref:n})});kx.displayName=Rx;var Ax="DialogClose",Ox=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=sa(Ax,s);return h.jsx(La.button,{type:"button",...i,ref:n,onClick:ps(e.onClick,()=>r.onOpenChange(!1))})});Ox.displayName=Ax;function Ph(e){return e?"open":"closed"}var zx="DialogTitleWarning",[dz,Px]=XC(zx,{contentName:Hs,titleName:zh,docsSlug:"dialog"}),NR=({titleId:e})=>{const n=Px(zx),s=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return w.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},MR="DialogDescriptionWarning",jR=({contentRef:e,descriptionId:n})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Px(MR).contentName}}.`;return w.useEffect(()=>{const r=e.current?.getAttribute("aria-describedby");n&&r&&(document.getElementById(n)||console.warn(i))},[i,e,n]),null},CR=_x,DR=Nx,RR=Mx,kR=jx,AR=Dx,OR=kx,zR=Ox;function Ix(e){var n,s,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(n=0;n<r;n++)e[n]&&(s=Ix(e[n]))&&(i&&(i+=" "),i+=s)}else for(s in e)e[s]&&(i&&(i+=" "),i+=s);return i}function PR(){for(var e,n,s=0,i="",r=arguments.length;s<r;s++)(e=arguments[s])&&(n=Ix(e))&&(i&&(i+=" "),i+=n);return i}function pt(...e){return PR(e)}function Ce(e){return h.jsx("button",{type:e.type??"button",onClick:e.onClick,className:pt("wb-button",e.className,e.disabled&&"opacity-50 cursor-not-allowed"),"data-variant":e.variant==="default"?void 0:e.variant,title:e.title,disabled:e.disabled,children:e.children})}function Yi(e){return h.jsxs("section",{className:pt("wb-panel rounded-2xl",e.className),children:[(e.title||e.headerRight)&&h.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-[var(--wb-border-muted)] px-4 py-3",children:[h.jsx("div",{className:"text-sm font-semibold tracking-wide text-[var(--wb-text)]",children:e.title}),e.headerRight?h.jsx("div",{className:"flex items-center gap-2",children:e.headerRight}):null]}),h.jsx("div",{className:"min-h-0",children:e.children})]})}function Ie(e){return h.jsx("label",{className:pt("mb-1 block text-xs font-medium uppercase tracking-wide text-[var(--wb-muted)]",e.className),children:e.children})}function Qe(e){return h.jsx("button",{type:"button",className:pt("wb-chip",e.className,e.disabled&&"opacity-50 cursor-not-allowed"),"data-active":e.active?"true":"false",onClick:e.disabled?void 0:e.onClick,title:e.title,disabled:e.disabled,children:e.children})}function Fo(e){const n=e.delta,s=n==null?"":n>0?"wb-text-success":n<0?"wb-text-danger":"text-[var(--wb-muted)]";return h.jsxs("div",{className:pt("wb-card p-3",e.className),children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:e.label}),h.jsx("div",{className:pt("mt-1 text-lg font-semibold",e.valueClassName),children:e.value}),n!=null?h.jsxs("div",{className:pt("mt-1 text-xs",s),children:[n>0?"+":"",Math.round(n)]}):null]})}function Vi(e){return h.jsx("div",{className:pt("wb-scrollbar min-h-0 overflow-auto",e.className),children:e.children})}function Ih(e){return h.jsx(CR,{open:e.open,onOpenChange:e.onOpenChange,children:h.jsxs(DR,{children:[h.jsx(RR,{className:"fixed inset-0 z-40 backdrop-blur-sm",style:{background:"var(--wb-overlay)"}}),h.jsxs(kR,{className:pt("wb-panel fixed left-1/2 top-1/2 z-50 w-[min(95vw,1100px)] -translate-x-1/2 -translate-y-1/2 rounded-2xl shadow-2xl",e.className),children:[h.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-[var(--wb-border-muted)] px-5 py-4",children:[h.jsxs("div",{children:[h.jsx(AR,{className:"text-base font-semibold",children:e.title}),e.description?h.jsx(OR,{className:"mt-1 text-sm text-[var(--wb-muted)]",children:e.description}):null]}),h.jsx(zR,{asChild:!0,children:h.jsx("button",{className:"wb-icon-button","aria-label":"Close",children:h.jsx(gT,{size:16})})})]}),h.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:e.children}),e.footer?h.jsx("div",{className:"border-t border-[var(--wb-border-muted)] px-5 py-4",children:e.footer}):null]})]})})}function za(e){return h.jsxs("div",{children:[h.jsx(Ie,{children:e.label}),h.jsx("input",{className:"wb-input",type:"number",value:e.value??"",min:e.min,max:e.max,step:e.step??1,placeholder:e.placeholder,onChange:n=>{const s=n.target.value.trim();e.onChange(s===""?null:Number(s))}})]})}const IR={bow:"0 0",spear:"9.090909090909088% 0",wand:"18.181818181818183% 0",dagger:"27.27272727272727% 0",relik:"36.36363636363637% 0",helmet:"45.45454545454546% 0",chestplate:"54.54545454545454% 0",leggings:"63.63636363636363% 0",boots:"72.72727272727272% 0",ring:"81.81818181818181% 0",bracelet:"90.90909090909092% 0",necklace:"100% 0"};function BR(e){return e.category==="weapon"?e.type:e.category}function LR(e){const n=BR(e.item),s=IR[n],i="./media/items/new.png";return s?h.jsx("div",{className:"wb-surface-strong relative h-9 w-9 shrink-0 overflow-hidden rounded-lg",title:`${e.item.type} icon`,children:h.jsx("div",{"aria-hidden":!0,className:"absolute inset-[3px] rounded-[6px]",style:{backgroundImage:`url(${i})`,backgroundPosition:s,backgroundSize:"1200% 100%",backgroundRepeat:"no-repeat",imageRendering:"pixelated"}})}):h.jsx("div",{className:"wb-surface-strong flex h-9 w-9 items-center justify-center rounded-lg text-xs text-[var(--wb-muted)]",children:"?"})}function qR(e){switch(e){case"Mythic":return"wb-tier-mythic";case"Fabled":return"wb-tier-fabled";case"Legendary":return"wb-tier-legendary";case"Rare":return"wb-tier-rare";case"Unique":return"wb-tier-unique";case"Set":return"wb-tier-set";default:return"wb-tier-normal"}}function Bx(e){const n=[{label:"Strength",value:e.numeric.reqStr},{label:"Dexterity",value:e.numeric.reqDex},{label:"Intelligence",value:e.numeric.reqInt},{label:"Defense",value:e.numeric.reqDef},{label:"Agility",value:e.numeric.reqAgi}].filter(s=>s.value>0);return n.length===0?null:n.map(s=>`${s.label} ${s.value}`).join(", ")}function Lx(e){const n=[{label:"Strength",value:e.numeric.spStr},{label:"Dexterity",value:e.numeric.spDex},{label:"Intelligence",value:e.numeric.spInt},{label:"Defense",value:e.numeric.spDef},{label:"Agility",value:e.numeric.spAgi}].filter(s=>s.value!==0);return n.length===0?null:n.map(s=>`${s.label} ${s.value>0?"+":""}${s.value}`).join(", ")}function qx(e){const n=e.legacyRaw,s=[["Neutral",typeof n.nDam=="string"?n.nDam:""],["Earth",typeof n.eDam=="string"?n.eDam:""],["Thunder",typeof n.tDam=="string"?n.tDam:""],["Water",typeof n.wDam=="string"?n.wDam:""],["Fire",typeof n.fDam=="string"?n.fDam:""],["Air",typeof n.aDam=="string"?n.aDam:""]].filter(([,i])=>i&&i!=="0-0");return s.length===0?null:s.map(([i,r])=>`${i}: ${r}`).join("  ")}const UR=new Set(["reqTotal","skillPointTotal","offenseScore","ehpProxy","utilityScore","sumSpPct","sumSpRaw","strReq","dexReq","intReq","defReq","agiReq","str","dex","int","def","agi"]);function Ux(e){const n=[];for(const[s,i]of Object.entries(e.numericIndex)){if(UR.has(s))continue;const r=typeof i=="number"?i:0;r!==0&&n.push({key:s,value:r})}return e.powderSlots>0&&!n.some(s=>s.key==="slots")&&n.push({key:"slots",value:e.powderSlots}),n.sort((s,i)=>Ht(s.key).localeCompare(Ht(i.key))),n}function $x(e,n){return Number.isInteger(n)?String(n):n.toFixed(1).replace(/\.0$/,"")}function Hx(e){return e>0?"positive":e<0?"negative":"neutral"}function $R(e){const{item:n}=e,s=Bx(n),i=Lx(n),r=qx(n),c=Ux(n),u=e.dense??!1;return h.jsxs("div",{className:pt("space-y-1.5",u?"text-[11px]":"text-xs"),children:[(s||i)&&h.jsxs("div",{className:"flex flex-wrap gap-1.5 text-[11px]",children:[s?h.jsxs("span",{className:"wb-pill","data-tone":"req",children:[h.jsx("span",{className:"font-semibold",children:"Req"}),h.jsx("span",{className:"ml-1",children:s})]}):null,i?h.jsxs("span",{className:"wb-pill","data-tone":"bonus",children:[h.jsx("span",{className:"font-semibold",children:"SP"}),h.jsx("span",{className:"ml-1",children:i})]}):null]}),c.length>0?h.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(({key:d,value:m})=>h.jsxs("span",{className:"wb-pill text-[11px]","data-tone":Hx(m),children:[h.jsx("span",{className:pt((m>0||m<0)&&"font-semibold"),children:$x(d,m)}),h.jsx("span",{className:"ml-1 opacity-90",children:Ht(d)})]},d))}):null,r?h.jsx("div",{className:"wb-surface-strong flex flex-wrap gap-1.5 rounded px-2 py-1.5 text-[11px] leading-relaxed text-[var(--wb-muted)]",children:r.split(/\s{2,}/).map((d,m)=>h.jsx("span",{className:"whitespace-nowrap",children:d},m))}):null,h.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[h.jsxs("div",{className:"wb-surface-strong rounded px-2 py-1",children:[Ht("baseDps")," ",Math.round(n.roughScoreFields.baseDps)]}),h.jsxs("div",{className:"wb-surface-strong rounded px-2 py-1",children:[Ht("ehpProxy")," ",Math.round(n.roughScoreFields.ehpProxy)]}),h.jsxs("div",{className:"wb-surface-strong rounded px-2 py-1",children:[Ht("offenseScore")," ",Math.round(n.roughScoreFields.offense)]}),h.jsxs("div",{className:"wb-surface-strong rounded px-2 py-1",children:[Ht("skillPointTotal")," ",Math.round(n.roughScoreFields.skillPointTotal)]})]}),n.majorIds.length>0?h.jsxs("div",{className:"break-words text-[var(--wb-muted)]",children:["Major IDs: ",n.majorIds.join(", ")]}):null]})}function Ic(e){const n=lb({id:e.dragData?`drag:${e.dragData.kind}:${e.item.id}:${e.dragData.sourceSlot??e.dragData.sourceCategory??""}`:`item:${e.item.id}`,data:e.dragData?{dragItem:e.dragData}:void 0}),s=e.dragData?{transform:ic.Translate.toString(n.transform),opacity:n.isDragging?.45:1}:void 0,i=e.showDetails?Bx(e.item):null,r=e.showDetails?Lx(e.item):null,c=e.showDetails?qx(e.item):null,u=e.showDetails?Ux(e.item):[];return h.jsxs("div",{ref:e.dragData?n.setNodeRef:void 0,style:s,className:pt("wb-card",e.dense?"p-2":e.compact?"p-2.5":"p-3",n.isDragging&&"ring-2 ring-[var(--wb-success-border)]"),onMouseEnter:()=>e.onHover?.(!0),onMouseLeave:()=>e.onHover?.(!1),children:[h.jsxs("div",{className:pt("flex items-start gap-2",e.dense&&"gap-1.5"),children:[e.dragData?h.jsx("button",{type:"button",...n.listeners,...n.attributes,className:"wb-icon-button mt-0.5","aria-label":`Drag ${e.item.displayName}`,children:h.jsx(GE,{size:14})}):null,h.jsx(LR,{item:e.item}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[h.jsx("div",{className:pt("break-words text-sm font-semibold leading-tight",qR(e.item.tier)),children:e.item.displayName}),e.badge?h.jsx("span",{className:"wb-chip",children:e.badge}):null,e.locked?h.jsxs("span",{className:"wb-chip inline-flex items-center gap-1",children:[h.jsx(ub,{size:11})," Locked"]}):null]}),h.jsxs("div",{className:pt("mt-1 flex flex-wrap gap-y-1 text-[var(--wb-muted)]",e.dense?"gap-x-2 text-xs":"gap-x-3 text-xs"),children:[h.jsx("span",{children:e.item.type}),h.jsxs("span",{children:["Lv ",e.item.level]}),e.dense?null:h.jsx("span",{children:e.item.tier}),!e.dense&&e.item.classReq?h.jsx("span",{children:e.item.classReq}):null,!e.dense&&e.item.majorIds.length>0?h.jsxs("span",{children:["MID ",e.item.majorIds.length]}):null,e.dense&&e.item.majorIds.length>0?h.jsxs("span",{children:["M",e.item.majorIds.length]}):null]}),e.showDetails?h.jsxs("div",{className:pt("mt-2 space-y-1",e.dense?"text-[11px]":"text-xs"),children:[(i||r)&&h.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[i?h.jsxs("span",{className:"wb-pill","data-tone":"req",children:[h.jsx("span",{className:"font-semibold",children:"Req"}),h.jsx("span",{className:"ml-1",children:i})]}):null,r?h.jsxs("span",{className:"wb-pill","data-tone":"bonus",children:[h.jsx("span",{className:"font-semibold",children:"SP"}),h.jsx("span",{className:"ml-1",children:r})]}):null]}),u.length>0?h.jsx("div",{className:"flex flex-wrap gap-1",children:u.map(({key:d,value:m})=>h.jsxs("span",{className:"wb-pill text-[11px]","data-tone":Hx(m),children:[h.jsx("span",{className:pt((m>0||m<0)&&"font-semibold"),children:$x(d,m)}),h.jsx("span",{className:"ml-1 opacity-90",children:Ht(d)})]},d))}):null,c?h.jsx("div",{className:"wb-surface-strong flex flex-wrap gap-1.5 rounded px-2 py-1.5 text-[11px] leading-relaxed text-[var(--wb-muted)]",children:c.split(/\s{2,}/).map((d,m)=>h.jsx("span",{className:"whitespace-nowrap",children:d},m))}):null,e.item.majorIds.length>0?h.jsxs("div",{className:"break-words text-[var(--wb-muted)]",children:["Major IDs: ",e.item.majorIds.join(", ")]}):null]}):null,e.compact?null:h.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs",children:[h.jsxs("div",{className:"wb-surface-strong rounded-lg px-2 py-1",children:[Ht("baseDps")," ",Math.round(e.item.roughScoreFields.baseDps)]}),h.jsxs("div",{className:"wb-surface-strong rounded-lg px-2 py-1",children:[Ht("ehpProxy")," ",Math.round(e.item.roughScoreFields.ehpProxy)]}),h.jsxs("div",{className:"wb-surface-strong rounded-lg px-2 py-1",children:[Ht("offenseScore")," ",Math.round(e.item.roughScoreFields.offense)]}),h.jsxs("div",{className:"wb-surface-strong rounded-lg px-2 py-1",children:[Ht("skillPointTotal")," ",Math.round(e.item.roughScoreFields.skillPointTotal)]})]})]})]}),(e.onPin||e.onEquip||e.onRemove)&&h.jsxs("div",{className:pt("mt-2 flex flex-wrap",e.dense?"gap-1":"gap-2"),children:[e.onPin?h.jsxs(Ce,{className:pt("text-xs",e.dense?"px-1.5 py-0.5":"px-2 py-1"),variant:"ghost",onClick:e.onPin,children:[h.jsx(QE,{size:12,className:"mr-1 inline"}),"Pin"]}):null,e.onEquip?h.jsxs(Ce,{className:pt("text-xs",e.dense?"px-1.5 py-0.5":"px-2 py-1"),onClick:e.onEquip,children:[h.jsx(eT,{size:12,className:"mr-1 inline"}),"Equip"]}):null,e.onRemove?h.jsx(Ce,{className:pt("text-xs",e.dense?"px-1.5 py-0.5":"px-2 py-1"),variant:"ghost",onClick:e.onRemove,children:"Remove"}):null]})]})}const Zx="workbench-search-presets:v2";function HR(){try{const e=window.localStorage.getItem(Zx);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}}function ZR(e){window.localStorage.setItem(Zx,JSON.stringify(e))}function r0(e,n){return e.includes(n)?e.filter(s=>s!==n):[...e,n]}const FR=220,GR=200,Kl=50;function YR(e){const n=e.catalog.itemsById.get(e.itemId);if(!n)return null;const s=e.selectedSlot!=null&&da(e.selectedSlot)===n.category;return h.jsx("div",{className:"relative",onMouseEnter:i=>e.onHoverForStats(e.itemId,i.currentTarget.getBoundingClientRect()),onMouseLeave:()=>e.onHoverForStats(null,null),children:h.jsx(Ic,{item:n,compact:!0,dense:!0,showDetails:!1,dragData:{kind:"search",itemId:n.id},onPin:()=>e.onPin(n.id),onEquip:()=>e.onEquip(n.id),onHover:i=>e.onHover(i?n.id:null,i?e.selectedSlot:null),badge:s?`Fits ${e.selectedSlot}`:void 0})})}function Fx(e){const n=w.useRef(null),s=e.result?.rows??[],i=w.useDeferredValue(s),[r,c]=w.useState(0),[u,d]=w.useState(null),m=w.useRef(null),p=i.length,v=Math.max(1,Math.ceil(p/Kl)),y=Math.min(r,Math.max(0,v-1)),b=i.slice(y*Kl,(y+1)*Kl);w.useEffect(()=>{c(0)},[e.result]);const S=Z=>{m.current&&(window.clearTimeout(m.current),m.current=null),d(Z)},_=()=>{m.current=window.setTimeout(()=>d(null),120)},E=!e.state.resultsBelowBuild,C=E?1:3,k=E?FR:GR,R=Math.ceil(b.length/C),z=KC({count:R,getScrollElement:()=>n.current,estimateSize:()=>k,measureElement:Z=>Z.getBoundingClientRect().height,overscan:4}),B=u?e.catalog.itemsById.get(u.itemId):null,q=e.result!=null||e.loading,M=e.loading?"Searching...":e.result?`${e.result.total.toLocaleString()} results`:"Search or filter to see items",j=p===0?0:y*Kl+1,D=Math.min((y+1)*Kl,p);return h.jsxs("div",{className:"min-h-0 flex-1",children:[h.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2 text-xs text-[var(--wb-muted)]",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{children:M}),q&&p>0?h.jsx("span",{className:"shrink-0",children:v>1?h.jsxs(h.Fragment,{children:[h.jsx("button",{type:"button",className:"wb-inline-button mr-1",onClick:()=>c(Z=>Math.max(0,Z-1)),disabled:y<=0,title:"Previous page",children:""}),h.jsxs("span",{children:[j.toLocaleString(),"",D.toLocaleString()]}),h.jsx("button",{type:"button",className:"wb-inline-button ml-1",onClick:()=>c(Z=>Math.min(v-1,Z+1)),disabled:y>=v-1,title:"Next page",children:""})]}):null}):null]}),q?h.jsxs("span",{children:[(e.state.sortKeys??["relevance"]).map(Z=>Ht(Z)).join("  "),e.state.sortDescending?" ":" "]}):null]}),h.jsx("div",{ref:n,className:pt("wb-scrollbar wb-surface overflow-auto rounded-xl",e.embedded?"min-h-[160px] flex-1":"h-[calc(100vh-26rem)]"),children:q?b.length===0?h.jsx("div",{className:"flex min-h-[120px] flex-col items-center justify-center gap-1 px-4 py-6 text-center text-sm text-[var(--wb-muted)]",children:h.jsx("span",{children:"No items match your filters."})}):h.jsx("div",{style:{height:z.getTotalSize(),position:"relative"},children:z.getVirtualItems().map(Z=>{const le=Z.index*C,de=b.slice(le,le+C);return h.jsx("div",{"data-index":Z.index,ref:z.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${Z.start}px)`,padding:"6px 8px"},className:E?"grid grid-cols-1":"grid grid-cols-2 gap-2 xl:grid-cols-3",children:de.map(ne=>h.jsx(YR,{catalog:e.catalog,itemId:ne.id,selectedSlot:e.selectedSlot,onPin:e.onPin,onEquip:e.onEquip,onHover:e.onHover,onHoverForStats:(ce,$)=>{ce!=null&&$?S({itemId:ce,rect:$}):_()}},ne.id))},Z.key)})}):h.jsx("div",{className:"flex min-h-[120px] flex-col items-center justify-center gap-1 px-4 py-6 text-center text-sm text-[var(--wb-muted)]",children:h.jsx("span",{children:"Enter a search term, select categories, or apply filters above to see items."})})}),B&&u?Pa.createPortal(h.jsxs("div",{className:"fixed z-[100] w-72 max-h-[80vh] overflow-auto rounded-xl border border-[var(--wb-border)] bg-[var(--wb-panel)] p-2.5 shadow-xl",style:{left:Math.min(u.rect.right+8,window.innerWidth-296),top:u.rect.top},onMouseEnter:()=>{m.current&&(window.clearTimeout(m.current),m.current=null)},onMouseLeave:()=>d(null),children:[h.jsx("div",{className:"mb-1.5 break-words text-xs font-semibold text-[var(--wb-text)]",children:B.displayName}),h.jsx($R,{item:B,dense:!0})]}),document.body):null]})}function VR(e){const[n,s]=w.useState(()=>typeof window>"u"?[]:HR()),i=w.useMemo(()=>e.catalog.facetsMeta.majorIds.slice(0,20),[e.catalog]),r=e.result?.facetCounts,c=w.useMemo(()=>["relevance","level","baseDps",...Object.keys(e.catalog.facetsMeta.numericRanges).filter(v=>!["relevance","level","baseDps"].includes(v)).sort((v,y)=>Ht(v).localeCompare(Ht(y)))],[e.catalog.facetsMeta.numericRanges]),u=w.useMemo(()=>{const m=Object.keys(e.catalog.facetsMeta.numericRanges);return[...["level","baseDps","slots"].filter(v=>!m.includes(v)),...m].sort((v,y)=>Ht(v).localeCompare(Ht(y)))},[e.catalog.facetsMeta.numericRanges]);w.useEffect(()=>{typeof window<"u"&&ZR(n)},[n]);const d=m=>e.setState(gC(e.state,m));return h.jsx(Yi,{className:"flex min-h-0 flex-col",title:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(nT,{size:15}),"Advanced Item Search"]}),headerRight:null,children:h.jsxs("div",{className:"flex min-h-0 flex-col gap-3 p-3",children:[h.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-end",children:[h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsx(Ie,{children:"Search Text"}),h.jsx("input",{className:"wb-input",placeholder:"Name, lore, major ID...",value:e.state.text,onChange:m=>d({text:m.target.value})})]}),h.jsx(Ce,{variant:"primary",className:"shrink-0",onClick:e.onSearch,disabled:e.loading,title:"Run search with current filters",children:e.loading?"Searching":"Show items"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ie,{className:"mb-0 shrink-0",children:"Results"}),h.jsx(Qe,{active:e.state.resultsBelowBuild,onClick:()=>d({resultsBelowBuild:!e.state.resultsBelowBuild}),title:"Toggle: show below Workbench or in sidebar",children:e.state.resultsBelowBuild?"Below build":"In sidebar"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx(Ie,{children:"Sort by"}),h.jsxs("div",{className:"flex flex-col gap-1",children:[(e.state.sortKeys??["relevance"]).map((m,p)=>h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("select",{className:"wb-select flex-1",value:m,onChange:v=>{const y=[...e.state.sortKeys??["relevance"]];y[p]=v.target.value,d({sortKeys:y})},children:c.map(v=>h.jsx("option",{value:v,children:Ht(v)},v))}),h.jsx(Ce,{variant:"ghost",className:"shrink-0 px-1",onClick:()=>{const v=(e.state.sortKeys??["relevance"]).filter((y,b)=>b!==p);v.length===0&&v.push("relevance"),d({sortKeys:v})},title:"Remove sort",children:""})]},p)),h.jsx(Ce,{variant:"ghost",className:"self-start text-xs",onClick:()=>{const m=e.state.sortKeys??["relevance"],p=c.find(v=>!m.includes(v))??c[0];d({sortKeys:[...m,p]})},disabled:(e.state.sortKeys??["relevance"]).length>=8,children:"+ Add sort level"})]})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"View"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Qe,{active:e.state.viewMode==="list",onClick:()=>d({viewMode:"list"}),children:"List"}),h.jsx(Qe,{active:e.state.viewMode==="grid",onClick:()=>d({viewMode:"grid"}),children:"Grid"}),h.jsx(Qe,{active:e.state.sortDescending,onClick:()=>d({sortDescending:!e.state.sortDescending}),title:"Toggle descending",children:e.state.sortDescending?"Desc":"Asc"})]})]})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2 text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:[h.jsx(fy,{size:13}),"Category"]}),h.jsx("div",{className:"flex flex-wrap gap-2",children:ys.map(m=>h.jsxs(Qe,{active:e.state.categories.includes(m),onClick:()=>d({categories:r0(e.state.categories,m)}),children:[Eh(m),r?.categories[m]?` (${r.categories[m]})`:""]},m))})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx(Ie,{children:"Wearable At Level"}),h.jsx("input",{className:"wb-input",type:"number",min:1,max:106,value:e.state.onlyWearableAtLevel??"",onChange:m=>{const p=m.target.value.trim();d({onlyWearableAtLevel:p?Number(p):null})}})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Class Filter"}),h.jsxs("select",{className:"wb-select",value:e.state.classReqs[0]??"",onChange:m=>{const p=m.target.value;d({classReqs:p?[p]:[]})},children:[h.jsx("option",{value:"",children:"Any"}),e.catalog.facetsMeta.classReqs.map(m=>h.jsx("option",{value:m,children:m},m))]})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsx(Qe,{active:e.state.onlyClassCompatible,onClick:()=>d({onlyClassCompatible:!e.state.onlyClassCompatible}),children:"Only class-compatible"}),h.jsx(Qe,{active:e.state.excludeRestricted,onClick:()=>d({excludeRestricted:!e.state.excludeRestricted}),children:"Exclude restricted"})]}),h.jsxs("details",{className:"group",children:[h.jsxs("summary",{className:"cursor-pointer text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)] flex items-center gap-2",children:[h.jsx(fy,{size:13}),"Advanced ID Filters"]}),h.jsxs("div",{className:"mt-3 grid gap-2",children:[h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Set min/max for any ID (e.g. mr, sdPct, ehpProxy). Items outside ranges are excluded."}),Object.entries(e.state.numericRanges).map(([m,p])=>{const v=m==="powderSlots"?"slots":m==="level"?"lvl":m==="baseDps"?"averageDps":m,y=e.catalog.facetsMeta.numericRanges[v],b=p??{};return h.jsxs("div",{className:"flex flex-wrap items-end gap-2 rounded-lg border border-[var(--wb-border-muted)] p-2",children:[h.jsxs("div",{className:"min-w-[120px] flex-1",children:[h.jsx(Ie,{children:"ID"}),h.jsx("select",{className:"wb-select w-full",value:m,onChange:S=>{const _={...e.state.numericRanges};delete _[m],_[S.target.value]=b,d({numericRanges:_})},children:u.map(S=>h.jsx("option",{value:S,disabled:S!==m&&S in e.state.numericRanges,children:Ht(S)},S))})]}),h.jsxs("div",{className:"min-w-[70px]",children:[h.jsx(Ie,{children:"Min"}),h.jsx("input",{className:"wb-input w-full",type:"number",placeholder:y?String(Math.floor(y.min)):"min",value:b.min??"",onChange:S=>{const _=S.target.value.trim();d({numericRanges:{...e.state.numericRanges,[m]:{...b,min:_===""?void 0:Number(_)}}})}})]}),h.jsxs("div",{className:"min-w-[70px]",children:[h.jsx(Ie,{children:"Max"}),h.jsx("input",{className:"wb-input w-full",type:"number",placeholder:y?String(Math.ceil(y.max)):"max",value:b.max??"",onChange:S=>{const _=S.target.value.trim();d({numericRanges:{...e.state.numericRanges,[m]:{...b,max:_===""?void 0:Number(_)}}})}})]}),h.jsx(Ce,{variant:"ghost",className:"shrink-0",onClick:()=>{const S={...e.state.numericRanges};delete S[m],d({numericRanges:S})},children:"Remove"})]},m)}),h.jsx(Ce,{variant:"ghost",onClick:()=>{const m=new Set(Object.keys(e.state.numericRanges)),p=u.find(v=>!m.has(v));p&&d({numericRanges:{...e.state.numericRanges,[p]:{}}})},disabled:u.every(m=>m in e.state.numericRanges),children:"Add ID Filter"})]})]}),h.jsxs("details",{className:"group",children:[h.jsx("summary",{className:"cursor-pointer text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)] flex items-center gap-2",children:"Exclusion (IDs to avoid)"}),h.jsxs("div",{className:"mt-3 grid gap-2",children:[h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Exclude items that exceed max (or are below min). E.g. mr max 20 = exclude items with mana regen > 20."}),Object.entries(e.state.exclusionRanges??{}).map(([m,p])=>{const v=m==="powderSlots"?"slots":m==="level"?"lvl":m==="baseDps"?"averageDps":m,y=e.catalog.facetsMeta.numericRanges[v],b=p??{};return h.jsxs("div",{className:"flex flex-wrap items-end gap-2 rounded-lg border border-[var(--wb-border-muted)] border-amber-500/30 p-2",children:[h.jsxs("div",{className:"min-w-[120px] flex-1",children:[h.jsx(Ie,{children:"Avoid ID"}),h.jsx("select",{className:"wb-select w-full",value:m,onChange:S=>{const _={...e.state.exclusionRanges??{}};delete _[m],_[S.target.value]=b,d({exclusionRanges:_})},children:u.map(S=>h.jsx("option",{value:S,disabled:S!==m&&S in(e.state.exclusionRanges??{}),children:Ht(S)},S))})]}),h.jsxs("div",{className:"min-w-[70px]",children:[h.jsx(Ie,{children:"Max (exclude if >)"}),h.jsx("input",{className:"wb-input w-full",type:"number",placeholder:y?String(Math.ceil(y.max)):"max",value:b.max??"",onChange:S=>{const _=S.target.value.trim();d({exclusionRanges:{...e.state.exclusionRanges??{},[m]:{...b,max:_===""?void 0:Number(_)}}})}})]}),h.jsxs("div",{className:"min-w-[70px]",children:[h.jsx(Ie,{children:"Min (exclude if <)"}),h.jsx("input",{className:"wb-input w-full",type:"number",placeholder:"min",value:b.min??"",onChange:S=>{const _=S.target.value.trim();d({exclusionRanges:{...e.state.exclusionRanges??{},[m]:{...b,min:_===""?void 0:Number(_)}}})}})]}),h.jsx(Ce,{variant:"ghost",className:"shrink-0",onClick:()=>{const S={...e.state.exclusionRanges??{}};delete S[m],d({exclusionRanges:S})},children:"Remove"})]},m)}),h.jsx(Ce,{variant:"ghost",onClick:()=>{const m=new Set(Object.keys(e.state.exclusionRanges??{})),p=u.find(v=>!m.has(v));p&&d({exclusionRanges:{...e.state.exclusionRanges??{},[p]:{}}})},disabled:u.every(m=>m in(e.state.exclusionRanges??{})),children:"Add exclusion"})]})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Major IDs (quick picks)"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(m=>h.jsx(Qe,{active:e.state.majorIds.includes(m),onClick:()=>d({majorIds:r0(e.state.majorIds,m)}),title:m,children:m},m))})]}),h.jsxs("div",{className:"wb-card p-2",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Filter Presets"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Ce,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>{const m=window.prompt("Preset name?")?.trim();if(!m)return;const p=[{name:m,state:e.state},...n.filter(v=>v.name.toLowerCase()!==m.toLowerCase())].slice(0,20);s(p)},children:"Save"}),h.jsx(Ce,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.setState(Oa),children:"Reset"})]})]}),h.jsx("div",{className:"flex flex-wrap gap-2",children:n.length===0?h.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:"No saved presets yet."}):n.map(m=>h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(Qe,{onClick:()=>e.setState(m.state),children:m.name}),h.jsx("button",{className:"wb-inline-button border border-[var(--wb-border)] px-1.5 py-0.5 text-xs",onClick:()=>s(p=>p.filter(v=>v.name!==m.name)),title:`Delete ${m.name}`,children:"x"})]},m.name))})]}),e.state.resultsBelowBuild?null:h.jsx(Fx,{catalog:e.catalog,result:e.result,selectedSlot:e.selectedSlot,state:e.state,loading:e.loading,onPin:e.onPin,onEquip:e.onEquip,onHover:e.onHover})]})})}const KR={slotStatus:{},warnings:{messages:[]},aggregated:{hpTotal:0,hprTotal:0,mr:0,ms:0,ls:0,speed:0,skillPoints:{str:0,dex:0,int:0,def:0,agi:0},skillReqs:{str:0,dex:0,int:0,def:0,agi:0},defenses:{e:0,t:0,w:0,f:0,a:0},offense:{baseDps:0,spellPct:0,spellRaw:0,meleePct:0,meleeRaw:0,elemDamPct:0,genericDamPct:0,offenseScore:0}},derived:{dpsProxy:0,spellProxy:0,meleeProxy:0,ehpProxy:0,reqTotal:0,skillPointTotal:0,legacyBaseDps:0,legacyEhp:0,legacyEhpNoAgi:0,skillpointFeasible:!0,assignedSkillPointsRequired:0}};function Qf(e){let n=Number.isFinite(e)?e:0;if(n<=0)return 0;n>=150&&(n=150);const s=.9908;return s/(1-s)*(1-Math.pow(s,n))/100}const WR=.867,XR=.951,QR=90;function JR(e){return Math.max(1,Math.min(106,Math.round(e||1)))*5+5}function Gx(e){const n=Math.max(1,Math.min(106,Math.round(e||1)));return n>=101?200:(n-1)*2}function ek(e){switch(e){case"relik":return .6;case"bow":return .7;case"wand":return .8;case"dagger":case"spear":return 1;default:return 1}}function tk(e){const n=Math.max(5,e.totalHp),s=Qf(e.defSkillPoints)*WR,i=Qf(e.agiSkillPoints)*XR,c=2-ek(e.weaponType),d=(100-QR)/100*i+(1-i)*(1-s),m=1-s,p=n/Math.max(1e-9,d)/Math.max(1e-9,c),v=n/Math.max(1e-9,m)/Math.max(1e-9,c);return{withAgi:p,noAgi:v}}function nk(e){return[e.numeric.reqStr,e.numeric.reqDex,e.numeric.reqInt,e.numeric.reqDef,e.numeric.reqAgi]}function ak(e){return[e.numeric.spStr,e.numeric.spDex,e.numeric.spInt,e.numeric.spDef,e.numeric.spAgi]}function sk(e,n){return[e[0]+n[0],e[1]+n[1],e[2]+n[2],e[3]+n[3],e[4]+n[4]]}function ik(e){return e[0]+e[1]+e[2]+e[3]+e[4]}function o0(e,n){for(let s=0;s<5;s++)if(e[s]>n[s])return!1;return!0}function lk(e,n){for(const s of e)if(o0(s.assigned,n.assigned))return;for(let s=e.length-1;s>=0;s--)o0(n.assigned,e[s].assigned)&&e.splice(s,1);e.push(n)}function rk(e,n,s={}){if(e.length===0)return{feasible:!0,assignedTotal:0,assignedByStat:[0,0,0,0,0]};const i=s.availableSkillPointsOverride??Gx(n),r=s.extraBaseSkillPoints??[0,0,0,0,0],c=e.length,u=e.map(nk),d=e.map(ak),m=1<<c,p=Array.from({length:m},()=>[0,0,0,0,0]);for(let _=1;_<m;_++){const E=_&-_,C=Math.log2(E)|0;p[_]=sk(p[_^E],d[C])}const v=new Array(m);v[0]=[{assigned:[0,0,0,0,0],assignedTotal:0}];for(let _=0;_<m;_++){const E=v[_];if(!E||E.length===0)continue;const C=p[_];for(const k of E)for(let R=0;R<c;R++){if((_&1<<R)!==0)continue;const z=[...k.assigned];let B=!0;for(let Z=0;Z<5;Z++){const le=k.assigned[Z]+C[Z]+(r[Z]??0),de=u[R][Z];if(de>le&&(z[Z]+=de-le),z[Z]>100){B=!1;break}}if(!B)continue;const q=_|1<<R,M=p[q];for(let Z=0;Z<5;Z++){let le=0;const de=r[Z]??0;for(let ne=0;ne<c;ne++){if((q&1<<ne)===0||u[ne][Z]===0)continue;const $=u[ne][Z]+d[ne][Z]-(z[Z]+M[Z]+de);$>le&&(le=$)}if(le>0&&(z[Z]+=le,z[Z]>100)){B=!1;break}}if(!B)continue;const j=ik(z);if(j>i)continue;const D=v[q]??=[];lk(D,{assigned:z,assignedTotal:j})}}const y=v[m-1];if(!y||y.length===0)return{feasible:!1,assignedTotal:1/0,assignedByStat:null};let b=1/0,S=null;for(const _ of y)_.assignedTotal<b&&(b=_.assignedTotal,S=[..._.assigned]);return{feasible:Number.isFinite(b),assignedTotal:b,assignedByStat:Number.isFinite(b)?S:null}}function Bc(e,n,s,i={}){const r=[];for(const c of nt){const u=e[c];if(u==null)continue;const d=n.itemsById.get(u);d&&r.push(d)}return rk(r,s,i)}const ok=[1,1,1,1,1],ck=4;function Yx(e,n){switch(e){case"guild_rainbow":return{extraBaseSkillPoints:ok};case"flexible_2":return{availableSkillPointsOverride:Gx(n)+ck};default:return{}}}function uk(e,n){const s={};for(const i of nt){const r=e.slots[i];if(r==null)continue;const c=n.itemsById.get(r);c&&(s[i]=c)}return s}function Xi(e,n,s={}){const i=uk(e,n),r=structuredClone(KR),c=r.warnings.messages;let u=null;for(const ce of nt){const $=i[ce];if(!$)continue;ce==="weapon"&&(u=$.type),r.aggregated.hpTotal+=$.numeric.hp+$.numeric.hpBonus,r.aggregated.hprTotal+=$.numeric.hprRaw+$.numeric.hprPct,r.aggregated.mr+=$.numeric.mr,r.aggregated.ms+=$.numeric.ms,r.aggregated.ls+=$.numeric.ls,r.aggregated.speed+=$.numeric.spd,r.aggregated.skillPoints.str+=$.numeric.spStr,r.aggregated.skillPoints.dex+=$.numeric.spDex,r.aggregated.skillPoints.int+=$.numeric.spInt,r.aggregated.skillPoints.def+=$.numeric.spDef,r.aggregated.skillPoints.agi+=$.numeric.spAgi,r.aggregated.skillReqs.str=Math.max(r.aggregated.skillReqs.str,$.numeric.reqStr),r.aggregated.skillReqs.dex=Math.max(r.aggregated.skillReqs.dex,$.numeric.reqDex),r.aggregated.skillReqs.int=Math.max(r.aggregated.skillReqs.int,$.numeric.reqInt),r.aggregated.skillReqs.def=Math.max(r.aggregated.skillReqs.def,$.numeric.reqDef),r.aggregated.skillReqs.agi=Math.max(r.aggregated.skillReqs.agi,$.numeric.reqAgi),r.aggregated.defenses.e+=$.numeric.eDef,r.aggregated.defenses.t+=$.numeric.tDef,r.aggregated.defenses.w+=$.numeric.wDef,r.aggregated.defenses.f+=$.numeric.fDef,r.aggregated.defenses.a+=$.numeric.aDef,r.aggregated.offense.baseDps+=$.numeric.baseDps,r.aggregated.offense.spellPct+=$.numeric.sdPct,r.aggregated.offense.spellRaw+=$.numeric.sdRaw,r.aggregated.offense.meleePct+=$.numeric.mdPct,r.aggregated.offense.meleeRaw+=$.numeric.mdRaw,r.aggregated.offense.elemDamPct+=$.numeric.eDamPct+$.numeric.tDamPct+$.numeric.wDamPct+$.numeric.fDamPct+$.numeric.aDamPct,r.aggregated.offense.genericDamPct+=$.numeric.damPct+$.numeric.rDamPct+$.numeric.nDamPct,r.aggregated.offense.offenseScore+=$.roughScoreFields.offense;const X=$.classReq,L=!X||!e.characterClass||X===e.characterClass,Y=$.level<=e.level,te=$.numeric.reqStr<=100&&$.numeric.reqDex<=100&&$.numeric.reqInt<=100&&$.numeric.reqDef<=100&&$.numeric.reqAgi<=100;r.slotStatus[ce]={classOk:L,levelOk:Y,skillReqsMet:te}}!e.characterClass&&u&&(e.characterClass=uc(u));for(const ce of nt){const $=i[ce];$&&(da(ce)!==$.category&&c.push(`${ce} contains incompatible item type (${$.type}).`),$.level>e.level&&c.push(`${$.displayName} requires level ${$.level}.`),e.characterClass&&$.classReq&&$.classReq!==e.characterClass&&c.push(`${$.displayName} requires ${$.classReq}.`),($.restricted||$.deprecated)&&c.push(`${$.displayName} is restricted/deprecated.`))}const d=r.aggregated.skillReqs.str+r.aggregated.skillReqs.dex+r.aggregated.skillReqs.int+r.aggregated.skillReqs.def+r.aggregated.skillReqs.agi,m=r.aggregated.skillPoints.str+r.aggregated.skillPoints.dex+r.aggregated.skillPoints.int+r.aggregated.skillPoints.def+r.aggregated.skillPoints.agi,p=s.skillpointFeasibility??(s.skillpointTomeMode?Yx(s.skillpointTomeMode,e.level):void 0),v=Bc(e.slots,n,e.level,p),{spellPct:y,spellRaw:b,meleePct:S,meleeRaw:_,baseDps:E,elemDamPct:C,genericDamPct:k}=r.aggregated.offense,R=r.aggregated.skillPoints,B=1+Qf(R.str),q=(E*(1+(y+C+k)/100)+b)*B,M=(E*(1+(S+C+k)/100)+_)*B,j=M+q+r.aggregated.speed*.8,D=r.aggregated.defenses.e+r.aggregated.defenses.t+r.aggregated.defenses.w+r.aggregated.defenses.f+r.aggregated.defenses.a,Z=r.aggregated.hpTotal+D*.45+r.aggregated.hprTotal*2+Math.max(0,r.aggregated.skillPoints.def)*12+Math.max(0,r.aggregated.skillPoints.agi)*10,le=r.aggregated.offense.baseDps,de=JR(e.level)+r.aggregated.hpTotal,ne=tk({totalHp:de,defSkillPoints:r.aggregated.skillPoints.def,agiSkillPoints:r.aggregated.skillPoints.agi,weaponType:u});return r.derived={dpsProxy:j,spellProxy:q,meleeProxy:M,ehpProxy:Z,reqTotal:d,skillPointTotal:m,legacyBaseDps:le,legacyEhp:ne.withAgi,legacyEhpNoAgi:ne.noAgi,skillpointFeasible:v.feasible,assignedSkillPointsRequired:Number.isFinite(v.assignedTotal)?v.assignedTotal:0},v.feasible||c.push(`Skill requirements are not satisfiable at level ${e.level} (estimated assigned SP exceeds available or equip order is invalid).`),r}function dk(e,n){return{dpsProxy:n.derived.dpsProxy-e.derived.dpsProxy,ehpProxy:n.derived.ehpProxy-e.derived.ehpProxy,legacyBaseDps:n.derived.legacyBaseDps-e.derived.legacyBaseDps,legacyEhp:n.derived.legacyEhp-e.derived.legacyEhp,hpTotal:n.aggregated.hpTotal-e.aggregated.hpTotal,speed:n.aggregated.speed-e.aggregated.speed,skillPointTotal:n.derived.skillPointTotal-e.derived.skillPointTotal}}const fk=25;function hk(e,n){return(e+fk)/5+n/3}function mk(e){if(e.length===0)return[];let n=[...e];for(;n.length>1&&n[0][1]===n[n.length-1][1];)n=[n.pop(),...n];const s=[];let i=0;for(let c=0;c<n.length;c++){const[u,d]=n[c],m=Math.max(1,u);if(c<2){s.push(m<=1?1:m);continue}const p=n[c-1][1],v=n[c-2][1];if(p===v&&p===d){i++;const y=m+i*5;s.push(y<=1?1:y)}else i=0,s.push(m<=1?1:m)}const r=n.length;return r>=2&&n[r-1][1]===n[r-2][1]&&(i++,Math.max(1,n[0][0])+i*5>1&&(s[0]=s[0]+i*5)),s}function gk(e,n){return e.filter(s=>s>=1&&s<=4).map(s=>[n[s]??1,s])}function pk(e){const{spellCosts:n,spellDamages:s,mr:i,ms:r,cps:c,spellSequence:u}=e;if(u.length===0||c<=0)return null;const d=gk(u,n);if(d.length===0)return null;const m=mk(d),p=m.length,v=m.reduce((R,z)=>R+z,0)/p,y=c/3,b=y*v,S=hk(i,r),_=S-b;let E=0;for(const[,R]of d)E+=s[R]??0;const k=E/p*y;return{manaGainPerSecond:S,manaUsagePerSecond:b,netManaPerSecond:_,sustainedSpellDps:k,cycleCosts:m,spellsPerSecond:y,sustainable:_>=0}}const vk=8,yk="1234";function Go(e){return Number.isFinite(e)?e.toFixed(2):"-"}function bk(e){return Number.isFinite(e)?Math.round(e).toLocaleString():"-"}function xk(e){const[n,s]=w.useState(!1),[i,r]=w.useState(vk),[c,u]=w.useState(yk),d=w.useMemo(()=>{const p=e.spellPreview,v=e.summary;if(!p?.spells.length)return null;const y={},b={};for(const _ of p.spells)_.baseSpell>=1&&_.baseSpell<=4&&(_.manaCost!=null&&(y[_.baseSpell]=_.manaCost),_.isHealing||(b[_.baseSpell]=_.averageDisplayValue));const S=c.replace(/\D/g,"").split("").map(_=>parseInt(_,10)).filter(_=>_>=1&&_<=4);return S.length===0?null:pk({spellCosts:y,spellDamages:b,mr:v.aggregated.mr,ms:v.aggregated.ms,cps:i,spellSequence:S})},[e.spellPreview,e.summary,i,c]);return e.spellPreview?.spells.some(p=>p.baseSpell>=1&&p.baseSpell<=4&&p.manaCost!=null)??!1?h.jsxs("div",{className:"wb-card overflow-hidden p-0",children:[h.jsx("button",{type:"button",className:"flex w-full items-center justify-between gap-2 px-3 py-2.5 text-left hover:bg-[var(--wb-surface-hover)]",onClick:()=>s(p=>!p),children:h.jsxs("div",{className:"flex items-center gap-2",children:[n?h.jsx(BE,{size:14,className:"text-[var(--wb-muted)]"}):h.jsx(PE,{size:14,className:"text-[var(--wb-muted)]"}),h.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Mana Sustain"}),d!=null&&h.jsx("span",{className:d.sustainable?"wb-text-success":"wb-text-danger",children:d.sustainable?"Sustainable":"Draining"})]})}),!n&&h.jsx("div",{className:"border-t border-[var(--wb-border-muted)] px-3 py-3",children:h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx("label",{className:"mb-1 block text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Clicks / s"}),h.jsx("input",{className:"wb-input w-full",type:"number",min:.5,max:30,step:.5,value:i,onChange:p=>r(Number(p.target.value)||0)})]}),h.jsxs("div",{children:[h.jsx("label",{className:"mb-1 block text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Spell sequence"}),h.jsx("input",{className:"wb-input w-full",type:"text",inputMode:"numeric",pattern:"[1-4]*",placeholder:"e.g. 1234",value:c,onChange:p=>u(p.target.value.replace(/[^1-4]/g,"").slice(0,20))})]})]}),h.jsx("p",{className:"text-[11px] text-[var(--wb-muted)]",children:"Each spell = 3 clicks. Sequence uses digits 14 for spell slots."}),d==null?h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Enter a valid sequence (digits 14)."}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"rounded-lg border p-2 text-xs",style:{borderColor:d.sustainable?"var(--wb-success-muted, #166534)":"var(--wb-danger-muted, #991b1b)",background:d.sustainable?"var(--wb-success-bg, rgba(22,101,52,0.08))":"var(--wb-danger-bg, rgba(153,27,27,0.08))"},children:h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Net mana/s"}),h.jsxs("span",{className:d.sustainable?"wb-text-success font-semibold":"wb-text-danger font-semibold",children:[d.netManaPerSecond>=0?"+":"",Go(d.netManaPerSecond)]})]})}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[h.jsxs("div",{className:"wb-surface rounded-lg px-2 py-1.5",children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Mana gain/s"}),h.jsx("div",{className:"wb-text-success font-medium",children:Go(d.manaGainPerSecond)})]}),h.jsxs("div",{className:"wb-surface rounded-lg px-2 py-1.5",children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Mana usage/s"}),h.jsx("div",{className:"wb-text-offense font-medium",children:Go(d.manaUsagePerSecond)})]}),h.jsxs("div",{className:"wb-surface rounded-lg px-2 py-1.5 col-span-2",children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Sustained spell DPS"}),h.jsx("div",{className:"wb-text-offense font-semibold",children:bk(d.sustainedSpellDps)})]})]}),h.jsxs("div",{className:"text-[11px] text-[var(--wb-muted)]",children:["Spells/s: ",Go(d.spellsPerSecond),"  Cycle costs: ",d.cycleCosts.map(p=>Math.round(p)).join(", ")]})]})]})})]}):h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Mana Sustain"}),h.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:"Equip a weapon and select spells with mana costs in the Ability Tree to see sustained mana and spell DPS."})]})}function Et(e){return Number.isFinite(e)?Math.round(e).toLocaleString():"-"}function Sk(e){const n=e.compareSummary?dk(e.summary,e.compareSummary):null,s=e.spellPreview?.melee??null;return h.jsx(Yi,{className:"flex min-h-0 flex-col",title:"Live Build Summary",headerRight:null,children:h.jsxs("div",{className:"flex flex-col gap-3 p-3",children:[h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Melee DPS"}),h.jsxs("div",{className:"mt-1 flex items-end justify-between gap-2",children:[h.jsx("div",{className:"wb-text-offense text-xl font-semibold",children:Et(s?.dps??e.summary.derived.legacyBaseDps)}),n?.legacyBaseDps!=null?h.jsxs("div",{className:["text-xs",n.legacyBaseDps>0?"wb-text-success":n.legacyBaseDps<0?"wb-text-danger":"text-[var(--wb-muted)]"].join(" "),children:[n.legacyBaseDps>0?"+":"",Math.round(n.legacyBaseDps).toLocaleString()]}):null]}),h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:[s?`Legacy melee DPS (${s.attackSpeedTier})  Per Attack ${Et(s.perAttackAverage)}`:"Legacy melee DPS preview unavailable (equip a weapon and valid ability tree selection)."," "," Melee % / Raw ",h.jsx("span",{className:"wb-text-offense",children:Et(e.summary.aggregated.offense.meleePct)})," / ",h.jsx("span",{className:"wb-text-offense",children:Et(e.summary.aggregated.offense.meleeRaw)})]})]}),h.jsx(xk,{spellPreview:e.spellPreview??null,summary:e.summary}),e.spellPreview?h.jsxs("div",{className:"wb-card p-3",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Spells (ATree)"}),h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[e.spellPreview.spells.length," entries"]})]}),e.spellPreview.notes.length>0?h.jsx("div",{className:"wb-banner mb-2 p-2 text-xs","data-tone":"warning",children:e.spellPreview.notes.join(" ")}):null,e.spellPreview.spells.length===0?h.jsx("div",{className:"rounded-lg border border-dashed border-[var(--wb-border-muted)] p-2 text-xs text-[var(--wb-muted)]",children:"No spell damage entries yet. Select active ability-tree spell nodes (roots / spell upgrades)."}):h.jsx(Vi,{className:"max-h-[36vh] lg:max-h-[44vh]",children:h.jsx("div",{className:"grid gap-2 pr-1",children:e.spellPreview.spells.map(i=>h.jsxs("div",{className:"wb-surface rounded-lg p-2",children:[h.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs",children:[h.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[h.jsxs("span",{children:[i.name,h.jsxs("span",{className:"ml-1 text-[var(--wb-muted)]",children:["(",i.displayPartName,")"]})]}),!i.isHealing&&i.dominantElement&&i.dominantElement!=="n"?h.jsx("span",{className:`spell-elem-chip spell-elem-${i.dominantElement}`,children:i.dominantElement==="e"?"Earth":i.dominantElement==="t"?"Thunder":i.dominantElement==="w"?"Water":i.dominantElement==="f"?"Fire":i.dominantElement==="a"?"Air":""}):null]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("div",{className:i.isHealing?"wb-text-defense":"wb-text-offense",children:[Math.round(i.averageDisplayValue).toLocaleString()," ",i.isHealing?"heal":"avg dmg"]}),i.manaCost!=null?h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[i.manaCost.toFixed(2)," mana"]}):null]})]}),h.jsx("div",{className:"mt-1 grid gap-1 text-xs text-[var(--wb-muted)]",children:i.parts.filter(r=>r.display).map(r=>h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsx("span",{className:"truncate",children:r.name}),h.jsx("span",{className:r.type==="heal"?"wb-text-defense":"wb-text-offense",children:Math.round(r.averageTotal??0).toLocaleString()})]},r.name))})]},`${i.baseSpell}-${i.name}`))})})]}):null,h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsx(Fo,{label:"Base DPS",value:Et(e.summary.derived.legacyBaseDps),delta:n?.legacyBaseDps??null,valueClassName:"wb-text-offense"}),h.jsx(Fo,{label:"Effective HP",value:Et(e.summary.derived.legacyEhp),delta:n?.legacyEhp??null,valueClassName:"wb-text-defense"}),h.jsx(Fo,{label:"Req Total",value:Et(e.summary.derived.reqTotal)}),h.jsx(Fo,{label:"SP Total",value:Et(e.summary.derived.skillPointTotal),delta:n?.skillPointTotal??null})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[h.jsxs("div",{className:"wb-surface rounded-xl px-3 py-2",children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"SP Feasibility:"})," ",h.jsx("span",{className:e.summary.derived.skillpointFeasible?"wb-text-success":"wb-text-danger",children:e.summary.derived.skillpointFeasible?"Wearable":"Invalid / Not Wearable"})]}),h.jsxs("div",{className:"wb-surface rounded-xl px-3 py-2",children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Assigned SP Needed:"})," ",h.jsx("span",{children:Et(e.summary.derived.assignedSkillPointsRequired)})]})]}),e.compareSummary&&e.compareSlot?h.jsxs("div",{className:"wb-banner p-3 text-xs","data-tone":"success",children:["Compare preview for ",h.jsx("b",{children:cc(e.compareSlot)})]}):null,h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"text-xs uppercase tracking-wide text-[var(--wb-muted)]",children:"Offense"}),h.jsxs("div",{className:"mt-2 grid gap-1 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Legacy Base DPS:"})," ",h.jsx("span",{className:"wb-text-offense font-medium",children:Et(e.summary.derived.legacyBaseDps)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Heuristic DPS Proxy:"})," ",h.jsx("span",{className:"wb-text-offense",children:Et(e.summary.derived.dpsProxy)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Spell % / Raw:"})," ",h.jsx("span",{className:"wb-text-offense",children:Et(e.summary.aggregated.offense.spellPct)})," / ",h.jsx("span",{className:"wb-text-offense",children:Et(e.summary.aggregated.offense.spellRaw)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Melee % / Raw:"})," ",h.jsx("span",{className:"wb-text-offense",children:Et(e.summary.aggregated.offense.meleePct)})," / ",h.jsx("span",{className:"wb-text-offense",children:Et(e.summary.aggregated.offense.meleeRaw)})]})]})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"text-xs uppercase tracking-wide text-[var(--wb-muted)]",children:"Defense & Utility"}),h.jsxs("div",{className:"mt-2 grid gap-1 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Legacy EHP (AGI):"})," ",h.jsx("span",{className:"wb-text-defense font-medium",children:Et(e.summary.derived.legacyEhp)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Legacy EHP (No AGI):"})," ",h.jsx("span",{className:"wb-text-defense",children:Et(e.summary.derived.legacyEhpNoAgi)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Heuristic EHP Proxy:"})," ",h.jsx("span",{className:"wb-text-defense",children:Et(e.summary.derived.ehpProxy)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"HP Total:"})," ",h.jsx("span",{className:"wb-text-defense",children:Et(e.summary.aggregated.hpTotal)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"HPR Total:"})," ",Et(e.summary.aggregated.hprTotal)]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"MR / MS / LS:"})," ",Et(e.summary.aggregated.mr)," / ",Et(e.summary.aggregated.ms)," / ",Et(e.summary.aggregated.ls)]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Walk Speed:"})," ",Et(e.summary.aggregated.speed)]})]})]})]}),h.jsx("div",{className:"wb-surface rounded-xl p-3 text-xs text-[var(--wb-muted)]",children:"Workbench primary KPIs use legacy-compatible metrics (Base DPS + Effective HP). Ability tree editing is now in Workbench, but these summary metrics still exclude ability-tree effects for now. Proxy values are still used internally for search/Build Solver heuristics."}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Warnings"}),e.summary.warnings.messages.length===0?h.jsx("div",{className:"wb-surface rounded-xl p-3 text-xs wb-text-success",children:"No active warnings."}):h.jsx(Vi,{className:"max-h-32",children:h.jsx("div",{className:"grid gap-2",children:e.summary.warnings.messages.map((i,r)=>h.jsx("div",{className:"wb-banner p-2 text-xs","data-tone":"warning",children:i},`${i}-${r}`))})})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs(Ce,{variant:"ghost",className:"justify-start",onClick:e.actions.onCopyLegacyLink,disabled:!e.snapshot.legacyHash,children:[h.jsx(_h,{size:14,className:"mr-2"}),"Legacy Link"]}),h.jsxs(Ce,{variant:"ghost",className:"justify-start",onClick:e.actions.onOpenLegacyBuilder,children:[h.jsx($E,{size:14,className:"mr-2"}),"Open Legacy"]})]})]})})}function wk(e){const{info:n}=e;return h.jsx("div",{className:"wb-banner px-3 py-2","data-tone":"accent",children:h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"text-xs font-semibold",children:["Crafted ",n.type.charAt(0).toUpperCase()+n.type.slice(1)]}),h.jsxs("div",{className:"mt-0.5 text-[10px] text-[var(--wb-muted)]",children:["Lv. ",n.lvl," | ",n.hash.slice(0,20),"..."]})]}),h.jsx(Ce,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:e.onClear,title:"Remove crafted item",children:h.jsx(db,{size:12})})]})})}function c0(e){const{isOver:n,setNodeRef:s}=rb({id:`slot:${e.slot}`,data:{droppableType:"slot",slot:e.slot}}),i=e.store.slots[e.slot],r=i!=null?e.catalog.itemsById.get(i):void 0,c=e.store.craftedSlots[e.slot],u=lb({id:r?`slot-item:${e.slot}:${r.id}`:`slot-empty:${e.slot}`,data:r?{dragItem:{kind:"slot",itemId:r.id,sourceSlot:e.slot}}:void 0,disabled:!r});return h.jsxs("div",{ref:s,className:pt("rounded-xl border p-2",n?"border-emerald-400/70 bg-emerald-400/8":"wb-surface-strong"),onMouseEnter:()=>e.store.setSelectedSlot(e.slot),children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:cc(e.slot)}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(Ce,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.toggleLock(e.slot),title:"Lock slot",children:h.jsx(ub,{size:12,className:pt(e.store.locks[e.slot]&&"wb-text-success")})}),h.jsx(Ce,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.moveSlotToBin(e.slot),title:"Move to bin",children:h.jsx(dT,{size:12})})]})]}),r?h.jsx("div",{ref:u.setNodeRef,style:{transform:ic.Translate.toString(u.transform),opacity:u.isDragging?.45:1},...u.listeners,...u.attributes,children:h.jsx(Ic,{item:r,compact:!0,dense:!0,showDetails:e.showItemDetails,dragData:{kind:"slot",itemId:r.id,sourceSlot:e.slot},locked:e.store.locks[e.slot],onHover:d=>e.onHoverItem?.(d?r.id:null,d?e.slot:null)})}):c?h.jsx(wk,{info:c,onClear:()=>e.store.clearCraftedSlot(e.slot)}):h.jsxs("div",{className:"wb-placeholder rounded-lg px-3 py-3 text-center text-xs",children:["Drop a ",da(e.slot)," item here"]})]})}function u0(e){const{isOver:n,setNodeRef:s}=rb({id:`bin:${e.category}`,data:{droppableType:"bin",category:e.category}}),i=e.store.binsByCategory[e.category].map(r=>e.catalog.itemsById.get(r)).filter(r=>!!r);return h.jsxs("div",{className:"flex min-w-0 flex-col gap-1.5",children:[h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsxs("div",{className:"text-xs font-semibold",children:[Eh(e.category)," Bin"]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:i.length}),h.jsxs(Ce,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.clearCategory(e.category),children:[h.jsx(db,{size:12,className:"mr-1 inline"}),"Clear"]})]})]}),h.jsx("div",{ref:s,className:pt("wb-grid-backdrop min-h-20 rounded-xl border p-1.5",n?"border-emerald-400/70 bg-emerald-400/8":"wb-surface"),children:i.length===0?h.jsxs("div",{className:"p-2 text-[11px] text-[var(--wb-muted)]",children:["Drop items here for ",e.category,"."]}):h.jsx("div",{className:"grid max-h-40 gap-1.5 overflow-auto pr-0.5 wb-scrollbar",children:i.map(r=>h.jsx(Ic,{item:r,compact:!0,dense:!0,showDetails:e.showItemDetails,dragData:{kind:"bin",itemId:r.id,sourceCategory:e.category},onRemove:()=>e.store.removePinnedItem(e.category,r.id),onHover:c=>{const u=e.store.selectedSlot&&da(e.store.selectedSlot)===e.category?e.store.selectedSlot:null;e.onHoverItem?.(c?r.id:null,c?u:null)}},`${e.category}-${r.id}`))})})]})}function _k(e){const[n,s]=w.useState(!1),i=w.useMemo(()=>[["helmet","chestplate","leggings","boots"],["ring1","ring2","bracelet","necklace"]],[]),r=w.useMemo(()=>[{key:"armor",title:"Armor Shelf",categories:["helmet","chestplate","leggings","boots"]},{key:"accessories",title:"Accessory Shelf",categories:["ring","bracelet","necklace"]},{key:"weapon",title:"Weapon Shelf",categories:["weapon"]}].filter(d=>d.key!=="weapon"),[]),c=e.store.comparePreview;let u=null;if(c?.itemId!=null&&c.slot)u={itemId:c.itemId,source:`Compare Preview  ${cc(c.slot)}`};else if(e.store.selectedSlot){const d=e.store.slots[e.store.selectedSlot];d!=null&&(u={itemId:d,source:`Selected Slot  ${cc(e.store.selectedSlot)}`})}else e.store.slots.weapon!=null&&(u={itemId:e.store.slots.weapon,source:"Equipped Weapon"});return h.jsx(Yi,{className:"flex min-h-0 flex-col",title:"Build",headerRight:h.jsxs(h.Fragment,{children:[h.jsx(Ce,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.undo(),children:"Undo"}),h.jsx(Ce,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.redo(),children:"Redo"}),h.jsx(Ce,{className:"px-2 py-1 text-xs",variant:n?"primary":"ghost",onClick:()=>s(d=>!d),children:n?"Hide Details":"Item Details"}),h.jsx(Ce,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.clearAll(),children:"Clear All"})]}),children:h.jsxs("div",{className:"grid min-h-0 flex-1 grid-rows-[auto_1fr_auto] gap-2 p-2.5",children:[h.jsxs("div",{className:"grid gap-1.5 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)_minmax(0,1.05fr)]",children:[i.map((d,m)=>h.jsx("div",{className:"grid gap-1.5",children:d.map(p=>h.jsx(c0,{slot:p,catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem},p))},m)),h.jsxs("div",{className:"grid content-start gap-1.5",children:[h.jsx(c0,{slot:"weapon",catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem}),h.jsxs("div",{className:"wb-surface rounded-xl p-2",children:[h.jsxs("div",{className:"mb-1.5 flex items-center justify-between gap-2",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Weapon Shelf"}),h.jsx("div",{className:"text-[11px] text-[var(--wb-muted)]",children:"Pinned weapon candidates"})]}),h.jsx(u0,{category:"weapon",catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem})]}),u?h.jsxs("div",{className:"wb-card p-2.5",children:[h.jsx("div",{className:"mb-2 flex items-center justify-between gap-2",children:h.jsxs("div",{children:[h.jsx("div",{className:"text-xs uppercase tracking-wide text-[var(--wb-muted)]",children:"Focused Item"}),h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:u.source})]})}),(()=>{const d=e.catalog.itemsById.get(u.itemId);return d?h.jsx(Ic,{item:d,compact:!0,dense:!0,showDetails:n}):null})()]}):null]})]}),h.jsx(Vi,{className:"min-h-0 pr-1",children:h.jsx("div",{className:"grid gap-3",children:r.map(d=>h.jsxs("div",{className:"grid gap-1.5",children:[h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:d.title}),h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:d.categories.map(Eh).join("  ")})]}),h.jsx("div",{className:pt("grid gap-2",d.categories.length===1?"grid-cols-1":d.categories.length===3?"lg:grid-cols-3":"md:grid-cols-2 xl:grid-cols-4"),children:d.categories.map(m=>h.jsx(u0,{category:m,catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem},m))})]},d.key))})}),e.searchResults?h.jsx("div",{className:"wb-surface flex min-h-[220px] max-h-[40vh] min-w-0 flex-col overflow-hidden rounded-xl",children:e.searchResults}):null,h.jsx("div",{className:"wb-surface rounded-xl p-2",children:h.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-3",children:[h.jsxs(Ce,{variant:"ghost",className:"justify-start",onClick:e.onShareWorkbench,children:[h.jsx(_h,{size:14,className:"mr-2"}),"Share"]}),h.jsxs(Ce,{variant:"ghost",className:"justify-start",onClick:e.onExportWorkbench,children:[h.jsx(qE,{size:14,className:"mr-2"}),"Export"]}),h.jsxs(Ce,{variant:"ghost",className:"justify-start",onClick:e.onImportWorkbench,children:[h.jsx(hT,{size:14,className:"mr-2"}),"Import"]})]})})]})})}function nc(e){if(!e)return null;const n=e.startsWith("#")?e.slice(1):e;return n.trim()?n:null}function d0(e){const n=nc(e);if(typeof window>"u"){const r="builder/";return n?`${r}#${n}`:r}if(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"){const r="https://hppeng-wynn.github.io/builder/";return n?`${r}#${n}`:r}const i=new URL("builder/",window.location.href).href;return n?`${i}#${n}`:i}const Ek=[["helmet","helmet-choice"],["chestplate","chestplate-choice"],["leggings","leggings-choice"],["boots","boots-choice"],["ring1","ring1-choice"],["ring2","ring2-choice"],["bracelet","bracelet-choice"],["necklace","necklace-choice"],["weapon","weapon-choice"]];function f0(e){const n=e.trim();if(!n)return null;if(n.startsWith("#"))return nc(n);try{const s=new URL(n,window.location.origin);return nc(s.hash)}catch{return nc(n)}}class Tk{isSupported(n){return f0(n)!==null}async encodeLegacyHash(n){if(n.legacyHash)return n.legacyHash;throw new Error("Legacy hash encoding is only available for imported legacy builds in Workbench v1. Use Workbench share link or open legacy builder for full encode.")}async decodeLegacyHash(n){const s=f0(n);if(!s)throw new Error("No legacy hash found to decode");if(typeof document>"u")return{legacyHash:s,level:null,slots:{}};const i=document.createElement("iframe");i.style.position="fixed",i.style.left="-99999px",i.style.width="1200px",i.style.height="900px",i.style.opacity="0",i.src=`../builder/#${s}`,document.body.appendChild(i);const r=3e4,c=Date.now();try{return await new Promise((d,m)=>{const p=window.setInterval(()=>{try{if(!i.contentDocument)return;const v=i.contentDocument,y=v.getElementById("weapon-choice"),b=v.getElementById("level-choice");if(!y||!b){Date.now()-c>r&&(window.clearInterval(p),m(new Error("Timed out waiting for legacy builder UI")));return}const S={};for(const[k,R]of Ek){const B=v.getElementById(R)?.value?.trim();B&&(S[k]=B)}if(!S.weapon&&Date.now()-c<2e3)return;const E=b.value?.trim(),C=E?Number(E):null;window.clearInterval(p),d({legacyHash:s,level:Number.isFinite(C??NaN)?C:null,slots:S,sourceUrl:i.src})}catch(v){window.clearInterval(p),m(v)}},250)})}finally{i.remove()}}}const jf=new Tk,h0=e=>{let n;const s=new Set,i=(p,v)=>{const y=typeof p=="function"?p(n):p;if(!Object.is(y,n)){const b=n;n=v??(typeof y!="object"||y===null)?y:Object.assign({},n,y),s.forEach(S=>S(n,b))}},r=()=>n,d={setState:i,getState:r,getInitialState:()=>m,subscribe:p=>(s.add(p),()=>s.delete(p))},m=n=e(i,r,d);return d},Nk=(e=>e?h0(e):h0),Mk=e=>e;function jk(e,n=Mk){const s=en.useSyncExternalStore(e.subscribe,en.useCallback(()=>n(e.getState()),[e,n]),en.useCallback(()=>n(e.getInitialState()),[e,n]));return en.useDebugValue(s),s}const Ck=e=>{const n=Nk(e),s=i=>jk(n,i);return Object.assign(s,n),s},Dk=(e=>Ck);var Vx=Symbol.for("immer-nothing"),m0=Symbol.for("immer-draftable"),In=Symbol.for("immer-state");function ta(e,...n){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var fr=Object.getPrototypeOf;function Qi(e){return!!e&&!!e[In]}function Zs(e){return e?Kx(e)||Array.isArray(e)||!!e[m0]||!!e.constructor?.[m0]||yr(e)||qc(e):!1}var Rk=Object.prototype.constructor.toString(),g0=new WeakMap;function Kx(e){if(!e||typeof e!="object")return!1;const n=Object.getPrototypeOf(e);if(n===null||n===Object.prototype)return!0;const s=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;if(s===Object)return!0;if(typeof s!="function")return!1;let i=g0.get(s);return i===void 0&&(i=Function.toString.call(s),g0.set(s,i)),i===Rk}function yc(e,n,s=!0){Lc(e)===0?(s?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{n(r,e[r],e)}):e.forEach((i,r)=>n(r,i,e))}function Lc(e){const n=e[In];return n?n.type_:Array.isArray(e)?1:yr(e)?2:qc(e)?3:0}function Jf(e,n){return Lc(e)===2?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function Wx(e,n,s){const i=Lc(e);i===2?e.set(n,s):i===3?e.add(s):e[n]=s}function kk(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}function yr(e){return e instanceof Map}function qc(e){return e instanceof Set}function Us(e){return e.copy_||e.base_}function eh(e,n){if(yr(e))return new Map(e);if(qc(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const s=Kx(e);if(n===!0||n==="class_only"&&!s){const i=Object.getOwnPropertyDescriptors(e);delete i[In];let r=Reflect.ownKeys(i);for(let c=0;c<r.length;c++){const u=r[c],d=i[u];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(i[u]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[u]})}return Object.create(fr(e),i)}else{const i=fr(e);if(i!==null&&s)return{...e};const r=Object.create(i);return Object.assign(r,e)}}function Bh(e,n=!1){return Uc(e)||Qi(e)||!Zs(e)||(Lc(e)>1&&Object.defineProperties(e,{set:Yo,add:Yo,clear:Yo,delete:Yo}),Object.freeze(e),n&&Object.values(e).forEach(s=>Bh(s,!0))),e}function Ak(){ta(2)}var Yo={value:Ak};function Uc(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Ok={};function Fs(e){const n=Ok[e];return n||ta(0,e),n}var hr;function Xx(){return hr}function zk(e,n){return{drafts_:[],parent_:e,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function p0(e,n){n&&(Fs("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=n)}function th(e){nh(e),e.drafts_.forEach(Pk),e.drafts_=null}function nh(e){e===hr&&(hr=e.parent_)}function v0(e){return hr=zk(hr,e)}function Pk(e){const n=e[In];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function y0(e,n){n.unfinalizedDrafts_=n.drafts_.length;const s=n.drafts_[0];return e!==void 0&&e!==s?(s[In].modified_&&(th(n),ta(4)),Zs(e)&&(e=bc(n,e),n.parent_||xc(n,e)),n.patches_&&Fs("Patches").generateReplacementPatches_(s[In].base_,e,n.patches_,n.inversePatches_)):e=bc(n,s,[]),th(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),e!==Vx?e:void 0}function bc(e,n,s){if(Uc(n))return n;const i=e.immer_.shouldUseStrictIteration(),r=n[In];if(!r)return yc(n,(c,u)=>b0(e,r,n,c,u,s),i),n;if(r.scope_!==e)return n;if(!r.modified_)return xc(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const c=r.copy_;let u=c,d=!1;r.type_===3&&(u=new Set(c),c.clear(),d=!0),yc(u,(m,p)=>b0(e,r,c,m,p,s,d),i),xc(e,c,!1),s&&e.patches_&&Fs("Patches").generatePatches_(r,s,e.patches_,e.inversePatches_)}return r.copy_}function b0(e,n,s,i,r,c,u){if(r==null||typeof r!="object"&&!u)return;const d=Uc(r);if(!(d&&!u)){if(Qi(r)){const m=c&&n&&n.type_!==3&&!Jf(n.assigned_,i)?c.concat(i):void 0,p=bc(e,r,m);if(Wx(s,i,p),Qi(p))e.canAutoFreeze_=!1;else return}else u&&s.add(r);if(Zs(r)&&!d){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||n&&n.base_&&n.base_[i]===r&&d)return;bc(e,r),(!n||!n.scope_.parent_)&&typeof i!="symbol"&&(yr(s)?s.has(i):Object.prototype.propertyIsEnumerable.call(s,i))&&xc(e,r)}}}function xc(e,n,s=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Bh(n,s)}function Ik(e,n){const s=Array.isArray(e),i={type_:s?1:0,scope_:n?n.scope_:Xx(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,c=Lh;s&&(r=[i],c=mr);const{revoke:u,proxy:d}=Proxy.revocable(r,c);return i.draft_=d,i.revoke_=u,d}var Lh={get(e,n){if(n===In)return e;const s=Us(e);if(!Jf(s,n))return Bk(e,s,n);const i=s[n];return e.finalized_||!Zs(i)?i:i===Cf(e.base_,n)?(Df(e),e.copy_[n]=sh(i,e)):i},has(e,n){return n in Us(e)},ownKeys(e){return Reflect.ownKeys(Us(e))},set(e,n,s){const i=Qx(Us(e),n);if(i?.set)return i.set.call(e.draft_,s),!0;if(!e.modified_){const r=Cf(Us(e),n),c=r?.[In];if(c&&c.base_===s)return e.copy_[n]=s,e.assigned_[n]=!1,!0;if(kk(s,r)&&(s!==void 0||Jf(e.base_,n)))return!0;Df(e),ah(e)}return e.copy_[n]===s&&(s!==void 0||n in e.copy_)||Number.isNaN(s)&&Number.isNaN(e.copy_[n])||(e.copy_[n]=s,e.assigned_[n]=!0),!0},deleteProperty(e,n){return Cf(e.base_,n)!==void 0||n in e.base_?(e.assigned_[n]=!1,Df(e),ah(e)):delete e.assigned_[n],e.copy_&&delete e.copy_[n],!0},getOwnPropertyDescriptor(e,n){const s=Us(e),i=Reflect.getOwnPropertyDescriptor(s,n);return i&&{writable:!0,configurable:e.type_!==1||n!=="length",enumerable:i.enumerable,value:s[n]}},defineProperty(){ta(11)},getPrototypeOf(e){return fr(e.base_)},setPrototypeOf(){ta(12)}},mr={};yc(Lh,(e,n)=>{mr[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});mr.deleteProperty=function(e,n){return mr.set.call(this,e,n,void 0)};mr.set=function(e,n,s){return Lh.set.call(this,e[0],n,s,e[0])};function Cf(e,n){const s=e[In];return(s?Us(s):e)[n]}function Bk(e,n,s){const i=Qx(n,s);return i?"value"in i?i.value:i.get?.call(e.draft_):void 0}function Qx(e,n){if(!(n in e))return;let s=fr(e);for(;s;){const i=Object.getOwnPropertyDescriptor(s,n);if(i)return i;s=fr(s)}}function ah(e){e.modified_||(e.modified_=!0,e.parent_&&ah(e.parent_))}function Df(e){e.copy_||(e.copy_=eh(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Lk=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(n,s,i)=>{if(typeof n=="function"&&typeof s!="function"){const c=s;s=n;const u=this;return function(m=c,...p){return u.produce(m,v=>s.call(this,v,...p))}}typeof s!="function"&&ta(6),i!==void 0&&typeof i!="function"&&ta(7);let r;if(Zs(n)){const c=v0(this),u=sh(n,void 0);let d=!0;try{r=s(u),d=!1}finally{d?th(c):nh(c)}return p0(c,i),y0(r,c)}else if(!n||typeof n!="object"){if(r=s(n),r===void 0&&(r=n),r===Vx&&(r=void 0),this.autoFreeze_&&Bh(r,!0),i){const c=[],u=[];Fs("Patches").generateReplacementPatches_(n,r,c,u),i(c,u)}return r}else ta(1,n)},this.produceWithPatches=(n,s)=>{if(typeof n=="function")return(u,...d)=>this.produceWithPatches(u,m=>n(m,...d));let i,r;return[this.produce(n,s,(u,d)=>{i=u,r=d}),i,r]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Zs(e)||ta(8),Qi(e)&&(e=qk(e));const n=v0(this),s=sh(e,void 0);return s[In].isManual_=!0,nh(n),s}finishDraft(e,n){const s=e&&e[In];(!s||!s.isManual_)&&ta(9);const{scope_:i}=s;return p0(i,n),y0(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let s;for(s=n.length-1;s>=0;s--){const r=n[s];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}s>-1&&(n=n.slice(s+1));const i=Fs("Patches").applyPatches_;return Qi(e)?i(e,n):this.produce(e,r=>i(r,n))}};function sh(e,n){const s=yr(e)?Fs("MapSet").proxyMap_(e,n):qc(e)?Fs("MapSet").proxySet_(e,n):Ik(e,n);return(n?n.scope_:Xx()).drafts_.push(s),s}function qk(e){return Qi(e)||ta(10,e),Jx(e)}function Jx(e){if(!Zs(e)||Uc(e))return e;const n=e[In];let s,i=!0;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,s=eh(e,n.scope_.immer_.useStrictShallowCopy_),i=n.scope_.immer_.shouldUseStrictIteration()}else s=eh(e,!0);return yc(s,(r,c)=>{Wx(s,r,Jx(c))},i),n&&(n.finalized_=!1),s}var Uk=new Lk,$k=Uk.produce;const Hk=e=>(n,s,i)=>(i.setState=(r,c,...u)=>{const d=typeof r=="function"?$k(r):r;return n(d,c,...u)},e(i.setState,s,i)),Zk=Hk,ac={itemId:null,slot:null};function eS(){return Object.fromEntries(nt.map(e=>[e,null]))}function tS(){return Object.fromEntries(ys.map(e=>[e,[]]))}function Fk(){return Object.fromEntries(nt.map(e=>[e,!1]))}function x0(){return{slots:eS(),craftedSlots:{},binsByCategory:tS(),locks:Fk(),level:106,characterClass:null,selectedSlot:"weapon",comparePreview:{...ac},legacyHash:null,skillpointTomeMode:"no_tomes"}}function ih(e){return{slots:{...e.slots},craftedSlots:{...e.craftedSlots},binsByCategory:Object.fromEntries(ys.map(n=>[n,[...e.binsByCategory[n]]])),locks:{...e.locks},level:e.level,characterClass:e.characterClass,selectedSlot:e.selectedSlot,comparePreview:{...e.comparePreview},legacyHash:e.legacyHash,skillpointTomeMode:e.skillpointTomeMode}}function pn(e){e.undoStack.push(ih(e)),e.undoStack.length>100&&e.undoStack.shift(),e.redoStack=[]}function Rf(e,n){e.slots={...n.slots},e.craftedSlots={...n.craftedSlots},e.binsByCategory=Object.fromEntries(ys.map(s=>[s,[...n.binsByCategory[s]]])),e.locks={...n.locks},e.level=n.level,e.characterClass=n.characterClass,e.selectedSlot=n.selectedSlot,e.comparePreview={...n.comparePreview},e.legacyHash=n.legacyHash}function kf(e,n){e.includes(n)||e.unshift(n)}const Vo=Dk()(Zk((e,n)=>({...x0(),undoStack:[],redoStack:[],setLevel(s){e(i=>{pn(i),i.level=Math.min(106,Math.max(1,Math.round(s)))})},setCharacterClass(s){e(i=>{pn(i),i.characterClass=s})},setSkillpointTomeMode(s){e(i=>{i.skillpointTomeMode=s??"no_tomes"})},setSelectedSlot(s){e(i=>{i.selectedSlot=s})},setComparePreview(s){e(i=>{if(!s){i.comparePreview={...ac};return}i.comparePreview={itemId:s.itemId??i.comparePreview.itemId,slot:s.slot??i.comparePreview.slot}})},pinItem(s,i){e(r=>{pn(r),kf(r.binsByCategory[s],i)})},removePinnedItem(s,i){e(r=>{pn(r),r.binsByCategory[s]=r.binsByCategory[s].filter(c=>c!==i)})},clearCategory(s){e(i=>{pn(i),i.binsByCategory[s]=[]})},clearAll(){e(s=>{pn(s),s.slots=eS(),s.craftedSlots={},s.binsByCategory=tS(),s.comparePreview={...ac},s.legacyHash=null})},equipItem(s,i){e(r=>{pn(r),r.slots[s]=i,delete r.craftedSlots[s],r.selectedSlot=s})},moveSlotToBin(s){e(i=>{const r=i.slots[s];if(r==null)return;pn(i);const c=da(s);kf(i.binsByCategory[c],r),i.slots[s]=null})},swapSlots(s,i){e(r=>{pn(r);const c=r.slots[s];r.slots[s]=r.slots[i],r.slots[i]=c})},assignDraggedItemToSlot({targetSlot:s,source:i,itemId:r,sourceCategory:c,sourceSlot:u}){e(d=>{pn(d);const m=d.slots[s];d.slots[s]=r,delete d.craftedSlots[s],d.selectedSlot=s,i==="bin"&&c&&(d.binsByCategory[c]=d.binsByCategory[c].filter(p=>p!==r)),i==="slot"&&u&&u!==s&&(d.slots[u]=m??null)})},assignDraggedItemToBin({targetCategory:s,source:i,itemId:r,sourceCategory:c,sourceSlot:u}){e(d=>{pn(d),i==="bin"&&c&&(d.binsByCategory[c]=d.binsByCategory[c].filter(m=>m!==r)),i==="slot"&&u&&(d.slots[u]=null),kf(d.binsByCategory[s],r)})},toggleLock(s){e(i=>{pn(i),i.locks[s]=!i.locks[s]})},equipCraftedItem(s,i){e(r=>{pn(r),r.slots[s]=null,r.craftedSlots[s]=i,r.selectedSlot=s})},clearCraftedSlot(s){e(i=>{pn(i),delete i.craftedSlots[s]})},undo(){const s=n(),i=s.undoStack[s.undoStack.length-1];i&&e(r=>{const c=ih(r);r.undoStack.pop(),r.redoStack.push(c),Rf(r,i)})},redo(){const s=n(),i=s.redoStack[s.redoStack.length-1];i&&e(r=>{const c=ih(r);r.redoStack.pop(),r.undoStack.push(c),Rf(r,i)})},hydrateSnapshot(s){e(i=>{const r=x0(),c={...r,...s,slots:{...r.slots,...s.slots??{}},craftedSlots:{...r.craftedSlots,...s.craftedSlots??{}},locks:{...r.locks,...s.locks??{}},binsByCategory:{...r.binsByCategory,...s.binsByCategory??{}},comparePreview:{...r.comparePreview,...s.comparePreview??{}}};Rf(i,c),i.undoStack=[],i.redoStack=[]})},loadCandidate(s){e(i=>{pn(i),i.slots={...s},i.comparePreview={...ac}})},setLegacyHash(s){e(i=>{i.legacyHash=s})}})));var Af={exports:{}},S0;function Gk(){return S0||(S0=1,(function(e){var n=(function(){var s=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",c={};function u(m,p){if(!c[m]){c[m]={};for(var v=0;v<m.length;v++)c[m][m.charAt(v)]=v}return c[m][p]}var d={compressToBase64:function(m){if(m==null)return"";var p=d._compress(m,6,function(v){return i.charAt(v)});switch(p.length%4){default:case 0:return p;case 1:return p+"===";case 2:return p+"==";case 3:return p+"="}},decompressFromBase64:function(m){return m==null?"":m==""?null:d._decompress(m.length,32,function(p){return u(i,m.charAt(p))})},compressToUTF16:function(m){return m==null?"":d._compress(m,15,function(p){return s(p+32)})+" "},decompressFromUTF16:function(m){return m==null?"":m==""?null:d._decompress(m.length,16384,function(p){return m.charCodeAt(p)-32})},compressToUint8Array:function(m){for(var p=d.compress(m),v=new Uint8Array(p.length*2),y=0,b=p.length;y<b;y++){var S=p.charCodeAt(y);v[y*2]=S>>>8,v[y*2+1]=S%256}return v},decompressFromUint8Array:function(m){if(m==null)return d.decompress(m);for(var p=new Array(m.length/2),v=0,y=p.length;v<y;v++)p[v]=m[v*2]*256+m[v*2+1];var b=[];return p.forEach(function(S){b.push(s(S))}),d.decompress(b.join(""))},compressToEncodedURIComponent:function(m){return m==null?"":d._compress(m,6,function(p){return r.charAt(p)})},decompressFromEncodedURIComponent:function(m){return m==null?"":m==""?null:(m=m.replace(/ /g,"+"),d._decompress(m.length,32,function(p){return u(r,m.charAt(p))}))},compress:function(m){return d._compress(m,16,function(p){return s(p)})},_compress:function(m,p,v){if(m==null)return"";var y,b,S={},_={},E="",C="",k="",R=2,z=3,B=2,q=[],M=0,j=0,D;for(D=0;D<m.length;D+=1)if(E=m.charAt(D),Object.prototype.hasOwnProperty.call(S,E)||(S[E]=z++,_[E]=!0),C=k+E,Object.prototype.hasOwnProperty.call(S,C))k=C;else{if(Object.prototype.hasOwnProperty.call(_,k)){if(k.charCodeAt(0)<256){for(y=0;y<B;y++)M=M<<1,j==p-1?(j=0,q.push(v(M)),M=0):j++;for(b=k.charCodeAt(0),y=0;y<8;y++)M=M<<1|b&1,j==p-1?(j=0,q.push(v(M)),M=0):j++,b=b>>1}else{for(b=1,y=0;y<B;y++)M=M<<1|b,j==p-1?(j=0,q.push(v(M)),M=0):j++,b=0;for(b=k.charCodeAt(0),y=0;y<16;y++)M=M<<1|b&1,j==p-1?(j=0,q.push(v(M)),M=0):j++,b=b>>1}R--,R==0&&(R=Math.pow(2,B),B++),delete _[k]}else for(b=S[k],y=0;y<B;y++)M=M<<1|b&1,j==p-1?(j=0,q.push(v(M)),M=0):j++,b=b>>1;R--,R==0&&(R=Math.pow(2,B),B++),S[C]=z++,k=String(E)}if(k!==""){if(Object.prototype.hasOwnProperty.call(_,k)){if(k.charCodeAt(0)<256){for(y=0;y<B;y++)M=M<<1,j==p-1?(j=0,q.push(v(M)),M=0):j++;for(b=k.charCodeAt(0),y=0;y<8;y++)M=M<<1|b&1,j==p-1?(j=0,q.push(v(M)),M=0):j++,b=b>>1}else{for(b=1,y=0;y<B;y++)M=M<<1|b,j==p-1?(j=0,q.push(v(M)),M=0):j++,b=0;for(b=k.charCodeAt(0),y=0;y<16;y++)M=M<<1|b&1,j==p-1?(j=0,q.push(v(M)),M=0):j++,b=b>>1}R--,R==0&&(R=Math.pow(2,B),B++),delete _[k]}else for(b=S[k],y=0;y<B;y++)M=M<<1|b&1,j==p-1?(j=0,q.push(v(M)),M=0):j++,b=b>>1;R--,R==0&&(R=Math.pow(2,B),B++)}for(b=2,y=0;y<B;y++)M=M<<1|b&1,j==p-1?(j=0,q.push(v(M)),M=0):j++,b=b>>1;for(;;)if(M=M<<1,j==p-1){q.push(v(M));break}else j++;return q.join("")},decompress:function(m){return m==null?"":m==""?null:d._decompress(m.length,32768,function(p){return m.charCodeAt(p)})},_decompress:function(m,p,v){var y=[],b=4,S=4,_=3,E="",C=[],k,R,z,B,q,M,j,D={val:v(0),position:p,index:1};for(k=0;k<3;k+=1)y[k]=k;for(z=0,q=Math.pow(2,2),M=1;M!=q;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=v(D.index++)),z|=(B>0?1:0)*M,M<<=1;switch(z){case 0:for(z=0,q=Math.pow(2,8),M=1;M!=q;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=v(D.index++)),z|=(B>0?1:0)*M,M<<=1;j=s(z);break;case 1:for(z=0,q=Math.pow(2,16),M=1;M!=q;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=v(D.index++)),z|=(B>0?1:0)*M,M<<=1;j=s(z);break;case 2:return""}for(y[3]=j,R=j,C.push(j);;){if(D.index>m)return"";for(z=0,q=Math.pow(2,_),M=1;M!=q;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=v(D.index++)),z|=(B>0?1:0)*M,M<<=1;switch(j=z){case 0:for(z=0,q=Math.pow(2,8),M=1;M!=q;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=v(D.index++)),z|=(B>0?1:0)*M,M<<=1;y[S++]=s(z),j=S-1,b--;break;case 1:for(z=0,q=Math.pow(2,16),M=1;M!=q;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=v(D.index++)),z|=(B>0?1:0)*M,M<<=1;y[S++]=s(z),j=S-1,b--;break;case 2:return C.join("")}if(b==0&&(b=Math.pow(2,_),_++),y[j])E=y[j];else if(j===S)E=R+R.charAt(0);else return null;C.push(E),y[S++]=R+E.charAt(0),b--,R=E,b==0&&(b=Math.pow(2,_),_++)}}};return d})();e!=null?e.exports=n:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return n})})(Af)),Af.exports}var Yk=Gk();const nS=mh(Yk),lh={helmet:"h",chestplate:"c",leggings:"l",boots:"b",ring1:"r1",ring2:"r2",bracelet:"br",necklace:"n",weapon:"w"},Ko=Object.fromEntries(Object.entries(lh).map(([e,n])=>[n,e])),Vk=cr({slots:ar(En(),ea().int().nullable()).optional(),binsByCategory:ar(En(),Pn(ea().int())).optional(),locks:ar(En(),Jl()).optional(),level:ea().int().min(1).max(106).optional(),characterClass:gc(["Warrior","Assassin","Mage","Archer","Shaman"]).nullable().optional(),selectedSlot:En().nullable().optional(),legacyHash:En().nullable().optional()}).passthrough(),Kk=cr({version:En().nullable().optional(),selectedByClass:cr({Warrior:Pn(ea().int()).optional(),Assassin:Pn(ea().int()).optional(),Mage:Pn(ea().int()).optional(),Archer:Pn(ea().int()).optional(),Shaman:Pn(ea().int()).optional()}).partial().default({})});function Wk(e){const n=e.replace(/-/g,"+").replace(/_/g,"/").padEnd(Math.ceil(e.length/4)*4,"="),s=atob(n),i=Uint8Array.from(s,r=>r.charCodeAt(0));return new TextDecoder().decode(i)}function aS(e){const n=nS.decompressFromEncodedURIComponent(e);if(n!=null&&n!=="")return n;try{return Wk(e)}catch{return null}}function sS(e){return nS.compressToEncodedURIComponent(e)}function w0(e){try{return JSON.parse(e)}catch{return null}}function iS(e){const n=e.searchParams.get("q")??"",s=e.searchParams.get("sort"),i=s?s.split(",").map(k=>k.trim()).filter(Boolean):[],r=e.searchParams.get("sdesc"),c=e.searchParams.get("view"),u=e.searchParams.get("wearLevel"),d=e.searchParams.get("classCompat"),m=e.searchParams.get("excludeRestricted"),p=(e.searchParams.get("cats")??"").split(",").map(k=>k.trim()).filter(Boolean),v=(e.searchParams.get("types")??"").split(",").map(k=>k.trim()).filter(Boolean),y=(e.searchParams.get("tiers")??"").split(",").map(k=>k.trim()).filter(Boolean),b=(e.searchParams.get("classReqs")??"").split(",").map(k=>k.trim()).filter(Boolean),S=(e.searchParams.get("majorIds")??"").split(",").map(k=>k.trim()).filter(Boolean),_=w0(e.searchParams.get("ranges")??"")??{},E=w0(e.searchParams.get("excludeRanges")??"")??{},C=e.searchParams.get("resultsBelow");return Kb({...Oa,text:n,sortKeys:i.length>0?i:Oa.sortKeys,sortDescending:r===null?Oa.sortDescending:r!=="0",viewMode:c??Oa.viewMode,onlyWearableAtLevel:u?Number(u):Oa.onlyWearableAtLevel,onlyClassCompatible:d==="1",excludeRestricted:m===null?!1:m!=="0",categories:p,types:v,tiers:y,classReqs:b,majorIds:S,numericRanges:_,exclusionRanges:E,resultsBelowBuild:C===null?Oa.resultsBelowBuild:C==="1"})}function Xk(e){const n=e.s??e.slots,s=e.k??e.locks,i=e.l??e.level,r=e.c??e.characterClass,c=e.h??e.legacyHash;let u=e.selectedSlot;typeof u=="string"&&Ko[u]&&(u=Ko[u]);const d=e.binsByCategory;if(n&&typeof n=="object"){const m={};for(const[p,v]of Object.entries(n)){const y=Ko[p]??p;m[y]=typeof v=="number"||v===null?v:null}e={...e,slots:m}}if(s&&typeof s=="object"){const m={};for(const[p,v]of Object.entries(s)){const y=Ko[p]??p;m[y]=!!v}e={...e,locks:m}}return i!==void 0&&(e={...e,level:i}),r!==void 0&&(e={...e,characterClass:r}),c!==void 0&&(e={...e,legacyHash:c}),u!==void 0&&(e={...e,selectedSlot:u}),d!==void 0&&(e={...e,binsByCategory:d}),e}function lS(e){const n=e.searchParams.get("wb");if(!n)return null;try{const s=aS(n);if(!s)return null;const i=JSON.parse(s),r=Xk(i),c=Vk.parse(r),u=Object.fromEntries(nt.map(p=>[p,c.slots?.[p]??null])),d=Object.fromEntries(ys.map(p=>[p,c.binsByCategory?.[p]??[]])),m=Object.fromEntries(nt.map(p=>[p,!!c.locks?.[p]]));return{slots:u,binsByCategory:d,locks:m,level:c.level,characterClass:c.characterClass??null,selectedSlot:c.selectedSlot??void 0,legacyHash:c.legacyHash??null}}catch{return null}}function rS(e){const n=e.searchParams.get("atree");if(!n)return null;try{const s=aS(n);if(!s)return null;const i=JSON.parse(s),r=Kk.parse({version:i.v??i.version,selectedByClass:i.s??i.selectedByClass});return{version:r.version??null,selectedByClass:r.selectedByClass}}catch{return null}}function Qk(e=window.location){const n=new URL(e.href),s=n.hash?n.hash.slice(1):null;return{search:iS(n),workbenchPatch:lS(n),legacyHash:s||null,mode:n.searchParams.get("mode"),abilityTree:rS(n)}}function oS(e){const n={};for(const[r,c]of Object.entries(e.slots)){const u=lh[r]??r;n[u]=c}const s={};for(const[r,c]of Object.entries(e.locks))c&&(s[lh[r]??r]=!0);const i={s:n,k:Object.keys(s).length>0?s:void 0,l:e.level,c:e.characterClass,h:e.legacyHash};return sS(JSON.stringify(i))}function _0(e){const n=new URL(window.location.origin+window.location.pathname),s=n.searchParams;s.set("wb",oS(e.workbenchSnapshot)),e.abilityTreeState&&Object.keys(e.abilityTreeState.selectedByClass??{}).length>0?s.set("atree",sS(JSON.stringify({v:e.abilityTreeState.version??null,s:e.abilityTreeState.selectedByClass}))):s.delete("atree"),e.mode?s.set("mode",e.mode):s.delete("mode");const i=e.legacyHash??e.workbenchSnapshot.legacyHash;n.hash=i?`#${i}`:"",e.replace?window.history.replaceState({},"",n):window.history.pushState({},"",n)}const ca={legacyBaseDps:1,legacyEhp:.7,dpsProxy:1,spellProxy:0,meleeProxy:0,ehpProxy:.6,speed:.4,sustain:.35,skillPointTotal:.15,reqTotalPenalty:.2},Jn={characterClass:null,level:106,mustIncludeIds:[],excludedIds:[],lockedSlots:{},target:{},allowedTiers:[],requiredMajorIds:[],excludedMajorIds:[],weaponAttackSpeeds:[],attackSpeedConstraintMode:"or",skillpointFeasibilityMode:"no_tomes",minPowderSlots:null,onlyPinnedItems:!1,weights:ca,topN:50,topKPerSlot:100,beamWidth:500,maxStates:18e4,useExhaustiveSmallPool:!0,exhaustiveStateLimit:4e5,allowRestricted:!0};function Jk(e){return e.aggregated.hprTotal*.9+e.aggregated.mr*14+e.aggregated.ms*10+e.aggregated.ls*9}function eA(e,n){let s=0;const{target:i}=n;return typeof i.minLegacyBaseDps=="number"&&e.derived.legacyBaseDps<i.minLegacyBaseDps&&(s+=(i.minLegacyBaseDps-e.derived.legacyBaseDps)*4),typeof i.minLegacyEhp=="number"&&e.derived.legacyEhp<i.minLegacyEhp&&(s+=(i.minLegacyEhp-e.derived.legacyEhp)*.8),typeof i.minDpsProxy=="number"&&e.derived.dpsProxy<i.minDpsProxy&&(s+=(i.minDpsProxy-e.derived.dpsProxy)*4),typeof i.minEhpProxy=="number"&&e.derived.ehpProxy<i.minEhpProxy&&(s+=(i.minEhpProxy-e.derived.ehpProxy)*1.1),typeof i.minMr=="number"&&e.aggregated.mr<i.minMr&&(s+=(i.minMr-e.aggregated.mr)*45),typeof i.minMs=="number"&&e.aggregated.ms<i.minMs&&(s+=(i.minMs-e.aggregated.ms)*35),typeof i.minSpeed=="number"&&e.aggregated.speed<i.minSpeed&&(s+=(i.minSpeed-e.aggregated.speed)*12),typeof i.minSkillPointTotal=="number"&&e.derived.skillPointTotal<i.minSkillPointTotal&&(s+=(i.minSkillPointTotal-e.derived.skillPointTotal)*15),typeof i.maxReqTotal=="number"&&e.derived.reqTotal>i.maxReqTotal&&(s+=(e.derived.reqTotal-i.maxReqTotal)*8),s}function tA(e,n){const s=n.target.customNumericRanges??[];if(s.length===0)return 0;const i=8,r=4;let c=0;for(const u of s){const d=u.key?.trim();if(!d)continue;const m=e.aggregated,p=e.derived,v=m[d]??p[d]??0;typeof u.min=="number"&&(c+=v*i),typeof u.max=="number"&&v>u.max&&(c-=(v-u.max)*r)}return c}function $c(e,n,s){const i=Jk(e),r=e.derived.reqTotal*n.reqTotalPenalty,c=eA(e,s),u=(s.target.customNumericRanges??[]).filter(y=>typeof y.min=="number").length,d=u>0?Math.max(.15,1-u*.2):1,m=tA(e,s),p={legacyBaseDps:e.derived.legacyBaseDps*n.legacyBaseDps*d,legacyEhp:e.derived.legacyEhp*n.legacyEhp*d,dpsProxy:e.derived.dpsProxy*n.dpsProxy*d,spellProxy:e.derived.spellProxy*n.spellProxy*d,meleeProxy:e.derived.meleeProxy*n.meleeProxy*d,ehpProxy:e.derived.ehpProxy*n.ehpProxy*d,speed:e.aggregated.speed*n.speed,sustain:i*n.sustain,skillPointTotal:e.derived.skillPointTotal*n.skillPointTotal,reqPenalty:r,thresholdPenalty:c};return{score:p.legacyBaseDps+p.legacyEhp+p.dpsProxy+p.spellProxy+p.meleeProxy+p.ehpProxy+p.speed+p.sustain+p.skillPointTotal+m-p.reqPenalty-p.thresholdPenalty,breakdown:p}}function cS(e,n,s,i){if(!e.length||i<=0)return[];const r=[...e].sort((u,d)=>d.roughScore-u.roughScore).slice(0,i),c=[];for(const u of r){const d=Xi({slots:u.slots,level:s.level,characterClass:s.characterClass},n),{score:m,breakdown:p}=$c(d,s.weights,s);c.push({slots:{...u.slots},score:m,scoreBreakdown:p,summary:d})}return c}function nA(e,n){const s=new Map;for(const i of nt){const r=e[i];if(r==null)continue;const c=n.itemSetName.get(r);c&&s.set(c,(s.get(c)??0)+1)}return s}function Hc(e,n,s){const i=s.itemSetName.get(e);if(!i)return!1;const r=s.setsMeta.get(i);if(!r)return!1;let c=0;for(const u of nt){const d=n[u];d!=null&&s.itemSetName.get(d)===i&&c++}return r.illegalCounts.includes(c+1)}const E0=["str","dex","int","def","agi"],Ia=["SUPER_SLOW","VERY_SLOW","SLOW","NORMAL","FAST","VERY_FAST","SUPER_FAST"];function Zc(e){return Yx(e.skillpointFeasibilityMode,e.level)}function Ba(e){return Math.round(e.numeric.atkTier||0)}function qh(e,n){switch(n){case"str":return Math.max(0,e.numeric.spStr);case"dex":return Math.max(0,e.numeric.spDex);case"int":return Math.max(0,e.numeric.spInt);case"def":return Math.max(0,e.numeric.spDef);case"agi":return Math.max(0,e.numeric.spAgi)}}function aA(e,n){switch(n){case"str":return e.numeric.reqStr;case"dex":return e.numeric.reqDex;case"int":return e.numeric.reqInt;case"def":return e.numeric.reqDef;case"agi":return e.numeric.reqAgi}}function sA(e,n){if(n.length===0)return 0;let s=0;for(const i of n)s+=qh(e,i)*10,s-=Math.max(0,aA(e,i))*.7;return s-=Math.max(0,e.roughScoreFields.reqTotal)*.12,s}function na(e){return{...e}}function iA(e,n){const s=e.weapon;if(s==null)return null;const i=n.itemsById.get(s);if(!i)return null;const r=Ia.indexOf(i.atkSpd);if(r<0)return null;let c=0;for(const d of nt){const m=e[d];if(m==null)continue;const p=n.itemsById.get(m);p&&(c+=Ba(p))}const u=Math.max(0,Math.min(Ia.length-1,r+c));return Ia[u]}function Uh(e,n){let s=0;for(const i of nt){const r=e[i];if(r==null)continue;const c=n.itemsById.get(r);c&&(s+=Ba(c))}return s}function lA(e,n,s){if(s.weaponAttackSpeeds.length===0)return null;const i=e.weapon;if(i==null)return null;const r=n.itemsById.get(i);if(!r)return null;const c=Ia.indexOf(r.atkSpd);if(c<0)return null;const u=[...new Set(s.weaponAttackSpeeds.map(v=>Ia.indexOf(v)).filter(v=>v>=0))].sort((v,y)=>v-y);if(u.length===0)return null;const d=Uh(e,n),m=Math.max(0,Math.min(Ia.length-1,c+d));let p=0;if(!u.includes(m)){const v=u.reduce((y,b)=>Math.abs(b-m)<Math.abs(y-m)?b:y,u[0]);p=v>m?1:v<m?-1:0}return{baseSpeedIndex:c,fixedAtkTierTotal:d,allowedFinalIndices:u,allowedFinalIndexSet:new Set(u),preferredDirection:p}}function Sc(e,n,s){const i=new Array(e.length+1).fill(0),r=new Array(e.length+1).fill(0);for(let c=e.length-1;c>=0;c--){const u=n.get(e[c])??[];let d=0,m=0;if(u.length>0){d=1/0,m=-1/0;for(const p of u){const v=s.itemsById.get(p.id),y=v?Ba(v):0;y<d&&(d=y),y>m&&(m=y)}Number.isFinite(d)||(d=0),Number.isFinite(m)||(m=0)}i[c]=i[c+1]+d,r[c]=r[c+1]+m}return{minSuffix:i,maxSuffix:r}}function rA(e,n,s,i){const r=e.fixedAtkTierTotal+n+s,c=e.fixedAtkTierTotal+n+i,u=Math.min(r,c),d=Math.max(r,c);for(let m=u;m<=d;m++){const p=Math.max(0,Math.min(Ia.length-1,e.baseSpeedIndex+m));if(e.allowedFinalIndexSet.has(p))return!0}return!1}function ms(e,n,s=0,i=0){if(!e||!e.preferredDirection)return 0;const r=e.fixedAtkTierTotal+(n??0),c=Math.max(0,Math.min(Ia.length-1,e.baseSpeedIndex+r+s)),u=Math.max(0,Math.min(Ia.length-1,e.baseSpeedIndex+r+i)),d=Math.min(c,u),m=Math.max(c,u);let p=1/0,v=0;for(let b=d;b<=m;b++){let S=1/0;for(const _ of e.allowedFinalIndices){const E=Math.abs(_-b);E<S&&(S=E)}S<p&&(p=S),S>v&&(v=S)}if(!Number.isFinite(p)||v===0)return 0;const y=e.preferredDirection>0?d:-m;return-v*1e3-p*100+y}function oA(e,n,s,i){const{target:r}=n,c=Fc(n,{includeAttackTier:!1}),u=[];if(typeof r.minLegacyBaseDps=="number"&&e.derived.legacyBaseDps<r.minLegacyBaseDps&&u.push(`minLegacyBaseDps (${e.derived.legacyBaseDps} < ${r.minLegacyBaseDps})`),typeof r.minLegacyEhp=="number"&&e.derived.legacyEhp<r.minLegacyEhp&&u.push(`minLegacyEhp (${e.derived.legacyEhp} < ${r.minLegacyEhp})`),typeof r.minDpsProxy=="number"&&e.derived.dpsProxy<r.minDpsProxy&&u.push(`minDpsProxy (${e.derived.dpsProxy} < ${r.minDpsProxy})`),typeof r.minEhpProxy=="number"&&e.derived.ehpProxy<r.minEhpProxy&&u.push(`minEhpProxy (${e.derived.ehpProxy} < ${r.minEhpProxy})`),typeof r.minMr=="number"&&e.aggregated.mr<r.minMr&&u.push(`minMr (${e.aggregated.mr} < ${r.minMr})`),typeof r.minMs=="number"&&e.aggregated.ms<r.minMs&&u.push(`minMs (${e.aggregated.ms} < ${r.minMs})`),typeof r.minSpeed=="number"&&e.aggregated.speed<r.minSpeed&&u.push(`minSpeed (${e.aggregated.speed} < ${r.minSpeed})`),typeof r.minSkillPointTotal=="number"&&e.derived.skillPointTotal<r.minSkillPointTotal&&u.push(`minSkillPointTotal (${e.derived.skillPointTotal} < ${r.minSkillPointTotal})`),typeof r.maxReqTotal=="number"&&e.derived.reqTotal>r.maxReqTotal&&u.push(`maxReqTotal (${e.derived.reqTotal} > ${r.maxReqTotal})`),c.length>0&&s&&i)for(const d of c){const m=d.key;let p=0;for(const v of nt){const y=s[v];if(y==null)continue;const b=i.itemsById.get(y);b&&(p+=b.numericIndex[m]??0)}typeof d.min=="number"&&p<d.min&&u.push(`${m} (${p} < ${d.min})`),typeof d.max=="number"&&p>d.max&&u.push(`${m} (${p} > ${d.max})`)}return u.length>0?{ok:!1,failedChecks:u}:{ok:!0}}function $h(e,n,s,i){const r=[...new Set(s.mustIncludeIds)];for(const m of r){let p=!1;for(const v of nt)if(e[v]===m){p=!0;break}if(!p)return{ok:!1,reason:"item",failedChecks:[`mustIncludeMissing (${m})`]}}for(const m of nt){const p=e[m];if(p==null)continue;const v=n.itemsById.get(p);if(!v)return{ok:!1,reason:"item"};if(!Hh(v,s))return{ok:!1,reason:"item"}}const c=nA(e,n);for(const[m,p]of c){const v=n.setsMeta.get(m);if(v&&v.illegalCounts.includes(p))return{ok:!1,reason:"item"}}const u=bA({constraints:s,slots:e,catalog:n,atkTierRequirement:hS(fS(s))});if(u.configured&&!u.ok)return{ok:!1,reason:"attackSpeed",failedChecks:u.failedChecks};const d=oA(i,s,e,n);return d.ok?{ok:!0}:{ok:!1,reason:"thresholds",failedChecks:d.failedChecks}}function Hh(e,n){return!(!n.allowRestricted&&(e.restricted||e.deprecated)||e.level>n.level||!yb(e,n.characterClass)||n.excludedIds.includes(e.id)||n.allowedTiers.length>0&&!n.allowedTiers.includes(e.tier)||n.minPowderSlots!=null&&e.powderSlots<n.minPowderSlots||n.excludedMajorIds.length>0&&n.excludedMajorIds.some(s=>e.majorIds.includes(s)))}const Aa=2.5;function rh(e,n){const s={...n};return typeof e.minLegacyBaseDps=="number"&&(s.legacyBaseDps=Math.max(s.legacyBaseDps,ca.legacyBaseDps*Aa)),typeof e.minLegacyEhp=="number"&&(s.legacyEhp=Math.max(s.legacyEhp,ca.legacyEhp*Aa)),typeof e.minDpsProxy=="number"&&(s.dpsProxy=Math.max(s.dpsProxy,ca.dpsProxy*Aa)),typeof e.minEhpProxy=="number"&&(s.ehpProxy=Math.max(s.ehpProxy,ca.ehpProxy*Aa)),(typeof e.minMr=="number"||typeof e.minMs=="number")&&(s.sustain=Math.max(s.sustain,ca.sustain*Aa)),typeof e.minSpeed=="number"&&(s.speed=Math.max(s.speed,ca.speed*Aa)),typeof e.minSkillPointTotal=="number"&&(s.skillPointTotal=Math.max(s.skillPointTotal,ca.skillPointTotal*Aa)),typeof e.maxReqTotal=="number"&&(s.reqTotalPenalty=Math.max(s.reqTotalPenalty,ca.reqTotalPenalty*Aa)),(e.customNumericRanges?.length??0)>0&&(s.sustain=Math.max(s.sustain,ca.sustain*Aa)),s}const cA=3,uA=2,dA=14;function fA(e,n){const s=n.target.customNumericRanges??[],i=s.some(p=>typeof p.min=="number"),r=s.filter(p=>typeof p.min=="number").length,c=i?Math.max(.15,1-r*.2):1,u=(n.weights.legacyEhp+n.weights.ehpProxy)*c;let d=e.numeric.baseDps*n.weights.legacyBaseDps*c+e.roughScoreFields.ehpProxy*u+e.roughScoreFields.offense*n.weights.dpsProxy*c+e.numeric.spd*n.weights.speed+e.roughScoreFields.utility*n.weights.sustain+e.roughScoreFields.skillPointTotal*n.weights.skillPointTotal-e.roughScoreFields.reqTotal*n.weights.reqTotalPenalty;const m=i?dA:cA;for(const p of s){const v=p.key?.trim();if(!v)continue;const y=e.numericIndex[v]??0;typeof p.min=="number"&&(d+=y*m),typeof p.max=="number"&&(d-=y*uA)}return d}function Ki(e){const n=e.ring1??0,s=e.ring2??0,[i,r]=n<=s?[n,s]:[s,n];return[e.helmet??0,e.chestplate??0,e.leggings??0,e.boots??0,i,r,e.bracelet??0,e.necklace??0,e.weapon??0].join("|")}function uS(e,n,s,i=.6){const r=Math.max(1,s),c=[],u=new Set,d=Math.max(1,Math.min(r,Math.round(r*i)));let m=0,p=0;const v=y=>{const b=`${y.orderIndex}|${Ki(y.slots)}`;return u.has(b)?!1:(u.add(b),c.push(y),!0)};for(;c.length<r&&(m<e.length||p<n.length);){if(c.length<d&&m<e.length){v(e[m]),m++;continue}if(p<n.length){v(n[p]),p++;continue}if(m<e.length){v(e[m]),m++;continue}break}return c}function dS(e,n){return da(n)===e.category}function hA(e,n,s){const i=na(e),r=[...new Set(s.mustIncludeIds)];for(const c of r){const u=n.itemsById.get(c);if(!u)return{slots:i,ok:!1,reasonCode:"must_include_conflict",detail:`Must-include item ${c} does not exist in catalog.`};if(!Hh(u,s))return{slots:i,ok:!1,reasonCode:"must_include_conflict",detail:`Must-include item ${u.displayName} is incompatible with current hard filters (class/level/tier/exclusions).`};if(nt.some(v=>i[v]===u.id))continue;const p=nt.filter(v=>i[v]==null&&dS(u,v))[0];if(!p)return{slots:i,ok:!1,reasonCode:"must_include_conflict",detail:`No free ${u.category} slot available to place must-include item ${u.displayName}.`};i[p]=u.id}return{slots:i,ok:!0}}function mA(e,n){const s={str:0,dex:0,int:0,def:0,agi:0};for(const r of nt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);u&&(s.str=Math.max(s.str,u.numeric.reqStr),s.dex=Math.max(s.dex,u.numeric.reqDex),s.int=Math.max(s.int,u.numeric.reqInt),s.def=Math.max(s.def,u.numeric.reqDef),s.agi=Math.max(s.agi,u.numeric.reqAgi))}const i=E0.filter(r=>s[r]>100).sort((r,c)=>s[c]-s[r]);return i.length>0?i:E0.filter(r=>s[r]>=70).sort((r,c)=>s[c]-s[r]).slice(0,2)}function gA(e,n,s){if(s.length===0)return[];const i={str:0,dex:0,int:0,def:0,agi:0};for(const r of nt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);u&&(i.str=Math.max(i.str,u.numeric.reqStr),i.dex=Math.max(i.dex,u.numeric.reqDex),i.int=Math.max(i.int,u.numeric.reqInt),i.def=Math.max(i.def,u.numeric.reqDef),i.agi=Math.max(i.agi,u.numeric.reqAgi))}return s.map(r=>Math.max(0,i[r]-100))}function T0(e,n){return n.map(s=>qh(e,s))}function sr(e,n){if(e.length===0)return n.slice();const s=new Array(e.length);for(let i=0;i<e.length;i++)s[i]=(e[i]??0)+(n[i]??0);return s}function pA(e,n,s){for(let i=0;i<s.length;i++)if((e[i]??0)+(n[i]??0)<s[i])return!1;return!0}function N0(e,n){let s=0;for(let i=0;i<n.length;i++)s+=Math.max(0,n[i]-(e[i]??0));return s}function wc(e,n){if(!e||n.length===0)return 0;let s=0;for(let i=0;i<n.length;i++){const r=e[i]??0,c=n[i];typeof c.min=="number"&&r<c.min&&(s+=c.min-r),typeof c.max=="number"&&r>c.max&&(s+=r-c.max)}return s}function M0(e,n,s,i){if(i.length===0)return 0;const r=n.get(e)??[];let c=0;for(const u of r){const d=s.itemsById.get(u.id);if(!d)continue;let m=0;for(const p of i)m+=qh(d,p);m>c&&(c=m)}return c}function Fc(e,n={}){const s=n.includeAttackTier??!0;return(e.target.customNumericRanges??[]).map(i=>({key:(i.key??"").trim(),min:typeof i.min=="number"?i.min:void 0,max:typeof i.max=="number"?i.max:void 0})).filter(i=>i.key&&(typeof i.min=="number"||typeof i.max=="number")).filter(i=>s||i.key!=="atkTier")}function fS(e){return Fc(e,{includeAttackTier:!0}).filter(n=>n.key==="atkTier")}function oh(e){const n=e.attackSpeedConstraintMode==="or"&&e.weaponAttackSpeeds.length>0;return Fc(e,{includeAttackTier:!n})}function hS(e){if(e.length===0)return{hasConstraint:!1,minAllowed:Number.NEGATIVE_INFINITY,maxAllowed:Number.POSITIVE_INFINITY,rows:[]};let n=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;for(const i of e)typeof i.min=="number"&&(n=Math.max(n,i.min)),typeof i.max=="number"&&(s=Math.min(s,i.max));return{hasConstraint:!0,minAllowed:n,maxAllowed:s,rows:e}}function vA(e,n){return n.hasConstraint?e>=n.minAllowed&&e<=n.maxAllowed:!1}function yA(e,n,s,i,r){if(!e.hasConstraint)return!1;const c=n+s+Math.min(i,r),u=n+s+Math.max(i,r);return c<=e.maxAllowed&&u>=e.minAllowed}function bA(e){const{constraints:n,slots:s,catalog:i,atkTierRequirement:r}=e,c=n.weaponAttackSpeeds.length>0,u=r.hasConstraint;if(!c&&!u)return{configured:!1,ok:!0};const d=[];let m=!1;if(c){const b=iA(s,i);m=!!(b&&n.weaponAttackSpeeds.includes(b)),m||d.push(`attackSpeed (expected ${n.weaponAttackSpeeds.join("/")} )`)}let p=!1;if(u){const b=Uh(s,i);if(p=vA(b,r),!p){const S=Number.isFinite(r.minAllowed)?r.minAllowed:"-inf",_=Number.isFinite(r.maxAllowed)?r.maxAllowed:"+inf";d.push(`atkTier (${b} not in [${S}, ${_}])`)}}const v=n.attackSpeedConstraintMode;return(c&&u?v==="and"?m&&p:m||p:c?m:p)?{configured:!0,ok:!0}:{configured:!0,ok:!1,failedChecks:d}}function _c(e){const{constraints:n,attackSpeedCtx:s,atkTierRequirement:i,fixedAtkTierTotal:r,partialAssignedAtkTier:c,remainingMinAtkTier:u,remainingMaxAtkTier:d}=e,m=n.weaponAttackSpeeds.length>0,p=i.hasConstraint;if(!m&&!p)return!0;const v=m?s?rA(s,c,u,d):!0:!1,y=p?yA(i,r,c,u,d):!1;return m&&p?n.attackSpeedConstraintMode==="and"?v&&y:v||y:m?v:y}function Wo(e,n,s){const i=n.itemsById.get(e.id);return i?i.numericIndex[s]??0:0}function Ec(e,n,s){const i=s.map(()=>0);if(s.length===0)return i;for(const r of nt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);if(u)for(let d=0;d<s.length;d++)i[d]+=u.numericIndex[s[d]]??0}return i}function ch(e){const{slotOrder:n,candidatePools:s,catalog:i,keys:r}=e,c=Array.from({length:n.length+1},()=>r.map(()=>0)),u=Array.from({length:n.length+1},()=>r.map(()=>0));if(r.length===0)return{maxSuffix:c,minSuffix:u};for(let d=n.length-1;d>=0;d--){const m=s.get(n[d])??[],p=r.map(()=>Number.NEGATIVE_INFINITY),v=r.map(()=>Number.POSITIVE_INFINITY);for(const y of m){const b=i.itemsById.get(y.id);if(b)for(let S=0;S<r.length;S++){const _=b.numericIndex[r[S]]??0;_>p[S]&&(p[S]=_),_<v[S]&&(v[S]=_)}}for(let y=0;y<r.length;y++){const b=Number.isFinite(p[y])?p[y]:0,S=Number.isFinite(v[y])?v[y]:0;c[d][y]=c[d+1][y]+b,u[d][y]=u[d+1][y]+S}}return{maxSuffix:c,minSuffix:u}}function xA(e,n,s,i,r=[]){const c=[],u=Fc(s);for(const M of n.items)dS(M,e)&&(i&&!i.has(M.id)||Hh(M,s)&&c.push({id:M.id,rough:fA(M,s),reqTotal:M.roughScoreFields.reqTotal,skillPointTotal:M.roughScoreFields.skillPointTotal,utility:M.roughScoreFields.utility+M.numeric.spd*.8,level:M.level,atkTier:Ba(M),spStr:M.numeric.spStr,spDex:M.numeric.spDex,spInt:M.numeric.spInt,spDef:M.numeric.spDef,spAgi:M.numeric.spAgi,supportFocus:sA(M,r)}));const d=[...c].sort((M,j)=>M.rough!==j.rough?j.rough-M.rough:M.id-j.id),m=[...c].sort((M,j)=>M.reqTotal!==j.reqTotal?M.reqTotal-j.reqTotal:M.level!==j.level?M.level-j.level:M.id-j.id),p=[...c].sort((M,j)=>M.skillPointTotal!==j.skillPointTotal?j.skillPointTotal-M.skillPointTotal:M.reqTotal!==j.reqTotal?M.reqTotal-j.reqTotal:M.id-j.id),v=[...c].sort((M,j)=>M.utility!==j.utility?j.utility-M.utility:M.reqTotal!==j.reqTotal?M.reqTotal-j.reqTotal:M.id-j.id),y=s.weaponAttackSpeeds.length>0?[...c].sort((M,j)=>{const D=Math.max(0,M.atkTier),Z=Math.max(0,j.atkTier);return D!==Z?Z-D:M.atkTier!==j.atkTier?j.atkTier-M.atkTier:M.reqTotal!==j.reqTotal?M.reqTotal-j.reqTotal:M.skillPointTotal!==j.skillPointTotal?j.skillPointTotal-M.skillPointTotal:M.id-j.id}):[],b=r.length>0?[...c].sort((M,j)=>M.supportFocus!==j.supportFocus?j.supportFocus-M.supportFocus:M.reqTotal!==j.reqTotal?M.reqTotal-j.reqTotal:M.skillPointTotal!==j.skillPointTotal?j.skillPointTotal-M.skillPointTotal:M.id-j.id):[],S=r.map(M=>[...c].sort((j,D)=>{const Z=M==="str"?j.spStr:M==="dex"?j.spDex:M==="int"?j.spInt:M==="def"?j.spDef:j.spAgi,le=M==="str"?D.spStr:M==="dex"?D.spDex:M==="int"?D.spInt:M==="def"?D.spDef:D.spAgi;return Z!==le?le-Z:j.reqTotal!==D.reqTotal?j.reqTotal-D.reqTotal:j.supportFocus!==D.supportFocus?D.supportFocus-j.supportFocus:j.id-D.id})),_=u.filter(M=>typeof M.min=="number").map(M=>[...c].sort((j,D)=>{const Z=Wo(j,n,M.key),le=Wo(D,n,M.key);return Z!==le?le-Z:j.reqTotal!==D.reqTotal?j.reqTotal-D.reqTotal:j.skillPointTotal!==D.skillPointTotal?D.skillPointTotal-j.skillPointTotal:j.id-D.id})),E=u.filter(M=>typeof M.max=="number").map(M=>[...c].sort((j,D)=>{const Z=Wo(j,n,M.key),le=Wo(D,n,M.key);return Z!==le?Z-le:j.reqTotal!==D.reqTotal?j.reqTotal-D.reqTotal:j.skillPointTotal!==D.skillPointTotal?D.skillPointTotal-j.skillPointTotal:j.id-D.id})),C=Math.max(10,s.topKPerSlot),k=Math.min(140,Math.max(40,Math.floor(C*.8))),R=Math.min(c.length,C+k+(r.length>0?Math.min(60,r.length*12):0)+Math.min(80,u.length*14)),z=new Map,B=Math.min(12,Math.floor(C*.4),d.length);for(let M=0;M<B;M++){const j=d[M];z.set(j.id,{id:j.id,rough:j.rough})}const q=[{list:d,remaining:Math.max(0,C-B),cursor:0},{list:m,remaining:Math.floor(k*.28),cursor:0},{list:p,remaining:Math.floor(k*.24),cursor:0},{list:v,remaining:Math.floor(k*.18),cursor:0}];y.length>0&&q.push({list:y,remaining:Math.max(18,Math.floor(k*.22)),cursor:0}),b.length>0&&q.push({list:b,remaining:Math.max(16,Math.floor(k*.2)),cursor:0});for(const M of S)q.push({list:M,remaining:10,cursor:0});for(const M of _)q.push({list:M,remaining:35,cursor:0});for(const M of E)q.push({list:M,remaining:20,cursor:0});for(;z.size<R;){let M=!1;for(const j of q)if(!(j.remaining<=0))for(;j.cursor<j.list.length;){const D=j.list[j.cursor++];if(!z.has(D.id)){z.set(D.id,{id:D.id,rough:D.rough}),j.remaining--,M=!0;break}}if(!M)break}if(z.size<R)for(const M of d){if(z.size>=R)break;z.has(M.id)||z.set(M.id,{id:M.id,rough:M.rough})}return[...z.values()]}function SA(e){const n={};for(const s of nt){const i=da(s),r=new Set(e.binsByCategory[i]??[]),c=e.slots[s];c!=null&&r.add(c),n[s]=r}return n}function Zh(e,n,s){if(s.length===0)return!0;const i=new Set;for(const r of nt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);if(u)for(const d of u.majorIds)s.includes(d)&&i.add(d)}return s.every(r=>i.has(r))}function mS(e,n){const s=new Array(e.length+1).fill(0);for(let i=e.length-1;i>=0;i--){const r=e[i],c=n.get(r)??[];let u=0;for(const d of c)d.rough>u&&(u=d.rough);s[i]=s[i+1]+u}return s}function gS(e){const{poolSize:n,beamSize:s,remainingStages:i,processedStates:r,maxStates:c}=e;if(n<=0)return 0;const u=Math.max(0,c-r),d=Math.max(1,s*Math.max(1,i)),m=Math.floor(u/d),p=Math.max(8,Math.min(96,m));return Math.min(n,p)}function wA(e,n,s){let i=1;for(const r of e){const c=n.get(r)?.length??0;if(c===0)return 0;if(i*=c,i>s)return i}return i}function j0(e){const{beam:n,catalog:s,constraints:i,skillpointFeasibilityOptions:r,signal:c}=e,u=r??Zc(i),d=[],m=new Set,p={majorIds:0,spInvalid:0,duplicate:0,hardConstraints:0,hardAttackSpeed:0,hardThresholds:0,hardItem:0,thresholdFailureExample:void 0};for(const v of n){if(c?.aborted)throw new DOMException("Auto build cancelled","AbortError");if(!Zh(v.slots,s,i.requiredMajorIds)){p.majorIds++;continue}const y=Xi({slots:v.slots,level:i.level,characterClass:i.characterClass},s,{skillpointFeasibility:u});if(!y.derived.skillpointFeasible){p.spInvalid++;continue}const b=$h(v.slots,s,i,y);if(!b.ok){p.hardConstraints++,b.reason==="attackSpeed"?p.hardAttackSpeed++:b.reason==="thresholds"?(p.hardThresholds++,p.thresholdFailureExample===void 0&&b.failedChecks?.length&&(p.thresholdFailureExample=b.failedChecks[0])):p.hardItem++;continue}const S=Ki(v.slots);if(m.has(S)){p.duplicate++;continue}const{score:_,breakdown:E}=$c(y,i.weights,i);m.add(S),d.push({slots:na(v.slots),score:_,scoreBreakdown:E,summary:y})}return d.sort((v,y)=>{if(v.score!==y.score)return y.score-v.score;for(const b of nt){const S=v.slots[b]??0,_=y.slots[b]??0;if(S!==_)return S-_}return 0}),{candidates:d,rejectStats:p}}function _A(e){const{slotOrder:n,candidatePools:s,baseSlots:i,catalog:r,constraints:c,focusStats:u,attackSpeedCtx:d,atkTierRequirement:m,fixedAtkTierTotal:p,onProgress:v,signal:y}=e,b=Zc(c),S=mS(n,s),_=d||m.hasConstraint?Sc(n,s,r):null,E=gA(i,r,u),C=Array.from({length:n.length+1},()=>u.map(()=>0));for(let D=n.length-1;D>=0;D--){const Z=s.get(n[D])??[],le=u.map(()=>0);for(const de of Z){const ne=r.itemsById.get(de.id);if(!ne)continue;const ce=T0(ne,u);for(let $=0;$<ce.length;$++)ce[$]>le[$]&&(le[$]=ce[$])}C[D]=sr(C[D+1],le)}const k=oh(c),R=k.map(D=>D.key),z=ch({slotOrder:n,candidatePools:s,catalog:r,keys:R}),B=Ec(i,r,R);let q=[{slots:na(i),orderIndex:0,roughScore:0,optimisticBound:S[0],feasibilityAssigned:0,focusSupport:u.map(()=>0),atkTierAssigned:0,customTotals:B}],M=0,j=!1;for(let D=0;D<n.length;D++){if(y?.aborted)throw new DOMException("Auto build cancelled","AbortError");const Z=n[D],le=s.get(Z)??[],de=[],ne=gS({poolSize:le.length,beamSize:q.length,remainingStages:n.length-D,processedStates:M,maxStates:c.maxStates});ne<=0&&(j=!0);for(const Y of q){let te=0;for(const A of le){if(te>=ne)break;if(M>=c.maxStates){j=!0;break}if(M++,te++,Hc(A.id,Y.slots,r))continue;const V=na(Y.slots);V[Z]=A.id;const N=r.itemsById.get(A.id),I=(Y.atkTierAssigned??0)+(N?Ba(N):0),J=sr(Y.focusSupport??u.map(()=>0),N?T0(N,u):u.map(()=>0)),oe=R.length>0?sr(Y.customTotals??R.map(()=>0),R.map(ye=>N?N.numericIndex[ye]??0:0)):void 0;if(_&&!_c({constraints:c,attackSpeedCtx:d??null,atkTierRequirement:m,fixedAtkTierTotal:p,partialAssignedAtkTier:I,remainingMinAtkTier:_.minSuffix[D+1],remainingMaxAtkTier:_.maxSuffix[D+1]})||u.length>0&&!pA(J,C[D+1],E))continue;if(k.length>0&&oe){let ye=!0;for(let xe=0;xe<k.length;xe++){const ge=k[xe],Ee=oe[xe];if(typeof ge.min=="number"&&Ee+z.maxSuffix[D+1][xe]<ge.min){ye=!1;break}if(typeof ge.max=="number"&&Ee+z.minSuffix[D+1][xe]>ge.max){ye=!1;break}}if(!ye)continue}const ue=Bc(V,r,c.level,b),re=Y.roughScore+A.rough;de.push({slots:V,orderIndex:D+1,roughScore:re,optimisticBound:re+S[D+1],feasibilityAssigned:ue.feasible?ue.assignedTotal:1/0,focusSupport:J,atkTierAssigned:I,customTotals:oe})}if(j)break}if(de.length===0)return v?.({phase:"diagnostics",processedStates:M,beamSize:q.length,totalSlots:n.length,expandedSlots:D,reasonCode:"search_pruned",detail:j?`Feasibility-first search exhausted state budget before completing slot ${Z}.`:`Feasibility-first search found no branches that can still satisfy high-skill requirements by slot ${Z}.`}),{beam:[],processedStates:M,stateBudgetHit:j};const ce=_?_.minSuffix[D+1]:0,$=_?_.maxSuffix[D+1]:0,X=[...de].sort((Y,te)=>{if(d){const N=ms(d,Y.atkTierAssigned,ce,$),I=ms(d,te.atkTierAssigned,ce,$);if(N!==I)return I-N}if(u.length>0){const N=N0(Y.focusSupport??[],E),I=N0(te.focusSupport??[],E);if(N!==I)return N-I}const A=Y.feasibilityAssigned??1/0,V=te.feasibilityAssigned??1/0;return A!==V?A-V:Y.optimisticBound!==te.optimisticBound?te.optimisticBound-Y.optimisticBound:Y.roughScore!==te.roughScore?te.roughScore-Y.roughScore:0}),L=[...de].sort((Y,te)=>{const A=wc(Y.customTotals,k),V=wc(te.customTotals,k);if(A!==V)return A-V;if(d){const N=ms(d,Y.atkTierAssigned,ce,$),I=ms(d,te.atkTierAssigned,ce,$);if(N!==I)return I-N}return te.optimisticBound-Y.optimisticBound});q=uS(X,L,Math.max(40,c.beamWidth)),v?.({phase:"beam-search",processedStates:M,beamSize:q.length,totalSlots:n.length,expandedSlots:D+1,detail:`feasibility-first | branchCap=${ne}${u.length>0?` | focus=${u.join("/")}`:""}${d?` | atkSpeed=${c.weaponAttackSpeeds.join("/")}`:""}`,previewCandidates:cS(q,r,c,2)})}return{beam:q,processedStates:M,stateBudgetHit:j}}function EA(e){const{slotOrder:n,candidatePools:s,baseSlots:i,catalog:r,constraints:c,signal:u,onProgress:d}=e,m=Zc(c),p=[],v=new Set;let y=0,b=0,S=0,_=0,E=0,C=0,k=0,R=0;const z=(B,q)=>{if(u?.aborted)throw new DOMException("Auto build cancelled","AbortError");if(y>c.maxStates)return;if(B>=n.length){if(!Zh(q,r,c.requiredMajorIds)){b++;return}const D=Xi({slots:q,level:c.level,characterClass:c.characterClass},r,{skillpointFeasibility:m});if(!D.derived.skillpointFeasible){S++;return}const Z=$h(q,r,c,D);if(!Z.ok){E++,Z.reason==="attackSpeed"?C++:Z.reason==="thresholds"?k++:R++;return}const le=Ki(q);if(v.has(le)){_++;return}v.add(le);const{score:de,breakdown:ne}=$c(D,c.weights,c);p.push({slots:na(q),score:de,scoreBreakdown:ne,summary:D});return}const M=n[B],j=s.get(M)??[];for(const D of j){if(y++,y>c.maxStates)break;Hc(D.id,q,r)||(q[M]=D.id,y%2e3===0&&d?.({phase:"exact-search",processedStates:y,beamSize:0,totalSlots:n.length,expandedSlots:B+1}),z(B+1,q))}q[M]=null};return z(0,na(i)),d?.({phase:"diagnostics",processedStates:y,beamSize:0,totalSlots:n.length,expandedSlots:n.length,detail:p.length>0?`Exact search produced ${p.length} valid builds. Rejected duplicates=${_}, SP-invalid=${S}, majorID=${b}, hard=${E} (speed=${C}, thresholds=${k}, item=${R}).`:`Exact search produced 0 valid builds. Rejected SP-invalid=${S}, majorID=${b}, duplicates=${_}, hard=${E} (speed=${C}, thresholds=${k}, item=${R}).`}),p.sort((B,q)=>{if(B.score!==q.score)return q.score-B.score;for(const M of nt){const j=B.slots[M]??0,D=q.slots[M]??0;if(j!==D)return j-D}return 0}),p.slice(0,Math.max(1,c.topN))}function TA(e){const{slotOrder:n,candidatePools:s,baseSlots:i,catalog:r,constraints:c,attackSpeedCtx:u,atkTierRequirement:d,fixedAtkTierTotal:m,customSpecs:p,customBounds:v,signal:y,timeCapMs:b=2e3}=e,S=Zc(c),_=new Map;for(const D of n){const Z=s.get(D)??[];_.set(D,[...Z].sort((le,de)=>le.rough!==de.rough?de.rough-le.rough:le.id-de.id))}const E=u||d.hasConstraint?Sc(n,s,r):null,C=p.map(D=>D.key),k=Ec(i,r,C),R=Date.now();let z=!1,B=0;const q=new Set,M=[],j=(D,Z,le,de)=>{if(z)return;if(y?.aborted)throw new DOMException("Auto build cancelled","AbortError");if(Date.now()-R>=b){z=!0;return}if(M.length>=Math.max(1,c.topN))return;if(D>=n.length){if(!Zh(Z,r,c.requiredMajorIds))return;const $=Xi({slots:Z,level:c.level,characterClass:c.characterClass},r,{skillpointFeasibility:S});if(!$.derived.skillpointFeasible||!$h(Z,r,c,$).ok)return;const L=Ki(Z);if(q.has(L))return;q.add(L);const{score:Y,breakdown:te}=$c($,c.weights,c);M.push({slots:na(Z),score:Y,scoreBreakdown:te,summary:$});return}const ne=n[D],ce=_.get(ne)??[];for(const $ of ce){if(z)break;if(B++,Hc($.id,Z,r))continue;const X=na(Z);X[ne]=$.id;const L=r.itemsById.get($.id),Y=le+(L?Ba(L):0);if(E&&!_c({constraints:c,attackSpeedCtx:u,atkTierRequirement:d,fixedAtkTierTotal:m,partialAssignedAtkTier:Y,remainingMinAtkTier:E.minSuffix[D+1],remainingMaxAtkTier:E.maxSuffix[D+1]}))continue;const te=C.length>0?sr(de??C.map(()=>0),C.map(V=>L?L.numericIndex[V]??0:0)):void 0;if(p.length>0&&te){let V=!0;for(let N=0;N<p.length;N++){const I=p[N],J=te[N];if(typeof I.min=="number"&&J+v.maxSuffix[D+1][N]<I.min){V=!1;break}if(typeof I.max=="number"&&J+v.minSuffix[D+1][N]>I.max){V=!1;break}}if(!V)continue}Bc(X,r,c.level,S).feasible&&j(D+1,X,Y,te)}};return j(0,na(i),0,k),M.sort((D,Z)=>D.score!==Z.score?Z.score-D.score:Ki(D.slots).localeCompare(Ki(Z.slots))),{candidates:M.slice(0,Math.max(1,c.topN)),processedStates:B,timedOut:z}}function pS(e){const{catalog:n,baseWorkbench:s,constraints:i,onProgress:r,signal:c,alreadyThresholdRescue:u}=e;if(c?.aborted)throw new DOMException("Auto build cancelled","AbortError");let d=na(s.slots);for(const A of nt)i.lockedSlots[A]||(d[A]=null);const m=hA(d,n,i);if(!m.ok)return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:0,expandedSlots:0,reasonCode:m.reasonCode??"must_include_conflict",detail:m.detail??"Must-include assignment failed before search started."}),[];d=m.slots;const p=mA(d,n),v=nt.filter(A=>d[A]==null),y=i.onlyPinnedItems?SA(s):null,b=new Map;for(const A of v)b.set(A,xA(A,n,i,y?.[A]??null,p));const S=lA(d,n,i),_=hS(fS(i)),E=Uh(d,n),C=oh(i),k=C.some(A=>typeof A.min=="number"),R=[...v].sort((A,V)=>{if(S?.preferredDirection){const J=b.get(A)??[],oe=b.get(V)??[],ue=J.reduce((ye,xe)=>{const ge=n.itemsById.get(xe.id);if(!ge)return ye;const Ee=Ba(ge),Be=S.preferredDirection>0?Math.max(0,Ee):Math.max(0,-Ee);return Math.max(ye,Be)},0),re=oe.reduce((ye,xe)=>{const ge=n.itemsById.get(xe.id);if(!ge)return ye;const Ee=Ba(ge),Be=S.preferredDirection>0?Math.max(0,Ee):Math.max(0,-Ee);return Math.max(ye,Be)},0);if(ue!==re)return re-ue}if(p.length>0){const J=M0(A,b,n,p),oe=M0(V,b,n,p);if(J!==oe)return oe-J}if(k){const J=["ring1","ring2","bracelet","necklace"],oe=J.includes(A),ue=J.includes(V);if(oe!==ue)return oe?-1:1}const N=b.get(A)?.length??0,I=b.get(V)?.length??0;return N!==I?N-I:A.localeCompare(V)}),z=mS(R,b);if(R.some(A=>(b.get(A)?.length??0)===0)){const A=R.find(V=>(b.get(V)?.length??0)===0);return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"empty_pool",detail:A?`No candidate items available for slot ${A} under current hard filters.`:"One or more slots have empty candidate pools."}),[]}if(_.hasConstraint&&_.minAllowed>_.maxAllowed)return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"unsat_attack_target",detail:`Attack target is unsatisfiable: atkTier min (${_.minAllowed}) exceeds atkTier max (${_.maxAllowed}).`}),[];if(C.length>0){const A=C.map(I=>I.key),V=ch({slotOrder:R,candidatePools:b,catalog:n,keys:A}),N=Ec(d,n,A);for(let I=0;I<C.length;I++){const J=C[I],oe=N[I]+V.minSuffix[0][I],ue=N[I]+V.maxSuffix[0][I];if(typeof J.min=="number"&&ue<J.min)return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"unsat_threshold",detail:`Unsatisfiable threshold: ${J.key} min ${J.min} is above maximum reachable total ${ue}.`}),[];if(typeof J.max=="number"&&oe>J.max)return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"unsat_threshold",detail:`Unsatisfiable threshold: ${J.key} max ${J.max} is below minimum reachable total ${oe}.`}),[]}}const B=S||_.hasConstraint?Sc(R,b,n):null;if(B&&!_c({constraints:i,attackSpeedCtx:S??null,atkTierRequirement:_,fixedAtkTierTotal:E,partialAssignedAtkTier:0,remainingMinAtkTier:B.minSuffix[0],remainingMaxAtkTier:B.maxSuffix[0]}))return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"unsat_attack_target",detail:"Attack-speed / atkTier target cannot be reached from current candidate pools."}),[];const q=wA(R,b,i.exhaustiveStateLimit+1);if(i.useExhaustiveSmallPool&&R.length>0&&q>0&&q<=i.exhaustiveStateLimit){r?.({phase:"exact-search",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0});const A={...i,maxStates:Math.max(i.maxStates,i.exhaustiveStateLimit)};return EA({slotOrder:R,candidatePools:b,baseSlots:d,catalog:n,constraints:A,signal:c,onProgress:r})}const M=oh(i),j=M.map(A=>A.key),D=ch({slotOrder:R,candidatePools:b,catalog:n,keys:j});let Z=[{slots:d,orderIndex:0,roughScore:0,optimisticBound:z[0],atkTierAssigned:0,customTotals:Ec(d,n,j)}];const le=S||_.hasConstraint?Sc(R,b,n):null;let de=0,ne=!1;for(let A=0;A<R.length;A++){if(c?.aborted)throw new DOMException("Auto build cancelled","AbortError");const V=R[A],N=b.get(V),I=[],J=gS({poolSize:N.length,beamSize:Z.length,remainingStages:R.length-A,processedStates:de,maxStates:i.maxStates});J<=0&&(ne=!0);for(const xe of Z){let ge=0;for(const Ee of N){if(ge>=J)break;if(de>=i.maxStates){ne=!0;break}if(de++,ge++,Hc(Ee.id,xe.slots,n))continue;const Be=na(xe.slots);Be[V]=Ee.id;const lt=xe.roughScore+Ee.rough,At=n.itemsById.get(Ee.id),dt=(xe.atkTierAssigned??0)+(At?Ba(At):0),Kt=j.length>0?sr(xe.customTotals??j.map(()=>0),j.map(gt=>At?At.numericIndex[gt]??0:0)):void 0;if(!(le&&!_c({constraints:i,attackSpeedCtx:S??null,atkTierRequirement:_,fixedAtkTierTotal:E,partialAssignedAtkTier:dt,remainingMinAtkTier:le.minSuffix[A+1],remainingMaxAtkTier:le.maxSuffix[A+1]}))){if(M.length>0&&Kt){let gt=!0;for(let tn=0;tn<M.length;tn++){const nn=M[tn],Gt=Kt[tn];if(typeof nn.min=="number"&&Gt+D.maxSuffix[A+1][tn]<nn.min){gt=!1;break}if(typeof nn.max=="number"&&Gt+D.minSuffix[A+1][tn]>nn.max){gt=!1;break}}if(!gt)continue}I.push({slots:Be,orderIndex:A+1,roughScore:lt,optimisticBound:lt+z[A+1],atkTierAssigned:dt,customTotals:Kt})}}if(ne)break}if(I.length===0)return r?.({phase:"diagnostics",processedStates:de,beamSize:Z.length,totalSlots:R.length,expandedSlots:A,reasonCode:"search_pruned",detail:ne?`Search state budget exhausted before completing slot ${V}. Try enabling deep fallback/exact mode or reduce hard filters.`:`No expansions produced at slot ${V}.`}),[];const oe=le?le.minSuffix[A+1]:0,ue=le?le.maxSuffix[A+1]:0,re=[...I].sort((xe,ge)=>{if(S){const Ee=ms(S,xe.atkTierAssigned,oe,ue),Be=ms(S,ge.atkTierAssigned,oe,ue);if(Ee!==Be)return Be-Ee}return xe.optimisticBound!==ge.optimisticBound?ge.optimisticBound-xe.optimisticBound:ge.roughScore-xe.roughScore}),ye=[...I].sort((xe,ge)=>{const Ee=wc(xe.customTotals,M),Be=wc(ge.customTotals,M);if(Ee!==Be)return Ee-Be;if(S){const lt=ms(S,xe.atkTierAssigned,oe,ue),At=ms(S,ge.atkTierAssigned,oe,ue);if(lt!==At)return At-lt}return ge.optimisticBound-xe.optimisticBound});Z=uS(re,ye,Math.max(20,i.beamWidth)),r?.({phase:"beam-search",processedStates:de,beamSize:Z.length,totalSlots:R.length,expandedSlots:A+1,detail:`branchCap=${J}${S?.preferredDirection?` | atkSpeedTarget=${i.weaponAttackSpeeds.join("/")}`:""}`,previewCandidates:cS(Z,n,i,2)})}let ce=Z,{candidates:$,rejectStats:X}=j0({beam:Z,catalog:n,constraints:i,signal:c});const L=X.thresholdFailureExample?` Example failure: ${X.thresholdFailureExample}.`:"",Y=$.length>0?void 0:X.spInvalid>0&&X.hardConstraints===0?"sp_infeasible":X.hardThresholds>0?"unsat_threshold":X.hardAttackSpeed>0?"unsat_attack_target":void 0;r?.({phase:"diagnostics",processedStates:de,beamSize:Z.length,totalSlots:R.length,expandedSlots:R.length,reasonCode:Y,detail:$.length>0?`Final eval: ${$.length} valid builds. Rejected duplicates=${X.duplicate}, SP-invalid=${X.spInvalid}, majorID=${X.majorIds}, hard=${X.hardConstraints}.`:`Final eval found 0 valid builds. Rejected SP-invalid=${X.spInvalid}, majorID=${X.majorIds}, duplicates=${X.duplicate}, hard=${X.hardConstraints} (speed=${X.hardAttackSpeed}, thresholds=${X.hardThresholds}, item=${X.hardItem}).${L}`});const te=i.weaponAttackSpeeds.length>0||_.hasConstraint;if($.length===0&&R.length>0&&(X.spInvalid>0||te&&X.hardAttackSpeed>0||X.hardThresholds>0)){const A=X.hardThresholds>0;r?.({phase:"diagnostics",processedStates:de,beamSize:Z.length,totalSlots:R.length,expandedSlots:R.length,detail:A&&i.target.customNumericRanges?.length?"Retrying with threshold-aware rescue (advanced ID constraints + support-aware feasibility search).":X.hardAttackSpeed>0?"Retrying with feasibility-first beam search (support-aware rescue + attack target reachability).":"Retrying with feasibility-first beam search (support-aware rescue for high-skill requirements)."});const V={...i,maxStates:Math.max(i.maxStates,A?Math.min(18e6,i.maxStates*5):te?Math.min(16e6,i.maxStates*4):Math.min(8e6,i.maxStates*2)),beamWidth:Math.max(i.beamWidth,A?3600:te?3200:1800)};A&&(V.weights=rh(i.target,i.weights));const N=_A({slotOrder:R,candidatePools:b,baseSlots:d,catalog:n,constraints:V,focusStats:p,attackSpeedCtx:S,atkTierRequirement:_,fixedAtkTierTotal:E,onProgress:r,signal:c});if(N.beam.length>0){ce=N.beam;const I=j0({beam:N.beam,catalog:n,constraints:i,signal:c});$=I.candidates,X=I.rejectStats;const J=X.thresholdFailureExample?` Example failure: ${X.thresholdFailureExample}.`:"";r?.({phase:"diagnostics",processedStates:N.processedStates,beamSize:N.beam.length,totalSlots:R.length,expandedSlots:R.length,detail:$.length>0?`Feasibility-first eval: ${$.length} valid builds. Rejected duplicates=${X.duplicate}, SP-invalid=${X.spInvalid}, majorID=${X.majorIds}, hard=${X.hardConstraints}.`:`Feasibility-first eval still found 0 valid builds. Rejected SP-invalid=${X.spInvalid}, majorID=${X.majorIds}, duplicates=${X.duplicate}, hard=${X.hardConstraints} (speed=${X.hardAttackSpeed}, thresholds=${X.hardThresholds}, item=${X.hardItem}).${J}`})}}if($.length===0&&X.hardThresholds>0&&!u){const A=i.target;if(typeof A.minLegacyBaseDps=="number"||typeof A.minLegacyEhp=="number"||typeof A.minDpsProxy=="number"||typeof A.minEhpProxy=="number"||typeof A.minMr=="number"||typeof A.minMs=="number"||typeof A.minSpeed=="number"||typeof A.minSkillPointTotal=="number"||typeof A.maxReqTotal=="number"||(A.customNumericRanges?.length??0)>0){r?.({phase:"diagnostics",processedStates:de,beamSize:ce.length,totalSlots:R.length,expandedSlots:R.length,detail:"Retrying with threshold-biased beam search (weights tuned to target min/max)."});const N={...i,weights:rh(i.target,i.weights),beamWidth:Math.max(i.beamWidth,3600),maxStates:Math.max(i.maxStates,Math.min(18e6,i.maxStates*5))},I=pS({catalog:n,baseWorkbench:s,constraints:N,onProgress:r,signal:c,alreadyThresholdRescue:!0});if(I.length>0)return r?.({phase:"diagnostics",processedStates:de,beamSize:I.length,totalSlots:R.length,expandedSlots:R.length,detail:`Threshold rescue: ${I.length} valid builds.`}),I.slice(0,Math.max(1,i.topN))}}if($.length===0&&R.length>0){r?.({phase:"diagnostics",processedStates:de,beamSize:ce.length,totalSlots:R.length,expandedSlots:R.length,reasonCode:"search_pruned",detail:"Running deterministic fallback search (2s cap) before returning no candidates."});const A=TA({slotOrder:R,candidatePools:b,baseSlots:d,catalog:n,constraints:i,attackSpeedCtx:S??null,atkTierRequirement:_,fixedAtkTierTotal:E,customSpecs:M,customBounds:D,signal:c,timeCapMs:2e3});if(A.candidates.length>0)$=A.candidates,r?.({phase:"diagnostics",processedStates:de+A.processedStates,beamSize:A.candidates.length,totalSlots:R.length,expandedSlots:R.length,detail:`Deterministic fallback recovered ${A.candidates.length} valid build(s).`});else{const V=A.timedOut?"fallback_timeout":X.spInvalid>0&&X.hardConstraints===0?"sp_infeasible":X.hardThresholds>0?"unsat_threshold":X.hardAttackSpeed>0?"unsat_attack_target":"search_pruned";r?.({phase:"diagnostics",processedStates:de+A.processedStates,beamSize:0,totalSlots:R.length,expandedSlots:R.length,reasonCode:V,detail:A.timedOut?"Deterministic fallback timed out after 2 seconds with no valid candidates.":`Deterministic fallback found 0 valid builds. Rejected SP-invalid=${X.spInvalid}, majorID=${X.majorIds}, duplicates=${X.duplicate}, hard=${X.hardConstraints} (speed=${X.hardAttackSpeed}, thresholds=${X.hardThresholds}, item=${X.hardItem}).${X.thresholdFailureExample?` Example failure: ${X.thresholdFailureExample}.`:""}`})}}return $.slice(0,Math.max(1,i.topN))}class NA{worker=null;requestId=0;currentReject=null;currentRequestId=null;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL(""+new URL("worker-runtime-CQZH92vn.js",import.meta.url).href,import.meta.url),{type:"module"}))}async run(n,s,i,r={}){if(!this.worker)return pS({catalog:n,baseWorkbench:s,constraints:i,onProgress:r.onProgress,signal:r.signal});const c=++this.requestId;return this.currentRequestId=c,new Promise((u,d)=>{this.currentReject=d;const m=()=>{this.worker?.postMessage({type:"cancel",requestId:c}),d(new DOMException("Auto build cancelled","AbortError"))};r.signal?.addEventListener("abort",m,{once:!0});const p=v=>{const y=v.data;if(y.requestId===c){if(y.type==="progress"){r.onProgress?.(y.progress);return}if(this.worker?.removeEventListener("message",p),r.signal?.removeEventListener("abort",m),this.currentReject=null,this.currentRequestId=null,y.type==="error"){d(new Error(y.message));return}u(y.candidates)}};this.worker.addEventListener("message",p),this.worker.postMessage({type:"run",requestId:c,catalog:n,baseWorkbench:s,constraints:i})})}cancelCurrent(){this.currentRequestId!==null&&(this.worker?.postMessage({type:"cancel",requestId:this.currentRequestId}),this.currentReject?.(new DOMException("Auto build cancelled","AbortError")),this.currentReject=null,this.currentRequestId=null)}dispose(){this.worker?.terminate(),this.worker=null}}function C0(e,n){const s=e.split(",").map(c=>c.trim()).filter(Boolean),i=[],r=[];for(const c of s){const u=n.itemIdByName.get(c.toLowerCase());u==null?r.push(c):i.push(u)}return{ids:i,unknown:r}}function Bi(e,n){return e.split(",").map(s=>s.trim()).filter(Boolean).map(s=>n?n(s):s)}function Xo(e,n){return e.includes(n)?e.filter(s=>s!==n):[...e,n]}function MA(e){if(!e)return null;const n=/SP-invalid=(\d+)/i.exec(e),s=/majorID=(\d+)/i.exec(e),i=/duplicates?=(\d+)/i.exec(e),r=/hard=(\d+)/i.exec(e),c=/speed=(\d+)/i.exec(e),u=/thresholds=(\d+)/i.exec(e),d=/item=(\d+)/i.exec(e);return r?{spInvalid:n?Number(n[1]):0,majorIds:s?Number(s[1]):0,duplicate:i?Number(i[1]):0,hard:Number(r[1]),speed:c?Number(c[1]):0,thresholds:u?Number(u[1]):0,item:d?Number(d[1]):0}:null}const jA=["SUPER_SLOW","VERY_SLOW","SLOW","NORMAL","FAST","VERY_FAST","SUPER_FAST"],CA={constraints:"Advanced IDs only",spell:"Spell Damage",melee:"Melee",mobility:"Mobility",tank:"Tank / EHP"},DA=["constraints","spell","melee","mobility","tank"],D0={auto:"All",fast:"Fast",constraint:"Constraint-first",exhaustive:"Exhaustive-ish"},RA=["auto","fast","constraint","exhaustive"],kA={hp:"Health",hpBonus:"Health Bonus",hprRaw:"Raw Health Regen",hprPct:"Health Regen %",mr:"Mana Regen",ms:"Mana Steal",ls:"Life Steal",sdPct:"Spell Damage %",sdRaw:"Spell Damage Raw",mdPct:"Melee Damage %",mdRaw:"Melee Damage Raw",poison:"Poison",spd:"Walk Speed Bonus",atkTier:"Attack Speed Bonus",averageDps:"Average DPS",str:"Strength",dex:"Dexterity",int:"Intelligence",def:"Defense",agi:"Agility",strReq:"Strength Min",dexReq:"Dexterity Min",intReq:"Intelligence Min",defReq:"Defense Min",agiReq:"Agility Min",eDef:"Earth Defense",tDef:"Thunder Defense",wDef:"Water Defense",fDef:"Fire Defense",aDef:"Air Defense",eDamPct:"Earth Damage %",tDamPct:"Thunder Damage %",wDamPct:"Water Damage %",fDamPct:"Fire Damage %",aDamPct:"Air Damage %",damPct:"Damage %",rDamPct:"Elemental Damage %",nDamPct:"Neutral Damage %",slots:"Powder Slots",lvl:"Combat Level",reqTotal:"Req Total",skillPointTotal:"Skill Point Total",offenseScore:"Offense Score",ehpProxy:"EHP Proxy",utilityScore:"Utility Score",spPct1:"1st Spell Cost %",spRaw1:"1st Spell Cost Raw",spPct2:"2nd Spell Cost %",spRaw2:"2nd Spell Cost Raw",spPct3:"3rd Spell Cost %",spRaw3:"3rd Spell Cost Raw",spPct4:"4th Spell Cost %",spRaw4:"4th Spell Cost Raw",sumSpPct:"Sum Spell Cost %",sumSpRaw:"Sum Spell Cost Raw"};function Of(e){return kA[e]??e}const Li={legacyBaseDps:0,legacyEhp:0,dpsProxy:0,spellProxy:0,meleeProxy:0,ehpProxy:0,speed:0,sustain:0,skillPointTotal:0,reqTotalPenalty:0};function AA(e){switch(e){case"spell":return{...Li,spellProxy:2};case"melee":return{...Li,meleeProxy:2};case"mobility":return{...Li,speed:2};case"tank":return{...Li,legacyEhp:2};case"constraints":return{...Li,legacyBaseDps:.25,legacyEhp:.25,dpsProxy:.25,spellProxy:.25,meleeProxy:.25,ehpProxy:.25,speed:.25,sustain:.25,skillPointTotal:.25,reqTotalPenalty:.25};default:return{...Li,spellProxy:2}}}function OA(e){return AA(e)}function zA(e){const n=w.useRef(null);n.current||(n.current=new NA);const[s,i]=w.useState(""),[r,c]=w.useState(""),[u,d]=w.useState(""),[m,p]=w.useState(""),[v,y]=w.useState([]),[b,S]=w.useState("constraints"),[_,E]=w.useState(e.snapshot.characterClass),[C,k]=w.useState(e.snapshot.level),[R,z]=w.useState([]),[B,q]=w.useState([]),[M,j]=w.useState(Jn.attackSpeedConstraintMode),[D,Z]=w.useState(Jn.skillpointFeasibilityMode),[le,de]=w.useState(null),[ne,ce]=w.useState(!1),[$,X]=w.useState(Jn.beamWidth),[L,Y]=w.useState(Jn.topKPerSlot),[te,A]=w.useState(Jn.topN),[V,N]=w.useState(["auto"]),[I,J]=w.useState([]),[oe,ue]=w.useState(""),[re,ye]=w.useState(!1),[xe,ge]=w.useState(null),[Ee,Be]=w.useState(!1),[lt,At]=w.useState(!0),[dt,Kt]=w.useState(!0),[gt,tn]=w.useState(Jn.exhaustiveStateLimit),[nn,Gt]=w.useState(null),[fe,Oe]=w.useState(null),[De,Je]=w.useState(null),[Pe,Wt]=w.useState([]),un=w.useRef(null),Pt=w.useRef(null),K=w.useRef(null),he=v.some(se=>se.key&&se.min!=null&&se.max!=null),et=w.useRef(1),Ge=w.useMemo(()=>{const se={};for(const me of nt)e.snapshot.locks[me]&&(se[me]=!0);return se},[e.snapshot.locks]),fn=e.catalog?.facetsMeta.tiers??[],an=(e.catalog?.facetsMeta.majorIds??[]).slice(0,24),ft=w.useMemo(()=>Object.keys(e.catalog?.facetsMeta.numericRanges??{}).sort((me,be)=>Of(me).localeCompare(Of(be))),[e.catalog]);w.useEffect(()=>{e.open&&(E(e.snapshot.characterClass),k(e.snapshot.level))},[e.open,e.snapshot.characterClass,e.snapshot.level]);const It=()=>{y(se=>[...se,{id:et.current++,key:ft[0]??"",min:null,max:null}])},Nt=(se,me)=>{y(be=>be.map(Me=>Me.id===se?{...Me,...me}:Me))},nl=se=>{y(me=>me.filter(be=>be.id!==se))},Vs=async(se,me,be,Me)=>{const Ye=(()=>{const Ue={label:"Fast pass",topKPerSlot:me.topKPerSlot,beamWidth:me.beamWidth,maxStates:me.maxStates,rescueWeights:!1},Ve={label:"Deep pass",topKPerSlot:Math.max(me.topKPerSlot,140),beamWidth:Math.max(me.beamWidth,700),maxStates:Math.max(me.maxStates,9e5),rescueWeights:!1},vt={label:"Bruteforce-ish pass",topKPerSlot:Math.max(me.topKPerSlot,220),beamWidth:Math.max(me.beamWidth,1200),maxStates:Math.max(me.maxStates,4e6),rescueWeights:!1},jt={label:"Feasibility rescue",topKPerSlot:Math.max(me.topKPerSlot,260),beamWidth:Math.max(me.beamWidth,1400),maxStates:Math.max(me.maxStates,45e5),rescueWeights:!0},Se={label:"Constraint-first pass",topKPerSlot:Math.max(me.topKPerSlot,180),beamWidth:Math.max(me.beamWidth,1200),maxStates:Math.max(me.maxStates,22e5),rescueWeights:!0},hn={label:"Constraint rescue deep",topKPerSlot:Math.max(me.topKPerSlot,280),beamWidth:Math.max(me.beamWidth,2200),maxStates:Math.max(me.maxStates,9e6),rescueWeights:!0,useExhaustiveSmallPool:!0,exhaustiveStateLimit:Math.max(me.exhaustiveStateLimit,12e5)},mn={label:"Exhaustive-ish pass",topKPerSlot:Math.max(me.topKPerSlot,300),beamWidth:Math.max(me.beamWidth,2600),maxStates:Math.max(me.maxStates,12e6),rescueWeights:!0,useExhaustiveSmallPool:!0,exhaustiveStateLimit:Math.max(me.exhaustiveStateLimit,2e6)},Te=Ke=>{switch(Ke){case"fast":return[Ue];case"constraint":return lt?[Se,hn,mn]:[Se];case"exhaustive":return lt?[Se,mn]:[mn];default:return[Ue,...lt?[Ve,vt,jt]:[]]}},yt=V.length>0?V:["auto"];return yt.length===1&&yt[0]==="auto"?Te("auto"):yt.flatMap(Ke=>Te(Ke))})();let rt=[];for(let Ue=0;Ue<Ye.length;Ue++){if(Me.aborted)throw new DOMException("Auto build cancelled","AbortError");const Ve=Ye[Ue],vt={...me,topKPerSlot:Ve.topKPerSlot,beamWidth:Ve.beamWidth,maxStates:Ve.maxStates,useExhaustiveSmallPool:Ve.useExhaustiveSmallPool??me.useExhaustiveSmallPool,exhaustiveStateLimit:Ve.exhaustiveStateLimit??me.exhaustiveStateLimit,weights:Ve.rescueWeights?{...me.weights,legacyBaseDps:me.weights.legacyBaseDps*.6,dpsProxy:me.weights.dpsProxy*.55,legacyEhp:Math.max(me.weights.legacyEhp,1),ehpProxy:Math.max(me.weights.ehpProxy,1),sustain:Math.max(me.weights.sustain,.8),skillPointTotal:Math.max(me.weights.skillPointTotal,.8),reqTotalPenalty:Math.max(me.weights.reqTotalPenalty,1.8)}:me.weights};ue(`${Ve.label} (${Ue+1}/${Ye.length})  topK ${vt.topKPerSlot}, beam ${vt.beamWidth}, maxStates ${vt.maxStates}`);const jt=await n.current.run(se,be,vt,{signal:Me,onProgress:Se=>{Je(Se),Se.previewCandidates&&Wt(Se.previewCandidates),Se.phase==="diagnostics"&&Se.reasonCode&&(Pt.current=Se.reasonCode,Oe(Se.reasonCode)),Se.phase==="diagnostics"&&Se.detail&&(un.current=Se.detail,Gt(Se.detail)),ue(`${Ve.label} (${Ue+1}/${Ye.length})  ${Se.phase}: ${Se.expandedSlots}/${Se.totalSlots} slots, beam ${Se.beamSize}, states ${Se.processedStates}${Se.detail?`  ${Se.detail}`:""}`)}});if(jt.length>0)return jt;rt=jt}if(rt.length===0){const Ue=me.target;if(typeof Ue.minDpsProxy=="number"||typeof Ue.minEhpProxy=="number"||typeof Ue.minSkillPointTotal=="number"||(Ue.customNumericRanges?.length??0)>0){ue("Threshold rescue pass  topK 180, beam 3600, maxStates 2200000");const vt={...me,weights:rh(me.target,me.weights),topKPerSlot:Math.max(me.topKPerSlot,180),beamWidth:Math.max(me.beamWidth,3600),maxStates:Math.max(me.maxStates,22e5)},jt=await n.current.run(se,be,vt,{signal:Me,onProgress:Se=>{Je(Se),Se.previewCandidates&&Wt(Se.previewCandidates),Se.phase==="diagnostics"&&Se.reasonCode&&(Pt.current=Se.reasonCode,Oe(Se.reasonCode)),Se.phase==="diagnostics"&&Se.detail&&(un.current=Se.detail,Gt(Se.detail)),ue(`Threshold rescue pass  ${Se.phase}: ${Se.expandedSlots}/${Se.totalSlots} slots, beam ${Se.beamSize}, states ${Se.processedStates}${Se.detail?`  ${Se.detail}`:""}`)}});if(jt.length>0)return jt}}return rt},al=async()=>{if(!e.catalog)return;ge(null),J([]),Gt(null),Oe(null),Je(null),un.current=null,Pt.current=null;const se=C0(s,e.catalog),me=C0(r,e.catalog),be=Bi(u,Te=>Te.toUpperCase()),Me=Bi(m,Te=>Te.toUpperCase()),Ye=new Set(e.catalog.facetsMeta.majorIds.map(Te=>Te.toUpperCase())),rt=be.filter(Te=>!Ye.has(Te)),Ue=Me.filter(Te=>!Ye.has(Te)),Ve=v.map(Te=>({key:Te.key.trim(),min:Te.min??void 0,max:Te.max??void 0})).filter(Te=>Te.key&&(typeof Te.min=="number"||typeof Te.max=="number")),vt=new Set(Object.keys(e.catalog.facetsMeta.numericRanges)),jt=Ve.map(Te=>Te.key).filter(Te=>!vt.has(Te)),Se=Ve.filter(Te=>typeof Te.min=="number"&&typeof Te.max=="number"&&Te.min>Te.max);if(se.unknown.length>0||me.unknown.length>0||rt.length>0||Ue.length>0||jt.length>0||Se.length>0){ge([se.unknown.length?`Unknown must-include items: ${se.unknown.join(", ")}`:"",me.unknown.length?`Unknown excluded items: ${me.unknown.join(", ")}`:"",rt.length?`Unknown required major IDs: ${rt.join(", ")}`:"",Ue.length?`Unknown excluded major IDs: ${Ue.join(", ")}`:"",jt.length?`Unknown advanced ID keys: ${jt.join(", ")}`:"",Se.length?`Invalid advanced ID ranges (min > max): ${Se.map(Te=>Te.key).join(", ")}`:""].filter(Boolean).join(" | "));return}const hn={...Jn,characterClass:_,level:Math.max(1,Math.min(106,Math.round(C||e.snapshot.level||106))),mustIncludeIds:se.ids,excludedIds:me.ids,lockedSlots:Ge,target:{customNumericRanges:Ve},allowedTiers:[...R],requiredMajorIds:be,excludedMajorIds:Me,weaponAttackSpeeds:[...B],attackSpeedConstraintMode:M,skillpointFeasibilityMode:D,minPowderSlots:le,onlyPinnedItems:ne,useExhaustiveSmallPool:dt,exhaustiveStateLimit:Math.max(1e3,Math.min(5e6,gt)),weights:OA(b),topN:Math.max(1,Math.min(150,te)),topKPerSlot:Math.max(10,Math.min(300,L)),beamWidth:Math.max(20,Math.min(5e3,$))};K.current?.abort();const mn=new AbortController;K.current=mn,ye(!0),Wt([]),ue("Starting...");try{const Te=await Vs(e.catalog,hn,e.snapshot,mn.signal);if(J(Te),Te.length===0){ue(""),Je(null);const yt=un.current??"",Ke=Pt.current??fe??"",ha=/SP-invalid=(\d+)/i.exec(yt),Ks=ha?Number(ha[1]):0,xr=/hard=.*?\(speed=(\d+)/i.exec(yt),Sr=xr?Number(xr[1]):0,sl=/hard=.*?\(speed=\d+,\s*thresholds=(\d+)/i.exec(yt),Ua=sl?Number(sl[1]):0,Ws=Ke==="must_include_conflict"?"At least one must-include item cannot be placed under current locks/filters.":Ke==="unsat_attack_target"?"The configured attack target cannot be satisfied from the current candidate pool.":Ke==="unsat_threshold"?"One or more hard thresholds are mathematically unsatisfiable with the current pool.":Ke==="sp_infeasible"?"The explored builds failed skill-point/equip-order feasibility in the selected SP mode.":Ke==="fallback_timeout"?"Deterministic fallback timed out before finding a valid candidate.":Ke==="empty_pool"?"At least one slot has no eligible candidate items after filters.":Ke==="search_pruned"?"Search pruning/state limits exhausted viable branches before a valid candidate was found.":null,ma=Ke==="must_include_conflict"?"Tip: unlock conflicting slots, remove exclusions on required items, or relax class/level/tier filters.":Ke==="unsat_attack_target"?"Tip: switch attack logic to Either, lower atkTier minimum, or broaden candidate pools.":Ke==="unsat_threshold"?"Tip: lower strict min/max thresholds or reduce simultaneous hard constraints.":Ke==="sp_infeasible"?D==="no_tomes"?"Tip: try SP Feasibility Mode = Guild rainbow (+1 each), or add more low-requirement/support items.":"Tip: relax hard constraints or lower requirement-heavy must-includes.":Ke==="fallback_timeout"?"Tip: increase Top K / Beam Width, disable pinned-only, or reduce hard filters.":Ke==="empty_pool"?"Tip: disable pinned-only first, then relax tier/powder/class filters.":Ke==="search_pruned"?"Tip: use Constraint-first/Exhaustive-ish strategy and increase search budgets.":null;ge(["No valid candidates found.",un.current?`Diagnostics: ${un.current}`:"",Ws||(Ks>0?"The engine found many full builds, but they failed skill-point/equip-order feasibility. This is not just a UI filter issue.":Sr>0?"The engine found many full builds, but they failed the final attack-speed target. This usually means the search is missing enough +atkTier support for the selected weapon/target combination.":Ua>0&&Ve.length>0?"The engine found many full builds, but they failed advanced ID min/max thresholds. This usually means the search is not preserving enough support items for those IDs.":"This usually means your hard constraints are too strict (pinned-only, major IDs, must-includes, attack-speed, or thresholds), or the selected objective conflicts with them."),ma||(Ks>0?"Try switching Primary Goal to Balanced or Tank and keeping Exact Search + Deep Fallback enabled.":Sr>0?"Tip: keep Exact Search + Deep Fallback enabled, lower thresholds, and try adding/pinning known +Attack Speed Bonus support items for the target speed.":Ua>0&&Ve.length>0?"Tip: switch Solver Strategy to Constraint-first or Exhaustive-ish and keep Deep Fallback enabled. For strict advanced IDs, add only the most important thresholds first.":"Tip: disable pinned-only first, remove major-ID constraints, then try again.")].join(" "))}else ue(`Completed. ${Te.length} valid candidates.`)}catch(Te){ge(Te instanceof Error?Te.message:"Auto builder failed"),ue("")}finally{ye(!1),Je(null)}},qa=()=>{K.current?.abort(),n.current?.cancelCurrent(),ye(!1),ue("Cancelled"),Je(null)},fa=xe??nn,wt=!!xe,ze=MA(De?.detail),Bt=ze?ze.spInvalid+ze.majorIds+ze.duplicate+ze.hard:0;return h.jsxs(Ih,{open:e.open,onOpenChange:e.onOpenChange,title:"Build Solver",description:"Beam search over item combinations. Uses Workbench summary metrics (legacy-style Base DPS / EHP, ability tree excluded).",className:"!w-[min(95vw,1360px)]",footer:h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsx("div",{className:"text-sm text-[var(--wb-muted)]",children:oe}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Ce,{variant:"ghost",onClick:()=>Be(se=>!se),children:Ee?"Hide Tips":"Tips"}),re?h.jsx(Ce,{variant:"ghost",onClick:qa,children:"Cancel"}):null,h.jsx(Ce,{variant:"primary",onClick:al,disabled:!e.catalog||re,children:"Generate Candidates"})]})]}),children:[re&&De?h.jsxs("div",{className:"wb-beam-progress mb-4 rounded-xl p-3",children:[h.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[h.jsx("span",{className:"rounded-md border border-[var(--wb-info-border)] bg-[var(--wb-info-soft)] px-2 py-0.5 text-xs font-medium text-[var(--wb-info)]",children:De.phase==="exact-search"?"Exact search":De.phase==="beam-search"?"Beam search":De.phase==="diagnostics"?"Finalize / diagnostics":De.phase}),De.totalSlots>0?h.jsxs("span",{className:"text-xs text-[var(--wb-muted)]",children:["Slots ",De.expandedSlots,"/",De.totalSlots]}):null]}),h.jsx("div",{className:"wb-beam-progress-track h-2.5 w-full overflow-hidden rounded-full",children:h.jsx("div",{className:"wb-beam-progress-fill h-full rounded-full transition-[width] duration-300 ease-out",style:{width:De.totalSlots>0?`${100*De.expandedSlots/De.totalSlots}%`:"0%"}})}),h.jsxs("div",{className:"mt-2 flex flex-wrap gap-4 text-xs text-[var(--wb-muted)]",children:[h.jsxs("span",{children:["States: ",De.processedStates.toLocaleString()]}),h.jsxs("span",{children:["Beam: ",De.beamSize.toLocaleString()]})]}),ze&&Bt>0?h.jsxs("div",{className:"mt-3 border-t border-[var(--wb-info-border)] pt-2",children:[h.jsx("div",{className:"mb-1 text-[11px] font-medium uppercase tracking-wide text-[var(--wb-muted)]",children:"Rejected builds (this pass)"}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[ze.spInvalid>0?h.jsxs("span",{className:"rounded bg-rose-400/20 px-1.5 py-0.5 text-[11px] text-rose-200",title:"Skill point / equip feasibility",children:["SP: ",ze.spInvalid]}):null,ze.majorIds>0?h.jsxs("span",{className:"rounded bg-amber-400/20 px-1.5 py-0.5 text-[11px] text-amber-200",title:"Major ID requirement",children:["Major ID: ",ze.majorIds]}):null,ze.duplicate>0?h.jsxs("span",{className:"rounded bg-slate-400/20 px-1.5 py-0.5 text-[11px] text-slate-200",title:"Duplicate build",children:["Dup: ",ze.duplicate]}):null,ze.speed>0?h.jsxs("span",{className:"rounded bg-orange-400/20 px-1.5 py-0.5 text-[11px] text-orange-200",title:"Attack speed",children:["Speed: ",ze.speed]}):null,ze.thresholds>0?h.jsxs("span",{className:"rounded bg-amber-400/20 px-1.5 py-0.5 text-[11px] text-amber-200",title:"Min/max thresholds",children:["Thresholds: ",ze.thresholds]}):null,ze.item>0?h.jsxs("span",{className:"rounded bg-slate-400/20 px-1.5 py-0.5 text-[11px] text-slate-200",title:"Item constraint",children:["Item: ",ze.item]}):null]})]}):null]}):null,h.jsxs("div",{className:"grid h-[52vh] min-h-0 gap-4 overflow-hidden lg:h-[56vh] lg:grid-cols-[1fr_1fr] lg:items-stretch",children:[h.jsxs("div",{className:"grid h-full min-h-0 min-w-0 gap-3 overflow-auto pr-1 wb-scrollbar",children:[Ee?h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Tips (New Players)"}),h.jsxs("div",{className:"grid gap-2 text-xs text-[var(--wb-muted)]",children:[h.jsxs("div",{children:["1. Start with a Primary Goal like ",h.jsx("b",{children:"Damage"})," or ",h.jsx("b",{children:"Tank / EHP"}),". Leave most constraints empty."]}),h.jsx("div",{children:"2. Add only a few hard constraints first: class/level, maybe one must-include item."}),h.jsxs("div",{children:["3. If you get 0 candidates, turn off ",h.jsx("b",{children:"Only use pinned items in bins"})," and clear major-ID constraints."]}),h.jsx("div",{children:"4. Build Solver filters out builds that fail skill requirements / equip order feasibility."}),h.jsx("div",{children:"5. Use Workbench bins to guide it: pin good options, then rerun with pinned-only once you have enough items in each slot category."})]})]}):null,h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Optimization"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{children:[h.jsx(Ie,{children:"Primary Goal"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:DA.map(se=>h.jsx(Qe,{active:b===se,onClick:()=>S(se),children:CA[se]},se))})]}),h.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2 text-xs text-[var(--wb-muted)]",children:"Build Solver always filters out builds that fail skill point/equip-order feasibility. You do not need to set a minimum SP total."})]})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Hard Constraints (Optional)"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{children:[h.jsx(Ie,{children:"Character Class"}),h.jsxs("select",{className:"wb-select",value:_??"",onChange:se=>E(se.target.value||null),children:[h.jsx("option",{value:"",children:"Auto / Any"}),h.jsx("option",{value:"Warrior",children:"Warrior"}),h.jsx("option",{value:"Assassin",children:"Assassin"}),h.jsx("option",{value:"Mage",children:"Mage"}),h.jsx("option",{value:"Archer",children:"Archer"}),h.jsx("option",{value:"Shaman",children:"Shaman"})]})]}),h.jsx(za,{label:"Level",value:C,onChange:se=>k(se??e.snapshot.level),min:1,max:106}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Must-Include Items (comma-separated names)"}),h.jsx("textarea",{className:"wb-textarea min-h-20",value:s,onChange:se=>i(se.target.value),placeholder:"Example: Cancer, Stardew"})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Excluded Items (comma-separated names)"}),h.jsx("textarea",{className:"wb-textarea min-h-20",value:r,onChange:se=>c(se.target.value),placeholder:"Blacklist item names"})]}),h.jsxs("details",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[h.jsx("summary",{className:"cursor-pointer text-sm font-medium",children:"Advanced: Specific ID Min / Max"}),h.jsxs("div",{className:"mt-3 grid gap-3",children:[h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Set build-wide min/max totals for any numeric ID (e.g. `mr`, `ms`, `spd`, `reqTotal`, `sdPct`, `poison`, `atkTier`). These are hard constraints."}),v.length===0?h.jsx("div",{className:"rounded-lg border border-dashed border-[var(--wb-border-muted)] px-3 py-2 text-xs text-[var(--wb-muted)]",children:"No advanced ID thresholds yet."}):null,v.map(se=>{const me=e.catalog?.facetsMeta.numericRanges[se.key];return h.jsxs("div",{className:"rounded-lg border border-[var(--wb-border-muted)] p-2",children:[h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs("div",{children:[h.jsx(Ie,{children:"ID"}),h.jsx("select",{className:"wb-select w-full",value:se.key,onChange:be=>Nt(se.id,{key:be.target.value}),children:ft.map(be=>h.jsxs("option",{value:be,children:[Of(be)," (",be,")"]},be))})]}),h.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[h.jsxs("div",{className:"min-w-[80px] flex-1",children:[h.jsx(Ie,{children:"Min"}),h.jsx("input",{className:"wb-input w-full",type:"number",value:se.min??"",onChange:be=>{const Me=be.target.value.trim();Nt(se.id,{min:Me===""?null:Number(Me)})}})]}),h.jsxs("div",{className:"min-w-[80px] flex-1",children:[h.jsx(Ie,{children:"Max"}),h.jsx("input",{className:"wb-input w-full",type:"number",value:se.max??"",onChange:be=>{const Me=be.target.value.trim();Nt(se.id,{max:Me===""?null:Number(Me)})}})]}),h.jsx(Ce,{variant:"ghost",className:"shrink-0",onClick:()=>nl(se.id),children:"Remove"})]})]}),me?h.jsxs("div",{className:"mt-1 text-[11px] text-[var(--wb-muted)]",children:["Catalog item range: ",me.min," to ",me.max," (per item)"]}):null]},se.id)}),h.jsx("div",{children:h.jsx(Ce,{variant:"ghost",onClick:It,disabled:ft.length===0,children:"Add ID Threshold"})}),b==="constraints"&&!he?h.jsx("div",{className:"mt-1 rounded-lg border border-amber-400/40 bg-amber-400/10 p-2 text-[11px] text-amber-50",children:"Advanced IDs preset is selected as Primary Goal, but no ID has both Min and Max set. Add at least one ID with a Min and Max, or switch primary goal. You can still run the solver without this."}):null]})]})]})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Solver Strategy"}),h.jsx("div",{className:"grid gap-3",children:h.jsxs("div",{children:[h.jsx(Ie,{children:"Strategies (select one or more; All is exclusive)"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:RA.map(se=>{const me=se==="auto",be=V.length===1&&V[0]==="auto",Me=me?be:V.includes(se),Ye=me&&!be;return h.jsx(Qe,{active:Me,disabled:Ye,onClick:()=>{if(Ye)return;if(me){N(["auto"]);return}if(be){N([se]);return}const Ue=V.includes(se)?V.filter(vt=>vt!==se):[...V,se],Ve=Ue.length===3&&Ue.includes("fast")&&Ue.includes("constraint")&&Ue.includes("exhaustive");N(Ue.length>0?Ve?["auto"]:Ue:["auto"])},children:D0[se]},se)})}),h.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:V.length===1&&V[0]==="auto"?"Starts fast, then retries deeper if needed.":V.includes("fast")&&!V.includes("constraint")&&!V.includes("exhaustive")?"Single fast pass. Lowest wait time, weakest fallback.":V.includes("constraint")?"Constraint-first helps strict attack-speed or advanced ID min/max.":V.includes("exhaustive")?"Exhaustive-ish: highest search budget, strongest fallback.":"Selected strategies run in order (fast  constraint  exhaustive)."})]})})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Pool Filters"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsx(za,{label:"Min Powder Slots",value:le,onChange:de,min:0,max:6}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Allowed Tiers (optional)"}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[fn.map(se=>h.jsx(Qe,{active:R.includes(se),onClick:()=>z(me=>Xo(me,se)),children:se},se)),fn.length===0?h.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:"Catalog not loaded."}):null]})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Final Weapon Attack Speed (optional hard constraint)"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:jA.map(se=>h.jsx(Qe,{active:B.includes(se),onClick:()=>q(me=>Xo(me,se)),children:se},se))}),h.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:"Matches the completed build attack speed (weapon base speed plus total Attack Speed Bonus / `atkTier`)."})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Attack Target Logic"}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsx(Qe,{active:M==="or",onClick:()=>j("or"),children:"Either"}),h.jsx(Qe,{active:M==="and",onClick:()=>j("and"),children:"Both"})]}),h.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:"Applies when both final attack speed and advanced `atkTier` thresholds are set."})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"SP Feasibility Mode"}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsx(Qe,{active:D==="no_tomes",onClick:()=>Z("no_tomes"),children:"No tomes"}),h.jsx(Qe,{active:D==="guild_rainbow",onClick:()=>Z("guild_rainbow"),children:"Guild rainbow (+1 each)"}),h.jsx(Qe,{active:D==="flexible_2",onClick:()=>Z("flexible_2"),children:"+2 flexible"})]}),h.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:"Guild rainbow: +1 each (total +5). +2 flexible: +2 in two skills (total +4)."})]}),h.jsx(Qe,{active:ne,onClick:()=>ce(se=>!se),children:"Only use pinned items in bins"}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Required Major IDs (build must include all)"}),h.jsx("textarea",{className:"wb-textarea min-h-16",value:u,onChange:se=>d(se.target.value),placeholder:"Example: HAWKEYE, GREED"})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Excluded Major IDs (avoid any item with these)"}),h.jsx("textarea",{className:"wb-textarea min-h-16",value:m,onChange:se=>p(se.target.value),placeholder:"Example: NAPALM"})]}),an.length>0?h.jsxs("div",{children:[h.jsx(Ie,{children:"Major ID Quick Picks"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:an.map(se=>{const me=Bi(u,Me=>Me.toUpperCase()),be=Bi(m,Me=>Me.toUpperCase());return h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsxs(Qe,{active:me.includes(se.toUpperCase()),onClick:()=>{d(Me=>Xo(Bi(Me,Ye=>Ye.toUpperCase()),se.toUpperCase()).join(", "))},title:`Require ${se}`,children:["+",se]}),h.jsxs(Qe,{active:be.includes(se.toUpperCase()),onClick:()=>{p(Me=>Xo(Bi(Me,Ye=>Ye.toUpperCase()),se.toUpperCase()).join(", "))},title:`Exclude ${se}`,children:["-",se]})]},se)})})]}):null]})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Search Heuristics"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsx(Qe,{active:lt,onClick:()=>At(se=>!se),children:"Deep fallback if 0 results"}),h.jsx(Qe,{active:dt,onClick:()=>Kt(se=>!se),children:"Exact search for small pools"}),h.jsx(za,{label:"Exact Search Combination Limit",value:gt,onChange:se=>tn(se??Jn.exhaustiveStateLimit),min:1e3,max:5e6}),h.jsx(za,{label:"Beam Width",value:$,onChange:se=>X(se??Jn.beamWidth),min:20,max:5e3}),h.jsx(za,{label:"Top K per Slot",value:L,onChange:se=>Y(se??Jn.topKPerSlot),min:10,max:300}),h.jsx(za,{label:"Top N Results",value:te,onChange:se=>A(se??Jn.topN),min:1,max:150}),h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2 text-xs text-[var(--wb-muted)]",children:["Locked slots from the Workbench will be preserved. Current locks: ",Object.values(Ge).filter(Boolean).length,ne?" | Candidate pools restricted to pinned bins.":"",V.length>0&&!(V.length===1&&V[0]==="auto")?` | Strategy: ${V.map(se=>D0[se]).join("  ")}.`:"",` | Attack logic: ${M==="or"?"Either":"Both"}.`,` | SP mode: ${D==="guild_rainbow"?"Guild rainbow (+1 each)":D==="flexible_2"?"+2 flexible":"No tomes"}.`,lt?" | Auto retries with deeper search if fast pass finds 0 candidates.":"",dt?` | Exact enumeration is used automatically when pool combinations are <= ${Math.round(gt).toLocaleString()}.`:""]})]})]})]}),h.jsx("div",{className:"h-full min-h-0 min-w-0",children:h.jsxs("div",{className:"wb-card flex h-full min-h-0 flex-col overflow-hidden p-3",children:[(()=>{const se=re&&Pe.length>0,me=se?Pe.slice(0,2):I;return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[h.jsxs("div",{className:"text-sm font-semibold",children:["Candidates"," ",se?h.jsx("span",{className:"text-[11px] text-[var(--wb-muted)]",children:"(live preview; may be partial)"}):null]}),h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[me.length," shown"]})]}),h.jsx("div",{className:"min-h-0 flex-1 space-y-2 overflow-auto pr-1 wb-scrollbar",children:me.length===0?h.jsx("div",{className:"rounded-xl border border-dashed border-[var(--wb-border)] p-4 text-sm text-[var(--wb-muted)]",children:"Run Build Solver to generate candidate builds."}):me.map((be,Me)=>h.jsxs("div",{className:se?"rounded-xl border border-[var(--wb-info-border)] bg-[var(--wb-info-soft)] p-3":"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3",children:[h.jsxs("div",{className:"flex items-start justify-between gap-3",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"text-sm font-semibold",children:["#",Me+1," | Score ",Math.round(be.score).toLocaleString()]}),h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["HP ",Math.round(be.summary.aggregated.hpTotal)," | Req ",be.summary.derived.reqTotal]}),h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["SP Needed ",Math.round(be.summary.derived.assignedSkillPointsRequired)," | MR ",be.summary.aggregated.mr," | MS ",be.summary.aggregated.ms]}),se?h.jsx("div",{className:"mt-1 text-[11px] text-[var(--wb-muted)]",children:"Live preview only  may not be a complete or fully feasible build."}):null]}),se?null:h.jsx(Ce,{className:"px-2 py-1 text-xs",onClick:()=>e.onLoadCandidate(be),children:"Load into Workbench"})]}),h.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1 text-xs sm:grid-cols-2 xl:grid-cols-3",children:nt.map(Ye=>h.jsxs("div",{className:"min-w-0 rounded-md border border-[var(--wb-border-muted)] bg-black/10 px-2 py-1",children:[h.jsx("div",{className:"text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:Ye}),h.jsx("div",{className:"truncate",children:be.slots[Ye]!=null?e.catalog?.itemsById.get(be.slots[Ye])?.displayName??be.slots[Ye]:"Empty"})]},Ye))})]},`${be.score}-${Me}`))})]})})(),fa?h.jsxs("details",{className:`mt-2 rounded-xl border p-2 ${wt?"border-rose-400/30 bg-rose-400/8 text-rose-100":"border-sky-400/20 bg-sky-400/5 text-sky-100"}`,children:[h.jsx("summary",{className:"cursor-pointer list-none text-xs font-medium",children:wt?"Run issue (click to expand)":"Diagnostics (click to expand)"}),h.jsx("div",{className:"mt-2 text-xs leading-relaxed",children:fa})]}):null]})})]})]})}const PA=["Warrior","Assassin","Mage","Archer","Shaman"],zf=[0,1,2,2,3,3,4,4,5,5,6,6,7,8,8,9,9,10,11,11,12,12,13,14,14,15,16,16,17,17,18,18,19,19,20,20,20,21,21,22,22,23,23,23,24,24,25,25,26,26,27,27,28,28,29,29,30,30,31,31,32,32,33,33,34,34,34,35,35,35,36,36,36,37,37,37,38,38,38,38,39,39,39,39,40,40,40,40,41,41,41,41,42,42,42,42,43,43,43,43,44,44,44,44,45,45,45];function $s(e,n=0){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const s=Number(e);if(Number.isFinite(s))return s}return n}function Wl(e){return typeof e=="string"?e:""}function Pf(e){return Array.isArray(e)?e.map(n=>$s(n,Number.NaN)).filter(n=>Number.isFinite(n)).map(n=>Math.trunc(n)):[]}function IA(e){const n=$s(e.id,Number.NaN);if(!Number.isFinite(n))return null;const s=$s(e.display?.row,0),i=$s(e.display?.col,0);return{id:Math.trunc(n),displayName:Wl(e.display_name)||`Ability ${n}`,descriptionHtml:Wl(e.desc),parents:Pf(e.parents),dependencies:Pf(e.dependencies),blockers:Pf(e.blockers),cost:Math.max(0,Math.trunc($s(e.cost,1))),archetype:Wl(e.archetype).trim()||null,archetypeReq:Math.max(0,Math.trunc($s(e.archetype_req,0))),reqArchetype:Wl(e.req_archetype).trim()||null,baseAbilityId:e.base_abil==null?null:Math.trunc($s(e.base_abil,Number.NaN)),display:{row:Math.max(0,Math.trunc(s)),col:Math.max(0,Math.trunc(i)),icon:Wl(e.display?.icon)||"node_0"},properties:typeof e.properties=="object"&&e.properties?e.properties:{},effects:Array.isArray(e.effects)?e.effects.filter(r=>!!r&&typeof r=="object"):[]}}function BA(e,n){const s=n.map(IA).filter(u=>u!==null).sort((u,d)=>{const m=u.display.row-d.display.row;if(m!==0)return m;const p=u.display.col-d.display.col;return p!==0?p:u.id-d.id}),i=new Map;let r=0,c=0;for(const u of s)i.set(u.id,u),r=Math.max(r,u.display.row),c=Math.max(c,u.display.col);return{className:e,nodes:s,nodeById:i,maxRow:r,maxCol:c}}function LA(e,n){const s={};for(const i of PA){const r=Array.isArray(e[i])?e[i]:[];s[i]=BA(i,r)}return{version:n,classes:s}}function qA(e){if(!Number.isFinite(e))return 45;const n=Math.trunc(e);return n>=zf.length?45:n<1?zf[1]:zf[n]??45}function If(e,n,s,i,r){if(e.parents.length===0)return e.cost>r?{ok:!1,hardBlocked:!1,reason:"not enough ability points left"}:{ok:!0,hardBlocked:!1,reason:""};const c=e.dependencies.filter(m=>!s.has(m));if(c.length>0)return{ok:!1,hardBlocked:!0,reason:`missing dep: ${c.map(p=>`"${n.nodeById.get(p)?.displayName??p}"`).join(", ")}`};const u=e.blockers.filter(m=>s.has(m));if(u.length>0)return{ok:!1,hardBlocked:!0,reason:`blocked by: ${u.map(p=>`"${n.nodeById.get(p)?.displayName??p}"`).join(", ")}`};if(!e.parents.some(m=>s.has(m)))return{ok:!1,hardBlocked:!1,reason:"not reachable"};if(e.archetypeReq>0){const m=e.reqArchetype||e.archetype,p=m?i.get(m)??0:0;if(!m||p<e.archetypeReq)return{ok:!1,hardBlocked:!1,reason:`${m??"Archetype"}: ${p} < ${e.archetypeReq}`}}return e.cost>r?{ok:!1,hardBlocked:!1,reason:"not enough ability points left"}:{ok:!0,hardBlocked:!1,reason:""}}function UA(e,n,s){const i=new Set(n.filter(C=>e.nodeById.has(C)));let r=new Set(i),c=e.nodes.filter(C=>r.has(C.id));const u=new Set,d=new Map;let m=0;const p=new Map;for(;;){let C=!1;const k=[];for(const R of c){const z=If(R,e,u,d,9999);if(!z.ok){k.push(R),p.set(R.id,{reason:z.reason,hardBlocked:z.hardBlocked});continue}p.delete(R.id),u.add(R.id),r.delete(R.id),m+=R.cost,R.archetype&&d.set(R.archetype,(d.get(R.archetype)??0)+1),C=!0}if(c=k,!C)break}const v=qA(s),y=v-m,b=[];for(const C of e.nodes){if(u.has(C.id))continue;If(C,e,u,d,y).ok&&b.push(C.id)}const S={};for(const C of e.nodes){if(u.has(C.id)){S[C.id]={active:!0,selectable:!0,hardBlocked:!1,reason:null};continue}const k=p.get(C.id);if(k){S[C.id]={active:!1,selectable:!1,hardBlocked:k.hardBlocked,reason:k.reason};continue}const R=If(C,e,u,d,y);S[C.id]={active:!1,selectable:R.ok,hardBlocked:R.hardBlocked,reason:R.ok?null:R.reason}}const _=[];let E=!1;m>v&&_.push(`too many ability points assigned! (${m} > ${v})`);for(const C of c){const k=p.get(C.id);k&&(k.hardBlocked&&(E=!0),_.push(`${C.displayName}: ${k.reason}`))}return{apCap:v,apUsed:m,apRemaining:y,reachable:u,pending:c,unresolved:p,availableIds:b,errors:_,hardErrors:E,archetypeCounts:d,nodeStatusById:S}}function Gc(e,n,s){const i=UA(e,n,s),r=e.nodes.filter(d=>i.reachable.has(d.id)).map(d=>d.id),c=i.pending.map(d=>d.id),u=Object.fromEntries([...i.archetypeCounts.entries()].sort((d,m)=>d[0].localeCompare(m[0])));return{className:e.className,level:s,apCap:i.apCap,apUsed:i.apUsed,apRemaining:i.apRemaining,selectedIdsInput:[...n],activeIds:r,unresolvedIds:c,availableIds:i.availableIds,hardErrors:i.hardErrors,errors:i.errors,archetypeCounts:u,nodeStatusById:i.nodeStatusById}}function $A(e,n,s){let i=[...new Set(n)].filter(r=>e.nodeById.has(r));for(;;){const r=Gc(e,i,s);if(r.unresolvedIds.length===0&&r.apUsed<=r.apCap)return r.activeIds;const c=new Set(r.activeIds),u=i.filter(d=>c.has(d));if(u.length===i.length)return u;i=u}}function HA(e,n,s,i){if(!e.nodeById.has(s))return[...n];const r=new Set(n);return r.has(s)?(r.delete(s),$A(e,[...r],i)):Gc(e,n,i).nodeStatusById[s]?.selectable?(r.add(s),e.nodes.filter(d=>r.has(d.id)).map(d=>d.id)):[...n]}function vS(e,n){return!e||!n?null:e.classes[n]??null}function ZA(e){return e.length>20?`${e.slice(0,19)}`:e}function FA(e,n){return e??n??null}function GA(e){const n=FA(e.selectedClass,e.inferredClass),s=w.useMemo(()=>vS(e.dataset,n),[e.dataset,n]),i=w.useMemo(()=>n?e.selectionsByClass[n]??[]:[],[e.selectionsByClass,n]),r=w.useMemo(()=>s?Gc(s,i,e.level):null,[s,i,e.level]),[c,u]=w.useState(null);w.useEffect(()=>{if(!s){u(null);return}c!=null&&s.nodeById.has(c)||u(r?.activeIds[0]??s.nodes[0]?.id??null)},[s,c,r]);const d=w.useMemo(()=>!s||c==null?null:s.nodeById.get(c)??null,[s,c]),m=S=>{n&&e.onSelectionsChange({...e.selectionsByClass,[n]:S})},p=S=>{if(!s||!n)return;const _=HA(s,i,S,e.level);m(_),u(S)},v=()=>{n&&e.onSelectionsChange({...e.selectionsByClass,[n]:[]})},y=r?.activeIds.length??0,b=s?{gridTemplateColumns:`repeat(${Math.max(1,s.maxCol+1)}, minmax(56px, 1fr))`,gridTemplateRows:`repeat(${Math.max(1,s.maxRow+1)}, minmax(56px, auto))`}:void 0;return h.jsx(Ih,{open:e.open,onOpenChange:e.onOpenChange,title:"Ability Tree",description:"Legacy ability tree data and activation rules integrated into Workbench. Effects are tracked here, but Workbench DPS/EHP still excludes ability-tree math for now.",className:"w-[min(97vw,1320px)]",footer:h.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:n?`Editing ${n} tree at level ${e.level}.`:"Select a class (or equip a class weapon) to start editing an ability tree."}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Ce,{variant:"ghost",onClick:v,disabled:!n||y===0,children:"Reset Tree"}),h.jsx(Ce,{onClick:()=>e.onOpenChange(!1),children:"Done"})]})]}),children:e.loading?h.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-4 text-sm text-[var(--wb-muted)]",children:"Loading ability tree data..."}):e.error?h.jsx("div",{className:"rounded-xl border border-rose-400/30 bg-rose-400/8 p-4 text-sm text-rose-100",children:e.error}):n?!s||!r?h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-4 text-sm text-[var(--wb-muted)]",children:["No ability tree data available for ",n,"."]}):h.jsxs("div",{className:"grid min-h-0 grid-cols-1 gap-3 xl:grid-cols-[minmax(0,1fr)_360px]",children:[h.jsxs("div",{className:"min-h-0 space-y-3",children:[h.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-4",children:[h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"AP"}),h.jsxs("div",{className:"mt-1 text-lg font-semibold",children:[r.apUsed," / ",r.apCap]}),h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[r.apRemaining," left"]})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Selected"}),h.jsx("div",{className:"mt-1 text-lg font-semibold",children:r.activeIds.length}),h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[r.availableIds.length," available next"]})]}),h.jsxs("div",{className:"wb-card p-3 sm:col-span-2",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2 text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:[h.jsx(iT,{size:12}),"Archetypes"]}),h.jsx("div",{className:"flex flex-wrap gap-1",children:Object.keys(r.archetypeCounts).length===0?h.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:"No archetype points yet."}):Object.entries(r.archetypeCounts).map(([S,_])=>h.jsxs("span",{className:"wb-chip",children:[S,": ",_]},S))})]})]}),r.errors.length>0?h.jsxs("div",{className:"rounded-xl border border-amber-400/25 bg-amber-400/8 p-3",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2 text-xs font-semibold text-amber-100",children:[h.jsx(cT,{size:14}),"Tree Validation (",r.hardErrors?"hard":"soft"," issues)"]}),h.jsx(Vi,{className:"max-h-28",children:h.jsx("div",{className:"grid gap-1",children:r.errors.map((S,_)=>h.jsx("div",{className:"text-xs text-amber-100/95",children:S},`${S}-${_}`))})})]}):null,h.jsx(Yi,{title:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(fb,{size:14}),n," Tree"]}),headerRight:h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:e.selectedClass?"Using selected class":e.inferredClass?"Using weapon-inferred class":""}),className:"min-h-0",children:h.jsx(Vi,{className:"max-h-[52vh] p-3",children:h.jsx("div",{className:"atree-grid-container rounded-xl border border-[var(--wb-border-muted)] p-2",children:h.jsx("div",{className:"grid gap-2",style:b,children:s.nodes.map(S=>{const _=r.nodeStatusById[S.id],E=!!_?.active,C=!!_?.selectable,k=!!_?.hardBlocked,R=E?"atree-node--active":C?"atree-node--selectable":k?"atree-node--blocked":"atree-node--default";return h.jsxs("button",{type:"button",className:`atree-node ${R}`,style:{gridColumnStart:S.display.col+1,gridRowStart:S.display.row+1},title:_?.reason??"",onClick:()=>p(S.id),onMouseEnter:()=>u(S.id),onFocus:()=>u(S.id),children:[h.jsxs("div",{className:"text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:["#",S.id]}),h.jsx("div",{className:"mt-1 text-xs font-semibold leading-tight",children:ZA(S.displayName)}),h.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2 text-[10px]",children:[h.jsxs("span",{className:"text-[var(--wb-muted)]",children:["AP ",S.cost]}),S.archetype?h.jsx("span",{className:"wb-chip px-1.5 py-0.5",children:S.archetype}):null]})]},S.id)})})})})})]}),h.jsxs("div",{className:"min-h-0 space-y-3",children:[h.jsx(Yi,{title:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(ZE,{size:14}),"Node Details"]}),className:"min-h-0",children:h.jsx("div",{className:"space-y-3 p-3",children:d?h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-base font-semibold",children:d.displayName}),h.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[h.jsxs("span",{className:"wb-chip",children:["AP ",d.cost]}),d.archetype?h.jsx("span",{className:"wb-chip",children:d.archetype}):null,d.archetypeReq>0?h.jsxs("span",{className:"wb-chip",children:["Req ",d.reqArchetype||d.archetype||"Archetype",": ",d.archetypeReq]}):null,r.nodeStatusById[d.id]?.reason?h.jsx("span",{className:"wb-chip text-amber-100",children:r.nodeStatusById[d.id]?.reason}):null]})]}),h.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs leading-relaxed text-[var(--wb-text)] [&_br]:block [&_br]:content-[''] [&_span]:text-inherit",dangerouslySetInnerHTML:{__html:d.descriptionHtml||'<span class="text-slate-400">No description.</span>'}}),h.jsxs("div",{className:"grid gap-2 text-xs",children:[h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Parents"}),h.jsx("div",{className:"mt-1",children:d.parents.length===0?"Root node":d.parents.map(S=>s.nodeById.get(S)?.displayName??`#${S}`).join("  ")})]}),d.dependencies.length>0?h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Dependencies"}),h.jsx("div",{className:"mt-1",children:d.dependencies.map(S=>s.nodeById.get(S)?.displayName??`#${S}`).join("  ")})]}):null,d.blockers.length>0?h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Blockers"}),h.jsx("div",{className:"mt-1",children:d.blockers.map(S=>s.nodeById.get(S)?.displayName??`#${S}`).join("  ")})]}):null]})]}):h.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs text-[var(--wb-muted)]",children:"Hover or focus an ability node to inspect it here."})})}),h.jsx(Yi,{title:"Selected Abilities",className:"min-h-0",children:h.jsx(Vi,{className:"max-h-[28vh] p-3",children:r.activeIds.length===0?h.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs text-[var(--wb-muted)]",children:"No abilities selected yet."}):h.jsx("div",{className:"grid gap-1",children:r.activeIds.map(S=>{const _=s.nodeById.get(S);return _?h.jsx(Qe,{className:"justify-start text-left",active:c===S,onClick:()=>u(S),title:`AP ${_.cost}`,children:_.displayName},S):null})})})})]})]}):h.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-4 text-sm text-[var(--wb-muted)]",children:"Pick a class in the Workbench header, or equip a weapon so Workbench can infer the class and load the correct ability tree."})})}const YA=["helmet","chestplate","leggings","boots"],VA=["spear","wand","dagger","bow","relik"],KA=["ring","bracelet","necklace"],WA=["HELMET","CHESTPLATE","LEGGINGS","BOOTS","RELIK","WAND","SPEAR","DAGGER","BOW","RING","NECKLACE","BRACELET","POTION","SCROLL","FOOD"],XA=["1-3","3-5","5-7","7-9","10-13","13-15","15-17","17-19","20-23","23-25","25-27","27-29","30-33","33-35","35-37","37-39","40-43","43-45","45-47","47-49","50-53","53-55","55-57","57-59","60-63","63-65","65-67","67-69","70-73","73-75","75-77","77-79","80-83","83-85","85-87","87-89","90-93","93-95","95-97","97-99","100-103","103-105"],yS=["SLOW","NORMAL","FAST"];function Fh(e){const n=e.toLowerCase();return YA.includes(n)?"armor":VA.includes(n)?"weapon":KA.includes(n)?"accessory":"consumable"}const bS={offense:1,defense:.6,utility:.4,skillPoints:.3,reqPenalty:.5},qs={recipeType:"HELMET",levelRange:"103-105",matTiers:null,atkSpd:null,weights:bS,mustIncludeIngredients:[],excludedIngredients:[],topN:30,topKPerSlot:120,beamWidth:400,target:{},maxReqs:[null,null,null,null,null]},gs=4e3,R0=[0,1,1.25,1.4],uh=["e","t","w","f","a"],QA=[{min:3,max:6,convert:17,defPlus:2,defMinus:1},{min:5,max:8,convert:21,defPlus:4,defMinus:2},{min:6,max:10,convert:25,defPlus:8,defMinus:3},{min:7,max:10,convert:31,defPlus:14,defMinus:5},{min:9,max:11,convert:38,defPlus:22,defMinus:9},{min:11,max:13,convert:46,defPlus:30,defMinus:13},{min:1,max:8,convert:9,defPlus:3,defMinus:1},{min:1,max:12,convert:11,defPlus:5,defMinus:1},{min:2,max:15,convert:13,defPlus:9,defMinus:2},{min:3,max:15,convert:17,defPlus:14,defMinus:4},{min:4,max:17,convert:22,defPlus:20,defMinus:7},{min:5,max:20,convert:28,defPlus:28,defMinus:10},{min:3,max:4,convert:13,defPlus:3,defMinus:1},{min:4,max:6,convert:15,defPlus:6,defMinus:1},{min:5,max:8,convert:17,defPlus:11,defMinus:2},{min:6,max:8,convert:21,defPlus:18,defMinus:4},{min:7,max:10,convert:26,defPlus:28,defMinus:7},{min:9,max:11,convert:32,defPlus:40,defMinus:10},{min:2,max:5,convert:14,defPlus:3,defMinus:1},{min:4,max:8,convert:16,defPlus:5,defMinus:2},{min:5,max:9,convert:19,defPlus:9,defMinus:3},{min:6,max:9,convert:24,defPlus:16,defMinus:5},{min:8,max:10,convert:30,defPlus:25,defMinus:9},{min:10,max:12,convert:37,defPlus:36,defMinus:13},{min:2,max:6,convert:11,defPlus:3,defMinus:1},{min:3,max:10,convert:14,defPlus:6,defMinus:2},{min:4,max:11,convert:17,defPlus:10,defMinus:3},{min:5,max:11,convert:22,defPlus:16,defMinus:5},{min:7,max:12,convert:28,defPlus:24,defMinus:9},{min:8,max:14,convert:35,defPlus:34,defMinus:13}];function JA(e){return e/6|0}function eO(e){return uh[JA(e)]}function tO(e){const n=[[100,100],[100,100],[100,100]];for(let s=0;s<6;s++){const r=e[s].posMods,c=Math.floor(s/2),u=s%2;if(r.above!==0)for(let d=c-1;d>=0;d--)n[d][u]+=r.above;if(r.under!==0)for(let d=c+1;d<3;d++)n[d][u]+=r.under;if(r.left!==0&&u===1&&(n[c][u-1]+=r.left),r.right!==0&&u===0&&(n[c][u+1]+=r.right),r.touching!==0)for(let d=0;d<3;d++)for(let m=0;m<2;m++)(Math.abs(d-c)===1&&m===u||d===c&&Math.abs(m-u)===1)&&(n[d][m]+=r.touching);if(r.notTouching!==0)for(let d=0;d<3;d++)for(let m=0;m<2;m++)(Math.abs(d-c)>1||Math.abs(d-c)===1&&Math.abs(m-u)===1)&&(n[d][m]+=r.notTouching)}return n.flat()}function Gh(e,n,s,i){const r=e.type.toLowerCase(),c=Fh(r);let u=!0;for(const ce of s)if(ce.id!==gs){u=!1;break}let d=0,m=0;(c==="weapon"||c==="armor")&&(e.lvl[0]<30?d=1:e.lvl[0]<70?d=2:d=3),c==="consumable"&&(e.lvl[0]<30?m=1:e.lvl[0]<70?m=2:m=3,u&&(m=3));const p=e.materials.map(ce=>ce.amount),v=(R0[n[0]]*p[0]+R0[n[1]]*p[1])/(p[0]+p[1]);let y=[e.durability[0],e.durability[1]],b=[e.duration[0],e.duration[1]];c==="consumable"?(u&&(b=[e.basicDuration[0],e.basicDuration[1]]),b=[Math.round(b[0]*v),Math.round(b[1]*v)]):y=[Math.round(y[0]*v),Math.round(y[1]*v)];const S=e.healthOrDamage[0],_=e.healthOrDamage[1];let E=0,C=0,k="0-0",R="0-0";const z={e:0,t:0,w:0,f:0,a:0};if(c==="armor")E=Math.floor(_*v),C=Math.floor(S*v);else if(c==="weapon"){let ce=2.05;i==="SLOW"?ce/=1.5:i==="NORMAL"?ce=1:i==="FAST"&&(ce/=2.5);const $=Math.floor(Math.floor(S*v)*ce),X=Math.floor(Math.floor(_*v)*ce);R=`${Math.floor($*.9)}-${Math.floor($*1.1)}`,k=`${Math.floor(X*.9)}-${Math.floor(X*1.1)}`}else c==="consumable"&&u&&(E=Math.floor(_*v),C=Math.floor(S*v));if(c==="armor"||c==="accessory"){for(const ce of s)if(ce.isPowder&&ce.pid!=null){const $=QA[ce.pid],X=eO(ce.pid),L=uh[(uh.indexOf(X)+4)%5];z[X]=(z[X]||0)+$.defPlus,z[L]=(z[L]||0)-$.defMinus}}const B=tO(s),q=[0,0,0,0,0],M={},j={};for(let ce=0;ce<6;ce++){const $=s[ce],X=B[ce]/100,L=$.itemIDs;if(c!=="consumable"){const Y=["strReq","dexReq","intReq","defReq","agiReq"];for(let te=0;te<Y.length;te++){const A=L[Y[te]];A!==0&&($.isPowder?q[te]+=Math.round(A):q[te]+=Math.round(A*X))}}L.dura!==0&&(y[0]+=L.dura,y[1]+=L.dura),$.consumableIDs.dura!==0&&(b[0]+=$.consumableIDs.dura,b[1]+=$.consumableIDs.dura),$.consumableIDs.charges!==0&&(m+=$.consumableIDs.charges);for(const[Y,te]of Object.entries($.ids)){if(te.max===0&&te.min===0)continue;let A=te.min,V=te.max;const N=[Math.floor(A*X),Math.floor(V*X)].sort((I,J)=>I-J);A=N[0],V=N[1],j[Y]=(j[Y]??0)+A,M[Y]=(M[Y]??0)+V}}return y[0]=Math.max(1,Math.floor(y[0])),y[1]=Math.max(1,Math.floor(y[1])),u||(b[0]=Math.max(10,b[0]),b[1]=Math.max(10,b[1])),m=Math.max(m,c==="consumable"?1:0),{category:c,type:r,lvl:e.lvl[1],hp:E,hpLow:C,nDam:k,nDamLow:R,eDam:"0-0",tDam:"0-0",wDam:"0-0",fDam:"0-0",aDam:"0-0",eDef:z.e,tDef:z.t,wDef:z.w,fDef:z.f,aDef:z.a,atkSpd:i,durability:y,duration:b,charges:m,slots:d,reqs:[q[0],q[1],q[2],q[3],q[4]],effectiveness:B,maxRolls:M,minRolls:j}}function xS(e,n,s,i,r){const c={SLOW:0,NORMAL:1,FAST:2},u=[0];let d=0;function m(b,S){for(let _=0;_<S;_++){const E=b>>>_&1,C=d+_,k=C>>>5;for(;k>=u.length;)u.push(0);E&&(u[k]|=1<<(C&31))}d+=S}m(0,1),m(2,7);for(const b of e)m(b,12);m(n,12),m(s[0]-1,3),m(s[1]-1,3),r==="weapon"&&m(c[i]??0,4);const p=d%6;p!==0&&m(0,6-p);const v="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+-";let y="";for(let b=0;b<d;b+=6){let S=0;for(let _=0;_<6;_++){const E=b+_;E<d&&(S|=(u[E>>>5]>>>(E&31)&1)<<_)}y+=v[S]}return"CR-"+y}const SS=["sdPct","sdRaw","mdPct","mdRaw","damPct","poison","fDamPct","wDamPct","aDamPct","tDamPct","eDamPct","spPct1","spRaw1","spPct2","spRaw2","spPct3","spRaw3","spPct4","spRaw4","rSdRaw","critDamPct"],wS=["hpBonus","hprRaw","hprPct","fDefPct","wDefPct","aDefPct","tDefPct","eDefPct"],_S=["mr","ms","ls","spd","xpb","lb","ref","thorns","spRegen","eSteal","sprint","sprintReg","jh","lq","gXp","gSpd"],ES=["str","dex","int","def","agi"];function TS(e,n){let s=0;for(const i of n){const r=e.maxRolls[i]??0;r>0&&(s+=r)}return s}function nO(e,n){let s=0;for(const i of n)s+=e.maxRolls[i]??0;return s}function aO(e){let n=TS(e,SS);return e.category==="armor"&&(n+=e.hp*.02),n}function sO(e){let n=TS(e,wS);return e.category==="armor"&&(n+=e.hp*.15),n+=Math.max(0,e.eDef)+Math.max(0,e.tDef)+Math.max(0,e.wDef)+Math.max(0,e.fDef)+Math.max(0,e.aDef),n}function iO(e){let n=0;const s=e.maxRolls.mr??0,i=e.maxRolls.ms??0,r=e.maxRolls.ls??0,c=e.maxRolls.spd??0;n+=s*12+i*8+r*6+c*3;for(const u of _S){if(u==="mr"||u==="ms"||u==="ls"||u==="spd")continue;const d=e.maxRolls[u]??0;d>0&&(n+=d)}return n}function lO(e){return nO(e,ES)}function rO(e){let n=0;for(const s of e.reqs)n+=Math.max(0,s);return n}function NS(e,n){if(n==="durability")return[e.durability[0],e.durability[1]];if(n==="duration")return[e.duration[0],e.duration[1]];const s=e.maxRolls[n]??0;return[s,s]}function oO(e,n){let s=0;for(const[i,r]of Object.entries(n)){const[c,u]=NS(e,i);if(typeof r.min=="number"&&c<r.min){const d=r.min-c;s+=d*200+d*d}if(typeof r.max=="number"&&u>r.max){const d=u-r.max;s+=d*200+d*d}}return s}function MS(e,n){for(const[s,i]of Object.entries(n)){const[r,c]=NS(e,s);if(typeof i.min=="number"&&r<i.min||typeof i.max=="number"&&c>i.max)return!1}return!0}function Yh(e,n,s){const i=aO(e)*n.offense,r=sO(e)*n.defense,c=iO(e)*n.utility,u=lO(e)*n.skillPoints,d=rO(e)*n.reqPenalty,m=oO(e,s.target),p={offense:i,defense:r,utility:c,skillPoints:u,reqPenalty:d,thresholdPenalty:m};return{score:i+r+c+u-d-m,breakdown:p}}function Vh(e,n,s){let i=0;for(const[c,u]of Object.entries(e.ids)){const d=u.max;SS.includes(c)&&d>0?i+=d*n.offense:wS.includes(c)&&d>0?i+=d*n.defense:_S.includes(c)?c==="mr"?i+=d*12*n.utility:c==="ms"?i+=d*8*n.utility:c==="ls"?i+=d*6*n.utility:c==="spd"?i+=d*3*n.utility:d>0&&(i+=d*n.utility):ES.includes(c)&&(i+=d*n.skillPoints),s?.has(c)&&d>0&&(i+=d*50)}const r=Math.max(0,e.itemIDs.strReq)+Math.max(0,e.itemIDs.dexReq)+Math.max(0,e.itemIDs.intReq)+Math.max(0,e.itemIDs.defReq)+Math.max(0,e.itemIDs.agiReq);return i-=r*n.reqPenalty*.5,i}const St=6,cO=.65,dh=2e3,uO=36,dO=12,fO=12,jS=10;function hO(e,n,s){const i=e.recipesByType.get(n.toUpperCase());if(!i)return null;const r=`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()}-${s}`;return i.find(c=>c.name===r)??null}function mO(e,n,s){const i=n.skill.toUpperCase(),r=n.lvl[1],c=new Set(s.excludedIngredients),u=[];for(const d of e.ingredients)d.id!==gs&&(c.has(d.id)||d.lvl>r||d.skills.some(m=>m.toUpperCase()===i)&&u.push(d));return u}function br(e,n){return n==="durability"?e.itemIDs.dura??0:n==="duration"?e.consumableIDs.dura??0:e.ids[n]?.max??0}function gO(e){const n=e.posMods;return n.left>0||n.right>0||n.above>0||n.under>0||n.touching>0||n.notTouching>0}function CS(e){const n=e.posMods;return Math.max(0,n.left)+Math.max(0,n.right)+Math.max(0,n.above)+Math.max(0,n.under)+Math.max(0,n.touching)+Math.max(0,n.notTouching)}function DS(e,n){let s=0;for(const i of n){const r=br(e,i);r>0&&(s+=r)}return s}function pO(e,n,s){const i=new Set(s.mustIncludeIngredients),r=new Set(Object.keys(s.target)),c=r.size>0,u=n.map(y=>({ing:y,score:Vh(y,s.weights,c?r:void 0)}));u.sort((y,b)=>b.score-y.score);const d=s.topKPerSlot,m=new Set,p=[e.noIngredient];m.add(gs);let v=0;for(const{ing:y}of u)i.has(y.id)&&!m.has(y.id)&&(m.add(y.id),p.push(y));for(const{ing:y}of u)if(!m.has(y.id)&&(m.add(y.id),p.push(y),v++,v>=d))break;if(c){const y=n.filter(S=>!m.has(S.id)).map(S=>({ing:S,tScore:Array.from(r).reduce((_,E)=>{const C=br(S,E);return C>0?_+C:_},0)})).filter(({tScore:S})=>S>0);y.sort((S,_)=>_.tScore-S.tScore);const b=Math.min(y.length,Math.max(30,Math.floor(d/2)));for(let S=0;S<b;S++){const{ing:_}=y[S];m.has(_.id)||(m.add(_.id),p.push(_))}}return p}function RS(e,n){if(n.size===0)return 0;const s=new Set(e);let i=0;for(const r of n)s.has(r)||i++;return i}function kS(e,n){const s=n.maxReqs;for(let i=0;i<5;i++){const r=s[i];if(r!=null&&Math.max(0,e.reqs[i])>r)return!1}return!0}function AS(e,n){if(n.size===0)return!0;const s=new Set(e);for(const i of n)if(!s.has(i))return!1;return!0}function vO(e,n,s,i,r,c){const u=[];for(let v=0;v<St;v++)v<n.length?u.push(s.ingredientsById.get(n[v])??s.noIngredient):u.push(s.noIngredient);const d=Gh(e,r,u,c),{score:m,breakdown:p}=Yh(d,i.weights,i);return{score:m,thresholdPenalty:p.thresholdPenalty}}function yO(e,n,s){const i=Math.floor(n/2),r=n%2,c=Math.floor(s/2),u=s%2;if(i===c&&r===u)return 0;let d=0;return u===r&&c<i&&(d+=e.above),u===r&&c>i&&(d+=e.under),i===c&&r===1&&u===0&&(d+=e.left),i===c&&r===0&&u===1&&(d+=e.right),(Math.abs(c-i)===1&&u===r||c===i&&Math.abs(u-r)===1)&&(d+=e.touching),(Math.abs(c-i)>1||Math.abs(c-i)===1&&Math.abs(u-r)===1)&&(d+=e.notTouching),d}function bO(e){const n=[];for(let s=0;s<St;s++){let i=100;for(let r=0;r<St;r++){if(r===s)continue;let c=0;for(const u of e){const d=yO(u.posMods,r,s);d>c&&(c=d)}i+=Math.max(0,c)}n[s]=Math.max(0,i)/100}return n}function k0(e,n,s){const i=br(e,n);if(i<=0)return 0;let r=0;for(const c of s){const u=Math.ceil(i*c);u>r&&(r=u)}return r}function xO(e,n,s){if(s.size>St)return`Unsatisfiable constraints: ${s.size} distinct must-include ingredients exceed ${St} slots.`;const i=new Map;for(const u of e)i.set(u.id,u);for(const u of s)if(!i.has(u))return`Unsatisfiable constraints: must-include ingredient #${u} is not eligible for this recipe/level range.`;const r=bO(e),c=Math.max(0,St-s.size);for(const[u,d]of Object.entries(n.target)){if(typeof d.min!="number"||u==="durability"||u==="duration")continue;let m=0;for(const y of e){const b=k0(y,u,r);b>m&&(m=b)}let p=0;for(const y of s){const b=i.get(y);b&&(p+=k0(b,u,r))}const v=p+c*m;if(v<d.min)return`Unsatisfiable threshold: ${u} min ${d.min} exceeds theoretical max ${v} for the current recipe/level/ingredient pool.`}return null}function SO(e,n,s,i){const r=Object.keys(s.target),c=s.maxReqs.some(S=>S!=null),u=new Set(r),d=new Set,m=[],p=new Map;for(const S of n)p.set(S.id,S);const v=S=>{!S||d.has(S.id)||(d.add(S.id),m.push(S))};v(e.noIngredient);for(const S of i)v(p.get(S));const y=n.map(S=>({ing:S,score:DS(S,r)})).filter(({score:S})=>S>0).sort((S,_)=>_.score-S.score);for(let S=0;S<Math.min(uO,y.length);S++)v(y[S].ing);const b=n.filter(gO).map(S=>({ing:S,score:CS(S)})).sort((S,_)=>_.score-S.score);for(let S=0;S<Math.min(dO,b.length);S++)v(b[S].ing);if(c){const S=n.map(_=>{const E=Math.max(0,-_.itemIDs.strReq)+Math.max(0,-_.itemIDs.dexReq)+Math.max(0,-_.itemIDs.intReq)+Math.max(0,-_.itemIDs.defReq)+Math.max(0,-_.itemIDs.agiReq);return{ing:_,reduction:E}}).filter(({reduction:_})=>_>0).sort((_,E)=>E.reduction-_.reduction);for(let _=0;_<Math.min(fO,S.length);_++)v(S[_].ing)}if(m.length<12){const S=n.map(_=>({ing:_,score:Vh(_,s.weights,u)})).sort((_,E)=>E.score-_.score);for(const{ing:_}of S)if(v(_),m.length>=12)break}return m}function wO(e,n,s,i,r){for(const[c,u]of Object.entries(i.target)){if(typeof u.min!="number"||c==="durability"||c==="duration")continue;let d=0;for(const p of e){const v=s.get(p);if(!v)continue;const y=Math.max(0,br(v,c));d+=y*jS}if(d+n*(r.get(c)??0)<u.min)return!1}return!0}function _O(e){const{recipe:n,catalog:s,constraints:i,category:r,matTierOptions:c,atkSpdOptions:u,mustIncludeSet:d,eligible:m,signal:p}=e,v=Date.now();let y=!1,b=0;const S=Object.keys(i.target),_=SO(s,m,i,d);if(_.length===0)return{candidates:[],processedStates:0,timedOut:!1,detail:"Deterministic fallback had no eligible fallback ingredients to explore."};const E=new Map;for(const[D,Z]of Object.entries(i.target)){if(typeof Z.min!="number"||D==="durability"||D==="duration")continue;let le=0;for(const de of _){const ne=Math.max(0,br(de,D));ne>le&&(le=ne)}E.set(D,le*jS)}const C=new Map;for(const D of _){const Z=Math.max(0,-D.itemIDs.strReq)+Math.max(0,-D.itemIDs.dexReq)+Math.max(0,-D.itemIDs.intReq)+Math.max(0,-D.itemIDs.defReq)+Math.max(0,-D.itemIDs.agiReq);C.set(D.id,{threshold:DS(D,S),support:CS(D),reqReduce:Z,rough:Vh(D,i.weights,new Set(S))})}const k=[..._].sort((D,Z)=>{if(D.id===gs&&Z.id!==gs)return 1;if(Z.id===gs&&D.id!==gs)return-1;const le=d.has(D.id)?1:0,de=d.has(Z.id)?1:0;if(le!==de)return de-le;const ne=C.get(D.id),ce=C.get(Z.id);return!ne||!ce?0:ne.threshold!==ce.threshold?ce.threshold-ne.threshold:ne.reqReduce!==ce.reqReduce?ce.reqReduce-ne.reqReduce:ne.support!==ce.support?ce.support-ne.support:ce.rough-ne.rough}),R=new Map;for(const D of _)R.set(D.id,D);const z=new Map,B=()=>Date.now()-v>=dh?(y=!0,!0):!1,q=(D,Z)=>{if(y)return;if(p?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");if(B())return;const le=St-D;if(!(RS(Z,d)>le)&&wO(Z,le,R,i,E)){if(D===St){const ne=[...Z];if(!AS(ne,d))return;const ce=ne.map($=>R.get($)??s.noIngredient);for(const $ of c)for(const X of u){if(p?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");if(B())return;const L=Gh(n,$,ce,X);if(b++,!kS(L,i)||!MS(L,i.target))continue;const{score:Y,breakdown:te}=Yh(L,i.weights,i),A=xS(ne,n.id,$,X,r),V=ne.join(",")+"|"+$.join(",")+"|"+X,N=z.get(V);(!N||Y>N.score)&&z.set(V,{recipeId:n.id,ingredientIds:ne,matTiers:$,atkSpd:X,effectiveness:L.effectiveness,stats:L,score:Y,scoreBreakdown:te,hash:A})}return}for(const ne of k)if(Z.push(ne.id),q(D+1,Z),Z.pop(),y)return}};q(0,[]);const M=Array.from(z.values());M.sort((D,Z)=>Z.score-D.score);const j=M.slice(0,i.topN);return{candidates:j,processedStates:b,timedOut:y,detail:y?`Deterministic fallback hit ${dh}ms time budget after ${b} evaluated states.`:`Deterministic fallback evaluated ${b} states and found ${j.length} threshold-satisfying candidates.`}}function OS(e){const{catalog:n,constraints:s,signal:i,onProgress:r,alreadyThresholdRescue:c=!1}=e,u=hO(n,s.recipeType,s.levelRange);if(!u)return r?.({phase:"complete",processedStates:0,beamSize:0,expandedSlots:0,totalSlots:St,detail:`No recipe found for ${s.recipeType}-${s.levelRange}.`}),[];const d=Fh(u.type.toLowerCase()),m=new Set(s.mustIncludeIngredients),p=Object.keys(s.target).length>0,v=mO(n,u,s);if(v.length===0)return r?.({phase:"complete",processedStates:0,beamSize:0,expandedSlots:0,totalSlots:St,detail:"No eligible ingredients remain after recipe, level, and exclusion filters."}),[];const y=xO(v,s,m);if(y)return r?.({phase:"complete",processedStates:0,beamSize:0,expandedSlots:0,totalSlots:St,detail:y}),[];const b=pO(n,v,s);if(b.length===0)return[];const S=s.matTiers?[s.matTiers]:[[1,1],[1,2],[1,3],[2,1],[2,2],[2,3],[3,1],[3,2],[3,3]],_=d==="weapon"?s.atkSpd?[s.atkSpd]:[...yS]:["SLOW"],E=S[S.length-1],C=_[0],k=s.beamWidth;let R=0;const z=m.size>0?1e6:0;let B=[{ingredientIds:[],score:0,thresholdPenalty:p?Number.POSITIVE_INFINITY:0,missingMust:m.size}];for(let ne=0;ne<St;ne++){if(i?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");const ce=[];for(const L of B)for(const Y of b){if(i?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");const te=[...L.ingredientIds,Y.id],A=vO(u,te,n,s,E,C),V=RS(te,m);let N=A.score;z>0&&V===0&&(N+=z),ce.push({ingredientIds:te,score:N,thresholdPenalty:A.thresholdPenalty,missingMust:V}),R++}const $=new Set,X=(L,Y)=>{for(const te of L){const A=te.ingredientIds.join(",");if(!$.has(A)&&($.add(A),Y.push(te),Y.length>=k))break}};if(p){const L=Math.max(1,Math.floor(k*cO)),Y=Math.max(1,k-L),te=[...ce].sort((N,I)=>I.score-N.score).slice(0,L),A=[...ce].sort((N,I)=>N.missingMust!==I.missingMust?N.missingMust-I.missingMust:N.thresholdPenalty!==I.thresholdPenalty?N.thresholdPenalty-I.thresholdPenalty:I.score-N.score).slice(0,Y),V=[];X(te,V),V.length<k&&X(A,V),V.length<k&&X(ce.sort((N,I)=>I.score-N.score),V),B=V.slice(0,k)}else{const L=[];X(ce.sort((Y,te)=>te.score-Y.score),L),B=L.slice(0,k)}r?.({phase:"beam-search",processedStates:R,beamSize:B.length,expandedSlots:ne+1,totalSlots:St,detail:p?`Dual-lane prune (score + threshold) on pool=${b.length}`:`Score-lane prune on pool=${b.length}`})}r?.({phase:"material-sweep",processedStates:R,beamSize:B.length,expandedSlots:St,totalSlots:St,detail:`Sweeping ${S.length} tier combos x ${_.length} atk speeds`});const q=new Map;for(const ne of B){if(i?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");const ce=ne.ingredientIds,$=ce.map(X=>n.ingredientsById.get(X)??n.noIngredient);for(const X of S)for(const L of _){const Y=Gh(u,X,$,L),{score:te,breakdown:A}=Yh(Y,s.weights,s),V=xS(ce,u.id,X,L,d),N=ce.join(",")+"|"+X.join(",")+"|"+L,I=q.get(N);(!I||te>I.score)&&q.set(N,{recipeId:u.id,ingredientIds:ce,matTiers:X,atkSpd:L,effectiveness:Y.effectiveness,stats:Y,score:te,scoreBreakdown:A,hash:V}),R++}}const M=Array.from(q.values());M.sort((ne,ce)=>ce.score-ne.score);const j=new Set,D=[],Z=[];for(const ne of M)j.has(ne.hash)||(j.add(ne.hash),AS(ne.ingredientIds,m)&&kS(ne.stats,s)&&(p&&MS(ne.stats,s.target)?D.push(ne):Z.push(ne)));if(p&&D.length===0&&!c){const ne={...s,topKPerSlot:Math.min(400,Math.max(s.topKPerSlot*2,180)),beamWidth:Math.min(5e3,Math.max(s.beamWidth*2,1200))};if(ne.topKPerSlot!==s.topKPerSlot||ne.beamWidth!==s.beamWidth){r?.({phase:"threshold-rescue",processedStates:R,beamSize:B.length,expandedSlots:St,totalSlots:St,detail:`No candidates satisfied thresholds. Retrying beam with topK=${ne.topKPerSlot}, beam=${ne.beamWidth}.`});const X=OS({catalog:n,constraints:ne,signal:i,onProgress:r,alreadyThresholdRescue:!0});if(X.length>0)return X}r?.({phase:"deterministic-fallback",processedStates:R,beamSize:0,expandedSlots:St,totalSlots:St,detail:`Beam search produced no threshold-satisfying candidates. Running deterministic fallback (<=${dh}ms).`});const $=_O({recipe:u,catalog:n,constraints:s,category:d,matTierOptions:S,atkSpdOptions:_,mustIncludeSet:m,eligible:v,signal:i});return R+=$.processedStates,$.candidates.length>0?(r?.({phase:"complete",processedStates:R,beamSize:$.candidates.length,expandedSlots:St,totalSlots:St,detail:`Beam/rescue found 0 threshold-satisfying candidates. ${$.detail}`}),$.candidates):(r?.({phase:"complete",processedStates:R,beamSize:0,expandedSlots:St,totalSlots:St,detail:$.timedOut?`No valid candidates found before timeout. ${$.detail}`:`No candidates satisfy all hard thresholds. ${$.detail}`}),[])}const le=p?D.slice(0,s.topN):Z.slice(0,s.topN),de=D.length;return r?.({phase:"complete",processedStates:R,beamSize:le.length,expandedSlots:St,totalSlots:St,detail:p?de>0?`Found ${le.length} candidates (${de} satisfy thresholds) from ${R} states`:`Found 0 candidates satisfying thresholds (${Z.length} failed threshold checks) from ${R} states`:`Found ${le.length} candidates from ${R} states`}),le}class EO{worker=null;requestId=0;currentReject=null;currentRequestId=null;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL(""+new URL("worker-runtime-SnnIJB8f.js",import.meta.url).href,import.meta.url),{type:"module"}))}async run(n,s,i={}){if(!this.worker)return OS({catalog:n,constraints:s,onProgress:i.onProgress,signal:i.signal});const r=++this.requestId;return this.currentRequestId=r,new Promise((c,u)=>{this.currentReject=u;const d=()=>{this.worker?.postMessage({type:"cancel",requestId:r}),u(new DOMException("Recipe solver cancelled","AbortError"))};i.signal?.addEventListener("abort",d,{once:!0});const m=p=>{const v=p.data;if(v.requestId===r){if(v.type==="progress"){i.onProgress?.(v.progress);return}if(this.worker?.removeEventListener("message",m),i.signal?.removeEventListener("abort",d),this.currentReject=null,this.currentRequestId=null,v.type==="error"){u(new Error(v.message));return}c(v.candidates)}};this.worker.addEventListener("message",m),this.worker.postMessage({type:"run",requestId:r,catalog:n,constraints:s})})}cancelCurrent(){this.currentRequestId!==null&&(this.worker?.postMessage({type:"cancel",requestId:this.currentRequestId}),this.currentReject?.(new DOMException("Recipe solver cancelled","AbortError")),this.currentReject=null,this.currentRequestId=null)}dispose(){this.worker?.terminate(),this.worker=null}}function Xl(e){return e?[e.minimum,e.maximum]:[0,0]}function TO(e){const n={item:e.materials[0].item,amount:e.materials[0].amount},s={item:e.materials[1].item,amount:e.materials[1].amount};return{id:e.id,name:e.name,type:e.type,skill:e.skill,materials:[n,s],healthOrDamage:Xl(e.healthOrDamage),durability:Xl(e.durability),duration:Xl(e.duration),basicDuration:Xl(e.basicDuration),lvl:Xl(e.lvl)}}function NO(e){const n={};if(e.ids)for(const[c,u]of Object.entries(e.ids))u&&typeof u=="object"&&"minimum"in u&&(n[c]={min:u.minimum,max:u.maximum});const s={left:e.posMods?.left??0,right:e.posMods?.right??0,above:e.posMods?.above??0,under:e.posMods?.under??0,touching:e.posMods?.touching??0,notTouching:e.posMods?.notTouching??0},i={dura:e.itemIDs?.dura??0,strReq:e.itemIDs?.strReq??0,dexReq:e.itemIDs?.dexReq??0,intReq:e.itemIDs?.intReq??0,defReq:e.itemIDs?.defReq??0,agiReq:e.itemIDs?.agiReq??0},r={dura:e.consumableIDs?.dura??0,charges:e.consumableIDs?.charges??0};return{id:e.id,name:e.name,displayName:e.displayName??e.name,lvl:e.lvl,tier:e.tier,skills:e.skills??[],ids:n,itemIDs:i,consumableIDs:r,posMods:s,isPowder:e.isPowder,pid:e.pid}}function MO(){return{id:gs,name:"No Ingredient",displayName:"No Ingredient",lvl:0,tier:0,skills:[],ids:{},itemIDs:{dura:0,strReq:0,dexReq:0,intReq:0,defReq:0,agiReq:0},consumableIDs:{dura:0,charges:0},posMods:{left:0,right:0,above:0,under:0,touching:0,notTouching:0}}}function jO(e,n){const s=new Map,i=new Map;for(const p of e){s.set(p.id,p);const v=p.type.toUpperCase(),y=i.get(v)??[];y.push(p),i.set(v,y)}const r=MO(),c=[r,...n],u=new Map,d=new Map,m=new Map;for(const p of c){u.set(p.id,p),m.set(p.name.toLowerCase(),p.id),p.displayName&&m.set(p.displayName.toLowerCase(),p.id);for(const v of p.skills){const y=v.toUpperCase(),b=d.get(y)??[];b.push(p),d.set(y,b)}}return{recipes:e,recipesById:s,recipesByType:i,ingredients:c,ingredientsById:u,ingredientsBySkill:d,ingredientIdByName:m,noIngredient:r}}async function A0(e){let n=null;for(const s of e)try{const i=await fetch(s,{cache:"force-cache"});if(!i.ok)throw new Error(`HTTP ${i.status} for ${s}`);return await i.json()}catch(i){n=i}throw n instanceof Error?n:new Error("Failed to fetch data")}class CO{snapshotPromise=null;async getCatalog(){return this.snapshotPromise||(this.snapshotPromise=this.load()),this.snapshotPromise}async load(){const n=m=>{if(typeof window>"u")return m;const p=window.location.href.split("?")[0].replace(/\/[^/]*$/,"/")||window.location.origin+"/";return new URL(m,p).href},s=[n("recipes_compress.json"),"./recipes_compress.json","../recipes_compress.json","recipes_compress.json"],i=[n("ingreds_compress.json"),"./ingreds_compress.json","../ingreds_compress.json","ingreds_compress.json"],[r,c]=await Promise.all([A0(s),A0(i)]),u=r.recipes.map(TO),d=c.map(NO);return jO(u,d)}}const DO=new CO,RO={helmet:"helmet",chestplate:"chestplate",leggings:"leggings",boots:"boots",ring:"ring1",bracelet:"bracelet",necklace:"necklace",spear:"weapon",bow:"weapon",wand:"weapon",dagger:"weapon",relik:"weapon"},kO={advancedIds:"Advanced IDs only",balanced:"Balanced",offense:"Offense",defense:"Defense",utility:"Utility / Sustain",skillpoints:"Skill Points"},AO=["advancedIds","balanced","offense","defense","utility","skillpoints"];function OO(e){const n={...bS};switch(e){case"advancedIds":return{offense:.25,defense:.25,utility:.25,skillPoints:.25,reqPenalty:.25};case"offense":return{offense:2,defense:0,utility:0,skillPoints:0,reqPenalty:0};case"defense":return{offense:0,defense:2,utility:0,skillPoints:0,reqPenalty:0};case"utility":return{offense:0,defense:0,utility:2,skillPoints:0,reqPenalty:0};case"skillpoints":return{offense:0,defense:0,utility:0,skillPoints:2,reqPenalty:0};default:return n}}const zO={durability:"Durability",duration:"Duration",sdPct:"Spell Dmg %",sdRaw:"Spell Dmg Raw",mdPct:"Melee Dmg %",mdRaw:"Melee Dmg Raw",damPct:"Damage %",poison:"Poison",hpBonus:"HP Bonus",hprRaw:"HPR Raw",hprPct:"HPR %",mr:"Mana Regen",ms:"Mana Steal",ls:"Life Steal",spd:"Walk Speed",xpb:"XP Bonus",lb:"Loot Bonus",ref:"Reflection",thorns:"Thorns",expd:"Exploding",str:"STR",dex:"DEX",int:"INT",def:"DEF",agi:"AGI",eDamPct:"Earth Dmg %",tDamPct:"Thunder Dmg %",wDamPct:"Water Dmg %",fDamPct:"Fire Dmg %",aDamPct:"Air Dmg %",nDamPct:"Neutral Dmg %",rDamPct:"Elem Dmg %",eDefPct:"Earth Def %",tDefPct:"Thunder Def %",wDefPct:"Water Def %",fDefPct:"Fire Def %",aDefPct:"Air Def %",rDefPct:"Elem Def %",atkTier:"Atk Speed Bonus",spRegen:"Soul Point Regen",eSteal:"Emerald Steal",rSdRaw:"Rainbow Spell Raw",critDamPct:"Crit Damage %",spPct1:"1st Spell Cost %",spRaw1:"1st Spell Cost Raw",spPct2:"2nd Spell Cost %",spRaw2:"2nd Spell Cost Raw",spPct3:"3rd Spell Cost %",spRaw3:"3rd Spell Cost Raw",spPct4:"4th Spell Cost %",spRaw4:"4th Spell Cost Raw",sprint:"Sprint",sprintReg:"Sprint Regen",jh:"Jump Height",lq:"Loot Quality",gXp:"Gather XP",gSpd:"Gather Speed",healPct:"Healing %",kb:"Knockback",weakenEnemy:"Weaken Enemy",slowEnemy:"Slow Enemy",maxMana:"Max Mana",mainAttackRange:"Main Attack Range",eDamRaw:"Earth Dmg Raw",tDamRaw:"Thunder Dmg Raw",wDamRaw:"Water Dmg Raw",fDamRaw:"Fire Dmg Raw",aDamRaw:"Air Dmg Raw",nDamRaw:"Neutral Dmg Raw",damRaw:"Damage Raw",rDamRaw:"Elem Dmg Raw"},O0=["durability","duration","hprPct","mr","sdPct","mdPct","ls","ms","xpb","lb","ref","thorns","expd","spd","atkTier","poison","hpBonus","spRegen","eSteal","hprRaw","sdRaw","mdRaw","fDamPct","wDamPct","aDamPct","tDamPct","eDamPct","nDamPct","rDamPct","damPct","fDefPct","wDefPct","aDefPct","tDefPct","eDefPct","rDefPct","spPct1","spRaw1","spPct2","spRaw2","spPct3","spRaw3","spPct4","spRaw4","rSdRaw","sprint","sprintReg","jh","lq","gXp","gSpd","eDamRaw","tDamRaw","wDamRaw","fDamRaw","aDamRaw","nDamRaw","damRaw","rDamRaw","critDamPct","healPct","maxMana","str","dex","int","def","agi"];function zS(e){return zO[e]??e}const Qo={HELMET:"ARMOURING",CHESTPLATE:"TAILORING",LEGGINGS:"TAILORING",BOOTS:"TAILORING",SPEAR:"WEAPONSMITHING",DAGGER:"WEAPONSMITHING",WAND:"WOODWORKING",BOW:"WOODWORKING",RELIK:"WOODWORKING",RING:"JEWELING",NECKLACE:"JEWELING",BRACELET:"JEWELING",POTION:"ALCHEMISM",SCROLL:"SCRIBING",FOOD:"COOKING"};function PO(e){const n=w.useRef(null);n.current||(n.current=new EO);const[s,i]=w.useState(null),[r,c]=w.useState(null),[u,d]=w.useState("HELMET"),[m,p]=w.useState("103-105"),[v,y]=w.useState("auto"),[b,S]=w.useState(3),[_,E]=w.useState(3),[C,k]=w.useState("auto"),[R,z]=w.useState("FAST"),[B,q]=w.useState("advancedIds"),[M,j]=w.useState(""),[D,Z]=w.useState(""),[le,de]=w.useState([]),ne=w.useRef(1),[ce,$]=w.useState(qs.beamWidth),[X,L]=w.useState(qs.topKPerSlot),[Y,te]=w.useState(qs.topN),[A,V]=w.useState([null,null,null,null,null]),[N,I]=w.useState([]),[J,oe]=w.useState(""),[ue,re]=w.useState(!1),[ye,xe]=w.useState(null),[ge,Ee]=w.useState(null),[Be,lt]=w.useState(null),At=w.useRef(null),dt=Fh(u.toLowerCase())==="weapon";w.useEffect(()=>{e.open&&(s||DO.getCatalog().then(i).catch(fe=>{c(fe instanceof Error?fe.message:"Failed to load crafting data")}))},[e.open,s]);const Kt=w.useMemo(()=>{if(!s)return 0;const fe=Qo[u]??"";return s.ingredientsBySkill.get(fe)?.length??0},[s,u]);function gt(fe){if(!s)return{ids:[],unknown:[]};const Oe=fe.split(",").map(Pe=>Pe.trim()).filter(Boolean),De=[],Je=[];for(const Pe of Oe){const Wt=s.ingredientIdByName.get(Pe.toLowerCase());Wt==null?Je.push(Pe):De.push(Wt)}return{ids:De,unknown:Je}}const tn=fe=>{navigator.clipboard.writeText(fe).then(()=>{lt(fe),setTimeout(()=>lt(null),2e3)})},nn=async()=>{if(!s)return;xe(null),I([]),Ee(null);const fe=gt(M),Oe=gt(D);if(fe.unknown.length>0||Oe.unknown.length>0){xe([fe.unknown.length?`Unknown must-include: ${fe.unknown.join(", ")}`:"",Oe.unknown.length?`Unknown excluded: ${Oe.unknown.join(", ")}`:""].filter(Boolean).join(" | "));return}const De=(Qo[u]??"").toUpperCase(),Je=[];for(const K of fe.ids){const he=s.ingredientsById.get(K);he&&!he.skills.some(et=>et.toUpperCase()===De)&&Je.push(he.displayName||he.name)}if(Je.length>0){xe(`${Je.join(", ")} cannot be used for ${u} (${De})  they require a different profession.`);return}const Pe={};for(const K of le)K.key&&(K.min==null&&K.max==null||(Pe[K.key]={min:K.min??void 0,max:K.max??void 0}));const Wt={...qs,recipeType:u,levelRange:m,matTiers:v==="manual"?[b,_]:null,atkSpd:dt&&C==="manual"?R:null,weights:OO(B),mustIncludeIngredients:fe.ids,excludedIngredients:Oe.ids,topN:Math.max(1,Math.min(100,Y)),topKPerSlot:Math.max(10,Math.min(300,X)),beamWidth:Math.max(20,Math.min(3e3,ce)),target:Pe,maxReqs:A};At.current?.abort();const un=new AbortController;At.current=un,re(!0),oe("Starting...");let Pt="";try{const K=await n.current.run(s,Wt,{signal:un.signal,onProgress:he=>{he.detail&&(Pt=he.detail),Ee(he),oe(`${he.phase}: ${he.expandedSlots}/${he.totalSlots} slots, beam ${he.beamSize}, states ${he.processedStates}${he.detail?` | ${he.detail}`:""}`)}});I(K),K.length===0?xe(Pt?`No valid candidates found. ${Pt}`:"No valid candidates found. Try relaxing constraints, increasing beam width/top K, or choosing a different recipe."):oe(`Done. ${K.length} candidates found.`)}catch(K){K instanceof DOMException&&K.name==="AbortError"?oe("Cancelled"):(xe(K instanceof Error?K.message:"Recipe solver failed"),oe(""))}finally{re(!1),Ee(null)}},Gt=()=>{At.current?.abort(),n.current?.cancelCurrent(),re(!1),oe("Cancelled"),Ee(null)};return h.jsxs(Ih,{open:e.open,onOpenChange:e.onOpenChange,title:"Recipe Solver",description:"Find optimal ingredient combinations for crafted items. Uses beam search over the ingredient pool.",className:"!w-[min(95vw,1360px)]",footer:h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsx("div",{className:"text-sm text-[var(--wb-muted)]",children:J}),h.jsxs("div",{className:"flex gap-2",children:[ue?h.jsx(Ce,{variant:"ghost",onClick:Gt,children:"Cancel"}):null,h.jsx(Ce,{variant:"primary",onClick:nn,disabled:!s||ue,children:"Solve Recipe"})]})]}),children:[r?h.jsx("div",{className:"mb-4 rounded-xl border border-rose-400/30 bg-rose-400/5 p-3 text-sm text-rose-200",children:r}):null,ue&&ge?h.jsxs("div",{className:"mb-4 rounded-xl border border-sky-400/30 bg-sky-400/5 p-3",children:[h.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[h.jsx("span",{className:"rounded-md bg-sky-400/20 px-2 py-0.5 text-xs font-medium text-sky-100",children:ge.phase}),ge.totalSlots>0?h.jsxs("span",{className:"text-xs text-[var(--wb-muted)]",children:["Slots ",ge.expandedSlots,"/",ge.totalSlots]}):null]}),h.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-black/20",children:h.jsx("div",{className:"h-full rounded-full bg-sky-400/70 transition-all duration-300",style:{width:ge.totalSlots>0?`${100*ge.expandedSlots/ge.totalSlots}%`:"0%"}})}),h.jsxs("div",{className:"mt-2 flex flex-wrap gap-4 text-xs text-[var(--wb-muted)]",children:[h.jsxs("span",{children:["States: ",ge.processedStates.toLocaleString()]}),h.jsxs("span",{children:["Beam: ",ge.beamSize.toLocaleString()]})]})]}):null,h.jsxs("div",{className:"grid h-[52vh] min-h-0 gap-4 overflow-hidden lg:h-[56vh] lg:grid-cols-[1fr_1fr] lg:items-stretch",children:[h.jsxs("div",{className:"grid h-full min-h-0 min-w-0 gap-3 overflow-auto pr-1 wb-scrollbar",children:[h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Recipe"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{children:[h.jsx(Ie,{children:"Item Type"}),h.jsx("select",{className:"wb-select",value:u,onChange:fe=>d(fe.target.value),children:WA.map(fe=>h.jsxs("option",{value:fe,children:[fe," (",Qo[fe],")"]},fe))})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Level Range"}),h.jsx("select",{className:"wb-select",value:m,onChange:fe=>p(fe.target.value),children:XA.map(fe=>h.jsx("option",{value:fe,children:fe},fe))})]}),s?h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[Kt," compatible ingredients in pool for ",Qo[u]]}):null]})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Material Tiers"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Qe,{active:v==="auto",onClick:()=>y("auto"),children:"Auto-optimize"}),h.jsx(Qe,{active:v==="manual",onClick:()=>y("manual"),children:"Manual"})]}),v==="manual"?h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx(Ie,{children:"Material 1 Tier"}),h.jsx("div",{className:"flex gap-2",children:[1,2,3].map(fe=>h.jsx(Qe,{active:b===fe,onClick:()=>S(fe),children:fe},fe))})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx(Ie,{children:"Material 2 Tier"}),h.jsx("div",{className:"flex gap-2",children:[1,2,3].map(fe=>h.jsx(Qe,{active:_===fe,onClick:()=>E(fe),children:fe},fe))})]})]}):null]})]}),dt?h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Attack Speed"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Qe,{active:C==="auto",onClick:()=>k("auto"),children:"Auto-optimize"}),h.jsx(Qe,{active:C==="manual",onClick:()=>k("manual"),children:"Manual"})]}),C==="manual"?h.jsx("div",{className:"flex gap-2",children:yS.map(fe=>h.jsx(Qe,{active:R===fe,onClick:()=>z(fe),children:fe},fe))}):null]})]}):null,h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Optimization Goal"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:AO.map(fe=>h.jsx(Qe,{active:B===fe,onClick:()=>q(fe),children:kO[fe]},fe))})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Ingredient Constraints"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{children:[h.jsx(Ie,{children:"Must-Include Ingredients (comma-separated)"}),h.jsx("textarea",{className:"wb-textarea min-h-16",value:M,onChange:fe=>j(fe.target.value),placeholder:"e.g. Blueshift Beacon, Depurinated Genome"})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Excluded Ingredients (comma-separated)"}),h.jsx("textarea",{className:"wb-textarea min-h-16",value:D,onChange:fe=>Z(fe.target.value),placeholder:"Blacklist ingredient names"})]})]})]}),h.jsx("div",{className:"wb-card p-3",children:h.jsxs("details",{className:"group",children:[h.jsx("summary",{className:"cursor-pointer text-sm font-semibold",children:"Advanced: Stat Thresholds"}),h.jsxs("div",{className:"mt-3 grid gap-3",children:[h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Set minimum / maximum targets for specific stats on the crafted item."}),le.map(fe=>h.jsx("div",{className:"rounded-lg border border-[var(--wb-border-muted)] p-2",children:h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs("div",{children:[h.jsx(Ie,{children:"Stat"}),h.jsx("select",{className:"wb-select w-full",value:fe.key,onChange:Oe=>de(De=>De.map(Je=>Je.id===fe.id?{...Je,key:Oe.target.value}:Je)),children:O0.map(Oe=>h.jsxs("option",{value:Oe,children:[zS(Oe)," (",Oe,")"]},Oe))})]}),h.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[h.jsxs("div",{className:"min-w-[80px] flex-1",children:[h.jsx(Ie,{children:"Min"}),h.jsx("input",{className:"wb-input w-full",type:"number",value:fe.min??"",onChange:Oe=>{const De=Oe.target.value.trim();de(Je=>Je.map(Pe=>Pe.id===fe.id?{...Pe,min:De===""?null:Number(De)}:Pe))}})]}),h.jsxs("div",{className:"min-w-[80px] flex-1",children:[h.jsx(Ie,{children:"Max"}),h.jsx("input",{className:"wb-input w-full",type:"number",value:fe.max??"",onChange:Oe=>{const De=Oe.target.value.trim();de(Je=>Je.map(Pe=>Pe.id===fe.id?{...Pe,max:De===""?null:Number(De)}:Pe))}})]}),h.jsx(Ce,{variant:"ghost",className:"shrink-0",onClick:()=>de(Oe=>Oe.filter(De=>De.id!==fe.id)),children:"Remove"})]})]})},fe.id)),h.jsx("div",{children:h.jsx(Ce,{variant:"ghost",onClick:()=>de(fe=>[...fe,{id:ne.current++,key:O0[0],min:null,max:null}]),children:"Add Threshold"})}),h.jsxs("div",{className:"mt-3 border-t border-[var(--wb-border-muted)] pt-3",children:[h.jsx(Ie,{children:"Max Skill Points (Req Limit)"}),h.jsx("div",{className:"mt-1 text-[11px] text-[var(--wb-muted)]",children:"Exclude recipes that exceed any of these. Leave empty for no limit."}),h.jsx("div",{className:"mt-2 grid grid-cols-5 gap-2",children:["STR","DEX","INT","DEF","AGI"].map((fe,Oe)=>h.jsxs("div",{children:[h.jsx("label",{className:"mb-0.5 block text-[11px] text-[var(--wb-muted)]",children:fe}),h.jsx("input",{className:"wb-input w-full",type:"number",min:0,placeholder:"",value:A[Oe]??"",onChange:De=>{const Je=De.target.value.trim();V(Pe=>{const Wt=[...Pe];return Wt[Oe]=Je===""?null:Math.max(0,Number(Je)),Wt})}})]},fe))})]})]})]})}),h.jsx("div",{className:"wb-card p-3",children:h.jsxs("details",{className:"group",children:[h.jsx("summary",{className:"cursor-pointer text-sm font-semibold",children:"Search Heuristics"}),h.jsxs("div",{className:"mt-3 grid gap-3",children:[h.jsx(za,{label:"Beam Width",value:ce,onChange:fe=>$(fe??qs.beamWidth),min:20,max:3e3}),h.jsx(za,{label:"Top K per Slot",value:X,onChange:fe=>L(fe??qs.topKPerSlot),min:10,max:300}),h.jsx(za,{label:"Top N Results",value:Y,onChange:fe=>te(fe??qs.topN),min:1,max:100})]})]})})]}),h.jsx("div",{className:"h-full min-h-0 min-w-0",children:h.jsxs("div",{className:"wb-card flex h-full min-h-0 flex-col overflow-hidden p-3",children:[h.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[h.jsx("div",{className:"text-sm font-semibold",children:"Candidates"}),h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[N.length," shown"]})]}),h.jsx("div",{className:"min-h-0 flex-1 space-y-2 overflow-auto pr-1 wb-scrollbar",children:N.length===0?h.jsx("div",{className:"rounded-xl border border-dashed border-[var(--wb-border)] p-4 text-sm text-[var(--wb-muted)]",children:"Run Recipe Solver to find optimal ingredient combinations."}):N.map((fe,Oe)=>h.jsx(BO,{candidate:fe,index:Oe,catalog:s,copiedHash:Be,onCopyHash:tn,onEquipCraft:e.onEquipCraft},`${fe.hash}-${Oe}`))}),ye?h.jsx("div",{className:"mt-2 rounded-xl border border-rose-400/30 bg-rose-400/8 p-2 text-xs text-rose-100",children:ye}):null]})})]})]})}function IO(e){return`https://hppeng-wynn.github.io/crafter/#${e.startsWith("CR-")?e.slice(3):e}`}function BO(e){const{candidate:n,index:s,catalog:i}=e,{stats:r,scoreBreakdown:c}=n,u=n.ingredientIds.map(y=>{const b=i?.ingredientsById.get(y);return b?.displayName??b?.name??`#${y}`}),d=[];for(const[y,b]of Object.entries(r.maxRolls))b!==0&&d.push({label:zS(y),value:b>0?`+${b}`:`${b}`});d.sort((y,b)=>{const S=typeof y.value=="string"?parseInt(y.value):y.value,_=typeof b.value=="string"?parseInt(b.value):b.value;return Math.abs(_)-Math.abs(S)});const m=()=>{window.open(IO(n.hash),"_blank","noopener,noreferrer")},p=RO[r.type.toLowerCase()]??null,v=()=>{p&&e.onEquipCraft&&e.onEquipCraft(p,{hash:n.hash,type:r.type,category:r.category,lvl:r.lvl})};return h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3",children:[h.jsxs("div",{className:"flex items-start justify-between gap-3",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"text-sm font-semibold",children:["#",s+1," | Score ",Math.round(n.score)]}),h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Off ",Math.round(c.offense)," | Def ",Math.round(c.defense)," | ","Util ",Math.round(c.utility)," | SP ",Math.round(c.skillPoints),c.reqPenalty>0?` | Req -${Math.round(c.reqPenalty)}`:""]}),h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Mat Tiers: ",n.matTiers[0],"/",n.matTiers[1],r.category==="weapon"?` | Atk Spd: ${n.atkSpd}`:""]})]}),h.jsxs("div",{className:"flex shrink-0 flex-col gap-1",children:[h.jsx(Ce,{className:"px-2 py-1 text-xs",onClick:()=>e.onCopyHash(n.hash),children:e.copiedHash===n.hash?"Copied!":"Copy Hash"}),h.jsx(Ce,{variant:"ghost",className:"px-2 py-1 text-xs",onClick:m,children:"Open in Crafter"}),p?h.jsx(Ce,{className:"border border-emerald-400/40 bg-emerald-400/15 px-2 py-1 text-xs text-emerald-100 hover:bg-emerald-400/25",onClick:v,children:"Use in Build"}):null]})]}),h.jsxs("div",{className:"mt-2",children:[h.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Ingredients (3x2 grid)"}),h.jsx("div",{className:"grid grid-cols-2 gap-1",children:u.map((y,b)=>h.jsxs("div",{className:"rounded-md border border-[var(--wb-border-muted)] bg-black/10 px-2 py-1 text-xs",children:[h.jsx("div",{className:"truncate",children:y}),h.jsxs("div",{className:"text-[10px] text-[var(--wb-muted)]",children:["Eff: ",n.effectiveness[b],"%"]})]},b))})]}),d.length>0?h.jsxs("div",{className:"mt-2",children:[h.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Stats (max rolls)"}),h.jsx("div",{className:"flex flex-wrap gap-1",children:d.slice(0,12).map(({label:y,value:b})=>{const S=typeof b=="string"?b.startsWith("+"):b>0;return h.jsxs("span",{className:`rounded px-1.5 py-0.5 text-[11px] ${S?"bg-emerald-400/15 text-emerald-200":"bg-rose-400/15 text-rose-200"}`,children:[y,": ",b]},y)})})]}):null,r.category==="armor"?h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["HP: ",r.hpLow,"-",r.hp," | Dur: ",r.durability[0],"-",r.durability[1],"| Reqs: [",r.reqs.join(", "),"]"]}):null,r.category==="consumable"?h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Duration: ",r.duration[0],"-",r.duration[1],"s | Charges: ",r.charges]}):null,r.category==="weapon"?h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["nDam: ",r.nDam," | Dur: ",r.durability[0],"-",r.durability[1],"| Reqs: [",r.reqs.join(", "),"]"]}):null]})}const z0="2.1.6.0";function LO(e){return typeof e=="string"&&/^\d+\.\d+\.\d+\.\d+$/.test(e)}function qO(e){return[...new Set(e)]}class UO{cache=new Map;async getDataset(n){const s=LO(n)?n:z0;return this.cache.has(s)||this.cache.set(s,this.loadDataset(s)),this.cache.get(s)}async loadDataset(n){const s=qO([n,z0]),i=[];for(const r of s){const c=this.buildUrls(r);for(const u of c)try{const d=await fetch(u,{cache:"force-cache"});if(!d.ok)throw new Error(`Failed to fetch ${u}: ${d.status}`);const m=await d.json();return LA(m,r)}catch(d){i.push(d instanceof Error?d.message:`Failed to fetch ${u}`)}}throw new Error(`Unable to load ability tree data. Tried versions: ${s.join(", ")}. ${i.slice(-4).join(" | ")}`)}buildUrls(n){return[(i=>{if(typeof window>"u")return i;const r=window.location.href.split("?")[0].replace(/\/[^/]*$/,"/")||window.location.origin+"/";return new URL(i,r).href})(`data/${n}/atree.json`),`./data/${n}/atree.json`,`../data/${n}/atree.json`,`data/${n}/atree.json`]}}const $O=new UO;class HO{numeric=new Map;maps=new Map;get(n){return this.maps.has(n)?this.maps.get(n):this.numeric.get(n)??0}getNum(n){const s=this.get(n);return typeof s=="number"?s:0}has(n){return this.maps.has(n)||this.numeric.has(n)}add(n,s){!Number.isFinite(s)||s===0||this.numeric.set(n,(this.numeric.get(n)??0)+s)}set(n,s){Number.isFinite(s)&&this.numeric.set(n,s)}getMap(n){let s=this.maps.get(n);return s||(s=new Map,this.maps.set(n,s)),s}addMap(n,s,i){if(!Number.isFinite(i)||i===0)return;const r=this.getMap(n);r.set(s,(r.get(s)??0)+i)}}const P0=["str","dex","int","def","agi"],ZO=["e","t","w","f","a"],zn=["n",...ZO],fh=["SUPER_SLOW","VERY_SLOW","SLOW","NORMAL","FAST","VERY_FAST","SUPER_FAST"],hh=[.51,.83,1.5,2.05,2.5,3.1,4.3],FO=[1,1,1,.867,.951],GO=[1,1,.5/Yc(150),.867,.951],YO=["nDam","eDam","tDam","wDam","fDam","aDam"],VO=["Super Slow","Very Slow","Slow","Normal","Fast","Very Fast","Super Fast"],I0=["str","dex","int","def","agi","sdPct","sdRaw","mdPct","mdRaw","atkTier","damPct","damRaw","rSdPct","rSdRaw","rMdPct","rMdRaw","rDamPct","rDamRaw","critDamPct","healPct","spPct1","spPct2","spPct3","spPct4","spRaw1","spRaw2","spRaw3","spRaw4","spPct1Final","spPct2Final","spPct3Final","spPct4Final","nSdPct","eSdPct","tSdPct","wSdPct","fSdPct","aSdPct","nMdPct","eMdPct","tMdPct","wMdPct","fMdPct","aMdPct","nDamPct","eDamPct","tDamPct","wDamPct","fDamPct","aDamPct","nSdRaw","eSdRaw","tSdRaw","wSdRaw","fSdRaw","aSdRaw","nMdRaw","eMdRaw","tMdRaw","wMdRaw","fMdRaw","aMdRaw","nDamRaw","eDamRaw","tDamRaw","wDamRaw","fDamRaw","aDamRaw","nDamAddMin","nDamAddMax","eDamAddMin","eDamAddMax","tDamAddMin","tDamAddMax","wDamAddMin","wDamAddMax","fDamAddMin","fDamAddMax","aDamAddMin","aDamAddMax","rDamAddMin","rDamAddMax","damAddMin","damAddMax","hp","hpBonus","defMult"];function mt(e,n=0){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const s=Number(e);if(Number.isFinite(s))return s}return n}function Yc(e){if(e<=0)return 0;let n=e;n>=150&&(n=150);const s=.9908;return s/(1-s)*(1-Math.pow(s,n))/100}function KO(e){return Math.max(1,Math.min(106,Math.round(e||1)))*5+5}function WO(e){if(Array.isArray(e)&&e.length>=2)return[mt(e[0]),mt(e[1])];if(typeof e=="string"){const n=e.match(/(-?\d+(?:\.\d+)?)\s*-\s*(-?\d+(?:\.\d+)?)/);if(n)return[Number(n[1]),Number(n[2])]}return[0,0]}function XO(e){if(e.category!=="weapon")return null;const n=e.legacyRaw??{},s=YO.map(r=>WO(n[r])),i=s.map(([r,c])=>r!==0||c!==0);return{atkSpd:typeof n.atkSpd=="string"&&n.atkSpd?n.atkSpd:e.atkSpd,type:e.type,tier:typeof n.tier=="string"?n.tier:e.tier,damages:s,damagePresent:i}}function QO(e){switch(e){case"bow":return{type:"replace_spell",name:"Bow Shot",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Single Shot",parts:[{name:"Single Shot",multipliers:[100,0,0,0,0,0]}]};case"relik":return{type:"replace_spell",name:"Relik Melee",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Total",parts:[{name:"Single Beam",multipliers:[33,0,0,0,0,0]},{name:"Total",hits:{"Single Beam":3}}]};case"wand":return{type:"replace_spell",name:"Wand Melee",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Melee",parts:[{name:"Melee",multipliers:[100,0,0,0,0,0]}]};default:return{type:"replace_spell",name:"Melee",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Melee",parts:[{name:"Melee",multipliers:[100,0,0,0,0,0]}]}}}function $i(e){return structuredClone(e)}function Bf(e,n){if(typeof n=="string"){const[s,i]=n.split("."),r=Number(s);if(!Number.isFinite(r)||!i)return 0;const c=e.get(r);return mt(c?.properties?.[i])}return mt(n)}function JO(e,n){const s=new Set(n.activeIds),i=new Map,r=c=>{const u={id:c.id,baseAbilityId:c.baseAbilityId??null,properties:$i(c.properties??{}),effects:$i(c.effects??[])};if(u.baseAbilityId!=null&&i.has(u.baseAbilityId)){const d=i.get(u.baseAbilityId);d.effects=d.effects.concat(u.effects);for(const[m,p]of Object.entries(u.properties))d.properties[m]=mt(d.properties[m])+mt(p);return}i.set(u.id,u)};for(const c of e.nodes)s.has(c.id)&&r(c);return i}function ez(e,n=[]){const s=new Map;for(const i of n)s.set(i.base_spell,$i(i));for(const[,i]of e)for(const r of i.effects){if(r.type!=="replace_spell")continue;const c=mt(r.base_spell,Number.NaN);if(!Number.isFinite(c))continue;const u=$i(r);let d=s.get(c);if(!d)d=u,s.set(c,d);else for(const[m,p]of Object.entries(u))d[m]=$i(p);for(const m of d.parts??[]){const p=m.hits;if(p)for(const[v,y]of Object.entries(p))p[v]=Bf(e,y)}}for(const[,i]of e)for(const r of i.effects){const c=typeof r.type=="string"?r.type:"";if(c!=="replace_spell"){if(c==="add_spell_prop"){const u=mt(r.base_spell,Number.NaN);if(!Number.isFinite(u)||!s.has(u))continue;const d=s.get(u),m=typeof r.target_part=="string"?r.target_part:null,p=typeof r.behavior=="string"?r.behavior:"merge",v=mt(r.cost);if(typeof d.cost=="number"&&(d.cost+=v),!m)continue;let y=!1;for(const b of d.parts)if(b.name===m){if("multipliers"in r&&Array.isArray(r.multipliers)&&"multipliers"in b)for(let S=0;S<r.multipliers.length;S++){const _=mt(r.multipliers[S]);Array.isArray(b.multipliers)&&(p==="overwrite"?b.multipliers[S]=_:b.multipliers[S]=(b.multipliers[S]??0)+_)}else if("power"in r&&"power"in b){const S=mt(r.power);b.power=p==="overwrite"?S:mt(b.power)+S}else if("hits"in r&&typeof r.hits=="object"&&r.hits&&"hits"in b)for(const[S,_]of Object.entries(r.hits)){const E=Bf(e,_);p==="overwrite"?b.hits[S]=E:b.hits[S]=(b.hits[S]??0)+E}if("hide"in r&&(b.display=!1),"ignored_mults"in r){const S=Array.isArray(r.ignored_mults)?r.ignored_mults.filter(_=>typeof _=="string"):[];"ignored_mults"in b&&Array.isArray(b.ignored_mults)?b.ignored_mults.push(...S):"multipliers"in b&&(b.ignored_mults=S)}y=!0;break}if(!y&&p==="merge"){const b=$i(r);if(b.name=m,typeof b.hits=="object"&&b.hits)for(const[S,_]of Object.entries(b.hits))b.hits[S]=Bf(e,_);"hide"in r&&(b.display=!1),d.parts.push(b)}typeof r.display=="string"&&(d.display=r.display)}else if(c==="convert_spell_conv"){const u=mt(r.base_spell,Number.NaN);if(!Number.isFinite(u)||!s.has(u))continue;const d=s.get(u),m=typeof r.target_part=="string"?r.target_part:"all",p=typeof r.conversion=="string"?r.conversion:"",v=zn.indexOf(p);if(v<0)continue;const y=m==="all";for(const b of d.parts){if(!("multipliers"in b)||!y&&b.name!==m)continue;const S=b.multipliers.slice(1).reduce((E,C)=>E+mt(C),0),_=[mt(b.multipliers[0]),0,0,0,0,0];_[v]=S,b.multipliers=_}}}}return s}function tz(e,n,s){let i=!1,r=!1;for(const[,c]of e)for(const u of c.effects){const d=typeof u.type=="string"?u.type:"";if(d==="raw_stat"){if(u.toggle){i=!0;continue}const m=Array.isArray(u.bonuses)?u.bonuses:[];for(const p of m){if(!p||typeof p!="object")continue;const v=typeof p.type=="string"?p.type:"",y=typeof p.name=="string"?p.name:"",b=mt(p.value);!y||b===0||v==="stat"&&(y.startsWith("damMult.")?n.addMap("damMult",y.slice(8),b):y.startsWith("healMult.")?n.addMap("healMult",y.slice(9),b):y.startsWith("defMult.")?n.add("defMult",b):n.add(y,b))}continue}d==="stat_scaling"&&(r=!0)}i&&s.push("Some ability-tree toggle effects are not applied in Workbench spell damage yet."),r&&s.push("Some ability-tree scaling/slider effects are not applied in Workbench spell damage yet.")}function nz(e,n,s){const i=new HO;for(const m of I0)i.set(m,0);i.getMap("damMult"),i.getMap("healMult");let r=0,c=0,u=[0,0,0,0,0];for(const m of nt){const p=e.slots[m];if(p==null)continue;const v=n.itemsById.get(p);if(!v)continue;const y=v.legacyRaw??{};for(const b of I0)i.add(b,mt(y[b]));r+=mt(y.hp),c+=mt(y.hpBonus),u=[u[0]+mt(y.str),u[1]+mt(y.dex),u[2]+mt(y.int),u[3]+mt(y.def),u[4]+mt(y.agi)]}const d=s??[0,0,0,0,0];return i.set("str",u[0]+d[0]),i.set("dex",u[1]+d[1]),i.set("int",u[2]+d[2]),i.set("def",u[3]+d[3]),i.set("agi",u[4]+d[4]),i.set("hp",r+c+KO(e.level)),i}function az(e,n,s,i,r=!1,c,u=!1,d=[]){const m=n.damages.map(A=>[...A]),p=[...n.damagePresent],v=s.map(A=>mt(A));for(let A=0;A<zn.length;A++){const V=c?`:${c}`:"",N=`${zn[A]}ConvBase${V}`;c&&e.has(N)&&(v[A]+=e.getNum(N));const I=`${zn[A]}ConvBase`;e.has(I)&&(v[A]+=e.getNum(I))}const y=[],b=(v[0]??0)/100;if(b===0)for(let A=0;A<p.length;A++)p[A]=!1;let S=0,_=0;for(const A of m)y.push([A[0]*b,A[1]*b]),S+=A[0],_+=A[1];let E=0;for(let A=1;A<=5;A++){const V=v[A]??0;if(V>0){const N=V/100;y[A][0]+=N*S,y[A][1]+=N*_,p[A]=!0,E+=N}}if(E+=b,!r){const A=fh.indexOf(n.atkSpd||"NORMAL"),V=hh[A>=0?A:3]??hh[3];for(let N=0;N<y.length;N++)y[N][0]*=V,y[N][1]*=V}for(let A=0;A<zn.length;A++){if(!p[A])continue;const V=zn[A];y[A][0]+=e.getNum(`${V}DamAddMin`),y[A][1]+=e.getNum(`${V}DamAddMax`)}const C=i?"Sd":"Md",k=[0];for(let A=0;A<P0.length;A++)k.push(Yc(e.getNum(P0[A]))*FO[A]);const R=(e.getNum(`${C.toLowerCase()}Pct`)+e.getNum("damPct"))/100;let z=0,B=0;const q=[];for(let A=0;A<zn.length;A++){q.push([...y[A]]),z+=y[A][0],B+=y[A][1];const V=zn[A],N=`${V}${C}Pct`;let I=1+(k[A]??0)+R+(e.getNum(N)+e.getNum(`${V}DamPct`))/100;A>0&&(I+=(e.getNum(`r${C}Pct`)+e.getNum("rDamPct"))/100),y[A][0]*=I,y[A][1]*=I}const M=z-q[0][0],j=B-q[0][1],D=e.getNum(`${C.toLowerCase()}Raw`)+e.getNum("damRaw"),Z=e.getNum(`r${C}Raw`)+e.getNum("rDamRaw");for(let A=0;A<y.length;A++){const V=q[A],N=zn[A];let I=0;p[A]&&(I+=e.getNum(`${N}${C}Raw`)+e.getNum(`${N}DamRaw`));let J=I,oe=I;B>0&&(J+=(z===0?V[1]/B:V[0]/z)*D,oe+=V[1]/B*D),A!==0&&j>0&&(J+=(M===0?V[1]/j:V[0]/M)*Z,oe+=V[1]/j*Z),y[A][0]+=J*E,y[A][1]+=oe*E}const le=u?1:1+(k[1]??0),de=e.getMap("damMult");let ne=1;const ce=[1,1,1,1,1,1],$=[...v];for(const[A,V]of de.entries())if(!(A.includes(":")&&A.split(":")[1]!==c)&&!d.includes(A))if(A.includes(";")){const N=zn.indexOf(A.split(";")[1]);N!==-1&&(ce[N]*=1+V/100)}else ne*=1+V/100;const X=u?0:1+e.getNum("critDamPct")/100,L=[0,0],Y=[0,0],te=[];for(let A=0;A<zn.length;A++){y[A][0]*=ce[A]*ne,y[A][1]*=ce[A]*ne,$[A]*=ce[A]*ne,y[A][0]<0&&(y[A][0]=0),y[A][1]<0&&(y[A][1]=0);const V=[y[A][0]*le,y[A][1]*le,y[A][0]*(le+X),y[A][1]*(le+X)];te.push(V),L[0]+=V[0],L[1]+=V[1],Y[0]+=V[2],Y[1]+=V[3]}return[L,Y,te,$]}function PS(e,n,s){const i=new Map;for(const p of e.parts)i.set(p.name,{type:"need_eval",store:p});const r="use_atkspd"in e?!!e.use_atkspd:!0,c="scaling"in e?e.scaling==="spell":!0,u=p=>{const v=i.get(p);if(!v)return null;if(v.type!=="need_eval")return v;const y=v.store,b=`${e.base_spell}.${y.name}`;let S;if("multipliers"in y){const _=Array.isArray(y.ignored_mults)?y.ignored_mults:[],E=az(n,s,y.multipliers.map(C=>mt(C)),c,!r,b,y.use_str===!1,_);S={type:"damage",name:y.name,display:y.display!==!1,normal_total:E[0],crit_total:E[1],damage_results:E[2]}}else if("power"in y){const _=n.getNum("hp"),E=1+n.getNum("healPct")/100;S={type:"heal",name:y.name,display:y.display!==!1,heal_amount:mt(y.power)*_*E}}else{let _=null,E=[0,0],C=[0,0],k=0;for(const[R,z]of Object.entries(y.hits)){const B=u(R);B&&(_&&_!==B.type||(_=B.type,B.type==="damage"?(E=[E[0]+B.normal_total[0]*z,E[1]+B.normal_total[1]*z],C=[C[0]+B.crit_total[0]*z,C[1]+B.crit_total[1]*z]):k+=B.heal_amount*z))}_==="heal"?S={type:"heal",name:y.name,display:y.display!==!1,heal_amount:k}:S={type:"damage",name:y.name,display:y.display!==!1,normal_total:E,crit_total:C}}return i.set(y.name,S),S},d=[],m=Yc(n.getNum("dex"));for(const p of e.parts){const v=u(p.name);if(v)if(v.type==="damage"){const y=(v.normal_total[0]+v.normal_total[1])/2,b=(v.crit_total[0]+v.crit_total[1])/2;let S;if(Array.isArray(v.damage_results)){const _=v.damage_results;let E=0;for(let C=1;C<zn.length;C++){const k=_[C];if(!k)continue;const R=(k[0]+k[1])/2;R>E&&(E=R,S=zn[C])}}d.push({type:"damage",name:v.name,display:v.display,normalTotal:v.normal_total,critTotal:v.crit_total,averageNonCrit:y,averageCrit:b,averageTotal:(1-m)*y+m*b,dominantElement:S})}else d.push({type:"heal",name:v.name,display:v.display,healAmount:v.heal_amount,averageTotal:v.heal_amount})}return d}function sz(e){const{spells:n,stats:s,weapon:i}=e,r=n.get(0);if(!r||!Array.isArray(r.parts)||r.parts.length===0)return null;const c=PS(r,s,i);if(c.length===0)return null;const u=(r.display||"").trim(),d=u&&c.find(b=>b.name===u)||c.find(b=>b.display)||c[0];if(!d||d.type!=="damage")return null;const m=d.averageTotal??0,p=fh.indexOf(i.atkSpd||"NORMAL"),v=Math.max(0,Math.min(fh.length-1,(p>=0?p:3)+Math.round(s.getNum("atkTier")))),y=m*hh[v];return{perAttackAverage:m,dps:y,attackSpeedTier:VO[v]}}function iz(e,n){if(typeof n.cost!="number"||n.base_spell<1||n.base_spell>4)return null;const s=n.base_spell;let i=n.cost*(1-Yc(e.getNum("int"))*GO[2]);return i+=e.getNum(`spRaw${s}`),i=i*(1+e.getNum(`spPct${s}`)/100),i=Math.max(1,i*(1+e.getNum(`spPct${s}Final`)/100)),i}function lz(e){const{catalog:n,snapshot:s,abilityTreeTree:i,abilityTreeEvaluation:r}=e;if(!i||!r)return null;const c=s.slots.weapon;if(c==null)return null;const u=n.itemsById.get(c);if(!u)return null;const d=XO(u);if(!d)return null;const m={...s.slots},p=Bc(m,n,s.level),v=nz(s,n,p.assignedByStat),y=[];p.feasible||y.push("Spell preview uses current build state, but skill-point feasibility is invalid.");const b=JO(i,r);tz(b,v,y);const S=ez(b,[QO(d.type)]),_=sz({spells:S,stats:v,weapon:d});if(S.size===0)return{melee:_,spells:[],notes:y};const E=[];for(const C of[...S.values()].sort((k,R)=>k.base_spell-R.base_spell)){if(!Array.isArray(C.parts)||C.parts.length===0)continue;const k=PS(C,v,d);if(k.length===0)continue;const R=(C.display||"").trim(),z=R&&k.find(M=>M.name===R)||k.find(M=>M.display)||k[0];if(!z)continue;const B=z.type==="heal",q=B?null:z.dominantElement??null;E.push({baseSpell:C.base_spell,name:C.name,displayPartName:z.name,averageDisplayValue:z.averageTotal??0,isHealing:B,manaCost:iz(v,C),dominantElement:q,parts:k})}return r.activeIds.length>0&&E.length===0&&y.push("No spell damage entries found in the selected ability tree nodes."),{melee:_,spells:E,notes:y}}function B0(e){return navigator.clipboard?.writeText?navigator.clipboard.writeText(e):(window.prompt("Copy text:",e),Promise.resolve())}function L0(e){return typeof e!="string"?null:e.startsWith("slot:")?{kind:"slot",slot:e.slice(5)}:e.startsWith("bin:")?{kind:"bin",category:e.slice(4)}:null}function rz(e,n,s){const i=n.itemsById.get(e);if(!i)return null;const r=i.category;if(s.selectedSlot&&da(s.selectedSlot)===r)return s.selectedSlot;const c=nt.filter(d=>da(d)===r);return c.find(d=>s.slots[d]==null)??c[0]??null}function oz(e){return{slots:{...e.slots},craftedSlots:{...e.craftedSlots},binsByCategory:{helmet:[...e.binsByCategory.helmet],chestplate:[...e.binsByCategory.chestplate],leggings:[...e.binsByCategory.leggings],boots:[...e.binsByCategory.boots],ring:[...e.binsByCategory.ring],bracelet:[...e.binsByCategory.bracelet],necklace:[...e.binsByCategory.necklace],weapon:[...e.binsByCategory.weapon]},locks:{...e.locks},level:e.level,characterClass:e.characterClass,selectedSlot:e.selectedSlot,comparePreview:{...e.comparePreview},legacyHash:e.legacyHash,skillpointTomeMode:e.skillpointTomeMode??"no_tomes"}}function cz(){const e=w.useRef(null);!e.current&&typeof window<"u"&&(e.current=Qk(window.location));const n=e.current,[s,i]=w.useState(null),[r,c]=w.useState(null),[u,d]=w.useState(n?.search??Oa),[m,p]=w.useState(null),[v,y]=w.useState(!1),[b,S]=w.useState(!1),[_,E]=w.useState(n?.mode==="autobuilder"),[C,k]=w.useState(n?.mode==="abilitytree"),[R,z]=w.useState(!1),[B,q]=w.useState(null),[M,j]=w.useState(!1),[D,Z]=w.useState(null),[le,de]=w.useState(n?.abilityTree?.selectedByClass??{}),[ne,ce]=w.useState(n?.abilityTree?.version??null),[$,X]=w.useState(""),[L,Y]=w.useState(0),[te,A]=w.useState(()=>gb()),V=w.useRef(null),N=w.useRef(null),I=w.useRef(null),J=Vo(K=>K.hydrateSnapshot),oe=Vo(K=>K.setLegacyHash),ue=Vo(CE(K=>({slots:K.slots,craftedSlots:K.craftedSlots,binsByCategory:K.binsByCategory,locks:K.locks,level:K.level,characterClass:K.characterClass,selectedSlot:K.selectedSlot,comparePreview:K.comparePreview,legacyHash:K.legacyHash,skillpointTomeMode:K.skillpointTomeMode,undoStack:K.undoStack,redoStack:K.redoStack,setLevel:K.setLevel,setCharacterClass:K.setCharacterClass,setSkillpointTomeMode:K.setSkillpointTomeMode,setSelectedSlot:K.setSelectedSlot,setComparePreview:K.setComparePreview,pinItem:K.pinItem,removePinnedItem:K.removePinnedItem,clearCategory:K.clearCategory,clearAll:K.clearAll,equipItem:K.equipItem,equipCraftedItem:K.equipCraftedItem,clearCraftedSlot:K.clearCraftedSlot,moveSlotToBin:K.moveSlotToBin,swapSlots:K.swapSlots,assignDraggedItemToSlot:K.assignDraggedItemToSlot,assignDraggedItemToBin:K.assignDraggedItemToBin,toggleLock:K.toggleLock,undo:K.undo,redo:K.redo,hydrateSnapshot:K.hydrateSnapshot,loadCandidate:K.loadCandidate,setLegacyHash:K.setLegacyHash}))),re=w.useMemo(()=>oz(ue),[ue]);w.useEffect(()=>{pb(te),vT(te)},[te]),w.useEffect(()=>{n?.workbenchPatch&&J(n.workbenchPatch)},[n?.workbenchPatch,J]),w.useEffect(()=>{let K=!1;return(async()=>{try{const he=await kT.getCatalog();if(K)return;S(!1);const et=new IC;if(await et.init(he.items),K){et.dispose();return}if(V.current=et,i(he),S(!0),n?.legacyHash){X("Importing legacy builder hash...");try{const Ge=await jf.decodeLegacyHash(n.legacyHash),fn={};for(const[ft,It]of Object.entries(Ge.slots)){if(!It)continue;const Nt=he.itemIdByName.get(It.toLowerCase());typeof Nt=="number"&&(fn[ft]=Nt)}const an=Vo.getState().level;J({...n.workbenchPatch,slots:{...n.workbenchPatch?.slots??{},...fn},level:Ge.level??n.workbenchPatch?.level??an,legacyHash:Ge.legacyHash}),oe(Ge.legacyHash),X("Imported legacy builder hash into Workbench.")}catch(Ge){console.error(Ge),X("Failed to import legacy hash automatically. You can still open it in legacy builder.")}}}catch(he){console.error(he),c(he instanceof Error?he.message:"Failed to load item catalog")}})(),()=>{K=!0,V.current?.dispose(),N.current&&window.clearTimeout(N.current),I.current&&window.clearTimeout(I.current)}},[n,J,oe]),w.useEffect(()=>{if(!(!s||!b||!V.current)){if(!mC(u)&&L===0){p(null),y(!1);return}return N.current&&window.clearTimeout(N.current),y(!0),N.current=window.setTimeout(async()=>{try{const K=await V.current.search(u);p(K)}catch(K){console.error(K),c(K instanceof Error?K.message:"Search failed")}finally{y(!1)}},180),()=>{N.current&&window.clearTimeout(N.current)}}},[s,b,u,L]),w.useEffect(()=>{if(!C||!s||M||B||D)return;let K=!1;return j(!0),Z(null),(async()=>{try{const he=await $O.getDataset(ne||s.version);if(K)return;q(he),ce(he.version)}catch(he){if(K)return;console.error(he),Z(he instanceof Error?he.message:"Failed to load ability tree data")}finally{K||j(!1)}})(),()=>{K=!0}},[C,B,s,ne,D]),w.useEffect(()=>{if(!(typeof window>"u"))return I.current&&window.clearTimeout(I.current),I.current=window.setTimeout(()=>{try{_0({search:u,workbenchSnapshot:re,mode:_?"autobuilder":C?"abilitytree":null,abilityTreeState:{version:ne,selectedByClass:le},replace:!0})}catch(K){console.error(K)}},250),()=>{I.current&&window.clearTimeout(I.current)}},[u,re,_,C,le,ne]);const ye=w.useMemo(()=>s?Xi({slots:re.slots,level:re.level,characterClass:re.characterClass},s,{skillpointTomeMode:re.skillpointTomeMode??"no_tomes"}):null,[s,re]),xe=w.useMemo(()=>{if(!s)return null;const K=re.slots.weapon;if(K==null)return null;const he=s.itemsById.get(K);return he?he.classReq??uc(he.type):null},[s,re.slots.weapon]),ge=re.characterClass??xe,Ee=w.useMemo(()=>vS(B,ge),[B,ge]),Be=w.useMemo(()=>{if(!Ee||!ge)return null;const K=le[ge]??[];return Gc(Ee,K,re.level)},[le,Ee,ge,re.level]),lt=w.useMemo(()=>{if(!s||!ye)return null;const K=re.comparePreview;if(!K.itemId||!K.slot)return null;const he={...re.slots,[K.slot]:K.itemId};return Xi({slots:he,level:re.level,characterClass:re.characterClass},s,{skillpointTomeMode:re.skillpointTomeMode??"no_tomes"})},[s,ye,re]),At=w.useMemo(()=>s?lz({catalog:s,snapshot:re,abilityTreeTree:Ee,abilityTreeEvaluation:Be}):null,[s,re,Ee,Be]),dt=p_(Kv(wh,{activationConstraint:{distance:6}}),Kv(xh,{coordinateGetter:TE})),Kt=K=>{const he=K.active.data.current?.dragItem;if(!he)return;const et=he.kind==="slot"?he.sourceSlot??null:re.selectedSlot??null;ue.setComparePreview({itemId:he.itemId,slot:et})},gt=K=>{const he=K.active.data.current?.dragItem,et=L0(K.over?.id);!he||!et||et.kind==="slot"&&ue.setComparePreview({itemId:he.itemId,slot:et.slot})},tn=K=>{const he=K.active.data.current?.dragItem,et=L0(K.over?.id);if(ue.setComparePreview(null),!s||!he||!et)return;const Ge=s.itemsById.get(he.itemId);if(Ge){if(et.kind==="slot"){if(da(et.slot)!==Ge.category)return;ue.assignDraggedItemToSlot({targetSlot:et.slot,source:he.kind,itemId:he.itemId,sourceCategory:he.sourceCategory,sourceSlot:he.sourceSlot});return}if(et.kind==="bin"){if(et.category!==Ge.category)return;ue.assignDraggedItemToBin({targetCategory:et.category,source:he.kind,itemId:he.itemId,sourceCategory:he.sourceCategory,sourceSlot:he.sourceSlot})}}},nn=K=>{if(!s)return;const he=rz(K,s,re);he&&(ue.equipItem(he,K),ue.setSelectedSlot(he),X(`Equipped item into ${he}.`))},Gt=K=>{if(!s)return;const he=s.itemsById.get(K);he&&ue.pinItem(he.category,he.id)},fe=()=>{const K=oS(re),he=JSON.stringify(re,null,2);window.prompt("Copy Workbench export (JSON). URL-safe code is also in the current ?wb= param.",he),X(`Workbench export ready. Code length: ${K.length}`)},Oe=async()=>{const K=window.prompt("Paste a Workbench JSON export, Workbench URL, or legacy builder URL/hash.");if(!K)return;const he=K.trim();try{if(jf.isSupported(he)&&s){const Ge=await jf.decodeLegacyHash(he),fn={};for(const[an,ft]of Object.entries(Ge.slots)){const It=s.itemIdByName.get((ft??"").toLowerCase());It!=null&&(fn[an]=It)}ue.hydrateSnapshot({slots:{...re.slots,...fn},level:Ge.level??re.level,legacyHash:Ge.legacyHash}),ue.setLegacyHash(Ge.legacyHash),X("Imported legacy build hash.");return}if(he.startsWith("http://")||he.startsWith("https://")){const Ge=new URL(he),fn=iS(Ge),an=lS(Ge),ft=rS(Ge);d(fn),an&&ue.hydrateSnapshot(an),ft&&(de(ft.selectedByClass??{}),ce(ft.version??null)),X("Imported Workbench URL state.");return}const et=JSON.parse(he);ue.hydrateSnapshot(et),X("Imported Workbench JSON.")}catch(et){console.error(et),X("Import failed. Check the pasted JSON/URL/hash.")}},De=async()=>{_0({workbenchSnapshot:re,mode:_?"autobuilder":C?"abilitytree":null,abilityTreeState:{version:ne,selectedByClass:le},replace:!0}),await B0(window.location.href),X("Workbench link copied.")},Je=async()=>{if(!re.legacyHash){X("No imported legacy hash is currently available.");return}const K=new URL(d0(re.legacyHash),window.location.href).href;await B0(K),X("Legacy builder link copied.")},Pe=()=>{window.open(d0(re.legacyHash),"_blank","noopener,noreferrer")},Wt=()=>{Z(null),E(!1),k(!0)},un=()=>{k(!1),z(!1),E(!0)},Pt=()=>{E(!1),k(!1),z(!0)};return r?h.jsx("div",{className:"wb-app-shell flex min-h-screen items-center justify-center p-6",children:h.jsxs("div",{className:"wb-panel max-w-xl rounded-2xl p-6",children:[h.jsx("div",{className:"text-xl font-semibold",children:"Failed to load"}),h.jsx("div",{className:"mt-2 text-sm text-[var(--wb-muted)]",children:r})]})}):!s||!ye?h.jsx("div",{className:"wb-app-shell flex min-h-screen items-center justify-center p-6",children:h.jsxs("div",{className:"wb-panel max-w-xl rounded-2xl p-6",children:[h.jsx("div",{className:"text-xl font-semibold",children:"Loading..."}),h.jsx("div",{className:"mt-2 text-sm text-[var(--wb-muted)]",children:"Preparing item catalog, search index, and build state."})]})}):h.jsxs(bE,{sensors:dt,collisionDetection:y_,onDragStart:Kt,onDragOver:gt,onDragEnd:tn,children:[h.jsxs("div",{className:"wb-app-shell flex min-h-screen flex-col gap-3 p-3 lg:p-4",children:[h.jsxs("header",{className:"wb-panel wb-hero rounded-2xl px-4 py-3",children:[h.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[h.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[h.jsxs("div",{className:"wb-theme-toggle",children:[h.jsx("span",{className:"wb-theme-toggle-label",children:"Theme"}),["minimal","classic"].map(K=>h.jsx("button",{type:"button",className:"wb-theme-toggle-button","data-active":te===K?"true":"false",onClick:()=>A(K),children:K==="minimal"?"Minimal":"Classic"},K))]}),h.jsx("span",{className:"wb-chip",children:"Legacy-compatible imports"}),Be?h.jsxs("span",{className:"wb-chip","data-tone":"success",children:["Ability Tree ",Be.apUsed,"/",Be.apCap," AP"]}):null]}),h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Modular loadout planning studio with legacy builder compatibility."})]}),h.jsxs("button",{type:"button",className:"build-solver-logo-btn order-first flex shrink-0 cursor-pointer items-center justify-center gap-2 self-center rounded-xl px-6 py-3 text-lg font-bold tracking-tight shadow-lg sm:px-8 sm:py-4 sm:text-xl lg:order-none",onClick:un,title:"Open Build Solver for automated build search",children:[h.jsx(VE,{size:28,style:{color:"var(--wb-brand-icon)"},strokeWidth:2.5}),"Build Solver"]}),h.jsxs("div",{className:"flex min-w-0 flex-1 flex-wrap items-center justify-end gap-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("label",{className:"text-xs text-[var(--wb-muted)]",children:"Class"}),h.jsxs("select",{className:"wb-select w-36",value:re.characterClass??"",onChange:K=>ue.setCharacterClass(K.target.value||null),children:[h.jsx("option",{value:"",children:"Auto / Any"}),h.jsx("option",{value:"Warrior",children:"Warrior"}),h.jsx("option",{value:"Assassin",children:"Assassin"}),h.jsx("option",{value:"Mage",children:"Mage"}),h.jsx("option",{value:"Archer",children:"Archer"}),h.jsx("option",{value:"Shaman",children:"Shaman"})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("label",{className:"text-xs text-[var(--wb-muted)]",children:"Level"}),h.jsx("input",{className:"wb-input w-22",type:"number",min:1,max:106,value:re.level,onChange:K=>ue.setLevel(Number(K.target.value))})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("label",{className:"text-xs text-[var(--wb-muted)]",title:"Assume tomes for SP feasibility",children:"SP Tomes"}),h.jsxs("select",{className:"wb-select w-36",value:re.skillpointTomeMode??"no_tomes",onChange:K=>ue.setSkillpointTomeMode(K.target.value||"no_tomes"),children:[h.jsx("option",{value:"no_tomes",children:"None (200)"}),h.jsx("option",{value:"guild_rainbow",children:"Guild rainbow (+1 each)"}),h.jsx("option",{value:"flexible_2",children:"+2 flexible"})]})]}),h.jsxs(Ce,{variant:"ghost",onClick:De,children:[h.jsx(_h,{size:13,className:"mr-1 inline"}),"Share Session"]}),h.jsxs(Ce,{variant:"ghost",onClick:Wt,children:[h.jsx(fb,{size:13,className:"mr-1 inline"}),"Ability Tree"]}),h.jsx(Ce,{variant:"primary",onClick:Pt,children:"Recipe Solver"})]})]}),$?h.jsx("div",{className:"mt-3 text-xs wb-text-success",children:$}):null]}),h.jsxs("main",{className:"grid min-h-0 flex-1 grid-cols-1 gap-3 xl:grid-cols-[minmax(300px,22vw)_minmax(0,1fr)_440px] 2xl:grid-cols-[320px_minmax(0,1fr)_480px]",children:[h.jsx(VR,{catalog:s,state:u,setState:d,result:m,loading:v,selectedSlot:re.selectedSlot,onPin:Gt,onEquip:nn,onHover:()=>{},onSearch:()=>Y(K=>K+1)}),h.jsx(_k,{catalog:s,store:ue,onHoverItem:(K,he)=>ue.setComparePreview(K&&he?{itemId:K,slot:he}:null),onShareWorkbench:()=>{De()},onExportWorkbench:fe,onImportWorkbench:()=>{Oe()},searchResults:u.resultsBelowBuild?h.jsx(Fx,{catalog:s,result:m,selectedSlot:re.selectedSlot,state:u,loading:v,onPin:Gt,onEquip:nn,onHover:()=>{},embedded:!0}):void 0}),h.jsx(Sk,{catalog:s,snapshot:re,summary:ye,compareSummary:lt,compareSlot:re.comparePreview.slot,spellPreview:At,abilityTreeSummary:Be&&ge?{className:ge,apUsed:Be.apUsed,apCap:Be.apCap,selectedCount:Be.activeIds.length,hasErrors:Be.errors.length>0||Be.apUsed>Be.apCap}:null,actions:{onOpenAbilityTree:Wt,onCopyLegacyLink:()=>{Je()},onOpenLegacyBuilder:Pe}})]})]}),h.jsx(zA,{open:_,onOpenChange:E,catalog:s,snapshot:re,onLoadCandidate:K=>{ue.loadCandidate(K.slots),E(!1),X("Loaded Build Solver candidate into Workbench.")}}),h.jsx(GA,{open:C,onOpenChange:K=>{K&&Z(null),k(K)},dataset:B,loading:M,error:D,level:re.level,selectedClass:re.characterClass,inferredClass:xe,selectionsByClass:le,onSelectionsChange:de}),h.jsx(PO,{open:R,onOpenChange:z,onEquipCraft:(K,he)=>{ue.equipCraftedItem(K,he),z(!1),X(`Crafted ${he.type} equipped to ${K}.`)}})]})}class uz extends w.Component{state={hasError:!1,error:void 0};static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,s){console.error("App failed to render:",n,s)}render(){return this.state.hasError?h.jsx("div",{className:"flex min-h-screen items-center justify-center p-6",style:{background:"var(--wb-bg-bottom)",color:"var(--wb-text)"},children:h.jsxs("div",{className:"max-w-xl rounded-2xl p-6",style:{background:"var(--wb-panel)",border:"1px solid var(--wb-border)"},children:[h.jsx("div",{className:"text-xl font-semibold",children:"Something went wrong"}),h.jsxs("div",{className:"mt-2 text-sm",style:{color:"var(--wb-muted)"},children:[this.state.error?.message??"Failed to load the app."," Try refreshing the page."]})]})}):this.props.children}}pb(gb());t_.createRoot(document.getElementById("root")).render(h.jsx(w.StrictMode,{children:h.jsx(uz,{children:h.jsx(cz,{})})}));
