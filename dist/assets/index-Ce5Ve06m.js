function Qw(e,n){for(var s=0;s<n.length;s++){const i=n[s];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const c=Object.getOwnPropertyDescriptor(i,r);c&&Object.defineProperty(e,r,c.get?c:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}})();function xh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var rf={exports:{}},Ql={};var qv;function Jw(){if(qv)return Ql;qv=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(i,r,c){var u=null;if(c!==void 0&&(u=""+c),r.key!==void 0&&(u=""+r.key),"key"in r){c={};for(var d in r)d!=="key"&&(c[d]=r[d])}else c=r;return r=c.ref,{$$typeof:e,type:i,key:u,ref:r!==void 0?r:null,props:c}}return Ql.Fragment=n,Ql.jsx=s,Ql.jsxs=s,Ql}var Uv;function e_(){return Uv||(Uv=1,rf.exports=Jw()),rf.exports}var h=e_(),of={exports:{}},Ce={};var $v;function t_(){if($v)return Ce;$v=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function S(N){return N===null||typeof N!="object"?null:(N=b&&N[b]||N["@@iterator"],typeof N=="function"?N:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,j={};function k(N,z,X){this.props=N,this.context=z,this.refs=j,this.updater=X||_}k.prototype.isReactComponent={},k.prototype.setState=function(N,z){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,z,"setState")},k.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function R(){}R.prototype=k.prototype;function P(N,z,X){this.props=N,this.context=z,this.refs=j,this.updater=X||_}var B=P.prototype=new R;B.constructor=P,T(B,k.prototype),B.isPureReactComponent=!0;var q=Array.isArray;function M(){}var C={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function Z(N,z,X){var ue=X.ref;return{$$typeof:e,type:N,key:z,ref:ue!==void 0?ue:null,props:X}}function re(N,z){return Z(N.type,z,N.props)}function fe(N){return typeof N=="object"&&N!==null&&N.$$typeof===e}function ae(N){var z={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(X){return z[X]})}var ce=/\/+/g;function $(N,z){return typeof N=="object"&&N!==null&&N.key!=null?ae(""+N.key):z.toString(36)}function W(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(M,M):(N.status="pending",N.then(function(z){N.status==="pending"&&(N.status="fulfilled",N.value=z)},function(z){N.status==="pending"&&(N.status="rejected",N.reason=z)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function L(N,z,X,ue,oe){var le=typeof N;(le==="undefined"||le==="boolean")&&(N=null);var be=!1;if(N===null)be=!0;else switch(le){case"bigint":case"string":case"number":be=!0;break;case"object":switch(N.$$typeof){case e:case n:be=!0;break;case y:return be=N._init,L(be(N._payload),z,X,ue,oe)}}if(be)return oe=oe(N),be=ue===""?"."+$(N,0):ue,q(oe)?(X="",be!=null&&(X=be.replace(ce,"$&/")+"/"),L(oe,z,X,"",function(we){return we})):oe!=null&&(fe(oe)&&(oe=re(oe,X+(oe.key==null||N&&N.key===oe.key?"":(""+oe.key).replace(ce,"$&/")+"/")+be)),z.push(oe)),1;be=0;var De=ue===""?".":ue+":";if(q(N))for(var me=0;me<N.length;me++)ue=N[me],le=De+$(ue,me),be+=L(ue,z,X,le,oe);else if(me=S(N),typeof me=="function")for(N=me.call(N),me=0;!(ue=N.next()).done;)ue=ue.value,le=De+$(ue,me++),be+=L(ue,z,X,le,oe);else if(le==="object"){if(typeof N.then=="function")return L(W(N),z,X,ue,oe);throw z=String(N),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.")}return be}function Q(N,z,X){if(N==null)return N;var ue=[],oe=0;return L(N,ue,"","",function(le){return z.call(X,le,oe++)}),ue}function ee(N){if(N._status===-1){var z=N._result;z=z(),z.then(function(X){(N._status===0||N._status===-1)&&(N._status=1,N._result=X)},function(X){(N._status===0||N._status===-1)&&(N._status=2,N._result=X)}),N._status===-1&&(N._status=0,N._result=z)}if(N._status===1)return N._result.default;throw N._result}var A=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},Y={map:Q,forEach:function(N,z,X){Q(N,function(){z.apply(this,arguments)},X)},count:function(N){var z=0;return Q(N,function(){z++}),z},toArray:function(N){return Q(N,function(z){return z})||[]},only:function(N){if(!fe(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Ce.Activity=v,Ce.Children=Y,Ce.Component=k,Ce.Fragment=s,Ce.Profiler=r,Ce.PureComponent=P,Ce.StrictMode=i,Ce.Suspense=m,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(N){return C.H.useMemoCache(N)}},Ce.cache=function(N){return function(){return N.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(N,z,X){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ue=T({},N.props),oe=N.key;if(z!=null)for(le in z.key!==void 0&&(oe=""+z.key),z)!D.call(z,le)||le==="key"||le==="__self"||le==="__source"||le==="ref"&&z.ref===void 0||(ue[le]=z[le]);var le=arguments.length-2;if(le===1)ue.children=X;else if(1<le){for(var be=Array(le),De=0;De<le;De++)be[De]=arguments[De+2];ue.children=be}return Z(N.type,oe,ue)},Ce.createContext=function(N){return N={$$typeof:u,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:c,_context:N},N},Ce.createElement=function(N,z,X){var ue,oe={},le=null;if(z!=null)for(ue in z.key!==void 0&&(le=""+z.key),z)D.call(z,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(oe[ue]=z[ue]);var be=arguments.length-2;if(be===1)oe.children=X;else if(1<be){for(var De=Array(be),me=0;me<be;me++)De[me]=arguments[me+2];oe.children=De}if(N&&N.defaultProps)for(ue in be=N.defaultProps,be)oe[ue]===void 0&&(oe[ue]=be[ue]);return Z(N,le,oe)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(N){return{$$typeof:d,render:N}},Ce.isValidElement=fe,Ce.lazy=function(N){return{$$typeof:y,_payload:{_status:-1,_result:N},_init:ee}},Ce.memo=function(N,z){return{$$typeof:p,type:N,compare:z===void 0?null:z}},Ce.startTransition=function(N){var z=C.T,X={};C.T=X;try{var ue=N(),oe=C.S;oe!==null&&oe(X,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(M,A)}catch(le){A(le)}finally{z!==null&&X.types!==null&&(z.types=X.types),C.T=z}},Ce.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ce.use=function(N){return C.H.use(N)},Ce.useActionState=function(N,z,X){return C.H.useActionState(N,z,X)},Ce.useCallback=function(N,z){return C.H.useCallback(N,z)},Ce.useContext=function(N){return C.H.useContext(N)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(N,z){return C.H.useDeferredValue(N,z)},Ce.useEffect=function(N,z){return C.H.useEffect(N,z)},Ce.useEffectEvent=function(N){return C.H.useEffectEvent(N)},Ce.useId=function(){return C.H.useId()},Ce.useImperativeHandle=function(N,z,X){return C.H.useImperativeHandle(N,z,X)},Ce.useInsertionEffect=function(N,z){return C.H.useInsertionEffect(N,z)},Ce.useLayoutEffect=function(N,z){return C.H.useLayoutEffect(N,z)},Ce.useMemo=function(N,z){return C.H.useMemo(N,z)},Ce.useOptimistic=function(N,z){return C.H.useOptimistic(N,z)},Ce.useReducer=function(N,z,X){return C.H.useReducer(N,z,X)},Ce.useRef=function(N){return C.H.useRef(N)},Ce.useState=function(N){return C.H.useState(N)},Ce.useSyncExternalStore=function(N,z,X){return C.H.useSyncExternalStore(N,z,X)},Ce.useTransition=function(){return C.H.useTransition()},Ce.version="19.2.4",Ce}var Hv;function Sh(){return Hv||(Hv=1,of.exports=t_()),of.exports}var w=Sh();const sn=xh(w),F0=Qw({__proto__:null,default:sn},[w]);var cf={exports:{}},Jl={},uf={exports:{}},df={};var Zv;function n_(){return Zv||(Zv=1,(function(e){function n(L,Q){var ee=L.length;L.push(Q);e:for(;0<ee;){var A=ee-1>>>1,Y=L[A];if(0<r(Y,Q))L[A]=Q,L[ee]=Y,ee=A;else break e}}function s(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var Q=L[0],ee=L.pop();if(ee!==Q){L[0]=ee;e:for(var A=0,Y=L.length,N=Y>>>1;A<N;){var z=2*(A+1)-1,X=L[z],ue=z+1,oe=L[ue];if(0>r(X,ee))ue<Y&&0>r(oe,X)?(L[A]=oe,L[ue]=ee,A=ue):(L[A]=X,L[z]=ee,A=z);else if(ue<Y&&0>r(oe,ee))L[A]=oe,L[ue]=ee,A=ue;else break e}}return Q}function r(L,Q){var ee=L.sortIndex-Q.sortIndex;return ee!==0?ee:L.id-Q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var m=[],p=[],y=1,v=null,b=3,S=!1,_=!1,T=!1,j=!1,k=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function B(L){for(var Q=s(p);Q!==null;){if(Q.callback===null)i(p);else if(Q.startTime<=L)i(p),Q.sortIndex=Q.expirationTime,n(m,Q);else break;Q=s(p)}}function q(L){if(T=!1,B(L),!_)if(s(m)!==null)_=!0,M||(M=!0,ae());else{var Q=s(p);Q!==null&&W(q,Q.startTime-L)}}var M=!1,C=-1,D=5,Z=-1;function re(){return j?!0:!(e.unstable_now()-Z<D)}function fe(){if(j=!1,M){var L=e.unstable_now();Z=L;var Q=!0;try{e:{_=!1,T&&(T=!1,R(C),C=-1),S=!0;var ee=b;try{t:{for(B(L),v=s(m);v!==null&&!(v.expirationTime>L&&re());){var A=v.callback;if(typeof A=="function"){v.callback=null,b=v.priorityLevel;var Y=A(v.expirationTime<=L);if(L=e.unstable_now(),typeof Y=="function"){v.callback=Y,B(L),Q=!0;break t}v===s(m)&&i(m),B(L)}else i(m);v=s(m)}if(v!==null)Q=!0;else{var N=s(p);N!==null&&W(q,N.startTime-L),Q=!1}}break e}finally{v=null,b=ee,S=!1}Q=void 0}}finally{Q?ae():M=!1}}}var ae;if(typeof P=="function")ae=function(){P(fe)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,$=ce.port2;ce.port1.onmessage=fe,ae=function(){$.postMessage(null)}}else ae=function(){k(fe,0)};function W(L,Q){C=k(function(){L(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(L){switch(b){case 1:case 2:case 3:var Q=3;break;default:Q=b}var ee=b;b=Q;try{return L()}finally{b=ee}},e.unstable_requestPaint=function(){j=!0},e.unstable_runWithPriority=function(L,Q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var ee=b;b=L;try{return Q()}finally{b=ee}},e.unstable_scheduleCallback=function(L,Q,ee){var A=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?A+ee:A):ee=A,L){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ee+Y,L={id:y++,callback:Q,priorityLevel:L,startTime:ee,expirationTime:Y,sortIndex:-1},ee>A?(L.sortIndex=ee,n(p,L),s(m)===null&&L===s(p)&&(T?(R(C),C=-1):T=!0,W(q,ee-A))):(L.sortIndex=Y,n(m,L),_||S||(_=!0,M||(M=!0,ae()))),L},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(L){var Q=b;return function(){var ee=b;b=Q;try{return L.apply(this,arguments)}finally{b=ee}}}})(df)),df}var Fv;function a_(){return Fv||(Fv=1,uf.exports=n_()),uf.exports}var ff={exports:{}},yn={};var Gv;function s_(){if(Gv)return yn;Gv=1;var e=Sh();function n(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},r=Symbol.for("react.portal");function c(m,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:m,containerInfo:p,implementation:y}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return yn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,yn.createPortal=function(m,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(n(299));return c(m,p,null,y)},yn.flushSync=function(m){var p=u.T,y=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=p,i.p=y,i.d.f()}},yn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},yn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},yn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:S}):y==="script"&&i.d.X(m,{crossOrigin:v,integrity:b,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},yn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},yn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin);i.d.L(m,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},yn.preloadModule=function(m,p){if(typeof m=="string")if(p){var y=d(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},yn.requestFormReset=function(m){i.d.r(m)},yn.unstable_batchedUpdates=function(m,p){return m(p)},yn.useFormState=function(m,p,y){return u.H.useFormState(m,p,y)},yn.useFormStatus=function(){return u.H.useHostTransitionStatus()},yn.version="19.2.4",yn}var Yv;function G0(){if(Yv)return ff.exports;Yv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),ff.exports=s_(),ff.exports}var Vv;function i_(){if(Vv)return Jl;Vv=1;var e=a_(),n=Sh(),s=G0();function i(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var a=t,l=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(l=a.return),t=a.return;while(t)}return a.tag===3?l:null}function u(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function d(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function m(t){if(c(t)!==t)throw Error(i(188))}function p(t){var a=t.alternate;if(!a){if(a=c(t),a===null)throw Error(i(188));return a!==t?null:t}for(var l=t,o=a;;){var f=l.return;if(f===null)break;var g=f.alternate;if(g===null){if(o=f.return,o!==null){l=o;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===l)return m(f),t;if(g===o)return m(f),a;g=g.sibling}throw Error(i(188))}if(l.return!==o.return)l=f,o=g;else{for(var x=!1,E=f.child;E;){if(E===l){x=!0,l=f,o=g;break}if(E===o){x=!0,o=f,l=g;break}E=E.sibling}if(!x){for(E=g.child;E;){if(E===l){x=!0,l=g,o=f;break}if(E===o){x=!0,o=g,l=f;break}E=E.sibling}if(!x)throw Error(i(189))}}if(l.alternate!==o)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?t:a}function y(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=y(t),a!==null)return a;t=t.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),j=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),P=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),fe=Symbol.iterator;function ae(t){return t===null||typeof t!="object"?null:(t=fe&&t[fe]||t["@@iterator"],typeof t=="function"?t:null)}var ce=Symbol.for("react.client.reference");function $(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ce?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case T:return"Fragment";case k:return"Profiler";case j:return"StrictMode";case q:return"Suspense";case M:return"SuspenseList";case Z:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case _:return"Portal";case P:return t.displayName||"Context";case R:return(t._context.displayName||"Context")+".Consumer";case B:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case C:return a=t.displayName||null,a!==null?a:$(t.type)||"Memo";case D:a=t._payload,t=t._init;try{return $(t(a))}catch{}}return null}var W=Array.isArray,L=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee={pending:!1,data:null,method:null,action:null},A=[],Y=-1;function N(t){return{current:t}}function z(t){0>Y||(t.current=A[Y],A[Y]=null,Y--)}function X(t,a){Y++,A[Y]=t.current,t.current=a}var ue=N(null),oe=N(null),le=N(null),be=N(null);function De(t,a){switch(X(le,a),X(oe,t),X(ue,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?cv(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=cv(a),t=uv(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}z(ue),X(ue,t)}function me(){z(ue),z(oe),z(le)}function we(t){t.memoizedState!==null&&X(be,t);var a=ue.current,l=uv(a,t.type);a!==l&&(X(oe,t),X(ue,l))}function Re(t){oe.current===t&&(z(ue),z(oe)),be.current===t&&(z(be),Vl._currentValue=ee)}var Xe,Wt;function et(t){if(Xe===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);Xe=a&&a[1]||"",Wt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xe+t+Wt}var ln=!1;function Nt(t,a){if(!t||ln)return"";ln=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(a){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(K){var G=K}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(K){G=K}t.call(ie.prototype)}}else{try{throw Error()}catch(K){G=K}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(K){if(K&&G&&typeof K.stack=="string")return[K.stack,G.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=o.DetermineComponentFrameRoot(),x=g[0],E=g[1];if(x&&E){var O=x.split(`
`),F=E.split(`
`);for(f=o=0;o<O.length&&!O[o].includes("DetermineComponentFrameRoot");)o++;for(;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;if(o===O.length||f===F.length)for(o=O.length-1,f=F.length-1;1<=o&&0<=f&&O[o]!==F[f];)f--;for(;1<=o&&0<=f;o--,f--)if(O[o]!==F[f]){if(o!==1||f!==1)do if(o--,f--,0>f||O[o]!==F[f]){var J=`
`+O[o].replace(" at new "," at ");return t.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",t.displayName)),J}while(1<=o&&0<=f);break}}}finally{ln=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?et(l):""}function rn(t,a){switch(t.tag){case 26:case 27:case 5:return et(t.type);case 16:return et("Lazy");case 13:return t.child!==a&&a!==null?et("Suspense Fallback"):et("Suspense");case 19:return et("SuspenseList");case 0:case 15:return Nt(t.type,!1);case 11:return Nt(t.type.render,!1);case 1:return Nt(t.type,!0);case 31:return et("Activity");default:return""}}function Xt(t){try{var a="",l=null;do a+=rn(t,l),l=t,t=t.return;while(t);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Mt=Object.prototype.hasOwnProperty,de=e.unstable_scheduleCallback,ke=e.unstable_cancelCallback,Pe=e.unstable_shouldYield,Fe=e.unstable_requestPaint,Le=e.unstable_now,Qt=e.unstable_getCurrentPriorityLevel,pt=e.unstable_ImmediatePriority,Ut=e.unstable_UserBlockingPriority,We=e.unstable_NormalPriority,V=e.unstable_LowPriority,pe=e.unstable_IdlePriority,Ge=e.log,Ye=e.unstable_setDisableYieldValue,Dt=null,ct=null;function Rt(t){if(typeof Ge=="function"&&Ye(t),ct&&typeof ct.setStrictMode=="function")try{ct.setStrictMode(Dt,t)}catch{}}var St=Math.clz32?Math.clz32:si,Sa=Math.log,As=Math.LN2;function si(t){return t>>>=0,t===0?32:31-(Sa(t)/As|0)|0}var da=256,Ka=262144,vt=4194304;function jt(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function $t(t,a,l){var o=t.pendingLanes;if(o===0)return 0;var f=0,g=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~g,o!==0?f=jt(o):(x&=E,x!==0?f=jt(x):l||(l=E&~t,l!==0&&(f=jt(l))))):(E=o&~g,E!==0?f=jt(E):x!==0?f=jt(x):l||(l=o&~t,l!==0&&(f=jt(l)))),f===0?0:a!==0&&a!==f&&(a&g)===0&&(g=f&-f,l=a&-a,g>=l||g===32&&(l&4194048)!==0)?a:f}function pn(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function gn(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Jt(){var t=vt;return vt<<=1,(vt&62914560)===0&&(vt=4194304),t}function on(t){for(var a=[],l=0;31>l;l++)a.push(t);return a}function bn(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Pt(t,a,l,o,f,g){var x=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var E=t.entanglements,O=t.expirationTimes,F=t.hiddenUpdates;for(l=x&~l;0<l;){var J=31-St(l),ie=1<<J;E[J]=0,O[J]=-1;var G=F[J];if(G!==null)for(F[J]=null,J=0;J<G.length;J++){var K=G[J];K!==null&&(K.lane&=-536870913)}l&=~ie}o!==0&&it(t,o,0),g!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=g&~(x&~a))}function it(t,a,l){t.pendingLanes|=a,t.suspendedLanes&=~a;var o=31-St(a);t.entangledLanes|=a,t.entanglements[o]=t.entanglements[o]|1073741824|l&261930}function cn(t,a){var l=t.entangledLanes|=a;for(t=t.entanglements;l;){var o=31-St(l),f=1<<o;f&a|t[o]&a&&(t[o]|=a),l&=~f}}function te(t,a){var l=a&-a;return l=(l&42)!==0?1:he(l),(l&(t.suspendedLanes|a))!==0?0:l}function he(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ge(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function je(){var t=Q.p;return t!==0?t:(t=window.event,t===void 0?32:Av(t.type))}function Qe(t,a){var l=Q.p;try{return Q.p=t,a()}finally{Q.p=l}}var wt=Math.random().toString(36).slice(2),Te="__reactFiber$"+wt,Ae="__reactProps$"+wt,Be="__reactContainer$"+wt,vn="__reactEvents$"+wt,Ee="__reactListeners$"+wt,Tr="__reactHandles$"+wt,Wa="__reactResources$"+wt,ta="__reactMarker$"+wt;function fa(t){delete t[Te],delete t[Ae],delete t[vn],delete t[Ee],delete t[Tr]}function Ne(t){var a=t[Te];if(a)return a;for(var l=t.parentNode;l;){if(a=l[Be]||l[Te]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(t=vv(t);t!==null;){if(l=t[Te])return l;t=vv(t)}return a}t=l,l=t.parentNode}return null}function Xa(t){if(t=t[Te]||t[Be]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function wa(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(i(33))}function It(t){var a=t[Wa];return a||(a=t[Wa]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Bt(t){t[ta]=!0}var rl=new Set,ol={};function ha(t,a){_a(t,a),_a(t+"Capture",a)}function _a(t,a){for(ol[t]=a,t=0;t<a.length;t++)rl.add(a[t])}var Nr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),cl={},ul={};function ZS(t){return Mt.call(ul,t)?!0:Mt.call(cl,t)?!1:Nr.test(t)?ul[t]=!0:(cl[t]=!0,!1)}function Mr(t,a,l){if(ZS(a))if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var o=a.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+l)}}function jr(t,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+l)}}function Ea(t,a,l,o){if(o===null)t.removeAttribute(l);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(a,l,""+o)}}function Hn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tm(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function FS(t,a,l){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return f.call(this)},set:function(x){l=""+x,g.call(this,x)}}),Object.defineProperty(t,a,{enumerable:o.enumerable}),{getValue:function(){return l},setValue:function(x){l=""+x},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Jc(t){if(!t._valueTracker){var a=tm(t)?"checked":"value";t._valueTracker=FS(t,a,""+t[a])}}function nm(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var l=a.getValue(),o="";return t&&(o=tm(t)?t.checked?"true":"false":t.value),t=o,t!==l?(a.setValue(t),!0):!1}function Cr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var GS=/[\n"\\]/g;function Zn(t){return t.replace(GS,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function eu(t,a,l,o,f,g,x,E){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),a!=null?x==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Hn(a)):t.value!==""+Hn(a)&&(t.value=""+Hn(a)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),a!=null?tu(t,x,Hn(a)):l!=null?tu(t,x,Hn(l)):o!=null&&t.removeAttribute("value"),f==null&&g!=null&&(t.defaultChecked=!!g),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+Hn(E):t.removeAttribute("name")}function am(t,a,l,o,f,g,x,E){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.type=g),a!=null||l!=null){if(!(g!=="submit"&&g!=="reset"||a!=null)){Jc(t);return}l=l!=null?""+Hn(l):"",a=a!=null?""+Hn(a):l,E||a===t.value||(t.value=a),t.defaultValue=a}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),Jc(t)}function tu(t,a,l){a==="number"&&Cr(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function ii(t,a,l,o){if(t=t.options,a){a={};for(var f=0;f<l.length;f++)a["$"+l[f]]=!0;for(l=0;l<t.length;l++)f=a.hasOwnProperty("$"+t[l].value),t[l].selected!==f&&(t[l].selected=f),f&&o&&(t[l].defaultSelected=!0)}else{for(l=""+Hn(l),a=null,f=0;f<t.length;f++){if(t[f].value===l){t[f].selected=!0,o&&(t[f].defaultSelected=!0);return}a!==null||t[f].disabled||(a=t[f])}a!==null&&(a.selected=!0)}}function sm(t,a,l){if(a!=null&&(a=""+Hn(a),a!==t.value&&(t.value=a),l==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=l!=null?""+Hn(l):""}function im(t,a,l,o){if(a==null){if(o!=null){if(l!=null)throw Error(i(92));if(W(o)){if(1<o.length)throw Error(i(93));o=o[0]}l=o}l==null&&(l=""),a=l}l=Hn(a),t.defaultValue=l,o=t.textContent,o===l&&o!==""&&o!==null&&(t.value=o),Jc(t)}function li(t,a){if(a){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=a;return}}t.textContent=a}var YS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function lm(t,a,l){var o=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?o?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":o?t.setProperty(a,l):typeof l!="number"||l===0||YS.has(a)?a==="float"?t.cssFloat=l:t[a]=(""+l).trim():t[a]=l+"px"}function rm(t,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(t=t.style,l!=null){for(var o in l)!l.hasOwnProperty(o)||a!=null&&a.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var f in a)o=a[f],a.hasOwnProperty(f)&&l[f]!==o&&lm(t,f,o)}else for(var g in a)a.hasOwnProperty(g)&&lm(t,g,a[g])}function nu(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var VS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),KS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Dr(t){return KS.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Ta(){}var au=null;function su(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ri=null,oi=null;function om(t){var a=Xa(t);if(a&&(t=a.stateNode)){var l=t[Ae]||null;e:switch(t=a.stateNode,a.type){case"input":if(eu(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+Zn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var o=l[a];if(o!==t&&o.form===t.form){var f=o[Ae]||null;if(!f)throw Error(i(90));eu(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<l.length;a++)o=l[a],o.form===t.form&&nm(o)}break e;case"textarea":sm(t,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&ii(t,!!l.multiple,a,!1)}}}var iu=!1;function cm(t,a,l){if(iu)return t(a,l);iu=!0;try{var o=t(a);return o}finally{if(iu=!1,(ri!==null||oi!==null)&&(yo(),ri&&(a=ri,t=oi,oi=ri=null,om(a),t)))for(a=0;a<t.length;a++)om(t[a])}}function dl(t,a){var l=t.stateNode;if(l===null)return null;var o=l[Ae]||null;if(o===null)return null;l=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var Na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),lu=!1;if(Na)try{var fl={};Object.defineProperty(fl,"passive",{get:function(){lu=!0}}),window.addEventListener("test",fl,fl),window.removeEventListener("test",fl,fl)}catch{lu=!1}var Qa=null,ru=null,Rr=null;function um(){if(Rr)return Rr;var t,a=ru,l=a.length,o,f="value"in Qa?Qa.value:Qa.textContent,g=f.length;for(t=0;t<l&&a[t]===f[t];t++);var x=l-t;for(o=1;o<=x&&a[l-o]===f[g-o];o++);return Rr=f.slice(t,1<o?1-o:void 0)}function kr(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function Ar(){return!0}function dm(){return!1}function _n(t){function a(l,o,f,g,x){this._reactName=l,this._targetInst=f,this.type=o,this.nativeEvent=g,this.target=x,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(l=t[E],this[E]=l?l(g):g[E]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ar:dm,this.isPropagationStopped=dm,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Ar)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Ar)},persist:function(){},isPersistent:Ar}),a}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Or=_n(Os),hl=v({},Os,{view:0,detail:0}),WS=_n(hl),ou,cu,ml,zr=v({},hl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:du,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ml&&(ml&&t.type==="mousemove"?(ou=t.screenX-ml.screenX,cu=t.screenY-ml.screenY):cu=ou=0,ml=t),ou)},movementY:function(t){return"movementY"in t?t.movementY:cu}}),fm=_n(zr),XS=v({},zr,{dataTransfer:0}),QS=_n(XS),JS=v({},hl,{relatedTarget:0}),uu=_n(JS),e1=v({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),t1=_n(e1),n1=v({},Os,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),a1=_n(n1),s1=v({},Os,{data:0}),hm=_n(s1),i1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},l1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function o1(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=r1[t])?!!a[t]:!1}function du(){return o1}var c1=v({},hl,{key:function(t){if(t.key){var a=i1[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=kr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?l1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:du,charCode:function(t){return t.type==="keypress"?kr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),u1=_n(c1),d1=v({},zr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mm=_n(d1),f1=v({},hl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:du}),h1=_n(f1),m1=v({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),p1=_n(m1),g1=v({},zr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),v1=_n(g1),y1=v({},Os,{newState:0,oldState:0}),b1=_n(y1),x1=[9,13,27,32],fu=Na&&"CompositionEvent"in window,pl=null;Na&&"documentMode"in document&&(pl=document.documentMode);var S1=Na&&"TextEvent"in window&&!pl,pm=Na&&(!fu||pl&&8<pl&&11>=pl),gm=" ",vm=!1;function ym(t,a){switch(t){case"keyup":return x1.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ci=!1;function w1(t,a){switch(t){case"compositionend":return bm(a);case"keypress":return a.which!==32?null:(vm=!0,gm);case"textInput":return t=a.data,t===gm&&vm?null:t;default:return null}}function _1(t,a){if(ci)return t==="compositionend"||!fu&&ym(t,a)?(t=um(),Rr=ru=Qa=null,ci=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return pm&&a.locale!=="ko"?null:a.data;default:return null}}var E1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xm(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!E1[t.type]:a==="textarea"}function Sm(t,a,l,o){ri?oi?oi.push(o):oi=[o]:ri=o,a=To(a,"onChange"),0<a.length&&(l=new Or("onChange","change",null,l,o),t.push({event:l,listeners:a}))}var gl=null,vl=null;function T1(t){av(t,0)}function Pr(t){var a=wa(t);if(nm(a))return t}function wm(t,a){if(t==="change")return a}var _m=!1;if(Na){var hu;if(Na){var mu="oninput"in document;if(!mu){var Em=document.createElement("div");Em.setAttribute("oninput","return;"),mu=typeof Em.oninput=="function"}hu=mu}else hu=!1;_m=hu&&(!document.documentMode||9<document.documentMode)}function Tm(){gl&&(gl.detachEvent("onpropertychange",Nm),vl=gl=null)}function Nm(t){if(t.propertyName==="value"&&Pr(vl)){var a=[];Sm(a,vl,t,su(t)),cm(T1,a)}}function N1(t,a,l){t==="focusin"?(Tm(),gl=a,vl=l,gl.attachEvent("onpropertychange",Nm)):t==="focusout"&&Tm()}function M1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pr(vl)}function j1(t,a){if(t==="click")return Pr(a)}function C1(t,a){if(t==="input"||t==="change")return Pr(a)}function D1(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var kn=typeof Object.is=="function"?Object.is:D1;function yl(t,a){if(kn(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var l=Object.keys(t),o=Object.keys(a);if(l.length!==o.length)return!1;for(o=0;o<l.length;o++){var f=l[o];if(!Mt.call(a,f)||!kn(t[f],a[f]))return!1}return!0}function Mm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jm(t,a){var l=Mm(t);t=0;for(var o;l;){if(l.nodeType===3){if(o=t+l.textContent.length,t<=a&&o>=a)return{node:l,offset:a-t};t=o}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Mm(l)}}function Cm(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Cm(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function Dm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=Cr(t.document);a instanceof t.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)t=a.contentWindow;else break;a=Cr(t.document)}return a}function pu(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var R1=Na&&"documentMode"in document&&11>=document.documentMode,ui=null,gu=null,bl=null,vu=!1;function Rm(t,a,l){var o=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;vu||ui==null||ui!==Cr(o)||(o=ui,"selectionStart"in o&&pu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),bl&&yl(bl,o)||(bl=o,o=To(gu,"onSelect"),0<o.length&&(a=new Or("onSelect","select",null,a,l),t.push({event:a,listeners:o}),a.target=ui)))}function zs(t,a){var l={};return l[t.toLowerCase()]=a.toLowerCase(),l["Webkit"+t]="webkit"+a,l["Moz"+t]="moz"+a,l}var di={animationend:zs("Animation","AnimationEnd"),animationiteration:zs("Animation","AnimationIteration"),animationstart:zs("Animation","AnimationStart"),transitionrun:zs("Transition","TransitionRun"),transitionstart:zs("Transition","TransitionStart"),transitioncancel:zs("Transition","TransitionCancel"),transitionend:zs("Transition","TransitionEnd")},yu={},km={};Na&&(km=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);function Ps(t){if(yu[t])return yu[t];if(!di[t])return t;var a=di[t],l;for(l in a)if(a.hasOwnProperty(l)&&l in km)return yu[t]=a[l];return t}var Am=Ps("animationend"),Om=Ps("animationiteration"),zm=Ps("animationstart"),k1=Ps("transitionrun"),A1=Ps("transitionstart"),O1=Ps("transitioncancel"),Pm=Ps("transitionend"),Im=new Map,bu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bu.push("scrollEnd");function na(t,a){Im.set(t,a),ha(a,[t])}var Ir=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Fn=[],fi=0,xu=0;function Br(){for(var t=fi,a=xu=fi=0;a<t;){var l=Fn[a];Fn[a++]=null;var o=Fn[a];Fn[a++]=null;var f=Fn[a];Fn[a++]=null;var g=Fn[a];if(Fn[a++]=null,o!==null&&f!==null){var x=o.pending;x===null?f.next=f:(f.next=x.next,x.next=f),o.pending=f}g!==0&&Bm(l,f,g)}}function Lr(t,a,l,o){Fn[fi++]=t,Fn[fi++]=a,Fn[fi++]=l,Fn[fi++]=o,xu|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Su(t,a,l,o){return Lr(t,a,l,o),qr(t)}function Is(t,a){return Lr(t,null,null,a),qr(t)}function Bm(t,a,l){t.lanes|=l;var o=t.alternate;o!==null&&(o.lanes|=l);for(var f=!1,g=t.return;g!==null;)g.childLanes|=l,o=g.alternate,o!==null&&(o.childLanes|=l),g.tag===22&&(t=g.stateNode,t===null||t._visibility&1||(f=!0)),t=g,g=g.return;return t.tag===3?(g=t.stateNode,f&&a!==null&&(f=31-St(l),t=g.hiddenUpdates,o=t[f],o===null?t[f]=[a]:o.push(a),a.lane=l|536870912),g):null}function qr(t){if(50<Ul)throw Ul=0,Dd=null,Error(i(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var hi={};function z1(t,a,l,o){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function An(t,a,l,o){return new z1(t,a,l,o)}function wu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ma(t,a){var l=t.alternate;return l===null?(l=An(t.tag,a,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=a,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,a=t.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function Lm(t,a){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,a=l.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function Ur(t,a,l,o,f,g){var x=0;if(o=t,typeof t=="function")wu(t)&&(x=1);else if(typeof t=="string")x=qw(t,l,ue.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Z:return t=An(31,l,a,f),t.elementType=Z,t.lanes=g,t;case T:return Bs(l.children,f,g,a);case j:x=8,f|=24;break;case k:return t=An(12,l,a,f|2),t.elementType=k,t.lanes=g,t;case q:return t=An(13,l,a,f),t.elementType=q,t.lanes=g,t;case M:return t=An(19,l,a,f),t.elementType=M,t.lanes=g,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case P:x=10;break e;case R:x=9;break e;case B:x=11;break e;case C:x=14;break e;case D:x=16,o=null;break e}x=29,l=Error(i(130,t===null?"null":typeof t,"")),o=null}return a=An(x,l,a,f),a.elementType=t,a.type=o,a.lanes=g,a}function Bs(t,a,l,o){return t=An(7,t,o,a),t.lanes=l,t}function _u(t,a,l){return t=An(6,t,null,a),t.lanes=l,t}function qm(t){var a=An(18,null,null,0);return a.stateNode=t,a}function Eu(t,a,l){return a=An(4,t.children!==null?t.children:[],t.key,a),a.lanes=l,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Um=new WeakMap;function Gn(t,a){if(typeof t=="object"&&t!==null){var l=Um.get(t);return l!==void 0?l:(a={value:t,source:a,stack:Xt(a)},Um.set(t,a),a)}return{value:t,source:a,stack:Xt(a)}}var mi=[],pi=0,$r=null,xl=0,Yn=[],Vn=0,Ja=null,ma=1,pa="";function ja(t,a){mi[pi++]=xl,mi[pi++]=$r,$r=t,xl=a}function $m(t,a,l){Yn[Vn++]=ma,Yn[Vn++]=pa,Yn[Vn++]=Ja,Ja=t;var o=ma;t=pa;var f=32-St(o)-1;o&=~(1<<f),l+=1;var g=32-St(a)+f;if(30<g){var x=f-f%5;g=(o&(1<<x)-1).toString(32),o>>=x,f-=x,ma=1<<32-St(a)+f|l<<f|o,pa=g+t}else ma=1<<g|l<<f|o,pa=t}function Tu(t){t.return!==null&&(ja(t,1),$m(t,1,0))}function Nu(t){for(;t===$r;)$r=mi[--pi],mi[pi]=null,xl=mi[--pi],mi[pi]=null;for(;t===Ja;)Ja=Yn[--Vn],Yn[Vn]=null,pa=Yn[--Vn],Yn[Vn]=null,ma=Yn[--Vn],Yn[Vn]=null}function Hm(t,a){Yn[Vn++]=ma,Yn[Vn++]=pa,Yn[Vn++]=Ja,ma=a.id,pa=a.overflow,Ja=t}var un=null,yt=null,Ve=!1,es=null,Kn=!1,Mu=Error(i(519));function ts(t){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sl(Gn(a,t)),Mu}function Zm(t){var a=t.stateNode,l=t.type,o=t.memoizedProps;switch(a[Te]=t,a[Ae]=o,l){case"dialog":$e("cancel",a),$e("close",a);break;case"iframe":case"object":case"embed":$e("load",a);break;case"video":case"audio":for(l=0;l<Hl.length;l++)$e(Hl[l],a);break;case"source":$e("error",a);break;case"img":case"image":case"link":$e("error",a),$e("load",a);break;case"details":$e("toggle",a);break;case"input":$e("invalid",a),am(a,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":$e("invalid",a);break;case"textarea":$e("invalid",a),im(a,o.value,o.defaultValue,o.children)}l=o.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||o.suppressHydrationWarning===!0||rv(a.textContent,l)?(o.popover!=null&&($e("beforetoggle",a),$e("toggle",a)),o.onScroll!=null&&$e("scroll",a),o.onScrollEnd!=null&&$e("scrollend",a),o.onClick!=null&&(a.onclick=Ta),a=!0):a=!1,a||ts(t,!0)}function Fm(t){for(un=t.return;un;)switch(un.tag){case 5:case 31:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:un=un.return}}function gi(t){if(t!==un)return!1;if(!Ve)return Fm(t),Ve=!0,!1;var a=t.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||Fd(t.type,t.memoizedProps)),l=!l),l&&yt&&ts(t),Fm(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));yt=gv(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));yt=gv(t)}else a===27?(a=yt,ps(t.type)?(t=Wd,Wd=null,yt=t):yt=a):yt=un?Xn(t.stateNode.nextSibling):null;return!0}function Ls(){yt=un=null,Ve=!1}function ju(){var t=es;return t!==null&&(Mn===null?Mn=t:Mn.push.apply(Mn,t),es=null),t}function Sl(t){es===null?es=[t]:es.push(t)}var Cu=N(null),qs=null,Ca=null;function ns(t,a,l){X(Cu,a._currentValue),a._currentValue=l}function Da(t){t._currentValue=Cu.current,z(Cu)}function Du(t,a,l){for(;t!==null;){var o=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),t===l)break;t=t.return}}function Ru(t,a,l,o){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var g=f.dependencies;if(g!==null){var x=f.child;g=g.firstContext;e:for(;g!==null;){var E=g;g=f;for(var O=0;O<a.length;O++)if(E.context===a[O]){g.lanes|=l,E=g.alternate,E!==null&&(E.lanes|=l),Du(g.return,l,t),o||(x=null);break e}g=E.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(i(341));x.lanes|=l,g=x.alternate,g!==null&&(g.lanes|=l),Du(x,l,t),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===t){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function vi(t,a,l,o){t=null;for(var f=a,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var E=f.type;kn(f.pendingProps.value,x.value)||(t!==null?t.push(E):t=[E])}}else if(f===be.current){if(x=f.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Vl):t=[Vl])}f=f.return}t!==null&&Ru(a,t,l,o),a.flags|=262144}function Hr(t){for(t=t.firstContext;t!==null;){if(!kn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Us(t){qs=t,Ca=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function dn(t){return Gm(qs,t)}function Zr(t,a){return qs===null&&Us(t),Gm(t,a)}function Gm(t,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},Ca===null){if(t===null)throw Error(i(308));Ca=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else Ca=Ca.next=a;return l}var P1=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(l,o){t.push(o)}};this.abort=function(){a.aborted=!0,t.forEach(function(l){return l()})}},I1=e.unstable_scheduleCallback,B1=e.unstable_NormalPriority,Ht={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ku(){return{controller:new P1,data:new Map,refCount:0}}function wl(t){t.refCount--,t.refCount===0&&I1(B1,function(){t.controller.abort()})}var _l=null,Au=0,yi=0,bi=null;function L1(t,a){if(_l===null){var l=_l=[];Au=0,yi=Pd(),bi={status:"pending",value:void 0,then:function(o){l.push(o)}}}return Au++,a.then(Ym,Ym),a}function Ym(){if(--Au===0&&_l!==null){bi!==null&&(bi.status="fulfilled");var t=_l;_l=null,yi=0,bi=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function q1(t,a){var l=[],o={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return t.then(function(){o.status="fulfilled",o.value=a;for(var f=0;f<l.length;f++)(0,l[f])(a)},function(f){for(o.status="rejected",o.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),o}var Vm=L.S;L.S=function(t,a){Rg=Le(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&L1(t,a),Vm!==null&&Vm(t,a)};var $s=N(null);function Ou(){var t=$s.current;return t!==null?t:ht.pooledCache}function Fr(t,a){a===null?X($s,$s.current):X($s,a.pool)}function Km(){var t=Ou();return t===null?null:{parent:Ht._currentValue,pool:t}}var xi=Error(i(460)),zu=Error(i(474)),Gr=Error(i(542)),Yr={then:function(){}};function Wm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Xm(t,a,l){switch(l=t[l],l===void 0?t.push(a):l!==a&&(a.then(Ta,Ta),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Jm(t),t;default:if(typeof a.status=="string")a.then(Ta,Ta);else{if(t=ht,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=a,t.status="pending",t.then(function(o){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=o}},function(o){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=o}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Jm(t),t}throw Zs=a,xi}}function Hs(t){try{var a=t._init;return a(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(Zs=l,xi):l}}var Zs=null;function Qm(){if(Zs===null)throw Error(i(459));var t=Zs;return Zs=null,t}function Jm(t){if(t===xi||t===Gr)throw Error(i(483))}var Si=null,El=0;function Vr(t){var a=El;return El+=1,Si===null&&(Si=[]),Xm(Si,t,a)}function Tl(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Kr(t,a){throw a.$$typeof===b?Error(i(525)):(t=Object.prototype.toString.call(a),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function ep(t){function a(U,I){if(t){var H=U.deletions;H===null?(U.deletions=[I],U.flags|=16):H.push(I)}}function l(U,I){if(!t)return null;for(;I!==null;)a(U,I),I=I.sibling;return null}function o(U){for(var I=new Map;U!==null;)U.key!==null?I.set(U.key,U):I.set(U.index,U),U=U.sibling;return I}function f(U,I){return U=Ma(U,I),U.index=0,U.sibling=null,U}function g(U,I,H){return U.index=H,t?(H=U.alternate,H!==null?(H=H.index,H<I?(U.flags|=67108866,I):H):(U.flags|=67108866,I)):(U.flags|=1048576,I)}function x(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function E(U,I,H,ne){return I===null||I.tag!==6?(I=_u(H,U.mode,ne),I.return=U,I):(I=f(I,H),I.return=U,I)}function O(U,I,H,ne){var xe=H.type;return xe===T?J(U,I,H.props.children,ne,H.key):I!==null&&(I.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===D&&Hs(xe)===I.type)?(I=f(I,H.props),Tl(I,H),I.return=U,I):(I=Ur(H.type,H.key,H.props,null,U.mode,ne),Tl(I,H),I.return=U,I)}function F(U,I,H,ne){return I===null||I.tag!==4||I.stateNode.containerInfo!==H.containerInfo||I.stateNode.implementation!==H.implementation?(I=Eu(H,U.mode,ne),I.return=U,I):(I=f(I,H.children||[]),I.return=U,I)}function J(U,I,H,ne,xe){return I===null||I.tag!==7?(I=Bs(H,U.mode,ne,xe),I.return=U,I):(I=f(I,H),I.return=U,I)}function ie(U,I,H){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=_u(""+I,U.mode,H),I.return=U,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case S:return H=Ur(I.type,I.key,I.props,null,U.mode,H),Tl(H,I),H.return=U,H;case _:return I=Eu(I,U.mode,H),I.return=U,I;case D:return I=Hs(I),ie(U,I,H)}if(W(I)||ae(I))return I=Bs(I,U.mode,H,null),I.return=U,I;if(typeof I.then=="function")return ie(U,Vr(I),H);if(I.$$typeof===P)return ie(U,Zr(U,I),H);Kr(U,I)}return null}function G(U,I,H,ne){var xe=I!==null?I.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return xe!==null?null:E(U,I,""+H,ne);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case S:return H.key===xe?O(U,I,H,ne):null;case _:return H.key===xe?F(U,I,H,ne):null;case D:return H=Hs(H),G(U,I,H,ne)}if(W(H)||ae(H))return xe!==null?null:J(U,I,H,ne,null);if(typeof H.then=="function")return G(U,I,Vr(H),ne);if(H.$$typeof===P)return G(U,I,Zr(U,H),ne);Kr(U,H)}return null}function K(U,I,H,ne,xe){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return U=U.get(H)||null,E(I,U,""+ne,xe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case S:return U=U.get(ne.key===null?H:ne.key)||null,O(I,U,ne,xe);case _:return U=U.get(ne.key===null?H:ne.key)||null,F(I,U,ne,xe);case D:return ne=Hs(ne),K(U,I,H,ne,xe)}if(W(ne)||ae(ne))return U=U.get(H)||null,J(I,U,ne,xe,null);if(typeof ne.then=="function")return K(U,I,H,Vr(ne),xe);if(ne.$$typeof===P)return K(U,I,H,Zr(I,ne),xe);Kr(I,ne)}return null}function ve(U,I,H,ne){for(var xe=null,tt=null,ye=I,Ie=I=0,Ze=null;ye!==null&&Ie<H.length;Ie++){ye.index>Ie?(Ze=ye,ye=null):Ze=ye.sibling;var nt=G(U,ye,H[Ie],ne);if(nt===null){ye===null&&(ye=Ze);break}t&&ye&&nt.alternate===null&&a(U,ye),I=g(nt,I,Ie),tt===null?xe=nt:tt.sibling=nt,tt=nt,ye=Ze}if(Ie===H.length)return l(U,ye),Ve&&ja(U,Ie),xe;if(ye===null){for(;Ie<H.length;Ie++)ye=ie(U,H[Ie],ne),ye!==null&&(I=g(ye,I,Ie),tt===null?xe=ye:tt.sibling=ye,tt=ye);return Ve&&ja(U,Ie),xe}for(ye=o(ye);Ie<H.length;Ie++)Ze=K(ye,U,Ie,H[Ie],ne),Ze!==null&&(t&&Ze.alternate!==null&&ye.delete(Ze.key===null?Ie:Ze.key),I=g(Ze,I,Ie),tt===null?xe=Ze:tt.sibling=Ze,tt=Ze);return t&&ye.forEach(function(xs){return a(U,xs)}),Ve&&ja(U,Ie),xe}function _e(U,I,H,ne){if(H==null)throw Error(i(151));for(var xe=null,tt=null,ye=I,Ie=I=0,Ze=null,nt=H.next();ye!==null&&!nt.done;Ie++,nt=H.next()){ye.index>Ie?(Ze=ye,ye=null):Ze=ye.sibling;var xs=G(U,ye,nt.value,ne);if(xs===null){ye===null&&(ye=Ze);break}t&&ye&&xs.alternate===null&&a(U,ye),I=g(xs,I,Ie),tt===null?xe=xs:tt.sibling=xs,tt=xs,ye=Ze}if(nt.done)return l(U,ye),Ve&&ja(U,Ie),xe;if(ye===null){for(;!nt.done;Ie++,nt=H.next())nt=ie(U,nt.value,ne),nt!==null&&(I=g(nt,I,Ie),tt===null?xe=nt:tt.sibling=nt,tt=nt);return Ve&&ja(U,Ie),xe}for(ye=o(ye);!nt.done;Ie++,nt=H.next())nt=K(ye,U,Ie,nt.value,ne),nt!==null&&(t&&nt.alternate!==null&&ye.delete(nt.key===null?Ie:nt.key),I=g(nt,I,Ie),tt===null?xe=nt:tt.sibling=nt,tt=nt);return t&&ye.forEach(function(Xw){return a(U,Xw)}),Ve&&ja(U,Ie),xe}function ft(U,I,H,ne){if(typeof H=="object"&&H!==null&&H.type===T&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case S:e:{for(var xe=H.key;I!==null;){if(I.key===xe){if(xe=H.type,xe===T){if(I.tag===7){l(U,I.sibling),ne=f(I,H.props.children),ne.return=U,U=ne;break e}}else if(I.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===D&&Hs(xe)===I.type){l(U,I.sibling),ne=f(I,H.props),Tl(ne,H),ne.return=U,U=ne;break e}l(U,I);break}else a(U,I);I=I.sibling}H.type===T?(ne=Bs(H.props.children,U.mode,ne,H.key),ne.return=U,U=ne):(ne=Ur(H.type,H.key,H.props,null,U.mode,ne),Tl(ne,H),ne.return=U,U=ne)}return x(U);case _:e:{for(xe=H.key;I!==null;){if(I.key===xe)if(I.tag===4&&I.stateNode.containerInfo===H.containerInfo&&I.stateNode.implementation===H.implementation){l(U,I.sibling),ne=f(I,H.children||[]),ne.return=U,U=ne;break e}else{l(U,I);break}else a(U,I);I=I.sibling}ne=Eu(H,U.mode,ne),ne.return=U,U=ne}return x(U);case D:return H=Hs(H),ft(U,I,H,ne)}if(W(H))return ve(U,I,H,ne);if(ae(H)){if(xe=ae(H),typeof xe!="function")throw Error(i(150));return H=xe.call(H),_e(U,I,H,ne)}if(typeof H.then=="function")return ft(U,I,Vr(H),ne);if(H.$$typeof===P)return ft(U,I,Zr(U,H),ne);Kr(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,I!==null&&I.tag===6?(l(U,I.sibling),ne=f(I,H),ne.return=U,U=ne):(l(U,I),ne=_u(H,U.mode,ne),ne.return=U,U=ne),x(U)):l(U,I)}return function(U,I,H,ne){try{El=0;var xe=ft(U,I,H,ne);return Si=null,xe}catch(ye){if(ye===xi||ye===Gr)throw ye;var tt=An(29,ye,null,U.mode);return tt.lanes=ne,tt.return=U,tt}}}var Fs=ep(!0),tp=ep(!1),as=!1;function Pu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Iu(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function ss(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function is(t,a,l){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(st&2)!==0){var f=o.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),o.pending=a,a=qr(t),Bm(t,null,l),a}return Lr(t,o,a,l),qr(t)}function Nl(t,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var o=a.lanes;o&=t.pendingLanes,l|=o,a.lanes=l,cn(t,l)}}function Bu(t,a){var l=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,l===o)){var f=null,g=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};g===null?f=g=x:g=g.next=x,l=l.next}while(l!==null);g===null?f=g=a:g=g.next=a}else f=g=a;l={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:o.shared,callbacks:o.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=a:t.next=a,l.lastBaseUpdate=a}var Lu=!1;function Ml(){if(Lu){var t=bi;if(t!==null)throw t}}function jl(t,a,l,o){Lu=!1;var f=t.updateQueue;as=!1;var g=f.firstBaseUpdate,x=f.lastBaseUpdate,E=f.shared.pending;if(E!==null){f.shared.pending=null;var O=E,F=O.next;O.next=null,x===null?g=F:x.next=F,x=O;var J=t.alternate;J!==null&&(J=J.updateQueue,E=J.lastBaseUpdate,E!==x&&(E===null?J.firstBaseUpdate=F:E.next=F,J.lastBaseUpdate=O))}if(g!==null){var ie=f.baseState;x=0,J=F=O=null,E=g;do{var G=E.lane&-536870913,K=G!==E.lane;if(K?(He&G)===G:(o&G)===G){G!==0&&G===yi&&(Lu=!0),J!==null&&(J=J.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var ve=t,_e=E;G=a;var ft=l;switch(_e.tag){case 1:if(ve=_e.payload,typeof ve=="function"){ie=ve.call(ft,ie,G);break e}ie=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=_e.payload,G=typeof ve=="function"?ve.call(ft,ie,G):ve,G==null)break e;ie=v({},ie,G);break e;case 2:as=!0}}G=E.callback,G!==null&&(t.flags|=64,K&&(t.flags|=8192),K=f.callbacks,K===null?f.callbacks=[G]:K.push(G))}else K={lane:G,tag:E.tag,payload:E.payload,callback:E.callback,next:null},J===null?(F=J=K,O=ie):J=J.next=K,x|=G;if(E=E.next,E===null){if(E=f.shared.pending,E===null)break;K=E,E=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);J===null&&(O=ie),f.baseState=O,f.firstBaseUpdate=F,f.lastBaseUpdate=J,g===null&&(f.shared.lanes=0),us|=x,t.lanes=x,t.memoizedState=ie}}function np(t,a){if(typeof t!="function")throw Error(i(191,t));t.call(a)}function ap(t,a){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)np(l[t],a)}var wi=N(null),Wr=N(0);function sp(t,a){t=La,X(Wr,t),X(wi,a),La=t|a.baseLanes}function qu(){X(Wr,La),X(wi,wi.current)}function Uu(){La=Wr.current,z(wi),z(Wr)}var On=N(null),Wn=null;function ls(t){var a=t.alternate;X(Lt,Lt.current&1),X(On,t),Wn===null&&(a===null||wi.current!==null||a.memoizedState!==null)&&(Wn=t)}function $u(t){X(Lt,Lt.current),X(On,t),Wn===null&&(Wn=t)}function ip(t){t.tag===22?(X(Lt,Lt.current),X(On,t),Wn===null&&(Wn=t)):rs()}function rs(){X(Lt,Lt.current),X(On,On.current)}function zn(t){z(On),Wn===t&&(Wn=null),z(Lt)}var Lt=N(0);function Xr(t){for(var a=t;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||Vd(l)||Kd(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Ra=0,Oe=null,ut=null,Zt=null,Qr=!1,_i=!1,Gs=!1,Jr=0,Cl=0,Ei=null,U1=0;function kt(){throw Error(i(321))}function Hu(t,a){if(a===null)return!1;for(var l=0;l<a.length&&l<t.length;l++)if(!kn(t[l],a[l]))return!1;return!0}function Zu(t,a,l,o,f,g){return Ra=g,Oe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,L.H=t===null||t.memoizedState===null?$p:id,Gs=!1,g=l(o,f),Gs=!1,_i&&(g=rp(a,l,o,f)),lp(t),g}function lp(t){L.H=kl;var a=ut!==null&&ut.next!==null;if(Ra=0,Zt=ut=Oe=null,Qr=!1,Cl=0,Ei=null,a)throw Error(i(300));t===null||Ft||(t=t.dependencies,t!==null&&Hr(t)&&(Ft=!0))}function rp(t,a,l,o){Oe=t;var f=0;do{if(_i&&(Ei=null),Cl=0,_i=!1,25<=f)throw Error(i(301));if(f+=1,Zt=ut=null,t.updateQueue!=null){var g=t.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}L.H=Hp,g=a(l,o)}while(_i);return g}function $1(){var t=L.H,a=t.useState()[0];return a=typeof a.then=="function"?Dl(a):a,t=t.useState()[0],(ut!==null?ut.memoizedState:null)!==t&&(Oe.flags|=1024),a}function Fu(){var t=Jr!==0;return Jr=0,t}function Gu(t,a,l){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~l}function Yu(t){if(Qr){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Qr=!1}Ra=0,Zt=ut=Oe=null,_i=!1,Cl=Jr=0,Ei=null}function xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zt===null?Oe.memoizedState=Zt=t:Zt=Zt.next=t,Zt}function qt(){if(ut===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=ut.next;var a=Zt===null?Oe.memoizedState:Zt.next;if(a!==null)Zt=a,ut=t;else{if(t===null)throw Oe.alternate===null?Error(i(467)):Error(i(310));ut=t,t={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},Zt===null?Oe.memoizedState=Zt=t:Zt=Zt.next=t}return Zt}function eo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Dl(t){var a=Cl;return Cl+=1,Ei===null&&(Ei=[]),t=Xm(Ei,t,a),a=Oe,(Zt===null?a.memoizedState:Zt.next)===null&&(a=a.alternate,L.H=a===null||a.memoizedState===null?$p:id),t}function to(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Dl(t);if(t.$$typeof===P)return dn(t)}throw Error(i(438,String(t)))}function Vu(t){var a=null,l=Oe.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var o=Oe.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(a={data:o.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=eo(),Oe.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(t),o=0;o<t;o++)l[o]=re;return a.index++,l}function ka(t,a){return typeof a=="function"?a(t):a}function no(t){var a=qt();return Ku(a,ut,t)}function Ku(t,a,l){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=l;var f=t.baseQueue,g=o.pending;if(g!==null){if(f!==null){var x=f.next;f.next=g.next,g.next=x}a.baseQueue=f=g,o.pending=null}if(g=t.baseState,f===null)t.memoizedState=g;else{a=f.next;var E=x=null,O=null,F=a,J=!1;do{var ie=F.lane&-536870913;if(ie!==F.lane?(He&ie)===ie:(Ra&ie)===ie){var G=F.revertLane;if(G===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ie===yi&&(J=!0);else if((Ra&G)===G){F=F.next,G===yi&&(J=!0);continue}else ie={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(E=O=ie,x=g):O=O.next=ie,Oe.lanes|=G,us|=G;ie=F.action,Gs&&l(g,ie),g=F.hasEagerState?F.eagerState:l(g,ie)}else G={lane:ie,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(E=O=G,x=g):O=O.next=G,Oe.lanes|=ie,us|=ie;F=F.next}while(F!==null&&F!==a);if(O===null?x=g:O.next=E,!kn(g,t.memoizedState)&&(Ft=!0,J&&(l=bi,l!==null)))throw l;t.memoizedState=g,t.baseState=x,t.baseQueue=O,o.lastRenderedState=g}return f===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Wu(t){var a=qt(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=t;var o=l.dispatch,f=l.pending,g=a.memoizedState;if(f!==null){l.pending=null;var x=f=f.next;do g=t(g,x.action),x=x.next;while(x!==f);kn(g,a.memoizedState)||(Ft=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),l.lastRenderedState=g}return[g,o]}function op(t,a,l){var o=Oe,f=qt(),g=Ve;if(g){if(l===void 0)throw Error(i(407));l=l()}else l=a();var x=!kn((ut||f).memoizedState,l);if(x&&(f.memoizedState=l,Ft=!0),f=f.queue,Ju(dp.bind(null,o,f,t),[t]),f.getSnapshot!==a||x||Zt!==null&&Zt.memoizedState.tag&1){if(o.flags|=2048,Ti(9,{destroy:void 0},up.bind(null,o,f,l,a),null),ht===null)throw Error(i(349));g||(Ra&127)!==0||cp(o,a,l)}return l}function cp(t,a,l){t.flags|=16384,t={getSnapshot:a,value:l},a=Oe.updateQueue,a===null?(a=eo(),Oe.updateQueue=a,a.stores=[t]):(l=a.stores,l===null?a.stores=[t]:l.push(t))}function up(t,a,l,o){a.value=l,a.getSnapshot=o,fp(a)&&hp(t)}function dp(t,a,l){return l(function(){fp(a)&&hp(t)})}function fp(t){var a=t.getSnapshot;t=t.value;try{var l=a();return!kn(t,l)}catch{return!0}}function hp(t){var a=Is(t,2);a!==null&&jn(a,t,2)}function Xu(t){var a=xn();if(typeof t=="function"){var l=t;if(t=l(),Gs){Rt(!0);try{l()}finally{Rt(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:t},a}function mp(t,a,l,o){return t.baseState=l,Ku(t,ut,typeof o=="function"?o:ka)}function H1(t,a,l,o,f){if(io(t))throw Error(i(485));if(t=a.action,t!==null){var g={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){g.listeners.push(x)}};L.T!==null?l(!0):g.isTransition=!1,o(g),l=a.pending,l===null?(g.next=a.pending=g,pp(a,g)):(g.next=l.next,a.pending=l.next=g)}}function pp(t,a){var l=a.action,o=a.payload,f=t.state;if(a.isTransition){var g=L.T,x={};L.T=x;try{var E=l(f,o),O=L.S;O!==null&&O(x,E),gp(t,a,E)}catch(F){Qu(t,a,F)}finally{g!==null&&x.types!==null&&(g.types=x.types),L.T=g}}else try{g=l(f,o),gp(t,a,g)}catch(F){Qu(t,a,F)}}function gp(t,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(o){vp(t,a,o)},function(o){return Qu(t,a,o)}):vp(t,a,l)}function vp(t,a,l){a.status="fulfilled",a.value=l,yp(a),t.state=l,a=t.pending,a!==null&&(l=a.next,l===a?t.pending=null:(l=l.next,a.next=l,pp(t,l)))}function Qu(t,a,l){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do a.status="rejected",a.reason=l,yp(a),a=a.next;while(a!==o)}t.action=null}function yp(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function bp(t,a){return a}function xp(t,a){if(Ve){var l=ht.formState;if(l!==null){e:{var o=Oe;if(Ve){if(yt){t:{for(var f=yt,g=Kn;f.nodeType!==8;){if(!g){f=null;break t}if(f=Xn(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){yt=Xn(f.nextSibling),o=f.data==="F!";break e}}ts(o)}o=!1}o&&(a=l[0])}}return l=xn(),l.memoizedState=l.baseState=a,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bp,lastRenderedState:a},l.queue=o,l=Lp.bind(null,Oe,o),o.dispatch=l,o=Xu(!1),g=sd.bind(null,Oe,!1,o.queue),o=xn(),f={state:a,dispatch:null,action:t,pending:null},o.queue=f,l=H1.bind(null,Oe,f,g,l),f.dispatch=l,o.memoizedState=t,[a,l,!1]}function Sp(t){var a=qt();return wp(a,ut,t)}function wp(t,a,l){if(a=Ku(t,a,bp)[0],t=no(ka)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var o=Dl(a)}catch(x){throw x===xi?Gr:x}else o=a;a=qt();var f=a.queue,g=f.dispatch;return l!==a.memoizedState&&(Oe.flags|=2048,Ti(9,{destroy:void 0},Z1.bind(null,f,l),null)),[o,g,t]}function Z1(t,a){t.action=a}function _p(t){var a=qt(),l=ut;if(l!==null)return wp(a,l,t);qt(),a=a.memoizedState,l=qt();var o=l.queue.dispatch;return l.memoizedState=t,[a,o,!1]}function Ti(t,a,l,o){return t={tag:t,create:l,deps:o,inst:a,next:null},a=Oe.updateQueue,a===null&&(a=eo(),Oe.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=t.next=t:(o=l.next,l.next=t,t.next=o,a.lastEffect=t),t}function Ep(){return qt().memoizedState}function ao(t,a,l,o){var f=xn();Oe.flags|=t,f.memoizedState=Ti(1|a,{destroy:void 0},l,o===void 0?null:o)}function so(t,a,l,o){var f=qt();o=o===void 0?null:o;var g=f.memoizedState.inst;ut!==null&&o!==null&&Hu(o,ut.memoizedState.deps)?f.memoizedState=Ti(a,g,l,o):(Oe.flags|=t,f.memoizedState=Ti(1|a,g,l,o))}function Tp(t,a){ao(8390656,8,t,a)}function Ju(t,a){so(2048,8,t,a)}function F1(t){Oe.flags|=4;var a=Oe.updateQueue;if(a===null)a=eo(),Oe.updateQueue=a,a.events=[t];else{var l=a.events;l===null?a.events=[t]:l.push(t)}}function Np(t){var a=qt().memoizedState;return F1({ref:a,nextImpl:t}),function(){if((st&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function Mp(t,a){return so(4,2,t,a)}function jp(t,a){return so(4,4,t,a)}function Cp(t,a){if(typeof a=="function"){t=t();var l=a(t);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function Dp(t,a,l){l=l!=null?l.concat([t]):null,so(4,4,Cp.bind(null,a,t),l)}function ed(){}function Rp(t,a){var l=qt();a=a===void 0?null:a;var o=l.memoizedState;return a!==null&&Hu(a,o[1])?o[0]:(l.memoizedState=[t,a],t)}function kp(t,a){var l=qt();a=a===void 0?null:a;var o=l.memoizedState;if(a!==null&&Hu(a,o[1]))return o[0];if(o=t(),Gs){Rt(!0);try{t()}finally{Rt(!1)}}return l.memoizedState=[o,a],o}function td(t,a,l){return l===void 0||(Ra&1073741824)!==0&&(He&261930)===0?t.memoizedState=a:(t.memoizedState=l,t=Ag(),Oe.lanes|=t,us|=t,l)}function Ap(t,a,l,o){return kn(l,a)?l:wi.current!==null?(t=td(t,l,o),kn(t,a)||(Ft=!0),t):(Ra&42)===0||(Ra&1073741824)!==0&&(He&261930)===0?(Ft=!0,t.memoizedState=l):(t=Ag(),Oe.lanes|=t,us|=t,a)}function Op(t,a,l,o,f){var g=Q.p;Q.p=g!==0&&8>g?g:8;var x=L.T,E={};L.T=E,sd(t,!1,a,l);try{var O=f(),F=L.S;if(F!==null&&F(E,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var J=q1(O,o);Rl(t,a,J,Bn(t))}else Rl(t,a,o,Bn(t))}catch(ie){Rl(t,a,{then:function(){},status:"rejected",reason:ie},Bn())}finally{Q.p=g,x!==null&&E.types!==null&&(x.types=E.types),L.T=x}}function G1(){}function nd(t,a,l,o){if(t.tag!==5)throw Error(i(476));var f=zp(t).queue;Op(t,f,a,ee,l===null?G1:function(){return Pp(t),l(o)})}function zp(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:ee,baseState:ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:ee},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ka,lastRenderedState:l},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function Pp(t){var a=zp(t);a.next===null&&(a=t.alternate.memoizedState),Rl(t,a.next.queue,{},Bn())}function ad(){return dn(Vl)}function Ip(){return qt().memoizedState}function Bp(){return qt().memoizedState}function Y1(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var l=Bn();t=ss(l);var o=is(a,t,l);o!==null&&(jn(o,a,l),Nl(o,a,l)),a={cache:ku()},t.payload=a;return}a=a.return}}function V1(t,a,l){var o=Bn();l={lane:o,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},io(t)?qp(a,l):(l=Su(t,a,l,o),l!==null&&(jn(l,t,o),Up(l,a,o)))}function Lp(t,a,l){var o=Bn();Rl(t,a,l,o)}function Rl(t,a,l,o){var f={lane:o,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(io(t))qp(a,f);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var x=a.lastRenderedState,E=g(x,l);if(f.hasEagerState=!0,f.eagerState=E,kn(E,x))return Lr(t,a,f,0),ht===null&&Br(),!1}catch{}if(l=Su(t,a,f,o),l!==null)return jn(l,t,o),Up(l,a,o),!0}return!1}function sd(t,a,l,o){if(o={lane:2,revertLane:Pd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},io(t)){if(a)throw Error(i(479))}else a=Su(t,l,o,2),a!==null&&jn(a,t,2)}function io(t){var a=t.alternate;return t===Oe||a!==null&&a===Oe}function qp(t,a){_i=Qr=!0;var l=t.pending;l===null?a.next=a:(a.next=l.next,l.next=a),t.pending=a}function Up(t,a,l){if((l&4194048)!==0){var o=a.lanes;o&=t.pendingLanes,l|=o,a.lanes=l,cn(t,l)}}var kl={readContext:dn,use:to,useCallback:kt,useContext:kt,useEffect:kt,useImperativeHandle:kt,useLayoutEffect:kt,useInsertionEffect:kt,useMemo:kt,useReducer:kt,useRef:kt,useState:kt,useDebugValue:kt,useDeferredValue:kt,useTransition:kt,useSyncExternalStore:kt,useId:kt,useHostTransitionStatus:kt,useFormState:kt,useActionState:kt,useOptimistic:kt,useMemoCache:kt,useCacheRefresh:kt};kl.useEffectEvent=kt;var $p={readContext:dn,use:to,useCallback:function(t,a){return xn().memoizedState=[t,a===void 0?null:a],t},useContext:dn,useEffect:Tp,useImperativeHandle:function(t,a,l){l=l!=null?l.concat([t]):null,ao(4194308,4,Cp.bind(null,a,t),l)},useLayoutEffect:function(t,a){return ao(4194308,4,t,a)},useInsertionEffect:function(t,a){ao(4,2,t,a)},useMemo:function(t,a){var l=xn();a=a===void 0?null:a;var o=t();if(Gs){Rt(!0);try{t()}finally{Rt(!1)}}return l.memoizedState=[o,a],o},useReducer:function(t,a,l){var o=xn();if(l!==void 0){var f=l(a);if(Gs){Rt(!0);try{l(a)}finally{Rt(!1)}}}else f=a;return o.memoizedState=o.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},o.queue=t,t=t.dispatch=V1.bind(null,Oe,t),[o.memoizedState,t]},useRef:function(t){var a=xn();return t={current:t},a.memoizedState=t},useState:function(t){t=Xu(t);var a=t.queue,l=Lp.bind(null,Oe,a);return a.dispatch=l,[t.memoizedState,l]},useDebugValue:ed,useDeferredValue:function(t,a){var l=xn();return td(l,t,a)},useTransition:function(){var t=Xu(!1);return t=Op.bind(null,Oe,t.queue,!0,!1),xn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,l){var o=Oe,f=xn();if(Ve){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),ht===null)throw Error(i(349));(He&127)!==0||cp(o,a,l)}f.memoizedState=l;var g={value:l,getSnapshot:a};return f.queue=g,Tp(dp.bind(null,o,g,t),[t]),o.flags|=2048,Ti(9,{destroy:void 0},up.bind(null,o,g,l,a),null),l},useId:function(){var t=xn(),a=ht.identifierPrefix;if(Ve){var l=pa,o=ma;l=(o&~(1<<32-St(o)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Jr++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=U1++,a="_"+a+"r_"+l.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:ad,useFormState:xp,useActionState:xp,useOptimistic:function(t){var a=xn();a.memoizedState=a.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=sd.bind(null,Oe,!0,l),l.dispatch=a,[t,a]},useMemoCache:Vu,useCacheRefresh:function(){return xn().memoizedState=Y1.bind(null,Oe)},useEffectEvent:function(t){var a=xn(),l={impl:t};return a.memoizedState=l,function(){if((st&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},id={readContext:dn,use:to,useCallback:Rp,useContext:dn,useEffect:Ju,useImperativeHandle:Dp,useInsertionEffect:Mp,useLayoutEffect:jp,useMemo:kp,useReducer:no,useRef:Ep,useState:function(){return no(ka)},useDebugValue:ed,useDeferredValue:function(t,a){var l=qt();return Ap(l,ut.memoizedState,t,a)},useTransition:function(){var t=no(ka)[0],a=qt().memoizedState;return[typeof t=="boolean"?t:Dl(t),a]},useSyncExternalStore:op,useId:Ip,useHostTransitionStatus:ad,useFormState:Sp,useActionState:Sp,useOptimistic:function(t,a){var l=qt();return mp(l,ut,t,a)},useMemoCache:Vu,useCacheRefresh:Bp};id.useEffectEvent=Np;var Hp={readContext:dn,use:to,useCallback:Rp,useContext:dn,useEffect:Ju,useImperativeHandle:Dp,useInsertionEffect:Mp,useLayoutEffect:jp,useMemo:kp,useReducer:Wu,useRef:Ep,useState:function(){return Wu(ka)},useDebugValue:ed,useDeferredValue:function(t,a){var l=qt();return ut===null?td(l,t,a):Ap(l,ut.memoizedState,t,a)},useTransition:function(){var t=Wu(ka)[0],a=qt().memoizedState;return[typeof t=="boolean"?t:Dl(t),a]},useSyncExternalStore:op,useId:Ip,useHostTransitionStatus:ad,useFormState:_p,useActionState:_p,useOptimistic:function(t,a){var l=qt();return ut!==null?mp(l,ut,t,a):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:Vu,useCacheRefresh:Bp};Hp.useEffectEvent=Np;function ld(t,a,l,o){a=t.memoizedState,l=l(o,a),l=l==null?a:v({},a,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var rd={enqueueSetState:function(t,a,l){t=t._reactInternals;var o=Bn(),f=ss(o);f.payload=a,l!=null&&(f.callback=l),a=is(t,f,o),a!==null&&(jn(a,t,o),Nl(a,t,o))},enqueueReplaceState:function(t,a,l){t=t._reactInternals;var o=Bn(),f=ss(o);f.tag=1,f.payload=a,l!=null&&(f.callback=l),a=is(t,f,o),a!==null&&(jn(a,t,o),Nl(a,t,o))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var l=Bn(),o=ss(l);o.tag=2,a!=null&&(o.callback=a),a=is(t,o,l),a!==null&&(jn(a,t,l),Nl(a,t,l))}};function Zp(t,a,l,o,f,g,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,g,x):a.prototype&&a.prototype.isPureReactComponent?!yl(l,o)||!yl(f,g):!0}function Fp(t,a,l,o){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,o),a.state!==t&&rd.enqueueReplaceState(a,a.state,null)}function Ys(t,a){var l=a;if("ref"in a){l={};for(var o in a)o!=="ref"&&(l[o]=a[o])}if(t=t.defaultProps){l===a&&(l=v({},l));for(var f in t)l[f]===void 0&&(l[f]=t[f])}return l}function Gp(t){Ir(t)}function Yp(t){console.error(t)}function Vp(t){Ir(t)}function lo(t,a){try{var l=t.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(o){setTimeout(function(){throw o})}}function Kp(t,a,l){try{var o=t.onCaughtError;o(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function od(t,a,l){return l=ss(l),l.tag=3,l.payload={element:null},l.callback=function(){lo(t,a)},l}function Wp(t){return t=ss(t),t.tag=3,t}function Xp(t,a,l,o){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;t.payload=function(){return f(g)},t.callback=function(){Kp(a,l,o)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){Kp(a,l,o),typeof f!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function K1(t,a,l,o,f){if(l.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(a=l.alternate,a!==null&&vi(a,l,f,!0),l=On.current,l!==null){switch(l.tag){case 31:case 13:return Wn===null?bo():l.alternate===null&&At===0&&(At=3),l.flags&=-257,l.flags|=65536,l.lanes=f,o===Yr?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([o]):a.add(o),Ad(t,o,f)),!1;case 22:return l.flags|=65536,o===Yr?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([o])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([o]):l.add(o)),Ad(t,o,f)),!1}throw Error(i(435,l.tag))}return Ad(t,o,f),bo(),!1}if(Ve)return a=On.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,o!==Mu&&(t=Error(i(422),{cause:o}),Sl(Gn(t,l)))):(o!==Mu&&(a=Error(i(423),{cause:o}),Sl(Gn(a,l))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,o=Gn(o,l),f=od(t.stateNode,o,f),Bu(t,f),At!==4&&(At=2)),!1;var g=Error(i(520),{cause:o});if(g=Gn(g,l),ql===null?ql=[g]:ql.push(g),At!==4&&(At=2),a===null)return!0;o=Gn(o,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,t=f&-f,l.lanes|=t,t=od(l.stateNode,o,t),Bu(l,t),!1;case 1:if(a=l.type,g=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ds===null||!ds.has(g))))return l.flags|=65536,f&=-f,l.lanes|=f,f=Wp(f),Xp(f,t,l,o),Bu(l,f),!1}l=l.return}while(l!==null);return!1}var cd=Error(i(461)),Ft=!1;function fn(t,a,l,o){a.child=t===null?tp(a,null,l,o):Fs(a,t.child,l,o)}function Qp(t,a,l,o,f){l=l.render;var g=a.ref;if("ref"in o){var x={};for(var E in o)E!=="ref"&&(x[E]=o[E])}else x=o;return Us(a),o=Zu(t,a,l,x,g,f),E=Fu(),t!==null&&!Ft?(Gu(t,a,f),Aa(t,a,f)):(Ve&&E&&Tu(a),a.flags|=1,fn(t,a,o,f),a.child)}function Jp(t,a,l,o,f){if(t===null){var g=l.type;return typeof g=="function"&&!wu(g)&&g.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=g,eg(t,a,g,o,f)):(t=Ur(l.type,null,o,a,a.mode,f),t.ref=a.ref,t.return=a,a.child=t)}if(g=t.child,!vd(t,f)){var x=g.memoizedProps;if(l=l.compare,l=l!==null?l:yl,l(x,o)&&t.ref===a.ref)return Aa(t,a,f)}return a.flags|=1,t=Ma(g,o),t.ref=a.ref,t.return=a,a.child=t}function eg(t,a,l,o,f){if(t!==null){var g=t.memoizedProps;if(yl(g,o)&&t.ref===a.ref)if(Ft=!1,a.pendingProps=o=g,vd(t,f))(t.flags&131072)!==0&&(Ft=!0);else return a.lanes=t.lanes,Aa(t,a,f)}return ud(t,a,l,o,f)}function tg(t,a,l,o){var f=o.children,g=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((a.flags&128)!==0){if(g=g!==null?g.baseLanes|l:l,t!==null){for(o=a.child=t.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~g}else o=0,a.child=null;return ng(t,a,g,l,o)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Fr(a,g!==null?g.cachePool:null),g!==null?sp(a,g):qu(),ip(a);else return o=a.lanes=536870912,ng(t,a,g!==null?g.baseLanes|l:l,l,o)}else g!==null?(Fr(a,g.cachePool),sp(a,g),rs(),a.memoizedState=null):(t!==null&&Fr(a,null),qu(),rs());return fn(t,a,f,l),a.child}function Al(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function ng(t,a,l,o,f){var g=Ou();return g=g===null?null:{parent:Ht._currentValue,pool:g},a.memoizedState={baseLanes:l,cachePool:g},t!==null&&Fr(a,null),qu(),ip(a),t!==null&&vi(t,a,o,!0),a.childLanes=f,null}function ro(t,a){return a=co({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function ag(t,a,l){return Fs(a,t.child,null,l),t=ro(a,a.pendingProps),t.flags|=2,zn(a),a.memoizedState=null,t}function W1(t,a,l){var o=a.pendingProps,f=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(Ve){if(o.mode==="hidden")return t=ro(a,o),a.lanes=536870912,Al(null,t);if($u(a),(t=yt)?(t=pv(t,Kn),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Ja!==null?{id:ma,overflow:pa}:null,retryLane:536870912,hydrationErrors:null},l=qm(t),l.return=a,a.child=l,un=a,yt=null)):t=null,t===null)throw ts(a);return a.lanes=536870912,null}return ro(a,o)}var g=t.memoizedState;if(g!==null){var x=g.dehydrated;if($u(a),f)if(a.flags&256)a.flags&=-257,a=ag(t,a,l);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(i(558));else if(Ft||vi(t,a,l,!1),f=(l&t.childLanes)!==0,Ft||f){if(o=ht,o!==null&&(x=te(o,l),x!==0&&x!==g.retryLane))throw g.retryLane=x,Is(t,x),jn(o,t,x),cd;bo(),a=ag(t,a,l)}else t=g.treeContext,yt=Xn(x.nextSibling),un=a,Ve=!0,es=null,Kn=!1,t!==null&&Hm(a,t),a=ro(a,o),a.flags|=4096;return a}return t=Ma(t.child,{mode:o.mode,children:o.children}),t.ref=a.ref,a.child=t,t.return=a,t}function oo(t,a){var l=a.ref;if(l===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(t===null||t.ref!==l)&&(a.flags|=4194816)}}function ud(t,a,l,o,f){return Us(a),l=Zu(t,a,l,o,void 0,f),o=Fu(),t!==null&&!Ft?(Gu(t,a,f),Aa(t,a,f)):(Ve&&o&&Tu(a),a.flags|=1,fn(t,a,l,f),a.child)}function sg(t,a,l,o,f,g){return Us(a),a.updateQueue=null,l=rp(a,o,l,f),lp(t),o=Fu(),t!==null&&!Ft?(Gu(t,a,g),Aa(t,a,g)):(Ve&&o&&Tu(a),a.flags|=1,fn(t,a,l,g),a.child)}function ig(t,a,l,o,f){if(Us(a),a.stateNode===null){var g=hi,x=l.contextType;typeof x=="object"&&x!==null&&(g=dn(x)),g=new l(o,g),a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=rd,a.stateNode=g,g._reactInternals=a,g=a.stateNode,g.props=o,g.state=a.memoizedState,g.refs={},Pu(a),x=l.contextType,g.context=typeof x=="object"&&x!==null?dn(x):hi,g.state=a.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(ld(a,l,x,o),g.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(x=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),x!==g.state&&rd.enqueueReplaceState(g,g.state,null),jl(a,o,g,f),Ml(),g.state=a.memoizedState),typeof g.componentDidMount=="function"&&(a.flags|=4194308),o=!0}else if(t===null){g=a.stateNode;var E=a.memoizedProps,O=Ys(l,E);g.props=O;var F=g.context,J=l.contextType;x=hi,typeof J=="object"&&J!==null&&(x=dn(J));var ie=l.getDerivedStateFromProps;J=typeof ie=="function"||typeof g.getSnapshotBeforeUpdate=="function",E=a.pendingProps!==E,J||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E||F!==x)&&Fp(a,g,o,x),as=!1;var G=a.memoizedState;g.state=G,jl(a,o,g,f),Ml(),F=a.memoizedState,E||G!==F||as?(typeof ie=="function"&&(ld(a,l,ie,o),F=a.memoizedState),(O=as||Zp(a,l,O,o,G,F,x))?(J||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=F),g.props=o,g.state=F,g.context=x,o=O):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{g=a.stateNode,Iu(t,a),x=a.memoizedProps,J=Ys(l,x),g.props=J,ie=a.pendingProps,G=g.context,F=l.contextType,O=hi,typeof F=="object"&&F!==null&&(O=dn(F)),E=l.getDerivedStateFromProps,(F=typeof E=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(x!==ie||G!==O)&&Fp(a,g,o,O),as=!1,G=a.memoizedState,g.state=G,jl(a,o,g,f),Ml();var K=a.memoizedState;x!==ie||G!==K||as||t!==null&&t.dependencies!==null&&Hr(t.dependencies)?(typeof E=="function"&&(ld(a,l,E,o),K=a.memoizedState),(J=as||Zp(a,l,J,o,G,K,O)||t!==null&&t.dependencies!==null&&Hr(t.dependencies))?(F||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,K,O),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,K,O)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=K),g.props=o,g.state=K,g.context=O,o=J):(typeof g.componentDidUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&G===t.memoizedState||(a.flags|=1024),o=!1)}return g=o,oo(t,a),o=(a.flags&128)!==0,g||o?(g=a.stateNode,l=o&&typeof l.getDerivedStateFromError!="function"?null:g.render(),a.flags|=1,t!==null&&o?(a.child=Fs(a,t.child,null,f),a.child=Fs(a,null,l,f)):fn(t,a,l,f),a.memoizedState=g.state,t=a.child):t=Aa(t,a,f),t}function lg(t,a,l,o){return Ls(),a.flags|=256,fn(t,a,l,o),a.child}var dd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fd(t){return{baseLanes:t,cachePool:Km()}}function hd(t,a,l){return t=t!==null?t.childLanes&~l:0,a&&(t|=In),t}function rg(t,a,l){var o=a.pendingProps,f=!1,g=(a.flags&128)!==0,x;if((x=g)||(x=t!==null&&t.memoizedState===null?!1:(Lt.current&2)!==0),x&&(f=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,t===null){if(Ve){if(f?ls(a):rs(),(t=yt)?(t=pv(t,Kn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Ja!==null?{id:ma,overflow:pa}:null,retryLane:536870912,hydrationErrors:null},l=qm(t),l.return=a,a.child=l,un=a,yt=null)):t=null,t===null)throw ts(a);return Kd(t)?a.lanes=32:a.lanes=536870912,null}var E=o.children;return o=o.fallback,f?(rs(),f=a.mode,E=co({mode:"hidden",children:E},f),o=Bs(o,f,l,null),E.return=a,o.return=a,E.sibling=o,a.child=E,o=a.child,o.memoizedState=fd(l),o.childLanes=hd(t,x,l),a.memoizedState=dd,Al(null,o)):(ls(a),md(a,E))}var O=t.memoizedState;if(O!==null&&(E=O.dehydrated,E!==null)){if(g)a.flags&256?(ls(a),a.flags&=-257,a=pd(t,a,l)):a.memoizedState!==null?(rs(),a.child=t.child,a.flags|=128,a=null):(rs(),E=o.fallback,f=a.mode,o=co({mode:"visible",children:o.children},f),E=Bs(E,f,l,null),E.flags|=2,o.return=a,E.return=a,o.sibling=E,a.child=o,Fs(a,t.child,null,l),o=a.child,o.memoizedState=fd(l),o.childLanes=hd(t,x,l),a.memoizedState=dd,a=Al(null,o));else if(ls(a),Kd(E)){if(x=E.nextSibling&&E.nextSibling.dataset,x)var F=x.dgst;x=F,o=Error(i(419)),o.stack="",o.digest=x,Sl({value:o,source:null,stack:null}),a=pd(t,a,l)}else if(Ft||vi(t,a,l,!1),x=(l&t.childLanes)!==0,Ft||x){if(x=ht,x!==null&&(o=te(x,l),o!==0&&o!==O.retryLane))throw O.retryLane=o,Is(t,o),jn(x,t,o),cd;Vd(E)||bo(),a=pd(t,a,l)}else Vd(E)?(a.flags|=192,a.child=t.child,a=null):(t=O.treeContext,yt=Xn(E.nextSibling),un=a,Ve=!0,es=null,Kn=!1,t!==null&&Hm(a,t),a=md(a,o.children),a.flags|=4096);return a}return f?(rs(),E=o.fallback,f=a.mode,O=t.child,F=O.sibling,o=Ma(O,{mode:"hidden",children:o.children}),o.subtreeFlags=O.subtreeFlags&65011712,F!==null?E=Ma(F,E):(E=Bs(E,f,l,null),E.flags|=2),E.return=a,o.return=a,o.sibling=E,a.child=o,Al(null,o),o=a.child,E=t.child.memoizedState,E===null?E=fd(l):(f=E.cachePool,f!==null?(O=Ht._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=Km(),E={baseLanes:E.baseLanes|l,cachePool:f}),o.memoizedState=E,o.childLanes=hd(t,x,l),a.memoizedState=dd,Al(t.child,o)):(ls(a),l=t.child,t=l.sibling,l=Ma(l,{mode:"visible",children:o.children}),l.return=a,l.sibling=null,t!==null&&(x=a.deletions,x===null?(a.deletions=[t],a.flags|=16):x.push(t)),a.child=l,a.memoizedState=null,l)}function md(t,a){return a=co({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function co(t,a){return t=An(22,t,null,a),t.lanes=0,t}function pd(t,a,l){return Fs(a,t.child,null,l),t=md(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function og(t,a,l){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a),Du(t.return,a,l)}function gd(t,a,l,o,f,g){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:l,tailMode:f,treeForkCount:g}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=o,x.tail=l,x.tailMode=f,x.treeForkCount=g)}function cg(t,a,l){var o=a.pendingProps,f=o.revealOrder,g=o.tail;o=o.children;var x=Lt.current,E=(x&2)!==0;if(E?(x=x&1|2,a.flags|=128):x&=1,X(Lt,x),fn(t,a,o,l),o=Ve?xl:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&og(t,l,a);else if(t.tag===19)og(t,l,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(l=a.child,f=null;l!==null;)t=l.alternate,t!==null&&Xr(t)===null&&(f=l),l=l.sibling;l=f,l===null?(f=a.child,a.child=null):(f=l.sibling,l.sibling=null),gd(a,!1,f,l,g,o);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=a.child,a.child=null;f!==null;){if(t=f.alternate,t!==null&&Xr(t)===null){a.child=f;break}t=f.sibling,f.sibling=l,l=f,f=t}gd(a,!0,l,null,g,o);break;case"together":gd(a,!1,null,null,void 0,o);break;default:a.memoizedState=null}return a.child}function Aa(t,a,l){if(t!==null&&(a.dependencies=t.dependencies),us|=a.lanes,(l&a.childLanes)===0)if(t!==null){if(vi(t,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(i(153));if(a.child!==null){for(t=a.child,l=Ma(t,t.pendingProps),a.child=l,l.return=a;t.sibling!==null;)t=t.sibling,l=l.sibling=Ma(t,t.pendingProps),l.return=a;l.sibling=null}return a.child}function vd(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Hr(t)))}function X1(t,a,l){switch(a.tag){case 3:De(a,a.stateNode.containerInfo),ns(a,Ht,t.memoizedState.cache),Ls();break;case 27:case 5:we(a);break;case 4:De(a,a.stateNode.containerInfo);break;case 10:ns(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,$u(a),null;break;case 13:var o=a.memoizedState;if(o!==null)return o.dehydrated!==null?(ls(a),a.flags|=128,null):(l&a.child.childLanes)!==0?rg(t,a,l):(ls(a),t=Aa(t,a,l),t!==null?t.sibling:null);ls(a);break;case 19:var f=(t.flags&128)!==0;if(o=(l&a.childLanes)!==0,o||(vi(t,a,l,!1),o=(l&a.childLanes)!==0),f){if(o)return cg(t,a,l);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),X(Lt,Lt.current),o)break;return null;case 22:return a.lanes=0,tg(t,a,l,a.pendingProps);case 24:ns(a,Ht,t.memoizedState.cache)}return Aa(t,a,l)}function ug(t,a,l){if(t!==null)if(t.memoizedProps!==a.pendingProps)Ft=!0;else{if(!vd(t,l)&&(a.flags&128)===0)return Ft=!1,X1(t,a,l);Ft=(t.flags&131072)!==0}else Ft=!1,Ve&&(a.flags&1048576)!==0&&$m(a,xl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var o=a.pendingProps;if(t=Hs(a.elementType),a.type=t,typeof t=="function")wu(t)?(o=Ys(t,o),a.tag=1,a=ig(null,a,t,o,l)):(a.tag=0,a=ud(null,a,t,o,l));else{if(t!=null){var f=t.$$typeof;if(f===B){a.tag=11,a=Qp(null,a,t,o,l);break e}else if(f===C){a.tag=14,a=Jp(null,a,t,o,l);break e}}throw a=$(t)||t,Error(i(306,a,""))}}return a;case 0:return ud(t,a,a.type,a.pendingProps,l);case 1:return o=a.type,f=Ys(o,a.pendingProps),ig(t,a,o,f,l);case 3:e:{if(De(a,a.stateNode.containerInfo),t===null)throw Error(i(387));o=a.pendingProps;var g=a.memoizedState;f=g.element,Iu(t,a),jl(a,o,null,l);var x=a.memoizedState;if(o=x.cache,ns(a,Ht,o),o!==g.cache&&Ru(a,[Ht],l,!0),Ml(),o=x.element,g.isDehydrated)if(g={element:o,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=g,a.memoizedState=g,a.flags&256){a=lg(t,a,o,l);break e}else if(o!==f){f=Gn(Error(i(424)),a),Sl(f),a=lg(t,a,o,l);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,yt=Xn(t.firstChild),un=a,Ve=!0,es=null,Kn=!0,l=tp(a,null,o,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(Ls(),o===f){a=Aa(t,a,l);break e}fn(t,a,o,l)}a=a.child}return a;case 26:return oo(t,a),t===null?(l=Sv(a.type,null,a.pendingProps,null))?a.memoizedState=l:Ve||(l=a.type,t=a.pendingProps,o=No(le.current).createElement(l),o[Te]=a,o[Ae]=t,hn(o,l,t),Bt(o),a.stateNode=o):a.memoizedState=Sv(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return we(a),t===null&&Ve&&(o=a.stateNode=yv(a.type,a.pendingProps,le.current),un=a,Kn=!0,f=yt,ps(a.type)?(Wd=f,yt=Xn(o.firstChild)):yt=f),fn(t,a,a.pendingProps.children,l),oo(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Ve&&((f=o=yt)&&(o=Mw(o,a.type,a.pendingProps,Kn),o!==null?(a.stateNode=o,un=a,yt=Xn(o.firstChild),Kn=!1,f=!0):f=!1),f||ts(a)),we(a),f=a.type,g=a.pendingProps,x=t!==null?t.memoizedProps:null,o=g.children,Fd(f,g)?o=null:x!==null&&Fd(f,x)&&(a.flags|=32),a.memoizedState!==null&&(f=Zu(t,a,$1,null,null,l),Vl._currentValue=f),oo(t,a),fn(t,a,o,l),a.child;case 6:return t===null&&Ve&&((t=l=yt)&&(l=jw(l,a.pendingProps,Kn),l!==null?(a.stateNode=l,un=a,yt=null,t=!0):t=!1),t||ts(a)),null;case 13:return rg(t,a,l);case 4:return De(a,a.stateNode.containerInfo),o=a.pendingProps,t===null?a.child=Fs(a,null,o,l):fn(t,a,o,l),a.child;case 11:return Qp(t,a,a.type,a.pendingProps,l);case 7:return fn(t,a,a.pendingProps,l),a.child;case 8:return fn(t,a,a.pendingProps.children,l),a.child;case 12:return fn(t,a,a.pendingProps.children,l),a.child;case 10:return o=a.pendingProps,ns(a,a.type,o.value),fn(t,a,o.children,l),a.child;case 9:return f=a.type._context,o=a.pendingProps.children,Us(a),f=dn(f),o=o(f),a.flags|=1,fn(t,a,o,l),a.child;case 14:return Jp(t,a,a.type,a.pendingProps,l);case 15:return eg(t,a,a.type,a.pendingProps,l);case 19:return cg(t,a,l);case 31:return W1(t,a,l);case 22:return tg(t,a,l,a.pendingProps);case 24:return Us(a),o=dn(Ht),t===null?(f=Ou(),f===null&&(f=ht,g=ku(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=l),f=g),a.memoizedState={parent:o,cache:f},Pu(a),ns(a,Ht,f)):((t.lanes&l)!==0&&(Iu(t,a),jl(a,null,null,l),Ml()),f=t.memoizedState,g=a.memoizedState,f.parent!==o?(f={parent:o,cache:o},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),ns(a,Ht,o)):(o=g.cache,ns(a,Ht,o),o!==f.cache&&Ru(a,[Ht],l,!0))),fn(t,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Oa(t){t.flags|=4}function yd(t,a,l,o,f){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(Ig())t.flags|=8192;else throw Zs=Yr,zu}else t.flags&=-16777217}function dg(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Nv(a))if(Ig())t.flags|=8192;else throw Zs=Yr,zu}function uo(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Jt():536870912,t.lanes|=a,Ci|=a)}function Ol(t,a){if(!Ve)switch(t.tailMode){case"hidden":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var o=null;l!==null;)l.alternate!==null&&(o=l),l=l.sibling;o===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function bt(t){var a=t.alternate!==null&&t.alternate.child===t.child,l=0,o=0;if(a)for(var f=t.child;f!==null;)l|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)l|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=o,t.childLanes=l,a}function Q1(t,a,l){var o=a.pendingProps;switch(Nu(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(a),null;case 1:return bt(a),null;case 3:return l=a.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),Da(Ht),me(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(gi(a)?Oa(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,ju())),bt(a),null;case 26:var f=a.type,g=a.memoizedState;return t===null?(Oa(a),g!==null?(bt(a),dg(a,g)):(bt(a),yd(a,f,null,o,l))):g?g!==t.memoizedState?(Oa(a),bt(a),dg(a,g)):(bt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==o&&Oa(a),bt(a),yd(a,f,t,o,l)),null;case 27:if(Re(a),l=le.current,f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Oa(a);else{if(!o){if(a.stateNode===null)throw Error(i(166));return bt(a),null}t=ue.current,gi(a)?Zm(a):(t=yv(f,o,l),a.stateNode=t,Oa(a))}return bt(a),null;case 5:if(Re(a),f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Oa(a);else{if(!o){if(a.stateNode===null)throw Error(i(166));return bt(a),null}if(g=ue.current,gi(a))Zm(a);else{var x=No(le.current);switch(g){case 1:g=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=x.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof o.is=="string"?x.createElement("select",{is:o.is}):x.createElement("select"),o.multiple?g.multiple=!0:o.size&&(g.size=o.size);break;default:g=typeof o.is=="string"?x.createElement(f,{is:o.is}):x.createElement(f)}}g[Te]=a,g[Ae]=o;e:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)g.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break e;for(;x.sibling===null;){if(x.return===null||x.return===a)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=g;e:switch(hn(g,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Oa(a)}}return bt(a),yd(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,l),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==o&&Oa(a);else{if(typeof o!="string"&&a.stateNode===null)throw Error(i(166));if(t=le.current,gi(a)){if(t=a.stateNode,l=a.memoizedProps,o=null,f=un,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}t[Te]=a,t=!!(t.nodeValue===l||o!==null&&o.suppressHydrationWarning===!0||rv(t.nodeValue,l)),t||ts(a,!0)}else t=No(t).createTextNode(o),t[Te]=a,a.stateNode=t}return bt(a),null;case 31:if(l=a.memoizedState,t===null||t.memoizedState!==null){if(o=gi(a),l!==null){if(t===null){if(!o)throw Error(i(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[Te]=a}else Ls(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;bt(a),t=!1}else l=ju(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return a.flags&256?(zn(a),a):(zn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return bt(a),null;case 13:if(o=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=gi(a),o!==null&&o.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Te]=a}else Ls(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;bt(a),f=!1}else f=ju(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(zn(a),a):(zn(a),null)}return zn(a),(a.flags&128)!==0?(a.lanes=l,a):(l=o!==null,t=t!==null&&t.memoizedState!==null,l&&(o=a.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),g=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==f&&(o.flags|=2048)),l!==t&&l&&(a.child.flags|=8192),uo(a,a.updateQueue),bt(a),null);case 4:return me(),t===null&&qd(a.stateNode.containerInfo),bt(a),null;case 10:return Da(a.type),bt(a),null;case 19:if(z(Lt),o=a.memoizedState,o===null)return bt(a),null;if(f=(a.flags&128)!==0,g=o.rendering,g===null)if(f)Ol(o,!1);else{if(At!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(g=Xr(t),g!==null){for(a.flags|=128,Ol(o,!1),t=g.updateQueue,a.updateQueue=t,uo(a,t),a.subtreeFlags=0,t=l,l=a.child;l!==null;)Lm(l,t),l=l.sibling;return X(Lt,Lt.current&1|2),Ve&&ja(a,o.treeForkCount),a.child}t=t.sibling}o.tail!==null&&Le()>go&&(a.flags|=128,f=!0,Ol(o,!1),a.lanes=4194304)}else{if(!f)if(t=Xr(g),t!==null){if(a.flags|=128,f=!0,t=t.updateQueue,a.updateQueue=t,uo(a,t),Ol(o,!0),o.tail===null&&o.tailMode==="hidden"&&!g.alternate&&!Ve)return bt(a),null}else 2*Le()-o.renderingStartTime>go&&l!==536870912&&(a.flags|=128,f=!0,Ol(o,!1),a.lanes=4194304);o.isBackwards?(g.sibling=a.child,a.child=g):(t=o.last,t!==null?t.sibling=g:a.child=g,o.last=g)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Le(),t.sibling=null,l=Lt.current,X(Lt,f?l&1|2:l&1),Ve&&ja(a,o.treeForkCount),t):(bt(a),null);case 22:case 23:return zn(a),Uu(),o=a.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(a.flags|=8192):o&&(a.flags|=8192),o?(l&536870912)!==0&&(a.flags&128)===0&&(bt(a),a.subtreeFlags&6&&(a.flags|=8192)):bt(a),l=a.updateQueue,l!==null&&uo(a,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==l&&(a.flags|=2048),t!==null&&z($s),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Da(Ht),bt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function J1(t,a){switch(Nu(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Da(Ht),me(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Re(a),null;case 31:if(a.memoizedState!==null){if(zn(a),a.alternate===null)throw Error(i(340));Ls()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(zn(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Ls()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return z(Lt),null;case 4:return me(),null;case 10:return Da(a.type),null;case 22:case 23:return zn(a),Uu(),t!==null&&z($s),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Da(Ht),null;case 25:return null;default:return null}}function fg(t,a){switch(Nu(a),a.tag){case 3:Da(Ht),me();break;case 26:case 27:case 5:Re(a);break;case 4:me();break;case 31:a.memoizedState!==null&&zn(a);break;case 13:zn(a);break;case 19:z(Lt);break;case 10:Da(a.type);break;case 22:case 23:zn(a),Uu(),t!==null&&z($s);break;case 24:Da(Ht)}}function zl(t,a){try{var l=a.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var f=o.next;l=f;do{if((l.tag&t)===t){o=void 0;var g=l.create,x=l.inst;o=g(),x.destroy=o}l=l.next}while(l!==f)}}catch(E){rt(a,a.return,E)}}function os(t,a,l){try{var o=a.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var g=f.next;o=g;do{if((o.tag&t)===t){var x=o.inst,E=x.destroy;if(E!==void 0){x.destroy=void 0,f=a;var O=l,F=E;try{F()}catch(J){rt(f,O,J)}}}o=o.next}while(o!==g)}}catch(J){rt(a,a.return,J)}}function hg(t){var a=t.updateQueue;if(a!==null){var l=t.stateNode;try{ap(a,l)}catch(o){rt(t,t.return,o)}}}function mg(t,a,l){l.props=Ys(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(o){rt(t,a,o)}}function Pl(t,a){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof l=="function"?t.refCleanup=l(o):l.current=o}}catch(f){rt(t,a,f)}}function ga(t,a){var l=t.ref,o=t.refCleanup;if(l!==null)if(typeof o=="function")try{o()}catch(f){rt(t,a,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){rt(t,a,f)}else l.current=null}function pg(t){var a=t.type,l=t.memoizedProps,o=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&o.focus();break e;case"img":l.src?o.src=l.src:l.srcSet&&(o.srcset=l.srcSet)}}catch(f){rt(t,t.return,f)}}function bd(t,a,l){try{var o=t.stateNode;Sw(o,t.type,l,a),o[Ae]=a}catch(f){rt(t,t.return,f)}}function gg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ps(t.type)||t.tag===4}function xd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ps(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sd(t,a,l){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(t),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=Ta));else if(o!==4&&(o===27&&ps(t.type)&&(l=t.stateNode,a=null),t=t.child,t!==null))for(Sd(t,a,l),t=t.sibling;t!==null;)Sd(t,a,l),t=t.sibling}function fo(t,a,l){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?l.insertBefore(t,a):l.appendChild(t);else if(o!==4&&(o===27&&ps(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(fo(t,a,l),t=t.sibling;t!==null;)fo(t,a,l),t=t.sibling}function vg(t){var a=t.stateNode,l=t.memoizedProps;try{for(var o=t.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);hn(a,o,l),a[Te]=t,a[Ae]=l}catch(g){rt(t,t.return,g)}}var za=!1,Gt=!1,wd=!1,yg=typeof WeakSet=="function"?WeakSet:Set,nn=null;function ew(t,a){if(t=t.containerInfo,Hd=Ao,t=Dm(t),pu(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var o=l.getSelection&&l.getSelection();if(o&&o.rangeCount!==0){l=o.anchorNode;var f=o.anchorOffset,g=o.focusNode;o=o.focusOffset;try{l.nodeType,g.nodeType}catch{l=null;break e}var x=0,E=-1,O=-1,F=0,J=0,ie=t,G=null;t:for(;;){for(var K;ie!==l||f!==0&&ie.nodeType!==3||(E=x+f),ie!==g||o!==0&&ie.nodeType!==3||(O=x+o),ie.nodeType===3&&(x+=ie.nodeValue.length),(K=ie.firstChild)!==null;)G=ie,ie=K;for(;;){if(ie===t)break t;if(G===l&&++F===f&&(E=x),G===g&&++J===o&&(O=x),(K=ie.nextSibling)!==null)break;ie=G,G=ie.parentNode}ie=K}l=E===-1||O===-1?null:{start:E,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(Zd={focusedElem:t,selectionRange:l},Ao=!1,nn=a;nn!==null;)if(a=nn,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,nn=t;else for(;nn!==null;){switch(a=nn,g=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)f=t[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&g!==null){t=void 0,l=a,f=g.memoizedProps,g=g.memoizedState,o=l.stateNode;try{var ve=Ys(l.type,f);t=o.getSnapshotBeforeUpdate(ve,g),o.__reactInternalSnapshotBeforeUpdate=t}catch(_e){rt(l,l.return,_e)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,l=t.nodeType,l===9)Yd(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Yd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=a.sibling,t!==null){t.return=a.return,nn=t;break}nn=a.return}}function bg(t,a,l){var o=l.flags;switch(l.tag){case 0:case 11:case 15:Ia(t,l),o&4&&zl(5,l);break;case 1:if(Ia(t,l),o&4)if(t=l.stateNode,a===null)try{t.componentDidMount()}catch(x){rt(l,l.return,x)}else{var f=Ys(l.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(f,a,t.__reactInternalSnapshotBeforeUpdate)}catch(x){rt(l,l.return,x)}}o&64&&hg(l),o&512&&Pl(l,l.return);break;case 3:if(Ia(t,l),o&64&&(t=l.updateQueue,t!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{ap(t,a)}catch(x){rt(l,l.return,x)}}break;case 27:a===null&&o&4&&vg(l);case 26:case 5:Ia(t,l),a===null&&o&4&&pg(l),o&512&&Pl(l,l.return);break;case 12:Ia(t,l);break;case 31:Ia(t,l),o&4&&wg(t,l);break;case 13:Ia(t,l),o&4&&_g(t,l),o&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=cw.bind(null,l),Cw(t,l))));break;case 22:if(o=l.memoizedState!==null||za,!o){a=a!==null&&a.memoizedState!==null||Gt,f=za;var g=Gt;za=o,(Gt=a)&&!g?Ba(t,l,(l.subtreeFlags&8772)!==0):Ia(t,l),za=f,Gt=g}break;case 30:break;default:Ia(t,l)}}function xg(t){var a=t.alternate;a!==null&&(t.alternate=null,xg(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&fa(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var _t=null,En=!1;function Pa(t,a,l){for(l=l.child;l!==null;)Sg(t,a,l),l=l.sibling}function Sg(t,a,l){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(Dt,l)}catch{}switch(l.tag){case 26:Gt||ga(l,a),Pa(t,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Gt||ga(l,a);var o=_t,f=En;ps(l.type)&&(_t=l.stateNode,En=!1),Pa(t,a,l),Fl(l.stateNode),_t=o,En=f;break;case 5:Gt||ga(l,a);case 6:if(o=_t,f=En,_t=null,Pa(t,a,l),_t=o,En=f,_t!==null)if(En)try{(_t.nodeType===9?_t.body:_t.nodeName==="HTML"?_t.ownerDocument.body:_t).removeChild(l.stateNode)}catch(g){rt(l,a,g)}else try{_t.removeChild(l.stateNode)}catch(g){rt(l,a,g)}break;case 18:_t!==null&&(En?(t=_t,hv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),Ii(t)):hv(_t,l.stateNode));break;case 4:o=_t,f=En,_t=l.stateNode.containerInfo,En=!0,Pa(t,a,l),_t=o,En=f;break;case 0:case 11:case 14:case 15:os(2,l,a),Gt||os(4,l,a),Pa(t,a,l);break;case 1:Gt||(ga(l,a),o=l.stateNode,typeof o.componentWillUnmount=="function"&&mg(l,a,o)),Pa(t,a,l);break;case 21:Pa(t,a,l);break;case 22:Gt=(o=Gt)||l.memoizedState!==null,Pa(t,a,l),Gt=o;break;default:Pa(t,a,l)}}function wg(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ii(t)}catch(l){rt(a,a.return,l)}}}function _g(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ii(t)}catch(l){rt(a,a.return,l)}}function tw(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new yg),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new yg),a;default:throw Error(i(435,t.tag))}}function ho(t,a){var l=tw(t);a.forEach(function(o){if(!l.has(o)){l.add(o);var f=uw.bind(null,t,o);o.then(f,f)}})}function Tn(t,a){var l=a.deletions;if(l!==null)for(var o=0;o<l.length;o++){var f=l[o],g=t,x=a,E=x;e:for(;E!==null;){switch(E.tag){case 27:if(ps(E.type)){_t=E.stateNode,En=!1;break e}break;case 5:_t=E.stateNode,En=!1;break e;case 3:case 4:_t=E.stateNode.containerInfo,En=!0;break e}E=E.return}if(_t===null)throw Error(i(160));Sg(g,x,f),_t=null,En=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Eg(a,t),a=a.sibling}var aa=null;function Eg(t,a){var l=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Tn(a,t),Nn(t),o&4&&(os(3,t,t.return),zl(3,t),os(5,t,t.return));break;case 1:Tn(a,t),Nn(t),o&512&&(Gt||l===null||ga(l,l.return)),o&64&&za&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?o:l.concat(o))));break;case 26:var f=aa;if(Tn(a,t),Nn(t),o&512&&(Gt||l===null||ga(l,l.return)),o&4){var g=l!==null?l.memoizedState:null;if(o=t.memoizedState,l===null)if(o===null)if(t.stateNode===null){e:{o=t.type,l=t.memoizedProps,f=f.ownerDocument||f;t:switch(o){case"title":g=f.getElementsByTagName("title")[0],(!g||g[ta]||g[Te]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(o),f.head.insertBefore(g,f.querySelector("head > title"))),hn(g,o,l),g[Te]=t,Bt(g),o=g;break e;case"link":var x=Ev("link","href",f).get(o+(l.href||""));if(x){for(var E=0;E<x.length;E++)if(g=x[E],g.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&g.getAttribute("rel")===(l.rel==null?null:l.rel)&&g.getAttribute("title")===(l.title==null?null:l.title)&&g.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(E,1);break t}}g=f.createElement(o),hn(g,o,l),f.head.appendChild(g);break;case"meta":if(x=Ev("meta","content",f).get(o+(l.content||""))){for(E=0;E<x.length;E++)if(g=x[E],g.getAttribute("content")===(l.content==null?null:""+l.content)&&g.getAttribute("name")===(l.name==null?null:l.name)&&g.getAttribute("property")===(l.property==null?null:l.property)&&g.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&g.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(E,1);break t}}g=f.createElement(o),hn(g,o,l),f.head.appendChild(g);break;default:throw Error(i(468,o))}g[Te]=t,Bt(g),o=g}t.stateNode=o}else Tv(f,t.type,t.stateNode);else t.stateNode=_v(f,o,t.memoizedProps);else g!==o?(g===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):g.count--,o===null?Tv(f,t.type,t.stateNode):_v(f,o,t.memoizedProps)):o===null&&t.stateNode!==null&&bd(t,t.memoizedProps,l.memoizedProps)}break;case 27:Tn(a,t),Nn(t),o&512&&(Gt||l===null||ga(l,l.return)),l!==null&&o&4&&bd(t,t.memoizedProps,l.memoizedProps);break;case 5:if(Tn(a,t),Nn(t),o&512&&(Gt||l===null||ga(l,l.return)),t.flags&32){f=t.stateNode;try{li(f,"")}catch(ve){rt(t,t.return,ve)}}o&4&&t.stateNode!=null&&(f=t.memoizedProps,bd(t,f,l!==null?l.memoizedProps:f)),o&1024&&(wd=!0);break;case 6:if(Tn(a,t),Nn(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,l=t.stateNode;try{l.nodeValue=o}catch(ve){rt(t,t.return,ve)}}break;case 3:if(Co=null,f=aa,aa=Mo(a.containerInfo),Tn(a,t),aa=f,Nn(t),o&4&&l!==null&&l.memoizedState.isDehydrated)try{Ii(a.containerInfo)}catch(ve){rt(t,t.return,ve)}wd&&(wd=!1,Tg(t));break;case 4:o=aa,aa=Mo(t.stateNode.containerInfo),Tn(a,t),Nn(t),aa=o;break;case 12:Tn(a,t),Nn(t);break;case 31:Tn(a,t),Nn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ho(t,o)));break;case 13:Tn(a,t),Nn(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(po=Le()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ho(t,o)));break;case 22:f=t.memoizedState!==null;var O=l!==null&&l.memoizedState!==null,F=za,J=Gt;if(za=F||f,Gt=J||O,Tn(a,t),Gt=J,za=F,Nn(t),o&8192)e:for(a=t.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(l===null||O||za||Gt||Vs(t)),l=null,a=t;;){if(a.tag===5||a.tag===26){if(l===null){O=l=a;try{if(g=O.stateNode,f)x=g.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{E=O.stateNode;var ie=O.memoizedProps.style,G=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;E.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch(ve){rt(O,O.return,ve)}}}else if(a.tag===6){if(l===null){O=a;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(ve){rt(O,O.return,ve)}}}else if(a.tag===18){if(l===null){O=a;try{var K=O.stateNode;f?mv(K,!0):mv(O.stateNode,!1)}catch(ve){rt(O,O.return,ve)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}o&4&&(o=t.updateQueue,o!==null&&(l=o.retryQueue,l!==null&&(o.retryQueue=null,ho(t,l))));break;case 19:Tn(a,t),Nn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,ho(t,o)));break;case 30:break;case 21:break;default:Tn(a,t),Nn(t)}}function Nn(t){var a=t.flags;if(a&2){try{for(var l,o=t.return;o!==null;){if(gg(o)){l=o;break}o=o.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var f=l.stateNode,g=xd(t);fo(t,g,f);break;case 5:var x=l.stateNode;l.flags&32&&(li(x,""),l.flags&=-33);var E=xd(t);fo(t,E,x);break;case 3:case 4:var O=l.stateNode.containerInfo,F=xd(t);Sd(t,F,O);break;default:throw Error(i(161))}}catch(J){rt(t,t.return,J)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function Tg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;Tg(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Ia(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)bg(t,a.alternate,a),a=a.sibling}function Vs(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:os(4,a,a.return),Vs(a);break;case 1:ga(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&mg(a,a.return,l),Vs(a);break;case 27:Fl(a.stateNode);case 26:case 5:ga(a,a.return),Vs(a);break;case 22:a.memoizedState===null&&Vs(a);break;case 30:Vs(a);break;default:Vs(a)}t=t.sibling}}function Ba(t,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var o=a.alternate,f=t,g=a,x=g.flags;switch(g.tag){case 0:case 11:case 15:Ba(f,g,l),zl(4,g);break;case 1:if(Ba(f,g,l),o=g,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(F){rt(o,o.return,F)}if(o=g,f=o.updateQueue,f!==null){var E=o.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)np(O[f],E)}catch(F){rt(o,o.return,F)}}l&&x&64&&hg(g),Pl(g,g.return);break;case 27:vg(g);case 26:case 5:Ba(f,g,l),l&&o===null&&x&4&&pg(g),Pl(g,g.return);break;case 12:Ba(f,g,l);break;case 31:Ba(f,g,l),l&&x&4&&wg(f,g);break;case 13:Ba(f,g,l),l&&x&4&&_g(f,g);break;case 22:g.memoizedState===null&&Ba(f,g,l),Pl(g,g.return);break;case 30:break;default:Ba(f,g,l)}a=a.sibling}}function _d(t,a){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&wl(l))}function Ed(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&wl(t))}function sa(t,a,l,o){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ng(t,a,l,o),a=a.sibling}function Ng(t,a,l,o){var f=a.flags;switch(a.tag){case 0:case 11:case 15:sa(t,a,l,o),f&2048&&zl(9,a);break;case 1:sa(t,a,l,o);break;case 3:sa(t,a,l,o),f&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&wl(t)));break;case 12:if(f&2048){sa(t,a,l,o),t=a.stateNode;try{var g=a.memoizedProps,x=g.id,E=g.onPostCommit;typeof E=="function"&&E(x,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){rt(a,a.return,O)}}else sa(t,a,l,o);break;case 31:sa(t,a,l,o);break;case 13:sa(t,a,l,o);break;case 23:break;case 22:g=a.stateNode,x=a.alternate,a.memoizedState!==null?g._visibility&2?sa(t,a,l,o):Il(t,a):g._visibility&2?sa(t,a,l,o):(g._visibility|=2,Ni(t,a,l,o,(a.subtreeFlags&10256)!==0||!1)),f&2048&&_d(x,a);break;case 24:sa(t,a,l,o),f&2048&&Ed(a.alternate,a);break;default:sa(t,a,l,o)}}function Ni(t,a,l,o,f){for(f=f&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var g=t,x=a,E=l,O=o,F=x.flags;switch(x.tag){case 0:case 11:case 15:Ni(g,x,E,O,f),zl(8,x);break;case 23:break;case 22:var J=x.stateNode;x.memoizedState!==null?J._visibility&2?Ni(g,x,E,O,f):Il(g,x):(J._visibility|=2,Ni(g,x,E,O,f)),f&&F&2048&&_d(x.alternate,x);break;case 24:Ni(g,x,E,O,f),f&&F&2048&&Ed(x.alternate,x);break;default:Ni(g,x,E,O,f)}a=a.sibling}}function Il(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=t,o=a,f=o.flags;switch(o.tag){case 22:Il(l,o),f&2048&&_d(o.alternate,o);break;case 24:Il(l,o),f&2048&&Ed(o.alternate,o);break;default:Il(l,o)}a=a.sibling}}var Bl=8192;function Mi(t,a,l){if(t.subtreeFlags&Bl)for(t=t.child;t!==null;)Mg(t,a,l),t=t.sibling}function Mg(t,a,l){switch(t.tag){case 26:Mi(t,a,l),t.flags&Bl&&t.memoizedState!==null&&Uw(l,aa,t.memoizedState,t.memoizedProps);break;case 5:Mi(t,a,l);break;case 3:case 4:var o=aa;aa=Mo(t.stateNode.containerInfo),Mi(t,a,l),aa=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Bl,Bl=16777216,Mi(t,a,l),Bl=o):Mi(t,a,l));break;default:Mi(t,a,l)}}function jg(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Ll(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var o=a[l];nn=o,Dg(o,t)}jg(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Cg(t),t=t.sibling}function Cg(t){switch(t.tag){case 0:case 11:case 15:Ll(t),t.flags&2048&&os(9,t,t.return);break;case 3:Ll(t);break;case 12:Ll(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,mo(t)):Ll(t);break;default:Ll(t)}}function mo(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var o=a[l];nn=o,Dg(o,t)}jg(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:os(8,a,a.return),mo(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,mo(a));break;default:mo(a)}t=t.sibling}}function Dg(t,a){for(;nn!==null;){var l=nn;switch(l.tag){case 0:case 11:case 15:os(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var o=l.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:wl(l.memoizedState.cache)}if(o=l.child,o!==null)o.return=l,nn=o;else e:for(l=t;nn!==null;){o=nn;var f=o.sibling,g=o.return;if(xg(o),o===l){nn=null;break e}if(f!==null){f.return=g,nn=f;break e}nn=g}}}var nw={getCacheForType:function(t){var a=dn(Ht),l=a.data.get(t);return l===void 0&&(l=t(),a.data.set(t,l)),l},cacheSignal:function(){return dn(Ht).controller.signal}},aw=typeof WeakMap=="function"?WeakMap:Map,st=0,ht=null,Ue=null,He=0,lt=0,Pn=null,cs=!1,ji=!1,Td=!1,La=0,At=0,us=0,Ks=0,Nd=0,In=0,Ci=0,ql=null,Mn=null,Md=!1,po=0,Rg=0,go=1/0,vo=null,ds=null,en=0,fs=null,Di=null,qa=0,jd=0,Cd=null,kg=null,Ul=0,Dd=null;function Bn(){return(st&2)!==0&&He!==0?He&-He:L.T!==null?Pd():je()}function Ag(){if(In===0)if((He&536870912)===0||Ve){var t=Ka;Ka<<=1,(Ka&3932160)===0&&(Ka=262144),In=t}else In=536870912;return t=On.current,t!==null&&(t.flags|=32),In}function jn(t,a,l){(t===ht&&(lt===2||lt===9)||t.cancelPendingCommit!==null)&&(Ri(t,0),hs(t,He,In,!1)),bn(t,l),((st&2)===0||t!==ht)&&(t===ht&&((st&2)===0&&(Ks|=l),At===4&&hs(t,He,In,!1)),va(t))}function Og(t,a,l){if((st&6)!==0)throw Error(i(327));var o=!l&&(a&127)===0&&(a&t.expiredLanes)===0||pn(t,a),f=o?lw(t,a):kd(t,a,!0),g=o;do{if(f===0){ji&&!o&&hs(t,a,0,!1);break}else{if(l=t.current.alternate,g&&!sw(l)){f=kd(t,a,!1),g=!1;continue}if(f===2){if(g=a,t.errorRecoveryDisabledLanes&g)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var E=t;f=ql;var O=E.current.memoizedState.isDehydrated;if(O&&(Ri(E,x).flags|=256),x=kd(E,x,!1),x!==2){if(Td&&!O){E.errorRecoveryDisabledLanes|=g,Ks|=g,f=4;break e}g=Mn,Mn=f,g!==null&&(Mn===null?Mn=g:Mn.push.apply(Mn,g))}f=x}if(g=!1,f!==2)continue}}if(f===1){Ri(t,0),hs(t,a,0,!0);break}e:{switch(o=t,g=f,g){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:hs(o,a,In,!cs);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(f=po+300-Le(),10<f)){if(hs(o,a,In,!cs),$t(o,0,!0)!==0)break e;qa=a,o.timeoutHandle=dv(zg.bind(null,o,l,Mn,vo,Md,a,In,Ks,Ci,cs,g,"Throttled",-0,0),f);break e}zg(o,l,Mn,vo,Md,a,In,Ks,Ci,cs,g,null,-0,0)}}break}while(!0);va(t)}function zg(t,a,l,o,f,g,x,E,O,F,J,ie,G,K){if(t.timeoutHandle=-1,ie=a.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ta},Mg(a,g,ie);var ve=(g&62914560)===g?po-Le():(g&4194048)===g?Rg-Le():0;if(ve=$w(ie,ve),ve!==null){qa=g,t.cancelPendingCommit=ve(Hg.bind(null,t,a,g,l,o,f,x,E,O,J,ie,null,G,K)),hs(t,g,x,!F);return}}Hg(t,a,g,l,o,f,x,E,O)}function sw(t){for(var a=t;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var o=0;o<l.length;o++){var f=l[o],g=f.getSnapshot;f=f.value;try{if(!kn(g(),f))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function hs(t,a,l,o){a&=~Nd,a&=~Ks,t.suspendedLanes|=a,t.pingedLanes&=~a,o&&(t.warmLanes|=a),o=t.expirationTimes;for(var f=a;0<f;){var g=31-St(f),x=1<<g;o[g]=-1,f&=~x}l!==0&&it(t,l,a)}function yo(){return(st&6)===0?($l(0),!1):!0}function Rd(){if(Ue!==null){if(lt===0)var t=Ue.return;else t=Ue,Ca=qs=null,Yu(t),Si=null,El=0,t=Ue;for(;t!==null;)fg(t.alternate,t),t=t.return;Ue=null}}function Ri(t,a){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,Ew(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),qa=0,Rd(),ht=t,Ue=l=Ma(t.current,null),He=a,lt=0,Pn=null,cs=!1,ji=pn(t,a),Td=!1,Ci=In=Nd=Ks=us=At=0,Mn=ql=null,Md=!1,(a&8)!==0&&(a|=a&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=a;0<o;){var f=31-St(o),g=1<<f;a|=t[f],o&=~g}return La=a,Br(),l}function Pg(t,a){Oe=null,L.H=kl,a===xi||a===Gr?(a=Qm(),lt=3):a===zu?(a=Qm(),lt=4):lt=a===cd?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Pn=a,Ue===null&&(At=1,lo(t,Gn(a,t.current)))}function Ig(){var t=On.current;return t===null?!0:(He&4194048)===He?Wn===null:(He&62914560)===He||(He&536870912)!==0?t===Wn:!1}function Bg(){var t=L.H;return L.H=kl,t===null?kl:t}function Lg(){var t=L.A;return L.A=nw,t}function bo(){At=4,cs||(He&4194048)!==He&&On.current!==null||(ji=!0),(us&134217727)===0&&(Ks&134217727)===0||ht===null||hs(ht,He,In,!1)}function kd(t,a,l){var o=st;st|=2;var f=Bg(),g=Lg();(ht!==t||He!==a)&&(vo=null,Ri(t,a)),a=!1;var x=At;e:do try{if(lt!==0&&Ue!==null){var E=Ue,O=Pn;switch(lt){case 8:Rd(),x=6;break e;case 3:case 2:case 9:case 6:On.current===null&&(a=!0);var F=lt;if(lt=0,Pn=null,ki(t,E,O,F),l&&ji){x=0;break e}break;default:F=lt,lt=0,Pn=null,ki(t,E,O,F)}}iw(),x=At;break}catch(J){Pg(t,J)}while(!0);return a&&t.shellSuspendCounter++,Ca=qs=null,st=o,L.H=f,L.A=g,Ue===null&&(ht=null,He=0,Br()),x}function iw(){for(;Ue!==null;)qg(Ue)}function lw(t,a){var l=st;st|=2;var o=Bg(),f=Lg();ht!==t||He!==a?(vo=null,go=Le()+500,Ri(t,a)):ji=pn(t,a);e:do try{if(lt!==0&&Ue!==null){a=Ue;var g=Pn;t:switch(lt){case 1:lt=0,Pn=null,ki(t,a,g,1);break;case 2:case 9:if(Wm(g)){lt=0,Pn=null,Ug(a);break}a=function(){lt!==2&&lt!==9||ht!==t||(lt=7),va(t)},g.then(a,a);break e;case 3:lt=7;break e;case 4:lt=5;break e;case 7:Wm(g)?(lt=0,Pn=null,Ug(a)):(lt=0,Pn=null,ki(t,a,g,7));break;case 5:var x=null;switch(Ue.tag){case 26:x=Ue.memoizedState;case 5:case 27:var E=Ue;if(x?Nv(x):E.stateNode.complete){lt=0,Pn=null;var O=E.sibling;if(O!==null)Ue=O;else{var F=E.return;F!==null?(Ue=F,xo(F)):Ue=null}break t}}lt=0,Pn=null,ki(t,a,g,5);break;case 6:lt=0,Pn=null,ki(t,a,g,6);break;case 8:Rd(),At=6;break e;default:throw Error(i(462))}}rw();break}catch(J){Pg(t,J)}while(!0);return Ca=qs=null,L.H=o,L.A=f,st=l,Ue!==null?0:(ht=null,He=0,Br(),At)}function rw(){for(;Ue!==null&&!Pe();)qg(Ue)}function qg(t){var a=ug(t.alternate,t,La);t.memoizedProps=t.pendingProps,a===null?xo(t):Ue=a}function Ug(t){var a=t,l=a.alternate;switch(a.tag){case 15:case 0:a=sg(l,a,a.pendingProps,a.type,void 0,He);break;case 11:a=sg(l,a,a.pendingProps,a.type.render,a.ref,He);break;case 5:Yu(a);default:fg(l,a),a=Ue=Lm(a,La),a=ug(l,a,La)}t.memoizedProps=t.pendingProps,a===null?xo(t):Ue=a}function ki(t,a,l,o){Ca=qs=null,Yu(a),Si=null,El=0;var f=a.return;try{if(K1(t,f,a,l,He)){At=1,lo(t,Gn(l,t.current)),Ue=null;return}}catch(g){if(f!==null)throw Ue=f,g;At=1,lo(t,Gn(l,t.current)),Ue=null;return}a.flags&32768?(Ve||o===1?t=!0:ji||(He&536870912)!==0?t=!1:(cs=t=!0,(o===2||o===9||o===3||o===6)&&(o=On.current,o!==null&&o.tag===13&&(o.flags|=16384))),$g(a,t)):xo(a)}function xo(t){var a=t;do{if((a.flags&32768)!==0){$g(a,cs);return}t=a.return;var l=Q1(a.alternate,a,La);if(l!==null){Ue=l;return}if(a=a.sibling,a!==null){Ue=a;return}Ue=a=t}while(a!==null);At===0&&(At=5)}function $g(t,a){do{var l=J1(t.alternate,t);if(l!==null){l.flags&=32767,Ue=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(t=t.sibling,t!==null)){Ue=t;return}Ue=t=l}while(t!==null);At=6,Ue=null}function Hg(t,a,l,o,f,g,x,E,O){t.cancelPendingCommit=null;do So();while(en!==0);if((st&6)!==0)throw Error(i(327));if(a!==null){if(a===t.current)throw Error(i(177));if(g=a.lanes|a.childLanes,g|=xu,Pt(t,l,g,x,E,O),t===ht&&(Ue=ht=null,He=0),Di=a,fs=t,qa=l,jd=g,Cd=f,kg=o,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,dw(We,function(){return Vg(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||o){o=L.T,L.T=null,f=Q.p,Q.p=2,x=st,st|=4;try{ew(t,a,l)}finally{st=x,Q.p=f,L.T=o}}en=1,Zg(),Fg(),Gg()}}function Zg(){if(en===1){en=0;var t=fs,a=Di,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=L.T,L.T=null;var o=Q.p;Q.p=2;var f=st;st|=4;try{Eg(a,t);var g=Zd,x=Dm(t.containerInfo),E=g.focusedElem,O=g.selectionRange;if(x!==E&&E&&E.ownerDocument&&Cm(E.ownerDocument.documentElement,E)){if(O!==null&&pu(E)){var F=O.start,J=O.end;if(J===void 0&&(J=F),"selectionStart"in E)E.selectionStart=F,E.selectionEnd=Math.min(J,E.value.length);else{var ie=E.ownerDocument||document,G=ie&&ie.defaultView||window;if(G.getSelection){var K=G.getSelection(),ve=E.textContent.length,_e=Math.min(O.start,ve),ft=O.end===void 0?_e:Math.min(O.end,ve);!K.extend&&_e>ft&&(x=ft,ft=_e,_e=x);var U=jm(E,_e),I=jm(E,ft);if(U&&I&&(K.rangeCount!==1||K.anchorNode!==U.node||K.anchorOffset!==U.offset||K.focusNode!==I.node||K.focusOffset!==I.offset)){var H=ie.createRange();H.setStart(U.node,U.offset),K.removeAllRanges(),_e>ft?(K.addRange(H),K.extend(I.node,I.offset)):(H.setEnd(I.node,I.offset),K.addRange(H))}}}}for(ie=[],K=E;K=K.parentNode;)K.nodeType===1&&ie.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ie.length;E++){var ne=ie[E];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Ao=!!Hd,Zd=Hd=null}finally{st=f,Q.p=o,L.T=l}}t.current=a,en=2}}function Fg(){if(en===2){en=0;var t=fs,a=Di,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=L.T,L.T=null;var o=Q.p;Q.p=2;var f=st;st|=4;try{bg(t,a.alternate,a)}finally{st=f,Q.p=o,L.T=l}}en=3}}function Gg(){if(en===4||en===3){en=0,Fe();var t=fs,a=Di,l=qa,o=kg;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?en=5:(en=0,Di=fs=null,Yg(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(ds=null),ge(l),a=a.stateNode,ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(Dt,a,void 0,(a.current.flags&128)===128)}catch{}if(o!==null){a=L.T,f=Q.p,Q.p=2,L.T=null;try{for(var g=t.onRecoverableError,x=0;x<o.length;x++){var E=o[x];g(E.value,{componentStack:E.stack})}}finally{L.T=a,Q.p=f}}(qa&3)!==0&&So(),va(t),f=t.pendingLanes,(l&261930)!==0&&(f&42)!==0?t===Dd?Ul++:(Ul=0,Dd=t):Ul=0,$l(0)}}function Yg(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,wl(a)))}function So(){return Zg(),Fg(),Gg(),Vg()}function Vg(){if(en!==5)return!1;var t=fs,a=jd;jd=0;var l=ge(qa),o=L.T,f=Q.p;try{Q.p=32>l?32:l,L.T=null,l=Cd,Cd=null;var g=fs,x=qa;if(en=0,Di=fs=null,qa=0,(st&6)!==0)throw Error(i(331));var E=st;if(st|=4,Cg(g.current),Ng(g,g.current,x,l),st=E,$l(0,!1),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(Dt,g)}catch{}return!0}finally{Q.p=f,L.T=o,Yg(t,a)}}function Kg(t,a,l){a=Gn(l,a),a=od(t.stateNode,a,2),t=is(t,a,2),t!==null&&(bn(t,2),va(t))}function rt(t,a,l){if(t.tag===3)Kg(t,t,l);else for(;a!==null;){if(a.tag===3){Kg(a,t,l);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ds===null||!ds.has(o))){t=Gn(l,t),l=Wp(2),o=is(a,l,2),o!==null&&(Xp(l,o,a,t),bn(o,2),va(o));break}}a=a.return}}function Ad(t,a,l){var o=t.pingCache;if(o===null){o=t.pingCache=new aw;var f=new Set;o.set(a,f)}else f=o.get(a),f===void 0&&(f=new Set,o.set(a,f));f.has(l)||(Td=!0,f.add(l),t=ow.bind(null,t,a,l),a.then(t,t))}function ow(t,a,l){var o=t.pingCache;o!==null&&o.delete(a),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,ht===t&&(He&l)===l&&(At===4||At===3&&(He&62914560)===He&&300>Le()-po?(st&2)===0&&Ri(t,0):Nd|=l,Ci===He&&(Ci=0)),va(t)}function Wg(t,a){a===0&&(a=Jt()),t=Is(t,a),t!==null&&(bn(t,a),va(t))}function cw(t){var a=t.memoizedState,l=0;a!==null&&(l=a.retryLane),Wg(t,l)}function uw(t,a){var l=0;switch(t.tag){case 31:case 13:var o=t.stateNode,f=t.memoizedState;f!==null&&(l=f.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(a),Wg(t,l)}function dw(t,a){return de(t,a)}var wo=null,Ai=null,Od=!1,_o=!1,zd=!1,ms=0;function va(t){t!==Ai&&t.next===null&&(Ai===null?wo=Ai=t:Ai=Ai.next=t),_o=!0,Od||(Od=!0,hw())}function $l(t,a){if(!zd&&_o){zd=!0;do for(var l=!1,o=wo;o!==null;){if(t!==0){var f=o.pendingLanes;if(f===0)var g=0;else{var x=o.suspendedLanes,E=o.pingedLanes;g=(1<<31-St(42|t)+1)-1,g&=f&~(x&~E),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(l=!0,ev(o,g))}else g=He,g=$t(o,o===ht?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(g&3)===0||pn(o,g)||(l=!0,ev(o,g));o=o.next}while(l);zd=!1}}function fw(){Xg()}function Xg(){_o=Od=!1;var t=0;ms!==0&&_w()&&(t=ms);for(var a=Le(),l=null,o=wo;o!==null;){var f=o.next,g=Qg(o,a);g===0?(o.next=null,l===null?wo=f:l.next=f,f===null&&(Ai=l)):(l=o,(t!==0||(g&3)!==0)&&(_o=!0)),o=f}en!==0&&en!==5||$l(t),ms!==0&&(ms=0)}function Qg(t,a){for(var l=t.suspendedLanes,o=t.pingedLanes,f=t.expirationTimes,g=t.pendingLanes&-62914561;0<g;){var x=31-St(g),E=1<<x,O=f[x];O===-1?((E&l)===0||(E&o)!==0)&&(f[x]=gn(E,a)):O<=a&&(t.expiredLanes|=E),g&=~E}if(a=ht,l=He,l=$t(t,t===a?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,l===0||t===a&&(lt===2||lt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&ke(o),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||pn(t,l)){if(a=l&-l,a===t.callbackPriority)return a;switch(o!==null&&ke(o),ge(l)){case 2:case 8:l=Ut;break;case 32:l=We;break;case 268435456:l=pe;break;default:l=We}return o=Jg.bind(null,t),l=de(l,o),t.callbackPriority=a,t.callbackNode=l,a}return o!==null&&o!==null&&ke(o),t.callbackPriority=2,t.callbackNode=null,2}function Jg(t,a){if(en!==0&&en!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(So()&&t.callbackNode!==l)return null;var o=He;return o=$t(t,t===ht?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Og(t,o,a),Qg(t,Le()),t.callbackNode!=null&&t.callbackNode===l?Jg.bind(null,t):null)}function ev(t,a){if(So())return null;Og(t,a,!0)}function hw(){Tw(function(){(st&6)!==0?de(pt,fw):Xg()})}function Pd(){if(ms===0){var t=yi;t===0&&(t=da,da<<=1,(da&261888)===0&&(da=256)),ms=t}return ms}function tv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Dr(""+t)}function nv(t,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,t.id&&l.setAttribute("form",t.id),a.parentNode.insertBefore(l,a),t=new FormData(t),l.parentNode.removeChild(l),t}function mw(t,a,l,o,f){if(a==="submit"&&l&&l.stateNode===f){var g=tv((f[Ae]||null).action),x=o.submitter;x&&(a=(a=x[Ae]||null)?tv(a.formAction):x.getAttribute("formAction"),a!==null&&(g=a,x=null));var E=new Or("action","action",null,o,f);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ms!==0){var O=x?nv(f,x):new FormData(f);nd(l,{pending:!0,data:O,method:f.method,action:g},null,O)}}else typeof g=="function"&&(E.preventDefault(),O=x?nv(f,x):new FormData(f),nd(l,{pending:!0,data:O,method:f.method,action:g},g,O))},currentTarget:f}]})}}for(var Id=0;Id<bu.length;Id++){var Bd=bu[Id],pw=Bd.toLowerCase(),gw=Bd[0].toUpperCase()+Bd.slice(1);na(pw,"on"+gw)}na(Am,"onAnimationEnd"),na(Om,"onAnimationIteration"),na(zm,"onAnimationStart"),na("dblclick","onDoubleClick"),na("focusin","onFocus"),na("focusout","onBlur"),na(k1,"onTransitionRun"),na(A1,"onTransitionStart"),na(O1,"onTransitionCancel"),na(Pm,"onTransitionEnd"),_a("onMouseEnter",["mouseout","mouseover"]),_a("onMouseLeave",["mouseout","mouseover"]),_a("onPointerEnter",["pointerout","pointerover"]),_a("onPointerLeave",["pointerout","pointerover"]),ha("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ha("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ha("onBeforeInput",["compositionend","keypress","textInput","paste"]),ha("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ha("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ha("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hl));function av(t,a){a=(a&4)!==0;for(var l=0;l<t.length;l++){var o=t[l],f=o.event;o=o.listeners;e:{var g=void 0;if(a)for(var x=o.length-1;0<=x;x--){var E=o[x],O=E.instance,F=E.currentTarget;if(E=E.listener,O!==g&&f.isPropagationStopped())break e;g=E,f.currentTarget=F;try{g(f)}catch(J){Ir(J)}f.currentTarget=null,g=O}else for(x=0;x<o.length;x++){if(E=o[x],O=E.instance,F=E.currentTarget,E=E.listener,O!==g&&f.isPropagationStopped())break e;g=E,f.currentTarget=F;try{g(f)}catch(J){Ir(J)}f.currentTarget=null,g=O}}}}function $e(t,a){var l=a[vn];l===void 0&&(l=a[vn]=new Set);var o=t+"__bubble";l.has(o)||(sv(a,t,2,!1),l.add(o))}function Ld(t,a,l){var o=0;a&&(o|=4),sv(l,t,o,a)}var Eo="_reactListening"+Math.random().toString(36).slice(2);function qd(t){if(!t[Eo]){t[Eo]=!0,rl.forEach(function(l){l!=="selectionchange"&&(vw.has(l)||Ld(l,!1,t),Ld(l,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[Eo]||(a[Eo]=!0,Ld("selectionchange",!1,a))}}function sv(t,a,l,o){switch(Av(a)){case 2:var f=Fw;break;case 8:f=Gw;break;default:f=tf}l=f.bind(null,a,l,t),f=void 0,!lu||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),o?f!==void 0?t.addEventListener(a,l,{capture:!0,passive:f}):t.addEventListener(a,l,!0):f!==void 0?t.addEventListener(a,l,{passive:f}):t.addEventListener(a,l,!1)}function Ud(t,a,l,o,f){var g=o;if((a&1)===0&&(a&2)===0&&o!==null)e:for(;;){if(o===null)return;var x=o.tag;if(x===3||x===4){var E=o.stateNode.containerInfo;if(E===f)break;if(x===4)for(x=o.return;x!==null;){var O=x.tag;if((O===3||O===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;E!==null;){if(x=Ne(E),x===null)return;if(O=x.tag,O===5||O===6||O===26||O===27){o=g=x;continue e}E=E.parentNode}}o=o.return}cm(function(){var F=g,J=su(l),ie=[];e:{var G=Im.get(t);if(G!==void 0){var K=Or,ve=t;switch(t){case"keypress":if(kr(l)===0)break e;case"keydown":case"keyup":K=u1;break;case"focusin":ve="focus",K=uu;break;case"focusout":ve="blur",K=uu;break;case"beforeblur":case"afterblur":K=uu;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=fm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=QS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=h1;break;case Am:case Om:case zm:K=t1;break;case Pm:K=p1;break;case"scroll":case"scrollend":K=WS;break;case"wheel":K=v1;break;case"copy":case"cut":case"paste":K=a1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=mm;break;case"toggle":case"beforetoggle":K=b1}var _e=(a&4)!==0,ft=!_e&&(t==="scroll"||t==="scrollend"),U=_e?G!==null?G+"Capture":null:G;_e=[];for(var I=F,H;I!==null;){var ne=I;if(H=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||H===null||U===null||(ne=dl(I,U),ne!=null&&_e.push(Zl(I,ne,H))),ft)break;I=I.return}0<_e.length&&(G=new K(G,ve,null,l,J),ie.push({event:G,listeners:_e}))}}if((a&7)===0){e:{if(G=t==="mouseover"||t==="pointerover",K=t==="mouseout"||t==="pointerout",G&&l!==au&&(ve=l.relatedTarget||l.fromElement)&&(Ne(ve)||ve[Be]))break e;if((K||G)&&(G=J.window===J?J:(G=J.ownerDocument)?G.defaultView||G.parentWindow:window,K?(ve=l.relatedTarget||l.toElement,K=F,ve=ve?Ne(ve):null,ve!==null&&(ft=c(ve),_e=ve.tag,ve!==ft||_e!==5&&_e!==27&&_e!==6)&&(ve=null)):(K=null,ve=F),K!==ve)){if(_e=fm,ne="onMouseLeave",U="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(_e=mm,ne="onPointerLeave",U="onPointerEnter",I="pointer"),ft=K==null?G:wa(K),H=ve==null?G:wa(ve),G=new _e(ne,I+"leave",K,l,J),G.target=ft,G.relatedTarget=H,ne=null,Ne(J)===F&&(_e=new _e(U,I+"enter",ve,l,J),_e.target=H,_e.relatedTarget=ft,ne=_e),ft=ne,K&&ve)t:{for(_e=yw,U=K,I=ve,H=0,ne=U;ne;ne=_e(ne))H++;ne=0;for(var xe=I;xe;xe=_e(xe))ne++;for(;0<H-ne;)U=_e(U),H--;for(;0<ne-H;)I=_e(I),ne--;for(;H--;){if(U===I||I!==null&&U===I.alternate){_e=U;break t}U=_e(U),I=_e(I)}_e=null}else _e=null;K!==null&&iv(ie,G,K,_e,!1),ve!==null&&ft!==null&&iv(ie,ft,ve,_e,!0)}}e:{if(G=F?wa(F):window,K=G.nodeName&&G.nodeName.toLowerCase(),K==="select"||K==="input"&&G.type==="file")var tt=wm;else if(xm(G))if(_m)tt=C1;else{tt=M1;var ye=N1}else K=G.nodeName,!K||K.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&nu(F.elementType)&&(tt=wm):tt=j1;if(tt&&(tt=tt(t,F))){Sm(ie,tt,l,J);break e}ye&&ye(t,G,F),t==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&tu(G,"number",G.value)}switch(ye=F?wa(F):window,t){case"focusin":(xm(ye)||ye.contentEditable==="true")&&(ui=ye,gu=F,bl=null);break;case"focusout":bl=gu=ui=null;break;case"mousedown":vu=!0;break;case"contextmenu":case"mouseup":case"dragend":vu=!1,Rm(ie,l,J);break;case"selectionchange":if(R1)break;case"keydown":case"keyup":Rm(ie,l,J)}var Ie;if(fu)e:{switch(t){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else ci?ym(t,l)&&(Ze="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(Ze="onCompositionStart");Ze&&(pm&&l.locale!=="ko"&&(ci||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&ci&&(Ie=um()):(Qa=J,ru="value"in Qa?Qa.value:Qa.textContent,ci=!0)),ye=To(F,Ze),0<ye.length&&(Ze=new hm(Ze,t,null,l,J),ie.push({event:Ze,listeners:ye}),Ie?Ze.data=Ie:(Ie=bm(l),Ie!==null&&(Ze.data=Ie)))),(Ie=S1?w1(t,l):_1(t,l))&&(Ze=To(F,"onBeforeInput"),0<Ze.length&&(ye=new hm("onBeforeInput","beforeinput",null,l,J),ie.push({event:ye,listeners:Ze}),ye.data=Ie)),mw(ie,t,F,l,J)}av(ie,a)})}function Zl(t,a,l){return{instance:t,listener:a,currentTarget:l}}function To(t,a){for(var l=a+"Capture",o=[];t!==null;){var f=t,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=dl(t,l),f!=null&&o.unshift(Zl(t,f,g)),f=dl(t,a),f!=null&&o.push(Zl(t,f,g))),t.tag===3)return o;t=t.return}return[]}function yw(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function iv(t,a,l,o,f){for(var g=a._reactName,x=[];l!==null&&l!==o;){var E=l,O=E.alternate,F=E.stateNode;if(E=E.tag,O!==null&&O===o)break;E!==5&&E!==26&&E!==27||F===null||(O=F,f?(F=dl(l,g),F!=null&&x.unshift(Zl(l,F,O))):f||(F=dl(l,g),F!=null&&x.push(Zl(l,F,O)))),l=l.return}x.length!==0&&t.push({event:a,listeners:x})}var bw=/\r\n?/g,xw=/\u0000|\uFFFD/g;function lv(t){return(typeof t=="string"?t:""+t).replace(bw,`
`).replace(xw,"")}function rv(t,a){return a=lv(a),lv(t)===a}function dt(t,a,l,o,f,g){switch(l){case"children":typeof o=="string"?a==="body"||a==="textarea"&&o===""||li(t,o):(typeof o=="number"||typeof o=="bigint")&&a!=="body"&&li(t,""+o);break;case"className":jr(t,"class",o);break;case"tabIndex":jr(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":jr(t,l,o);break;case"style":rm(t,o,g);break;case"data":if(a!=="object"){jr(t,"data",o);break}case"src":case"href":if(o===""&&(a!=="a"||l!=="href")){t.removeAttribute(l);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(l);break}o=Dr(""+o),t.setAttribute(l,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(l==="formAction"?(a!=="input"&&dt(t,a,"name",f.name,f,null),dt(t,a,"formEncType",f.formEncType,f,null),dt(t,a,"formMethod",f.formMethod,f,null),dt(t,a,"formTarget",f.formTarget,f,null)):(dt(t,a,"encType",f.encType,f,null),dt(t,a,"method",f.method,f,null),dt(t,a,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(l);break}o=Dr(""+o),t.setAttribute(l,o);break;case"onClick":o!=null&&(t.onclick=Ta);break;case"onScroll":o!=null&&$e("scroll",t);break;case"onScrollEnd":o!=null&&$e("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(l=o.__html,l!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=l}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}l=Dr(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(l,""+o):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":o===!0?t.setAttribute(l,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(l,o):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(l,o):t.removeAttribute(l);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(l):t.setAttribute(l,o);break;case"popover":$e("beforetoggle",t),$e("toggle",t),Mr(t,"popover",o);break;case"xlinkActuate":Ea(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ea(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ea(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ea(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ea(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ea(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ea(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ea(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ea(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Mr(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=VS.get(l)||l,Mr(t,l,o))}}function $d(t,a,l,o,f,g){switch(l){case"style":rm(t,o,g);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(l=o.__html,l!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=l}}break;case"children":typeof o=="string"?li(t,o):(typeof o=="number"||typeof o=="bigint")&&li(t,""+o);break;case"onScroll":o!=null&&$e("scroll",t);break;case"onScrollEnd":o!=null&&$e("scrollend",t);break;case"onClick":o!=null&&(t.onclick=Ta);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ol.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),a=l.slice(2,f?l.length-7:void 0),g=t[Ae]||null,g=g!=null?g[l]:null,typeof g=="function"&&t.removeEventListener(a,g,f),typeof o=="function")){typeof g!="function"&&g!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(a,o,f);break e}l in t?t[l]=o:o===!0?t.setAttribute(l,""):Mr(t,l,o)}}}function hn(t,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":$e("error",t),$e("load",t);var o=!1,f=!1,g;for(g in l)if(l.hasOwnProperty(g)){var x=l[g];if(x!=null)switch(g){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:dt(t,a,g,x,l,null)}}f&&dt(t,a,"srcSet",l.srcSet,l,null),o&&dt(t,a,"src",l.src,l,null);return;case"input":$e("invalid",t);var E=g=x=f=null,O=null,F=null;for(o in l)if(l.hasOwnProperty(o)){var J=l[o];if(J!=null)switch(o){case"name":f=J;break;case"type":x=J;break;case"checked":O=J;break;case"defaultChecked":F=J;break;case"value":g=J;break;case"defaultValue":E=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,a));break;default:dt(t,a,o,J,l,null)}}am(t,g,E,O,F,x,f,!1);return;case"select":$e("invalid",t),o=x=g=null;for(f in l)if(l.hasOwnProperty(f)&&(E=l[f],E!=null))switch(f){case"value":g=E;break;case"defaultValue":x=E;break;case"multiple":o=E;default:dt(t,a,f,E,l,null)}a=g,l=x,t.multiple=!!o,a!=null?ii(t,!!o,a,!1):l!=null&&ii(t,!!o,l,!0);return;case"textarea":$e("invalid",t),g=f=o=null;for(x in l)if(l.hasOwnProperty(x)&&(E=l[x],E!=null))switch(x){case"value":o=E;break;case"defaultValue":f=E;break;case"children":g=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:dt(t,a,x,E,l,null)}im(t,o,f,g);return;case"option":for(O in l)l.hasOwnProperty(O)&&(o=l[O],o!=null)&&(O==="selected"?t.selected=o&&typeof o!="function"&&typeof o!="symbol":dt(t,a,O,o,l,null));return;case"dialog":$e("beforetoggle",t),$e("toggle",t),$e("cancel",t),$e("close",t);break;case"iframe":case"object":$e("load",t);break;case"video":case"audio":for(o=0;o<Hl.length;o++)$e(Hl[o],t);break;case"image":$e("error",t),$e("load",t);break;case"details":$e("toggle",t);break;case"embed":case"source":case"link":$e("error",t),$e("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in l)if(l.hasOwnProperty(F)&&(o=l[F],o!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:dt(t,a,F,o,l,null)}return;default:if(nu(a)){for(J in l)l.hasOwnProperty(J)&&(o=l[J],o!==void 0&&$d(t,a,J,o,l,void 0));return}}for(E in l)l.hasOwnProperty(E)&&(o=l[E],o!=null&&dt(t,a,E,o,l,null))}function Sw(t,a,l,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,x=null,E=null,O=null,F=null,J=null;for(K in l){var ie=l[K];if(l.hasOwnProperty(K)&&ie!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":O=ie;default:o.hasOwnProperty(K)||dt(t,a,K,null,o,ie)}}for(var G in o){var K=o[G];if(ie=l[G],o.hasOwnProperty(G)&&(K!=null||ie!=null))switch(G){case"type":g=K;break;case"name":f=K;break;case"checked":F=K;break;case"defaultChecked":J=K;break;case"value":x=K;break;case"defaultValue":E=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,a));break;default:K!==ie&&dt(t,a,G,K,o,ie)}}eu(t,x,E,O,F,J,g,f);return;case"select":K=x=E=G=null;for(g in l)if(O=l[g],l.hasOwnProperty(g)&&O!=null)switch(g){case"value":break;case"multiple":K=O;default:o.hasOwnProperty(g)||dt(t,a,g,null,o,O)}for(f in o)if(g=o[f],O=l[f],o.hasOwnProperty(f)&&(g!=null||O!=null))switch(f){case"value":G=g;break;case"defaultValue":E=g;break;case"multiple":x=g;default:g!==O&&dt(t,a,f,g,o,O)}a=E,l=x,o=K,G!=null?ii(t,!!l,G,!1):!!o!=!!l&&(a!=null?ii(t,!!l,a,!0):ii(t,!!l,l?[]:"",!1));return;case"textarea":K=G=null;for(E in l)if(f=l[E],l.hasOwnProperty(E)&&f!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:dt(t,a,E,null,o,f)}for(x in o)if(f=o[x],g=l[x],o.hasOwnProperty(x)&&(f!=null||g!=null))switch(x){case"value":G=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==g&&dt(t,a,x,f,o,g)}sm(t,G,K);return;case"option":for(var ve in l)G=l[ve],l.hasOwnProperty(ve)&&G!=null&&!o.hasOwnProperty(ve)&&(ve==="selected"?t.selected=!1:dt(t,a,ve,null,o,G));for(O in o)G=o[O],K=l[O],o.hasOwnProperty(O)&&G!==K&&(G!=null||K!=null)&&(O==="selected"?t.selected=G&&typeof G!="function"&&typeof G!="symbol":dt(t,a,O,G,o,K));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _e in l)G=l[_e],l.hasOwnProperty(_e)&&G!=null&&!o.hasOwnProperty(_e)&&dt(t,a,_e,null,o,G);for(F in o)if(G=o[F],K=l[F],o.hasOwnProperty(F)&&G!==K&&(G!=null||K!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(137,a));break;default:dt(t,a,F,G,o,K)}return;default:if(nu(a)){for(var ft in l)G=l[ft],l.hasOwnProperty(ft)&&G!==void 0&&!o.hasOwnProperty(ft)&&$d(t,a,ft,void 0,o,G);for(J in o)G=o[J],K=l[J],!o.hasOwnProperty(J)||G===K||G===void 0&&K===void 0||$d(t,a,J,G,o,K);return}}for(var U in l)G=l[U],l.hasOwnProperty(U)&&G!=null&&!o.hasOwnProperty(U)&&dt(t,a,U,null,o,G);for(ie in o)G=o[ie],K=l[ie],!o.hasOwnProperty(ie)||G===K||G==null&&K==null||dt(t,a,ie,G,o,K)}function ov(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ww(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,l=performance.getEntriesByType("resource"),o=0;o<l.length;o++){var f=l[o],g=f.transferSize,x=f.initiatorType,E=f.duration;if(g&&E&&ov(x)){for(x=0,E=f.responseEnd,o+=1;o<l.length;o++){var O=l[o],F=O.startTime;if(F>E)break;var J=O.transferSize,ie=O.initiatorType;J&&ov(ie)&&(O=O.responseEnd,x+=J*(O<E?1:(E-F)/(O-F)))}if(--o,a+=8*(g+x)/(f.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Hd=null,Zd=null;function No(t){return t.nodeType===9?t:t.ownerDocument}function cv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uv(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Fd(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Gd=null;function _w(){var t=window.event;return t&&t.type==="popstate"?t===Gd?!1:(Gd=t,!0):(Gd=null,!1)}var dv=typeof setTimeout=="function"?setTimeout:void 0,Ew=typeof clearTimeout=="function"?clearTimeout:void 0,fv=typeof Promise=="function"?Promise:void 0,Tw=typeof queueMicrotask=="function"?queueMicrotask:typeof fv<"u"?function(t){return fv.resolve(null).then(t).catch(Nw)}:dv;function Nw(t){setTimeout(function(){throw t})}function ps(t){return t==="head"}function hv(t,a){var l=a,o=0;do{var f=l.nextSibling;if(t.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(o===0){t.removeChild(f),Ii(a);return}o--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")o++;else if(l==="html")Fl(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,Fl(l);for(var g=l.firstChild;g;){var x=g.nextSibling,E=g.nodeName;g[ta]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&g.rel.toLowerCase()==="stylesheet"||l.removeChild(g),g=x}}else l==="body"&&Fl(t.ownerDocument.body);l=f}while(l);Ii(a)}function mv(t,a){var l=t;t=0;do{var o=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),o&&o.nodeType===8)if(l=o.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=o}while(l)}function Yd(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Yd(l),fa(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function Mw(t,a,l,o){for(;t.nodeType===1;){var f=l;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[ta])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(g=t.getAttribute("rel"),g==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(g!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(g=t.getAttribute("src"),(g!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===g)return t}else return t;if(t=Xn(t.nextSibling),t===null)break}return null}function jw(t,a,l){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=Xn(t.nextSibling),t===null))return null;return t}function pv(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Xn(t.nextSibling),t===null))return null;return t}function Vd(t){return t.data==="$?"||t.data==="$~"}function Kd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Cw(t,a){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||l.readyState!=="loading")a();else{var o=function(){a(),l.removeEventListener("DOMContentLoaded",o)};l.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Xn(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var Wd=null;function gv(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(a===0)return Xn(t.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}t=t.nextSibling}return null}function vv(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return t;a--}else l!=="/$"&&l!=="/&"||a++}t=t.previousSibling}return null}function yv(t,a,l){switch(a=No(l),t){case"html":if(t=a.documentElement,!t)throw Error(i(452));return t;case"head":if(t=a.head,!t)throw Error(i(453));return t;case"body":if(t=a.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Fl(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);fa(t)}var Qn=new Map,bv=new Set;function Mo(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ua=Q.d;Q.d={f:Dw,r:Rw,D:kw,C:Aw,L:Ow,m:zw,X:Iw,S:Pw,M:Bw};function Dw(){var t=Ua.f(),a=yo();return t||a}function Rw(t){var a=Xa(t);a!==null&&a.tag===5&&a.type==="form"?Pp(a):Ua.r(t)}var Oi=typeof document>"u"?null:document;function xv(t,a,l){var o=Oi;if(o&&typeof a=="string"&&a){var f=Zn(a);f='link[rel="'+t+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),bv.has(f)||(bv.add(f),t={rel:t,crossOrigin:l,href:a},o.querySelector(f)===null&&(a=o.createElement("link"),hn(a,"link",t),Bt(a),o.head.appendChild(a)))}}function kw(t){Ua.D(t),xv("dns-prefetch",t,null)}function Aw(t,a){Ua.C(t,a),xv("preconnect",t,a)}function Ow(t,a,l){Ua.L(t,a,l);var o=Oi;if(o&&t&&a){var f='link[rel="preload"][as="'+Zn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+Zn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+Zn(l.imageSizes)+'"]')):f+='[href="'+Zn(t)+'"]';var g=f;switch(a){case"style":g=zi(t);break;case"script":g=Pi(t)}Qn.has(g)||(t=v({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:t,as:a},l),Qn.set(g,t),o.querySelector(f)!==null||a==="style"&&o.querySelector(Gl(g))||a==="script"&&o.querySelector(Yl(g))||(a=o.createElement("link"),hn(a,"link",t),Bt(a),o.head.appendChild(a)))}}function zw(t,a){Ua.m(t,a);var l=Oi;if(l&&t){var o=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+Zn(o)+'"][href="'+Zn(t)+'"]',g=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Pi(t)}if(!Qn.has(g)&&(t=v({rel:"modulepreload",href:t},a),Qn.set(g,t),l.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Yl(g)))return}o=l.createElement("link"),hn(o,"link",t),Bt(o),l.head.appendChild(o)}}}function Pw(t,a,l){Ua.S(t,a,l);var o=Oi;if(o&&t){var f=It(o).hoistableStyles,g=zi(t);a=a||"default";var x=f.get(g);if(!x){var E={loading:0,preload:null};if(x=o.querySelector(Gl(g)))E.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":a},l),(l=Qn.get(g))&&Xd(t,l);var O=x=o.createElement("link");Bt(O),hn(O,"link",t),O._p=new Promise(function(F,J){O.onload=F,O.onerror=J}),O.addEventListener("load",function(){E.loading|=1}),O.addEventListener("error",function(){E.loading|=2}),E.loading|=4,jo(x,a,o)}x={type:"stylesheet",instance:x,count:1,state:E},f.set(g,x)}}}function Iw(t,a){Ua.X(t,a);var l=Oi;if(l&&t){var o=It(l).hoistableScripts,f=Pi(t),g=o.get(f);g||(g=l.querySelector(Yl(f)),g||(t=v({src:t,async:!0},a),(a=Qn.get(f))&&Qd(t,a),g=l.createElement("script"),Bt(g),hn(g,"link",t),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(f,g))}}function Bw(t,a){Ua.M(t,a);var l=Oi;if(l&&t){var o=It(l).hoistableScripts,f=Pi(t),g=o.get(f);g||(g=l.querySelector(Yl(f)),g||(t=v({src:t,async:!0,type:"module"},a),(a=Qn.get(f))&&Qd(t,a),g=l.createElement("script"),Bt(g),hn(g,"link",t),l.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(f,g))}}function Sv(t,a,l,o){var f=(f=le.current)?Mo(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=zi(l.href),l=It(f).hoistableStyles,o=l.get(a),o||(o={type:"style",instance:null,count:0,state:null},l.set(a,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=zi(l.href);var g=It(f).hoistableStyles,x=g.get(t);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(t,x),(g=f.querySelector(Gl(t)))&&!g._p&&(x.instance=g,x.state.loading=5),Qn.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Qn.set(t,l),g||Lw(f,t,l,x.state))),a&&o===null)throw Error(i(528,""));return x}if(a&&o!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Pi(l),l=It(f).hoistableScripts,o=l.get(a),o||(o={type:"script",instance:null,count:0,state:null},l.set(a,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function zi(t){return'href="'+Zn(t)+'"'}function Gl(t){return'link[rel="stylesheet"]['+t+"]"}function wv(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function Lw(t,a,l,o){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=t.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),hn(a,"link",l),Bt(a),t.head.appendChild(a))}function Pi(t){return'[src="'+Zn(t)+'"]'}function Yl(t){return"script[async]"+t}function _v(t,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var o=t.querySelector('style[data-href~="'+Zn(l.href)+'"]');if(o)return a.instance=o,Bt(o),o;var f=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Bt(o),hn(o,"style",f),jo(o,l.precedence,t),a.instance=o;case"stylesheet":f=zi(l.href);var g=t.querySelector(Gl(f));if(g)return a.state.loading|=4,a.instance=g,Bt(g),g;o=wv(l),(f=Qn.get(f))&&Xd(o,f),g=(t.ownerDocument||t).createElement("link"),Bt(g);var x=g;return x._p=new Promise(function(E,O){x.onload=E,x.onerror=O}),hn(g,"link",o),a.state.loading|=4,jo(g,l.precedence,t),a.instance=g;case"script":return g=Pi(l.src),(f=t.querySelector(Yl(g)))?(a.instance=f,Bt(f),f):(o=l,(f=Qn.get(g))&&(o=v({},l),Qd(o,f)),t=t.ownerDocument||t,f=t.createElement("script"),Bt(f),hn(f,"link",o),t.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(o=a.instance,a.state.loading|=4,jo(o,l.precedence,t));return a.instance}function jo(t,a,l){for(var o=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,g=f,x=0;x<o.length;x++){var E=o[x];if(E.dataset.precedence===a)g=E;else if(g!==f)break}g?g.parentNode.insertBefore(t,g.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(t,a.firstChild))}function Xd(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Qd(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var Co=null;function Ev(t,a,l){if(Co===null){var o=new Map,f=Co=new Map;f.set(l,o)}else f=Co,o=f.get(l),o||(o=new Map,f.set(l,o));if(o.has(t))return o;for(o.set(t,null),l=l.getElementsByTagName(t),f=0;f<l.length;f++){var g=l[f];if(!(g[ta]||g[Te]||t==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var x=g.getAttribute(a)||"";x=t+x;var E=o.get(x);E?E.push(g):o.set(x,[g])}}return o}function Tv(t,a,l){t=t.ownerDocument||t,t.head.insertBefore(l,a==="title"?t.querySelector("head > title"):null)}function qw(t,a,l){if(l===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Nv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Uw(t,a,l,o){if(l.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=zi(o.href),g=a.querySelector(Gl(f));if(g){a=g._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=Do.bind(t),a.then(t,t)),l.state.loading|=4,l.instance=g,Bt(g);return}g=a.ownerDocument||a,o=wv(o),(f=Qn.get(f))&&Xd(o,f),g=g.createElement("link"),Bt(g);var x=g;x._p=new Promise(function(E,O){x.onload=E,x.onerror=O}),hn(g,"link",o),l.instance=g}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=Do.bind(t),a.addEventListener("load",l),a.addEventListener("error",l))}}var Jd=0;function $w(t,a){return t.stylesheets&&t.count===0&&ko(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var o=setTimeout(function(){if(t.stylesheets&&ko(t,t.stylesheets),t.unsuspend){var g=t.unsuspend;t.unsuspend=null,g()}},6e4+a);0<t.imgBytes&&Jd===0&&(Jd=62500*ww());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&ko(t,t.stylesheets),t.unsuspend)){var g=t.unsuspend;t.unsuspend=null,g()}},(t.imgBytes>Jd?50:800)+a);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function Do(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ko(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Ro=null;function ko(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Ro=new Map,a.forEach(Hw,t),Ro=null,Do.call(t))}function Hw(t,a){if(!(a.state.loading&4)){var l=Ro.get(t);if(l)var o=l.get(null);else{l=new Map,Ro.set(t,l);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var x=f[g];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),o=x)}o&&l.set(null,o)}f=a.instance,x=f.getAttribute("data-precedence"),g=l.get(x)||o,g===o&&l.set(null,f),l.set(x,f),this.count++,o=Do.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),g?g.parentNode.insertBefore(f,g.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),a.state.loading|=4}}var Vl={$$typeof:P,Provider:null,Consumer:null,_currentValue:ee,_currentValue2:ee,_threadCount:0};function Zw(t,a,l,o,f,g,x,E,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=on(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=on(0),this.hiddenUpdates=on(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Mv(t,a,l,o,f,g,x,E,O,F,J,ie){return t=new Zw(t,a,l,x,O,F,J,ie,E),a=1,g===!0&&(a|=24),g=An(3,null,null,a),t.current=g,g.stateNode=t,a=ku(),a.refCount++,t.pooledCache=a,a.refCount++,g.memoizedState={element:o,isDehydrated:l,cache:a},Pu(g),t}function jv(t){return t?(t=hi,t):hi}function Cv(t,a,l,o,f,g){f=jv(f),o.context===null?o.context=f:o.pendingContext=f,o=ss(a),o.payload={element:l},g=g===void 0?null:g,g!==null&&(o.callback=g),l=is(t,o,a),l!==null&&(jn(l,t,a),Nl(l,t,a))}function Dv(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<a?l:a}}function ef(t,a){Dv(t,a),(t=t.alternate)&&Dv(t,a)}function Rv(t){if(t.tag===13||t.tag===31){var a=Is(t,67108864);a!==null&&jn(a,t,67108864),ef(t,67108864)}}function kv(t){if(t.tag===13||t.tag===31){var a=Bn();a=he(a);var l=Is(t,a);l!==null&&jn(l,t,a),ef(t,a)}}var Ao=!0;function Fw(t,a,l,o){var f=L.T;L.T=null;var g=Q.p;try{Q.p=2,tf(t,a,l,o)}finally{Q.p=g,L.T=f}}function Gw(t,a,l,o){var f=L.T;L.T=null;var g=Q.p;try{Q.p=8,tf(t,a,l,o)}finally{Q.p=g,L.T=f}}function tf(t,a,l,o){if(Ao){var f=nf(o);if(f===null)Ud(t,a,o,Oo,l),Ov(t,o);else if(Vw(f,t,a,l,o))o.stopPropagation();else if(Ov(t,o),a&4&&-1<Yw.indexOf(t)){for(;f!==null;){var g=Xa(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var x=jt(g.pendingLanes);if(x!==0){var E=g;for(E.pendingLanes|=2,E.entangledLanes|=2;x;){var O=1<<31-St(x);E.entanglements[1]|=O,x&=~O}va(g),(st&6)===0&&(go=Le()+500,$l(0))}}break;case 31:case 13:E=Is(g,2),E!==null&&jn(E,g,2),yo(),ef(g,2)}if(g=nf(o),g===null&&Ud(t,a,o,Oo,l),g===f)break;f=g}f!==null&&o.stopPropagation()}else Ud(t,a,o,null,l)}}function nf(t){return t=su(t),af(t)}var Oo=null;function af(t){if(Oo=null,t=Ne(t),t!==null){var a=c(t);if(a===null)t=null;else{var l=a.tag;if(l===13){if(t=u(a),t!==null)return t;t=null}else if(l===31){if(t=d(a),t!==null)return t;t=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return Oo=t,null}function Av(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qt()){case pt:return 2;case Ut:return 8;case We:case V:return 32;case pe:return 268435456;default:return 32}default:return 32}}var sf=!1,gs=null,vs=null,ys=null,Kl=new Map,Wl=new Map,bs=[],Yw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ov(t,a){switch(t){case"focusin":case"focusout":gs=null;break;case"dragenter":case"dragleave":vs=null;break;case"mouseover":case"mouseout":ys=null;break;case"pointerover":case"pointerout":Kl.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wl.delete(a.pointerId)}}function Xl(t,a,l,o,f,g){return t===null||t.nativeEvent!==g?(t={blockedOn:a,domEventName:l,eventSystemFlags:o,nativeEvent:g,targetContainers:[f]},a!==null&&(a=Xa(a),a!==null&&Rv(a)),t):(t.eventSystemFlags|=o,a=t.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),t)}function Vw(t,a,l,o,f){switch(a){case"focusin":return gs=Xl(gs,t,a,l,o,f),!0;case"dragenter":return vs=Xl(vs,t,a,l,o,f),!0;case"mouseover":return ys=Xl(ys,t,a,l,o,f),!0;case"pointerover":var g=f.pointerId;return Kl.set(g,Xl(Kl.get(g)||null,t,a,l,o,f)),!0;case"gotpointercapture":return g=f.pointerId,Wl.set(g,Xl(Wl.get(g)||null,t,a,l,o,f)),!0}return!1}function zv(t){var a=Ne(t.target);if(a!==null){var l=c(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){t.blockedOn=a,Qe(t.priority,function(){kv(l)});return}}else if(a===31){if(a=d(l),a!==null){t.blockedOn=a,Qe(t.priority,function(){kv(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zo(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var l=nf(t.nativeEvent);if(l===null){l=t.nativeEvent;var o=new l.constructor(l.type,l);au=o,l.target.dispatchEvent(o),au=null}else return a=Xa(l),a!==null&&Rv(a),t.blockedOn=l,!1;a.shift()}return!0}function Pv(t,a,l){zo(t)&&l.delete(a)}function Kw(){sf=!1,gs!==null&&zo(gs)&&(gs=null),vs!==null&&zo(vs)&&(vs=null),ys!==null&&zo(ys)&&(ys=null),Kl.forEach(Pv),Wl.forEach(Pv)}function Po(t,a){t.blockedOn===a&&(t.blockedOn=null,sf||(sf=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Kw)))}var Io=null;function Iv(t){Io!==t&&(Io=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Io===t&&(Io=null);for(var a=0;a<t.length;a+=3){var l=t[a],o=t[a+1],f=t[a+2];if(typeof o!="function"){if(af(o||l)===null)continue;break}var g=Xa(l);g!==null&&(t.splice(a,3),a-=3,nd(g,{pending:!0,data:f,method:l.method,action:o},o,f))}}))}function Ii(t){function a(O){return Po(O,t)}gs!==null&&Po(gs,t),vs!==null&&Po(vs,t),ys!==null&&Po(ys,t),Kl.forEach(a),Wl.forEach(a);for(var l=0;l<bs.length;l++){var o=bs[l];o.blockedOn===t&&(o.blockedOn=null)}for(;0<bs.length&&(l=bs[0],l.blockedOn===null);)zv(l),l.blockedOn===null&&bs.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(o=0;o<l.length;o+=3){var f=l[o],g=l[o+1],x=f[Ae]||null;if(typeof g=="function")x||Iv(l);else if(x){var E=null;if(g&&g.hasAttribute("formAction")){if(f=g,x=g[Ae]||null)E=x.formAction;else if(af(f)!==null)continue}else E=x.action;typeof E=="function"?l[o+1]=E:(l.splice(o,3),o-=3),Iv(l)}}}function Bv(){function t(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function a(){f!==null&&(f(),f=null),o||setTimeout(l,20)}function l(){if(!o&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),f!==null&&(f(),f=null)}}}function lf(t){this._internalRoot=t}Bo.prototype.render=lf.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,o=Bn();Cv(l,o,t,a,null,null)},Bo.prototype.unmount=lf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Cv(t.current,2,null,t,null,null),yo(),a[Be]=null}};function Bo(t){this._internalRoot=t}Bo.prototype.unstable_scheduleHydration=function(t){if(t){var a=je();t={blockedOn:null,target:t,priority:a};for(var l=0;l<bs.length&&a!==0&&a<bs[l].priority;l++);bs.splice(l,0,t),l===0&&zv(t)}};var Lv=n.version;if(Lv!=="19.2.4")throw Error(i(527,Lv,"19.2.4"));Q.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=p(a),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var Ww={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lo.isDisabled&&Lo.supportsFiber)try{Dt=Lo.inject(Ww),ct=Lo}catch{}}return Jl.createRoot=function(t,a){if(!r(t))throw Error(i(299));var l=!1,o="",f=Gp,g=Yp,x=Vp;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Mv(t,1,!1,null,null,l,o,null,f,g,x,Bv),t[Be]=a.current,qd(t),new lf(a)},Jl.hydrateRoot=function(t,a,l){if(!r(t))throw Error(i(299));var o=!1,f="",g=Gp,x=Yp,E=Vp,O=null;return l!=null&&(l.unstable_strictMode===!0&&(o=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(g=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(E=l.onRecoverableError),l.formState!==void 0&&(O=l.formState)),a=Mv(t,1,!0,a,l??null,o,f,O,g,x,E,Bv),a.context=jv(null),l=a.current,o=Bn(),o=he(o),f=ss(o),f.callback=null,is(l,f,o),l=o,a.current.lanes=l,bn(a,l),va(a),t[Be]=a.current,qd(t),new Bo(a)},Jl.version="19.2.4",Jl}var Kv;function l_(){if(Kv)return cf.exports;Kv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),cf.exports=i_(),cf.exports}var r_=l_(),Fa=G0();const o_=xh(Fa),Dc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function sl(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function wh(e){return"nodeType"in e}function Dn(e){var n,s;return e?sl(e)?e:wh(e)&&(n=(s=e.ownerDocument)==null?void 0:s.defaultView)!=null?n:window:window}function _h(e){const{Document:n}=Dn(e);return e instanceof n}function xr(e){return sl(e)?!1:e instanceof Dn(e).HTMLElement}function Y0(e){return e instanceof Dn(e).SVGElement}function il(e){return e?sl(e)?e.document:wh(e)?_h(e)?e:xr(e)||Y0(e)?e.ownerDocument:document:document:document}const Ms=Dc?w.useLayoutEffect:w.useEffect;function Eh(e){const n=w.useRef(e);return Ms(()=>{n.current=e}),w.useCallback(function(){for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return n.current==null?void 0:n.current(...i)},[])}function c_(){const e=w.useRef(null),n=w.useCallback((i,r)=>{e.current=setInterval(i,r)},[]),s=w.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,s]}function ur(e,n){n===void 0&&(n=[e]);const s=w.useRef(e);return Ms(()=>{s.current!==e&&(s.current=e)},n),s}function Sr(e,n){const s=w.useRef();return w.useMemo(()=>{const i=e(s.current);return s.current=i,i},[...n])}function cc(e){const n=Eh(e),s=w.useRef(null),i=w.useCallback(r=>{r!==s.current&&n?.(r,s.current),s.current=r},[]);return[s,i]}function Ff(e){const n=w.useRef();return w.useEffect(()=>{n.current=e},[e]),n.current}let hf={};function Rc(e,n){return w.useMemo(()=>{if(n)return n;const s=hf[e]==null?0:hf[e]+1;return hf[e]=s,e+"-"+s},[e,n])}function V0(e){return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),r=1;r<s;r++)i[r-1]=arguments[r];return i.reduce((c,u)=>{const d=Object.entries(u);for(const[m,p]of d){const y=c[m];y!=null&&(c[m]=y+e*p)}return c},{...n})}}const Vi=V0(1),dr=V0(-1);function u_(e){return"clientX"in e&&"clientY"in e}function K0(e){if(!e)return!1;const{KeyboardEvent:n}=Dn(e.target);return n&&e instanceof n}function d_(e){if(!e)return!1;const{TouchEvent:n}=Dn(e.target);return n&&e instanceof n}function Gf(e){if(d_(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:s}=e.touches[0];return{x:n,y:s}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:s}=e.changedTouches[0];return{x:n,y:s}}}return u_(e)?{x:e.clientX,y:e.clientY}:null}const uc=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:s}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(s?Math.round(s):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:s}=e;return"scaleX("+n+") scaleY("+s+")"}},Transform:{toString(e){if(e)return[uc.Translate.toString(e),uc.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:s,easing:i}=e;return n+" "+s+"ms "+i}}}),Wv="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function f_(e){return e.matches(Wv)?e:e.querySelector(Wv)}const h_={display:"none"};function m_(e){let{id:n,value:s}=e;return sn.createElement("div",{id:n,style:h_},s)}function p_(e){let{id:n,announcement:s,ariaLiveType:i="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return sn.createElement("div",{id:n,style:r,role:"status","aria-live":i,"aria-atomic":!0},s)}function g_(){const[e,n]=w.useState("");return{announce:w.useCallback(i=>{i!=null&&n(i)},[]),announcement:e}}const W0=w.createContext(null);function v_(e){const n=w.useContext(W0);w.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function y_(){const[e]=w.useState(()=>new Set),n=w.useCallback(i=>(e.add(i),()=>e.delete(i)),[e]);return[w.useCallback(i=>{let{type:r,event:c}=i;e.forEach(u=>{var d;return(d=u[r])==null?void 0:d.call(u,c)})},[e]),n]}const b_={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},x_={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was moved over droppable area "+s.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was dropped over droppable area "+s.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function S_(e){let{announcements:n=x_,container:s,hiddenTextDescribedById:i,screenReaderInstructions:r=b_}=e;const{announce:c,announcement:u}=g_(),d=Rc("DndLiveRegion"),[m,p]=w.useState(!1);if(w.useEffect(()=>{p(!0)},[]),v_(w.useMemo(()=>({onDragStart(v){let{active:b}=v;c(n.onDragStart({active:b}))},onDragMove(v){let{active:b,over:S}=v;n.onDragMove&&c(n.onDragMove({active:b,over:S}))},onDragOver(v){let{active:b,over:S}=v;c(n.onDragOver({active:b,over:S}))},onDragEnd(v){let{active:b,over:S}=v;c(n.onDragEnd({active:b,over:S}))},onDragCancel(v){let{active:b,over:S}=v;c(n.onDragCancel({active:b,over:S}))}}),[c,n])),!m)return null;const y=sn.createElement(sn.Fragment,null,sn.createElement(m_,{id:i,value:r.draggable}),sn.createElement(p_,{id:d,announcement:u}));return s?Fa.createPortal(y,s):y}var tn;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(tn||(tn={}));function dc(){}function Xv(e,n){return w.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function w_(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return w.useMemo(()=>[...n].filter(i=>i!=null),[...n])}const ca=Object.freeze({x:0,y:0});function X0(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Q0(e,n){let{data:{value:s}}=e,{data:{value:i}}=n;return s-i}function __(e,n){let{data:{value:s}}=e,{data:{value:i}}=n;return i-s}function Qv(e){let{left:n,top:s,height:i,width:r}=e;return[{x:n,y:s},{x:n+r,y:s},{x:n,y:s+i},{x:n+r,y:s+i}]}function J0(e,n){if(!e||e.length===0)return null;const[s]=e;return s[n]}function Jv(e,n,s){return n===void 0&&(n=e.left),s===void 0&&(s=e.top),{x:n+e.width*.5,y:s+e.height*.5}}const E_=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:i}=e;const r=Jv(n,n.left,n.top),c=[];for(const u of i){const{id:d}=u,m=s.get(d);if(m){const p=X0(Jv(m),r);c.push({id:d,data:{droppableContainer:u,value:p}})}}return c.sort(Q0)},T_=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:i}=e;const r=Qv(n),c=[];for(const u of i){const{id:d}=u,m=s.get(d);if(m){const p=Qv(m),y=r.reduce((b,S,_)=>b+X0(p[_],S),0),v=Number((y/4).toFixed(4));c.push({id:d,data:{droppableContainer:u,value:v}})}}return c.sort(Q0)};function N_(e,n){const s=Math.max(n.top,e.top),i=Math.max(n.left,e.left),r=Math.min(n.left+n.width,e.left+e.width),c=Math.min(n.top+n.height,e.top+e.height),u=r-i,d=c-s;if(i<r&&s<c){const m=n.width*n.height,p=e.width*e.height,y=u*d,v=y/(m+p-y);return Number(v.toFixed(4))}return 0}const M_=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:i}=e;const r=[];for(const c of i){const{id:u}=c,d=s.get(u);if(d){const m=N_(d,n);m>0&&r.push({id:u,data:{droppableContainer:c,value:m}})}}return r.sort(__)};function j_(e,n,s){return{...e,scaleX:n&&s?n.width/s.width:1,scaleY:n&&s?n.height/s.height:1}}function eb(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:ca}function C_(e){return function(s){for(var i=arguments.length,r=new Array(i>1?i-1:0),c=1;c<i;c++)r[c-1]=arguments[c];return r.reduce((u,d)=>({...u,top:u.top+e*d.y,bottom:u.bottom+e*d.y,left:u.left+e*d.x,right:u.right+e*d.x}),{...s})}}const D_=C_(1);function R_(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function k_(e,n,s){const i=R_(n);if(!i)return e;const{scaleX:r,scaleY:c,x:u,y:d}=i,m=e.left-u-(1-r)*parseFloat(s),p=e.top-d-(1-c)*parseFloat(s.slice(s.indexOf(" ")+1)),y=r?e.width/r:e.width,v=c?e.height/c:e.height;return{width:y,height:v,top:p,right:m+y,bottom:p+v,left:m}}const A_={ignoreTransform:!1};function wr(e,n){n===void 0&&(n=A_);let s=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:p,transformOrigin:y}=Dn(e).getComputedStyle(e);p&&(s=k_(s,p,y))}const{top:i,left:r,width:c,height:u,bottom:d,right:m}=s;return{top:i,left:r,width:c,height:u,bottom:d,right:m}}function ey(e){return wr(e,{ignoreTransform:!0})}function O_(e){const n=e.innerWidth,s=e.innerHeight;return{top:0,left:0,right:n,bottom:s,width:n,height:s}}function z_(e,n){return n===void 0&&(n=Dn(e).getComputedStyle(e)),n.position==="fixed"}function P_(e,n){n===void 0&&(n=Dn(e).getComputedStyle(e));const s=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const c=n[r];return typeof c=="string"?s.test(c):!1})}function kc(e,n){const s=[];function i(r){if(n!=null&&s.length>=n||!r)return s;if(_h(r)&&r.scrollingElement!=null&&!s.includes(r.scrollingElement))return s.push(r.scrollingElement),s;if(!xr(r)||Y0(r)||s.includes(r))return s;const c=Dn(e).getComputedStyle(r);return r!==e&&P_(r,c)&&s.push(r),z_(r,c)?s:i(r.parentNode)}return e?i(e):s}function tb(e){const[n]=kc(e,1);return n??null}function mf(e){return!Dc||!e?null:sl(e)?e:wh(e)?_h(e)||e===il(e).scrollingElement?window:xr(e)?e:null:null}function nb(e){return sl(e)?e.scrollX:e.scrollLeft}function ab(e){return sl(e)?e.scrollY:e.scrollTop}function Yf(e){return{x:nb(e),y:ab(e)}}var an;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(an||(an={}));function sb(e){return!Dc||!e?!1:e===document.scrollingElement}function ib(e){const n={x:0,y:0},s=sb(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-s.width,y:e.scrollHeight-s.height},r=e.scrollTop<=n.y,c=e.scrollLeft<=n.x,u=e.scrollTop>=i.y,d=e.scrollLeft>=i.x;return{isTop:r,isLeft:c,isBottom:u,isRight:d,maxScroll:i,minScroll:n}}const I_={x:.2,y:.2};function B_(e,n,s,i,r){let{top:c,left:u,right:d,bottom:m}=s;i===void 0&&(i=10),r===void 0&&(r=I_);const{isTop:p,isBottom:y,isLeft:v,isRight:b}=ib(e),S={x:0,y:0},_={x:0,y:0},T={height:n.height*r.y,width:n.width*r.x};return!p&&c<=n.top+T.height?(S.y=an.Backward,_.y=i*Math.abs((n.top+T.height-c)/T.height)):!y&&m>=n.bottom-T.height&&(S.y=an.Forward,_.y=i*Math.abs((n.bottom-T.height-m)/T.height)),!b&&d>=n.right-T.width?(S.x=an.Forward,_.x=i*Math.abs((n.right-T.width-d)/T.width)):!v&&u<=n.left+T.width&&(S.x=an.Backward,_.x=i*Math.abs((n.left+T.width-u)/T.width)),{direction:S,speed:_}}function L_(e){if(e===document.scrollingElement){const{innerWidth:c,innerHeight:u}=window;return{top:0,left:0,right:c,bottom:u,width:c,height:u}}const{top:n,left:s,right:i,bottom:r}=e.getBoundingClientRect();return{top:n,left:s,right:i,bottom:r,width:e.clientWidth,height:e.clientHeight}}function lb(e){return e.reduce((n,s)=>Vi(n,Yf(s)),ca)}function q_(e){return e.reduce((n,s)=>n+nb(s),0)}function U_(e){return e.reduce((n,s)=>n+ab(s),0)}function $_(e,n){if(n===void 0&&(n=wr),!e)return;const{top:s,left:i,bottom:r,right:c}=n(e);tb(e)&&(r<=0||c<=0||s>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const H_=[["x",["left","right"],q_],["y",["top","bottom"],U_]];class Th{constructor(n,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=kc(s),r=lb(i);this.rect={...n},this.width=n.width,this.height=n.height;for(const[c,u,d]of H_)for(const m of u)Object.defineProperty(this,m,{get:()=>{const p=d(i),y=r[c]-p;return this.rect[m]+y},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ir{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(s=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...s)})},this.target=n}add(n,s,i){var r;(r=this.target)==null||r.addEventListener(n,s,i),this.listeners.push([n,s,i])}}function Z_(e){const{EventTarget:n}=Dn(e);return e instanceof n?e:il(e)}function pf(e,n){const s=Math.abs(e.x),i=Math.abs(e.y);return typeof n=="number"?Math.sqrt(s**2+i**2)>n:"x"in n&&"y"in n?s>n.x&&i>n.y:"x"in n?s>n.x:"y"in n?i>n.y:!1}var Jn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Jn||(Jn={}));function ty(e){e.preventDefault()}function F_(e){e.stopPropagation()}var Ke;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Ke||(Ke={}));const rb={start:[Ke.Space,Ke.Enter],cancel:[Ke.Esc],end:[Ke.Space,Ke.Enter,Ke.Tab]},G_=(e,n)=>{let{currentCoordinates:s}=n;switch(e.code){case Ke.Right:return{...s,x:s.x+25};case Ke.Left:return{...s,x:s.x-25};case Ke.Down:return{...s,y:s.y+25};case Ke.Up:return{...s,y:s.y-25}}};class Nh{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:s}}=n;this.props=n,this.listeners=new ir(il(s)),this.windowListeners=new ir(Dn(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Jn.Resize,this.handleCancel),this.windowListeners.add(Jn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Jn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:s}=this.props,i=n.node.current;i&&$_(i),s(ca)}handleKeyDown(n){if(K0(n)){const{active:s,context:i,options:r}=this.props,{keyboardCodes:c=rb,coordinateGetter:u=G_,scrollBehavior:d="smooth"}=r,{code:m}=n;if(c.end.includes(m)){this.handleEnd(n);return}if(c.cancel.includes(m)){this.handleCancel(n);return}const{collisionRect:p}=i.current,y=p?{x:p.left,y:p.top}:ca;this.referenceCoordinates||(this.referenceCoordinates=y);const v=u(n,{active:s,context:i.current,currentCoordinates:y});if(v){const b=dr(v,y),S={x:0,y:0},{scrollableAncestors:_}=i.current;for(const T of _){const j=n.code,{isTop:k,isRight:R,isLeft:P,isBottom:B,maxScroll:q,minScroll:M}=ib(T),C=L_(T),D={x:Math.min(j===Ke.Right?C.right-C.width/2:C.right,Math.max(j===Ke.Right?C.left:C.left+C.width/2,v.x)),y:Math.min(j===Ke.Down?C.bottom-C.height/2:C.bottom,Math.max(j===Ke.Down?C.top:C.top+C.height/2,v.y))},Z=j===Ke.Right&&!R||j===Ke.Left&&!P,re=j===Ke.Down&&!B||j===Ke.Up&&!k;if(Z&&D.x!==v.x){const fe=T.scrollLeft+b.x,ae=j===Ke.Right&&fe<=q.x||j===Ke.Left&&fe>=M.x;if(ae&&!b.y){T.scrollTo({left:fe,behavior:d});return}ae?S.x=T.scrollLeft-fe:S.x=j===Ke.Right?T.scrollLeft-q.x:T.scrollLeft-M.x,S.x&&T.scrollBy({left:-S.x,behavior:d});break}else if(re&&D.y!==v.y){const fe=T.scrollTop+b.y,ae=j===Ke.Down&&fe<=q.y||j===Ke.Up&&fe>=M.y;if(ae&&!b.x){T.scrollTo({top:fe,behavior:d});return}ae?S.y=T.scrollTop-fe:S.y=j===Ke.Down?T.scrollTop-q.y:T.scrollTop-M.y,S.y&&T.scrollBy({top:-S.y,behavior:d});break}}this.handleMove(n,Vi(dr(v,this.referenceCoordinates),S))}}}handleMove(n,s){const{onMove:i}=this.props;n.preventDefault(),i(s)}handleEnd(n){const{onEnd:s}=this.props;n.preventDefault(),this.detach(),s()}handleCancel(n){const{onCancel:s}=this.props;n.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Nh.activators=[{eventName:"onKeyDown",handler:(e,n,s)=>{let{keyboardCodes:i=rb,onActivation:r}=n,{active:c}=s;const{code:u}=e.nativeEvent;if(i.start.includes(u)){const d=c.activatorNode.current;return d&&e.target!==d?!1:(e.preventDefault(),r?.({event:e.nativeEvent}),!0)}return!1}}];function ny(e){return!!(e&&"distance"in e)}function ay(e){return!!(e&&"delay"in e)}class Mh{constructor(n,s,i){var r;i===void 0&&(i=Z_(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=s;const{event:c}=n,{target:u}=c;this.props=n,this.events=s,this.document=il(u),this.documentListeners=new ir(this.document),this.listeners=new ir(i),this.windowListeners=new ir(Dn(u)),this.initialCoordinates=(r=Gf(c))!=null?r:ca,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:s,bypassActivationConstraint:i}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(Jn.Resize,this.handleCancel),this.windowListeners.add(Jn.DragStart,ty),this.windowListeners.add(Jn.VisibilityChange,this.handleCancel),this.windowListeners.add(Jn.ContextMenu,ty),this.documentListeners.add(Jn.Keydown,this.handleKeydown),s){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ay(s)){this.timeoutId=setTimeout(this.handleStart,s.delay),this.handlePending(s);return}if(ny(s)){this.handlePending(s);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,s){const{active:i,onPending:r}=this.props;r(i,n,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:n}=this,{onStart:s}=this.props;n&&(this.activated=!0,this.documentListeners.add(Jn.Click,F_,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Jn.SelectionChange,this.removeTextSelection),s(n))}handleMove(n){var s;const{activated:i,initialCoordinates:r,props:c}=this,{onMove:u,options:{activationConstraint:d}}=c;if(!r)return;const m=(s=Gf(n))!=null?s:ca,p=dr(r,m);if(!i&&d){if(ny(d)){if(d.tolerance!=null&&pf(p,d.tolerance))return this.handleCancel();if(pf(p,d.distance))return this.handleStart()}if(ay(d)&&pf(p,d.tolerance))return this.handleCancel();this.handlePending(d,p);return}n.cancelable&&n.preventDefault(),u(m)}handleEnd(){const{onAbort:n,onEnd:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleCancel(){const{onAbort:n,onCancel:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleKeydown(n){n.code===Ke.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const Y_={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class jh extends Mh{constructor(n){const{event:s}=n,i=il(s.target);super(n,Y_,i)}}jh.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:i}=n;return!s.isPrimary||s.button!==0?!1:(i?.({event:s}),!0)}}];const V_={move:{name:"mousemove"},end:{name:"mouseup"}};var Vf;(function(e){e[e.RightClick=2]="RightClick"})(Vf||(Vf={}));class K_ extends Mh{constructor(n){super(n,V_,il(n.event.target))}}K_.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:i}=n;return s.button===Vf.RightClick?!1:(i?.({event:s}),!0)}}];const gf={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class W_ extends Mh{constructor(n){super(n,gf)}static setup(){return window.addEventListener(gf.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(gf.move.name,n)};function n(){}}}W_.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:i}=n;const{touches:r}=s;return r.length>1?!1:(i?.({event:s}),!0)}}];var lr;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(lr||(lr={}));var fc;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(fc||(fc={}));function X_(e){let{acceleration:n,activator:s=lr.Pointer,canScroll:i,draggingRect:r,enabled:c,interval:u=5,order:d=fc.TreeOrder,pointerCoordinates:m,scrollableAncestors:p,scrollableAncestorRects:y,delta:v,threshold:b}=e;const S=J_({delta:v,disabled:!c}),[_,T]=c_(),j=w.useRef({x:0,y:0}),k=w.useRef({x:0,y:0}),R=w.useMemo(()=>{switch(s){case lr.Pointer:return m?{top:m.y,bottom:m.y,left:m.x,right:m.x}:null;case lr.DraggableRect:return r}},[s,r,m]),P=w.useRef(null),B=w.useCallback(()=>{const M=P.current;if(!M)return;const C=j.current.x*k.current.x,D=j.current.y*k.current.y;M.scrollBy(C,D)},[]),q=w.useMemo(()=>d===fc.TreeOrder?[...p].reverse():p,[d,p]);w.useEffect(()=>{if(!c||!p.length||!R){T();return}for(const M of q){if(i?.(M)===!1)continue;const C=p.indexOf(M),D=y[C];if(!D)continue;const{direction:Z,speed:re}=B_(M,D,R,n,b);for(const fe of["x","y"])S[fe][Z[fe]]||(re[fe]=0,Z[fe]=0);if(re.x>0||re.y>0){T(),P.current=M,_(B,u),j.current=re,k.current=Z;return}}j.current={x:0,y:0},k.current={x:0,y:0},T()},[n,B,i,T,c,u,JSON.stringify(R),JSON.stringify(S),_,p,q,y,JSON.stringify(b)])}const Q_={x:{[an.Backward]:!1,[an.Forward]:!1},y:{[an.Backward]:!1,[an.Forward]:!1}};function J_(e){let{delta:n,disabled:s}=e;const i=Ff(n);return Sr(r=>{if(s||!i||!r)return Q_;const c={x:Math.sign(n.x-i.x),y:Math.sign(n.y-i.y)};return{x:{[an.Backward]:r.x[an.Backward]||c.x===-1,[an.Forward]:r.x[an.Forward]||c.x===1},y:{[an.Backward]:r.y[an.Backward]||c.y===-1,[an.Forward]:r.y[an.Forward]||c.y===1}}},[s,n,i])}function eE(e,n){const s=n!=null?e.get(n):void 0,i=s?s.node.current:null;return Sr(r=>{var c;return n==null?null:(c=i??r)!=null?c:null},[i,n])}function tE(e,n){return w.useMemo(()=>e.reduce((s,i)=>{const{sensor:r}=i,c=r.activators.map(u=>({eventName:u.eventName,handler:n(u.handler,i)}));return[...s,...c]},[]),[e,n])}var fr;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(fr||(fr={}));var Kf;(function(e){e.Optimized="optimized"})(Kf||(Kf={}));const sy=new Map;function nE(e,n){let{dragging:s,dependencies:i,config:r}=n;const[c,u]=w.useState(null),{frequency:d,measure:m,strategy:p}=r,y=w.useRef(e),v=j(),b=ur(v),S=w.useCallback(function(k){k===void 0&&(k=[]),!b.current&&u(R=>R===null?k:R.concat(k.filter(P=>!R.includes(P))))},[b]),_=w.useRef(null),T=Sr(k=>{if(v&&!s)return sy;if(!k||k===sy||y.current!==e||c!=null){const R=new Map;for(let P of e){if(!P)continue;if(c&&c.length>0&&!c.includes(P.id)&&P.rect.current){R.set(P.id,P.rect.current);continue}const B=P.node.current,q=B?new Th(m(B),B):null;P.rect.current=q,q&&R.set(P.id,q)}return R}return k},[e,c,s,v,m]);return w.useEffect(()=>{y.current=e},[e]),w.useEffect(()=>{v||S()},[s,v]),w.useEffect(()=>{c&&c.length>0&&u(null)},[JSON.stringify(c)]),w.useEffect(()=>{v||typeof d!="number"||_.current!==null||(_.current=setTimeout(()=>{S(),_.current=null},d))},[d,v,S,...i]),{droppableRects:T,measureDroppableContainers:S,measuringScheduled:c!=null};function j(){switch(p){case fr.Always:return!1;case fr.BeforeDragging:return s;default:return!s}}}function ob(e,n){return Sr(s=>e?s||(typeof n=="function"?n(e):e):null,[n,e])}function aE(e,n){return ob(e,n)}function sE(e){let{callback:n,disabled:s}=e;const i=Eh(n),r=w.useMemo(()=>{if(s||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(i)},[i,s]);return w.useEffect(()=>()=>r?.disconnect(),[r]),r}function Ac(e){let{callback:n,disabled:s}=e;const i=Eh(n),r=w.useMemo(()=>{if(s||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(i)},[s]);return w.useEffect(()=>()=>r?.disconnect(),[r]),r}function iE(e){return new Th(wr(e),e)}function iy(e,n,s){n===void 0&&(n=iE);const[i,r]=w.useState(null);function c(){r(m=>{if(!e)return null;if(e.isConnected===!1){var p;return(p=m??s)!=null?p:null}const y=n(e);return JSON.stringify(m)===JSON.stringify(y)?m:y})}const u=sE({callback(m){if(e)for(const p of m){const{type:y,target:v}=p;if(y==="childList"&&v instanceof HTMLElement&&v.contains(e)){c();break}}}}),d=Ac({callback:c});return Ms(()=>{c(),e?(d?.observe(e),u?.observe(document.body,{childList:!0,subtree:!0})):(d?.disconnect(),u?.disconnect())},[e]),i}function lE(e){const n=ob(e);return eb(e,n)}const ly=[];function rE(e){const n=w.useRef(e),s=Sr(i=>e?i&&i!==ly&&e&&n.current&&e.parentNode===n.current.parentNode?i:kc(e):ly,[e]);return w.useEffect(()=>{n.current=e},[e]),s}function oE(e){const[n,s]=w.useState(null),i=w.useRef(e),r=w.useCallback(c=>{const u=mf(c.target);u&&s(d=>d?(d.set(u,Yf(u)),new Map(d)):null)},[]);return w.useEffect(()=>{const c=i.current;if(e!==c){u(c);const d=e.map(m=>{const p=mf(m);return p?(p.addEventListener("scroll",r,{passive:!0}),[p,Yf(p)]):null}).filter(m=>m!=null);s(d.length?new Map(d):null),i.current=e}return()=>{u(e),u(c)};function u(d){d.forEach(m=>{const p=mf(m);p?.removeEventListener("scroll",r)})}},[r,e]),w.useMemo(()=>e.length?n?Array.from(n.values()).reduce((c,u)=>Vi(c,u),ca):lb(e):ca,[e,n])}function ry(e,n){n===void 0&&(n=[]);const s=w.useRef(null);return w.useEffect(()=>{s.current=null},n),w.useEffect(()=>{const i=e!==ca;i&&!s.current&&(s.current=e),!i&&s.current&&(s.current=null)},[e]),s.current?dr(e,s.current):ca}function cE(e){w.useEffect(()=>{if(!Dc)return;const n=e.map(s=>{let{sensor:i}=s;return i.setup==null?void 0:i.setup()});return()=>{for(const s of n)s?.()}},e.map(n=>{let{sensor:s}=n;return s}))}function uE(e,n){return w.useMemo(()=>e.reduce((s,i)=>{let{eventName:r,handler:c}=i;return s[r]=u=>{c(u,n)},s},{}),[e,n])}function cb(e){return w.useMemo(()=>e?O_(e):null,[e])}const oy=[];function dE(e,n){n===void 0&&(n=wr);const[s]=e,i=cb(s?Dn(s):null),[r,c]=w.useState(oy);function u(){c(()=>e.length?e.map(m=>sb(m)?i:new Th(n(m),m)):oy)}const d=Ac({callback:u});return Ms(()=>{d?.disconnect(),u(),e.forEach(m=>d?.observe(m))},[e]),r}function fE(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return xr(n)?n:e}function hE(e){let{measure:n}=e;const[s,i]=w.useState(null),r=w.useCallback(p=>{for(const{target:y}of p)if(xr(y)){i(v=>{const b=n(y);return v?{...v,width:b.width,height:b.height}:b});break}},[n]),c=Ac({callback:r}),u=w.useCallback(p=>{const y=fE(p);c?.disconnect(),y&&c?.observe(y),i(y?n(y):null)},[n,c]),[d,m]=cc(u);return w.useMemo(()=>({nodeRef:d,rect:s,setRef:m}),[s,d,m])}const mE=[{sensor:jh,options:{}},{sensor:Nh,options:{}}],pE={current:{}},sc={draggable:{measure:ey},droppable:{measure:ey,strategy:fr.WhileDragging,frequency:Kf.Optimized},dragOverlay:{measure:wr}};class rr extends Map{get(n){var s;return n!=null&&(s=super.get(n))!=null?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:s}=n;return!s})}getNodeFor(n){var s,i;return(s=(i=this.get(n))==null?void 0:i.node.current)!=null?s:void 0}}const gE={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new rr,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:dc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:sc,measureDroppableContainers:dc,windowRect:null,measuringScheduled:!1},vE={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:dc,draggableNodes:new Map,over:null,measureDroppableContainers:dc},Oc=w.createContext(vE),yE=w.createContext(gE);function bE(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new rr}}}function xE(e,n){switch(n.type){case tn.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case tn.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case tn.DragEnd:case tn.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case tn.RegisterDroppable:{const{element:s}=n,{id:i}=s,r=new rr(e.droppable.containers);return r.set(i,s),{...e,droppable:{...e.droppable,containers:r}}}case tn.SetDroppableDisabled:{const{id:s,key:i,disabled:r}=n,c=e.droppable.containers.get(s);if(!c||i!==c.key)return e;const u=new rr(e.droppable.containers);return u.set(s,{...c,disabled:r}),{...e,droppable:{...e.droppable,containers:u}}}case tn.UnregisterDroppable:{const{id:s,key:i}=n,r=e.droppable.containers.get(s);if(!r||i!==r.key)return e;const c=new rr(e.droppable.containers);return c.delete(s),{...e,droppable:{...e.droppable,containers:c}}}default:return e}}function SE(e){let{disabled:n}=e;const{active:s,activatorEvent:i,draggableNodes:r}=w.useContext(Oc),c=Ff(i),u=Ff(s?.id);return w.useEffect(()=>{if(!n&&!i&&c&&u!=null){if(!K0(c)||document.activeElement===c.target)return;const d=r.get(u);if(!d)return;const{activatorNode:m,node:p}=d;if(!m.current&&!p.current)return;requestAnimationFrame(()=>{for(const y of[m.current,p.current]){if(!y)continue;const v=f_(y);if(v){v.focus();break}}})}},[i,n,r,u,c]),null}function wE(e,n){let{transform:s,...i}=n;return e!=null&&e.length?e.reduce((r,c)=>c({transform:r,...i}),s):s}function _E(e){return w.useMemo(()=>({draggable:{...sc.draggable,...e?.draggable},droppable:{...sc.droppable,...e?.droppable},dragOverlay:{...sc.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function EE(e){let{activeNode:n,measure:s,initialRect:i,config:r=!0}=e;const c=w.useRef(!1),{x:u,y:d}=typeof r=="boolean"?{x:r,y:r}:r;Ms(()=>{if(!u&&!d||!n){c.current=!1;return}if(c.current||!i)return;const p=n?.node.current;if(!p||p.isConnected===!1)return;const y=s(p),v=eb(y,i);if(u||(v.x=0),d||(v.y=0),c.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const b=tb(p);b&&b.scrollBy({top:v.y,left:v.x})}},[n,u,d,i,s])}const ub=w.createContext({...ca,scaleX:1,scaleY:1});var ws;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ws||(ws={}));const TE=w.memo(function(n){var s,i,r,c;let{id:u,accessibility:d,autoScroll:m=!0,children:p,sensors:y=mE,collisionDetection:v=M_,measuring:b,modifiers:S,..._}=n;const T=w.useReducer(xE,void 0,bE),[j,k]=T,[R,P]=y_(),[B,q]=w.useState(ws.Uninitialized),M=B===ws.Initialized,{draggable:{active:C,nodes:D,translate:Z},droppable:{containers:re}}=j,fe=C!=null?D.get(C):null,ae=w.useRef({initial:null,translated:null}),ce=w.useMemo(()=>{var vt;return C!=null?{id:C,data:(vt=fe?.data)!=null?vt:pE,rect:ae}:null},[C,fe]),$=w.useRef(null),[W,L]=w.useState(null),[Q,ee]=w.useState(null),A=ur(_,Object.values(_)),Y=Rc("DndDescribedBy",u),N=w.useMemo(()=>re.getEnabled(),[re]),z=_E(b),{droppableRects:X,measureDroppableContainers:ue,measuringScheduled:oe}=nE(N,{dragging:M,dependencies:[Z.x,Z.y],config:z.droppable}),le=eE(D,C),be=w.useMemo(()=>Q?Gf(Q):null,[Q]),De=Ka(),me=aE(le,z.draggable.measure);EE({activeNode:C!=null?D.get(C):null,config:De.layoutShiftCompensation,initialRect:me,measure:z.draggable.measure});const we=iy(le,z.draggable.measure,me),Re=iy(le?le.parentElement:null),Xe=w.useRef({activatorEvent:null,active:null,activeNode:le,collisionRect:null,collisions:null,droppableRects:X,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:re,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Wt=re.getNodeFor((s=Xe.current.over)==null?void 0:s.id),et=hE({measure:z.dragOverlay.measure}),ln=(i=et.nodeRef.current)!=null?i:le,Nt=M?(r=et.rect)!=null?r:we:null,rn=!!(et.nodeRef.current&&et.rect),Xt=lE(rn?null:we),Mt=cb(ln?Dn(ln):null),de=rE(M?Wt??le:null),ke=dE(de),Pe=wE(S,{transform:{x:Z.x-Xt.x,y:Z.y-Xt.y,scaleX:1,scaleY:1},activatorEvent:Q,active:ce,activeNodeRect:we,containerNodeRect:Re,draggingNodeRect:Nt,over:Xe.current.over,overlayNodeRect:et.rect,scrollableAncestors:de,scrollableAncestorRects:ke,windowRect:Mt}),Fe=be?Vi(be,Z):null,Le=oE(de),Qt=ry(Le),pt=ry(Le,[we]),Ut=Vi(Pe,Qt),We=Nt?D_(Nt,Pe):null,V=ce&&We?v({active:ce,collisionRect:We,droppableRects:X,droppableContainers:N,pointerCoordinates:Fe}):null,pe=J0(V,"id"),[Ge,Ye]=w.useState(null),Dt=rn?Pe:Vi(Pe,pt),ct=j_(Dt,(c=Ge?.rect)!=null?c:null,we),Rt=w.useRef(null),St=w.useCallback((vt,jt)=>{let{sensor:$t,options:pn}=jt;if($.current==null)return;const gn=D.get($.current);if(!gn)return;const Jt=vt.nativeEvent,on=new $t({active:$.current,activeNode:gn,event:Jt,options:pn,context:Xe,onAbort(Pt){if(!D.get(Pt))return;const{onDragAbort:cn}=A.current,te={id:Pt};cn?.(te),R({type:"onDragAbort",event:te})},onPending(Pt,it,cn,te){if(!D.get(Pt))return;const{onDragPending:ge}=A.current,je={id:Pt,constraint:it,initialCoordinates:cn,offset:te};ge?.(je),R({type:"onDragPending",event:je})},onStart(Pt){const it=$.current;if(it==null)return;const cn=D.get(it);if(!cn)return;const{onDragStart:te}=A.current,he={activatorEvent:Jt,active:{id:it,data:cn.data,rect:ae}};Fa.unstable_batchedUpdates(()=>{te?.(he),q(ws.Initializing),k({type:tn.DragStart,initialCoordinates:Pt,active:it}),R({type:"onDragStart",event:he}),L(Rt.current),ee(Jt)})},onMove(Pt){k({type:tn.DragMove,coordinates:Pt})},onEnd:bn(tn.DragEnd),onCancel:bn(tn.DragCancel)});Rt.current=on;function bn(Pt){return async function(){const{active:cn,collisions:te,over:he,scrollAdjustedTranslate:ge}=Xe.current;let je=null;if(cn&&ge){const{cancelDrop:Qe}=A.current;je={activatorEvent:Jt,active:cn,collisions:te,delta:ge,over:he},Pt===tn.DragEnd&&typeof Qe=="function"&&await Promise.resolve(Qe(je))&&(Pt=tn.DragCancel)}$.current=null,Fa.unstable_batchedUpdates(()=>{k({type:Pt}),q(ws.Uninitialized),Ye(null),L(null),ee(null),Rt.current=null;const Qe=Pt===tn.DragEnd?"onDragEnd":"onDragCancel";if(je){const wt=A.current[Qe];wt?.(je),R({type:Qe,event:je})}})}}},[D]),Sa=w.useCallback((vt,jt)=>($t,pn)=>{const gn=$t.nativeEvent,Jt=D.get(pn);if($.current!==null||!Jt||gn.dndKit||gn.defaultPrevented)return;const on={active:Jt};vt($t,jt.options,on)===!0&&(gn.dndKit={capturedBy:jt.sensor},$.current=pn,St($t,jt))},[D,St]),As=tE(y,Sa);cE(y),Ms(()=>{we&&B===ws.Initializing&&q(ws.Initialized)},[we,B]),w.useEffect(()=>{const{onDragMove:vt}=A.current,{active:jt,activatorEvent:$t,collisions:pn,over:gn}=Xe.current;if(!jt||!$t)return;const Jt={active:jt,activatorEvent:$t,collisions:pn,delta:{x:Ut.x,y:Ut.y},over:gn};Fa.unstable_batchedUpdates(()=>{vt?.(Jt),R({type:"onDragMove",event:Jt})})},[Ut.x,Ut.y]),w.useEffect(()=>{const{active:vt,activatorEvent:jt,collisions:$t,droppableContainers:pn,scrollAdjustedTranslate:gn}=Xe.current;if(!vt||$.current==null||!jt||!gn)return;const{onDragOver:Jt}=A.current,on=pn.get(pe),bn=on&&on.rect.current?{id:on.id,rect:on.rect.current,data:on.data,disabled:on.disabled}:null,Pt={active:vt,activatorEvent:jt,collisions:$t,delta:{x:gn.x,y:gn.y},over:bn};Fa.unstable_batchedUpdates(()=>{Ye(bn),Jt?.(Pt),R({type:"onDragOver",event:Pt})})},[pe]),Ms(()=>{Xe.current={activatorEvent:Q,active:ce,activeNode:le,collisionRect:We,collisions:V,droppableRects:X,draggableNodes:D,draggingNode:ln,draggingNodeRect:Nt,droppableContainers:re,over:Ge,scrollableAncestors:de,scrollAdjustedTranslate:Ut},ae.current={initial:Nt,translated:We}},[ce,le,V,We,D,ln,Nt,X,re,Ge,de,Ut]),X_({...De,delta:Z,draggingRect:We,pointerCoordinates:Fe,scrollableAncestors:de,scrollableAncestorRects:ke});const si=w.useMemo(()=>({active:ce,activeNode:le,activeNodeRect:we,activatorEvent:Q,collisions:V,containerNodeRect:Re,dragOverlay:et,draggableNodes:D,droppableContainers:re,droppableRects:X,over:Ge,measureDroppableContainers:ue,scrollableAncestors:de,scrollableAncestorRects:ke,measuringConfiguration:z,measuringScheduled:oe,windowRect:Mt}),[ce,le,we,Q,V,Re,et,D,re,X,Ge,ue,de,ke,z,oe,Mt]),da=w.useMemo(()=>({activatorEvent:Q,activators:As,active:ce,activeNodeRect:we,ariaDescribedById:{draggable:Y},dispatch:k,draggableNodes:D,over:Ge,measureDroppableContainers:ue}),[Q,As,ce,we,k,Y,D,Ge,ue]);return sn.createElement(W0.Provider,{value:P},sn.createElement(Oc.Provider,{value:da},sn.createElement(yE.Provider,{value:si},sn.createElement(ub.Provider,{value:ct},p)),sn.createElement(SE,{disabled:d?.restoreFocus===!1})),sn.createElement(S_,{...d,hiddenTextDescribedById:Y}));function Ka(){const vt=W?.autoScrollEnabled===!1,jt=typeof m=="object"?m.enabled===!1:m===!1,$t=M&&!vt&&!jt;return typeof m=="object"?{...m,enabled:$t}:{enabled:$t}}}),NE=w.createContext(null),cy="button",ME="Draggable";function db(e){let{id:n,data:s,disabled:i=!1,attributes:r}=e;const c=Rc(ME),{activators:u,activatorEvent:d,active:m,activeNodeRect:p,ariaDescribedById:y,draggableNodes:v,over:b}=w.useContext(Oc),{role:S=cy,roleDescription:_="draggable",tabIndex:T=0}=r??{},j=m?.id===n,k=w.useContext(j?ub:NE),[R,P]=cc(),[B,q]=cc(),M=uE(u,n),C=ur(s);Ms(()=>(v.set(n,{id:n,key:c,node:R,activatorNode:B,data:C}),()=>{const Z=v.get(n);Z&&Z.key===c&&v.delete(n)}),[v,n]);const D=w.useMemo(()=>({role:S,tabIndex:T,"aria-disabled":i,"aria-pressed":j&&S===cy?!0:void 0,"aria-roledescription":_,"aria-describedby":y.draggable}),[i,S,T,j,_,y.draggable]);return{active:m,activatorEvent:d,activeNodeRect:p,attributes:D,isDragging:j,listeners:i?void 0:M,node:R,over:b,setNodeRef:P,setActivatorNodeRef:q,transform:k}}const jE="Droppable",CE={timeout:25};function fb(e){let{data:n,disabled:s=!1,id:i,resizeObserverConfig:r}=e;const c=Rc(jE),{active:u,dispatch:d,over:m,measureDroppableContainers:p}=w.useContext(Oc),y=w.useRef({disabled:s}),v=w.useRef(!1),b=w.useRef(null),S=w.useRef(null),{disabled:_,updateMeasurementsFor:T,timeout:j}={...CE,...r},k=ur(T??i),R=w.useCallback(()=>{if(!v.current){v.current=!0;return}S.current!=null&&clearTimeout(S.current),S.current=setTimeout(()=>{p(Array.isArray(k.current)?k.current:[k.current]),S.current=null},j)},[j]),P=Ac({callback:R,disabled:_||!u}),B=w.useCallback((D,Z)=>{P&&(Z&&(P.unobserve(Z),v.current=!1),D&&P.observe(D))},[P]),[q,M]=cc(B),C=ur(n);return w.useEffect(()=>{!P||!q.current||(P.disconnect(),v.current=!1,P.observe(q.current))},[q,P]),w.useEffect(()=>(d({type:tn.RegisterDroppable,element:{id:i,key:c,disabled:s,node:q,rect:b,data:C}}),()=>d({type:tn.UnregisterDroppable,key:c,id:i})),[i]),w.useEffect(()=>{s!==y.current.disabled&&(d({type:tn.SetDroppableDisabled,id:i,key:c,disabled:s}),y.current.disabled=s)},[i,c,s,d]),{active:u,rect:b,isOver:m?.id===i,node:q,over:m,setNodeRef:M}}function hc(e){if(!e)return!1;const n=e.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const DE=[Ke.Down,Ke.Right,Ke.Up,Ke.Left],RE=(e,n)=>{let{context:{active:s,collisionRect:i,droppableRects:r,droppableContainers:c,over:u,scrollableAncestors:d}}=n;if(DE.includes(e.code)){if(e.preventDefault(),!s||!i)return;const m=[];c.getEnabled().forEach(v=>{if(!v||v!=null&&v.disabled)return;const b=r.get(v.id);if(b)switch(e.code){case Ke.Down:i.top<b.top&&m.push(v);break;case Ke.Up:i.top>b.top&&m.push(v);break;case Ke.Left:i.left>b.left&&m.push(v);break;case Ke.Right:i.left<b.left&&m.push(v);break}});const p=T_({collisionRect:i,droppableRects:r,droppableContainers:m});let y=J0(p,"id");if(y===u?.id&&p.length>1&&(y=p[1].id),y!=null){const v=c.get(s.id),b=c.get(y),S=b?r.get(b.id):null,_=b?.node.current;if(_&&S&&v&&b){const j=kc(_).some((M,C)=>d[C]!==M),k=hb(v,b),R=kE(v,b),P=j||!k?{x:0,y:0}:{x:R?i.width-S.width:0,y:R?i.height-S.height:0},B={x:S.left,y:S.top};return P.x&&P.y?B:dr(B,P)}}}};function hb(e,n){return!hc(e)||!hc(n)?!1:e.data.current.sortable.containerId===n.data.current.sortable.containerId}function kE(e,n){return!hc(e)||!hc(n)||!hb(e,n)?!1:e.data.current.sortable.index<n.data.current.sortable.index}const uy=e=>Symbol.iterator in e,dy=e=>"entries"in e,fy=(e,n)=>{const s=e instanceof Map?e:new Map(e.entries()),i=n instanceof Map?n:new Map(n.entries());if(s.size!==i.size)return!1;for(const[r,c]of s)if(!i.has(r)||!Object.is(c,i.get(r)))return!1;return!0},AE=(e,n)=>{const s=e[Symbol.iterator](),i=n[Symbol.iterator]();let r=s.next(),c=i.next();for(;!r.done&&!c.done;){if(!Object.is(r.value,c.value))return!1;r=s.next(),c=i.next()}return!!r.done&&!!c.done};function OE(e,n){return Object.is(e,n)?!0:typeof e!="object"||e===null||typeof n!="object"||n===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(n)?!1:uy(e)&&uy(n)?dy(e)&&dy(n)?fy(e,n):AE(e,n):fy({entries:()=>Object.entries(e)},{entries:()=>Object.entries(n)})}function zE(e){const n=sn.useRef(void 0);return s=>{const i=e(s);return OE(n.current,i)?n.current:n.current=i}}const PE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),IE=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,s,i)=>i?i.toUpperCase():s.toLowerCase()),hy=e=>{const n=IE(e);return n.charAt(0).toUpperCase()+n.slice(1)},mb=(...e)=>e.filter((n,s,i)=>!!n&&n.trim()!==""&&i.indexOf(n)===s).join(" ").trim(),BE=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};var LE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const qE=w.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:r="",children:c,iconNode:u,...d},m)=>w.createElement("svg",{ref:m,...LE,width:n,height:n,stroke:e,strokeWidth:i?Number(s)*24/Number(n):s,className:mb("lucide",r),...!c&&!BE(d)&&{"aria-hidden":"true"},...d},[...u.map(([p,y])=>w.createElement(p,y)),...Array.isArray(c)?c:[c]]));const Kt=(e,n)=>{const s=w.forwardRef(({className:i,...r},c)=>w.createElement(qE,{ref:c,iconNode:n,className:mb(`lucide-${PE(hy(e))}`,`lucide-${e}`,i),...r}));return s.displayName=hy(e),s};const UE=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],$E=Kt("chevron-down",UE);const HE=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ZE=Kt("chevron-right",HE);const FE=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],GE=Kt("copy",FE);const YE=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],pb=Kt("external-link",YE);const VE=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],KE=Kt("git-branch",VE);const WE=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],XE=Kt("grip-vertical",WE);const QE=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],JE=Kt("hammer",QE);const eT=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],Ch=Kt("link-2",eT);const tT=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],gb=Kt("lock",tT);const nT=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],aT=Kt("pin",nT);const sT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],iT=Kt("plus",sT);const lT=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],rT=Kt("search",lT);const oT=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],my=Kt("sliders-horizontal",oT);const cT=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],uT=Kt("sparkles",cT);const dT=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],vb=Kt("trash-2",dT);const fT=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]],yb=Kt("tree-pine",fT);const hT=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],mT=Kt("triangle-alert",hT);const pT=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],gT=Kt("undo-2",pT);const vT=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],yT=Kt("upload",vT);const bT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],xT=Kt("x",bT),bb="build-solver:theme-mode",xb="minimal";function ST(e){return e==="classic"?"classic":xb}function Sb(){return typeof window>"u"?xb:ST(window.localStorage.getItem(bb))}function wT(e){typeof window>"u"||window.localStorage.setItem(bb,e)}function wb(e){typeof document>"u"||(document.documentElement.dataset.wbTheme=e)}const js=["helmet","chestplate","leggings","boots","ring","bracelet","necklace","weapon"],Je=["helmet","chestplate","leggings","boots","ring1","ring2","bracelet","necklace","weapon"],xa=e=>e==="ring1"||e==="ring2"?"ring":e,mc=e=>{switch(e){case"ring1":return"Ring 1";case"ring2":return"Ring 2";default:return e.charAt(0).toUpperCase()+e.slice(1)}};function Dh(e){return e==="weapon"?"Weapon":e.charAt(0).toUpperCase()+e.slice(1)}const _b={spear:"Warrior",dagger:"Assassin",wand:"Mage",bow:"Archer",relik:"Shaman"};function pc(e){return _b[e]??null}function _T(e,n){return e in _b?"weapon":js.includes(e)?e:n==="weapon"?"weapon":e==="ring"?"ring":null}function Eb(e,n){return!n||!e.classReq?!0:e.classReq===n}function ET(e,n){return e.level<=n}const TT=["hp","hpBonus","hprRaw","hprPct","mr","ms","ls","sdPct","sdRaw","mdPct","mdRaw","poison","spd","atkTier","averageDps","strReq","dexReq","intReq","defReq","agiReq","str","dex","int","def","agi","eDef","tDef","wDef","fDef","aDef","eDamPct","tDamPct","wDamPct","fDamPct","aDamPct","damPct","rDamPct","nDamPct","slots","lvl"],NT=["hpBonus","hprRaw","hprPct","mr","ms","ls","sdPct","sdRaw","mdPct","mdRaw","poison","spd","atkTier","eDamPct","tDamPct","wDamPct","fDamPct","aDamPct","damPct"];function py(e){const n=Math.round(e);return n===0&&e!==0?e>0?1:-1:n}function MT(e,n){return!Number.isFinite(n)||n===0?0:n>0?py(n*1.3):py(n*.7)}const jT=new Set(["Twilight-Gilded Cloak"]);function ze(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const n=Number(e);if(Number.isFinite(n))return n}return 0}function Ln(e){return typeof e=="string"?e:""}function CT(e){return Array.isArray(e)?e.filter(n=>typeof n=="string"):[]}function DT(e,n){const s=Ln(e).trim();if(!s)return pc(n);switch(s.toLowerCase()){case"warrior":return"Warrior";case"assassin":return"Assassin";case"mage":return"Mage";case"archer":return"Archer";case"shaman":return"Shaman";default:return pc(n)}}function RT(e){return{hp:ze(e.hp),hpBonus:ze(e.hpBonus),hprRaw:ze(e.hprRaw),hprPct:ze(e.hprPct),mr:ze(e.mr),ms:ze(e.ms),ls:ze(e.ls),sdPct:ze(e.sdPct),sdRaw:ze(e.sdRaw),mdPct:ze(e.mdPct),mdRaw:ze(e.mdRaw),poison:ze(e.poison),spd:ze(e.spd),atkTier:ze(e.atkTier),baseDps:ze(e.averageDps),reqStr:ze(e.strReq),reqDex:ze(e.dexReq),reqInt:ze(e.intReq),reqDef:ze(e.defReq),reqAgi:ze(e.agiReq),spStr:ze(e.str),spDex:ze(e.dex),spInt:ze(e.int),spDef:ze(e.def),spAgi:ze(e.agi),eDef:ze(e.eDef),tDef:ze(e.tDef),wDef:ze(e.wDef),fDef:ze(e.fDef),aDef:ze(e.aDef),eDamPct:ze(e.eDamPct),tDamPct:ze(e.tDamPct),wDamPct:ze(e.wDamPct),fDamPct:ze(e.fDamPct),aDamPct:ze(e.aDamPct),damPct:ze(e.damPct),rDamPct:ze(e.rDamPct),nDamPct:ze(e.nDamPct)}}function kT(e){const n={};for(const s of TT)n[s]=ze(e[s]);return n.reqTotal=n.strReq+n.dexReq+n.intReq+n.defReq+n.agiReq,n.skillPointTotal=n.str+n.dex+n.int+n.def+n.agi,n.offenseScore=n.averageDps+n.sdPct*1.4+n.mdPct*1.15+n.sdRaw*.12+n.mdRaw*.12+(n.damPct+n.rDamPct+n.nDamPct)*.8+(n.eDamPct+n.tDamPct+n.wDamPct+n.fDamPct+n.aDamPct)*.5+n.atkTier*7+n.poison*.03,n.ehpProxy=n.hp+n.hpBonus+(n.eDef+n.tDef+n.wDef+n.fDef+n.aDef)*.45+n.hprRaw*1.2+n.hprPct*2.5,n.utilityScore=n.spd*1.8+n.mr*8+n.ms*7+n.ls*6,n.sumSpPct=n.spPct1+n.spPct2+n.spPct3+n.spPct4,n.sumSpRaw=n.spRaw1+n.spRaw2+n.spRaw3+n.spRaw4,n}function AT(e){if(typeof e.remapID<"u")return null;const n=Ln(e.type).toLowerCase(),s=Ln(e.category).toLowerCase(),i=_T(n,s);if(!i)return null;const r=Ln(e.displayName)||Ln(e.name),c=Ln(e.tier)||"Normal",u=ze(e.lvl),d=CT(e.majorIds),m=RT(e),p=kT(e),y=!!e.fixID||!!e.identified,v=jT.has(r),b=y||v;if(!b)for(const T of NT){const j=m[T],k=MT(T,j);m[T]=k,Object.prototype.hasOwnProperty.call(p,T)&&(p[T]=k)}const S={baseDps:m.baseDps,offense:p.offenseScore,ehpProxy:p.ehpProxy,utility:p.utilityScore,skillPointTotal:p.skillPointTotal,reqTotal:p.reqTotal},_=[r,Ln(e.name),Ln(e.lore),n,c,s,Ln(e.classReq),...d];return{id:ze(e.id),name:Ln(e.name),displayName:r,category:i,type:n,sourceCategory:s,tier:c,level:u,classReq:DT(e.classReq,n),majorIds:d,powderSlots:ze(e.slots),atkSpd:Ln(e.atkSpd),restricted:Ln(e.restrict)!=="",deprecated:Ln(e.restrict).toUpperCase()==="DEPRECATED",numeric:m,numericIndex:p,fixRolledIds:b,searchText:_.filter(Boolean).join(" ").toLowerCase(),majorIdsText:d.join(" ").toLowerCase(),roughScoreFields:S,legacyRaw:e}}function OT(e,n,s){if(!Number.isFinite(s))return;const i=e[n];if(!i){e[n]={min:s,max:s};return}i.min=Math.min(i.min,s),i.max=Math.max(i.max,s)}function zT(e){const n=e.items.map(AT).filter(T=>T!==null);n.sort((T,j)=>T.displayName.localeCompare(j.displayName));const s=new Map,i=new Map,r=new Map,c=new Map(js.map(T=>[T,[]])),u=new Set,d=new Set,m=new Set,p=new Set,y={},v=new Map;for(const T of n){s.set(T.id,T),i.set(T.displayName.toLowerCase(),T.id),r.has(T.type)||r.set(T.type,[]),r.get(T.type).push(T.id),c.get(T.category).push(T.id),u.add(T.tier),d.add(T.type),T.classReq&&m.add(T.classReq);for(const j of T.majorIds)j&&p.add(j);for(const[j,k]of Object.entries(T.numericIndex))OT(y,j,k)}const b=e.sets??{},S=new Map;for(const[T,j]of Object.entries(b)){const k=j?.bonuses;if(!Array.isArray(k))continue;const R=[];k.forEach((B,q)=>{B&&typeof B=="object"&&B.illegal&&R.push(q+1)}),R.length>0&&v.set(T,{illegalCounts:R});const P=j?.items;if(Array.isArray(P))for(const B of P)typeof B=="string"&&S.set(B.toLowerCase(),T)}const _=new Map;for(const[T,j]of S){const k=i.get(T);k!=null&&_.set(k,j)}return{version:String(e.version??"unknown"),items:n,itemsById:s,itemIdByName:i,itemsByType:r,itemsByCategory:c,facetsMeta:{categories:[...js],types:[...d].sort(),tiers:[...u].sort(),classReqs:[...m].sort(),majorIds:[...p].sort(),numericRanges:y},setsMeta:v,itemSetName:_}}class PT{snapshotPromise=null;async getCatalog(){return this.snapshotPromise||(this.snapshotPromise=this.loadCatalog()),this.snapshotPromise}async getItemById(n){return(await this.getCatalog()).itemsById.get(n)}async loadCatalog(){const n=await this.fetchCompressPayload();return zT(n)}async fetchCompressPayload(){const n=c=>{if(typeof window>"u")return c;const u=window.location.href.split("?")[0].replace(/\/[^/]*$/,"/")||window.location.origin+"/";return new URL(c,u).href},s=[n("compress.json"),n("./compress.json"),"./compress.json","../compress.json","compress.json"];let i=null;const r=[];for(const c of s)try{const u=await fetch(c,{cache:"force-cache"});if(!u.ok)throw new Error(`Failed to fetch ${c}: ${u.status}`);const d=await u.json();if(!d?.items||!Array.isArray(d.items))throw new Error(`Invalid compress payload from ${c}`);return d}catch(u){i=u,r.push(u instanceof Error?u.message:`Failed to fetch ${c}`)}throw i instanceof Error?new Error(`Unable to load compress.json. Tried: ${s.join(", ")}. Last error: ${i.message}`):new Error(`Unable to load compress.json. Tried: ${s.join(", ")}. Failures: ${r.join(" | ")}`)}}const IT=new PT;function se(e,n,s){function i(d,m){if(d._zod||Object.defineProperty(d,"_zod",{value:{def:m,constr:u,traits:new Set},enumerable:!1}),d._zod.traits.has(e))return;d._zod.traits.add(e),n(d,m);const p=u.prototype,y=Object.keys(p);for(let v=0;v<y.length;v++){const b=y[v];b in d||(d[b]=p[b].bind(d))}}const r=s?.Parent??Object;class c extends r{}Object.defineProperty(c,"name",{value:e});function u(d){var m;const p=s?.Parent?new c:this;i(p,d),(m=p._zod).deferred??(m.deferred=[]);for(const y of p._zod.deferred)y();return p}return Object.defineProperty(u,"init",{value:i}),Object.defineProperty(u,Symbol.hasInstance,{value:d=>s?.Parent&&d instanceof s.Parent?!0:d?._zod?.traits?.has(e)}),Object.defineProperty(u,"name",{value:e}),u}class Ki extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class Tb extends Error{constructor(n){super(`Encountered unidirectional transform during encode: ${n}`),this.name="ZodEncodeError"}}const Nb={};function Cs(e){return Nb}function Mb(e){const n=Object.values(e).filter(i=>typeof i=="number");return Object.entries(e).filter(([i,r])=>n.indexOf(+i)===-1).map(([i,r])=>r)}function Wf(e,n){return typeof n=="bigint"?n.toString():n}function Rh(e){return{get value(){{const n=e();return Object.defineProperty(this,"value",{value:n}),n}}}}function kh(e){return e==null}function Ah(e){const n=e.startsWith("^")?1:0,s=e.endsWith("$")?e.length-1:e.length;return e.slice(n,s)}function BT(e,n){const s=(e.toString().split(".")[1]||"").length,i=n.toString();let r=(i.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(i)){const m=i.match(/\d?e-(\d?)/);m?.[1]&&(r=Number.parseInt(m[1]))}const c=s>r?s:r,u=Number.parseInt(e.toFixed(c).replace(".","")),d=Number.parseInt(n.toFixed(c).replace(".",""));return u%d/10**c}const gy=Symbol("evaluating");function ot(e,n,s){let i;Object.defineProperty(e,n,{get(){if(i!==gy)return i===void 0&&(i=gy,i=s()),i},set(r){Object.defineProperty(e,n,{value:r})},configurable:!0})}function ni(e,n,s){Object.defineProperty(e,n,{value:s,writable:!0,enumerable:!0,configurable:!0})}function Rs(...e){const n={};for(const s of e){const i=Object.getOwnPropertyDescriptors(s);Object.assign(n,i)}return Object.defineProperties({},n)}function vy(e){return JSON.stringify(e)}function LT(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const jb="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function gc(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const qT=Rh(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function tl(e){if(gc(e)===!1)return!1;const n=e.constructor;if(n===void 0||typeof n!="function")return!0;const s=n.prototype;return!(gc(s)===!1||Object.prototype.hasOwnProperty.call(s,"isPrototypeOf")===!1)}function Cb(e){return tl(e)?{...e}:Array.isArray(e)?[...e]:e}const UT=new Set(["string","number","symbol"]);function zc(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ks(e,n,s){const i=new e._zod.constr(n??e._zod.def);return(!n||s?.parent)&&(i._zod.parent=e),i}function Se(e){const n=e;if(!n)return{};if(typeof n=="string")return{error:()=>n};if(n?.message!==void 0){if(n?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");n.error=n.message}return delete n.message,typeof n.error=="string"?{...n,error:()=>n.error}:n}function $T(e){return Object.keys(e).filter(n=>e[n]._zod.optin==="optional"&&e[n]._zod.optout==="optional")}const HT={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function ZT(e,n){const s=e._zod.def,i=s.checks;if(i&&i.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const c=Rs(e._zod.def,{get shape(){const u={};for(const d in n){if(!(d in s.shape))throw new Error(`Unrecognized key: "${d}"`);n[d]&&(u[d]=s.shape[d])}return ni(this,"shape",u),u},checks:[]});return ks(e,c)}function FT(e,n){const s=e._zod.def,i=s.checks;if(i&&i.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const c=Rs(e._zod.def,{get shape(){const u={...e._zod.def.shape};for(const d in n){if(!(d in s.shape))throw new Error(`Unrecognized key: "${d}"`);n[d]&&delete u[d]}return ni(this,"shape",u),u},checks:[]});return ks(e,c)}function GT(e,n){if(!tl(n))throw new Error("Invalid input to extend: expected a plain object");const s=e._zod.def.checks;if(s&&s.length>0){const c=e._zod.def.shape;for(const u in n)if(Object.getOwnPropertyDescriptor(c,u)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const r=Rs(e._zod.def,{get shape(){const c={...e._zod.def.shape,...n};return ni(this,"shape",c),c}});return ks(e,r)}function YT(e,n){if(!tl(n))throw new Error("Invalid input to safeExtend: expected a plain object");const s=Rs(e._zod.def,{get shape(){const i={...e._zod.def.shape,...n};return ni(this,"shape",i),i}});return ks(e,s)}function VT(e,n){const s=Rs(e._zod.def,{get shape(){const i={...e._zod.def.shape,...n._zod.def.shape};return ni(this,"shape",i),i},get catchall(){return n._zod.def.catchall},checks:[]});return ks(e,s)}function KT(e,n,s){const r=n._zod.def.checks;if(r&&r.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const u=Rs(n._zod.def,{get shape(){const d=n._zod.def.shape,m={...d};if(s)for(const p in s){if(!(p in d))throw new Error(`Unrecognized key: "${p}"`);s[p]&&(m[p]=e?new e({type:"optional",innerType:d[p]}):d[p])}else for(const p in d)m[p]=e?new e({type:"optional",innerType:d[p]}):d[p];return ni(this,"shape",m),m},checks:[]});return ks(n,u)}function WT(e,n,s){const i=Rs(n._zod.def,{get shape(){const r=n._zod.def.shape,c={...r};if(s)for(const u in s){if(!(u in c))throw new Error(`Unrecognized key: "${u}"`);s[u]&&(c[u]=new e({type:"nonoptional",innerType:r[u]}))}else for(const u in r)c[u]=new e({type:"nonoptional",innerType:r[u]});return ni(this,"shape",c),c}});return ks(n,i)}function Fi(e,n=0){if(e.aborted===!0)return!0;for(let s=n;s<e.issues.length;s++)if(e.issues[s]?.continue!==!0)return!0;return!1}function Gi(e,n){return n.map(s=>{var i;return(i=s).path??(i.path=[]),s.path.unshift(e),s})}function qo(e){return typeof e=="string"?e:e?.message}function Ds(e,n,s){const i={...e,path:e.path??[]};if(!e.message){const r=qo(e.inst?._zod.def?.error?.(e))??qo(n?.error?.(e))??qo(s.customError?.(e))??qo(s.localeError?.(e))??"Invalid input";i.message=r}return delete i.inst,delete i.continue,n?.reportInput||delete i.input,i}function Oh(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function hr(...e){const[n,s,i]=e;return typeof n=="string"?{message:n,code:"custom",input:s,inst:i}:{...n}}const Db=(e,n)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:n,enumerable:!1}),e.message=JSON.stringify(n,Wf,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Rb=se("$ZodError",Db),kb=se("$ZodError",Db,{Parent:Error});function XT(e,n=s=>s.message){const s={},i=[];for(const r of e.issues)r.path.length>0?(s[r.path[0]]=s[r.path[0]]||[],s[r.path[0]].push(n(r))):i.push(n(r));return{formErrors:i,fieldErrors:s}}function QT(e,n=s=>s.message){const s={_errors:[]},i=r=>{for(const c of r.issues)if(c.code==="invalid_union"&&c.errors.length)c.errors.map(u=>i({issues:u}));else if(c.code==="invalid_key")i({issues:c.issues});else if(c.code==="invalid_element")i({issues:c.issues});else if(c.path.length===0)s._errors.push(n(c));else{let u=s,d=0;for(;d<c.path.length;){const m=c.path[d];d===c.path.length-1?(u[m]=u[m]||{_errors:[]},u[m]._errors.push(n(c))):u[m]=u[m]||{_errors:[]},u=u[m],d++}}};return i(e),s}const zh=e=>(n,s,i,r)=>{const c=i?Object.assign(i,{async:!1}):{async:!1},u=n._zod.run({value:s,issues:[]},c);if(u instanceof Promise)throw new Ki;if(u.issues.length){const d=new(r?.Err??e)(u.issues.map(m=>Ds(m,c,Cs())));throw jb(d,r?.callee),d}return u.value},Ph=e=>async(n,s,i,r)=>{const c=i?Object.assign(i,{async:!0}):{async:!0};let u=n._zod.run({value:s,issues:[]},c);if(u instanceof Promise&&(u=await u),u.issues.length){const d=new(r?.Err??e)(u.issues.map(m=>Ds(m,c,Cs())));throw jb(d,r?.callee),d}return u.value},Pc=e=>(n,s,i)=>{const r=i?{...i,async:!1}:{async:!1},c=n._zod.run({value:s,issues:[]},r);if(c instanceof Promise)throw new Ki;return c.issues.length?{success:!1,error:new(e??Rb)(c.issues.map(u=>Ds(u,r,Cs())))}:{success:!0,data:c.value}},JT=Pc(kb),Ic=e=>async(n,s,i)=>{const r=i?Object.assign(i,{async:!0}):{async:!0};let c=n._zod.run({value:s,issues:[]},r);return c instanceof Promise&&(c=await c),c.issues.length?{success:!1,error:new e(c.issues.map(u=>Ds(u,r,Cs())))}:{success:!0,data:c.value}},eN=Ic(kb),tN=e=>(n,s,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return zh(e)(n,s,r)},nN=e=>(n,s,i)=>zh(e)(n,s,i),aN=e=>async(n,s,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Ph(e)(n,s,r)},sN=e=>async(n,s,i)=>Ph(e)(n,s,i),iN=e=>(n,s,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Pc(e)(n,s,r)},lN=e=>(n,s,i)=>Pc(e)(n,s,i),rN=e=>async(n,s,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Ic(e)(n,s,r)},oN=e=>async(n,s,i)=>Ic(e)(n,s,i),cN=/^[cC][^\s-]{8,}$/,uN=/^[0-9a-z]+$/,dN=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,fN=/^[0-9a-vA-V]{20}$/,hN=/^[A-Za-z0-9]{27}$/,mN=/^[a-zA-Z0-9_-]{21}$/,pN=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,gN=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,yy=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,vN=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,yN="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function bN(){return new RegExp(yN,"u")}const xN=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,SN=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,wN=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,_N=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,EN=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Ab=/^[A-Za-z0-9_-]*$/,TN=/^\+[1-9]\d{6,14}$/,Ob="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",NN=new RegExp(`^${Ob}$`);function zb(e){const n="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${n}`:e.precision===0?`${n}:[0-5]\\d`:`${n}:[0-5]\\d\\.\\d{${e.precision}}`:`${n}(?::[0-5]\\d(?:\\.\\d+)?)?`}function MN(e){return new RegExp(`^${zb(e)}$`)}function jN(e){const n=zb({precision:e.precision}),s=["Z"];e.local&&s.push(""),e.offset&&s.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${n}(?:${s.join("|")})`;return new RegExp(`^${Ob}T(?:${i})$`)}const CN=e=>{const n=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${n}$`)},DN=/^-?\d+$/,Pb=/^-?\d+(?:\.\d+)?$/,RN=/^(?:true|false)$/i,kN=/^[^A-Z]*$/,AN=/^[^a-z]*$/,Rn=se("$ZodCheck",(e,n)=>{var s;e._zod??(e._zod={}),e._zod.def=n,(s=e._zod).onattach??(s.onattach=[])}),Ib={number:"number",bigint:"bigint",object:"date"},Bb=se("$ZodCheckLessThan",(e,n)=>{Rn.init(e,n);const s=Ib[typeof n.value];e._zod.onattach.push(i=>{const r=i._zod.bag,c=(n.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;n.value<c&&(n.inclusive?r.maximum=n.value:r.exclusiveMaximum=n.value)}),e._zod.check=i=>{(n.inclusive?i.value<=n.value:i.value<n.value)||i.issues.push({origin:s,code:"too_big",maximum:typeof n.value=="object"?n.value.getTime():n.value,input:i.value,inclusive:n.inclusive,inst:e,continue:!n.abort})}}),Lb=se("$ZodCheckGreaterThan",(e,n)=>{Rn.init(e,n);const s=Ib[typeof n.value];e._zod.onattach.push(i=>{const r=i._zod.bag,c=(n.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;n.value>c&&(n.inclusive?r.minimum=n.value:r.exclusiveMinimum=n.value)}),e._zod.check=i=>{(n.inclusive?i.value>=n.value:i.value>n.value)||i.issues.push({origin:s,code:"too_small",minimum:typeof n.value=="object"?n.value.getTime():n.value,input:i.value,inclusive:n.inclusive,inst:e,continue:!n.abort})}}),ON=se("$ZodCheckMultipleOf",(e,n)=>{Rn.init(e,n),e._zod.onattach.push(s=>{var i;(i=s._zod.bag).multipleOf??(i.multipleOf=n.value)}),e._zod.check=s=>{if(typeof s.value!=typeof n.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof s.value=="bigint"?s.value%n.value===BigInt(0):BT(s.value,n.value)===0)||s.issues.push({origin:typeof s.value,code:"not_multiple_of",divisor:n.value,input:s.value,inst:e,continue:!n.abort})}}),zN=se("$ZodCheckNumberFormat",(e,n)=>{Rn.init(e,n),n.format=n.format||"float64";const s=n.format?.includes("int"),i=s?"int":"number",[r,c]=HT[n.format];e._zod.onattach.push(u=>{const d=u._zod.bag;d.format=n.format,d.minimum=r,d.maximum=c,s&&(d.pattern=DN)}),e._zod.check=u=>{const d=u.value;if(s){if(!Number.isInteger(d)){u.issues.push({expected:i,format:n.format,code:"invalid_type",continue:!1,input:d,inst:e});return}if(!Number.isSafeInteger(d)){d>0?u.issues.push({input:d,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,inclusive:!0,continue:!n.abort}):u.issues.push({input:d,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,inclusive:!0,continue:!n.abort});return}}d<r&&u.issues.push({origin:"number",input:d,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!n.abort}),d>c&&u.issues.push({origin:"number",input:d,code:"too_big",maximum:c,inclusive:!0,inst:e,continue:!n.abort})}}),PN=se("$ZodCheckMaxLength",(e,n)=>{var s;Rn.init(e,n),(s=e._zod.def).when??(s.when=i=>{const r=i.value;return!kh(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag.maximum??Number.POSITIVE_INFINITY;n.maximum<r&&(i._zod.bag.maximum=n.maximum)}),e._zod.check=i=>{const r=i.value;if(r.length<=n.maximum)return;const u=Oh(r);i.issues.push({origin:u,code:"too_big",maximum:n.maximum,inclusive:!0,input:r,inst:e,continue:!n.abort})}}),IN=se("$ZodCheckMinLength",(e,n)=>{var s;Rn.init(e,n),(s=e._zod.def).when??(s.when=i=>{const r=i.value;return!kh(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;n.minimum>r&&(i._zod.bag.minimum=n.minimum)}),e._zod.check=i=>{const r=i.value;if(r.length>=n.minimum)return;const u=Oh(r);i.issues.push({origin:u,code:"too_small",minimum:n.minimum,inclusive:!0,input:r,inst:e,continue:!n.abort})}}),BN=se("$ZodCheckLengthEquals",(e,n)=>{var s;Rn.init(e,n),(s=e._zod.def).when??(s.when=i=>{const r=i.value;return!kh(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag;r.minimum=n.length,r.maximum=n.length,r.length=n.length}),e._zod.check=i=>{const r=i.value,c=r.length;if(c===n.length)return;const u=Oh(r),d=c>n.length;i.issues.push({origin:u,...d?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!n.abort})}}),Bc=se("$ZodCheckStringFormat",(e,n)=>{var s,i;Rn.init(e,n),e._zod.onattach.push(r=>{const c=r._zod.bag;c.format=n.format,n.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(n.pattern))}),n.pattern?(s=e._zod).check??(s.check=r=>{n.pattern.lastIndex=0,!n.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:n.format,input:r.value,...n.pattern?{pattern:n.pattern.toString()}:{},inst:e,continue:!n.abort})}):(i=e._zod).check??(i.check=()=>{})}),LN=se("$ZodCheckRegex",(e,n)=>{Bc.init(e,n),e._zod.check=s=>{n.pattern.lastIndex=0,!n.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:"regex",input:s.value,pattern:n.pattern.toString(),inst:e,continue:!n.abort})}}),qN=se("$ZodCheckLowerCase",(e,n)=>{n.pattern??(n.pattern=kN),Bc.init(e,n)}),UN=se("$ZodCheckUpperCase",(e,n)=>{n.pattern??(n.pattern=AN),Bc.init(e,n)}),$N=se("$ZodCheckIncludes",(e,n)=>{Rn.init(e,n);const s=zc(n.includes),i=new RegExp(typeof n.position=="number"?`^.{${n.position}}${s}`:s);n.pattern=i,e._zod.onattach.push(r=>{const c=r._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(i)}),e._zod.check=r=>{r.value.includes(n.includes,n.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:n.includes,input:r.value,inst:e,continue:!n.abort})}}),HN=se("$ZodCheckStartsWith",(e,n)=>{Rn.init(e,n);const s=new RegExp(`^${zc(n.prefix)}.*`);n.pattern??(n.pattern=s),e._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(s)}),e._zod.check=i=>{i.value.startsWith(n.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:n.prefix,input:i.value,inst:e,continue:!n.abort})}}),ZN=se("$ZodCheckEndsWith",(e,n)=>{Rn.init(e,n);const s=new RegExp(`.*${zc(n.suffix)}$`);n.pattern??(n.pattern=s),e._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(s)}),e._zod.check=i=>{i.value.endsWith(n.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:n.suffix,input:i.value,inst:e,continue:!n.abort})}}),FN=se("$ZodCheckOverwrite",(e,n)=>{Rn.init(e,n),e._zod.check=s=>{s.value=n.tx(s.value)}});class GN{constructor(n=[]){this.content=[],this.indent=0,this&&(this.args=n)}indented(n){this.indent+=1,n(this),this.indent-=1}write(n){if(typeof n=="function"){n(this,{execution:"sync"}),n(this,{execution:"async"});return}const i=n.split(`
`).filter(u=>u),r=Math.min(...i.map(u=>u.length-u.trimStart().length)),c=i.map(u=>u.slice(r)).map(u=>" ".repeat(this.indent*2)+u);for(const u of c)this.content.push(u)}compile(){const n=Function,s=this?.args,r=[...(this?.content??[""]).map(c=>`  ${c}`)];return new n(...s,r.join(`
`))}}const YN={major:4,minor:3,patch:6},Ot=se("$ZodType",(e,n)=>{var s;e??(e={}),e._zod.def=n,e._zod.bag=e._zod.bag||{},e._zod.version=YN;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const r of i)for(const c of r._zod.onattach)c(e);if(i.length===0)(s=e._zod).deferred??(s.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const r=(u,d,m)=>{let p=Fi(u),y;for(const v of d){if(v._zod.def.when){if(!v._zod.def.when(u))continue}else if(p)continue;const b=u.issues.length,S=v._zod.check(u);if(S instanceof Promise&&m?.async===!1)throw new Ki;if(y||S instanceof Promise)y=(y??Promise.resolve()).then(async()=>{await S,u.issues.length!==b&&(p||(p=Fi(u,b)))});else{if(u.issues.length===b)continue;p||(p=Fi(u,b))}}return y?y.then(()=>u):u},c=(u,d,m)=>{if(Fi(u))return u.aborted=!0,u;const p=r(d,i,m);if(p instanceof Promise){if(m.async===!1)throw new Ki;return p.then(y=>e._zod.parse(y,m))}return e._zod.parse(p,m)};e._zod.run=(u,d)=>{if(d.skipChecks)return e._zod.parse(u,d);if(d.direction==="backward"){const p=e._zod.parse({value:u.value,issues:[]},{...d,skipChecks:!0});return p instanceof Promise?p.then(y=>c(y,u,d)):c(p,u,d)}const m=e._zod.parse(u,d);if(m instanceof Promise){if(d.async===!1)throw new Ki;return m.then(p=>r(p,i,d))}return r(m,i,d)}}ot(e,"~standard",()=>({validate:r=>{try{const c=JT(e,r);return c.success?{value:c.data}:{issues:c.error?.issues}}catch{return eN(e,r).then(u=>u.success?{value:u.data}:{issues:u.error?.issues})}},vendor:"zod",version:1}))}),Ih=se("$ZodString",(e,n)=>{Ot.init(e,n),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??CN(e._zod.bag),e._zod.parse=(s,i)=>{if(n.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),Tt=se("$ZodStringFormat",(e,n)=>{Bc.init(e,n),Ih.init(e,n)}),VN=se("$ZodGUID",(e,n)=>{n.pattern??(n.pattern=gN),Tt.init(e,n)}),KN=se("$ZodUUID",(e,n)=>{if(n.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[n.version];if(i===void 0)throw new Error(`Invalid UUID version: "${n.version}"`);n.pattern??(n.pattern=yy(i))}else n.pattern??(n.pattern=yy());Tt.init(e,n)}),WN=se("$ZodEmail",(e,n)=>{n.pattern??(n.pattern=vN),Tt.init(e,n)}),XN=se("$ZodURL",(e,n)=>{Tt.init(e,n),e._zod.check=s=>{try{const i=s.value.trim(),r=new URL(i);n.hostname&&(n.hostname.lastIndex=0,n.hostname.test(r.hostname)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:n.hostname.source,input:s.value,inst:e,continue:!n.abort})),n.protocol&&(n.protocol.lastIndex=0,n.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:n.protocol.source,input:s.value,inst:e,continue:!n.abort})),n.normalize?s.value=r.href:s.value=i;return}catch{s.issues.push({code:"invalid_format",format:"url",input:s.value,inst:e,continue:!n.abort})}}}),QN=se("$ZodEmoji",(e,n)=>{n.pattern??(n.pattern=bN()),Tt.init(e,n)}),JN=se("$ZodNanoID",(e,n)=>{n.pattern??(n.pattern=mN),Tt.init(e,n)}),eM=se("$ZodCUID",(e,n)=>{n.pattern??(n.pattern=cN),Tt.init(e,n)}),tM=se("$ZodCUID2",(e,n)=>{n.pattern??(n.pattern=uN),Tt.init(e,n)}),nM=se("$ZodULID",(e,n)=>{n.pattern??(n.pattern=dN),Tt.init(e,n)}),aM=se("$ZodXID",(e,n)=>{n.pattern??(n.pattern=fN),Tt.init(e,n)}),sM=se("$ZodKSUID",(e,n)=>{n.pattern??(n.pattern=hN),Tt.init(e,n)}),iM=se("$ZodISODateTime",(e,n)=>{n.pattern??(n.pattern=jN(n)),Tt.init(e,n)}),lM=se("$ZodISODate",(e,n)=>{n.pattern??(n.pattern=NN),Tt.init(e,n)}),rM=se("$ZodISOTime",(e,n)=>{n.pattern??(n.pattern=MN(n)),Tt.init(e,n)}),oM=se("$ZodISODuration",(e,n)=>{n.pattern??(n.pattern=pN),Tt.init(e,n)}),cM=se("$ZodIPv4",(e,n)=>{n.pattern??(n.pattern=xN),Tt.init(e,n),e._zod.bag.format="ipv4"}),uM=se("$ZodIPv6",(e,n)=>{n.pattern??(n.pattern=SN),Tt.init(e,n),e._zod.bag.format="ipv6",e._zod.check=s=>{try{new URL(`http://[${s.value}]`)}catch{s.issues.push({code:"invalid_format",format:"ipv6",input:s.value,inst:e,continue:!n.abort})}}}),dM=se("$ZodCIDRv4",(e,n)=>{n.pattern??(n.pattern=wN),Tt.init(e,n)}),fM=se("$ZodCIDRv6",(e,n)=>{n.pattern??(n.pattern=_N),Tt.init(e,n),e._zod.check=s=>{const i=s.value.split("/");try{if(i.length!==2)throw new Error;const[r,c]=i;if(!c)throw new Error;const u=Number(c);if(`${u}`!==c)throw new Error;if(u<0||u>128)throw new Error;new URL(`http://[${r}]`)}catch{s.issues.push({code:"invalid_format",format:"cidrv6",input:s.value,inst:e,continue:!n.abort})}}});function qb(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const hM=se("$ZodBase64",(e,n)=>{n.pattern??(n.pattern=EN),Tt.init(e,n),e._zod.bag.contentEncoding="base64",e._zod.check=s=>{qb(s.value)||s.issues.push({code:"invalid_format",format:"base64",input:s.value,inst:e,continue:!n.abort})}});function mM(e){if(!Ab.test(e))return!1;const n=e.replace(/[-_]/g,i=>i==="-"?"+":"/"),s=n.padEnd(Math.ceil(n.length/4)*4,"=");return qb(s)}const pM=se("$ZodBase64URL",(e,n)=>{n.pattern??(n.pattern=Ab),Tt.init(e,n),e._zod.bag.contentEncoding="base64url",e._zod.check=s=>{mM(s.value)||s.issues.push({code:"invalid_format",format:"base64url",input:s.value,inst:e,continue:!n.abort})}}),gM=se("$ZodE164",(e,n)=>{n.pattern??(n.pattern=TN),Tt.init(e,n)});function vM(e,n=null){try{const s=e.split(".");if(s.length!==3)return!1;const[i]=s;if(!i)return!1;const r=JSON.parse(atob(i));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||n&&(!("alg"in r)||r.alg!==n))}catch{return!1}}const yM=se("$ZodJWT",(e,n)=>{Tt.init(e,n),e._zod.check=s=>{vM(s.value,n.alg)||s.issues.push({code:"invalid_format",format:"jwt",input:s.value,inst:e,continue:!n.abort})}}),Ub=se("$ZodNumber",(e,n)=>{Ot.init(e,n),e._zod.pattern=e._zod.bag.pattern??Pb,e._zod.parse=(s,i)=>{if(n.coerce)try{s.value=Number(s.value)}catch{}const r=s.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return s;const c=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return s.issues.push({expected:"number",code:"invalid_type",input:r,inst:e,...c?{received:c}:{}}),s}}),bM=se("$ZodNumberFormat",(e,n)=>{zN.init(e,n),Ub.init(e,n)}),xM=se("$ZodBoolean",(e,n)=>{Ot.init(e,n),e._zod.pattern=RN,e._zod.parse=(s,i)=>{if(n.coerce)try{s.value=!!s.value}catch{}const r=s.value;return typeof r=="boolean"||s.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:e}),s}}),SM=se("$ZodUnknown",(e,n)=>{Ot.init(e,n),e._zod.parse=s=>s}),wM=se("$ZodNever",(e,n)=>{Ot.init(e,n),e._zod.parse=(s,i)=>(s.issues.push({expected:"never",code:"invalid_type",input:s.value,inst:e}),s)});function by(e,n,s){e.issues.length&&n.issues.push(...Gi(s,e.issues)),n.value[s]=e.value}const _M=se("$ZodArray",(e,n)=>{Ot.init(e,n),e._zod.parse=(s,i)=>{const r=s.value;if(!Array.isArray(r))return s.issues.push({expected:"array",code:"invalid_type",input:r,inst:e}),s;s.value=Array(r.length);const c=[];for(let u=0;u<r.length;u++){const d=r[u],m=n.element._zod.run({value:d,issues:[]},i);m instanceof Promise?c.push(m.then(p=>by(p,s,u))):by(m,s,u)}return c.length?Promise.all(c).then(()=>s):s}});function vc(e,n,s,i,r){if(e.issues.length){if(r&&!(s in i))return;n.issues.push(...Gi(s,e.issues))}e.value===void 0?s in i&&(n.value[s]=void 0):n.value[s]=e.value}function $b(e){const n=Object.keys(e.shape);for(const i of n)if(!e.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const s=$T(e.shape);return{...e,keys:n,keySet:new Set(n),numKeys:n.length,optionalKeys:new Set(s)}}function Hb(e,n,s,i,r,c){const u=[],d=r.keySet,m=r.catchall._zod,p=m.def.type,y=m.optout==="optional";for(const v in n){if(d.has(v))continue;if(p==="never"){u.push(v);continue}const b=m.run({value:n[v],issues:[]},i);b instanceof Promise?e.push(b.then(S=>vc(S,s,v,n,y))):vc(b,s,v,n,y)}return u.length&&s.issues.push({code:"unrecognized_keys",keys:u,input:n,inst:c}),e.length?Promise.all(e).then(()=>s):s}const EM=se("$ZodObject",(e,n)=>{if(Ot.init(e,n),!Object.getOwnPropertyDescriptor(n,"shape")?.get){const d=n.shape;Object.defineProperty(n,"shape",{get:()=>{const m={...d};return Object.defineProperty(n,"shape",{value:m}),m}})}const i=Rh(()=>$b(n));ot(e._zod,"propValues",()=>{const d=n.shape,m={};for(const p in d){const y=d[p]._zod;if(y.values){m[p]??(m[p]=new Set);for(const v of y.values)m[p].add(v)}}return m});const r=gc,c=n.catchall;let u;e._zod.parse=(d,m)=>{u??(u=i.value);const p=d.value;if(!r(p))return d.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),d;d.value={};const y=[],v=u.shape;for(const b of u.keys){const S=v[b],_=S._zod.optout==="optional",T=S._zod.run({value:p[b],issues:[]},m);T instanceof Promise?y.push(T.then(j=>vc(j,d,b,p,_))):vc(T,d,b,p,_)}return c?Hb(y,p,d,m,i.value,e):y.length?Promise.all(y).then(()=>d):d}}),TM=se("$ZodObjectJIT",(e,n)=>{EM.init(e,n);const s=e._zod.parse,i=Rh(()=>$b(n)),r=b=>{const S=new GN(["shape","payload","ctx"]),_=i.value,T=P=>{const B=vy(P);return`shape[${B}]._zod.run({ value: input[${B}], issues: [] }, ctx)`};S.write("const input = payload.value;");const j=Object.create(null);let k=0;for(const P of _.keys)j[P]=`key_${k++}`;S.write("const newResult = {};");for(const P of _.keys){const B=j[P],q=vy(P),C=b[P]?._zod?.optout==="optional";S.write(`const ${B} = ${T(P)};`),C?S.write(`
        if (${B}.issues.length) {
          if (${q} in input) {
            payload.issues = payload.issues.concat(${B}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${q}, ...iss.path] : [${q}]
            })));
          }
        }
        
        if (${B}.value === undefined) {
          if (${q} in input) {
            newResult[${q}] = undefined;
          }
        } else {
          newResult[${q}] = ${B}.value;
        }
        
      `):S.write(`
        if (${B}.issues.length) {
          payload.issues = payload.issues.concat(${B}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${q}, ...iss.path] : [${q}]
          })));
        }
        
        if (${B}.value === undefined) {
          if (${q} in input) {
            newResult[${q}] = undefined;
          }
        } else {
          newResult[${q}] = ${B}.value;
        }
        
      `)}S.write("payload.value = newResult;"),S.write("return payload;");const R=S.compile();return(P,B)=>R(b,P,B)};let c;const u=gc,d=!Nb.jitless,p=d&&qT.value,y=n.catchall;let v;e._zod.parse=(b,S)=>{v??(v=i.value);const _=b.value;return u(_)?d&&p&&S?.async===!1&&S.jitless!==!0?(c||(c=r(n.shape)),b=c(b,S),y?Hb([],_,b,S,v,e):b):s(b,S):(b.issues.push({expected:"object",code:"invalid_type",input:_,inst:e}),b)}});function xy(e,n,s,i){for(const c of e)if(c.issues.length===0)return n.value=c.value,n;const r=e.filter(c=>!Fi(c));return r.length===1?(n.value=r[0].value,r[0]):(n.issues.push({code:"invalid_union",input:n.value,inst:s,errors:e.map(c=>c.issues.map(u=>Ds(u,i,Cs())))}),n)}const NM=se("$ZodUnion",(e,n)=>{Ot.init(e,n),ot(e._zod,"optin",()=>n.options.some(r=>r._zod.optin==="optional")?"optional":void 0),ot(e._zod,"optout",()=>n.options.some(r=>r._zod.optout==="optional")?"optional":void 0),ot(e._zod,"values",()=>{if(n.options.every(r=>r._zod.values))return new Set(n.options.flatMap(r=>Array.from(r._zod.values)))}),ot(e._zod,"pattern",()=>{if(n.options.every(r=>r._zod.pattern)){const r=n.options.map(c=>c._zod.pattern);return new RegExp(`^(${r.map(c=>Ah(c.source)).join("|")})$`)}});const s=n.options.length===1,i=n.options[0]._zod.run;e._zod.parse=(r,c)=>{if(s)return i(r,c);let u=!1;const d=[];for(const m of n.options){const p=m._zod.run({value:r.value,issues:[]},c);if(p instanceof Promise)d.push(p),u=!0;else{if(p.issues.length===0)return p;d.push(p)}}return u?Promise.all(d).then(m=>xy(m,r,e,c)):xy(d,r,e,c)}}),MM=se("$ZodIntersection",(e,n)=>{Ot.init(e,n),e._zod.parse=(s,i)=>{const r=s.value,c=n.left._zod.run({value:r,issues:[]},i),u=n.right._zod.run({value:r,issues:[]},i);return c instanceof Promise||u instanceof Promise?Promise.all([c,u]).then(([m,p])=>Sy(s,m,p)):Sy(s,c,u)}});function Xf(e,n){if(e===n)return{valid:!0,data:e};if(e instanceof Date&&n instanceof Date&&+e==+n)return{valid:!0,data:e};if(tl(e)&&tl(n)){const s=Object.keys(n),i=Object.keys(e).filter(c=>s.indexOf(c)!==-1),r={...e,...n};for(const c of i){const u=Xf(e[c],n[c]);if(!u.valid)return{valid:!1,mergeErrorPath:[c,...u.mergeErrorPath]};r[c]=u.data}return{valid:!0,data:r}}if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return{valid:!1,mergeErrorPath:[]};const s=[];for(let i=0;i<e.length;i++){const r=e[i],c=n[i],u=Xf(r,c);if(!u.valid)return{valid:!1,mergeErrorPath:[i,...u.mergeErrorPath]};s.push(u.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}function Sy(e,n,s){const i=new Map;let r;for(const d of n.issues)if(d.code==="unrecognized_keys"){r??(r=d);for(const m of d.keys)i.has(m)||i.set(m,{}),i.get(m).l=!0}else e.issues.push(d);for(const d of s.issues)if(d.code==="unrecognized_keys")for(const m of d.keys)i.has(m)||i.set(m,{}),i.get(m).r=!0;else e.issues.push(d);const c=[...i].filter(([,d])=>d.l&&d.r).map(([d])=>d);if(c.length&&r&&e.issues.push({...r,keys:c}),Fi(e))return e;const u=Xf(n.value,s.value);if(!u.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(u.mergeErrorPath)}`);return e.value=u.data,e}const jM=se("$ZodRecord",(e,n)=>{Ot.init(e,n),e._zod.parse=(s,i)=>{const r=s.value;if(!tl(r))return s.issues.push({expected:"record",code:"invalid_type",input:r,inst:e}),s;const c=[],u=n.keyType._zod.values;if(u){s.value={};const d=new Set;for(const p of u)if(typeof p=="string"||typeof p=="number"||typeof p=="symbol"){d.add(typeof p=="number"?p.toString():p);const y=n.valueType._zod.run({value:r[p],issues:[]},i);y instanceof Promise?c.push(y.then(v=>{v.issues.length&&s.issues.push(...Gi(p,v.issues)),s.value[p]=v.value})):(y.issues.length&&s.issues.push(...Gi(p,y.issues)),s.value[p]=y.value)}let m;for(const p in r)d.has(p)||(m=m??[],m.push(p));m&&m.length>0&&s.issues.push({code:"unrecognized_keys",input:r,inst:e,keys:m})}else{s.value={};for(const d of Reflect.ownKeys(r)){if(d==="__proto__")continue;let m=n.keyType._zod.run({value:d,issues:[]},i);if(m instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof d=="string"&&Pb.test(d)&&m.issues.length){const v=n.keyType._zod.run({value:Number(d),issues:[]},i);if(v instanceof Promise)throw new Error("Async schemas not supported in object keys currently");v.issues.length===0&&(m=v)}if(m.issues.length){n.mode==="loose"?s.value[d]=r[d]:s.issues.push({code:"invalid_key",origin:"record",issues:m.issues.map(v=>Ds(v,i,Cs())),input:d,path:[d],inst:e});continue}const y=n.valueType._zod.run({value:r[d],issues:[]},i);y instanceof Promise?c.push(y.then(v=>{v.issues.length&&s.issues.push(...Gi(d,v.issues)),s.value[m.value]=v.value})):(y.issues.length&&s.issues.push(...Gi(d,y.issues)),s.value[m.value]=y.value)}}return c.length?Promise.all(c).then(()=>s):s}}),CM=se("$ZodEnum",(e,n)=>{Ot.init(e,n);const s=Mb(n.entries),i=new Set(s);e._zod.values=i,e._zod.pattern=new RegExp(`^(${s.filter(r=>UT.has(typeof r)).map(r=>typeof r=="string"?zc(r):r.toString()).join("|")})$`),e._zod.parse=(r,c)=>{const u=r.value;return i.has(u)||r.issues.push({code:"invalid_value",values:s,input:u,inst:e}),r}}),DM=se("$ZodTransform",(e,n)=>{Ot.init(e,n),e._zod.parse=(s,i)=>{if(i.direction==="backward")throw new Tb(e.constructor.name);const r=n.transform(s.value,s);if(i.async)return(r instanceof Promise?r:Promise.resolve(r)).then(u=>(s.value=u,s));if(r instanceof Promise)throw new Ki;return s.value=r,s}});function wy(e,n){return e.issues.length&&n===void 0?{issues:[],value:void 0}:e}const Zb=se("$ZodOptional",(e,n)=>{Ot.init(e,n),e._zod.optin="optional",e._zod.optout="optional",ot(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,void 0]):void 0),ot(e._zod,"pattern",()=>{const s=n.innerType._zod.pattern;return s?new RegExp(`^(${Ah(s.source)})?$`):void 0}),e._zod.parse=(s,i)=>{if(n.innerType._zod.optin==="optional"){const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(c=>wy(c,s.value)):wy(r,s.value)}return s.value===void 0?s:n.innerType._zod.run(s,i)}}),RM=se("$ZodExactOptional",(e,n)=>{Zb.init(e,n),ot(e._zod,"values",()=>n.innerType._zod.values),ot(e._zod,"pattern",()=>n.innerType._zod.pattern),e._zod.parse=(s,i)=>n.innerType._zod.run(s,i)}),kM=se("$ZodNullable",(e,n)=>{Ot.init(e,n),ot(e._zod,"optin",()=>n.innerType._zod.optin),ot(e._zod,"optout",()=>n.innerType._zod.optout),ot(e._zod,"pattern",()=>{const s=n.innerType._zod.pattern;return s?new RegExp(`^(${Ah(s.source)}|null)$`):void 0}),ot(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,null]):void 0),e._zod.parse=(s,i)=>s.value===null?s:n.innerType._zod.run(s,i)}),AM=se("$ZodDefault",(e,n)=>{Ot.init(e,n),e._zod.optin="optional",ot(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(s,i)=>{if(i.direction==="backward")return n.innerType._zod.run(s,i);if(s.value===void 0)return s.value=n.defaultValue,s;const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(c=>_y(c,n)):_y(r,n)}});function _y(e,n){return e.value===void 0&&(e.value=n.defaultValue),e}const OM=se("$ZodPrefault",(e,n)=>{Ot.init(e,n),e._zod.optin="optional",ot(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(s,i)=>(i.direction==="backward"||s.value===void 0&&(s.value=n.defaultValue),n.innerType._zod.run(s,i))}),zM=se("$ZodNonOptional",(e,n)=>{Ot.init(e,n),ot(e._zod,"values",()=>{const s=n.innerType._zod.values;return s?new Set([...s].filter(i=>i!==void 0)):void 0}),e._zod.parse=(s,i)=>{const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(c=>Ey(c,e)):Ey(r,e)}});function Ey(e,n){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:n}),e}const PM=se("$ZodCatch",(e,n)=>{Ot.init(e,n),ot(e._zod,"optin",()=>n.innerType._zod.optin),ot(e._zod,"optout",()=>n.innerType._zod.optout),ot(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(s,i)=>{if(i.direction==="backward")return n.innerType._zod.run(s,i);const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(c=>(s.value=c.value,c.issues.length&&(s.value=n.catchValue({...s,error:{issues:c.issues.map(u=>Ds(u,i,Cs()))},input:s.value}),s.issues=[]),s)):(s.value=r.value,r.issues.length&&(s.value=n.catchValue({...s,error:{issues:r.issues.map(c=>Ds(c,i,Cs()))},input:s.value}),s.issues=[]),s)}}),IM=se("$ZodPipe",(e,n)=>{Ot.init(e,n),ot(e._zod,"values",()=>n.in._zod.values),ot(e._zod,"optin",()=>n.in._zod.optin),ot(e._zod,"optout",()=>n.out._zod.optout),ot(e._zod,"propValues",()=>n.in._zod.propValues),e._zod.parse=(s,i)=>{if(i.direction==="backward"){const c=n.out._zod.run(s,i);return c instanceof Promise?c.then(u=>Uo(u,n.in,i)):Uo(c,n.in,i)}const r=n.in._zod.run(s,i);return r instanceof Promise?r.then(c=>Uo(c,n.out,i)):Uo(r,n.out,i)}});function Uo(e,n,s){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:e.value,issues:e.issues},s)}const BM=se("$ZodReadonly",(e,n)=>{Ot.init(e,n),ot(e._zod,"propValues",()=>n.innerType._zod.propValues),ot(e._zod,"values",()=>n.innerType._zod.values),ot(e._zod,"optin",()=>n.innerType?._zod?.optin),ot(e._zod,"optout",()=>n.innerType?._zod?.optout),e._zod.parse=(s,i)=>{if(i.direction==="backward")return n.innerType._zod.run(s,i);const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(Ty):Ty(r)}});function Ty(e){return e.value=Object.freeze(e.value),e}const LM=se("$ZodCustom",(e,n)=>{Rn.init(e,n),Ot.init(e,n),e._zod.parse=(s,i)=>s,e._zod.check=s=>{const i=s.value,r=n.fn(i);if(r instanceof Promise)return r.then(c=>Ny(c,s,i,e));Ny(r,s,i,e)}});function Ny(e,n,s,i){if(!e){const r={code:"custom",input:s,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(r.params=i._zod.def.params),n.issues.push(hr(r))}}var My;class qM{constructor(){this._map=new WeakMap,this._idmap=new Map}add(n,...s){const i=s[0];return this._map.set(n,i),i&&typeof i=="object"&&"id"in i&&this._idmap.set(i.id,n),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(n){const s=this._map.get(n);return s&&typeof s=="object"&&"id"in s&&this._idmap.delete(s.id),this._map.delete(n),this}get(n){const s=n._zod.parent;if(s){const i={...this.get(s)??{}};delete i.id;const r={...i,...this._map.get(n)};return Object.keys(r).length?r:void 0}return this._map.get(n)}has(n){return this._map.has(n)}}function UM(){return new qM}(My=globalThis).__zod_globalRegistry??(My.__zod_globalRegistry=UM());const ar=globalThis.__zod_globalRegistry;function $M(e,n){return new e({type:"string",...Se(n)})}function HM(e,n){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Se(n)})}function jy(e,n){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Se(n)})}function ZM(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Se(n)})}function FM(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Se(n)})}function GM(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Se(n)})}function YM(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Se(n)})}function VM(e,n){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Se(n)})}function KM(e,n){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Se(n)})}function WM(e,n){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Se(n)})}function XM(e,n){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Se(n)})}function QM(e,n){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Se(n)})}function JM(e,n){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Se(n)})}function e2(e,n){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Se(n)})}function t2(e,n){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Se(n)})}function n2(e,n){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Se(n)})}function a2(e,n){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Se(n)})}function s2(e,n){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Se(n)})}function i2(e,n){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Se(n)})}function l2(e,n){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Se(n)})}function r2(e,n){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Se(n)})}function o2(e,n){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Se(n)})}function c2(e,n){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Se(n)})}function u2(e,n){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Se(n)})}function d2(e,n){return new e({type:"string",format:"date",check:"string_format",...Se(n)})}function f2(e,n){return new e({type:"string",format:"time",check:"string_format",precision:null,...Se(n)})}function h2(e,n){return new e({type:"string",format:"duration",check:"string_format",...Se(n)})}function m2(e,n){return new e({type:"number",checks:[],...Se(n)})}function p2(e,n){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Se(n)})}function g2(e,n){return new e({type:"boolean",...Se(n)})}function v2(e){return new e({type:"unknown"})}function y2(e,n){return new e({type:"never",...Se(n)})}function Cy(e,n){return new Bb({check:"less_than",...Se(n),value:e,inclusive:!1})}function vf(e,n){return new Bb({check:"less_than",...Se(n),value:e,inclusive:!0})}function Dy(e,n){return new Lb({check:"greater_than",...Se(n),value:e,inclusive:!1})}function yf(e,n){return new Lb({check:"greater_than",...Se(n),value:e,inclusive:!0})}function Ry(e,n){return new ON({check:"multiple_of",...Se(n),value:e})}function Fb(e,n){return new PN({check:"max_length",...Se(n),maximum:e})}function yc(e,n){return new IN({check:"min_length",...Se(n),minimum:e})}function Gb(e,n){return new BN({check:"length_equals",...Se(n),length:e})}function b2(e,n){return new LN({check:"string_format",format:"regex",...Se(n),pattern:e})}function x2(e){return new qN({check:"string_format",format:"lowercase",...Se(e)})}function S2(e){return new UN({check:"string_format",format:"uppercase",...Se(e)})}function w2(e,n){return new $N({check:"string_format",format:"includes",...Se(n),includes:e})}function _2(e,n){return new HN({check:"string_format",format:"starts_with",...Se(n),prefix:e})}function E2(e,n){return new ZN({check:"string_format",format:"ends_with",...Se(n),suffix:e})}function ll(e){return new FN({check:"overwrite",tx:e})}function T2(e){return ll(n=>n.normalize(e))}function N2(){return ll(e=>e.trim())}function M2(){return ll(e=>e.toLowerCase())}function j2(){return ll(e=>e.toUpperCase())}function C2(){return ll(e=>LT(e))}function D2(e,n,s){return new e({type:"array",element:n,...Se(s)})}function R2(e,n,s){return new e({type:"custom",check:"custom",fn:n,...Se(s)})}function k2(e){const n=A2(s=>(s.addIssue=i=>{if(typeof i=="string")s.issues.push(hr(i,s.value,n._zod.def));else{const r=i;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=s.value),r.inst??(r.inst=n),r.continue??(r.continue=!n._zod.def.abort),s.issues.push(hr(r))}},e(s.value,s)));return n}function A2(e,n){const s=new Rn({check:"custom",...Se(n)});return s._zod.check=e,s}function Yb(e){let n=e?.target??"draft-2020-12";return n==="draft-4"&&(n="draft-04"),n==="draft-7"&&(n="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??ar,target:n,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function Vt(e,n,s={path:[],schemaPath:[]}){var i;const r=e._zod.def,c=n.seen.get(e);if(c)return c.count++,s.schemaPath.includes(e)&&(c.cycle=s.path),c.schema;const u={schema:{},count:1,cycle:void 0,path:s.path};n.seen.set(e,u);const d=e._zod.toJSONSchema?.();if(d)u.schema=d;else{const y={...s,schemaPath:[...s.schemaPath,e],path:s.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(n,u.schema,y);else{const b=u.schema,S=n.processors[r.type];if(!S)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${r.type}`);S(e,n,b,y)}const v=e._zod.parent;v&&(u.ref||(u.ref=v),Vt(v,n,y),n.seen.get(v).isParent=!0)}const m=n.metadataRegistry.get(e);return m&&Object.assign(u.schema,m),n.io==="input"&&wn(e)&&(delete u.schema.examples,delete u.schema.default),n.io==="input"&&u.schema._prefault&&((i=u.schema).default??(i.default=u.schema._prefault)),delete u.schema._prefault,n.seen.get(e).schema}function Vb(e,n){const s=e.seen.get(n);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=new Map;for(const u of e.seen.entries()){const d=e.metadataRegistry.get(u[0])?.id;if(d){const m=i.get(d);if(m&&m!==u[0])throw new Error(`Duplicate schema id "${d}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);i.set(d,u[0])}}const r=u=>{const d=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const v=e.external.registry.get(u[0])?.id,b=e.external.uri??(_=>_);if(v)return{ref:b(v)};const S=u[1].defId??u[1].schema.id??`schema${e.counter++}`;return u[1].defId=S,{defId:S,ref:`${b("__shared")}#/${d}/${S}`}}if(u[1]===s)return{ref:"#"};const p=`#/${d}/`,y=u[1].schema.id??`__schema${e.counter++}`;return{defId:y,ref:p+y}},c=u=>{if(u[1].schema.$ref)return;const d=u[1],{ref:m,defId:p}=r(u);d.def={...d.schema},p&&(d.defId=p);const y=d.schema;for(const v in y)delete y[v];y.$ref=m};if(e.cycles==="throw")for(const u of e.seen.entries()){const d=u[1];if(d.cycle)throw new Error(`Cycle detected: #/${d.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const u of e.seen.entries()){const d=u[1];if(n===u[0]){c(u);continue}if(e.external){const p=e.external.registry.get(u[0])?.id;if(n!==u[0]&&p){c(u);continue}}if(e.metadataRegistry.get(u[0])?.id){c(u);continue}if(d.cycle){c(u);continue}if(d.count>1&&e.reused==="ref"){c(u);continue}}}function Kb(e,n){const s=e.seen.get(n);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=u=>{const d=e.seen.get(u);if(d.ref===null)return;const m=d.def??d.schema,p={...m},y=d.ref;if(d.ref=null,y){i(y);const b=e.seen.get(y),S=b.schema;if(S.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(m.allOf=m.allOf??[],m.allOf.push(S)):Object.assign(m,S),Object.assign(m,p),u._zod.parent===y)for(const T in m)T==="$ref"||T==="allOf"||T in p||delete m[T];if(S.$ref&&b.def)for(const T in m)T==="$ref"||T==="allOf"||T in b.def&&JSON.stringify(m[T])===JSON.stringify(b.def[T])&&delete m[T]}const v=u._zod.parent;if(v&&v!==y){i(v);const b=e.seen.get(v);if(b?.schema.$ref&&(m.$ref=b.schema.$ref,b.def))for(const S in m)S==="$ref"||S==="allOf"||S in b.def&&JSON.stringify(m[S])===JSON.stringify(b.def[S])&&delete m[S]}e.override({zodSchema:u,jsonSchema:m,path:d.path??[]})};for(const u of[...e.seen.entries()].reverse())i(u[0]);const r={};if(e.target==="draft-2020-12"?r.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?r.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?r.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const u=e.external.registry.get(n)?.id;if(!u)throw new Error("Schema is missing an `id` property");r.$id=e.external.uri(u)}Object.assign(r,s.def??s.schema);const c=e.external?.defs??{};for(const u of e.seen.entries()){const d=u[1];d.def&&d.defId&&(c[d.defId]=d.def)}e.external||Object.keys(c).length>0&&(e.target==="draft-2020-12"?r.$defs=c:r.definitions=c);try{const u=JSON.parse(JSON.stringify(r));return Object.defineProperty(u,"~standard",{value:{...n["~standard"],jsonSchema:{input:bc(n,"input",e.processors),output:bc(n,"output",e.processors)}},enumerable:!1,writable:!1}),u}catch{throw new Error("Error converting schema to JSON.")}}function wn(e,n){const s=n??{seen:new Set};if(s.seen.has(e))return!1;s.seen.add(e);const i=e._zod.def;if(i.type==="transform")return!0;if(i.type==="array")return wn(i.element,s);if(i.type==="set")return wn(i.valueType,s);if(i.type==="lazy")return wn(i.getter(),s);if(i.type==="promise"||i.type==="optional"||i.type==="nonoptional"||i.type==="nullable"||i.type==="readonly"||i.type==="default"||i.type==="prefault")return wn(i.innerType,s);if(i.type==="intersection")return wn(i.left,s)||wn(i.right,s);if(i.type==="record"||i.type==="map")return wn(i.keyType,s)||wn(i.valueType,s);if(i.type==="pipe")return wn(i.in,s)||wn(i.out,s);if(i.type==="object"){for(const r in i.shape)if(wn(i.shape[r],s))return!0;return!1}if(i.type==="union"){for(const r of i.options)if(wn(r,s))return!0;return!1}if(i.type==="tuple"){for(const r of i.items)if(wn(r,s))return!0;return!!(i.rest&&wn(i.rest,s))}return!1}const O2=(e,n={})=>s=>{const i=Yb({...s,processors:n});return Vt(e,i),Vb(i,e),Kb(i,e)},bc=(e,n,s={})=>i=>{const{libraryOptions:r,target:c}=i??{},u=Yb({...r??{},target:c,io:n,processors:s});return Vt(e,u),Vb(u,e),Kb(u,e)},z2={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},P2=(e,n,s,i)=>{const r=s;r.type="string";const{minimum:c,maximum:u,format:d,patterns:m,contentEncoding:p}=e._zod.bag;if(typeof c=="number"&&(r.minLength=c),typeof u=="number"&&(r.maxLength=u),d&&(r.format=z2[d]??d,r.format===""&&delete r.format,d==="time"&&delete r.format),p&&(r.contentEncoding=p),m&&m.size>0){const y=[...m];y.length===1?r.pattern=y[0].source:y.length>1&&(r.allOf=[...y.map(v=>({...n.target==="draft-07"||n.target==="draft-04"||n.target==="openapi-3.0"?{type:"string"}:{},pattern:v.source}))])}},I2=(e,n,s,i)=>{const r=s,{minimum:c,maximum:u,format:d,multipleOf:m,exclusiveMaximum:p,exclusiveMinimum:y}=e._zod.bag;typeof d=="string"&&d.includes("int")?r.type="integer":r.type="number",typeof y=="number"&&(n.target==="draft-04"||n.target==="openapi-3.0"?(r.minimum=y,r.exclusiveMinimum=!0):r.exclusiveMinimum=y),typeof c=="number"&&(r.minimum=c,typeof y=="number"&&n.target!=="draft-04"&&(y>=c?delete r.minimum:delete r.exclusiveMinimum)),typeof p=="number"&&(n.target==="draft-04"||n.target==="openapi-3.0"?(r.maximum=p,r.exclusiveMaximum=!0):r.exclusiveMaximum=p),typeof u=="number"&&(r.maximum=u,typeof p=="number"&&n.target!=="draft-04"&&(p<=u?delete r.maximum:delete r.exclusiveMaximum)),typeof m=="number"&&(r.multipleOf=m)},B2=(e,n,s,i)=>{s.type="boolean"},L2=(e,n,s,i)=>{s.not={}},q2=(e,n,s,i)=>{},U2=(e,n,s,i)=>{const r=e._zod.def,c=Mb(r.entries);c.every(u=>typeof u=="number")&&(s.type="number"),c.every(u=>typeof u=="string")&&(s.type="string"),s.enum=c},$2=(e,n,s,i)=>{if(n.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},H2=(e,n,s,i)=>{if(n.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},Z2=(e,n,s,i)=>{const r=s,c=e._zod.def,{minimum:u,maximum:d}=e._zod.bag;typeof u=="number"&&(r.minItems=u),typeof d=="number"&&(r.maxItems=d),r.type="array",r.items=Vt(c.element,n,{...i,path:[...i.path,"items"]})},F2=(e,n,s,i)=>{const r=s,c=e._zod.def;r.type="object",r.properties={};const u=c.shape;for(const p in u)r.properties[p]=Vt(u[p],n,{...i,path:[...i.path,"properties",p]});const d=new Set(Object.keys(u)),m=new Set([...d].filter(p=>{const y=c.shape[p]._zod;return n.io==="input"?y.optin===void 0:y.optout===void 0}));m.size>0&&(r.required=Array.from(m)),c.catchall?._zod.def.type==="never"?r.additionalProperties=!1:c.catchall?c.catchall&&(r.additionalProperties=Vt(c.catchall,n,{...i,path:[...i.path,"additionalProperties"]})):n.io==="output"&&(r.additionalProperties=!1)},G2=(e,n,s,i)=>{const r=e._zod.def,c=r.inclusive===!1,u=r.options.map((d,m)=>Vt(d,n,{...i,path:[...i.path,c?"oneOf":"anyOf",m]}));c?s.oneOf=u:s.anyOf=u},Y2=(e,n,s,i)=>{const r=e._zod.def,c=Vt(r.left,n,{...i,path:[...i.path,"allOf",0]}),u=Vt(r.right,n,{...i,path:[...i.path,"allOf",1]}),d=p=>"allOf"in p&&Object.keys(p).length===1,m=[...d(c)?c.allOf:[c],...d(u)?u.allOf:[u]];s.allOf=m},V2=(e,n,s,i)=>{const r=s,c=e._zod.def;r.type="object";const u=c.keyType,m=u._zod.bag?.patterns;if(c.mode==="loose"&&m&&m.size>0){const y=Vt(c.valueType,n,{...i,path:[...i.path,"patternProperties","*"]});r.patternProperties={};for(const v of m)r.patternProperties[v.source]=y}else(n.target==="draft-07"||n.target==="draft-2020-12")&&(r.propertyNames=Vt(c.keyType,n,{...i,path:[...i.path,"propertyNames"]})),r.additionalProperties=Vt(c.valueType,n,{...i,path:[...i.path,"additionalProperties"]});const p=u._zod.values;if(p){const y=[...p].filter(v=>typeof v=="string"||typeof v=="number");y.length>0&&(r.required=y)}},K2=(e,n,s,i)=>{const r=e._zod.def,c=Vt(r.innerType,n,i),u=n.seen.get(e);n.target==="openapi-3.0"?(u.ref=r.innerType,s.nullable=!0):s.anyOf=[c,{type:"null"}]},W2=(e,n,s,i)=>{const r=e._zod.def;Vt(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType},X2=(e,n,s,i)=>{const r=e._zod.def;Vt(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType,s.default=JSON.parse(JSON.stringify(r.defaultValue))},Q2=(e,n,s,i)=>{const r=e._zod.def;Vt(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType,n.io==="input"&&(s._prefault=JSON.parse(JSON.stringify(r.defaultValue)))},J2=(e,n,s,i)=>{const r=e._zod.def;Vt(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType;let u;try{u=r.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}s.default=u},ej=(e,n,s,i)=>{const r=e._zod.def,c=n.io==="input"?r.in._zod.def.type==="transform"?r.out:r.in:r.out;Vt(c,n,i);const u=n.seen.get(e);u.ref=c},tj=(e,n,s,i)=>{const r=e._zod.def;Vt(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType,s.readOnly=!0},Wb=(e,n,s,i)=>{const r=e._zod.def;Vt(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType},nj=se("ZodISODateTime",(e,n)=>{iM.init(e,n),Ct.init(e,n)});function aj(e){return u2(nj,e)}const sj=se("ZodISODate",(e,n)=>{lM.init(e,n),Ct.init(e,n)});function ij(e){return d2(sj,e)}const lj=se("ZodISOTime",(e,n)=>{rM.init(e,n),Ct.init(e,n)});function rj(e){return f2(lj,e)}const oj=se("ZodISODuration",(e,n)=>{oM.init(e,n),Ct.init(e,n)});function cj(e){return h2(oj,e)}const uj=(e,n)=>{Rb.init(e,n),e.name="ZodError",Object.defineProperties(e,{format:{value:s=>QT(e,s)},flatten:{value:s=>XT(e,s)},addIssue:{value:s=>{e.issues.push(s),e.message=JSON.stringify(e.issues,Wf,2)}},addIssues:{value:s=>{e.issues.push(...s),e.message=JSON.stringify(e.issues,Wf,2)}},isEmpty:{get(){return e.issues.length===0}}})},ea=se("ZodError",uj,{Parent:Error}),dj=zh(ea),fj=Ph(ea),hj=Pc(ea),mj=Ic(ea),pj=tN(ea),gj=nN(ea),vj=aN(ea),yj=sN(ea),bj=iN(ea),xj=lN(ea),Sj=rN(ea),wj=oN(ea),zt=se("ZodType",(e,n)=>(Ot.init(e,n),Object.assign(e["~standard"],{jsonSchema:{input:bc(e,"input"),output:bc(e,"output")}}),e.toJSONSchema=O2(e,{}),e.def=n,e.type=n.type,Object.defineProperty(e,"_def",{value:n}),e.check=(...s)=>e.clone(Rs(n,{checks:[...n.checks??[],...s.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]}),{parent:!0}),e.with=e.check,e.clone=(s,i)=>ks(e,s,i),e.brand=()=>e,e.register=((s,i)=>(s.add(e,i),e)),e.parse=(s,i)=>dj(e,s,i,{callee:e.parse}),e.safeParse=(s,i)=>hj(e,s,i),e.parseAsync=async(s,i)=>fj(e,s,i,{callee:e.parseAsync}),e.safeParseAsync=async(s,i)=>mj(e,s,i),e.spa=e.safeParseAsync,e.encode=(s,i)=>pj(e,s,i),e.decode=(s,i)=>gj(e,s,i),e.encodeAsync=async(s,i)=>vj(e,s,i),e.decodeAsync=async(s,i)=>yj(e,s,i),e.safeEncode=(s,i)=>bj(e,s,i),e.safeDecode=(s,i)=>xj(e,s,i),e.safeEncodeAsync=async(s,i)=>Sj(e,s,i),e.safeDecodeAsync=async(s,i)=>wj(e,s,i),e.refine=(s,i)=>e.check(pC(s,i)),e.superRefine=s=>e.check(gC(s)),e.overwrite=s=>e.check(ll(s)),e.optional=()=>zy(e),e.exactOptional=()=>nC(e),e.nullable=()=>Py(e),e.nullish=()=>zy(Py(e)),e.nonoptional=s=>oC(e,s),e.array=()=>Un(e),e.or=s=>Kj([e,s]),e.and=s=>Xj(e,s),e.transform=s=>Iy(e,eC(s)),e.default=s=>iC(e,s),e.prefault=s=>rC(e,s),e.catch=s=>uC(e,s),e.pipe=s=>Iy(e,s),e.readonly=()=>hC(e),e.describe=s=>{const i=e.clone();return ar.add(i,{description:s}),i},Object.defineProperty(e,"description",{get(){return ar.get(e)?.description},configurable:!0}),e.meta=(...s)=>{if(s.length===0)return ar.get(e);const i=e.clone();return ar.add(i,s[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=s=>s(e),e)),Xb=se("_ZodString",(e,n)=>{Ih.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(i,r,c)=>P2(e,i,r);const s=e._zod.bag;e.format=s.format??null,e.minLength=s.minimum??null,e.maxLength=s.maximum??null,e.regex=(...i)=>e.check(b2(...i)),e.includes=(...i)=>e.check(w2(...i)),e.startsWith=(...i)=>e.check(_2(...i)),e.endsWith=(...i)=>e.check(E2(...i)),e.min=(...i)=>e.check(yc(...i)),e.max=(...i)=>e.check(Fb(...i)),e.length=(...i)=>e.check(Gb(...i)),e.nonempty=(...i)=>e.check(yc(1,...i)),e.lowercase=i=>e.check(x2(i)),e.uppercase=i=>e.check(S2(i)),e.trim=()=>e.check(N2()),e.normalize=(...i)=>e.check(T2(...i)),e.toLowerCase=()=>e.check(M2()),e.toUpperCase=()=>e.check(j2()),e.slugify=()=>e.check(C2())}),_j=se("ZodString",(e,n)=>{Ih.init(e,n),Xb.init(e,n),e.email=s=>e.check(HM(Ej,s)),e.url=s=>e.check(VM(Tj,s)),e.jwt=s=>e.check(c2(qj,s)),e.emoji=s=>e.check(KM(Nj,s)),e.guid=s=>e.check(jy(ky,s)),e.uuid=s=>e.check(ZM($o,s)),e.uuidv4=s=>e.check(FM($o,s)),e.uuidv6=s=>e.check(GM($o,s)),e.uuidv7=s=>e.check(YM($o,s)),e.nanoid=s=>e.check(WM(Mj,s)),e.guid=s=>e.check(jy(ky,s)),e.cuid=s=>e.check(XM(jj,s)),e.cuid2=s=>e.check(QM(Cj,s)),e.ulid=s=>e.check(JM(Dj,s)),e.base64=s=>e.check(l2(Ij,s)),e.base64url=s=>e.check(r2(Bj,s)),e.xid=s=>e.check(e2(Rj,s)),e.ksuid=s=>e.check(t2(kj,s)),e.ipv4=s=>e.check(n2(Aj,s)),e.ipv6=s=>e.check(a2(Oj,s)),e.cidrv4=s=>e.check(s2(zj,s)),e.cidrv6=s=>e.check(i2(Pj,s)),e.e164=s=>e.check(o2(Lj,s)),e.datetime=s=>e.check(aj(s)),e.date=s=>e.check(ij(s)),e.time=s=>e.check(rj(s)),e.duration=s=>e.check(cj(s))});function Cn(e){return $M(_j,e)}const Ct=se("ZodStringFormat",(e,n)=>{Tt.init(e,n),Xb.init(e,n)}),Ej=se("ZodEmail",(e,n)=>{WN.init(e,n),Ct.init(e,n)}),ky=se("ZodGUID",(e,n)=>{VN.init(e,n),Ct.init(e,n)}),$o=se("ZodUUID",(e,n)=>{KN.init(e,n),Ct.init(e,n)}),Tj=se("ZodURL",(e,n)=>{XN.init(e,n),Ct.init(e,n)}),Nj=se("ZodEmoji",(e,n)=>{QN.init(e,n),Ct.init(e,n)}),Mj=se("ZodNanoID",(e,n)=>{JN.init(e,n),Ct.init(e,n)}),jj=se("ZodCUID",(e,n)=>{eM.init(e,n),Ct.init(e,n)}),Cj=se("ZodCUID2",(e,n)=>{tM.init(e,n),Ct.init(e,n)}),Dj=se("ZodULID",(e,n)=>{nM.init(e,n),Ct.init(e,n)}),Rj=se("ZodXID",(e,n)=>{aM.init(e,n),Ct.init(e,n)}),kj=se("ZodKSUID",(e,n)=>{sM.init(e,n),Ct.init(e,n)}),Aj=se("ZodIPv4",(e,n)=>{cM.init(e,n),Ct.init(e,n)}),Oj=se("ZodIPv6",(e,n)=>{uM.init(e,n),Ct.init(e,n)}),zj=se("ZodCIDRv4",(e,n)=>{dM.init(e,n),Ct.init(e,n)}),Pj=se("ZodCIDRv6",(e,n)=>{fM.init(e,n),Ct.init(e,n)}),Ij=se("ZodBase64",(e,n)=>{hM.init(e,n),Ct.init(e,n)}),Bj=se("ZodBase64URL",(e,n)=>{pM.init(e,n),Ct.init(e,n)}),Lj=se("ZodE164",(e,n)=>{gM.init(e,n),Ct.init(e,n)}),qj=se("ZodJWT",(e,n)=>{yM.init(e,n),Ct.init(e,n)}),Qb=se("ZodNumber",(e,n)=>{Ub.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(i,r,c)=>I2(e,i,r),e.gt=(i,r)=>e.check(Dy(i,r)),e.gte=(i,r)=>e.check(yf(i,r)),e.min=(i,r)=>e.check(yf(i,r)),e.lt=(i,r)=>e.check(Cy(i,r)),e.lte=(i,r)=>e.check(vf(i,r)),e.max=(i,r)=>e.check(vf(i,r)),e.int=i=>e.check(Ay(i)),e.safe=i=>e.check(Ay(i)),e.positive=i=>e.check(Dy(0,i)),e.nonnegative=i=>e.check(yf(0,i)),e.negative=i=>e.check(Cy(0,i)),e.nonpositive=i=>e.check(vf(0,i)),e.multipleOf=(i,r)=>e.check(Ry(i,r)),e.step=(i,r)=>e.check(Ry(i,r)),e.finite=()=>e;const s=e._zod.bag;e.minValue=Math.max(s.minimum??Number.NEGATIVE_INFINITY,s.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(s.maximum??Number.POSITIVE_INFINITY,s.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(s.format??"").includes("int")||Number.isSafeInteger(s.multipleOf??.5),e.isFinite=!0,e.format=s.format??null});function la(e){return m2(Qb,e)}const Uj=se("ZodNumberFormat",(e,n)=>{bM.init(e,n),Qb.init(e,n)});function Ay(e){return p2(Uj,e)}const $j=se("ZodBoolean",(e,n)=>{xM.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>B2(e,s,i)});function sr(e){return g2($j,e)}const Hj=se("ZodUnknown",(e,n)=>{SM.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>q2()});function Oy(){return v2(Hj)}const Zj=se("ZodNever",(e,n)=>{wM.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>L2(e,s,i)});function Fj(e){return y2(Zj,e)}const Gj=se("ZodArray",(e,n)=>{_M.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>Z2(e,s,i,r),e.element=n.element,e.min=(s,i)=>e.check(yc(s,i)),e.nonempty=s=>e.check(yc(1,s)),e.max=(s,i)=>e.check(Fb(s,i)),e.length=(s,i)=>e.check(Gb(s,i)),e.unwrap=()=>e.element});function Un(e,n){return D2(Gj,e,n)}const Yj=se("ZodObject",(e,n)=>{TM.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>F2(e,s,i,r),ot(e,"shape",()=>n.shape),e.keyof=()=>xc(Object.keys(e._zod.def.shape)),e.catchall=s=>e.clone({...e._zod.def,catchall:s}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Oy()}),e.loose=()=>e.clone({...e._zod.def,catchall:Oy()}),e.strict=()=>e.clone({...e._zod.def,catchall:Fj()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=s=>GT(e,s),e.safeExtend=s=>YT(e,s),e.merge=s=>VT(e,s),e.pick=s=>ZT(e,s),e.omit=s=>FT(e,s),e.partial=(...s)=>KT(Jb,e,s[0]),e.required=(...s)=>WT(ex,e,s[0])});function mr(e,n){const s={type:"object",shape:e??{},...Se(n)};return new Yj(s)}const Vj=se("ZodUnion",(e,n)=>{NM.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>G2(e,s,i,r),e.options=n.options});function Kj(e,n){return new Vj({type:"union",options:e,...Se(n)})}const Wj=se("ZodIntersection",(e,n)=>{MM.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>Y2(e,s,i,r)});function Xj(e,n){return new Wj({type:"intersection",left:e,right:n})}const Qj=se("ZodRecord",(e,n)=>{jM.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>V2(e,s,i,r),e.keyType=n.keyType,e.valueType=n.valueType});function or(e,n,s){return new Qj({type:"record",keyType:e,valueType:n,...Se(s)})}const Qf=se("ZodEnum",(e,n)=>{CM.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(i,r,c)=>U2(e,i,r),e.enum=n.entries,e.options=Object.values(n.entries);const s=new Set(Object.keys(n.entries));e.extract=(i,r)=>{const c={};for(const u of i)if(s.has(u))c[u]=n.entries[u];else throw new Error(`Key ${u} not found in enum`);return new Qf({...n,checks:[],...Se(r),entries:c})},e.exclude=(i,r)=>{const c={...n.entries};for(const u of i)if(s.has(u))delete c[u];else throw new Error(`Key ${u} not found in enum`);return new Qf({...n,checks:[],...Se(r),entries:c})}});function xc(e,n){const s=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new Qf({type:"enum",entries:s,...Se(n)})}const Jj=se("ZodTransform",(e,n)=>{DM.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>H2(e,s),e._zod.parse=(s,i)=>{if(i.direction==="backward")throw new Tb(e.constructor.name);s.addIssue=c=>{if(typeof c=="string")s.issues.push(hr(c,s.value,n));else{const u=c;u.fatal&&(u.continue=!1),u.code??(u.code="custom"),u.input??(u.input=s.value),u.inst??(u.inst=e),s.issues.push(hr(u))}};const r=n.transform(s.value,s);return r instanceof Promise?r.then(c=>(s.value=c,s)):(s.value=r,s)}});function eC(e){return new Jj({type:"transform",transform:e})}const Jb=se("ZodOptional",(e,n)=>{Zb.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>Wb(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function zy(e){return new Jb({type:"optional",innerType:e})}const tC=se("ZodExactOptional",(e,n)=>{RM.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>Wb(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function nC(e){return new tC({type:"optional",innerType:e})}const aC=se("ZodNullable",(e,n)=>{kM.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>K2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function Py(e){return new aC({type:"nullable",innerType:e})}const sC=se("ZodDefault",(e,n)=>{AM.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>X2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function iC(e,n){return new sC({type:"default",innerType:e,get defaultValue(){return typeof n=="function"?n():Cb(n)}})}const lC=se("ZodPrefault",(e,n)=>{OM.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>Q2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function rC(e,n){return new lC({type:"prefault",innerType:e,get defaultValue(){return typeof n=="function"?n():Cb(n)}})}const ex=se("ZodNonOptional",(e,n)=>{zM.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>W2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function oC(e,n){return new ex({type:"nonoptional",innerType:e,...Se(n)})}const cC=se("ZodCatch",(e,n)=>{PM.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>J2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function uC(e,n){return new cC({type:"catch",innerType:e,catchValue:typeof n=="function"?n:()=>n})}const dC=se("ZodPipe",(e,n)=>{IM.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>ej(e,s,i,r),e.in=n.in,e.out=n.out});function Iy(e,n){return new dC({type:"pipe",in:e,out:n})}const fC=se("ZodReadonly",(e,n)=>{BM.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>tj(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function hC(e){return new fC({type:"readonly",innerType:e})}const mC=se("ZodCustom",(e,n)=>{LM.init(e,n),zt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>$2(e,s)});function pC(e,n={}){return R2(mC,e,n)}function gC(e){return k2(e)}const vC=["list","grid"],Ha={text:"",categories:[],types:[],tiers:[],classReqs:[],majorIds:[],numericRanges:{},exclusionRanges:{},onlyWearableAtLevel:106,onlyClassCompatible:!1,excludeRestricted:!1,sortKeys:["relevance"],sortDescending:!0,viewMode:"list",resultsBelowBuild:!0},By=mr({min:la().finite().optional(),max:la().finite().optional()}),yC=mr({text:Cn().catch(Ha.text),categories:Un(Cn()).catch([]),types:Un(Cn()).catch([]),tiers:Un(Cn()).catch([]),classReqs:Un(xc(["Warrior","Assassin","Mage","Archer","Shaman"])).catch([]),majorIds:Un(Cn()).catch([]),numericRanges:or(Cn(),By).catch({}),exclusionRanges:or(Cn(),By).catch({}),onlyWearableAtLevel:la().int().min(1).max(106).nullable().catch(106),onlyClassCompatible:sr().catch(!1),excludeRestricted:sr().catch(!1),sortKeys:Un(Cn()).catch(["relevance"]),sortDescending:sr().catch(!0),viewMode:xc(vC).catch("list"),resultsBelowBuild:sr().catch(!0)});function tx(e){const n=e,s=yC.parse(e),i=Array.isArray(s.sortKeys)&&s.sortKeys.length>0?s.sortKeys:typeof n?.sort=="string"?[n.sort]:["relevance"];return{text:s.text,categories:s.categories,types:s.types,tiers:s.tiers,classReqs:s.classReqs,majorIds:s.majorIds,numericRanges:s.numericRanges,exclusionRanges:s.exclusionRanges??{},onlyWearableAtLevel:s.onlyWearableAtLevel,onlyClassCompatible:s.onlyClassCompatible,excludeRestricted:s.excludeRestricted,sortKeys:i,sortDescending:s.sortDescending,viewMode:s.viewMode,resultsBelowBuild:!!s.resultsBelowBuild}}function bC(e){return!!(e.text.trim()!==""||e.categories.length>0||e.types.length>0||e.tiers.length>0||e.classReqs.length>0||e.majorIds.length>0||e.numericRanges&&Object.keys(e.numericRanges).length>0||e.exclusionRanges&&Object.keys(e.exclusionRanges).length>0)}function xC(e,n){return tx({...e,...n,numericRanges:n.numericRanges!==void 0?n.numericRanges:e.numericRanges,exclusionRanges:n.exclusionRanges!==void 0?n.exclusionRanges:e.exclusionRanges??{}})}const SC="ENTRIES",nx="KEYS",ax="VALUES",mn="";class bf{constructor(n,s){const i=n._tree,r=Array.from(i.keys());this.set=n,this._type=s,this._path=r.length>0?[{node:i,keys:r}]:[]}next(){const n=this.dive();return this.backtrack(),n}dive(){if(this._path.length===0)return{done:!0,value:void 0};const{node:n,keys:s}=Bi(this._path);if(Bi(s)===mn)return{done:!1,value:this.result()};const i=n.get(Bi(s));return this._path.push({node:i,keys:Array.from(i.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;const n=Bi(this._path).keys;n.pop(),!(n.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:n})=>Bi(n)).filter(n=>n!==mn).join("")}value(){return Bi(this._path).node.get(mn)}result(){switch(this._type){case ax:return this.value();case nx:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const Bi=e=>e[e.length-1],wC=(e,n,s)=>{const i=new Map;if(n===void 0)return i;const r=n.length+1,c=r+s,u=new Uint8Array(c*r).fill(s+1);for(let d=0;d<r;++d)u[d]=d;for(let d=1;d<c;++d)u[d*r]=d;return sx(e,n,s,i,u,1,r,""),i},sx=(e,n,s,i,r,c,u,d)=>{const m=c*u;e:for(const p of e.keys())if(p===mn){const y=r[m-1];y<=s&&i.set(d,[e.get(p),y])}else{let y=c;for(let v=0;v<p.length;++v,++y){const b=p[v],S=u*y,_=S-u;let T=r[S];const j=Math.max(0,y-s-1),k=Math.min(u-1,y+s);for(let R=j;R<k;++R){const P=b!==n[R],B=r[_+R]+ +P,q=r[_+R+1]+1,M=r[S+R]+1,C=r[S+R+1]=Math.min(B,q,M);C<T&&(T=C)}if(T>s)continue e}sx(e.get(p),n,s,i,r,y,u,d+p)}};class _s{constructor(n=new Map,s=""){this._size=void 0,this._tree=n,this._prefix=s}atPrefix(n){if(!n.startsWith(this._prefix))throw new Error("Mismatched prefix");const[s,i]=Sc(this._tree,n.slice(this._prefix.length));if(s===void 0){const[r,c]=Bh(i);for(const u of r.keys())if(u!==mn&&u.startsWith(c)){const d=new Map;return d.set(u.slice(c.length),r.get(u)),new _s(d,n)}}return new _s(s,n)}clear(){this._size=void 0,this._tree.clear()}delete(n){return this._size=void 0,_C(this._tree,n)}entries(){return new bf(this,SC)}forEach(n){for(const[s,i]of this)n(s,i,this)}fuzzyGet(n,s){return wC(this._tree,n,s)}get(n){const s=Jf(this._tree,n);return s!==void 0?s.get(mn):void 0}has(n){const s=Jf(this._tree,n);return s!==void 0&&s.has(mn)}keys(){return new bf(this,nx)}set(n,s){if(typeof n!="string")throw new Error("key must be a string");return this._size=void 0,xf(this._tree,n).set(mn,s),this}get size(){if(this._size)return this._size;this._size=0;const n=this.entries();for(;!n.next().done;)this._size+=1;return this._size}update(n,s){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;const i=xf(this._tree,n);return i.set(mn,s(i.get(mn))),this}fetch(n,s){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;const i=xf(this._tree,n);let r=i.get(mn);return r===void 0&&i.set(mn,r=s()),r}values(){return new bf(this,ax)}[Symbol.iterator](){return this.entries()}static from(n){const s=new _s;for(const[i,r]of n)s.set(i,r);return s}static fromObject(n){return _s.from(Object.entries(n))}}const Sc=(e,n,s=[])=>{if(n.length===0||e==null)return[e,s];for(const i of e.keys())if(i!==mn&&n.startsWith(i))return s.push([e,i]),Sc(e.get(i),n.slice(i.length),s);return s.push([e,n]),Sc(void 0,"",s)},Jf=(e,n)=>{if(n.length===0||e==null)return e;for(const s of e.keys())if(s!==mn&&n.startsWith(s))return Jf(e.get(s),n.slice(s.length))},xf=(e,n)=>{const s=n.length;e:for(let i=0;e&&i<s;){for(const c of e.keys())if(c!==mn&&n[i]===c[0]){const u=Math.min(s-i,c.length);let d=1;for(;d<u&&n[i+d]===c[d];)++d;const m=e.get(c);if(d===c.length)e=m;else{const p=new Map;p.set(c.slice(d),m),e.set(n.slice(i,i+d),p),e.delete(c),e=p}i+=d;continue e}const r=new Map;return e.set(n.slice(i),r),r}return e},_C=(e,n)=>{const[s,i]=Sc(e,n);if(s!==void 0){if(s.delete(mn),s.size===0)ix(i);else if(s.size===1){const[r,c]=s.entries().next().value;lx(i,r,c)}}},ix=e=>{if(e.length===0)return;const[n,s]=Bh(e);if(n.delete(s),n.size===0)ix(e.slice(0,-1));else if(n.size===1){const[i,r]=n.entries().next().value;i!==mn&&lx(e.slice(0,-1),i,r)}},lx=(e,n,s)=>{if(e.length===0)return;const[i,r]=Bh(e);i.set(r+n,s),i.delete(r)},Bh=e=>e[e.length-1],Lh="or",rx="and",EC="and_not";class Wi{constructor(n){if(n?.fields==null)throw new Error('MiniSearch: option "fields" must be provided');const s=n.autoVacuum==null||n.autoVacuum===!0?_f:n.autoVacuum;this._options={...wf,...n,autoVacuum:s,searchOptions:{...Ly,...n.searchOptions||{}},autoSuggestOptions:{...CC,...n.autoSuggestOptions||{}}},this._index=new _s,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=th,this.addFields(this._options.fields)}add(n){const{extractField:s,stringifyField:i,tokenize:r,processTerm:c,fields:u,idField:d}=this._options,m=s(n,d);if(m==null)throw new Error(`MiniSearch: document does not have ID field "${d}"`);if(this._idToShortId.has(m))throw new Error(`MiniSearch: duplicate ID ${m}`);const p=this.addDocumentId(m);this.saveStoredFields(p,n);for(const y of u){const v=s(n,y);if(v==null)continue;const b=r(i(v,y),y),S=this._fieldIds[y],_=new Set(b).size;this.addFieldLength(p,S,this._documentCount-1,_);for(const T of b){const j=c(T,y);if(Array.isArray(j))for(const k of j)this.addTerm(S,p,k);else j&&this.addTerm(S,p,j)}}}addAll(n){for(const s of n)this.add(s)}addAllAsync(n,s={}){const{chunkSize:i=10}=s,r={chunk:[],promise:Promise.resolve()},{chunk:c,promise:u}=n.reduce(({chunk:d,promise:m},p,y)=>(d.push(p),(y+1)%i===0?{chunk:[],promise:m.then(()=>new Promise(v=>setTimeout(v,0))).then(()=>this.addAll(d))}:{chunk:d,promise:m}),r);return u.then(()=>this.addAll(c))}remove(n){const{tokenize:s,processTerm:i,extractField:r,stringifyField:c,fields:u,idField:d}=this._options,m=r(n,d);if(m==null)throw new Error(`MiniSearch: document does not have ID field "${d}"`);const p=this._idToShortId.get(m);if(p==null)throw new Error(`MiniSearch: cannot remove document with ID ${m}: it is not in the index`);for(const y of u){const v=r(n,y);if(v==null)continue;const b=s(c(v,y),y),S=this._fieldIds[y],_=new Set(b).size;this.removeFieldLength(p,S,this._documentCount,_);for(const T of b){const j=i(T,y);if(Array.isArray(j))for(const k of j)this.removeTerm(S,p,k);else j&&this.removeTerm(S,p,j)}}this._storedFields.delete(p),this._documentIds.delete(p),this._idToShortId.delete(m),this._fieldLength.delete(p),this._documentCount-=1}removeAll(n){if(n)for(const s of n)this.remove(s);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new _s,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(n){const s=this._idToShortId.get(n);if(s==null)throw new Error(`MiniSearch: cannot discard document with ID ${n}: it is not in the index`);this._idToShortId.delete(n),this._documentIds.delete(s),this._storedFields.delete(s),(this._fieldLength.get(s)||[]).forEach((i,r)=>{this.removeFieldLength(s,r,this._documentCount,i)}),this._fieldLength.delete(s),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;const{minDirtFactor:n,minDirtCount:s,batchSize:i,batchWait:r}=this._options.autoVacuum;this.conditionalVacuum({batchSize:i,batchWait:r},{minDirtCount:s,minDirtFactor:n})}discardAll(n){const s=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const i of n)this.discard(i)}finally{this._options.autoVacuum=s}this.maybeAutoVacuum()}replace(n){const{idField:s,extractField:i}=this._options,r=i(n,s);this.discard(r),this.add(n)}vacuum(n={}){return this.conditionalVacuum(n)}conditionalVacuum(n,s){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&s,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{const i=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=th,this.performVacuuming(n,i)}),this._enqueuedVacuum)):this.vacuumConditionsMet(s)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(n),this._currentVacuum)}async performVacuuming(n,s){const i=this._dirtCount;if(this.vacuumConditionsMet(s)){const r=n.batchSize||eh.batchSize,c=n.batchWait||eh.batchWait;let u=1;for(const[d,m]of this._index){for(const[p,y]of m)for(const[v]of y)this._documentIds.has(v)||(y.size<=1?m.delete(p):y.delete(v));this._index.get(d).size===0&&this._index.delete(d),u%r===0&&await new Promise(p=>setTimeout(p,c)),u+=1}this._dirtCount-=i}await null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null}vacuumConditionsMet(n){if(n==null)return!0;let{minDirtCount:s,minDirtFactor:i}=n;return s=s||_f.minDirtCount,i=i||_f.minDirtFactor,this.dirtCount>=s&&this.dirtFactor>=i}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(n){return this._idToShortId.has(n)}getStoredFields(n){const s=this._idToShortId.get(n);if(s!=null)return this._storedFields.get(s)}search(n,s={}){const{searchOptions:i}=this._options,r={...i,...s},c=this.executeQuery(n,s),u=[];for(const[d,{score:m,terms:p,match:y}]of c){const v=p.length||1,b={id:this._documentIds.get(d),score:m*v,terms:Object.keys(y),queryTerms:p,match:y};Object.assign(b,this._storedFields.get(d)),(r.filter==null||r.filter(b))&&u.push(b)}return n===Wi.wildcard&&r.boostDocument==null||u.sort(Uy),u}autoSuggest(n,s={}){s={...this._options.autoSuggestOptions,...s};const i=new Map;for(const{score:c,terms:u}of this.search(n,s)){const d=u.join(" "),m=i.get(d);m!=null?(m.score+=c,m.count+=1):i.set(d,{score:c,terms:u,count:1})}const r=[];for(const[c,{score:u,terms:d,count:m}]of i)r.push({suggestion:c,terms:d,score:u/m});return r.sort(Uy),r}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(n,s){if(s==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(n),s)}static async loadJSONAsync(n,s){if(s==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(n),s)}static getDefault(n){if(wf.hasOwnProperty(n))return Sf(wf,n);throw new Error(`MiniSearch: unknown option "${n}"`)}static loadJS(n,s){const{index:i,documentIds:r,fieldLength:c,storedFields:u,serializationVersion:d}=n,m=this.instantiateMiniSearch(n,s);m._documentIds=Ho(r),m._fieldLength=Ho(c),m._storedFields=Ho(u);for(const[p,y]of m._documentIds)m._idToShortId.set(y,p);for(const[p,y]of i){const v=new Map;for(const b of Object.keys(y)){let S=y[b];d===1&&(S=S.ds),v.set(parseInt(b,10),Ho(S))}m._index.set(p,v)}return m}static async loadJSAsync(n,s){const{index:i,documentIds:r,fieldLength:c,storedFields:u,serializationVersion:d}=n,m=this.instantiateMiniSearch(n,s);m._documentIds=await Zo(r),m._fieldLength=await Zo(c),m._storedFields=await Zo(u);for(const[y,v]of m._documentIds)m._idToShortId.set(v,y);let p=0;for(const[y,v]of i){const b=new Map;for(const S of Object.keys(v)){let _=v[S];d===1&&(_=_.ds),b.set(parseInt(S,10),await Zo(_))}++p%1e3===0&&await ox(0),m._index.set(y,b)}return m}static instantiateMiniSearch(n,s){const{documentCount:i,nextId:r,fieldIds:c,averageFieldLength:u,dirtCount:d,serializationVersion:m}=n;if(m!==1&&m!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const p=new Wi(s);return p._documentCount=i,p._nextId=r,p._idToShortId=new Map,p._fieldIds=c,p._avgFieldLength=u,p._dirtCount=d||0,p._index=new _s,p}executeQuery(n,s={}){if(n===Wi.wildcard)return this.executeWildcardQuery(s);if(typeof n!="string"){const b={...s,...n,queries:void 0},S=n.queries.map(_=>this.executeQuery(_,b));return this.combineResults(S,b.combineWith)}const{tokenize:i,processTerm:r,searchOptions:c}=this._options,u={tokenize:i,processTerm:r,...c,...s},{tokenize:d,processTerm:m}=u,v=d(n).flatMap(b=>m(b)).filter(b=>!!b).map(jC(u)).map(b=>this.executeQuerySpec(b,u));return this.combineResults(v,u.combineWith)}executeQuerySpec(n,s){const i={...this._options.searchOptions,...s},r=(i.fields||this._options.fields).reduce((T,j)=>({...T,[j]:Sf(i.boost,j)||1}),{}),{boostDocument:c,weights:u,maxFuzzy:d,bm25:m}=i,{fuzzy:p,prefix:y}={...Ly.weights,...u},v=this._index.get(n.term),b=this.termResults(n.term,n.term,1,n.termBoost,v,r,c,m);let S,_;if(n.prefix&&(S=this._index.atPrefix(n.term)),n.fuzzy){const T=n.fuzzy===!0?.2:n.fuzzy,j=T<1?Math.min(d,Math.round(n.term.length*T)):T;j&&(_=this._index.fuzzyGet(n.term,j))}if(S)for(const[T,j]of S){const k=T.length-n.term.length;if(!k)continue;_?.delete(T);const R=y*T.length/(T.length+.3*k);this.termResults(n.term,T,R,n.termBoost,j,r,c,m,b)}if(_)for(const T of _.keys()){const[j,k]=_.get(T);if(!k)continue;const R=p*T.length/(T.length+k);this.termResults(n.term,T,R,n.termBoost,j,r,c,m,b)}return b}executeWildcardQuery(n){const s=new Map,i={...this._options.searchOptions,...n};for(const[r,c]of this._documentIds){const u=i.boostDocument?i.boostDocument(c,"",this._storedFields.get(r)):1;s.set(r,{score:u,terms:[],match:{}})}return s}combineResults(n,s=Lh){if(n.length===0)return new Map;const i=s.toLowerCase(),r=TC[i];if(!r)throw new Error(`Invalid combination operator: ${s}`);return n.reduce(r)||new Map}toJSON(){const n=[];for(const[s,i]of this._index){const r={};for(const[c,u]of i)r[c]=Object.fromEntries(u);n.push([s,r])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:n,serializationVersion:2}}termResults(n,s,i,r,c,u,d,m,p=new Map){if(c==null)return p;for(const y of Object.keys(u)){const v=u[y],b=this._fieldIds[y],S=c.get(b);if(S==null)continue;let _=S.size;const T=this._avgFieldLength[b];for(const j of S.keys()){if(!this._documentIds.has(j)){this.removeTerm(b,j,s),_-=1;continue}const k=d?d(this._documentIds.get(j),s,this._storedFields.get(j)):1;if(!k)continue;const R=S.get(j),P=this._fieldLength.get(j)[b],B=MC(R,_,this._documentCount,P,T,m),q=i*r*v*k*B,M=p.get(j);if(M){M.score+=q,DC(M.terms,n);const C=Sf(M.match,s);C?C.push(y):M.match[s]=[y]}else p.set(j,{score:q,terms:[n],match:{[s]:[y]}})}}return p}addTerm(n,s,i){const r=this._index.fetch(i,$y);let c=r.get(n);if(c==null)c=new Map,c.set(s,1),r.set(n,c);else{const u=c.get(s);c.set(s,(u||0)+1)}}removeTerm(n,s,i){if(!this._index.has(i)){this.warnDocumentChanged(s,n,i);return}const r=this._index.fetch(i,$y),c=r.get(n);c==null||c.get(s)==null?this.warnDocumentChanged(s,n,i):c.get(s)<=1?c.size<=1?r.delete(n):c.delete(s):c.set(s,c.get(s)-1),this._index.get(i).size===0&&this._index.delete(i)}warnDocumentChanged(n,s,i){for(const r of Object.keys(this._fieldIds))if(this._fieldIds[r]===s){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(n)} has changed before removal: term "${i}" was not present in field "${r}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(n){const s=this._nextId;return this._idToShortId.set(n,s),this._documentIds.set(s,n),this._documentCount+=1,this._nextId+=1,s}addFields(n){for(let s=0;s<n.length;s++)this._fieldIds[n[s]]=s}addFieldLength(n,s,i,r){let c=this._fieldLength.get(n);c==null&&this._fieldLength.set(n,c=[]),c[s]=r;const d=(this._avgFieldLength[s]||0)*i+r;this._avgFieldLength[s]=d/(i+1)}removeFieldLength(n,s,i,r){if(i===1){this._avgFieldLength[s]=0;return}const c=this._avgFieldLength[s]*i-r;this._avgFieldLength[s]=c/(i-1)}saveStoredFields(n,s){const{storeFields:i,extractField:r}=this._options;if(i==null||i.length===0)return;let c=this._storedFields.get(n);c==null&&this._storedFields.set(n,c={});for(const u of i){const d=r(s,u);d!==void 0&&(c[u]=d)}}}Wi.wildcard=Symbol("*");const Sf=(e,n)=>Object.prototype.hasOwnProperty.call(e,n)?e[n]:void 0,TC={[Lh]:(e,n)=>{for(const s of n.keys()){const i=e.get(s);if(i==null)e.set(s,n.get(s));else{const{score:r,terms:c,match:u}=n.get(s);i.score=i.score+r,i.match=Object.assign(i.match,u),qy(i.terms,c)}}return e},[rx]:(e,n)=>{const s=new Map;for(const i of n.keys()){const r=e.get(i);if(r==null)continue;const{score:c,terms:u,match:d}=n.get(i);qy(r.terms,u),s.set(i,{score:r.score+c,terms:r.terms,match:Object.assign(r.match,d)})}return s},[EC]:(e,n)=>{for(const s of n.keys())e.delete(s);return e}},NC={k:1.2,b:.7,d:.5},MC=(e,n,s,i,r,c)=>{const{k:u,b:d,d:m}=c;return Math.log(1+(s-n+.5)/(n+.5))*(m+e*(u+1)/(e+u*(1-d+d*i/r)))},jC=e=>(n,s,i)=>{const r=typeof e.fuzzy=="function"?e.fuzzy(n,s,i):e.fuzzy||!1,c=typeof e.prefix=="function"?e.prefix(n,s,i):e.prefix===!0,u=typeof e.boostTerm=="function"?e.boostTerm(n,s,i):1;return{term:n,fuzzy:r,prefix:c,termBoost:u}},wf={idField:"id",extractField:(e,n)=>e[n],stringifyField:(e,n)=>e.toString(),tokenize:e=>e.split(RC),processTerm:e=>e.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(e,n)=>{typeof console?.[e]=="function"&&console[e](n)},autoVacuum:!0},Ly={combineWith:Lh,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:NC},CC={combineWith:rx,prefix:(e,n,s)=>n===s.length-1},eh={batchSize:1e3,batchWait:10},th={minDirtFactor:.1,minDirtCount:20},_f={...eh,...th},DC=(e,n)=>{e.includes(n)||e.push(n)},qy=(e,n)=>{for(const s of n)e.includes(s)||e.push(s)},Uy=({score:e},{score:n})=>n-e,$y=()=>new Map,Ho=e=>{const n=new Map;for(const s of Object.keys(e))n.set(parseInt(s,10),e[s]);return n},Zo=async e=>{const n=new Map;let s=0;for(const i of Object.keys(e))n.set(parseInt(i,10),e[i]),++s%1e3===0&&await ox(0);return n},ox=e=>new Promise(n=>setTimeout(n,e)),RC=/[\n\r\p{Z}\p{P}]+/u;function cx(e,n){return n==="level"?e.level:n==="powderSlots"||n==="slots"?e.powderSlots:n==="baseDps"?e.roughScoreFields.baseDps:e.numericIndex[n]??0}function kC(e,n){return n.length===0||n.includes(e.category)}function Hy(e,n){return n.length===0?!0:e?n.includes(e):!1}function AC(e,n){for(const[s,i]of Object.entries(n.numericRanges)){if(!i)continue;const r=cx(e,s);if(typeof i.min=="number"&&r<i.min||typeof i.max=="number"&&r>i.max)return!1}return!0}function OC(e,n){for(const[s,i]of Object.entries(n.exclusionRanges??{})){if(!i)continue;const r=cx(e,s);if(typeof i.max=="number"&&r>i.max||typeof i.min=="number"&&r<i.min)return!1}return!0}function zC(e,n){if(n.excludeRestricted&&(e.restricted||e.deprecated)||n.onlyWearableAtLevel!==null&&!ET(e,n.onlyWearableAtLevel))return!1;if(n.onlyClassCompatible){const s=n.classReqs[0]??null;if(!Eb(e,s))return!1}return!0}function PC(e,n){return n.length===0?!0:e.majorIds.length===0?!1:n.every(s=>e.majorIds.includes(s))}function IC(e,n){return!(!kC(e,n.categories)||!Hy(e.type,n.types)||!Hy(e.tier,n.tiers)||n.classReqs.length>0&&(e.classReq===null||!n.classReqs.includes(e.classReq))||!PC(e,n.majorIds)||!AC(e,n)||!OC(e,n)||!zC(e,n))}function Zy(e,n){return n==="relevance"?0:n==="level"?e.level:n==="powderSlots"||n==="slots"?e.powderSlots:n==="baseDps"?e.roughScoreFields.baseDps:e.numericIndex[n]??0}function BC(e,n,s){const i=n.trim().toLowerCase();if(!i)return 0;const r=e.displayName.toLowerCase();return r===i?s+5e3:r.startsWith(i)?s+3e3:r.includes(i)?s+1200:e.searchText.includes(i)?s+300:s}function LC(e,n,s){const i=s.sortDescending?-1:1,r=s.sortKeys?.length?s.sortKeys:["relevance"];for(const c of r)if(c==="relevance"){if(e.relevance!==n.relevance)return(e.relevance>n.relevance?-1:1)*(s.sortDescending?1:-1)}else{const u=Zy(e.item,c),d=Zy(n.item,c);if(u!==d)return u<d?-i:i}return e.item.displayName.localeCompare(n.item.displayName)}function qC(){return{categories:{},types:{},tiers:{},majorIds:{}}}function Ef(e,n){n&&(e[n]=(e[n]??0)+1)}class UC{miniSearch;itemsById;allItems;constructor(n){this.allItems=n,this.itemsById=new Map(n.map(s=>[s.id,s])),this.miniSearch=new Wi({fields:["displayName","searchText","majorIdsText"],storeFields:["id"],idField:"id",searchOptions:{boost:{displayName:6,searchText:2,majorIdsText:2},prefix:!0,fuzzy:.2,combineWith:"OR"}}),this.miniSearch.addAll(n.map(s=>({id:s.id,displayName:s.displayName,searchText:s.searchText,majorIdsText:s.majorIdsText})))}search(n){const s=n.text.trim(),i=s?this.miniSearch.search(s,{prefix:!0,fuzzy:.2,boost:{displayName:8,searchText:2,majorIdsText:2}}):[],r=new Map;for(const p of i){const y=this.itemsById.get(p.id);y&&r.set(y.id,BC(y,s,Number(p.score??0)))}const c=s?[...this.allItems]:this.allItems,u=[],d=qC();for(const p of c){const y=r.get(p.id)??0;if(!(s&&y===0&&!p.searchText.includes(s.toLowerCase()))&&IC(p,n)){u.push({item:p,relevance:y}),d.categories[p.category]=(d.categories[p.category]??0)+1,Ef(d.types,p.type),Ef(d.tiers,p.tier);for(const v of p.majorIds)Ef(d.majorIds,v)}}u.sort((p,y)=>LC(p,y,n));const m=u.map(({item:p,relevance:y})=>({id:p.id,relevance:y}));return{total:m.length,rows:m,facetCounts:d}}}class $C{worker=null;fallbackEngine=null;requestId=0;pending=new Map;initialized=!1;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL(""+new URL("search-worker-Dray3ejl.js",import.meta.url).href,import.meta.url),{type:"module"}),this.worker.onmessage=n=>{const s=n.data,i=this.pending.get(s.requestId);i&&(this.pending.delete(s.requestId),s.type==="error"?i.reject(new Error(s.message)):s.type==="ready"?i.resolve(void 0):i.resolve(s.result))},this.worker.onerror=n=>{console.error(n),this.worker?.terminate(),this.worker=null})}async init(n){if(!this.initialized){if(this.worker){await this.send({type:"init",items:n}),this.initialized=!0;return}this.fallbackEngine=new UC(n),this.initialized=!0}}async search(n){if(!this.initialized)throw new Error("SearchWorkerClient.init() must be called before search()");if(this.worker)return this.send({type:"search",state:n});if(!this.fallbackEngine)throw new Error("Fallback search engine unavailable");return this.fallbackEngine.search(n)}dispose(){this.worker?.terminate(),this.worker=null,this.fallbackEngine=null,this.pending.clear()}send(n){if(!this.worker)return Promise.reject(new Error("Search worker unavailable"));const s=++this.requestId;return new Promise((i,r)=>{this.pending.set(s,{resolve:i,reject:r}),this.worker.postMessage({...n,requestId:s})})}}function Li(e,n,s){let i=s.initialDeps??[],r,c=!0;function u(){var d,m,p;let y;s.key&&((d=s.debug)!=null&&d.call(s))&&(y=Date.now());const v=e();if(!(v.length!==i.length||v.some((_,T)=>i[T]!==_)))return r;i=v;let S;if(s.key&&((m=s.debug)!=null&&m.call(s))&&(S=Date.now()),r=n(...v),s.key&&((p=s.debug)!=null&&p.call(s))){const _=Math.round((Date.now()-y)*100)/100,T=Math.round((Date.now()-S)*100)/100,j=T/16,k=(R,P)=>{for(R=String(R);R.length<P;)R=" "+R;return R};console.info(`%c ${k(T,5)} /${k(_,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*j,120))}deg 100% 31%);`,s?.key)}return s?.onChange&&!(c&&s.skipInitialOnChange)&&s.onChange(r),c=!1,r}return u.updateDeps=d=>{i=d},u}function Fy(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const HC=(e,n)=>Math.abs(e-n)<1.01,ZC=(e,n,s)=>{let i;return function(...r){e.clearTimeout(i),i=e.setTimeout(()=>n.apply(this,r),s)}},Gy=e=>{const{offsetWidth:n,offsetHeight:s}=e;return{width:n,height:s}},FC=e=>e,GC=e=>{const n=Math.max(e.startIndex-e.overscan,0),s=Math.min(e.endIndex+e.overscan,e.count-1),i=[];for(let r=n;r<=s;r++)i.push(r);return i},YC=(e,n)=>{const s=e.scrollElement;if(!s)return;const i=e.targetWindow;if(!i)return;const r=u=>{const{width:d,height:m}=u;n({width:Math.round(d),height:Math.round(m)})};if(r(Gy(s)),!i.ResizeObserver)return()=>{};const c=new i.ResizeObserver(u=>{const d=()=>{const m=u[0];if(m?.borderBoxSize){const p=m.borderBoxSize[0];if(p){r({width:p.inlineSize,height:p.blockSize});return}}r(Gy(s))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(d):d()});return c.observe(s,{box:"border-box"}),()=>{c.unobserve(s)}},Yy={passive:!0},Vy=typeof window>"u"?!0:"onscrollend"in window,VC=(e,n)=>{const s=e.scrollElement;if(!s)return;const i=e.targetWindow;if(!i)return;let r=0;const c=e.options.useScrollendEvent&&Vy?()=>{}:ZC(i,()=>{n(r,!1)},e.options.isScrollingResetDelay),u=y=>()=>{const{horizontal:v,isRtl:b}=e.options;r=v?s.scrollLeft*(b&&-1||1):s.scrollTop,c(),n(r,y)},d=u(!0),m=u(!1);s.addEventListener("scroll",d,Yy);const p=e.options.useScrollendEvent&&Vy;return p&&s.addEventListener("scrollend",m,Yy),()=>{s.removeEventListener("scroll",d),p&&s.removeEventListener("scrollend",m)}},KC=(e,n,s)=>{if(n?.borderBoxSize){const i=n.borderBoxSize[0];if(i)return Math.round(i[s.options.horizontal?"inlineSize":"blockSize"])}return e[s.options.horizontal?"offsetWidth":"offsetHeight"]},WC=(e,{adjustments:n=0,behavior:s},i)=>{var r,c;const u=e+n;(c=(r=i.scrollElement)==null?void 0:r.scrollTo)==null||c.call(r,{[i.options.horizontal?"left":"top"]:u,behavior:s})};class XC{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let s=null;const i=()=>s||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:s=new this.targetWindow.ResizeObserver(r=>{r.forEach(c=>{const u=()=>{this._measureElement(c.target,c)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(u):u()})}));return{disconnect:()=>{var r;(r=i())==null||r.disconnect(),s=null},observe:r=>{var c;return(c=i())==null?void 0:c.observe(r,{box:"border-box"})},unobserve:r=>{var c;return(c=i())==null?void 0:c.unobserve(r)}}})(),this.range=null,this.setOptions=s=>{Object.entries(s).forEach(([i,r])=>{typeof r>"u"&&delete s[i]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:FC,rangeExtractor:GC,onChange:()=>{},measureElement:KC,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...s}},this.notify=s=>{var i,r;(r=(i=this.options).onChange)==null||r.call(i,this,s)},this.maybeNotify=Li(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),s=>{this.notify(s)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(s=>s()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var s;const i=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==i){if(this.cleanup(),!i){this.maybeNotify();return}this.scrollElement=i,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((s=this.scrollElement)==null?void 0:s.window)??null,this.elementsCache.forEach(r=>{this.observer.observe(r)}),this.unsubs.push(this.options.observeElementRect(this,r=>{this.scrollRect=r,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(r,c)=>{this.scrollAdjustments=0,this.scrollDirection=c?this.getScrollOffset()<r?"forward":"backward":null,this.scrollOffset=r,this.isScrolling=c,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(s,i)=>{const r=new Map,c=new Map;for(let u=i-1;u>=0;u--){const d=s[u];if(r.has(d.lane))continue;const m=c.get(d.lane);if(m==null||d.end>m.end?c.set(d.lane,d):d.end<m.end&&r.set(d.lane,!0),r.size===this.options.lanes)break}return c.size===this.options.lanes?Array.from(c.values()).sort((u,d)=>u.end===d.end?u.index-d.index:u.end-d.end)[0]:void 0},this.getMeasurementOptions=Li(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(s,i,r,c,u,d)=>(this.prevLanes!==void 0&&this.prevLanes!==d&&(this.lanesChangedFlag=!0),this.prevLanes=d,this.pendingMeasuredCacheIndexes=[],{count:s,paddingStart:i,scrollMargin:r,getItemKey:c,enabled:u,lanes:d}),{key:!1}),this.getMeasurements=Li(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:s,paddingStart:i,scrollMargin:r,getItemKey:c,enabled:u,lanes:d},m)=>{if(!u)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>s)for(const b of this.laneAssignments.keys())b>=s&&this.laneAssignments.delete(b);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(b=>{this.itemSizeCache.set(b.key,b.size)}));const p=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===s&&(this.lanesSettling=!1);const y=this.measurementsCache.slice(0,p),v=new Array(d).fill(void 0);for(let b=0;b<p;b++){const S=y[b];S&&(v[S.lane]=b)}for(let b=p;b<s;b++){const S=c(b),_=this.laneAssignments.get(b);let T,j;if(_!==void 0&&this.options.lanes>1){T=_;const B=v[T],q=B!==void 0?y[B]:void 0;j=q?q.end+this.options.gap:i+r}else{const B=this.options.lanes===1?y[b-1]:this.getFurthestMeasurement(y,b);j=B?B.end+this.options.gap:i+r,T=B?B.lane:b%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(b,T)}const k=m.get(S),R=typeof k=="number"?k:this.options.estimateSize(b),P=j+R;y[b]={index:b,start:j,size:R,end:P,key:S,lane:T},v[T]=b}return this.measurementsCache=y,y},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Li(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(s,i,r,c)=>this.range=s.length>0&&i>0?QC({measurements:s,outerSize:i,scrollOffset:r,lanes:c}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Li(()=>{let s=null,i=null;const r=this.calculateRange();return r&&(s=r.startIndex,i=r.endIndex),this.maybeNotify.updateDeps([this.isScrolling,s,i]),[this.options.rangeExtractor,this.options.overscan,this.options.count,s,i]},(s,i,r,c,u)=>c===null||u===null?[]:s({startIndex:c,endIndex:u,overscan:i,count:r}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=s=>{const i=this.options.indexAttribute,r=s.getAttribute(i);return r?parseInt(r,10):(console.warn(`Missing attribute name '${i}={index}' on measured element.`),-1)},this._measureElement=(s,i)=>{const r=this.indexFromElement(s),c=this.measurementsCache[r];if(!c)return;const u=c.key,d=this.elementsCache.get(u);d!==s&&(d&&this.observer.unobserve(d),this.observer.observe(s),this.elementsCache.set(u,s)),s.isConnected&&this.resizeItem(r,this.options.measureElement(s,i,this))},this.resizeItem=(s,i)=>{const r=this.measurementsCache[s];if(!r)return;const c=this.itemSizeCache.get(r.key)??r.size,u=i-c;u!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(r,u,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=u,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,i)),this.notify(!1))},this.measureElement=s=>{if(!s){this.elementsCache.forEach((i,r)=>{i.isConnected||(this.observer.unobserve(i),this.elementsCache.delete(r))});return}this._measureElement(s,void 0)},this.getVirtualItems=Li(()=>[this.getVirtualIndexes(),this.getMeasurements()],(s,i)=>{const r=[];for(let c=0,u=s.length;c<u;c++){const d=s[c],m=i[d];r.push(m)}return r},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=s=>{const i=this.getMeasurements();if(i.length!==0)return Fy(i[ux(0,i.length-1,r=>Fy(i[r]).start,s)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const s=this.scrollElement.document.documentElement;return this.options.horizontal?s.scrollWidth-this.scrollElement.innerWidth:s.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(s,i,r=0)=>{if(!this.scrollElement)return 0;const c=this.getSize(),u=this.getScrollOffset();i==="auto"&&(i=s>=u+c?"end":"start"),i==="center"?s+=(r-c)/2:i==="end"&&(s-=c);const d=this.getMaxScrollOffset();return Math.max(Math.min(d,s),0)},this.getOffsetForIndex=(s,i="auto")=>{s=Math.max(0,Math.min(s,this.options.count-1));const r=this.measurementsCache[s];if(!r)return;const c=this.getSize(),u=this.getScrollOffset();if(i==="auto")if(r.end>=u+c-this.options.scrollPaddingEnd)i="end";else if(r.start<=u+this.options.scrollPaddingStart)i="start";else return[u,i];if(i==="end"&&s===this.options.count-1)return[this.getMaxScrollOffset(),i];const d=i==="end"?r.end+this.options.scrollPaddingEnd:r.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(d,i,r.size),i]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(s,{align:i="start",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(s,i),{adjustments:void 0,behavior:r})},this.scrollToIndex=(s,{align:i="auto",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),s=Math.max(0,Math.min(s,this.options.count-1)),this.currentScrollToIndex=s;let c=0;const u=10,d=p=>{if(!this.targetWindow)return;const y=this.getOffsetForIndex(s,p);if(!y){console.warn("Failed to get offset for index:",s);return}const[v,b]=y;this._scrollToOffset(v,{adjustments:void 0,behavior:r}),this.targetWindow.requestAnimationFrame(()=>{const S=()=>{if(this.currentScrollToIndex!==s)return;const _=this.getScrollOffset(),T=this.getOffsetForIndex(s,b);if(!T){console.warn("Failed to get offset for index:",s);return}HC(T[0],_)||m(b)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(S):S()})},m=p=>{this.targetWindow&&this.currentScrollToIndex===s&&(c++,c<u?this.targetWindow.requestAnimationFrame(()=>d(p)):console.warn(`Failed to scroll to index ${s} after ${u} attempts.`))};d(i)},this.scrollBy=(s,{behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+s,{adjustments:void 0,behavior:i})},this.getTotalSize=()=>{var s;const i=this.getMeasurements();let r;if(i.length===0)r=this.options.paddingStart;else if(this.options.lanes===1)r=((s=i[i.length-1])==null?void 0:s.end)??0;else{const c=Array(this.options.lanes).fill(null);let u=i.length-1;for(;u>=0&&c.some(d=>d===null);){const d=i[u];c[d.lane]===null&&(c[d.lane]=d.end),u--}r=Math.max(...c.filter(d=>d!==null))}return Math.max(r-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(s,{adjustments:i,behavior:r})=>{this.options.scrollToFn(s,{behavior:r,adjustments:i},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(n)}}const ux=(e,n,s,i)=>{for(;e<=n;){const r=(e+n)/2|0,c=s(r);if(c<i)e=r+1;else if(c>i)n=r-1;else return r}return e>0?e-1:0};function QC({measurements:e,outerSize:n,scrollOffset:s,lanes:i}){const r=e.length-1,c=m=>e[m].start;if(e.length<=i)return{startIndex:0,endIndex:r};let u=ux(0,r,c,s),d=u;if(i===1)for(;d<r&&e[d].end<s+n;)d++;else if(i>1){const m=Array(i).fill(0);for(;d<r&&m.some(y=>y<s+n);){const y=e[d];m[y.lane]=y.end,d++}const p=Array(i).fill(s+n);for(;u>=0&&p.some(y=>y>=s);){const y=e[u];p[y.lane]=y.start,u--}u=Math.max(0,u-u%i),d=Math.min(r,d+(i-1-d%i))}return{startIndex:u,endIndex:d}}const Ky=typeof document<"u"?w.useLayoutEffect:w.useEffect;function JC({useFlushSync:e=!0,...n}){const s=w.useReducer(()=>({}),{})[1],i={...n,onChange:(c,u)=>{var d;e&&u?Fa.flushSync(s):s(),(d=n.onChange)==null||d.call(n,c,u)}},[r]=w.useState(()=>new XC(i));return r.setOptions(i),Ky(()=>r._didMount(),[]),Ky(()=>r._willUpdate()),r}function eD(e){return JC({observeElementRect:YC,observeElementOffset:VC,scrollToFn:WC,...e})}const tD={relevance:"Relevance",level:"Combat Level",baseDps:"Base DPS",slots:"Powder Slots",hp:"Health",hpBonus:"Health Bonus",hprRaw:"Raw Health Regen",hprPct:"Health Regen %",mr:"Mana Regen",ms:"Mana Steal",ls:"Life Steal",sdPct:"Spell Damage %",sdRaw:"Spell Damage Raw",mdPct:"Melee Damage %",mdRaw:"Melee Damage Raw",poison:"Poison",spd:"Walk Speed Bonus",atkTier:"Attack Speed Bonus",averageDps:"Average DPS",str:"Strength",dex:"Dexterity",int:"Intelligence",def:"Defense",agi:"Agility",strReq:"Strength Min",dexReq:"Dexterity Min",intReq:"Intelligence Min",defReq:"Defense Min",agiReq:"Agility Min",eDef:"Earth Defense",tDef:"Thunder Defense",wDef:"Water Defense",fDef:"Fire Defense",aDef:"Air Defense",eDamPct:"Earth Damage %",tDamPct:"Thunder Damage %",wDamPct:"Water Damage %",fDamPct:"Fire Damage %",aDamPct:"Air Damage %",damPct:"Damage %",rDamPct:"Elemental Damage %",nDamPct:"Neutral Damage %",lvl:"Combat Level",reqTotal:"Req Total",skillPointTotal:"Skill Point Total",offenseScore:"Offense Score",ehpProxy:"EHP Proxy",utilityScore:"Utility Score",spPct1:"1st Spell Cost %",spRaw1:"1st Spell Cost Raw",spPct2:"2nd Spell Cost %",spRaw2:"2nd Spell Cost Raw",spPct3:"3rd Spell Cost %",spRaw3:"3rd Spell Cost Raw",spPct4:"4th Spell Cost %",spRaw4:"4th Spell Cost Raw",sumSpPct:"Sum Spell Cost %",sumSpRaw:"Sum Spell Cost Raw"};function Yt(e){return tD[e]??e}function Ns(e,n,{checkForDefaultPrevented:s=!0}={}){return function(r){if(e?.(r),s===!1||!r.defaultPrevented)return n?.(r)}}function Wy(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function dx(...e){return n=>{let s=!1;const i=e.map(r=>{const c=Wy(r,n);return!s&&typeof c=="function"&&(s=!0),c});if(s)return()=>{for(let r=0;r<i.length;r++){const c=i[r];typeof c=="function"?c():Wy(e[r],null)}}}}function ai(...e){return w.useCallback(dx(...e),e)}function nD(e,n){const s=w.createContext(n),i=c=>{const{children:u,...d}=c,m=w.useMemo(()=>d,Object.values(d));return h.jsx(s.Provider,{value:m,children:u})};i.displayName=e+"Provider";function r(c){const u=w.useContext(s);if(u)return u;if(n!==void 0)return n;throw new Error(`\`${c}\` must be used within \`${e}\``)}return[i,r]}function aD(e,n=[]){let s=[];function i(c,u){const d=w.createContext(u),m=s.length;s=[...s,u];const p=v=>{const{scope:b,children:S,..._}=v,T=b?.[e]?.[m]||d,j=w.useMemo(()=>_,Object.values(_));return h.jsx(T.Provider,{value:j,children:S})};p.displayName=c+"Provider";function y(v,b){const S=b?.[e]?.[m]||d,_=w.useContext(S);if(_)return _;if(u!==void 0)return u;throw new Error(`\`${v}\` must be used within \`${c}\``)}return[p,y]}const r=()=>{const c=s.map(u=>w.createContext(u));return function(d){const m=d?.[e]||c;return w.useMemo(()=>({[`__scope${e}`]:{...d,[e]:m}}),[d,m])}};return r.scopeName=e,[i,sD(r,...n)]}function sD(...e){const n=e[0];if(e.length===1)return n;const s=()=>{const i=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(c){const u=i.reduce((d,{useScope:m,scopeName:p})=>{const v=m(c)[`__scope${p}`];return{...d,...v}},{});return w.useMemo(()=>({[`__scope${n.scopeName}`]:u}),[u])}};return s.scopeName=n.scopeName,s}var pr=globalThis?.document?w.useLayoutEffect:()=>{},iD=F0[" useId ".trim().toString()]||(()=>{}),lD=0;function Tf(e){const[n,s]=w.useState(iD());return pr(()=>{s(i=>i??String(lD++))},[e]),e||(n?`radix-${n}`:"")}var rD=F0[" useInsertionEffect ".trim().toString()]||pr;function oD({prop:e,defaultProp:n,onChange:s=()=>{},caller:i}){const[r,c,u]=cD({defaultProp:n,onChange:s}),d=e!==void 0,m=d?e:r;{const y=w.useRef(e!==void 0);w.useEffect(()=>{const v=y.current;v!==d&&console.warn(`${i} is changing from ${v?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),y.current=d},[d,i])}const p=w.useCallback(y=>{if(d){const v=uD(y)?y(e):y;v!==e&&u.current?.(v)}else c(y)},[d,e,c,u]);return[m,p]}function cD({defaultProp:e,onChange:n}){const[s,i]=w.useState(e),r=w.useRef(s),c=w.useRef(n);return rD(()=>{c.current=n},[n]),w.useEffect(()=>{r.current!==s&&(c.current?.(s),r.current=s)},[s,r]),[s,i,c]}function uD(e){return typeof e=="function"}function fx(e){const n=dD(e),s=w.forwardRef((i,r)=>{const{children:c,...u}=i,d=w.Children.toArray(c),m=d.find(hD);if(m){const p=m.props.children,y=d.map(v=>v===m?w.Children.count(p)>1?w.Children.only(null):w.isValidElement(p)?p.props.children:null:v);return h.jsx(n,{...u,ref:r,children:w.isValidElement(p)?w.cloneElement(p,void 0,y):null})}return h.jsx(n,{...u,ref:r,children:c})});return s.displayName=`${e}.Slot`,s}function dD(e){const n=w.forwardRef((s,i)=>{const{children:r,...c}=s;if(w.isValidElement(r)){const u=pD(r),d=mD(c,r.props);return r.type!==w.Fragment&&(d.ref=i?dx(i,u):u),w.cloneElement(r,d)}return w.Children.count(r)>1?w.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var fD=Symbol("radix.slottable");function hD(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===fD}function mD(e,n){const s={...n};for(const i in n){const r=e[i],c=n[i];/^on[A-Z]/.test(i)?r&&c?s[i]=(...d)=>{const m=c(...d);return r(...d),m}:r&&(s[i]=r):i==="style"?s[i]={...r,...c}:i==="className"&&(s[i]=[r,c].filter(Boolean).join(" "))}return{...e,...s}}function pD(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var gD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Va=gD.reduce((e,n)=>{const s=fx(`Primitive.${n}`),i=w.forwardRef((r,c)=>{const{asChild:u,...d}=r,m=u?s:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(m,{...d,ref:c})});return i.displayName=`Primitive.${n}`,{...e,[n]:i}},{});function vD(e,n){e&&Fa.flushSync(()=>e.dispatchEvent(n))}function gr(e){const n=w.useRef(e);return w.useEffect(()=>{n.current=e}),w.useMemo(()=>(...s)=>n.current?.(...s),[])}function yD(e,n=globalThis?.document){const s=gr(e);w.useEffect(()=>{const i=r=>{r.key==="Escape"&&s(r)};return n.addEventListener("keydown",i,{capture:!0}),()=>n.removeEventListener("keydown",i,{capture:!0})},[s,n])}var bD="DismissableLayer",nh="dismissableLayer.update",xD="dismissableLayer.pointerDownOutside",SD="dismissableLayer.focusOutside",Xy,hx=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),mx=w.forwardRef((e,n)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:c,onInteractOutside:u,onDismiss:d,...m}=e,p=w.useContext(hx),[y,v]=w.useState(null),b=y?.ownerDocument??globalThis?.document,[,S]=w.useState({}),_=ai(n,C=>v(C)),T=Array.from(p.layers),[j]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),k=T.indexOf(j),R=y?T.indexOf(y):-1,P=p.layersWithOutsidePointerEventsDisabled.size>0,B=R>=k,q=ED(C=>{const D=C.target,Z=[...p.branches].some(re=>re.contains(D));!B||Z||(r?.(C),u?.(C),C.defaultPrevented||d?.())},b),M=TD(C=>{const D=C.target;[...p.branches].some(re=>re.contains(D))||(c?.(C),u?.(C),C.defaultPrevented||d?.())},b);return yD(C=>{R===p.layers.size-1&&(i?.(C),!C.defaultPrevented&&d&&(C.preventDefault(),d()))},b),w.useEffect(()=>{if(y)return s&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(Xy=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(y)),p.layers.add(y),Qy(),()=>{s&&p.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=Xy)}},[y,b,s,p]),w.useEffect(()=>()=>{y&&(p.layers.delete(y),p.layersWithOutsidePointerEventsDisabled.delete(y),Qy())},[y,p]),w.useEffect(()=>{const C=()=>S({});return document.addEventListener(nh,C),()=>document.removeEventListener(nh,C)},[]),h.jsx(Va.div,{...m,ref:_,style:{pointerEvents:P?B?"auto":"none":void 0,...e.style},onFocusCapture:Ns(e.onFocusCapture,M.onFocusCapture),onBlurCapture:Ns(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Ns(e.onPointerDownCapture,q.onPointerDownCapture)})});mx.displayName=bD;var wD="DismissableLayerBranch",_D=w.forwardRef((e,n)=>{const s=w.useContext(hx),i=w.useRef(null),r=ai(n,i);return w.useEffect(()=>{const c=i.current;if(c)return s.branches.add(c),()=>{s.branches.delete(c)}},[s.branches]),h.jsx(Va.div,{...e,ref:r})});_D.displayName=wD;function ED(e,n=globalThis?.document){const s=gr(e),i=w.useRef(!1),r=w.useRef(()=>{});return w.useEffect(()=>{const c=d=>{if(d.target&&!i.current){let m=function(){px(xD,s,p,{discrete:!0})};const p={originalEvent:d};d.pointerType==="touch"?(n.removeEventListener("click",r.current),r.current=m,n.addEventListener("click",r.current,{once:!0})):m()}else n.removeEventListener("click",r.current);i.current=!1},u=window.setTimeout(()=>{n.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(u),n.removeEventListener("pointerdown",c),n.removeEventListener("click",r.current)}},[n,s]),{onPointerDownCapture:()=>i.current=!0}}function TD(e,n=globalThis?.document){const s=gr(e),i=w.useRef(!1);return w.useEffect(()=>{const r=c=>{c.target&&!i.current&&px(SD,s,{originalEvent:c},{discrete:!1})};return n.addEventListener("focusin",r),()=>n.removeEventListener("focusin",r)},[n,s]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function Qy(){const e=new CustomEvent(nh);document.dispatchEvent(e)}function px(e,n,s,{discrete:i}){const r=s.originalEvent.target,c=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});n&&r.addEventListener(e,n,{once:!0}),i?vD(r,c):r.dispatchEvent(c)}var Nf="focusScope.autoFocusOnMount",Mf="focusScope.autoFocusOnUnmount",Jy={bubbles:!1,cancelable:!0},ND="FocusScope",gx=w.forwardRef((e,n)=>{const{loop:s=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:c,...u}=e,[d,m]=w.useState(null),p=gr(r),y=gr(c),v=w.useRef(null),b=ai(n,T=>m(T)),S=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(i){let T=function(P){if(S.paused||!d)return;const B=P.target;d.contains(B)?v.current=B:Ss(v.current,{select:!0})},j=function(P){if(S.paused||!d)return;const B=P.relatedTarget;B!==null&&(d.contains(B)||Ss(v.current,{select:!0}))},k=function(P){if(document.activeElement===document.body)for(const q of P)q.removedNodes.length>0&&Ss(d)};document.addEventListener("focusin",T),document.addEventListener("focusout",j);const R=new MutationObserver(k);return d&&R.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",T),document.removeEventListener("focusout",j),R.disconnect()}}},[i,d,S.paused]),w.useEffect(()=>{if(d){t0.add(S);const T=document.activeElement;if(!d.contains(T)){const k=new CustomEvent(Nf,Jy);d.addEventListener(Nf,p),d.dispatchEvent(k),k.defaultPrevented||(MD(kD(vx(d)),{select:!0}),document.activeElement===T&&Ss(d))}return()=>{d.removeEventListener(Nf,p),setTimeout(()=>{const k=new CustomEvent(Mf,Jy);d.addEventListener(Mf,y),d.dispatchEvent(k),k.defaultPrevented||Ss(T??document.body,{select:!0}),d.removeEventListener(Mf,y),t0.remove(S)},0)}}},[d,p,y,S]);const _=w.useCallback(T=>{if(!s&&!i||S.paused)return;const j=T.key==="Tab"&&!T.altKey&&!T.ctrlKey&&!T.metaKey,k=document.activeElement;if(j&&k){const R=T.currentTarget,[P,B]=jD(R);P&&B?!T.shiftKey&&k===B?(T.preventDefault(),s&&Ss(P,{select:!0})):T.shiftKey&&k===P&&(T.preventDefault(),s&&Ss(B,{select:!0})):k===R&&T.preventDefault()}},[s,i,S.paused]);return h.jsx(Va.div,{tabIndex:-1,...u,ref:b,onKeyDown:_})});gx.displayName=ND;function MD(e,{select:n=!1}={}){const s=document.activeElement;for(const i of e)if(Ss(i,{select:n}),document.activeElement!==s)return}function jD(e){const n=vx(e),s=e0(n,e),i=e0(n.reverse(),e);return[s,i]}function vx(e){const n=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)n.push(s.currentNode);return n}function e0(e,n){for(const s of e)if(!CD(s,{upTo:n}))return s}function CD(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function DD(e){return e instanceof HTMLInputElement&&"select"in e}function Ss(e,{select:n=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&DD(e)&&n&&e.select()}}var t0=RD();function RD(){let e=[];return{add(n){const s=e[0];n!==s&&s?.pause(),e=n0(e,n),e.unshift(n)},remove(n){e=n0(e,n),e[0]?.resume()}}}function n0(e,n){const s=[...e],i=s.indexOf(n);return i!==-1&&s.splice(i,1),s}function kD(e){return e.filter(n=>n.tagName!=="A")}var AD="Portal",yx=w.forwardRef((e,n)=>{const{container:s,...i}=e,[r,c]=w.useState(!1);pr(()=>c(!0),[]);const u=s||r&&globalThis?.document?.body;return u?o_.createPortal(h.jsx(Va.div,{...i,ref:n}),u):null});yx.displayName=AD;function OD(e,n){return w.useReducer((s,i)=>n[s][i]??s,e)}var Lc=e=>{const{present:n,children:s}=e,i=zD(n),r=typeof s=="function"?s({present:i.isPresent}):w.Children.only(s),c=ai(i.ref,PD(r));return typeof s=="function"||i.isPresent?w.cloneElement(r,{ref:c}):null};Lc.displayName="Presence";function zD(e){const[n,s]=w.useState(),i=w.useRef(null),r=w.useRef(e),c=w.useRef("none"),u=e?"mounted":"unmounted",[d,m]=OD(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const p=Fo(i.current);c.current=d==="mounted"?p:"none"},[d]),pr(()=>{const p=i.current,y=r.current;if(y!==e){const b=c.current,S=Fo(p);e?m("MOUNT"):S==="none"||p?.display==="none"?m("UNMOUNT"):m(y&&b!==S?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,m]),pr(()=>{if(n){let p;const y=n.ownerDocument.defaultView??window,v=S=>{const T=Fo(i.current).includes(CSS.escape(S.animationName));if(S.target===n&&T&&(m("ANIMATION_END"),!r.current)){const j=n.style.animationFillMode;n.style.animationFillMode="forwards",p=y.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=j)})}},b=S=>{S.target===n&&(c.current=Fo(i.current))};return n.addEventListener("animationstart",b),n.addEventListener("animationcancel",v),n.addEventListener("animationend",v),()=>{y.clearTimeout(p),n.removeEventListener("animationstart",b),n.removeEventListener("animationcancel",v),n.removeEventListener("animationend",v)}}else m("ANIMATION_END")},[n,m]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:w.useCallback(p=>{i.current=p?getComputedStyle(p):null,s(p)},[])}}function Fo(e){return e?.animationName||"none"}function PD(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var jf=0;function ID(){w.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??a0()),document.body.insertAdjacentElement("beforeend",e[1]??a0()),jf++,()=>{jf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),jf--}},[])}function a0(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ba=function(){return ba=Object.assign||function(n){for(var s,i=1,r=arguments.length;i<r;i++){s=arguments[i];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(n[c]=s[c])}return n},ba.apply(this,arguments)};function bx(e,n){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(s[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(s[i[r]]=e[i[r]]);return s}function BD(e,n,s){if(s||arguments.length===2)for(var i=0,r=n.length,c;i<r;i++)(c||!(i in n))&&(c||(c=Array.prototype.slice.call(n,0,i)),c[i]=n[i]);return e.concat(c||Array.prototype.slice.call(n))}var ic="right-scroll-bar-position",lc="width-before-scroll-bar",LD="with-scroll-bars-hidden",qD="--removed-body-scroll-bar-size";function Cf(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function UD(e,n){var s=w.useState(function(){return{value:e,callback:n,facade:{get current(){return s.value},set current(i){var r=s.value;r!==i&&(s.value=i,s.callback(i,r))}}}})[0];return s.callback=n,s.facade}var $D=typeof window<"u"?w.useLayoutEffect:w.useEffect,s0=new WeakMap;function HD(e,n){var s=UD(null,function(i){return e.forEach(function(r){return Cf(r,i)})});return $D(function(){var i=s0.get(s);if(i){var r=new Set(i),c=new Set(e),u=s.current;r.forEach(function(d){c.has(d)||Cf(d,null)}),c.forEach(function(d){r.has(d)||Cf(d,u)})}s0.set(s,e)},[e]),s}function ZD(e){return e}function FD(e,n){n===void 0&&(n=ZD);var s=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(c){var u=n(c,i);return s.push(u),function(){s=s.filter(function(d){return d!==u})}},assignSyncMedium:function(c){for(i=!0;s.length;){var u=s;s=[],u.forEach(c)}s={push:function(d){return c(d)},filter:function(){return s}}},assignMedium:function(c){i=!0;var u=[];if(s.length){var d=s;s=[],d.forEach(c),u=s}var m=function(){var y=u;u=[],y.forEach(c)},p=function(){return Promise.resolve().then(m)};p(),s={push:function(y){u.push(y),p()},filter:function(y){return u=u.filter(y),s}}}};return r}function GD(e){e===void 0&&(e={});var n=FD(null);return n.options=ba({async:!0,ssr:!1},e),n}var xx=function(e){var n=e.sideCar,s=bx(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=n.read();if(!i)throw new Error("Sidecar medium not found");return w.createElement(i,ba({},s))};xx.isSideCarExport=!0;function YD(e,n){return e.useMedium(n),xx}var Sx=GD(),Df=function(){},qc=w.forwardRef(function(e,n){var s=w.useRef(null),i=w.useState({onScrollCapture:Df,onWheelCapture:Df,onTouchMoveCapture:Df}),r=i[0],c=i[1],u=e.forwardProps,d=e.children,m=e.className,p=e.removeScrollBar,y=e.enabled,v=e.shards,b=e.sideCar,S=e.noRelative,_=e.noIsolation,T=e.inert,j=e.allowPinchZoom,k=e.as,R=k===void 0?"div":k,P=e.gapMode,B=bx(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),q=b,M=HD([s,n]),C=ba(ba({},B),r);return w.createElement(w.Fragment,null,y&&w.createElement(q,{sideCar:Sx,removeScrollBar:p,shards:v,noRelative:S,noIsolation:_,inert:T,setCallbacks:c,allowPinchZoom:!!j,lockRef:s,gapMode:P}),u?w.cloneElement(w.Children.only(d),ba(ba({},C),{ref:M})):w.createElement(R,ba({},C,{className:m,ref:M}),d))});qc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};qc.classNames={fullWidth:lc,zeroRight:ic};var VD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function KD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=VD();return n&&e.setAttribute("nonce",n),e}function WD(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function XD(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var QD=function(){var e=0,n=null;return{add:function(s){e==0&&(n=KD())&&(WD(n,s),XD(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},JD=function(){var e=QD();return function(n,s){w.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&s])}},wx=function(){var e=JD(),n=function(s){var i=s.styles,r=s.dynamic;return e(i,r),null};return n},eR={left:0,top:0,right:0,gap:0},Rf=function(e){return parseInt(e||"",10)||0},tR=function(e){var n=window.getComputedStyle(document.body),s=n[e==="padding"?"paddingLeft":"marginLeft"],i=n[e==="padding"?"paddingTop":"marginTop"],r=n[e==="padding"?"paddingRight":"marginRight"];return[Rf(s),Rf(i),Rf(r)]},nR=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return eR;var n=tR(e),s=document.documentElement.clientWidth,i=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,i-s+n[2]-n[0])}},aR=wx(),Xi="data-scroll-locked",sR=function(e,n,s,i){var r=e.left,c=e.top,u=e.right,d=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(LD,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(d,"px ").concat(i,`;
  }
  body[`).concat(Xi,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(i,";"),s==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(i,`;
    `),s==="padding"&&"padding-right: ".concat(d,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ic,` {
    right: `).concat(d,"px ").concat(i,`;
  }
  
  .`).concat(lc,` {
    margin-right: `).concat(d,"px ").concat(i,`;
  }
  
  .`).concat(ic," .").concat(ic,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(lc," .").concat(lc,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Xi,`] {
    `).concat(qD,": ").concat(d,`px;
  }
`)},i0=function(){var e=parseInt(document.body.getAttribute(Xi)||"0",10);return isFinite(e)?e:0},iR=function(){w.useEffect(function(){return document.body.setAttribute(Xi,(i0()+1).toString()),function(){var e=i0()-1;e<=0?document.body.removeAttribute(Xi):document.body.setAttribute(Xi,e.toString())}},[])},lR=function(e){var n=e.noRelative,s=e.noImportant,i=e.gapMode,r=i===void 0?"margin":i;iR();var c=w.useMemo(function(){return nR(r)},[r]);return w.createElement(aR,{styles:sR(c,!n,r,s?"":"!important")})},ah=!1;if(typeof window<"u")try{var Go=Object.defineProperty({},"passive",{get:function(){return ah=!0,!0}});window.addEventListener("test",Go,Go),window.removeEventListener("test",Go,Go)}catch{ah=!1}var qi=ah?{passive:!1}:!1,rR=function(e){return e.tagName==="TEXTAREA"},_x=function(e,n){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[n]!=="hidden"&&!(s.overflowY===s.overflowX&&!rR(e)&&s[n]==="visible")},oR=function(e){return _x(e,"overflowY")},cR=function(e){return _x(e,"overflowX")},l0=function(e,n){var s=n.ownerDocument,i=n;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=Ex(e,i);if(r){var c=Tx(e,i),u=c[1],d=c[2];if(u>d)return!0}i=i.parentNode}while(i&&i!==s.body);return!1},uR=function(e){var n=e.scrollTop,s=e.scrollHeight,i=e.clientHeight;return[n,s,i]},dR=function(e){var n=e.scrollLeft,s=e.scrollWidth,i=e.clientWidth;return[n,s,i]},Ex=function(e,n){return e==="v"?oR(n):cR(n)},Tx=function(e,n){return e==="v"?uR(n):dR(n)},fR=function(e,n){return e==="h"&&n==="rtl"?-1:1},hR=function(e,n,s,i,r){var c=fR(e,window.getComputedStyle(n).direction),u=c*i,d=s.target,m=n.contains(d),p=!1,y=u>0,v=0,b=0;do{if(!d)break;var S=Tx(e,d),_=S[0],T=S[1],j=S[2],k=T-j-c*_;(_||k)&&Ex(e,d)&&(v+=k,b+=_);var R=d.parentNode;d=R&&R.nodeType===Node.DOCUMENT_FRAGMENT_NODE?R.host:R}while(!m&&d!==document.body||m&&(n.contains(d)||n===d));return(y&&Math.abs(v)<1||!y&&Math.abs(b)<1)&&(p=!0),p},Yo=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},r0=function(e){return[e.deltaX,e.deltaY]},o0=function(e){return e&&"current"in e?e.current:e},mR=function(e,n){return e[0]===n[0]&&e[1]===n[1]},pR=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},gR=0,Ui=[];function vR(e){var n=w.useRef([]),s=w.useRef([0,0]),i=w.useRef(),r=w.useState(gR++)[0],c=w.useState(wx)[0],u=w.useRef(e);w.useEffect(function(){u.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var T=BD([e.lockRef.current],(e.shards||[]).map(o0),!0).filter(Boolean);return T.forEach(function(j){return j.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),T.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var d=w.useCallback(function(T,j){if("touches"in T&&T.touches.length===2||T.type==="wheel"&&T.ctrlKey)return!u.current.allowPinchZoom;var k=Yo(T),R=s.current,P="deltaX"in T?T.deltaX:R[0]-k[0],B="deltaY"in T?T.deltaY:R[1]-k[1],q,M=T.target,C=Math.abs(P)>Math.abs(B)?"h":"v";if("touches"in T&&C==="h"&&M.type==="range")return!1;var D=window.getSelection(),Z=D&&D.anchorNode,re=Z?Z===M||Z.contains(M):!1;if(re)return!1;var fe=l0(C,M);if(!fe)return!0;if(fe?q=C:(q=C==="v"?"h":"v",fe=l0(C,M)),!fe)return!1;if(!i.current&&"changedTouches"in T&&(P||B)&&(i.current=q),!q)return!0;var ae=i.current||q;return hR(ae,j,T,ae==="h"?P:B)},[]),m=w.useCallback(function(T){var j=T;if(!(!Ui.length||Ui[Ui.length-1]!==c)){var k="deltaY"in j?r0(j):Yo(j),R=n.current.filter(function(q){return q.name===j.type&&(q.target===j.target||j.target===q.shadowParent)&&mR(q.delta,k)})[0];if(R&&R.should){j.cancelable&&j.preventDefault();return}if(!R){var P=(u.current.shards||[]).map(o0).filter(Boolean).filter(function(q){return q.contains(j.target)}),B=P.length>0?d(j,P[0]):!u.current.noIsolation;B&&j.cancelable&&j.preventDefault()}}},[]),p=w.useCallback(function(T,j,k,R){var P={name:T,delta:j,target:k,should:R,shadowParent:yR(k)};n.current.push(P),setTimeout(function(){n.current=n.current.filter(function(B){return B!==P})},1)},[]),y=w.useCallback(function(T){s.current=Yo(T),i.current=void 0},[]),v=w.useCallback(function(T){p(T.type,r0(T),T.target,d(T,e.lockRef.current))},[]),b=w.useCallback(function(T){p(T.type,Yo(T),T.target,d(T,e.lockRef.current))},[]);w.useEffect(function(){return Ui.push(c),e.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:b}),document.addEventListener("wheel",m,qi),document.addEventListener("touchmove",m,qi),document.addEventListener("touchstart",y,qi),function(){Ui=Ui.filter(function(T){return T!==c}),document.removeEventListener("wheel",m,qi),document.removeEventListener("touchmove",m,qi),document.removeEventListener("touchstart",y,qi)}},[]);var S=e.removeScrollBar,_=e.inert;return w.createElement(w.Fragment,null,_?w.createElement(c,{styles:pR(r)}):null,S?w.createElement(lR,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function yR(e){for(var n=null;e!==null;)e instanceof ShadowRoot&&(n=e.host,e=e.host),e=e.parentNode;return n}const bR=YD(Sx,vR);var Nx=w.forwardRef(function(e,n){return w.createElement(qc,ba({},e,{ref:n,sideCar:bR}))});Nx.classNames=qc.classNames;var xR=function(e){if(typeof document>"u")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},$i=new WeakMap,Vo=new WeakMap,Ko={},kf=0,Mx=function(e){return e&&(e.host||Mx(e.parentNode))},SR=function(e,n){return n.map(function(s){if(e.contains(s))return s;var i=Mx(s);return i&&e.contains(i)?i:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},wR=function(e,n,s,i){var r=SR(n,Array.isArray(e)?e:[e]);Ko[s]||(Ko[s]=new WeakMap);var c=Ko[s],u=[],d=new Set,m=new Set(r),p=function(v){!v||d.has(v)||(d.add(v),p(v.parentNode))};r.forEach(p);var y=function(v){!v||m.has(v)||Array.prototype.forEach.call(v.children,function(b){if(d.has(b))y(b);else try{var S=b.getAttribute(i),_=S!==null&&S!=="false",T=($i.get(b)||0)+1,j=(c.get(b)||0)+1;$i.set(b,T),c.set(b,j),u.push(b),T===1&&_&&Vo.set(b,!0),j===1&&b.setAttribute(s,"true"),_||b.setAttribute(i,"true")}catch(k){console.error("aria-hidden: cannot operate on ",b,k)}})};return y(n),d.clear(),kf++,function(){u.forEach(function(v){var b=$i.get(v)-1,S=c.get(v)-1;$i.set(v,b),c.set(v,S),b||(Vo.has(v)||v.removeAttribute(i),Vo.delete(v)),S||v.removeAttribute(s)}),kf--,kf||($i=new WeakMap,$i=new WeakMap,Vo=new WeakMap,Ko={})}},_R=function(e,n,s){s===void 0&&(s="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),r=xR(e);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),wR(i,r,s,"aria-hidden")):function(){return null}},Uc="Dialog",[jx]=aD(Uc),[ER,ua]=jx(Uc),Cx=e=>{const{__scopeDialog:n,children:s,open:i,defaultOpen:r,onOpenChange:c,modal:u=!0}=e,d=w.useRef(null),m=w.useRef(null),[p,y]=oD({prop:i,defaultProp:r??!1,onChange:c,caller:Uc});return h.jsx(ER,{scope:n,triggerRef:d,contentRef:m,contentId:Tf(),titleId:Tf(),descriptionId:Tf(),open:p,onOpenChange:y,onOpenToggle:w.useCallback(()=>y(v=>!v),[y]),modal:u,children:s})};Cx.displayName=Uc;var Dx="DialogTrigger",TR=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=ua(Dx,s),c=ai(n,r.triggerRef);return h.jsx(Va.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":$h(r.open),...i,ref:c,onClick:Ns(e.onClick,r.onOpenToggle)})});TR.displayName=Dx;var qh="DialogPortal",[NR,Rx]=jx(qh,{forceMount:void 0}),kx=e=>{const{__scopeDialog:n,forceMount:s,children:i,container:r}=e,c=ua(qh,n);return h.jsx(NR,{scope:n,forceMount:s,children:w.Children.map(i,u=>h.jsx(Lc,{present:s||c.open,children:h.jsx(yx,{asChild:!0,container:r,children:u})}))})};kx.displayName=qh;var wc="DialogOverlay",Ax=w.forwardRef((e,n)=>{const s=Rx(wc,e.__scopeDialog),{forceMount:i=s.forceMount,...r}=e,c=ua(wc,e.__scopeDialog);return c.modal?h.jsx(Lc,{present:i||c.open,children:h.jsx(jR,{...r,ref:n})}):null});Ax.displayName=wc;var MR=fx("DialogOverlay.RemoveScroll"),jR=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=ua(wc,s);return h.jsx(Nx,{as:MR,allowPinchZoom:!0,shards:[r.contentRef],children:h.jsx(Va.div,{"data-state":$h(r.open),...i,ref:n,style:{pointerEvents:"auto",...i.style}})})}),Js="DialogContent",Ox=w.forwardRef((e,n)=>{const s=Rx(Js,e.__scopeDialog),{forceMount:i=s.forceMount,...r}=e,c=ua(Js,e.__scopeDialog);return h.jsx(Lc,{present:i||c.open,children:c.modal?h.jsx(CR,{...r,ref:n}):h.jsx(DR,{...r,ref:n})})});Ox.displayName=Js;var CR=w.forwardRef((e,n)=>{const s=ua(Js,e.__scopeDialog),i=w.useRef(null),r=ai(n,s.contentRef,i);return w.useEffect(()=>{const c=i.current;if(c)return _R(c)},[]),h.jsx(zx,{...e,ref:r,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ns(e.onCloseAutoFocus,c=>{c.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:Ns(e.onPointerDownOutside,c=>{const u=c.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0;(u.button===2||d)&&c.preventDefault()}),onFocusOutside:Ns(e.onFocusOutside,c=>c.preventDefault())})}),DR=w.forwardRef((e,n)=>{const s=ua(Js,e.__scopeDialog),i=w.useRef(!1),r=w.useRef(!1);return h.jsx(zx,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{e.onCloseAutoFocus?.(c),c.defaultPrevented||(i.current||s.triggerRef.current?.focus(),c.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:c=>{e.onInteractOutside?.(c),c.defaultPrevented||(i.current=!0,c.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const u=c.target;s.triggerRef.current?.contains(u)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&r.current&&c.preventDefault()}})}),zx=w.forwardRef((e,n)=>{const{__scopeDialog:s,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:c,...u}=e,d=ua(Js,s),m=w.useRef(null),p=ai(n,m);return ID(),h.jsxs(h.Fragment,{children:[h.jsx(gx,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:c,children:h.jsx(mx,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":$h(d.open),...u,ref:p,onDismiss:()=>d.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(RR,{titleId:d.titleId}),h.jsx(AR,{contentRef:m,descriptionId:d.descriptionId})]})]})}),Uh="DialogTitle",Px=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=ua(Uh,s);return h.jsx(Va.h2,{id:r.titleId,...i,ref:n})});Px.displayName=Uh;var Ix="DialogDescription",Bx=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=ua(Ix,s);return h.jsx(Va.p,{id:r.descriptionId,...i,ref:n})});Bx.displayName=Ix;var Lx="DialogClose",qx=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=ua(Lx,s);return h.jsx(Va.button,{type:"button",...i,ref:n,onClick:Ns(e.onClick,()=>r.onOpenChange(!1))})});qx.displayName=Lx;function $h(e){return e?"open":"closed"}var Ux="DialogTitleWarning",[wz,$x]=nD(Ux,{contentName:Js,titleName:Uh,docsSlug:"dialog"}),RR=({titleId:e})=>{const n=$x(Ux),s=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return w.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},kR="DialogDescriptionWarning",AR=({contentRef:e,descriptionId:n})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${$x(kR).contentName}}.`;return w.useEffect(()=>{const r=e.current?.getAttribute("aria-describedby");n&&r&&(document.getElementById(n)||console.warn(i))},[i,e,n]),null},OR=Cx,zR=kx,PR=Ax,IR=Ox,BR=Px,LR=Bx,qR=qx;function Hx(e){var n,s,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(n=0;n<r;n++)e[n]&&(s=Hx(e[n]))&&(i&&(i+=" "),i+=s)}else for(s in e)e[s]&&(i&&(i+=" "),i+=s);return i}function UR(){for(var e,n,s=0,i="",r=arguments.length;s<r;s++)(e=arguments[s])&&(n=Hx(e))&&(i&&(i+=" "),i+=n);return i}function gt(...e){return UR(e)}function Me(e){return h.jsx("button",{type:e.type??"button",onClick:e.onClick,className:gt("wb-button",e.className,e.disabled&&"opacity-50 cursor-not-allowed"),"data-variant":e.variant==="default"?void 0:e.variant,title:e.title,disabled:e.disabled,children:e.children})}function Qi(e){return h.jsxs("section",{className:gt("wb-panel rounded-2xl",e.className),children:[(e.title||e.headerRight)&&h.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-[var(--wb-border-muted)] px-4 py-3",children:[h.jsx("div",{className:"text-sm font-semibold tracking-wide text-[var(--wb-text)]",children:e.title}),e.headerRight?h.jsx("div",{className:"flex items-center gap-2",children:e.headerRight}):null]}),h.jsx("div",{className:"min-h-0",children:e.children})]})}function qe(e){return h.jsx("label",{className:gt("mb-1 block text-xs font-medium uppercase tracking-wide text-[var(--wb-muted)]",e.className),children:e.children})}function at(e){return h.jsx("button",{type:"button",className:gt("wb-chip",e.className,e.disabled&&"opacity-50 cursor-not-allowed"),"data-active":e.active?"true":"false",onClick:e.disabled?void 0:e.onClick,title:e.title,disabled:e.disabled,children:e.children})}function Wo(e){const n=e.delta,s=n==null?"":n>0?"wb-text-success":n<0?"wb-text-danger":"text-[var(--wb-muted)]";return h.jsxs("div",{className:gt("wb-card p-3",e.className),children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:e.label}),h.jsx("div",{className:gt("mt-1 text-lg font-semibold",e.valueClassName),children:e.value}),n!=null?h.jsxs("div",{className:gt("mt-1 text-xs",s),children:[n>0?"+":"",Math.round(n)]}):null]})}function Ji(e){return h.jsx("div",{className:gt("wb-scrollbar min-h-0 overflow-auto",e.className),children:e.children})}function Hh(e){return h.jsx(OR,{open:e.open,onOpenChange:e.onOpenChange,children:h.jsxs(zR,{children:[h.jsx(PR,{className:"fixed inset-0 z-40 backdrop-blur-sm",style:{background:"var(--wb-overlay)"}}),h.jsxs(IR,{className:gt("wb-panel fixed left-1/2 top-1/2 z-50 w-[min(95vw,1100px)] -translate-x-1/2 -translate-y-1/2 rounded-2xl shadow-2xl",e.className),children:[h.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-[var(--wb-border-muted)] px-5 py-4",children:[h.jsxs("div",{children:[h.jsx(BR,{className:"text-base font-semibold",children:e.title}),e.description?h.jsx(LR,{className:"mt-1 text-sm text-[var(--wb-muted)]",children:e.description}):null]}),h.jsx(qR,{asChild:!0,children:h.jsx("button",{className:"wb-icon-button","aria-label":"Close",children:h.jsx(xT,{size:16})})})]}),h.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:e.children}),e.footer?h.jsx("div",{className:"border-t border-[var(--wb-border-muted)] px-5 py-4",children:e.footer}):null]})]})})}function Za(e){return h.jsxs("div",{children:[h.jsx(qe,{children:e.label}),h.jsx("input",{className:"wb-input",type:"number",value:e.value??"",min:e.min,max:e.max,step:e.step??1,placeholder:e.placeholder,onChange:n=>{const s=n.target.value.trim();e.onChange(s===""?null:Number(s))}})]})}const $R={bow:"0 0",spear:"9.090909090909088% 0",wand:"18.181818181818183% 0",dagger:"27.27272727272727% 0",relik:"36.36363636363637% 0",helmet:"45.45454545454546% 0",chestplate:"54.54545454545454% 0",leggings:"63.63636363636363% 0",boots:"72.72727272727272% 0",ring:"81.81818181818181% 0",bracelet:"90.90909090909092% 0",necklace:"100% 0"};function HR(e){return e.category==="weapon"?e.type:e.category}function ZR(e){const n=HR(e.item),s=$R[n],i="./media/items/new.png";return s?h.jsx("div",{className:"wb-surface-strong relative h-9 w-9 shrink-0 overflow-hidden rounded-lg",title:`${e.item.type} icon`,children:h.jsx("div",{"aria-hidden":!0,className:"absolute inset-[3px] rounded-[6px]",style:{backgroundImage:`url(${i})`,backgroundPosition:s,backgroundSize:"1200% 100%",backgroundRepeat:"no-repeat",imageRendering:"pixelated"}})}):h.jsx("div",{className:"wb-surface-strong flex h-9 w-9 items-center justify-center rounded-lg text-xs text-[var(--wb-muted)]",children:"?"})}function FR(e){switch(e){case"Mythic":return"wb-tier-mythic";case"Fabled":return"wb-tier-fabled";case"Legendary":return"wb-tier-legendary";case"Rare":return"wb-tier-rare";case"Unique":return"wb-tier-unique";case"Set":return"wb-tier-set";default:return"wb-tier-normal"}}function Zx(e){const n=[{label:"Strength",value:e.numeric.reqStr},{label:"Dexterity",value:e.numeric.reqDex},{label:"Intelligence",value:e.numeric.reqInt},{label:"Defense",value:e.numeric.reqDef},{label:"Agility",value:e.numeric.reqAgi}].filter(s=>s.value>0);return n.length===0?null:n.map(s=>`${s.label} ${s.value}`).join(", ")}function Fx(e){const n=[{label:"Strength",value:e.numeric.spStr},{label:"Dexterity",value:e.numeric.spDex},{label:"Intelligence",value:e.numeric.spInt},{label:"Defense",value:e.numeric.spDef},{label:"Agility",value:e.numeric.spAgi}].filter(s=>s.value!==0);return n.length===0?null:n.map(s=>`${s.label} ${s.value>0?"+":""}${s.value}`).join(", ")}function Gx(e){const n=e.legacyRaw,s=[["Neutral",typeof n.nDam=="string"?n.nDam:""],["Earth",typeof n.eDam=="string"?n.eDam:""],["Thunder",typeof n.tDam=="string"?n.tDam:""],["Water",typeof n.wDam=="string"?n.wDam:""],["Fire",typeof n.fDam=="string"?n.fDam:""],["Air",typeof n.aDam=="string"?n.aDam:""]].filter(([,i])=>i&&i!=="0-0");return s.length===0?null:s.map(([i,r])=>`${i}: ${r}`).join("  ")}const GR=new Set(["reqTotal","skillPointTotal","offenseScore","ehpProxy","utilityScore","sumSpPct","sumSpRaw","strReq","dexReq","intReq","defReq","agiReq","str","dex","int","def","agi"]);function Yx(e){const n=[];for(const[s,i]of Object.entries(e.numericIndex)){if(GR.has(s))continue;const r=typeof i=="number"?i:0;r!==0&&n.push({key:s,value:r})}return e.powderSlots>0&&!n.some(s=>s.key==="slots")&&n.push({key:"slots",value:e.powderSlots}),n.sort((s,i)=>Yt(s.key).localeCompare(Yt(i.key))),n}function Vx(e,n){return Number.isInteger(n)?String(n):n.toFixed(1).replace(/\.0$/,"")}function Kx(e){return e>0?"positive":e<0?"negative":"neutral"}function YR(e){const{item:n}=e,s=Zx(n),i=Fx(n),r=Gx(n),c=Yx(n),u=e.dense??!1;return h.jsxs("div",{className:gt("space-y-1.5",u?"text-[11px]":"text-xs"),children:[(s||i)&&h.jsxs("div",{className:"flex flex-wrap gap-1.5 text-[11px]",children:[s?h.jsxs("span",{className:"wb-pill","data-tone":"req",children:[h.jsx("span",{className:"font-semibold",children:"Req"}),h.jsx("span",{className:"ml-1",children:s})]}):null,i?h.jsxs("span",{className:"wb-pill","data-tone":"bonus",children:[h.jsx("span",{className:"font-semibold",children:"SP"}),h.jsx("span",{className:"ml-1",children:i})]}):null]}),c.length>0?h.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(({key:d,value:m})=>h.jsxs("span",{className:"wb-pill text-[11px]","data-tone":Kx(m),children:[h.jsx("span",{className:gt((m>0||m<0)&&"font-semibold"),children:Vx(d,m)}),h.jsx("span",{className:"ml-1 opacity-90",children:Yt(d)})]},d))}):null,r?h.jsx("div",{className:"wb-surface-strong flex flex-wrap gap-1.5 rounded px-2 py-1.5 text-[11px] leading-relaxed text-[var(--wb-muted)]",children:r.split(/\s{2,}/).map((d,m)=>h.jsx("span",{className:"whitespace-nowrap",children:d},m))}):null,h.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[h.jsxs("div",{className:"wb-surface-strong rounded px-2 py-1",children:[Yt("baseDps")," ",Math.round(n.roughScoreFields.baseDps)]}),h.jsxs("div",{className:"wb-surface-strong rounded px-2 py-1",children:[Yt("ehpProxy")," ",Math.round(n.roughScoreFields.ehpProxy)]}),h.jsxs("div",{className:"wb-surface-strong rounded px-2 py-1",children:[Yt("offenseScore")," ",Math.round(n.roughScoreFields.offense)]}),h.jsxs("div",{className:"wb-surface-strong rounded px-2 py-1",children:[Yt("skillPointTotal")," ",Math.round(n.roughScoreFields.skillPointTotal)]})]}),n.majorIds.length>0?h.jsxs("div",{className:"break-words text-[var(--wb-muted)]",children:["Major IDs: ",n.majorIds.join(", ")]}):null]})}function $c(e){const n=db({id:e.dragData?`drag:${e.dragData.kind}:${e.item.id}:${e.dragData.sourceSlot??e.dragData.sourceCategory??""}`:`item:${e.item.id}`,data:e.dragData?{dragItem:e.dragData}:void 0}),s=e.dragData?{transform:uc.Translate.toString(n.transform),opacity:n.isDragging?.45:1}:void 0,i=e.showDetails?Zx(e.item):null,r=e.showDetails?Fx(e.item):null,c=e.showDetails?Gx(e.item):null,u=e.showDetails?Yx(e.item):[];return h.jsxs("div",{ref:e.dragData?n.setNodeRef:void 0,style:s,className:gt("wb-card",e.dense?"p-2":e.compact?"p-2.5":"p-3",n.isDragging&&"ring-2 ring-[var(--wb-success-border)]"),onMouseEnter:()=>e.onHover?.(!0),onMouseLeave:()=>e.onHover?.(!1),children:[h.jsxs("div",{className:gt("flex items-start gap-2",e.dense&&"gap-1.5"),children:[e.dragData?h.jsx("button",{type:"button",...n.listeners,...n.attributes,className:"wb-icon-button mt-0.5","aria-label":`Drag ${e.item.displayName}`,children:h.jsx(XE,{size:14})}):null,h.jsx(ZR,{item:e.item}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[h.jsx("div",{className:gt("break-words text-sm font-semibold leading-tight",FR(e.item.tier)),children:e.item.displayName}),e.badge?h.jsx("span",{className:"wb-chip",children:e.badge}):null,e.locked?h.jsxs("span",{className:"wb-chip inline-flex items-center gap-1",children:[h.jsx(gb,{size:11})," Locked"]}):null]}),h.jsxs("div",{className:gt("mt-1 flex flex-wrap gap-y-1 text-[var(--wb-muted)]",e.dense?"gap-x-2 text-xs":"gap-x-3 text-xs"),children:[h.jsx("span",{children:e.item.type}),h.jsxs("span",{children:["Lv ",e.item.level]}),e.dense?null:h.jsx("span",{children:e.item.tier}),!e.dense&&e.item.classReq?h.jsx("span",{children:e.item.classReq}):null,!e.dense&&e.item.majorIds.length>0?h.jsxs("span",{children:["MID ",e.item.majorIds.length]}):null,e.dense&&e.item.majorIds.length>0?h.jsxs("span",{children:["M",e.item.majorIds.length]}):null]}),e.showDetails?h.jsxs("div",{className:gt("mt-2 space-y-1",e.dense?"text-[11px]":"text-xs"),children:[(i||r)&&h.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[i?h.jsxs("span",{className:"wb-pill","data-tone":"req",children:[h.jsx("span",{className:"font-semibold",children:"Req"}),h.jsx("span",{className:"ml-1",children:i})]}):null,r?h.jsxs("span",{className:"wb-pill","data-tone":"bonus",children:[h.jsx("span",{className:"font-semibold",children:"SP"}),h.jsx("span",{className:"ml-1",children:r})]}):null]}),u.length>0?h.jsx("div",{className:"flex flex-wrap gap-1",children:u.map(({key:d,value:m})=>h.jsxs("span",{className:"wb-pill text-[11px]","data-tone":Kx(m),children:[h.jsx("span",{className:gt((m>0||m<0)&&"font-semibold"),children:Vx(d,m)}),h.jsx("span",{className:"ml-1 opacity-90",children:Yt(d)})]},d))}):null,c?h.jsx("div",{className:"wb-surface-strong flex flex-wrap gap-1.5 rounded px-2 py-1.5 text-[11px] leading-relaxed text-[var(--wb-muted)]",children:c.split(/\s{2,}/).map((d,m)=>h.jsx("span",{className:"whitespace-nowrap",children:d},m))}):null,e.item.majorIds.length>0?h.jsxs("div",{className:"break-words text-[var(--wb-muted)]",children:["Major IDs: ",e.item.majorIds.join(", ")]}):null]}):null,e.compact?null:h.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs",children:[h.jsxs("div",{className:"wb-surface-strong rounded-lg px-2 py-1",children:[Yt("baseDps")," ",Math.round(e.item.roughScoreFields.baseDps)]}),h.jsxs("div",{className:"wb-surface-strong rounded-lg px-2 py-1",children:[Yt("ehpProxy")," ",Math.round(e.item.roughScoreFields.ehpProxy)]}),h.jsxs("div",{className:"wb-surface-strong rounded-lg px-2 py-1",children:[Yt("offenseScore")," ",Math.round(e.item.roughScoreFields.offense)]}),h.jsxs("div",{className:"wb-surface-strong rounded-lg px-2 py-1",children:[Yt("skillPointTotal")," ",Math.round(e.item.roughScoreFields.skillPointTotal)]})]})]})]}),(e.onPin||e.onEquip||e.onRemove)&&h.jsxs("div",{className:gt("mt-2 flex flex-wrap",e.dense?"gap-1":"gap-2"),children:[e.onPin?h.jsxs(Me,{className:gt("text-xs",e.dense?"px-1.5 py-0.5":"px-2 py-1"),variant:"ghost",onClick:e.onPin,children:[h.jsx(aT,{size:12,className:"mr-1 inline"}),"Pin"]}):null,e.onEquip?h.jsxs(Me,{className:gt("text-xs",e.dense?"px-1.5 py-0.5":"px-2 py-1"),onClick:e.onEquip,children:[h.jsx(iT,{size:12,className:"mr-1 inline"}),"Equip"]}):null,e.onRemove?h.jsx(Me,{className:gt("text-xs",e.dense?"px-1.5 py-0.5":"px-2 py-1"),variant:"ghost",onClick:e.onRemove,children:"Remove"}):null]})]})}const Wx="workbench-search-presets:v2";function VR(){try{const e=window.localStorage.getItem(Wx);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}}function KR(e){window.localStorage.setItem(Wx,JSON.stringify(e))}function c0(e,n){return e.includes(n)?e.filter(s=>s!==n):[...e,n]}const WR=220,XR=200,er=50;function QR(e){const n=e.catalog.itemsById.get(e.itemId);if(!n)return null;const s=e.selectedSlot!=null&&xa(e.selectedSlot)===n.category;return h.jsx("div",{className:"relative",onMouseEnter:i=>e.onHoverForStats(e.itemId,i.currentTarget.getBoundingClientRect()),onMouseLeave:()=>e.onHoverForStats(null,null),children:h.jsx($c,{item:n,compact:!0,dense:!0,showDetails:!1,dragData:{kind:"search",itemId:n.id},onPin:()=>e.onPin(n.id),onEquip:()=>e.onEquip(n.id),onHover:i=>e.onHover(i?n.id:null,i?e.selectedSlot:null),badge:s?`Fits ${e.selectedSlot}`:void 0})})}function Xx(e){const n=w.useRef(null),s=e.result?.rows??[],i=w.useDeferredValue(s),[r,c]=w.useState(0),[u,d]=w.useState(null),m=w.useRef(null),p=i.length,y=Math.max(1,Math.ceil(p/er)),v=Math.min(r,Math.max(0,y-1)),b=i.slice(v*er,(v+1)*er);w.useEffect(()=>{c(0)},[e.result]);const S=Z=>{m.current&&(window.clearTimeout(m.current),m.current=null),d(Z)},_=()=>{m.current=window.setTimeout(()=>d(null),120)},T=!e.state.resultsBelowBuild,j=T?1:3,k=T?WR:XR,R=Math.ceil(b.length/j),P=eD({count:R,getScrollElement:()=>n.current,estimateSize:()=>k,measureElement:Z=>Z.getBoundingClientRect().height,overscan:4}),B=u?e.catalog.itemsById.get(u.itemId):null,q=e.result!=null||e.loading,M=e.loading?"Searching...":e.result?`${e.result.total.toLocaleString()} results`:"Search or filter to see items",C=p===0?0:v*er+1,D=Math.min((v+1)*er,p);return h.jsxs("div",{className:"min-h-0 flex-1",children:[h.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2 text-xs text-[var(--wb-muted)]",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{children:M}),q&&p>0?h.jsx("span",{className:"shrink-0",children:y>1?h.jsxs(h.Fragment,{children:[h.jsx("button",{type:"button",className:"wb-inline-button mr-1",onClick:()=>c(Z=>Math.max(0,Z-1)),disabled:v<=0,title:"Previous page",children:""}),h.jsxs("span",{children:[C.toLocaleString(),"",D.toLocaleString()]}),h.jsx("button",{type:"button",className:"wb-inline-button ml-1",onClick:()=>c(Z=>Math.min(y-1,Z+1)),disabled:v>=y-1,title:"Next page",children:""})]}):null}):null]}),q?h.jsxs("span",{children:[(e.state.sortKeys??["relevance"]).map(Z=>Yt(Z)).join("  "),e.state.sortDescending?" ":" "]}):null]}),h.jsx("div",{ref:n,className:gt("wb-scrollbar wb-surface overflow-auto rounded-xl",e.embedded?"min-h-[160px] flex-1":"h-[calc(100vh-26rem)]"),children:q?b.length===0?h.jsx("div",{className:"flex min-h-[120px] flex-col items-center justify-center gap-1 px-4 py-6 text-center text-sm text-[var(--wb-muted)]",children:h.jsx("span",{children:"No items match your filters."})}):h.jsx("div",{style:{height:P.getTotalSize(),position:"relative"},children:P.getVirtualItems().map(Z=>{const re=Z.index*j,fe=b.slice(re,re+j);return h.jsx("div",{"data-index":Z.index,ref:P.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${Z.start}px)`,padding:"6px 8px"},className:T?"grid grid-cols-1":"grid grid-cols-2 gap-2 xl:grid-cols-3",children:fe.map(ae=>h.jsx(QR,{catalog:e.catalog,itemId:ae.id,selectedSlot:e.selectedSlot,onPin:e.onPin,onEquip:e.onEquip,onHover:e.onHover,onHoverForStats:(ce,$)=>{ce!=null&&$?S({itemId:ce,rect:$}):_()}},ae.id))},Z.key)})}):h.jsx("div",{className:"flex min-h-[120px] flex-col items-center justify-center gap-1 px-4 py-6 text-center text-sm text-[var(--wb-muted)]",children:h.jsx("span",{children:"Enter a search term, select categories, or apply filters above to see items."})})}),B&&u?Fa.createPortal(h.jsxs("div",{className:"fixed z-[100] w-72 max-h-[80vh] overflow-auto rounded-xl border border-[var(--wb-border)] bg-[var(--wb-panel)] p-2.5 shadow-xl",style:{left:Math.min(u.rect.right+8,window.innerWidth-296),top:u.rect.top},onMouseEnter:()=>{m.current&&(window.clearTimeout(m.current),m.current=null)},onMouseLeave:()=>d(null),children:[h.jsx("div",{className:"mb-1.5 break-words text-xs font-semibold text-[var(--wb-text)]",children:B.displayName}),h.jsx(YR,{item:B,dense:!0})]}),document.body):null]})}function JR(e){const[n,s]=w.useState(()=>typeof window>"u"?[]:VR()),i=w.useMemo(()=>e.catalog.facetsMeta.majorIds.slice(0,20),[e.catalog]),r=e.result?.facetCounts,c=w.useMemo(()=>["relevance","level","baseDps",...Object.keys(e.catalog.facetsMeta.numericRanges).filter(y=>!["relevance","level","baseDps"].includes(y)).sort((y,v)=>Yt(y).localeCompare(Yt(v)))],[e.catalog.facetsMeta.numericRanges]),u=w.useMemo(()=>{const m=Object.keys(e.catalog.facetsMeta.numericRanges);return[...["level","baseDps","slots"].filter(y=>!m.includes(y)),...m].sort((y,v)=>Yt(y).localeCompare(Yt(v)))},[e.catalog.facetsMeta.numericRanges]);w.useEffect(()=>{typeof window<"u"&&KR(n)},[n]);const d=m=>e.setState(xC(e.state,m));return h.jsx(Qi,{className:"flex min-h-0 flex-col",title:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(rT,{size:15}),"Advanced Item Search"]}),headerRight:null,children:h.jsxs("div",{className:"flex min-h-0 flex-col gap-3 p-3",children:[h.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-end",children:[h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsx(qe,{children:"Search Text"}),h.jsx("input",{className:"wb-input",placeholder:"Name, lore, major ID...",value:e.state.text,onChange:m=>d({text:m.target.value})})]}),h.jsx(Me,{variant:"primary",className:"shrink-0",onClick:e.onSearch,disabled:e.loading,title:"Run search with current filters",children:e.loading?"Searching":"Show items"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(qe,{className:"mb-0 shrink-0",children:"Results"}),h.jsx(at,{active:e.state.resultsBelowBuild,onClick:()=>d({resultsBelowBuild:!e.state.resultsBelowBuild}),title:"Toggle: show below Workbench or in sidebar",children:e.state.resultsBelowBuild?"Below build":"In sidebar"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx(qe,{children:"Sort by"}),h.jsxs("div",{className:"flex flex-col gap-1",children:[(e.state.sortKeys??["relevance"]).map((m,p)=>h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("select",{className:"wb-select flex-1",value:m,onChange:y=>{const v=[...e.state.sortKeys??["relevance"]];v[p]=y.target.value,d({sortKeys:v})},children:c.map(y=>h.jsx("option",{value:y,children:Yt(y)},y))}),h.jsx(Me,{variant:"ghost",className:"shrink-0 px-1",onClick:()=>{const y=(e.state.sortKeys??["relevance"]).filter((v,b)=>b!==p);y.length===0&&y.push("relevance"),d({sortKeys:y})},title:"Remove sort",children:""})]},p)),h.jsx(Me,{variant:"ghost",className:"self-start text-xs",onClick:()=>{const m=e.state.sortKeys??["relevance"],p=c.find(y=>!m.includes(y))??c[0];d({sortKeys:[...m,p]})},disabled:(e.state.sortKeys??["relevance"]).length>=8,children:"+ Add sort level"})]})]}),h.jsxs("div",{children:[h.jsx(qe,{children:"View"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(at,{active:e.state.viewMode==="list",onClick:()=>d({viewMode:"list"}),children:"List"}),h.jsx(at,{active:e.state.viewMode==="grid",onClick:()=>d({viewMode:"grid"}),children:"Grid"}),h.jsx(at,{active:e.state.sortDescending,onClick:()=>d({sortDescending:!e.state.sortDescending}),title:"Toggle descending",children:e.state.sortDescending?"Desc":"Asc"})]})]})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2 text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:[h.jsx(my,{size:13}),"Category"]}),h.jsx("div",{className:"flex flex-wrap gap-2",children:js.map(m=>h.jsxs(at,{active:e.state.categories.includes(m),onClick:()=>d({categories:c0(e.state.categories,m)}),children:[Dh(m),r?.categories[m]?` (${r.categories[m]})`:""]},m))})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx(qe,{children:"Wearable At Level"}),h.jsx("input",{className:"wb-input",type:"number",min:1,max:106,value:e.state.onlyWearableAtLevel??"",onChange:m=>{const p=m.target.value.trim();d({onlyWearableAtLevel:p?Number(p):null})}})]}),h.jsxs("div",{children:[h.jsx(qe,{children:"Class Filter"}),h.jsxs("select",{className:"wb-select",value:e.state.classReqs[0]??"",onChange:m=>{const p=m.target.value;d({classReqs:p?[p]:[]})},children:[h.jsx("option",{value:"",children:"Any"}),e.catalog.facetsMeta.classReqs.map(m=>h.jsx("option",{value:m,children:m},m))]})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsx(at,{active:e.state.onlyClassCompatible,onClick:()=>d({onlyClassCompatible:!e.state.onlyClassCompatible}),children:"Only class-compatible"}),h.jsx(at,{active:e.state.excludeRestricted,onClick:()=>d({excludeRestricted:!e.state.excludeRestricted}),children:"Exclude restricted"})]}),h.jsxs("details",{className:"group",children:[h.jsxs("summary",{className:"cursor-pointer text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)] flex items-center gap-2",children:[h.jsx(my,{size:13}),"Advanced ID Filters"]}),h.jsxs("div",{className:"mt-3 grid gap-2",children:[h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Set min/max for any ID (e.g. mr, sdPct, ehpProxy). Items outside ranges are excluded."}),Object.entries(e.state.numericRanges).map(([m,p])=>{const y=m==="powderSlots"?"slots":m==="level"?"lvl":m==="baseDps"?"averageDps":m,v=e.catalog.facetsMeta.numericRanges[y],b=p??{};return h.jsxs("div",{className:"flex flex-wrap items-end gap-2 rounded-lg border border-[var(--wb-border-muted)] p-2",children:[h.jsxs("div",{className:"min-w-[120px] flex-1",children:[h.jsx(qe,{children:"ID"}),h.jsx("select",{className:"wb-select w-full",value:m,onChange:S=>{const _={...e.state.numericRanges};delete _[m],_[S.target.value]=b,d({numericRanges:_})},children:u.map(S=>h.jsx("option",{value:S,disabled:S!==m&&S in e.state.numericRanges,children:Yt(S)},S))})]}),h.jsxs("div",{className:"min-w-[70px]",children:[h.jsx(qe,{children:"Min"}),h.jsx("input",{className:"wb-input w-full",type:"number",placeholder:v?String(Math.floor(v.min)):"min",value:b.min??"",onChange:S=>{const _=S.target.value.trim();d({numericRanges:{...e.state.numericRanges,[m]:{...b,min:_===""?void 0:Number(_)}}})}})]}),h.jsxs("div",{className:"min-w-[70px]",children:[h.jsx(qe,{children:"Max"}),h.jsx("input",{className:"wb-input w-full",type:"number",placeholder:v?String(Math.ceil(v.max)):"max",value:b.max??"",onChange:S=>{const _=S.target.value.trim();d({numericRanges:{...e.state.numericRanges,[m]:{...b,max:_===""?void 0:Number(_)}}})}})]}),h.jsx(Me,{variant:"ghost",className:"shrink-0",onClick:()=>{const S={...e.state.numericRanges};delete S[m],d({numericRanges:S})},children:"Remove"})]},m)}),h.jsx(Me,{variant:"ghost",onClick:()=>{const m=new Set(Object.keys(e.state.numericRanges)),p=u.find(y=>!m.has(y));p&&d({numericRanges:{...e.state.numericRanges,[p]:{}}})},disabled:u.every(m=>m in e.state.numericRanges),children:"Add ID Filter"})]})]}),h.jsxs("details",{className:"group",children:[h.jsx("summary",{className:"cursor-pointer text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)] flex items-center gap-2",children:"Exclusion (IDs to avoid)"}),h.jsxs("div",{className:"mt-3 grid gap-2",children:[h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Exclude items that exceed max (or are below min). E.g. mr max 20 = exclude items with mana regen > 20."}),Object.entries(e.state.exclusionRanges??{}).map(([m,p])=>{const y=m==="powderSlots"?"slots":m==="level"?"lvl":m==="baseDps"?"averageDps":m,v=e.catalog.facetsMeta.numericRanges[y],b=p??{};return h.jsxs("div",{className:"flex flex-wrap items-end gap-2 rounded-lg border border-[var(--wb-border-muted)] border-amber-500/30 p-2",children:[h.jsxs("div",{className:"min-w-[120px] flex-1",children:[h.jsx(qe,{children:"Avoid ID"}),h.jsx("select",{className:"wb-select w-full",value:m,onChange:S=>{const _={...e.state.exclusionRanges??{}};delete _[m],_[S.target.value]=b,d({exclusionRanges:_})},children:u.map(S=>h.jsx("option",{value:S,disabled:S!==m&&S in(e.state.exclusionRanges??{}),children:Yt(S)},S))})]}),h.jsxs("div",{className:"min-w-[70px]",children:[h.jsx(qe,{children:"Max (exclude if >)"}),h.jsx("input",{className:"wb-input w-full",type:"number",placeholder:v?String(Math.ceil(v.max)):"max",value:b.max??"",onChange:S=>{const _=S.target.value.trim();d({exclusionRanges:{...e.state.exclusionRanges??{},[m]:{...b,max:_===""?void 0:Number(_)}}})}})]}),h.jsxs("div",{className:"min-w-[70px]",children:[h.jsx(qe,{children:"Min (exclude if <)"}),h.jsx("input",{className:"wb-input w-full",type:"number",placeholder:"min",value:b.min??"",onChange:S=>{const _=S.target.value.trim();d({exclusionRanges:{...e.state.exclusionRanges??{},[m]:{...b,min:_===""?void 0:Number(_)}}})}})]}),h.jsx(Me,{variant:"ghost",className:"shrink-0",onClick:()=>{const S={...e.state.exclusionRanges??{}};delete S[m],d({exclusionRanges:S})},children:"Remove"})]},m)}),h.jsx(Me,{variant:"ghost",onClick:()=>{const m=new Set(Object.keys(e.state.exclusionRanges??{})),p=u.find(y=>!m.has(y));p&&d({exclusionRanges:{...e.state.exclusionRanges??{},[p]:{}}})},disabled:u.every(m=>m in(e.state.exclusionRanges??{})),children:"Add exclusion"})]})]}),h.jsxs("div",{children:[h.jsx(qe,{children:"Major IDs (quick picks)"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(m=>h.jsx(at,{active:e.state.majorIds.includes(m),onClick:()=>d({majorIds:c0(e.state.majorIds,m)}),title:m,children:m},m))})]}),h.jsxs("div",{className:"wb-card p-2",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Filter Presets"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>{const m=window.prompt("Preset name?")?.trim();if(!m)return;const p=[{name:m,state:e.state},...n.filter(y=>y.name.toLowerCase()!==m.toLowerCase())].slice(0,20);s(p)},children:"Save"}),h.jsx(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.setState(Ha),children:"Reset"})]})]}),h.jsx("div",{className:"flex flex-wrap gap-2",children:n.length===0?h.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:"No saved presets yet."}):n.map(m=>h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(at,{onClick:()=>e.setState(m.state),children:m.name}),h.jsx("button",{className:"wb-inline-button border border-[var(--wb-border)] px-1.5 py-0.5 text-xs",onClick:()=>s(p=>p.filter(y=>y.name!==m.name)),title:`Delete ${m.name}`,children:"x"})]},m.name))})]}),e.state.resultsBelowBuild?null:h.jsx(Xx,{catalog:e.catalog,result:e.result,selectedSlot:e.selectedSlot,state:e.state,loading:e.loading,onPin:e.onPin,onEquip:e.onEquip,onHover:e.onHover})]})})}const ek={slotStatus:{},warnings:{messages:[]},aggregated:{hpTotal:0,hprTotal:0,mr:0,ms:0,ls:0,speed:0,skillPoints:{str:0,dex:0,int:0,def:0,agi:0},skillReqs:{str:0,dex:0,int:0,def:0,agi:0},defenses:{e:0,t:0,w:0,f:0,a:0},offense:{baseDps:0,spellPct:0,spellRaw:0,meleePct:0,meleeRaw:0,elemDamPct:0,genericDamPct:0,offenseScore:0}},derived:{dpsProxy:0,spellProxy:0,meleeProxy:0,ehpProxy:0,reqTotal:0,skillPointTotal:0,legacyBaseDps:0,legacyEhp:0,legacyEhpNoAgi:0,skillpointFeasible:!0,assignedSkillPointsRequired:0}};function sh(e){let n=Number.isFinite(e)?e:0;if(n<=0)return 0;n>=150&&(n=150);const s=.9908;return s/(1-s)*(1-Math.pow(s,n))/100}const tk=.867,nk=.951,ak=90;function sk(e){return Math.max(1,Math.min(106,Math.round(e||1)))*5+5}function Qx(e){const n=Math.max(1,Math.min(106,Math.round(e||1)));return n>=101?200:(n-1)*2}function ik(e){switch(e){case"relik":return .6;case"bow":return .7;case"wand":return .8;case"dagger":case"spear":return 1;default:return 1}}function lk(e){const n=Math.max(5,e.totalHp),s=sh(e.defSkillPoints)*tk,i=sh(e.agiSkillPoints)*nk,c=2-ik(e.weaponType),d=(100-ak)/100*i+(1-i)*(1-s),m=1-s,p=n/Math.max(1e-9,d)/Math.max(1e-9,c),y=n/Math.max(1e-9,m)/Math.max(1e-9,c);return{withAgi:p,noAgi:y}}function rk(e){return[e.numeric.reqStr,e.numeric.reqDex,e.numeric.reqInt,e.numeric.reqDef,e.numeric.reqAgi]}function ok(e){return[e.numeric.spStr,e.numeric.spDex,e.numeric.spInt,e.numeric.spDef,e.numeric.spAgi]}function ck(e,n){return[e[0]+n[0],e[1]+n[1],e[2]+n[2],e[3]+n[3],e[4]+n[4]]}function uk(e){return e[0]+e[1]+e[2]+e[3]+e[4]}function u0(e,n){for(let s=0;s<5;s++)if(e[s]>n[s])return!1;return!0}function dk(e,n){for(const s of e)if(u0(s.assigned,n.assigned))return;for(let s=e.length-1;s>=0;s--)u0(n.assigned,e[s].assigned)&&e.splice(s,1);e.push(n)}function fk(e,n,s={}){if(e.length===0)return{feasible:!0,assignedTotal:0,assignedByStat:[0,0,0,0,0]};const i=s.availableSkillPointsOverride??Qx(n),r=s.extraBaseSkillPoints??[0,0,0,0,0],c=e.length,u=e.map(rk),d=e.map(ok),m=1<<c,p=Array.from({length:m},()=>[0,0,0,0,0]);for(let _=1;_<m;_++){const T=_&-_,j=Math.log2(T)|0;p[_]=ck(p[_^T],d[j])}const y=new Array(m);y[0]=[{assigned:[0,0,0,0,0],assignedTotal:0}];for(let _=0;_<m;_++){const T=y[_];if(!T||T.length===0)continue;const j=p[_];for(const k of T)for(let R=0;R<c;R++){if((_&1<<R)!==0)continue;const P=[...k.assigned];let B=!0;for(let Z=0;Z<5;Z++){const re=k.assigned[Z]+j[Z]+(r[Z]??0),fe=u[R][Z];if(fe>re&&(P[Z]+=fe-re),P[Z]>100){B=!1;break}}if(!B)continue;const q=_|1<<R,M=p[q];for(let Z=0;Z<5;Z++){let re=0;const fe=r[Z]??0;for(let ae=0;ae<c;ae++){if((q&1<<ae)===0||u[ae][Z]===0)continue;const $=u[ae][Z]+d[ae][Z]-(P[Z]+M[Z]+fe);$>re&&(re=$)}if(re>0&&(P[Z]+=re,P[Z]>100)){B=!1;break}}if(!B)continue;const C=uk(P);if(C>i)continue;const D=y[q]??=[];dk(D,{assigned:P,assignedTotal:C})}}const v=y[m-1];if(!v||v.length===0)return{feasible:!1,assignedTotal:1/0,assignedByStat:null};let b=1/0,S=null;for(const _ of v)_.assignedTotal<b&&(b=_.assignedTotal,S=[..._.assigned]);return{feasible:Number.isFinite(b),assignedTotal:b,assignedByStat:Number.isFinite(b)?S:null}}function Hc(e,n,s,i={}){const r=[];for(const c of Je){const u=e[c];if(u==null)continue;const d=n.itemsById.get(u);d&&r.push(d)}return fk(r,s,i)}const hk=[1,1,1,1,1],mk=4;function Jx(e,n){switch(e){case"guild_rainbow":return{extraBaseSkillPoints:hk};case"flexible_2":return{availableSkillPointsOverride:Qx(n)+mk};default:return{}}}function pk(e,n){const s={};for(const i of Je){const r=e.slots[i];if(r==null)continue;const c=n.itemsById.get(r);c&&(s[i]=c)}return s}function nl(e,n,s={}){const i=pk(e,n),r=structuredClone(ek),c=r.warnings.messages;let u=null;for(const ce of Je){const $=i[ce];if(!$)continue;ce==="weapon"&&(u=$.type),r.aggregated.hpTotal+=$.numeric.hp+$.numeric.hpBonus,r.aggregated.hprTotal+=$.numeric.hprRaw+$.numeric.hprPct,r.aggregated.mr+=$.numeric.mr,r.aggregated.ms+=$.numeric.ms,r.aggregated.ls+=$.numeric.ls,r.aggregated.speed+=$.numeric.spd,r.aggregated.skillPoints.str+=$.numeric.spStr,r.aggregated.skillPoints.dex+=$.numeric.spDex,r.aggregated.skillPoints.int+=$.numeric.spInt,r.aggregated.skillPoints.def+=$.numeric.spDef,r.aggregated.skillPoints.agi+=$.numeric.spAgi,r.aggregated.skillReqs.str=Math.max(r.aggregated.skillReqs.str,$.numeric.reqStr),r.aggregated.skillReqs.dex=Math.max(r.aggregated.skillReqs.dex,$.numeric.reqDex),r.aggregated.skillReqs.int=Math.max(r.aggregated.skillReqs.int,$.numeric.reqInt),r.aggregated.skillReqs.def=Math.max(r.aggregated.skillReqs.def,$.numeric.reqDef),r.aggregated.skillReqs.agi=Math.max(r.aggregated.skillReqs.agi,$.numeric.reqAgi),r.aggregated.defenses.e+=$.numeric.eDef,r.aggregated.defenses.t+=$.numeric.tDef,r.aggregated.defenses.w+=$.numeric.wDef,r.aggregated.defenses.f+=$.numeric.fDef,r.aggregated.defenses.a+=$.numeric.aDef,r.aggregated.offense.baseDps+=$.numeric.baseDps,r.aggregated.offense.spellPct+=$.numeric.sdPct,r.aggregated.offense.spellRaw+=$.numeric.sdRaw,r.aggregated.offense.meleePct+=$.numeric.mdPct,r.aggregated.offense.meleeRaw+=$.numeric.mdRaw,r.aggregated.offense.elemDamPct+=$.numeric.eDamPct+$.numeric.tDamPct+$.numeric.wDamPct+$.numeric.fDamPct+$.numeric.aDamPct,r.aggregated.offense.genericDamPct+=$.numeric.damPct+$.numeric.rDamPct+$.numeric.nDamPct,r.aggregated.offense.offenseScore+=$.roughScoreFields.offense;const W=$.classReq,L=!W||!e.characterClass||W===e.characterClass,Q=$.level<=e.level,ee=$.numeric.reqStr<=100&&$.numeric.reqDex<=100&&$.numeric.reqInt<=100&&$.numeric.reqDef<=100&&$.numeric.reqAgi<=100;r.slotStatus[ce]={classOk:L,levelOk:Q,skillReqsMet:ee}}!e.characterClass&&u&&(e.characterClass=pc(u));for(const ce of Je){const $=i[ce];$&&(xa(ce)!==$.category&&c.push(`${ce} contains incompatible item type (${$.type}).`),$.level>e.level&&c.push(`${$.displayName} requires level ${$.level}.`),e.characterClass&&$.classReq&&$.classReq!==e.characterClass&&c.push(`${$.displayName} requires ${$.classReq}.`),($.restricted||$.deprecated)&&c.push(`${$.displayName} is restricted/deprecated.`))}const d=r.aggregated.skillReqs.str+r.aggregated.skillReqs.dex+r.aggregated.skillReqs.int+r.aggregated.skillReqs.def+r.aggregated.skillReqs.agi,m=r.aggregated.skillPoints.str+r.aggregated.skillPoints.dex+r.aggregated.skillPoints.int+r.aggregated.skillPoints.def+r.aggregated.skillPoints.agi,p=s.skillpointFeasibility??(s.skillpointTomeMode?Jx(s.skillpointTomeMode,e.level):void 0),y=Hc(e.slots,n,e.level,p),{spellPct:v,spellRaw:b,meleePct:S,meleeRaw:_,baseDps:T,elemDamPct:j,genericDamPct:k}=r.aggregated.offense,R=r.aggregated.skillPoints,B=1+sh(R.str),q=(T*(1+(v+j+k)/100)+b)*B,M=(T*(1+(S+j+k)/100)+_)*B,C=M+q+r.aggregated.speed*.8,D=r.aggregated.defenses.e+r.aggregated.defenses.t+r.aggregated.defenses.w+r.aggregated.defenses.f+r.aggregated.defenses.a,Z=r.aggregated.hpTotal+D*.45+r.aggregated.hprTotal*2+Math.max(0,r.aggregated.skillPoints.def)*12+Math.max(0,r.aggregated.skillPoints.agi)*10,re=r.aggregated.offense.baseDps,fe=sk(e.level)+r.aggregated.hpTotal,ae=lk({totalHp:fe,defSkillPoints:r.aggregated.skillPoints.def,agiSkillPoints:r.aggregated.skillPoints.agi,weaponType:u});return r.derived={dpsProxy:C,spellProxy:q,meleeProxy:M,ehpProxy:Z,reqTotal:d,skillPointTotal:m,legacyBaseDps:re,legacyEhp:ae.withAgi,legacyEhpNoAgi:ae.noAgi,skillpointFeasible:y.feasible,assignedSkillPointsRequired:Number.isFinite(y.assignedTotal)?y.assignedTotal:0},y.feasible||c.push(`Skill requirements are not satisfiable at level ${e.level} (estimated assigned SP exceeds available or equip order is invalid).`),r}function gk(e,n){return{dpsProxy:n.derived.dpsProxy-e.derived.dpsProxy,ehpProxy:n.derived.ehpProxy-e.derived.ehpProxy,legacyBaseDps:n.derived.legacyBaseDps-e.derived.legacyBaseDps,legacyEhp:n.derived.legacyEhp-e.derived.legacyEhp,hpTotal:n.aggregated.hpTotal-e.aggregated.hpTotal,speed:n.aggregated.speed-e.aggregated.speed,skillPointTotal:n.derived.skillPointTotal-e.derived.skillPointTotal}}const vk=25;function yk(e,n){return(e+vk)/5+n/3}function bk(e){if(e.length===0)return[];let n=[...e];for(;n.length>1&&n[0][1]===n[n.length-1][1];)n=[n.pop(),...n];const s=[];let i=0;for(let c=0;c<n.length;c++){const[u,d]=n[c],m=Math.max(1,u);if(c<2){s.push(m<=1?1:m);continue}const p=n[c-1][1],y=n[c-2][1];if(p===y&&p===d){i++;const v=m+i*5;s.push(v<=1?1:v)}else i=0,s.push(m<=1?1:m)}const r=n.length;return r>=2&&n[r-1][1]===n[r-2][1]&&(i++,Math.max(1,n[0][0])+i*5>1&&(s[0]=s[0]+i*5)),s}function xk(e,n){return e.filter(s=>s>=1&&s<=4).map(s=>[n[s]??1,s])}function Sk(e){const{spellCosts:n,spellDamages:s,mr:i,ms:r,cps:c,spellSequence:u}=e;if(u.length===0||c<=0)return null;const d=xk(u,n);if(d.length===0)return null;const m=bk(d),p=m.length,y=m.reduce((R,P)=>R+P,0)/p,v=c/3,b=v*y,S=yk(i,r),_=S-b;let T=0;for(const[,R]of d)T+=s[R]??0;const k=T/p*v;return{manaGainPerSecond:S,manaUsagePerSecond:b,netManaPerSecond:_,sustainedSpellDps:k,cycleCosts:m,spellsPerSecond:v,sustainable:_>=0}}const wk=8,_k="1234";function Xo(e){return Number.isFinite(e)?e.toFixed(2):"-"}function Ek(e){return Number.isFinite(e)?Math.round(e).toLocaleString():"-"}function Tk(e){const[n,s]=w.useState(!1),[i,r]=w.useState(wk),[c,u]=w.useState(_k),d=w.useMemo(()=>{const p=e.spellPreview,y=e.summary;if(!p?.spells.length)return null;const v={},b={};for(const _ of p.spells)_.baseSpell>=1&&_.baseSpell<=4&&(_.manaCost!=null&&(v[_.baseSpell]=_.manaCost),_.isHealing||(b[_.baseSpell]=_.averageDisplayValue));const S=c.replace(/\D/g,"").split("").map(_=>parseInt(_,10)).filter(_=>_>=1&&_<=4);return S.length===0?null:Sk({spellCosts:v,spellDamages:b,mr:y.aggregated.mr,ms:y.aggregated.ms,cps:i,spellSequence:S})},[e.spellPreview,e.summary,i,c]);return e.spellPreview?.spells.some(p=>p.baseSpell>=1&&p.baseSpell<=4&&p.manaCost!=null)??!1?h.jsxs("div",{className:"wb-card overflow-hidden p-0",children:[h.jsx("button",{type:"button",className:"flex w-full items-center justify-between gap-2 px-3 py-2.5 text-left hover:bg-[var(--wb-surface-hover)]",onClick:()=>s(p=>!p),children:h.jsxs("div",{className:"flex items-center gap-2",children:[n?h.jsx(ZE,{size:14,className:"text-[var(--wb-muted)]"}):h.jsx($E,{size:14,className:"text-[var(--wb-muted)]"}),h.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Mana Sustain"}),d!=null&&h.jsx("span",{className:d.sustainable?"wb-text-success":"wb-text-danger",children:d.sustainable?"Sustainable":"Draining"})]})}),!n&&h.jsx("div",{className:"border-t border-[var(--wb-border-muted)] px-3 py-3",children:h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx("label",{className:"mb-1 block text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Clicks / s"}),h.jsx("input",{className:"wb-input w-full",type:"number",min:.5,max:30,step:.5,value:i,onChange:p=>r(Number(p.target.value)||0)})]}),h.jsxs("div",{children:[h.jsx("label",{className:"mb-1 block text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Spell sequence"}),h.jsx("input",{className:"wb-input w-full",type:"text",inputMode:"numeric",pattern:"[1-4]*",placeholder:"e.g. 1234",value:c,onChange:p=>u(p.target.value.replace(/[^1-4]/g,"").slice(0,20))})]})]}),h.jsx("p",{className:"text-[11px] text-[var(--wb-muted)]",children:"Each spell = 3 clicks. Sequence uses digits 14 for spell slots."}),d==null?h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Enter a valid sequence (digits 14)."}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"rounded-lg border p-2 text-xs",style:{borderColor:d.sustainable?"var(--wb-success-muted, #166534)":"var(--wb-danger-muted, #991b1b)",background:d.sustainable?"var(--wb-success-bg, rgba(22,101,52,0.08))":"var(--wb-danger-bg, rgba(153,27,27,0.08))"},children:h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Net mana/s"}),h.jsxs("span",{className:d.sustainable?"wb-text-success font-semibold":"wb-text-danger font-semibold",children:[d.netManaPerSecond>=0?"+":"",Xo(d.netManaPerSecond)]})]})}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[h.jsxs("div",{className:"wb-surface rounded-lg px-2 py-1.5",children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Mana gain/s"}),h.jsx("div",{className:"wb-text-success font-medium",children:Xo(d.manaGainPerSecond)})]}),h.jsxs("div",{className:"wb-surface rounded-lg px-2 py-1.5",children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Mana usage/s"}),h.jsx("div",{className:"wb-text-offense font-medium",children:Xo(d.manaUsagePerSecond)})]}),h.jsxs("div",{className:"wb-surface rounded-lg px-2 py-1.5 col-span-2",children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Sustained spell DPS"}),h.jsx("div",{className:"wb-text-offense font-semibold",children:Ek(d.sustainedSpellDps)})]})]}),h.jsxs("div",{className:"text-[11px] text-[var(--wb-muted)]",children:["Spells/s: ",Xo(d.spellsPerSecond),"  Cycle costs: ",d.cycleCosts.map(p=>Math.round(p)).join(", ")]})]})]})})]}):h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Mana Sustain"}),h.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:"Equip a weapon and select spells with mana costs in the Ability Tree to see sustained mana and spell DPS."})]})}function Et(e){return Number.isFinite(e)?Math.round(e).toLocaleString():"-"}function Nk(e){const n=e.compareSummary?gk(e.summary,e.compareSummary):null,s=e.spellPreview?.melee??null;return h.jsx(Qi,{className:"flex min-h-0 flex-col",title:"Live Build Summary",headerRight:null,children:h.jsxs("div",{className:"flex flex-col gap-3 p-3",children:[h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Melee DPS"}),h.jsxs("div",{className:"mt-1 flex items-end justify-between gap-2",children:[h.jsx("div",{className:"wb-text-offense text-xl font-semibold",children:Et(s?.dps??e.summary.derived.legacyBaseDps)}),n?.legacyBaseDps!=null?h.jsxs("div",{className:["text-xs",n.legacyBaseDps>0?"wb-text-success":n.legacyBaseDps<0?"wb-text-danger":"text-[var(--wb-muted)]"].join(" "),children:[n.legacyBaseDps>0?"+":"",Math.round(n.legacyBaseDps).toLocaleString()]}):null]}),h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:[s?`Legacy melee DPS (${s.attackSpeedTier})  Per Attack ${Et(s.perAttackAverage)}`:"Legacy melee DPS preview unavailable (equip a weapon and valid ability tree selection)."," "," Melee % / Raw ",h.jsx("span",{className:"wb-text-offense",children:Et(e.summary.aggregated.offense.meleePct)})," / ",h.jsx("span",{className:"wb-text-offense",children:Et(e.summary.aggregated.offense.meleeRaw)})]})]}),h.jsx(Tk,{spellPreview:e.spellPreview??null,summary:e.summary}),e.spellPreview?h.jsxs("div",{className:"wb-card p-3",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Spells (ATree)"}),h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[e.spellPreview.spells.length," entries"]})]}),e.spellPreview.notes.length>0?h.jsx("div",{className:"wb-banner mb-2 p-2 text-xs","data-tone":"warning",children:e.spellPreview.notes.join(" ")}):null,e.spellPreview.spells.length===0?h.jsx("div",{className:"rounded-lg border border-dashed border-[var(--wb-border-muted)] p-2 text-xs text-[var(--wb-muted)]",children:"No spell damage entries yet. Select active ability-tree spell nodes (roots / spell upgrades)."}):h.jsx(Ji,{className:"max-h-[36vh] lg:max-h-[44vh]",children:h.jsx("div",{className:"grid gap-2 pr-1",children:e.spellPreview.spells.map(i=>h.jsxs("div",{className:"wb-surface rounded-lg p-2",children:[h.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs",children:[h.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[h.jsxs("span",{children:[i.name,h.jsxs("span",{className:"ml-1 text-[var(--wb-muted)]",children:["(",i.displayPartName,")"]})]}),!i.isHealing&&i.dominantElement&&i.dominantElement!=="n"?h.jsx("span",{className:`spell-elem-chip spell-elem-${i.dominantElement}`,children:i.dominantElement==="e"?"Earth":i.dominantElement==="t"?"Thunder":i.dominantElement==="w"?"Water":i.dominantElement==="f"?"Fire":i.dominantElement==="a"?"Air":""}):null]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("div",{className:i.isHealing?"wb-text-defense":"wb-text-offense",children:[Math.round(i.averageDisplayValue).toLocaleString()," ",i.isHealing?"heal":"avg dmg"]}),i.manaCost!=null?h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[i.manaCost.toFixed(2)," mana"]}):null]})]}),h.jsx("div",{className:"mt-1 grid gap-1 text-xs text-[var(--wb-muted)]",children:i.parts.filter(r=>r.display).map(r=>h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsx("span",{className:"truncate",children:r.name}),h.jsx("span",{className:r.type==="heal"?"wb-text-defense":"wb-text-offense",children:Math.round(r.averageTotal??0).toLocaleString()})]},r.name))})]},`${i.baseSpell}-${i.name}`))})})]}):null,h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsx(Wo,{label:"Base DPS",value:Et(e.summary.derived.legacyBaseDps),delta:n?.legacyBaseDps??null,valueClassName:"wb-text-offense"}),h.jsx(Wo,{label:"Effective HP",value:Et(e.summary.derived.legacyEhp),delta:n?.legacyEhp??null,valueClassName:"wb-text-defense"}),h.jsx(Wo,{label:"Req Total",value:Et(e.summary.derived.reqTotal)}),h.jsx(Wo,{label:"SP Total",value:Et(e.summary.derived.skillPointTotal),delta:n?.skillPointTotal??null})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[h.jsxs("div",{className:"wb-surface rounded-xl px-3 py-2",children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"SP Feasibility:"})," ",h.jsx("span",{className:e.summary.derived.skillpointFeasible?"wb-text-success":"wb-text-danger",children:e.summary.derived.skillpointFeasible?"Wearable":"Invalid / Not Wearable"})]}),h.jsxs("div",{className:"wb-surface rounded-xl px-3 py-2",children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Assigned SP Needed:"})," ",h.jsx("span",{children:Et(e.summary.derived.assignedSkillPointsRequired)})]})]}),e.compareSummary&&e.compareSlot?h.jsxs("div",{className:"wb-banner p-3 text-xs","data-tone":"success",children:["Compare preview for ",h.jsx("b",{children:mc(e.compareSlot)})]}):null,h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"text-xs uppercase tracking-wide text-[var(--wb-muted)]",children:"Offense"}),h.jsxs("div",{className:"mt-2 grid gap-1 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Legacy Base DPS:"})," ",h.jsx("span",{className:"wb-text-offense font-medium",children:Et(e.summary.derived.legacyBaseDps)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Heuristic DPS Proxy:"})," ",h.jsx("span",{className:"wb-text-offense",children:Et(e.summary.derived.dpsProxy)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Spell % / Raw:"})," ",h.jsx("span",{className:"wb-text-offense",children:Et(e.summary.aggregated.offense.spellPct)})," / ",h.jsx("span",{className:"wb-text-offense",children:Et(e.summary.aggregated.offense.spellRaw)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Melee % / Raw:"})," ",h.jsx("span",{className:"wb-text-offense",children:Et(e.summary.aggregated.offense.meleePct)})," / ",h.jsx("span",{className:"wb-text-offense",children:Et(e.summary.aggregated.offense.meleeRaw)})]})]})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"text-xs uppercase tracking-wide text-[var(--wb-muted)]",children:"Defense & Utility"}),h.jsxs("div",{className:"mt-2 grid gap-1 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Legacy EHP (AGI):"})," ",h.jsx("span",{className:"wb-text-defense font-medium",children:Et(e.summary.derived.legacyEhp)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Legacy EHP (No AGI):"})," ",h.jsx("span",{className:"wb-text-defense",children:Et(e.summary.derived.legacyEhpNoAgi)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Heuristic EHP Proxy:"})," ",h.jsx("span",{className:"wb-text-defense",children:Et(e.summary.derived.ehpProxy)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"HP Total:"})," ",h.jsx("span",{className:"wb-text-defense",children:Et(e.summary.aggregated.hpTotal)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"HPR Total:"})," ",Et(e.summary.aggregated.hprTotal)]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"MR / MS / LS:"})," ",Et(e.summary.aggregated.mr)," / ",Et(e.summary.aggregated.ms)," / ",Et(e.summary.aggregated.ls)]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Walk Speed:"})," ",Et(e.summary.aggregated.speed)]})]})]})]}),h.jsx("div",{className:"wb-surface rounded-xl p-3 text-xs text-[var(--wb-muted)]",children:"Workbench primary KPIs use legacy-compatible metrics (Base DPS + Effective HP). Ability tree editing is now in Workbench, but these summary metrics still exclude ability-tree effects for now. Proxy values are still used internally for search/Build Solver heuristics."}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Warnings"}),e.summary.warnings.messages.length===0?h.jsx("div",{className:"wb-surface rounded-xl p-3 text-xs wb-text-success",children:"No active warnings."}):h.jsx(Ji,{className:"max-h-32",children:h.jsx("div",{className:"grid gap-2",children:e.summary.warnings.messages.map((i,r)=>h.jsx("div",{className:"wb-banner p-2 text-xs","data-tone":"warning",children:i},`${i}-${r}`))})})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs(Me,{variant:"ghost",className:"justify-start",onClick:e.actions.onCopyLegacyLink,disabled:!e.snapshot.legacyHash,children:[h.jsx(Ch,{size:14,className:"mr-2"}),"Legacy Link"]}),h.jsxs(Me,{variant:"ghost",className:"justify-start",onClick:e.actions.onOpenLegacyBuilder,children:[h.jsx(pb,{size:14,className:"mr-2"}),"Open Legacy"]})]})]})})}function Mk(e){const{info:n}=e;return h.jsx("div",{className:"wb-banner px-3 py-2","data-tone":"accent",children:h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"text-xs font-semibold",children:["Crafted ",n.type.charAt(0).toUpperCase()+n.type.slice(1)]}),h.jsxs("div",{className:"mt-0.5 text-[10px] text-[var(--wb-muted)]",children:["Lv. ",n.lvl," | ",n.hash.slice(0,20),"..."]})]}),h.jsx(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:e.onClear,title:"Remove crafted item",children:h.jsx(vb,{size:12})})]})})}function d0(e){const{isOver:n,setNodeRef:s}=fb({id:`slot:${e.slot}`,data:{droppableType:"slot",slot:e.slot}}),i=e.store.slots[e.slot],r=i!=null?e.catalog.itemsById.get(i):void 0,c=e.store.craftedSlots[e.slot],u=db({id:r?`slot-item:${e.slot}:${r.id}`:`slot-empty:${e.slot}`,data:r?{dragItem:{kind:"slot",itemId:r.id,sourceSlot:e.slot}}:void 0,disabled:!r});return h.jsxs("div",{ref:s,className:gt("rounded-xl border p-2",n?"border-emerald-400/70 bg-emerald-400/8":"wb-surface-strong"),onMouseEnter:()=>e.store.setSelectedSlot(e.slot),children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:mc(e.slot)}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.toggleLock(e.slot),title:"Lock slot",children:h.jsx(gb,{size:12,className:gt(e.store.locks[e.slot]&&"wb-text-success")})}),h.jsx(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.moveSlotToBin(e.slot),title:"Move to bin",children:h.jsx(gT,{size:12})})]})]}),r?h.jsx("div",{ref:u.setNodeRef,style:{transform:uc.Translate.toString(u.transform),opacity:u.isDragging?.45:1},...u.listeners,...u.attributes,children:h.jsx($c,{item:r,compact:!0,dense:!0,showDetails:e.showItemDetails,dragData:{kind:"slot",itemId:r.id,sourceSlot:e.slot},locked:e.store.locks[e.slot],onHover:d=>e.onHoverItem?.(d?r.id:null,d?e.slot:null)})}):c?h.jsx(Mk,{info:c,onClear:()=>e.store.clearCraftedSlot(e.slot)}):h.jsxs("div",{className:"wb-placeholder rounded-lg px-3 py-3 text-center text-xs",children:["Drop a ",xa(e.slot)," item here"]})]})}function f0(e){const{isOver:n,setNodeRef:s}=fb({id:`bin:${e.category}`,data:{droppableType:"bin",category:e.category}}),i=e.store.binsByCategory[e.category].map(r=>e.catalog.itemsById.get(r)).filter(r=>!!r);return h.jsxs("div",{className:"flex min-w-0 flex-col gap-1.5",children:[h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsxs("div",{className:"text-xs font-semibold",children:[Dh(e.category)," Bin"]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:i.length}),h.jsxs(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.clearCategory(e.category),children:[h.jsx(vb,{size:12,className:"mr-1 inline"}),"Clear"]})]})]}),h.jsx("div",{ref:s,className:gt("wb-grid-backdrop min-h-20 rounded-xl border p-1.5",n?"border-emerald-400/70 bg-emerald-400/8":"wb-surface"),children:i.length===0?h.jsxs("div",{className:"p-2 text-[11px] text-[var(--wb-muted)]",children:["Drop items here for ",e.category,"."]}):h.jsx("div",{className:"grid max-h-40 gap-1.5 overflow-auto pr-0.5 wb-scrollbar",children:i.map(r=>h.jsx($c,{item:r,compact:!0,dense:!0,showDetails:e.showItemDetails,dragData:{kind:"bin",itemId:r.id,sourceCategory:e.category},onRemove:()=>e.store.removePinnedItem(e.category,r.id),onHover:c=>{const u=e.store.selectedSlot&&xa(e.store.selectedSlot)===e.category?e.store.selectedSlot:null;e.onHoverItem?.(c?r.id:null,c?u:null)}},`${e.category}-${r.id}`))})})]})}function jk(e){const[n,s]=w.useState(!1),i=w.useMemo(()=>[["helmet","chestplate","leggings","boots"],["ring1","ring2","bracelet","necklace"]],[]),r=w.useMemo(()=>[{key:"armor",title:"Armor Shelf",categories:["helmet","chestplate","leggings","boots"]},{key:"accessories",title:"Accessory Shelf",categories:["ring","bracelet","necklace"]},{key:"weapon",title:"Weapon Shelf",categories:["weapon"]}].filter(d=>d.key!=="weapon"),[]),c=e.store.comparePreview;let u=null;if(c?.itemId!=null&&c.slot)u={itemId:c.itemId,source:`Compare Preview  ${mc(c.slot)}`};else if(e.store.selectedSlot){const d=e.store.slots[e.store.selectedSlot];d!=null&&(u={itemId:d,source:`Selected Slot  ${mc(e.store.selectedSlot)}`})}else e.store.slots.weapon!=null&&(u={itemId:e.store.slots.weapon,source:"Equipped Weapon"});return h.jsx(Qi,{className:"flex min-h-0 flex-col",title:"Build",headerRight:h.jsxs(h.Fragment,{children:[h.jsx(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.undo(),children:"Undo"}),h.jsx(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.redo(),children:"Redo"}),h.jsx(Me,{className:"px-2 py-1 text-xs",variant:n?"primary":"ghost",onClick:()=>s(d=>!d),children:n?"Hide Details":"Item Details"}),h.jsx(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.clearAll(),children:"Clear All"})]}),children:h.jsxs("div",{className:"grid min-h-0 flex-1 grid-rows-[auto_1fr_auto] gap-2 p-2.5",children:[h.jsxs("div",{className:"grid gap-1.5 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)_minmax(0,1.05fr)]",children:[i.map((d,m)=>h.jsx("div",{className:"grid gap-1.5",children:d.map(p=>h.jsx(d0,{slot:p,catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem},p))},m)),h.jsxs("div",{className:"grid content-start gap-1.5",children:[h.jsx(d0,{slot:"weapon",catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem}),h.jsxs("div",{className:"wb-surface rounded-xl p-2",children:[h.jsxs("div",{className:"mb-1.5 flex items-center justify-between gap-2",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Weapon Shelf"}),h.jsx("div",{className:"text-[11px] text-[var(--wb-muted)]",children:"Pinned weapon candidates"})]}),h.jsx(f0,{category:"weapon",catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem})]}),u?h.jsxs("div",{className:"wb-card p-2.5",children:[h.jsx("div",{className:"mb-2 flex items-center justify-between gap-2",children:h.jsxs("div",{children:[h.jsx("div",{className:"text-xs uppercase tracking-wide text-[var(--wb-muted)]",children:"Focused Item"}),h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:u.source})]})}),(()=>{const d=e.catalog.itemsById.get(u.itemId);return d?h.jsx($c,{item:d,compact:!0,dense:!0,showDetails:n}):null})()]}):null]})]}),h.jsx(Ji,{className:"min-h-0 pr-1",children:h.jsx("div",{className:"grid gap-3",children:r.map(d=>h.jsxs("div",{className:"grid gap-1.5",children:[h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:d.title}),h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:d.categories.map(Dh).join("  ")})]}),h.jsx("div",{className:gt("grid gap-2",d.categories.length===1?"grid-cols-1":d.categories.length===3?"lg:grid-cols-3":"md:grid-cols-2 xl:grid-cols-4"),children:d.categories.map(m=>h.jsx(f0,{category:m,catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem},m))})]},d.key))})}),e.searchResults?h.jsx("div",{className:"wb-surface flex min-h-[220px] max-h-[40vh] min-w-0 flex-col overflow-hidden rounded-xl",children:e.searchResults}):null,h.jsx("div",{className:"wb-surface rounded-xl p-2",children:h.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 lg:grid-cols-4",children:[h.jsxs(Me,{variant:"ghost",className:"justify-start",onClick:e.onShareWorkbench,children:[h.jsx(Ch,{size:14,className:"mr-2"}),"Share"]}),h.jsxs(Me,{variant:"ghost",className:"justify-start",onClick:e.onExportWorkbench,children:[h.jsx(GE,{size:14,className:"mr-2"}),"Export"]}),h.jsxs(Me,{variant:"ghost",className:"justify-start",onClick:e.onImportWorkbench,children:[h.jsx(yT,{size:14,className:"mr-2"}),"Import"]}),h.jsxs(Me,{variant:"ghost",className:"justify-start",onClick:e.onOpenInWynnBuilder,children:[h.jsx(pb,{size:14,className:"mr-2"}),"WynnBuilder"]})]})})]})})}function rc(e){if(!e)return null;const n=e.startsWith("#")?e.slice(1):e;return n.trim()?n:null}function h0(e){const n=rc(e);if(typeof window>"u"){const r="builder/";return n?`${r}#${n}`:r}if(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"){const r="https://hppeng-wynn.github.io/builder/";return n?`${r}#${n}`:r}const i=new URL("builder/",window.location.href).href;return n?`${i}#${n}`:i}const Ck=[["helmet","helmet-choice"],["chestplate","chestplate-choice"],["leggings","leggings-choice"],["boots","boots-choice"],["ring1","ring1-choice"],["ring2","ring2-choice"],["bracelet","bracelet-choice"],["necklace","necklace-choice"],["weapon","weapon-choice"]];function m0(e){const n=e.trim();if(!n)return null;if(n.startsWith("#"))return rc(n);try{const s=new URL(n,window.location.origin);return rc(s.hash)}catch{return rc(n)}}class Dk{isSupported(n){return m0(n)!==null}async encodeLegacyHash(n){if(n.legacyHash)return n.legacyHash;throw new Error("Legacy hash encoding is only available for imported legacy builds in Workbench v1. Use Workbench share link or open legacy builder for full encode.")}async decodeLegacyHash(n){const s=m0(n);if(!s)throw new Error("No legacy hash found to decode");if(typeof document>"u")return{legacyHash:s,level:null,slots:{}};const i=document.createElement("iframe");i.style.position="fixed",i.style.left="-99999px",i.style.width="1200px",i.style.height="900px",i.style.opacity="0",i.src=`../builder/#${s}`,document.body.appendChild(i);const r=3e4,c=Date.now();try{return await new Promise((d,m)=>{const p=window.setInterval(()=>{try{if(!i.contentDocument)return;const y=i.contentDocument,v=y.getElementById("weapon-choice"),b=y.getElementById("level-choice");if(!v||!b){Date.now()-c>r&&(window.clearInterval(p),m(new Error("Timed out waiting for legacy builder UI")));return}const S={};for(const[k,R]of Ck){const B=y.getElementById(R)?.value?.trim();B&&(S[k]=B)}if(!S.weapon&&Date.now()-c<2e3)return;const T=b.value?.trim(),j=T?Number(T):null;window.clearInterval(p),d({legacyHash:s,level:Number.isFinite(j??NaN)?j:null,slots:S,sourceUrl:i.src})}catch(y){window.clearInterval(p),m(y)}},250)})}finally{i.remove()}}}const Af=new Dk,eS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+-",Rk=12,kk=10,Ak=23,Ok=0,p0=2,zk=13,Pk=new Set([0,1,2,3,8]);function Ik(){const e=[0];let n=0;function s(r,c){for(let u=0;u<c;u++){const d=r>>>u&1,m=n+u,p=m>>>5;for(;p>=e.length;)e.push(0);d&&(e[p]|=1<<(m&31))}n+=c}function i(){let r="";for(let c=0;c<n;c+=6){let u=0;for(let d=0;d<6;d++){const m=c+d;m<n&&(u|=(e[m>>>5]>>>(m&31)&1)<<d)}r+=eS[u]}return r}return{append:s,toB64:i,get length(){return n}}}function Bk(e,n){if(!Je.some(c=>e.slots[c]!=null))return null;const i=Ik();i.append(Rk,6),i.append(Ak,kk);for(let c=0;c<Je.length;c++){const u=Je[c],d=e.slots[u],m=e.craftedSlots[u];if(m?.hash){const p=m.hash.startsWith("CR-")?m.hash.slice(3):m.hash;i.append(1,p0);for(const y of p){const v=eS.indexOf(y);i.append(v>=0?v:0,6)}}else{i.append(Ok,p0);const p=d!=null?d+1:0;i.append(p,zk)}Pk.has(c)&&i.append(0,1)}i.append(0,1),i.append(1,1);const r=e.level??106;return r===106?i.append(0,1):(i.append(1,1),i.append(Math.max(0,Math.min(106,r)),7)),i.append(0,1),i.toB64()}function Lk(e){return`https://hppeng-wynn.github.io/builder/#${e}`}const g0=e=>{let n;const s=new Set,i=(p,y)=>{const v=typeof p=="function"?p(n):p;if(!Object.is(v,n)){const b=n;n=y??(typeof v!="object"||v===null)?v:Object.assign({},n,v),s.forEach(S=>S(n,b))}},r=()=>n,d={setState:i,getState:r,getInitialState:()=>m,subscribe:p=>(s.add(p),()=>s.delete(p))},m=n=e(i,r,d);return d},qk=(e=>e?g0(e):g0),Uk=e=>e;function $k(e,n=Uk){const s=sn.useSyncExternalStore(e.subscribe,sn.useCallback(()=>n(e.getState()),[e,n]),sn.useCallback(()=>n(e.getInitialState()),[e,n]));return sn.useDebugValue(s),s}const Hk=e=>{const n=qk(e),s=i=>$k(n,i);return Object.assign(s,n),s},Zk=(e=>Hk);var tS=Symbol.for("immer-nothing"),v0=Symbol.for("immer-draftable"),$n=Symbol.for("immer-state");function ra(e,...n){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var vr=Object.getPrototypeOf;function al(e){return!!e&&!!e[$n]}function ei(e){return e?nS(e)||Array.isArray(e)||!!e[v0]||!!e.constructor?.[v0]||_r(e)||Fc(e):!1}var Fk=Object.prototype.constructor.toString(),y0=new WeakMap;function nS(e){if(!e||typeof e!="object")return!1;const n=Object.getPrototypeOf(e);if(n===null||n===Object.prototype)return!0;const s=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;if(s===Object)return!0;if(typeof s!="function")return!1;let i=y0.get(s);return i===void 0&&(i=Function.toString.call(s),y0.set(s,i)),i===Fk}function _c(e,n,s=!0){Zc(e)===0?(s?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{n(r,e[r],e)}):e.forEach((i,r)=>n(r,i,e))}function Zc(e){const n=e[$n];return n?n.type_:Array.isArray(e)?1:_r(e)?2:Fc(e)?3:0}function ih(e,n){return Zc(e)===2?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function aS(e,n,s){const i=Zc(e);i===2?e.set(n,s):i===3?e.add(s):e[n]=s}function Gk(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}function _r(e){return e instanceof Map}function Fc(e){return e instanceof Set}function Xs(e){return e.copy_||e.base_}function lh(e,n){if(_r(e))return new Map(e);if(Fc(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const s=nS(e);if(n===!0||n==="class_only"&&!s){const i=Object.getOwnPropertyDescriptors(e);delete i[$n];let r=Reflect.ownKeys(i);for(let c=0;c<r.length;c++){const u=r[c],d=i[u];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(i[u]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[u]})}return Object.create(vr(e),i)}else{const i=vr(e);if(i!==null&&s)return{...e};const r=Object.create(i);return Object.assign(r,e)}}function Zh(e,n=!1){return Gc(e)||al(e)||!ei(e)||(Zc(e)>1&&Object.defineProperties(e,{set:Qo,add:Qo,clear:Qo,delete:Qo}),Object.freeze(e),n&&Object.values(e).forEach(s=>Zh(s,!0))),e}function Yk(){ra(2)}var Qo={value:Yk};function Gc(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Vk={};function ti(e){const n=Vk[e];return n||ra(0,e),n}var yr;function sS(){return yr}function Kk(e,n){return{drafts_:[],parent_:e,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function b0(e,n){n&&(ti("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=n)}function rh(e){oh(e),e.drafts_.forEach(Wk),e.drafts_=null}function oh(e){e===yr&&(yr=e.parent_)}function x0(e){return yr=Kk(yr,e)}function Wk(e){const n=e[$n];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function S0(e,n){n.unfinalizedDrafts_=n.drafts_.length;const s=n.drafts_[0];return e!==void 0&&e!==s?(s[$n].modified_&&(rh(n),ra(4)),ei(e)&&(e=Ec(n,e),n.parent_||Tc(n,e)),n.patches_&&ti("Patches").generateReplacementPatches_(s[$n].base_,e,n.patches_,n.inversePatches_)):e=Ec(n,s,[]),rh(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),e!==tS?e:void 0}function Ec(e,n,s){if(Gc(n))return n;const i=e.immer_.shouldUseStrictIteration(),r=n[$n];if(!r)return _c(n,(c,u)=>w0(e,r,n,c,u,s),i),n;if(r.scope_!==e)return n;if(!r.modified_)return Tc(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const c=r.copy_;let u=c,d=!1;r.type_===3&&(u=new Set(c),c.clear(),d=!0),_c(u,(m,p)=>w0(e,r,c,m,p,s,d),i),Tc(e,c,!1),s&&e.patches_&&ti("Patches").generatePatches_(r,s,e.patches_,e.inversePatches_)}return r.copy_}function w0(e,n,s,i,r,c,u){if(r==null||typeof r!="object"&&!u)return;const d=Gc(r);if(!(d&&!u)){if(al(r)){const m=c&&n&&n.type_!==3&&!ih(n.assigned_,i)?c.concat(i):void 0,p=Ec(e,r,m);if(aS(s,i,p),al(p))e.canAutoFreeze_=!1;else return}else u&&s.add(r);if(ei(r)&&!d){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||n&&n.base_&&n.base_[i]===r&&d)return;Ec(e,r),(!n||!n.scope_.parent_)&&typeof i!="symbol"&&(_r(s)?s.has(i):Object.prototype.propertyIsEnumerable.call(s,i))&&Tc(e,r)}}}function Tc(e,n,s=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Zh(n,s)}function Xk(e,n){const s=Array.isArray(e),i={type_:s?1:0,scope_:n?n.scope_:sS(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,c=Fh;s&&(r=[i],c=br);const{revoke:u,proxy:d}=Proxy.revocable(r,c);return i.draft_=d,i.revoke_=u,d}var Fh={get(e,n){if(n===$n)return e;const s=Xs(e);if(!ih(s,n))return Qk(e,s,n);const i=s[n];return e.finalized_||!ei(i)?i:i===Of(e.base_,n)?(zf(e),e.copy_[n]=uh(i,e)):i},has(e,n){return n in Xs(e)},ownKeys(e){return Reflect.ownKeys(Xs(e))},set(e,n,s){const i=iS(Xs(e),n);if(i?.set)return i.set.call(e.draft_,s),!0;if(!e.modified_){const r=Of(Xs(e),n),c=r?.[$n];if(c&&c.base_===s)return e.copy_[n]=s,e.assigned_[n]=!1,!0;if(Gk(s,r)&&(s!==void 0||ih(e.base_,n)))return!0;zf(e),ch(e)}return e.copy_[n]===s&&(s!==void 0||n in e.copy_)||Number.isNaN(s)&&Number.isNaN(e.copy_[n])||(e.copy_[n]=s,e.assigned_[n]=!0),!0},deleteProperty(e,n){return Of(e.base_,n)!==void 0||n in e.base_?(e.assigned_[n]=!1,zf(e),ch(e)):delete e.assigned_[n],e.copy_&&delete e.copy_[n],!0},getOwnPropertyDescriptor(e,n){const s=Xs(e),i=Reflect.getOwnPropertyDescriptor(s,n);return i&&{writable:!0,configurable:e.type_!==1||n!=="length",enumerable:i.enumerable,value:s[n]}},defineProperty(){ra(11)},getPrototypeOf(e){return vr(e.base_)},setPrototypeOf(){ra(12)}},br={};_c(Fh,(e,n)=>{br[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});br.deleteProperty=function(e,n){return br.set.call(this,e,n,void 0)};br.set=function(e,n,s){return Fh.set.call(this,e[0],n,s,e[0])};function Of(e,n){const s=e[$n];return(s?Xs(s):e)[n]}function Qk(e,n,s){const i=iS(n,s);return i?"value"in i?i.value:i.get?.call(e.draft_):void 0}function iS(e,n){if(!(n in e))return;let s=vr(e);for(;s;){const i=Object.getOwnPropertyDescriptor(s,n);if(i)return i;s=vr(s)}}function ch(e){e.modified_||(e.modified_=!0,e.parent_&&ch(e.parent_))}function zf(e){e.copy_||(e.copy_=lh(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Jk=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(n,s,i)=>{if(typeof n=="function"&&typeof s!="function"){const c=s;s=n;const u=this;return function(m=c,...p){return u.produce(m,y=>s.call(this,y,...p))}}typeof s!="function"&&ra(6),i!==void 0&&typeof i!="function"&&ra(7);let r;if(ei(n)){const c=x0(this),u=uh(n,void 0);let d=!0;try{r=s(u),d=!1}finally{d?rh(c):oh(c)}return b0(c,i),S0(r,c)}else if(!n||typeof n!="object"){if(r=s(n),r===void 0&&(r=n),r===tS&&(r=void 0),this.autoFreeze_&&Zh(r,!0),i){const c=[],u=[];ti("Patches").generateReplacementPatches_(n,r,c,u),i(c,u)}return r}else ra(1,n)},this.produceWithPatches=(n,s)=>{if(typeof n=="function")return(u,...d)=>this.produceWithPatches(u,m=>n(m,...d));let i,r;return[this.produce(n,s,(u,d)=>{i=u,r=d}),i,r]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){ei(e)||ra(8),al(e)&&(e=eA(e));const n=x0(this),s=uh(e,void 0);return s[$n].isManual_=!0,oh(n),s}finishDraft(e,n){const s=e&&e[$n];(!s||!s.isManual_)&&ra(9);const{scope_:i}=s;return b0(i,n),S0(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let s;for(s=n.length-1;s>=0;s--){const r=n[s];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}s>-1&&(n=n.slice(s+1));const i=ti("Patches").applyPatches_;return al(e)?i(e,n):this.produce(e,r=>i(r,n))}};function uh(e,n){const s=_r(e)?ti("MapSet").proxyMap_(e,n):Fc(e)?ti("MapSet").proxySet_(e,n):Xk(e,n);return(n?n.scope_:sS()).drafts_.push(s),s}function eA(e){return al(e)||ra(10,e),lS(e)}function lS(e){if(!ei(e)||Gc(e))return e;const n=e[$n];let s,i=!0;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,s=lh(e,n.scope_.immer_.useStrictShallowCopy_),i=n.scope_.immer_.shouldUseStrictIteration()}else s=lh(e,!0);return _c(s,(r,c)=>{aS(s,r,lS(c))},i),n&&(n.finalized_=!1),s}var tA=new Jk,nA=tA.produce;const aA=e=>(n,s,i)=>(i.setState=(r,c,...u)=>{const d=typeof r=="function"?nA(r):r;return n(d,c,...u)},e(i.setState,s,i)),sA=aA,oc={itemId:null,slot:null};function rS(){return Object.fromEntries(Je.map(e=>[e,null]))}function oS(){return Object.fromEntries(js.map(e=>[e,[]]))}function iA(){return Object.fromEntries(Je.map(e=>[e,!1]))}function _0(){return{slots:rS(),craftedSlots:{},binsByCategory:oS(),locks:iA(),level:106,characterClass:null,selectedSlot:"weapon",comparePreview:{...oc},legacyHash:null,skillpointTomeMode:"no_tomes"}}function dh(e){return{slots:{...e.slots},craftedSlots:{...e.craftedSlots},binsByCategory:Object.fromEntries(js.map(n=>[n,[...e.binsByCategory[n]]])),locks:{...e.locks},level:e.level,characterClass:e.characterClass,selectedSlot:e.selectedSlot,comparePreview:{...e.comparePreview},legacyHash:e.legacyHash,skillpointTomeMode:e.skillpointTomeMode}}function Sn(e){e.undoStack.push(dh(e)),e.undoStack.length>100&&e.undoStack.shift(),e.redoStack=[]}function Pf(e,n){e.slots={...n.slots},e.craftedSlots={...n.craftedSlots},e.binsByCategory=Object.fromEntries(js.map(s=>[s,[...n.binsByCategory[s]]])),e.locks={...n.locks},e.level=n.level,e.characterClass=n.characterClass,e.selectedSlot=n.selectedSlot,e.comparePreview={...n.comparePreview},e.legacyHash=n.legacyHash}function If(e,n){e.includes(n)||e.unshift(n)}const Jo=Zk()(sA((e,n)=>({..._0(),undoStack:[],redoStack:[],setLevel(s){e(i=>{Sn(i),i.level=Math.min(106,Math.max(1,Math.round(s)))})},setCharacterClass(s){e(i=>{Sn(i),i.characterClass=s})},setSkillpointTomeMode(s){e(i=>{i.skillpointTomeMode=s??"no_tomes"})},setSelectedSlot(s){e(i=>{i.selectedSlot=s})},setComparePreview(s){e(i=>{if(!s){i.comparePreview={...oc};return}i.comparePreview={itemId:s.itemId??i.comparePreview.itemId,slot:s.slot??i.comparePreview.slot}})},pinItem(s,i){e(r=>{Sn(r),If(r.binsByCategory[s],i)})},removePinnedItem(s,i){e(r=>{Sn(r),r.binsByCategory[s]=r.binsByCategory[s].filter(c=>c!==i)})},clearCategory(s){e(i=>{Sn(i),i.binsByCategory[s]=[]})},clearAll(){e(s=>{Sn(s),s.slots=rS(),s.craftedSlots={},s.binsByCategory=oS(),s.comparePreview={...oc},s.legacyHash=null})},equipItem(s,i){e(r=>{Sn(r),r.slots[s]=i,delete r.craftedSlots[s],r.selectedSlot=s})},moveSlotToBin(s){e(i=>{const r=i.slots[s];if(r==null)return;Sn(i);const c=xa(s);If(i.binsByCategory[c],r),i.slots[s]=null})},swapSlots(s,i){e(r=>{Sn(r);const c=r.slots[s];r.slots[s]=r.slots[i],r.slots[i]=c})},assignDraggedItemToSlot({targetSlot:s,source:i,itemId:r,sourceCategory:c,sourceSlot:u}){e(d=>{Sn(d);const m=d.slots[s];d.slots[s]=r,delete d.craftedSlots[s],d.selectedSlot=s,i==="bin"&&c&&(d.binsByCategory[c]=d.binsByCategory[c].filter(p=>p!==r)),i==="slot"&&u&&u!==s&&(d.slots[u]=m??null)})},assignDraggedItemToBin({targetCategory:s,source:i,itemId:r,sourceCategory:c,sourceSlot:u}){e(d=>{Sn(d),i==="bin"&&c&&(d.binsByCategory[c]=d.binsByCategory[c].filter(m=>m!==r)),i==="slot"&&u&&(d.slots[u]=null),If(d.binsByCategory[s],r)})},toggleLock(s){e(i=>{Sn(i),i.locks[s]=!i.locks[s]})},equipCraftedItem(s,i){e(r=>{Sn(r),r.slots[s]=null,r.craftedSlots[s]=i,r.selectedSlot=s})},clearCraftedSlot(s){e(i=>{Sn(i),delete i.craftedSlots[s]})},undo(){const s=n(),i=s.undoStack[s.undoStack.length-1];i&&e(r=>{const c=dh(r);r.undoStack.pop(),r.redoStack.push(c),Pf(r,i)})},redo(){const s=n(),i=s.redoStack[s.redoStack.length-1];i&&e(r=>{const c=dh(r);r.redoStack.pop(),r.undoStack.push(c),Pf(r,i)})},hydrateSnapshot(s){e(i=>{const r=_0(),c={...r,...s,slots:{...r.slots,...s.slots??{}},craftedSlots:{...r.craftedSlots,...s.craftedSlots??{}},locks:{...r.locks,...s.locks??{}},binsByCategory:{...r.binsByCategory,...s.binsByCategory??{}},comparePreview:{...r.comparePreview,...s.comparePreview??{}}};Pf(i,c),i.undoStack=[],i.redoStack=[]})},loadCandidate(s){e(i=>{Sn(i),i.slots={...s},i.comparePreview={...oc}})},setLegacyHash(s){e(i=>{i.legacyHash=s})}})));var Bf={exports:{}},E0;function lA(){return E0||(E0=1,(function(e){var n=(function(){var s=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",c={};function u(m,p){if(!c[m]){c[m]={};for(var y=0;y<m.length;y++)c[m][m.charAt(y)]=y}return c[m][p]}var d={compressToBase64:function(m){if(m==null)return"";var p=d._compress(m,6,function(y){return i.charAt(y)});switch(p.length%4){default:case 0:return p;case 1:return p+"===";case 2:return p+"==";case 3:return p+"="}},decompressFromBase64:function(m){return m==null?"":m==""?null:d._decompress(m.length,32,function(p){return u(i,m.charAt(p))})},compressToUTF16:function(m){return m==null?"":d._compress(m,15,function(p){return s(p+32)})+" "},decompressFromUTF16:function(m){return m==null?"":m==""?null:d._decompress(m.length,16384,function(p){return m.charCodeAt(p)-32})},compressToUint8Array:function(m){for(var p=d.compress(m),y=new Uint8Array(p.length*2),v=0,b=p.length;v<b;v++){var S=p.charCodeAt(v);y[v*2]=S>>>8,y[v*2+1]=S%256}return y},decompressFromUint8Array:function(m){if(m==null)return d.decompress(m);for(var p=new Array(m.length/2),y=0,v=p.length;y<v;y++)p[y]=m[y*2]*256+m[y*2+1];var b=[];return p.forEach(function(S){b.push(s(S))}),d.decompress(b.join(""))},compressToEncodedURIComponent:function(m){return m==null?"":d._compress(m,6,function(p){return r.charAt(p)})},decompressFromEncodedURIComponent:function(m){return m==null?"":m==""?null:(m=m.replace(/ /g,"+"),d._decompress(m.length,32,function(p){return u(r,m.charAt(p))}))},compress:function(m){return d._compress(m,16,function(p){return s(p)})},_compress:function(m,p,y){if(m==null)return"";var v,b,S={},_={},T="",j="",k="",R=2,P=3,B=2,q=[],M=0,C=0,D;for(D=0;D<m.length;D+=1)if(T=m.charAt(D),Object.prototype.hasOwnProperty.call(S,T)||(S[T]=P++,_[T]=!0),j=k+T,Object.prototype.hasOwnProperty.call(S,j))k=j;else{if(Object.prototype.hasOwnProperty.call(_,k)){if(k.charCodeAt(0)<256){for(v=0;v<B;v++)M=M<<1,C==p-1?(C=0,q.push(y(M)),M=0):C++;for(b=k.charCodeAt(0),v=0;v<8;v++)M=M<<1|b&1,C==p-1?(C=0,q.push(y(M)),M=0):C++,b=b>>1}else{for(b=1,v=0;v<B;v++)M=M<<1|b,C==p-1?(C=0,q.push(y(M)),M=0):C++,b=0;for(b=k.charCodeAt(0),v=0;v<16;v++)M=M<<1|b&1,C==p-1?(C=0,q.push(y(M)),M=0):C++,b=b>>1}R--,R==0&&(R=Math.pow(2,B),B++),delete _[k]}else for(b=S[k],v=0;v<B;v++)M=M<<1|b&1,C==p-1?(C=0,q.push(y(M)),M=0):C++,b=b>>1;R--,R==0&&(R=Math.pow(2,B),B++),S[j]=P++,k=String(T)}if(k!==""){if(Object.prototype.hasOwnProperty.call(_,k)){if(k.charCodeAt(0)<256){for(v=0;v<B;v++)M=M<<1,C==p-1?(C=0,q.push(y(M)),M=0):C++;for(b=k.charCodeAt(0),v=0;v<8;v++)M=M<<1|b&1,C==p-1?(C=0,q.push(y(M)),M=0):C++,b=b>>1}else{for(b=1,v=0;v<B;v++)M=M<<1|b,C==p-1?(C=0,q.push(y(M)),M=0):C++,b=0;for(b=k.charCodeAt(0),v=0;v<16;v++)M=M<<1|b&1,C==p-1?(C=0,q.push(y(M)),M=0):C++,b=b>>1}R--,R==0&&(R=Math.pow(2,B),B++),delete _[k]}else for(b=S[k],v=0;v<B;v++)M=M<<1|b&1,C==p-1?(C=0,q.push(y(M)),M=0):C++,b=b>>1;R--,R==0&&(R=Math.pow(2,B),B++)}for(b=2,v=0;v<B;v++)M=M<<1|b&1,C==p-1?(C=0,q.push(y(M)),M=0):C++,b=b>>1;for(;;)if(M=M<<1,C==p-1){q.push(y(M));break}else C++;return q.join("")},decompress:function(m){return m==null?"":m==""?null:d._decompress(m.length,32768,function(p){return m.charCodeAt(p)})},_decompress:function(m,p,y){var v=[],b=4,S=4,_=3,T="",j=[],k,R,P,B,q,M,C,D={val:y(0),position:p,index:1};for(k=0;k<3;k+=1)v[k]=k;for(P=0,q=Math.pow(2,2),M=1;M!=q;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=y(D.index++)),P|=(B>0?1:0)*M,M<<=1;switch(P){case 0:for(P=0,q=Math.pow(2,8),M=1;M!=q;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=y(D.index++)),P|=(B>0?1:0)*M,M<<=1;C=s(P);break;case 1:for(P=0,q=Math.pow(2,16),M=1;M!=q;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=y(D.index++)),P|=(B>0?1:0)*M,M<<=1;C=s(P);break;case 2:return""}for(v[3]=C,R=C,j.push(C);;){if(D.index>m)return"";for(P=0,q=Math.pow(2,_),M=1;M!=q;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=y(D.index++)),P|=(B>0?1:0)*M,M<<=1;switch(C=P){case 0:for(P=0,q=Math.pow(2,8),M=1;M!=q;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=y(D.index++)),P|=(B>0?1:0)*M,M<<=1;v[S++]=s(P),C=S-1,b--;break;case 1:for(P=0,q=Math.pow(2,16),M=1;M!=q;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=y(D.index++)),P|=(B>0?1:0)*M,M<<=1;v[S++]=s(P),C=S-1,b--;break;case 2:return j.join("")}if(b==0&&(b=Math.pow(2,_),_++),v[C])T=v[C];else if(C===S)T=R+R.charAt(0);else return null;j.push(T),v[S++]=R+T.charAt(0),b--,R=T,b==0&&(b=Math.pow(2,_),_++)}}};return d})();e!=null?e.exports=n:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return n})})(Bf)),Bf.exports}var rA=lA();const cS=xh(rA),fh={helmet:"h",chestplate:"c",leggings:"l",boots:"b",ring1:"r1",ring2:"r2",bracelet:"br",necklace:"n",weapon:"w"},ec=Object.fromEntries(Object.entries(fh).map(([e,n])=>[n,e])),oA=mr({slots:or(Cn(),la().int().nullable()).optional(),binsByCategory:or(Cn(),Un(la().int())).optional(),locks:or(Cn(),sr()).optional(),level:la().int().min(1).max(106).optional(),characterClass:xc(["Warrior","Assassin","Mage","Archer","Shaman"]).nullable().optional(),selectedSlot:Cn().nullable().optional(),legacyHash:Cn().nullable().optional()}).passthrough(),cA=mr({version:Cn().nullable().optional(),selectedByClass:mr({Warrior:Un(la().int()).optional(),Assassin:Un(la().int()).optional(),Mage:Un(la().int()).optional(),Archer:Un(la().int()).optional(),Shaman:Un(la().int()).optional()}).partial().default({})});function uA(e){const n=e.replace(/-/g,"+").replace(/_/g,"/").padEnd(Math.ceil(e.length/4)*4,"="),s=atob(n),i=Uint8Array.from(s,r=>r.charCodeAt(0));return new TextDecoder().decode(i)}function uS(e){const n=cS.decompressFromEncodedURIComponent(e);if(n!=null&&n!=="")return n;try{return uA(e)}catch{return null}}function dS(e){return cS.compressToEncodedURIComponent(e)}function T0(e){try{return JSON.parse(e)}catch{return null}}function fS(e){const n=e.searchParams.get("q")??"",s=e.searchParams.get("sort"),i=s?s.split(",").map(k=>k.trim()).filter(Boolean):[],r=e.searchParams.get("sdesc"),c=e.searchParams.get("view"),u=e.searchParams.get("wearLevel"),d=e.searchParams.get("classCompat"),m=e.searchParams.get("excludeRestricted"),p=(e.searchParams.get("cats")??"").split(",").map(k=>k.trim()).filter(Boolean),y=(e.searchParams.get("types")??"").split(",").map(k=>k.trim()).filter(Boolean),v=(e.searchParams.get("tiers")??"").split(",").map(k=>k.trim()).filter(Boolean),b=(e.searchParams.get("classReqs")??"").split(",").map(k=>k.trim()).filter(Boolean),S=(e.searchParams.get("majorIds")??"").split(",").map(k=>k.trim()).filter(Boolean),_=T0(e.searchParams.get("ranges")??"")??{},T=T0(e.searchParams.get("excludeRanges")??"")??{},j=e.searchParams.get("resultsBelow");return tx({...Ha,text:n,sortKeys:i.length>0?i:Ha.sortKeys,sortDescending:r===null?Ha.sortDescending:r!=="0",viewMode:c??Ha.viewMode,onlyWearableAtLevel:u?Number(u):Ha.onlyWearableAtLevel,onlyClassCompatible:d==="1",excludeRestricted:m===null?!1:m!=="0",categories:p,types:y,tiers:v,classReqs:b,majorIds:S,numericRanges:_,exclusionRanges:T,resultsBelowBuild:j===null?Ha.resultsBelowBuild:j==="1"})}function dA(e){const n=e.s??e.slots,s=e.k??e.locks,i=e.l??e.level,r=e.c??e.characterClass,c=e.h??e.legacyHash;let u=e.selectedSlot;typeof u=="string"&&ec[u]&&(u=ec[u]);const d=e.binsByCategory;if(n&&typeof n=="object"){const m={};for(const[p,y]of Object.entries(n)){const v=ec[p]??p;m[v]=typeof y=="number"||y===null?y:null}e={...e,slots:m}}if(s&&typeof s=="object"){const m={};for(const[p,y]of Object.entries(s)){const v=ec[p]??p;m[v]=!!y}e={...e,locks:m}}return i!==void 0&&(e={...e,level:i}),r!==void 0&&(e={...e,characterClass:r}),c!==void 0&&(e={...e,legacyHash:c}),u!==void 0&&(e={...e,selectedSlot:u}),d!==void 0&&(e={...e,binsByCategory:d}),e}function hS(e){const n=e.searchParams.get("wb");if(!n)return null;try{const s=uS(n);if(!s)return null;const i=JSON.parse(s),r=dA(i),c=oA.parse(r),u=Object.fromEntries(Je.map(p=>[p,c.slots?.[p]??null])),d=Object.fromEntries(js.map(p=>[p,c.binsByCategory?.[p]??[]])),m=Object.fromEntries(Je.map(p=>[p,!!c.locks?.[p]]));return{slots:u,binsByCategory:d,locks:m,level:c.level,characterClass:c.characterClass??null,selectedSlot:c.selectedSlot??void 0,legacyHash:c.legacyHash??null}}catch{return null}}function mS(e){const n=e.searchParams.get("atree");if(!n)return null;try{const s=uS(n);if(!s)return null;const i=JSON.parse(s),r=cA.parse({version:i.v??i.version,selectedByClass:i.s??i.selectedByClass});return{version:r.version??null,selectedByClass:r.selectedByClass}}catch{return null}}function fA(e=window.location){const n=new URL(e.href),s=n.hash?n.hash.slice(1):null;return{search:fS(n),workbenchPatch:hS(n),legacyHash:s||null,mode:n.searchParams.get("mode"),abilityTree:mS(n)}}function pS(e){const n={};for(const[r,c]of Object.entries(e.slots)){const u=fh[r]??r;n[u]=c}const s={};for(const[r,c]of Object.entries(e.locks))c&&(s[fh[r]??r]=!0);const i={s:n,k:Object.keys(s).length>0?s:void 0,l:e.level,c:e.characterClass,h:e.legacyHash};return dS(JSON.stringify(i))}function N0(e){const n=new URL(window.location.origin+window.location.pathname),s=n.searchParams;s.set("wb",pS(e.workbenchSnapshot)),e.abilityTreeState&&Object.keys(e.abilityTreeState.selectedByClass??{}).length>0?s.set("atree",dS(JSON.stringify({v:e.abilityTreeState.version??null,s:e.abilityTreeState.selectedByClass}))):s.delete("atree"),e.mode?s.set("mode",e.mode):s.delete("mode");const i=e.legacyHash??e.workbenchSnapshot.legacyHash;n.hash=i?`#${i}`:"",e.replace?window.history.replaceState({},"",n):window.history.pushState({},"",n)}const ya={legacyBaseDps:1,legacyEhp:.7,dpsProxy:1,spellProxy:0,meleeProxy:0,ehpProxy:.6,speed:.4,sustain:.35,skillPointTotal:.15,reqTotalPenalty:.2},ia={characterClass:null,level:106,mustIncludeIds:[],excludedIds:[],lockedSlots:{},target:{},allowedTiers:[],requiredMajorIds:[],excludedMajorIds:[],weaponAttackSpeeds:[],attackSpeedConstraintMode:"or",skillpointFeasibilityMode:"no_tomes",minPowderSlots:null,onlyPinnedItems:!1,weights:ya,topN:50,topKPerSlot:80,beamWidth:400,maxStates:15e4,useExhaustiveSmallPool:!0,exhaustiveStateLimit:25e4,allowRestricted:!0};function hA(e){return e.aggregated.hprTotal*.9+e.aggregated.mr*14+e.aggregated.ms*10+e.aggregated.ls*9}function mA(e,n){let s=0;const{target:i}=n;return typeof i.minLegacyBaseDps=="number"&&e.derived.legacyBaseDps<i.minLegacyBaseDps&&(s+=(i.minLegacyBaseDps-e.derived.legacyBaseDps)*4),typeof i.minLegacyEhp=="number"&&e.derived.legacyEhp<i.minLegacyEhp&&(s+=(i.minLegacyEhp-e.derived.legacyEhp)*.8),typeof i.minDpsProxy=="number"&&e.derived.dpsProxy<i.minDpsProxy&&(s+=(i.minDpsProxy-e.derived.dpsProxy)*4),typeof i.minEhpProxy=="number"&&e.derived.ehpProxy<i.minEhpProxy&&(s+=(i.minEhpProxy-e.derived.ehpProxy)*1.1),typeof i.minMr=="number"&&e.aggregated.mr<i.minMr&&(s+=(i.minMr-e.aggregated.mr)*45),typeof i.minMs=="number"&&e.aggregated.ms<i.minMs&&(s+=(i.minMs-e.aggregated.ms)*35),typeof i.minSpeed=="number"&&e.aggregated.speed<i.minSpeed&&(s+=(i.minSpeed-e.aggregated.speed)*12),typeof i.minSkillPointTotal=="number"&&e.derived.skillPointTotal<i.minSkillPointTotal&&(s+=(i.minSkillPointTotal-e.derived.skillPointTotal)*15),typeof i.maxReqTotal=="number"&&e.derived.reqTotal>i.maxReqTotal&&(s+=(e.derived.reqTotal-i.maxReqTotal)*8),s}function pA(e,n){const s=n.target.customNumericRanges??[];if(s.length===0)return 0;const i=8,r=4;let c=0;for(const u of s){const d=u.key?.trim();if(!d)continue;const m=e.aggregated,p=e.derived,y=m[d]??p[d]??0;typeof u.min=="number"&&(c+=y*i),typeof u.max=="number"&&y>u.max&&(c-=(y-u.max)*r)}return c}function Yc(e,n,s){const i=pA(e,s);if(s.constraintOnlyMode){const v={legacyBaseDps:0,legacyEhp:0,dpsProxy:0,spellProxy:0,meleeProxy:0,ehpProxy:0,speed:0,sustain:0,skillPointTotal:e.derived.skillPointTotal*.01,reqPenalty:e.derived.reqTotal*.01,thresholdPenalty:0};return{score:i+v.skillPointTotal-v.reqPenalty,breakdown:v}}const r=hA(e),c=e.derived.reqTotal*n.reqTotalPenalty,u=mA(e,s),d=(s.target.customNumericRanges??[]).filter(v=>typeof v.min=="number").length,m=d>0?Math.max(.15,1-d*.2):1,p={legacyBaseDps:e.derived.legacyBaseDps*n.legacyBaseDps*m,legacyEhp:e.derived.legacyEhp*n.legacyEhp*m,dpsProxy:e.derived.dpsProxy*n.dpsProxy*m,spellProxy:e.derived.spellProxy*n.spellProxy*m,meleeProxy:e.derived.meleeProxy*n.meleeProxy*m,ehpProxy:e.derived.ehpProxy*n.ehpProxy*m,speed:e.aggregated.speed*n.speed,sustain:r*n.sustain,skillPointTotal:e.derived.skillPointTotal*n.skillPointTotal,reqPenalty:c,thresholdPenalty:u};return{score:p.legacyBaseDps+p.legacyEhp+p.dpsProxy+p.spellProxy+p.meleeProxy+p.ehpProxy+p.speed+p.sustain+p.skillPointTotal+i-p.reqPenalty-p.thresholdPenalty,breakdown:p}}function gS(e,n,s,i){if(!e.length||i<=0)return[];const r=[...e].sort((u,d)=>d.roughScore-u.roughScore).slice(0,i),c=[];for(const u of r){const d=nl({slots:u.slots,level:s.level,characterClass:s.characterClass},n),{score:m,breakdown:p}=Yc(d,s.weights,s);c.push({slots:{...u.slots},score:m,scoreBreakdown:p,summary:d})}return c}function gA(e,n){const s=new Map;for(const i of Je){const r=e[i];if(r==null)continue;const c=n.itemSetName.get(r);c&&s.set(c,(s.get(c)??0)+1)}return s}function Vc(e,n,s){const i=s.itemSetName.get(e);if(!i)return!1;const r=s.setsMeta.get(i);if(!r)return!1;let c=0;for(const u of Je){const d=n[u];d!=null&&s.itemSetName.get(d)===i&&c++}return r.illegalCounts.includes(c+1)}const M0=["str","dex","int","def","agi"],Ga=["SUPER_SLOW","VERY_SLOW","SLOW","NORMAL","FAST","VERY_FAST","SUPER_FAST"];function Kc(e){return Jx(e.skillpointFeasibilityMode,e.level)}function Ya(e){return Math.round(e.numeric.atkTier||0)}function Gh(e,n){switch(n){case"str":return Math.max(0,e.numeric.spStr);case"dex":return Math.max(0,e.numeric.spDex);case"int":return Math.max(0,e.numeric.spInt);case"def":return Math.max(0,e.numeric.spDef);case"agi":return Math.max(0,e.numeric.spAgi)}}function vA(e,n){switch(n){case"str":return e.numeric.reqStr;case"dex":return e.numeric.reqDex;case"int":return e.numeric.reqInt;case"def":return e.numeric.reqDef;case"agi":return e.numeric.reqAgi}}function yA(e,n){if(n.length===0)return 0;let s=0;for(const i of n)s+=Gh(e,i)*10,s-=Math.max(0,vA(e,i))*.7;return s-=Math.max(0,e.roughScoreFields.reqTotal)*.12,s}function oa(e){return{...e}}function bA(e,n){const s=e.weapon;if(s==null)return null;const i=n.itemsById.get(s);if(!i)return null;const r=Ga.indexOf(i.atkSpd);if(r<0)return null;let c=0;for(const d of Je){const m=e[d];if(m==null)continue;const p=n.itemsById.get(m);p&&(c+=Ya(p))}const u=Math.max(0,Math.min(Ga.length-1,r+c));return Ga[u]}function Yh(e,n){let s=0;for(const i of Je){const r=e[i];if(r==null)continue;const c=n.itemsById.get(r);c&&(s+=Ya(c))}return s}function xA(e,n,s){if(s.weaponAttackSpeeds.length===0)return null;const i=e.weapon;if(i==null)return null;const r=n.itemsById.get(i);if(!r)return null;const c=Ga.indexOf(r.atkSpd);if(c<0)return null;const u=[...new Set(s.weaponAttackSpeeds.map(y=>Ga.indexOf(y)).filter(y=>y>=0))].sort((y,v)=>y-v);if(u.length===0)return null;const d=Yh(e,n),m=Math.max(0,Math.min(Ga.length-1,c+d));let p=0;if(!u.includes(m)){const y=u.reduce((v,b)=>Math.abs(b-m)<Math.abs(v-m)?b:v,u[0]);p=y>m?1:y<m?-1:0}return{baseSpeedIndex:c,fixedAtkTierTotal:d,allowedFinalIndices:u,allowedFinalIndexSet:new Set(u),preferredDirection:p}}function Nc(e,n,s){const i=new Array(e.length+1).fill(0),r=new Array(e.length+1).fill(0);for(let c=e.length-1;c>=0;c--){const u=n.get(e[c])??[];let d=0,m=0;if(u.length>0){d=1/0,m=-1/0;for(const p of u){const y=s.itemsById.get(p.id),v=y?Ya(y):0;v<d&&(d=v),v>m&&(m=v)}Number.isFinite(d)||(d=0),Number.isFinite(m)||(m=0)}i[c]=i[c+1]+d,r[c]=r[c+1]+m}return{minSuffix:i,maxSuffix:r}}function SA(e,n,s,i){const r=e.fixedAtkTierTotal+n+s,c=e.fixedAtkTierTotal+n+i,u=Math.min(r,c),d=Math.max(r,c);for(let m=u;m<=d;m++){const p=Math.max(0,Math.min(Ga.length-1,e.baseSpeedIndex+m));if(e.allowedFinalIndexSet.has(p))return!0}return!1}function Es(e,n,s=0,i=0,r=1){if(!e||!e.preferredDirection)return 0;const c=e.fixedAtkTierTotal+(n??0),u=Math.max(0,Math.min(Ga.length-1,e.baseSpeedIndex+c+s)),d=Math.max(0,Math.min(Ga.length-1,e.baseSpeedIndex+c+i)),m=Math.min(u,d),p=Math.max(u,d);let y=1/0,v=0;for(let S=m;S<=p;S++){let _=1/0;for(const T of e.allowedFinalIndices){const j=Math.abs(T-S);j<_&&(_=j)}_<y&&(y=_),_>v&&(v=_)}if(!Number.isFinite(y)||v===0)return 0;const b=e.preferredDirection>0?m:-p;return(-v*1e3-y*100+b)*r}function wA(e,n,s,i){const{target:r}=n,c=Wc(n,{includeAttackTier:!1}),u=[];if(typeof r.minLegacyBaseDps=="number"&&e.derived.legacyBaseDps<r.minLegacyBaseDps&&u.push(`minLegacyBaseDps (${e.derived.legacyBaseDps} < ${r.minLegacyBaseDps})`),typeof r.minLegacyEhp=="number"&&e.derived.legacyEhp<r.minLegacyEhp&&u.push(`minLegacyEhp (${e.derived.legacyEhp} < ${r.minLegacyEhp})`),typeof r.minDpsProxy=="number"&&e.derived.dpsProxy<r.minDpsProxy&&u.push(`minDpsProxy (${e.derived.dpsProxy} < ${r.minDpsProxy})`),typeof r.minEhpProxy=="number"&&e.derived.ehpProxy<r.minEhpProxy&&u.push(`minEhpProxy (${e.derived.ehpProxy} < ${r.minEhpProxy})`),typeof r.minMr=="number"&&e.aggregated.mr<r.minMr&&u.push(`minMr (${e.aggregated.mr} < ${r.minMr})`),typeof r.minMs=="number"&&e.aggregated.ms<r.minMs&&u.push(`minMs (${e.aggregated.ms} < ${r.minMs})`),typeof r.minSpeed=="number"&&e.aggregated.speed<r.minSpeed&&u.push(`minSpeed (${e.aggregated.speed} < ${r.minSpeed})`),typeof r.minSkillPointTotal=="number"&&e.derived.skillPointTotal<r.minSkillPointTotal&&u.push(`minSkillPointTotal (${e.derived.skillPointTotal} < ${r.minSkillPointTotal})`),typeof r.maxReqTotal=="number"&&e.derived.reqTotal>r.maxReqTotal&&u.push(`maxReqTotal (${e.derived.reqTotal} > ${r.maxReqTotal})`),c.length>0&&s&&i)for(const d of c){const m=d.key;let p=0;for(const y of Je){const v=s[y];if(v==null)continue;const b=i.itemsById.get(v);b&&(p+=b.numericIndex[m]??0)}typeof d.min=="number"&&p<d.min&&u.push(`${m} (${p} < ${d.min})`),typeof d.max=="number"&&p>d.max&&u.push(`${m} (${p} > ${d.max})`)}return u.length>0?{ok:!1,failedChecks:u}:{ok:!0}}function Vh(e,n,s,i){const r=[...new Set(s.mustIncludeIds)];for(const m of r){let p=!1;for(const y of Je)if(e[y]===m){p=!0;break}if(!p)return{ok:!1,reason:"item",failedChecks:[`mustIncludeMissing (${m})`]}}for(const m of Je){const p=e[m];if(p==null)continue;const y=n.itemsById.get(p);if(!y)return{ok:!1,reason:"item"};if(!Kh(y,s))return{ok:!1,reason:"item"}}const c=gA(e,n);for(const[m,p]of c){const y=n.setsMeta.get(m);if(y&&y.illegalCounts.includes(p))return{ok:!1,reason:"item"}}const u=RA({constraints:s,slots:e,catalog:n,atkTierRequirement:xS(bS(s))});if(u.configured&&!u.ok)return{ok:!1,reason:"attackSpeed",failedChecks:u.failedChecks};const d=wA(i,s,e,n);return d.ok?{ok:!0}:{ok:!1,reason:"thresholds",failedChecks:d.failedChecks}}function Kh(e,n){return!(!n.allowRestricted&&(e.restricted||e.deprecated)||e.level>n.level||!Eb(e,n.characterClass)||n.excludedIds.includes(e.id)||n.allowedTiers.length>0&&!n.allowedTiers.includes(e.tier)||n.minPowderSlots!=null&&e.powderSlots<n.minPowderSlots||n.excludedMajorIds.length>0&&n.excludedMajorIds.some(s=>e.majorIds.includes(s)))}const $a=2.5;function hh(e,n){const s={...n};return typeof e.minLegacyBaseDps=="number"&&(s.legacyBaseDps=Math.max(s.legacyBaseDps,ya.legacyBaseDps*$a)),typeof e.minLegacyEhp=="number"&&(s.legacyEhp=Math.max(s.legacyEhp,ya.legacyEhp*$a)),typeof e.minDpsProxy=="number"&&(s.dpsProxy=Math.max(s.dpsProxy,ya.dpsProxy*$a)),typeof e.minEhpProxy=="number"&&(s.ehpProxy=Math.max(s.ehpProxy,ya.ehpProxy*$a)),(typeof e.minMr=="number"||typeof e.minMs=="number")&&(s.sustain=Math.max(s.sustain,ya.sustain*$a)),typeof e.minSpeed=="number"&&(s.speed=Math.max(s.speed,ya.speed*$a)),typeof e.minSkillPointTotal=="number"&&(s.skillPointTotal=Math.max(s.skillPointTotal,ya.skillPointTotal*$a)),typeof e.maxReqTotal=="number"&&(s.reqTotalPenalty=Math.max(s.reqTotalPenalty,ya.reqTotalPenalty*$a)),(e.customNumericRanges?.length??0)>0&&(s.sustain=Math.max(s.sustain,ya.sustain*$a)),s}const _A=3,j0=2,C0=14;function EA(e,n){const s=n.target.customNumericRanges??[];if(n.constraintOnlyMode){let p=0;for(const y of s){const v=y.key?.trim();if(!v)continue;const b=e.numericIndex[v]??0;typeof y.min=="number"&&(p+=b*C0),typeof y.max=="number"&&(p-=b*j0)}return p-=e.roughScoreFields.reqTotal*.05,p}const i=s.some(p=>typeof p.min=="number"),r=s.filter(p=>typeof p.min=="number").length,c=i?Math.max(.15,1-r*.2):1,u=(n.weights.legacyEhp+n.weights.ehpProxy)*c;let d=e.numeric.baseDps*n.weights.legacyBaseDps*c+e.roughScoreFields.ehpProxy*u+e.roughScoreFields.offense*n.weights.dpsProxy*c+e.numeric.spd*n.weights.speed+e.roughScoreFields.utility*n.weights.sustain+e.roughScoreFields.skillPointTotal*n.weights.skillPointTotal-e.roughScoreFields.reqTotal*n.weights.reqTotalPenalty;const m=i?C0:_A;for(const p of s){const y=p.key?.trim();if(!y)continue;const v=e.numericIndex[y]??0;typeof p.min=="number"&&(d+=v*m),typeof p.max=="number"&&(d-=v*j0)}return d}function el(e){const n=e.ring1??0,s=e.ring2??0,[i,r]=n<=s?[n,s]:[s,n];return[e.helmet??0,e.chestplate??0,e.leggings??0,e.boots??0,i,r,e.bracelet??0,e.necklace??0,e.weapon??0].join("|")}function vS(e,n,s,i=.6){const r=Math.max(1,s),c=[],u=new Set,d=Math.max(1,Math.min(r,Math.round(r*i)));let m=0,p=0;const y=v=>{const b=`${v.orderIndex}|${el(v.slots)}`;return u.has(b)?!1:(u.add(b),c.push(v),!0)};for(;c.length<r&&(m<e.length||p<n.length);){if(c.length<d&&m<e.length){y(e[m]),m++;continue}if(p<n.length){y(n[p]),p++;continue}if(m<e.length){y(e[m]),m++;continue}break}return c}function yS(e,n){return xa(n)===e.category}function TA(e,n,s){const i=oa(e),r=[...new Set(s.mustIncludeIds)];for(const c of r){const u=n.itemsById.get(c);if(!u)return{slots:i,ok:!1,reasonCode:"must_include_conflict",detail:`Must-include item ${c} does not exist in catalog.`};if(!Kh(u,s))return{slots:i,ok:!1,reasonCode:"must_include_conflict",detail:`Must-include item ${u.displayName} is incompatible with current hard filters (class/level/tier/exclusions).`};if(Je.some(y=>i[y]===u.id))continue;const p=Je.filter(y=>i[y]==null&&yS(u,y))[0];if(!p)return{slots:i,ok:!1,reasonCode:"must_include_conflict",detail:`No free ${u.category} slot available to place must-include item ${u.displayName}.`};i[p]=u.id}return{slots:i,ok:!0}}function NA(e,n){const s={str:0,dex:0,int:0,def:0,agi:0};for(const r of Je){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);u&&(s.str=Math.max(s.str,u.numeric.reqStr),s.dex=Math.max(s.dex,u.numeric.reqDex),s.int=Math.max(s.int,u.numeric.reqInt),s.def=Math.max(s.def,u.numeric.reqDef),s.agi=Math.max(s.agi,u.numeric.reqAgi))}const i=M0.filter(r=>s[r]>100).sort((r,c)=>s[c]-s[r]);return i.length>0?i:M0.filter(r=>s[r]>=70).sort((r,c)=>s[c]-s[r]).slice(0,2)}function MA(e,n,s){if(s.length===0)return[];const i={str:0,dex:0,int:0,def:0,agi:0};for(const r of Je){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);u&&(i.str=Math.max(i.str,u.numeric.reqStr),i.dex=Math.max(i.dex,u.numeric.reqDex),i.int=Math.max(i.int,u.numeric.reqInt),i.def=Math.max(i.def,u.numeric.reqDef),i.agi=Math.max(i.agi,u.numeric.reqAgi))}return s.map(r=>Math.max(0,i[r]-100))}function D0(e,n){return n.map(s=>Gh(e,s))}function cr(e,n){if(e.length===0)return n.slice();const s=new Array(e.length);for(let i=0;i<e.length;i++)s[i]=(e[i]??0)+(n[i]??0);return s}function jA(e,n,s){for(let i=0;i<s.length;i++)if((e[i]??0)+(n[i]??0)<s[i])return!1;return!0}function R0(e,n){let s=0;for(let i=0;i<n.length;i++)s+=Math.max(0,n[i]-(e[i]??0));return s}function Mc(e,n){if(!e||n.length===0)return 0;let s=0;for(let i=0;i<n.length;i++){const r=e[i]??0,c=n[i];typeof c.min=="number"&&r<c.min&&(s+=c.min-r),typeof c.max=="number"&&r>c.max&&(s+=r-c.max)}return s}function k0(e,n,s,i){if(i.length===0)return 0;const r=n.get(e)??[];let c=0;for(const u of r){const d=s.itemsById.get(u.id);if(!d)continue;let m=0;for(const p of i)m+=Gh(d,p);m>c&&(c=m)}return c}function Wc(e,n={}){const s=n.includeAttackTier??!0;return(e.target.customNumericRanges??[]).map(i=>({key:(i.key??"").trim(),min:typeof i.min=="number"?i.min:void 0,max:typeof i.max=="number"?i.max:void 0})).filter(i=>i.key&&(typeof i.min=="number"||typeof i.max=="number")).filter(i=>s||i.key!=="atkTier")}function bS(e){return Wc(e,{includeAttackTier:!0}).filter(n=>n.key==="atkTier")}function mh(e){const n=e.attackSpeedConstraintMode==="or"&&e.weaponAttackSpeeds.length>0;return Wc(e,{includeAttackTier:!n})}function xS(e){if(e.length===0)return{hasConstraint:!1,minAllowed:Number.NEGATIVE_INFINITY,maxAllowed:Number.POSITIVE_INFINITY,rows:[]};let n=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;for(const i of e)typeof i.min=="number"&&(n=Math.max(n,i.min)),typeof i.max=="number"&&(s=Math.min(s,i.max));return{hasConstraint:!0,minAllowed:n,maxAllowed:s,rows:e}}function CA(e,n){return n.hasConstraint?e>=n.minAllowed&&e<=n.maxAllowed:!1}function DA(e,n,s,i,r){if(!e.hasConstraint)return!1;const c=n+s+Math.min(i,r),u=n+s+Math.max(i,r);return c<=e.maxAllowed&&u>=e.minAllowed}function RA(e){const{constraints:n,slots:s,catalog:i,atkTierRequirement:r}=e,c=n.weaponAttackSpeeds.length>0,u=r.hasConstraint;if(!c&&!u)return{configured:!1,ok:!0};const d=[];let m=!1;if(c){const b=bA(s,i);m=!!(b&&n.weaponAttackSpeeds.includes(b)),m||d.push(`attackSpeed (expected ${n.weaponAttackSpeeds.join("/")} )`)}let p=!1;if(u){const b=Yh(s,i);if(p=CA(b,r),!p){const S=Number.isFinite(r.minAllowed)?r.minAllowed:"-inf",_=Number.isFinite(r.maxAllowed)?r.maxAllowed:"+inf";d.push(`atkTier (${b} not in [${S}, ${_}])`)}}const y=n.attackSpeedConstraintMode;return(c&&u?y==="and"?m&&p:m||p:c?m:p)?{configured:!0,ok:!0}:{configured:!0,ok:!1,failedChecks:d}}function jc(e){const{constraints:n,attackSpeedCtx:s,atkTierRequirement:i,fixedAtkTierTotal:r,partialAssignedAtkTier:c,remainingMinAtkTier:u,remainingMaxAtkTier:d}=e,m=n.weaponAttackSpeeds.length>0,p=i.hasConstraint;if(!m&&!p)return!0;const y=m?s?SA(s,c,u,d):!0:!1,v=p?DA(i,r,c,u,d):!1;return m&&p?n.attackSpeedConstraintMode==="and"?y&&v:y||v:m?y:v}function tc(e,n,s){const i=n.itemsById.get(e.id);return i?i.numericIndex[s]??0:0}function Cc(e,n,s){const i=s.map(()=>0);if(s.length===0)return i;for(const r of Je){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);if(u)for(let d=0;d<s.length;d++)i[d]+=u.numericIndex[s[d]]??0}return i}function ph(e){const{slotOrder:n,candidatePools:s,catalog:i,keys:r}=e,c=Array.from({length:n.length+1},()=>r.map(()=>0)),u=Array.from({length:n.length+1},()=>r.map(()=>0));if(r.length===0)return{maxSuffix:c,minSuffix:u};for(let d=n.length-1;d>=0;d--){const m=s.get(n[d])??[],p=r.map(()=>Number.NEGATIVE_INFINITY),y=r.map(()=>Number.POSITIVE_INFINITY);for(const v of m){const b=i.itemsById.get(v.id);if(b)for(let S=0;S<r.length;S++){const _=b.numericIndex[r[S]]??0;_>p[S]&&(p[S]=_),_<y[S]&&(y[S]=_)}}for(let v=0;v<r.length;v++){const b=Number.isFinite(p[v])?p[v]:0,S=Number.isFinite(y[v])?y[v]:0;c[d][v]=c[d+1][v]+b,u[d][v]=u[d+1][v]+S}}return{maxSuffix:c,minSuffix:u}}function kA(e,n,s,i,r=[]){const c=[],u=Wc(s);for(const M of n.items)yS(M,e)&&(i&&!i.has(M.id)||Kh(M,s)&&c.push({id:M.id,rough:EA(M,s),reqTotal:M.roughScoreFields.reqTotal,skillPointTotal:M.roughScoreFields.skillPointTotal,utility:M.roughScoreFields.utility+M.numeric.spd*.8,level:M.level,atkTier:Ya(M),spStr:M.numeric.spStr,spDex:M.numeric.spDex,spInt:M.numeric.spInt,spDef:M.numeric.spDef,spAgi:M.numeric.spAgi,supportFocus:yA(M,r)}));const d=[...c].sort((M,C)=>M.rough!==C.rough?C.rough-M.rough:M.id-C.id),m=[...c].sort((M,C)=>M.reqTotal!==C.reqTotal?M.reqTotal-C.reqTotal:M.level!==C.level?M.level-C.level:M.id-C.id),p=[...c].sort((M,C)=>M.skillPointTotal!==C.skillPointTotal?C.skillPointTotal-M.skillPointTotal:M.reqTotal!==C.reqTotal?M.reqTotal-C.reqTotal:M.id-C.id),y=[...c].sort((M,C)=>M.utility!==C.utility?C.utility-M.utility:M.reqTotal!==C.reqTotal?M.reqTotal-C.reqTotal:M.id-C.id),v=s.weaponAttackSpeeds.length>0?[...c].sort((M,C)=>{const D=Math.max(0,M.atkTier),Z=Math.max(0,C.atkTier);return D!==Z?Z-D:M.atkTier!==C.atkTier?C.atkTier-M.atkTier:M.reqTotal!==C.reqTotal?M.reqTotal-C.reqTotal:M.skillPointTotal!==C.skillPointTotal?C.skillPointTotal-M.skillPointTotal:M.id-C.id}):[],b=r.length>0?[...c].sort((M,C)=>M.supportFocus!==C.supportFocus?C.supportFocus-M.supportFocus:M.reqTotal!==C.reqTotal?M.reqTotal-C.reqTotal:M.skillPointTotal!==C.skillPointTotal?C.skillPointTotal-M.skillPointTotal:M.id-C.id):[],S=r.map(M=>[...c].sort((C,D)=>{const Z=M==="str"?C.spStr:M==="dex"?C.spDex:M==="int"?C.spInt:M==="def"?C.spDef:C.spAgi,re=M==="str"?D.spStr:M==="dex"?D.spDex:M==="int"?D.spInt:M==="def"?D.spDef:D.spAgi;return Z!==re?re-Z:C.reqTotal!==D.reqTotal?C.reqTotal-D.reqTotal:C.supportFocus!==D.supportFocus?D.supportFocus-C.supportFocus:C.id-D.id})),_=u.filter(M=>typeof M.min=="number").map(M=>[...c].sort((C,D)=>{const Z=tc(C,n,M.key),re=tc(D,n,M.key);return Z!==re?re-Z:C.reqTotal!==D.reqTotal?C.reqTotal-D.reqTotal:C.skillPointTotal!==D.skillPointTotal?D.skillPointTotal-C.skillPointTotal:C.id-D.id})),T=u.filter(M=>typeof M.max=="number").map(M=>[...c].sort((C,D)=>{const Z=tc(C,n,M.key),re=tc(D,n,M.key);return Z!==re?Z-re:C.reqTotal!==D.reqTotal?C.reqTotal-D.reqTotal:C.skillPointTotal!==D.skillPointTotal?D.skillPointTotal-C.skillPointTotal:C.id-D.id})),j=Math.max(10,s.topKPerSlot),k=Math.min(140,Math.max(40,Math.floor(j*.8))),R=Math.min(c.length,j+k+(r.length>0?Math.min(60,r.length*12):0)+Math.min(80,u.length*14)),P=new Map,B=Math.min(12,Math.floor(j*.4),d.length);for(let M=0;M<B;M++){const C=d[M];P.set(C.id,{id:C.id,rough:C.rough})}const q=[{list:d,remaining:Math.max(0,j-B),cursor:0},{list:m,remaining:Math.floor(k*.28),cursor:0},{list:p,remaining:Math.floor(k*.24),cursor:0},{list:y,remaining:Math.floor(k*.18),cursor:0}];v.length>0&&q.push({list:v,remaining:Math.max(18,Math.floor(k*.22)),cursor:0}),b.length>0&&q.push({list:b,remaining:Math.max(16,Math.floor(k*.2)),cursor:0});for(const M of S)q.push({list:M,remaining:10,cursor:0});for(const M of _)q.push({list:M,remaining:35,cursor:0});for(const M of T)q.push({list:M,remaining:20,cursor:0});for(;P.size<R;){let M=!1;for(const C of q)if(!(C.remaining<=0))for(;C.cursor<C.list.length;){const D=C.list[C.cursor++];if(!P.has(D.id)){P.set(D.id,{id:D.id,rough:D.rough}),C.remaining--,M=!0;break}}if(!M)break}if(P.size<R)for(const M of d){if(P.size>=R)break;P.has(M.id)||P.set(M.id,{id:M.id,rough:M.rough})}return[...P.values()]}function AA(e){const n={};for(const s of Je){const i=xa(s),r=new Set(e.binsByCategory[i]??[]),c=e.slots[s];c!=null&&r.add(c),n[s]=r}return n}function Wh(e,n,s){if(s.length===0)return!0;const i=new Set;for(const r of Je){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);if(u)for(const d of u.majorIds)s.includes(d)&&i.add(d)}return s.every(r=>i.has(r))}function SS(e,n){const s=new Array(e.length+1).fill(0);for(let i=e.length-1;i>=0;i--){const r=e[i],c=n.get(r)??[];let u=0;for(const d of c)d.rough>u&&(u=d.rough);s[i]=s[i+1]+u}return s}function wS(e){const{poolSize:n,beamSize:s,remainingStages:i,processedStates:r,maxStates:c}=e;if(n<=0)return 0;const u=Math.max(0,c-r),d=Math.max(1,s*Math.max(1,i)),m=Math.floor(u/d),p=Math.max(8,Math.min(96,m));return Math.min(n,p)}function OA(e,n,s){let i=1;for(const r of e){const c=n.get(r)?.length??0;if(c===0)return 0;if(i*=c,i>s)return i}return i}function A0(e){const{beam:n,catalog:s,constraints:i,skillpointFeasibilityOptions:r,signal:c}=e,u=r??Kc(i),d=[],m=new Set,p={majorIds:0,spInvalid:0,duplicate:0,hardConstraints:0,hardAttackSpeed:0,hardThresholds:0,hardItem:0,thresholdFailureExample:void 0};for(const y of n){if(c?.aborted)throw new DOMException("Auto build cancelled","AbortError");if(!Wh(y.slots,s,i.requiredMajorIds)){p.majorIds++;continue}const v=nl({slots:y.slots,level:i.level,characterClass:i.characterClass},s,{skillpointFeasibility:u});if(!v.derived.skillpointFeasible){p.spInvalid++;continue}const b=Vh(y.slots,s,i,v);if(!b.ok){p.hardConstraints++,b.reason==="attackSpeed"?p.hardAttackSpeed++:b.reason==="thresholds"?(p.hardThresholds++,p.thresholdFailureExample===void 0&&b.failedChecks?.length&&(p.thresholdFailureExample=b.failedChecks[0])):p.hardItem++;continue}const S=el(y.slots);if(m.has(S)){p.duplicate++;continue}const{score:_,breakdown:T}=Yc(v,i.weights,i);m.add(S),d.push({slots:oa(y.slots),score:_,scoreBreakdown:T,summary:v})}return d.sort((y,v)=>{if(y.score!==v.score)return v.score-y.score;for(const b of Je){const S=y.slots[b]??0,_=v.slots[b]??0;if(S!==_)return S-_}return 0}),{candidates:d,rejectStats:p}}function zA(e){const{slotOrder:n,candidatePools:s,baseSlots:i,catalog:r,constraints:c,focusStats:u,attackSpeedCtx:d,atkTierRequirement:m,fixedAtkTierTotal:p,onProgress:y,signal:v}=e,b=Kc(c),S=SS(n,s),_=d||m.hasConstraint?Nc(n,s,r):null,T=MA(i,r,u),j=Array.from({length:n.length+1},()=>u.map(()=>0));for(let D=n.length-1;D>=0;D--){const Z=s.get(n[D])??[],re=u.map(()=>0);for(const fe of Z){const ae=r.itemsById.get(fe.id);if(!ae)continue;const ce=D0(ae,u);for(let $=0;$<ce.length;$++)ce[$]>re[$]&&(re[$]=ce[$])}j[D]=cr(j[D+1],re)}const k=mh(c),R=k.map(D=>D.key),P=ph({slotOrder:n,candidatePools:s,catalog:r,keys:R}),B=Cc(i,r,R);let q=[{slots:oa(i),orderIndex:0,roughScore:0,optimisticBound:S[0],feasibilityAssigned:0,focusSupport:u.map(()=>0),atkTierAssigned:0,customTotals:B}],M=0,C=!1;for(let D=0;D<n.length;D++){if(v?.aborted)throw new DOMException("Auto build cancelled","AbortError");const Z=n[D],re=s.get(Z)??[],fe=[],ae=wS({poolSize:re.length,beamSize:q.length,remainingStages:n.length-D,processedStates:M,maxStates:c.maxStates});ae<=0&&(C=!0);for(const ee of q){let A=0;for(const Y of re){if(A>=ae)break;if(M>=c.maxStates){C=!0;break}if(M++,A++,Vc(Y.id,ee.slots,r))continue;const N=oa(ee.slots);N[Z]=Y.id;const z=r.itemsById.get(Y.id),X=(ee.atkTierAssigned??0)+(z?Ya(z):0),ue=cr(ee.focusSupport??u.map(()=>0),z?D0(z,u):u.map(()=>0)),oe=R.length>0?cr(ee.customTotals??R.map(()=>0),R.map(De=>z?z.numericIndex[De]??0:0)):void 0;if(_&&!jc({constraints:c,attackSpeedCtx:d??null,atkTierRequirement:m,fixedAtkTierTotal:p,partialAssignedAtkTier:X,remainingMinAtkTier:_.minSuffix[D+1],remainingMaxAtkTier:_.maxSuffix[D+1]})||u.length>0&&!jA(ue,j[D+1],T))continue;if(k.length>0&&oe){let De=!0;for(let me=0;me<k.length;me++){const we=k[me],Re=oe[me];if(typeof we.min=="number"&&Re+P.maxSuffix[D+1][me]<we.min){De=!1;break}if(typeof we.max=="number"&&Re+P.minSuffix[D+1][me]>we.max){De=!1;break}}if(!De)continue}const le=Hc(N,r,c.level,b),be=ee.roughScore+Y.rough;fe.push({slots:N,orderIndex:D+1,roughScore:be,optimisticBound:be+S[D+1],feasibilityAssigned:le.feasible?le.assignedTotal:1/0,focusSupport:ue,atkTierAssigned:X,customTotals:oe})}if(C)break}if(fe.length===0)return y?.({phase:"diagnostics",processedStates:M,beamSize:q.length,totalSlots:n.length,expandedSlots:D,reasonCode:"search_pruned",detail:C?`Feasibility-first search exhausted state budget before completing slot ${Z}.`:`Feasibility-first search found no branches that can still satisfy high-skill requirements by slot ${Z}.`}),{beam:[],processedStates:M,stateBudgetHit:C};const ce=_?_.minSuffix[D+1]:0,$=_?_.maxSuffix[D+1]:0,W=c.constraintOnlyMode?10:1,L=[...fe].sort((ee,A)=>{if(d){const z=Es(d,ee.atkTierAssigned,ce,$,W),X=Es(d,A.atkTierAssigned,ce,$,W);if(z!==X)return X-z}if(u.length>0){const z=R0(ee.focusSupport??[],T),X=R0(A.focusSupport??[],T);if(z!==X)return z-X}const Y=ee.feasibilityAssigned??1/0,N=A.feasibilityAssigned??1/0;return Y!==N?Y-N:ee.optimisticBound!==A.optimisticBound?A.optimisticBound-ee.optimisticBound:ee.roughScore!==A.roughScore?A.roughScore-ee.roughScore:0}),Q=[...fe].sort((ee,A)=>{const Y=Mc(ee.customTotals,k),N=Mc(A.customTotals,k);if(Y!==N)return Y-N;if(d){const z=Es(d,ee.atkTierAssigned,ce,$,W),X=Es(d,A.atkTierAssigned,ce,$,W);if(z!==X)return X-z}return A.optimisticBound-ee.optimisticBound});q=vS(L,Q,Math.max(40,c.beamWidth)),y?.({phase:"beam-search",processedStates:M,beamSize:q.length,totalSlots:n.length,expandedSlots:D+1,detail:`feasibility-first | branchCap=${ae}${u.length>0?` | focus=${u.join("/")}`:""}${d?` | atkSpeed=${c.weaponAttackSpeeds.join("/")}`:""}`,previewCandidates:gS(q,r,c,2)})}return{beam:q,processedStates:M,stateBudgetHit:C}}function PA(e){const{slotOrder:n,candidatePools:s,baseSlots:i,catalog:r,constraints:c,signal:u,onProgress:d}=e,m=Kc(c),p=[],y=new Set;let v=0,b=0,S=0,_=0,T=0,j=0,k=0,R=0;const P=(B,q)=>{if(u?.aborted)throw new DOMException("Auto build cancelled","AbortError");if(v>c.maxStates)return;if(B>=n.length){if(!Wh(q,r,c.requiredMajorIds)){b++;return}const D=nl({slots:q,level:c.level,characterClass:c.characterClass},r,{skillpointFeasibility:m});if(!D.derived.skillpointFeasible){S++;return}const Z=Vh(q,r,c,D);if(!Z.ok){T++,Z.reason==="attackSpeed"?j++:Z.reason==="thresholds"?k++:R++;return}const re=el(q);if(y.has(re)){_++;return}y.add(re);const{score:fe,breakdown:ae}=Yc(D,c.weights,c);p.push({slots:oa(q),score:fe,scoreBreakdown:ae,summary:D});return}const M=n[B],C=s.get(M)??[];for(const D of C){if(v++,v>c.maxStates)break;Vc(D.id,q,r)||(q[M]=D.id,v%2e3===0&&d?.({phase:"exact-search",processedStates:v,beamSize:0,totalSlots:n.length,expandedSlots:B+1}),P(B+1,q))}q[M]=null};return P(0,oa(i)),d?.({phase:"diagnostics",processedStates:v,beamSize:0,totalSlots:n.length,expandedSlots:n.length,detail:p.length>0?`Exact search produced ${p.length} valid builds. Rejected duplicates=${_}, SP-invalid=${S}, majorID=${b}, hard=${T} (speed=${j}, thresholds=${k}, item=${R}).`:`Exact search produced 0 valid builds. Rejected SP-invalid=${S}, majorID=${b}, duplicates=${_}, hard=${T} (speed=${j}, thresholds=${k}, item=${R}).`}),p.sort((B,q)=>{if(B.score!==q.score)return q.score-B.score;for(const M of Je){const C=B.slots[M]??0,D=q.slots[M]??0;if(C!==D)return C-D}return 0}),p.slice(0,Math.max(1,c.topN))}function IA(e){const{slotOrder:n,candidatePools:s,baseSlots:i,catalog:r,constraints:c,attackSpeedCtx:u,atkTierRequirement:d,fixedAtkTierTotal:m,customSpecs:p,customBounds:y,signal:v,timeCapMs:b=2e3}=e,S=Kc(c),_=new Map;for(const D of n){const Z=s.get(D)??[];_.set(D,[...Z].sort((re,fe)=>re.rough!==fe.rough?fe.rough-re.rough:re.id-fe.id))}const T=u||d.hasConstraint?Nc(n,s,r):null,j=p.map(D=>D.key),k=Cc(i,r,j),R=Date.now();let P=!1,B=0;const q=new Set,M=[],C=(D,Z,re,fe)=>{if(P)return;if(v?.aborted)throw new DOMException("Auto build cancelled","AbortError");if(Date.now()-R>=b){P=!0;return}if(M.length>=Math.max(1,c.topN))return;if(D>=n.length){if(!Wh(Z,r,c.requiredMajorIds))return;const $=nl({slots:Z,level:c.level,characterClass:c.characterClass},r,{skillpointFeasibility:S});if(!$.derived.skillpointFeasible||!Vh(Z,r,c,$).ok)return;const L=el(Z);if(q.has(L))return;q.add(L);const{score:Q,breakdown:ee}=Yc($,c.weights,c);M.push({slots:oa(Z),score:Q,scoreBreakdown:ee,summary:$});return}const ae=n[D],ce=_.get(ae)??[];for(const $ of ce){if(P)break;if(B++,Vc($.id,Z,r))continue;const W=oa(Z);W[ae]=$.id;const L=r.itemsById.get($.id),Q=re+(L?Ya(L):0);if(T&&!jc({constraints:c,attackSpeedCtx:u,atkTierRequirement:d,fixedAtkTierTotal:m,partialAssignedAtkTier:Q,remainingMinAtkTier:T.minSuffix[D+1],remainingMaxAtkTier:T.maxSuffix[D+1]}))continue;const ee=j.length>0?cr(fe??j.map(()=>0),j.map(Y=>L?L.numericIndex[Y]??0:0)):void 0;if(p.length>0&&ee){let Y=!0;for(let N=0;N<p.length;N++){const z=p[N],X=ee[N];if(typeof z.min=="number"&&X+y.maxSuffix[D+1][N]<z.min){Y=!1;break}if(typeof z.max=="number"&&X+y.minSuffix[D+1][N]>z.max){Y=!1;break}}if(!Y)continue}Hc(W,r,c.level,S).feasible&&C(D+1,W,Q,ee)}};return C(0,oa(i),0,k),M.sort((D,Z)=>D.score!==Z.score?Z.score-D.score:el(D.slots).localeCompare(el(Z.slots))),{candidates:M.slice(0,Math.max(1,c.topN)),processedStates:B,timedOut:P}}function _S(e){const{catalog:n,baseWorkbench:s,constraints:i,onProgress:r,signal:c,alreadyThresholdRescue:u}=e;if(c?.aborted)throw new DOMException("Auto build cancelled","AbortError");let d=oa(s.slots);for(const A of Je)i.lockedSlots[A]||(d[A]=null);const m=TA(d,n,i);if(!m.ok)return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:0,expandedSlots:0,reasonCode:m.reasonCode??"must_include_conflict",detail:m.detail??"Must-include assignment failed before search started."}),[];d=m.slots;const p=NA(d,n),y=Je.filter(A=>d[A]==null),v=i.onlyPinnedItems?AA(s):null,b=new Map;for(const A of y)b.set(A,kA(A,n,i,v?.[A]??null,p));const S=xA(d,n,i),_=xS(bS(i)),T=Yh(d,n),j=mh(i),k=j.some(A=>typeof A.min=="number"),R=[...y].sort((A,Y)=>{if(S?.preferredDirection){const X=b.get(A)??[],ue=b.get(Y)??[],oe=X.reduce((be,De)=>{const me=n.itemsById.get(De.id);if(!me)return be;const we=Ya(me),Re=S.preferredDirection>0?Math.max(0,we):Math.max(0,-we);return Math.max(be,Re)},0),le=ue.reduce((be,De)=>{const me=n.itemsById.get(De.id);if(!me)return be;const we=Ya(me),Re=S.preferredDirection>0?Math.max(0,we):Math.max(0,-we);return Math.max(be,Re)},0);if(oe!==le)return le-oe}if(p.length>0){const X=k0(A,b,n,p),ue=k0(Y,b,n,p);if(X!==ue)return ue-X}if(k){const X=["ring1","ring2","bracelet","necklace"],ue=X.includes(A),oe=X.includes(Y);if(ue!==oe)return ue?-1:1}const N=b.get(A)?.length??0,z=b.get(Y)?.length??0;return N!==z?N-z:A.localeCompare(Y)}),P=SS(R,b);if(R.some(A=>(b.get(A)?.length??0)===0)){const A=R.find(Y=>(b.get(Y)?.length??0)===0);return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"empty_pool",detail:A?`No candidate items available for slot ${A} under current hard filters.`:"One or more slots have empty candidate pools."}),[]}if(_.hasConstraint&&_.minAllowed>_.maxAllowed)return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"unsat_attack_target",detail:`Attack target is unsatisfiable: atkTier min (${_.minAllowed}) exceeds atkTier max (${_.maxAllowed}).`}),[];if(j.length>0){const A=j.map(z=>z.key),Y=ph({slotOrder:R,candidatePools:b,catalog:n,keys:A}),N=Cc(d,n,A);for(let z=0;z<j.length;z++){const X=j[z],ue=N[z]+Y.minSuffix[0][z],oe=N[z]+Y.maxSuffix[0][z];if(typeof X.min=="number"&&oe<X.min)return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"unsat_threshold",detail:`Unsatisfiable threshold: ${X.key} min ${X.min} is above maximum reachable total ${oe}.`}),[];if(typeof X.max=="number"&&ue>X.max)return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"unsat_threshold",detail:`Unsatisfiable threshold: ${X.key} max ${X.max} is below minimum reachable total ${ue}.`}),[]}}const B=S||_.hasConstraint?Nc(R,b,n):null;if(B&&!jc({constraints:i,attackSpeedCtx:S??null,atkTierRequirement:_,fixedAtkTierTotal:T,partialAssignedAtkTier:0,remainingMinAtkTier:B.minSuffix[0],remainingMaxAtkTier:B.maxSuffix[0]}))return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"unsat_attack_target",detail:"Attack-speed / atkTier target cannot be reached from current candidate pools."}),[];const q=OA(R,b,i.exhaustiveStateLimit+1);if(i.useExhaustiveSmallPool&&R.length>0&&q>0&&q<=i.exhaustiveStateLimit){r?.({phase:"exact-search",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0});const A={...i,maxStates:Math.max(i.maxStates,i.exhaustiveStateLimit)};return PA({slotOrder:R,candidatePools:b,baseSlots:d,catalog:n,constraints:A,signal:c,onProgress:r})}const M=mh(i),C=M.map(A=>A.key),D=ph({slotOrder:R,candidatePools:b,catalog:n,keys:C});let Z=[{slots:d,orderIndex:0,roughScore:0,optimisticBound:P[0],atkTierAssigned:0,customTotals:Cc(d,n,C)}];const re=S||_.hasConstraint?Nc(R,b,n):null;let fe=0,ae=!1;for(let A=0;A<R.length;A++){if(c?.aborted)throw new DOMException("Auto build cancelled","AbortError");const Y=R[A],N=b.get(Y),z=[],X=wS({poolSize:N.length,beamSize:Z.length,remainingStages:R.length-A,processedStates:fe,maxStates:i.maxStates});X<=0&&(ae=!0);for(const me of Z){let we=0;for(const Re of N){if(we>=X)break;if(fe>=i.maxStates){ae=!0;break}if(fe++,we++,Vc(Re.id,me.slots,n))continue;const Xe=oa(me.slots);Xe[Y]=Re.id;const Wt=me.roughScore+Re.rough,et=n.itemsById.get(Re.id),ln=(me.atkTierAssigned??0)+(et?Ya(et):0),Nt=C.length>0?cr(me.customTotals??C.map(()=>0),C.map(rn=>et?et.numericIndex[rn]??0:0)):void 0;if(!(re&&!jc({constraints:i,attackSpeedCtx:S??null,atkTierRequirement:_,fixedAtkTierTotal:T,partialAssignedAtkTier:ln,remainingMinAtkTier:re.minSuffix[A+1],remainingMaxAtkTier:re.maxSuffix[A+1]}))){if(M.length>0&&Nt){let rn=!0;for(let Xt=0;Xt<M.length;Xt++){const Mt=M[Xt],de=Nt[Xt];if(typeof Mt.min=="number"&&de+D.maxSuffix[A+1][Xt]<Mt.min){rn=!1;break}if(typeof Mt.max=="number"&&de+D.minSuffix[A+1][Xt]>Mt.max){rn=!1;break}}if(!rn)continue}z.push({slots:Xe,orderIndex:A+1,roughScore:Wt,optimisticBound:Wt+P[A+1],atkTierAssigned:ln,customTotals:Nt})}}if(ae)break}if(z.length===0)return r?.({phase:"diagnostics",processedStates:fe,beamSize:Z.length,totalSlots:R.length,expandedSlots:A,reasonCode:"search_pruned",detail:ae?`Search state budget exhausted before completing slot ${Y}. Try enabling deep fallback/exact mode or reduce hard filters.`:`No expansions produced at slot ${Y}.`}),[];const ue=re?re.minSuffix[A+1]:0,oe=re?re.maxSuffix[A+1]:0,le=i.constraintOnlyMode?10:1,be=[...z].sort((me,we)=>{if(S){const Re=Es(S,me.atkTierAssigned,ue,oe,le),Xe=Es(S,we.atkTierAssigned,ue,oe,le);if(Re!==Xe)return Xe-Re}return me.optimisticBound!==we.optimisticBound?we.optimisticBound-me.optimisticBound:we.roughScore-me.roughScore}),De=[...z].sort((me,we)=>{const Re=Mc(me.customTotals,M),Xe=Mc(we.customTotals,M);if(Re!==Xe)return Re-Xe;if(S){const Wt=Es(S,me.atkTierAssigned,ue,oe,le),et=Es(S,we.atkTierAssigned,ue,oe,le);if(Wt!==et)return et-Wt}return we.optimisticBound-me.optimisticBound});Z=vS(be,De,Math.max(20,i.beamWidth)),r?.({phase:"beam-search",processedStates:fe,beamSize:Z.length,totalSlots:R.length,expandedSlots:A+1,detail:`branchCap=${X}${S?.preferredDirection?` | atkSpeedTarget=${i.weaponAttackSpeeds.join("/")}`:""}`,previewCandidates:gS(Z,n,i,2)})}let ce=Z,{candidates:$,rejectStats:W}=A0({beam:Z,catalog:n,constraints:i,signal:c});const L=W.thresholdFailureExample?` Example failure: ${W.thresholdFailureExample}.`:"",Q=$.length>0?void 0:W.spInvalid>0&&W.hardConstraints===0?"sp_infeasible":W.hardThresholds>0?"unsat_threshold":W.hardAttackSpeed>0?"unsat_attack_target":void 0;r?.({phase:"diagnostics",processedStates:fe,beamSize:Z.length,totalSlots:R.length,expandedSlots:R.length,reasonCode:Q,detail:$.length>0?`Final eval: ${$.length} valid builds. Rejected duplicates=${W.duplicate}, SP-invalid=${W.spInvalid}, majorID=${W.majorIds}, hard=${W.hardConstraints}.`:`Final eval found 0 valid builds. Rejected SP-invalid=${W.spInvalid}, majorID=${W.majorIds}, duplicates=${W.duplicate}, hard=${W.hardConstraints} (speed=${W.hardAttackSpeed}, thresholds=${W.hardThresholds}, item=${W.hardItem}).${L}`});const ee=i.weaponAttackSpeeds.length>0||_.hasConstraint;if($.length===0&&R.length>0&&(W.spInvalid>0||ee&&W.hardAttackSpeed>0||W.hardThresholds>0)){const A=W.hardThresholds>0;r?.({phase:"diagnostics",processedStates:fe,beamSize:Z.length,totalSlots:R.length,expandedSlots:R.length,detail:A&&i.target.customNumericRanges?.length?"Retrying with threshold-aware rescue (advanced ID constraints + support-aware feasibility search).":W.hardAttackSpeed>0?"Retrying with feasibility-first beam search (support-aware rescue + attack target reachability).":"Retrying with feasibility-first beam search (support-aware rescue for high-skill requirements)."});const Y={...i,maxStates:Math.max(i.maxStates,A?Math.min(18e6,i.maxStates*5):ee?Math.min(16e6,i.maxStates*4):Math.min(8e6,i.maxStates*2)),beamWidth:Math.max(i.beamWidth,A?3600:ee?3200:1800)};A&&(Y.weights=hh(i.target,i.weights));const N=zA({slotOrder:R,candidatePools:b,baseSlots:d,catalog:n,constraints:Y,focusStats:p,attackSpeedCtx:S,atkTierRequirement:_,fixedAtkTierTotal:T,onProgress:r,signal:c});if(N.beam.length>0){ce=N.beam;const z=A0({beam:N.beam,catalog:n,constraints:i,signal:c});$=z.candidates,W=z.rejectStats;const X=W.thresholdFailureExample?` Example failure: ${W.thresholdFailureExample}.`:"";r?.({phase:"diagnostics",processedStates:N.processedStates,beamSize:N.beam.length,totalSlots:R.length,expandedSlots:R.length,detail:$.length>0?`Feasibility-first eval: ${$.length} valid builds. Rejected duplicates=${W.duplicate}, SP-invalid=${W.spInvalid}, majorID=${W.majorIds}, hard=${W.hardConstraints}.`:`Feasibility-first eval still found 0 valid builds. Rejected SP-invalid=${W.spInvalid}, majorID=${W.majorIds}, duplicates=${W.duplicate}, hard=${W.hardConstraints} (speed=${W.hardAttackSpeed}, thresholds=${W.hardThresholds}, item=${W.hardItem}).${X}`})}}if($.length===0&&W.hardThresholds>0&&!u){const A=i.target;if(typeof A.minLegacyBaseDps=="number"||typeof A.minLegacyEhp=="number"||typeof A.minDpsProxy=="number"||typeof A.minEhpProxy=="number"||typeof A.minMr=="number"||typeof A.minMs=="number"||typeof A.minSpeed=="number"||typeof A.minSkillPointTotal=="number"||typeof A.maxReqTotal=="number"||(A.customNumericRanges?.length??0)>0){r?.({phase:"diagnostics",processedStates:fe,beamSize:ce.length,totalSlots:R.length,expandedSlots:R.length,detail:"Retrying with threshold-biased beam search (weights tuned to target min/max)."});const N={...i,weights:hh(i.target,i.weights),beamWidth:Math.max(i.beamWidth,3600),maxStates:Math.max(i.maxStates,Math.min(18e6,i.maxStates*5))},z=_S({catalog:n,baseWorkbench:s,constraints:N,onProgress:r,signal:c,alreadyThresholdRescue:!0});if(z.length>0)return r?.({phase:"diagnostics",processedStates:fe,beamSize:z.length,totalSlots:R.length,expandedSlots:R.length,detail:`Threshold rescue: ${z.length} valid builds.`}),z.slice(0,Math.max(1,i.topN))}}if($.length===0&&R.length>0){r?.({phase:"diagnostics",processedStates:fe,beamSize:ce.length,totalSlots:R.length,expandedSlots:R.length,reasonCode:"search_pruned",detail:"Running deterministic fallback search (2s cap) before returning no candidates."});const A=IA({slotOrder:R,candidatePools:b,baseSlots:d,catalog:n,constraints:i,attackSpeedCtx:S??null,atkTierRequirement:_,fixedAtkTierTotal:T,customSpecs:M,customBounds:D,signal:c,timeCapMs:2e3});if(A.candidates.length>0)$=A.candidates,r?.({phase:"diagnostics",processedStates:fe+A.processedStates,beamSize:A.candidates.length,totalSlots:R.length,expandedSlots:R.length,detail:`Deterministic fallback recovered ${A.candidates.length} valid build(s).`});else{const Y=A.timedOut?"fallback_timeout":W.spInvalid>0&&W.hardConstraints===0?"sp_infeasible":W.hardThresholds>0?"unsat_threshold":W.hardAttackSpeed>0?"unsat_attack_target":"search_pruned";r?.({phase:"diagnostics",processedStates:fe+A.processedStates,beamSize:0,totalSlots:R.length,expandedSlots:R.length,reasonCode:Y,detail:A.timedOut?"Deterministic fallback timed out after 2 seconds with no valid candidates.":`Deterministic fallback found 0 valid builds. Rejected SP-invalid=${W.spInvalid}, majorID=${W.majorIds}, duplicates=${W.duplicate}, hard=${W.hardConstraints} (speed=${W.hardAttackSpeed}, thresholds=${W.hardThresholds}, item=${W.hardItem}).${W.thresholdFailureExample?` Example failure: ${W.thresholdFailureExample}.`:""}`})}}return $.slice(0,Math.max(1,i.topN))}class BA{worker=null;requestId=0;currentReject=null;currentRequestId=null;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL(""+new URL("worker-runtime-DQBU_pLl.js",import.meta.url).href,import.meta.url),{type:"module"}))}async run(n,s,i,r={}){if(!this.worker)return _S({catalog:n,baseWorkbench:s,constraints:i,onProgress:r.onProgress,signal:r.signal});const c=++this.requestId;return this.currentRequestId=c,new Promise((u,d)=>{this.currentReject=d;const m=()=>{this.worker?.postMessage({type:"cancel",requestId:c}),d(new DOMException("Auto build cancelled","AbortError"))};r.signal?.addEventListener("abort",m,{once:!0});const p=y=>{const v=y.data;if(v.requestId===c){if(v.type==="progress"){r.onProgress?.(v.progress);return}if(this.worker?.removeEventListener("message",p),r.signal?.removeEventListener("abort",m),this.currentReject=null,this.currentRequestId=null,v.type==="error"){d(new Error(v.message));return}u(v.candidates)}};this.worker.addEventListener("message",p),this.worker.postMessage({type:"run",requestId:c,catalog:n,baseWorkbench:s,constraints:i})})}cancelCurrent(){this.currentRequestId!==null&&(this.worker?.postMessage({type:"cancel",requestId:this.currentRequestId}),this.currentReject?.(new DOMException("Auto build cancelled","AbortError")),this.currentReject=null,this.currentRequestId=null)}dispose(){this.worker?.terminate(),this.worker=null}}function O0(e,n){const s=e.split(",").map(c=>c.trim()).filter(Boolean),i=[],r=[];for(const c of s){const u=n.itemIdByName.get(c.toLowerCase());u==null?r.push(c):i.push(u)}return{ids:i,unknown:r}}function Hi(e,n){return e.split(",").map(s=>s.trim()).filter(Boolean).map(s=>n?n(s):s)}function nc(e,n){return e.includes(n)?e.filter(s=>s!==n):[...e,n]}function Lf(e){if(!e)return null;const n=/SP-invalid=(\d+)/i.exec(e),s=/majorID=(\d+)/i.exec(e),i=/duplicates?=(\d+)/i.exec(e),r=/hard=(\d+)/i.exec(e),c=/speed=(\d+)/i.exec(e),u=/thresholds=(\d+)/i.exec(e),d=/item=(\d+)/i.exec(e);return r?{spInvalid:n?Number(n[1]):0,majorIds:s?Number(s[1]):0,duplicate:i?Number(i[1]):0,hard:Number(r[1]),speed:c?Number(c[1]):0,thresholds:u?Number(u[1]):0,item:d?Number(d[1]):0}:null}const LA=["SUPER_SLOW","VERY_SLOW","SLOW","NORMAL","FAST","VERY_FAST","SUPER_FAST"],qA={constraints:"Advanced IDs only",spell:"Spell Damage",melee:"Melee",mobility:"Mobility",tank:"Tank / EHP"},UA=["constraints","spell","melee","mobility","tank"],z0={auto:"All",fast:"Fast",constraint:"Constraint-first",exhaustive:"Exhaustive-ish"},$A=["auto","fast","constraint","exhaustive"],HA={hp:"Health",hpBonus:"Health Bonus",hprRaw:"Raw Health Regen",hprPct:"Health Regen %",mr:"Mana Regen",ms:"Mana Steal",ls:"Life Steal",sdPct:"Spell Damage %",sdRaw:"Spell Damage Raw",mdPct:"Melee Damage %",mdRaw:"Melee Damage Raw",poison:"Poison",spd:"Walk Speed Bonus",atkTier:"Attack Speed Bonus",averageDps:"Average DPS",str:"Strength",dex:"Dexterity",int:"Intelligence",def:"Defense",agi:"Agility",strReq:"Strength Min",dexReq:"Dexterity Min",intReq:"Intelligence Min",defReq:"Defense Min",agiReq:"Agility Min",eDef:"Earth Defense",tDef:"Thunder Defense",wDef:"Water Defense",fDef:"Fire Defense",aDef:"Air Defense",eDamPct:"Earth Damage %",tDamPct:"Thunder Damage %",wDamPct:"Water Damage %",fDamPct:"Fire Damage %",aDamPct:"Air Damage %",damPct:"Damage %",rDamPct:"Elemental Damage %",nDamPct:"Neutral Damage %",slots:"Powder Slots",lvl:"Combat Level",reqTotal:"Req Total",skillPointTotal:"Skill Point Total",offenseScore:"Offense Score",ehpProxy:"EHP Proxy",utilityScore:"Utility Score",spPct1:"1st Spell Cost %",spRaw1:"1st Spell Cost Raw",spPct2:"2nd Spell Cost %",spRaw2:"2nd Spell Cost Raw",spPct3:"3rd Spell Cost %",spRaw3:"3rd Spell Cost Raw",spPct4:"4th Spell Cost %",spRaw4:"4th Spell Cost Raw",sumSpPct:"Sum Spell Cost %",sumSpRaw:"Sum Spell Cost Raw"};function qf(e){return HA[e]??e}const Zi={legacyBaseDps:0,legacyEhp:0,dpsProxy:0,spellProxy:0,meleeProxy:0,ehpProxy:0,speed:0,sustain:0,skillPointTotal:0,reqTotalPenalty:0};function ZA(e){switch(e){case"spell":return{...Zi,spellProxy:2};case"melee":return{...Zi,meleeProxy:2};case"mobility":return{...Zi,speed:2};case"tank":return{...Zi,legacyEhp:2};case"constraints":return{...Zi,legacyBaseDps:.25,legacyEhp:.25,dpsProxy:.25,spellProxy:.25,meleeProxy:.25,ehpProxy:.25,speed:.25,sustain:.25,skillPointTotal:.25,reqTotalPenalty:.25};default:return{...Zi,spellProxy:2}}}function FA(e){return ZA(e)}function GA(e){const n=w.useRef(null);n.current||(n.current=new BA);const[s,i]=w.useState(""),[r,c]=w.useState(""),[u,d]=w.useState(""),[m,p]=w.useState(""),[y,v]=w.useState([]),[b,S]=w.useState("constraints"),[_,T]=w.useState(e.snapshot.characterClass),[j,k]=w.useState(e.snapshot.level),[R,P]=w.useState([]),[B,q]=w.useState([]),[M,C]=w.useState(ia.attackSpeedConstraintMode),[D,Z]=w.useState(ia.skillpointFeasibilityMode),[re,fe]=w.useState(null),[ae,ce]=w.useState(!1),[$,W]=w.useState(ia.beamWidth),[L,Q]=w.useState(ia.topKPerSlot),[ee,A]=w.useState(ia.topN),[Y,N]=w.useState(["auto"]),[z,X]=w.useState([]),[ue,oe]=w.useState(""),[le,be]=w.useState(!1),[De,me]=w.useState(null),[we,Re]=w.useState(!1),[Xe,Wt]=w.useState(!1),[et,ln]=w.useState(!0),[Nt,rn]=w.useState(ia.exhaustiveStateLimit),[Xt,Mt]=w.useState(null),[de,ke]=w.useState(null),[Pe,Fe]=w.useState(null),[Le,Qt]=w.useState([]),[pt,Ut]=w.useState(null),[We,V]=w.useState(!1),pe=w.useRef(null),Ge=w.useRef(null),Ye=w.useRef(null),Dt=w.useRef(null),ct=w.useRef(null),Rt=y.some(te=>te.key&&te.min!=null&&te.max!=null),St=w.useRef(1),Sa=w.useMemo(()=>{const te={};for(const he of Je)e.snapshot.locks[he]&&(te[he]=!0);return te},[e.snapshot.locks]),As=e.catalog?.facetsMeta.tiers??[],si=(e.catalog?.facetsMeta.majorIds??[]).slice(0,24),da=w.useMemo(()=>Object.keys(e.catalog?.facetsMeta.numericRanges??{}).sort((he,ge)=>qf(he).localeCompare(qf(ge))),[e.catalog]);w.useEffect(()=>{e.open&&(T(e.snapshot.characterClass),k(e.snapshot.level))},[e.open,e.snapshot.characterClass,e.snapshot.level]);const Ka=()=>{v(te=>[...te,{id:St.current++,key:da[0]??"",min:null,max:null}])},vt=(te,he)=>{v(ge=>ge.map(je=>je.id===te?{...je,...he}:je))},jt=te=>{v(he=>he.filter(ge=>ge.id!==te))},$t=async(te,he,ge,je)=>{const Qe=(()=>{const Te={label:"Fast pass",topKPerSlot:he.topKPerSlot,beamWidth:he.beamWidth,maxStates:he.maxStates,rescueWeights:!1},Ae={label:"Deep pass",topKPerSlot:Math.max(he.topKPerSlot,140),beamWidth:Math.max(he.beamWidth,700),maxStates:Math.max(he.maxStates,9e5),rescueWeights:!1},Be={label:"Bruteforce-ish pass",topKPerSlot:Math.max(he.topKPerSlot,220),beamWidth:Math.max(he.beamWidth,1200),maxStates:Math.max(he.maxStates,4e6),rescueWeights:!1},vn={label:"Feasibility rescue",topKPerSlot:Math.max(he.topKPerSlot,260),beamWidth:Math.max(he.beamWidth,1400),maxStates:Math.max(he.maxStates,45e5),rescueWeights:!0},Ee={label:"Constraint-first pass",topKPerSlot:Math.max(he.topKPerSlot,180),beamWidth:Math.max(he.beamWidth,1200),maxStates:Math.max(he.maxStates,22e5),rescueWeights:!0},Tr={label:"Constraint rescue deep",topKPerSlot:Math.max(he.topKPerSlot,280),beamWidth:Math.max(he.beamWidth,2200),maxStates:Math.max(he.maxStates,9e6),rescueWeights:!0,useExhaustiveSmallPool:!0,exhaustiveStateLimit:Math.max(he.exhaustiveStateLimit,12e5)},Wa={label:"Exhaustive-ish pass",topKPerSlot:Math.max(he.topKPerSlot,300),beamWidth:Math.max(he.beamWidth,2600),maxStates:Math.max(he.maxStates,12e6),rescueWeights:!0,useExhaustiveSmallPool:!0,exhaustiveStateLimit:Math.max(he.exhaustiveStateLimit,2e6)},ta=Ne=>{switch(Ne){case"fast":return[Te];case"constraint":return Xe?[Ee,Tr,Wa]:[Ee];case"exhaustive":return Xe?[Ee,Wa]:[Wa];default:return[Te,...Xe?[Ae,Be,vn]:[]]}},fa=Y.length>0?Y:["auto"];return fa.length===1&&fa[0]==="auto"?ta("auto"):fa.flatMap(Ne=>ta(Ne))})();let wt=[];for(let Te=0;Te<Qe.length;Te++){if(je.aborted)throw new DOMException("Auto build cancelled","AbortError");const Ae=Qe[Te],Be={...he,topKPerSlot:Ae.topKPerSlot,beamWidth:Ae.beamWidth,maxStates:Ae.maxStates,useExhaustiveSmallPool:Ae.useExhaustiveSmallPool??he.useExhaustiveSmallPool,exhaustiveStateLimit:Ae.exhaustiveStateLimit??he.exhaustiveStateLimit,weights:Ae.rescueWeights?{...he.weights,legacyBaseDps:he.weights.legacyBaseDps*.6,dpsProxy:he.weights.dpsProxy*.55,legacyEhp:Math.max(he.weights.legacyEhp,1),ehpProxy:Math.max(he.weights.ehpProxy,1),sustain:Math.max(he.weights.sustain,.8),skillPointTotal:Math.max(he.weights.skillPointTotal,.8),reqTotalPenalty:Math.max(he.weights.reqTotalPenalty,1.8)}:he.weights};oe(`${Ae.label} (${Te+1}/${Qe.length})  topK ${Be.topKPerSlot}, beam ${Be.beamWidth}, maxStates ${Be.maxStates}`);const vn=await n.current.run(te,ge,Be,{signal:je,onProgress:Ee=>{Fe(Ee),Ee.previewCandidates&&Qt(Ee.previewCandidates),Ee.phase==="diagnostics"&&Ee.reasonCode&&(Dt.current=Ee.reasonCode,ke(Ee.reasonCode)),Ee.phase==="diagnostics"&&Ee.detail&&(Ye.current=Ee.detail,Mt(Ee.detail)),oe(`${Ae.label} (${Te+1}/${Qe.length})  ${Ee.phase}: ${Ee.expandedSlots}/${Ee.totalSlots} slots, beam ${Ee.beamSize}, states ${Ee.processedStates}${Ee.detail?`  ${Ee.detail}`:""}`)}});if(vn.length>0)return vn;wt=vn}if(wt.length===0){const Te=he.target;if(typeof Te.minDpsProxy=="number"||typeof Te.minEhpProxy=="number"||typeof Te.minSkillPointTotal=="number"||(Te.customNumericRanges?.length??0)>0){oe("Threshold rescue pass  topK 180, beam 3600, maxStates 2200000");const Be={...he,weights:hh(he.target,he.weights),topKPerSlot:Math.max(he.topKPerSlot,180),beamWidth:Math.max(he.beamWidth,3600),maxStates:Math.max(he.maxStates,22e5)},vn=await n.current.run(te,ge,Be,{signal:je,onProgress:Ee=>{Fe(Ee),Ee.previewCandidates&&Qt(Ee.previewCandidates),Ee.phase==="diagnostics"&&Ee.reasonCode&&(Dt.current=Ee.reasonCode,ke(Ee.reasonCode)),Ee.phase==="diagnostics"&&Ee.detail&&(Ye.current=Ee.detail,Mt(Ee.detail)),oe(`Threshold rescue pass  ${Ee.phase}: ${Ee.expandedSlots}/${Ee.totalSlots} slots, beam ${Ee.beamSize}, states ${Ee.processedStates}${Ee.detail?`  ${Ee.detail}`:""}`)}});if(vn.length>0)return vn}}return wt},pn=async()=>{if(!e.catalog)return;me(null),X([]),Mt(null),ke(null),Fe(null),Ye.current=null,Dt.current=null;const te=O0(s,e.catalog),he=O0(r,e.catalog),ge=Hi(u,Ne=>Ne.toUpperCase()),je=Hi(m,Ne=>Ne.toUpperCase()),Qe=new Set(e.catalog.facetsMeta.majorIds.map(Ne=>Ne.toUpperCase())),wt=ge.filter(Ne=>!Qe.has(Ne)),Te=je.filter(Ne=>!Qe.has(Ne)),Ae=y.map(Ne=>({key:Ne.key.trim(),min:Ne.min??void 0,max:Ne.max??void 0})).filter(Ne=>Ne.key&&(typeof Ne.min=="number"||typeof Ne.max=="number")),Be=new Set(Object.keys(e.catalog.facetsMeta.numericRanges)),vn=Ae.map(Ne=>Ne.key).filter(Ne=>!Be.has(Ne)),Ee=Ae.filter(Ne=>typeof Ne.min=="number"&&typeof Ne.max=="number"&&Ne.min>Ne.max);if(te.unknown.length>0||he.unknown.length>0||wt.length>0||Te.length>0||vn.length>0||Ee.length>0){me([te.unknown.length?`Unknown must-include items: ${te.unknown.join(", ")}`:"",he.unknown.length?`Unknown excluded items: ${he.unknown.join(", ")}`:"",wt.length?`Unknown required major IDs: ${wt.join(", ")}`:"",Te.length?`Unknown excluded major IDs: ${Te.join(", ")}`:"",vn.length?`Unknown advanced ID keys: ${vn.join(", ")}`:"",Ee.length?`Invalid advanced ID ranges (min > max): ${Ee.map(Ne=>Ne.key).join(", ")}`:""].filter(Boolean).join(" | "));return}const Wa=Ae.length>0&&b==="constraints",ta={...ia,characterClass:_,level:Math.max(1,Math.min(106,Math.round(j||e.snapshot.level||106))),mustIncludeIds:te.ids,excludedIds:he.ids,lockedSlots:Sa,target:{customNumericRanges:Ae},allowedTiers:[...R],requiredMajorIds:ge,excludedMajorIds:je,weaponAttackSpeeds:[...B],attackSpeedConstraintMode:M,skillpointFeasibilityMode:D,minPowderSlots:re,onlyPinnedItems:ae,useExhaustiveSmallPool:et,exhaustiveStateLimit:Math.max(1e3,Math.min(5e6,Nt)),weights:FA(b),topN:Math.max(1,Math.min(150,ee)),topKPerSlot:Math.max(10,Math.min(300,L)),beamWidth:Math.max(20,Math.min(5e3,$)),constraintOnlyMode:Wa};ct.current?.abort();const fa=new AbortController;ct.current=fa,be(!0),Qt([]),V(!1),Ut(null),pe.current=ta,Ge.current=e.snapshot,oe("Starting...");try{const Ne=await $t(e.catalog,ta,e.snapshot,fa.signal);if(X(Ne),Ne.length===0){const Xa=Lf(Ye.current??void 0);Ut(Xa),Xe||V(!0),oe(""),Fe(null);const wa=Ye.current??"",It=Dt.current??de??"",Bt=/SP-invalid=(\d+)/i.exec(wa),rl=Bt?Number(Bt[1]):0,ol=/hard=.*?\(speed=(\d+)/i.exec(wa),ha=ol?Number(ol[1]):0,_a=/hard=.*?\(speed=\d+,\s*thresholds=(\d+)/i.exec(wa),Nr=_a?Number(_a[1]):0,cl=It==="must_include_conflict"?"At least one must-include item cannot be placed under current locks/filters.":It==="unsat_attack_target"?"The configured attack target cannot be satisfied from the current candidate pool.":It==="unsat_threshold"?"One or more hard thresholds are mathematically unsatisfiable with the current pool.":It==="sp_infeasible"?"The explored builds failed skill-point/equip-order feasibility in the selected SP mode.":It==="fallback_timeout"?"Deterministic fallback timed out before finding a valid candidate.":It==="empty_pool"?"At least one slot has no eligible candidate items after filters.":It==="search_pruned"?"Search pruning/state limits exhausted viable branches before a valid candidate was found.":null,ul=It==="must_include_conflict"?"Tip: unlock conflicting slots, remove exclusions on required items, or relax class/level/tier filters.":It==="unsat_attack_target"?"Tip: switch attack logic to Either, lower atkTier minimum, or broaden candidate pools.":It==="unsat_threshold"?"Tip: lower strict min/max thresholds or reduce simultaneous hard constraints.":It==="sp_infeasible"?D==="no_tomes"?"Tip: try SP Feasibility Mode = Guild rainbow (+1 each), or add more low-requirement/support items.":"Tip: relax hard constraints or lower requirement-heavy must-includes.":It==="fallback_timeout"?"Tip: increase Top K / Beam Width, disable pinned-only, or reduce hard filters.":It==="empty_pool"?"Tip: disable pinned-only first, then relax tier/powder/class filters.":It==="search_pruned"?"Tip: use Constraint-first/Exhaustive-ish strategy and increase search budgets.":null;me(["No valid candidates found.",Ye.current?`Diagnostics: ${Ye.current}`:"",cl||(rl>0?"The engine found many full builds, but they failed skill-point/equip-order feasibility. This is not just a UI filter issue.":ha>0?"The engine found many full builds, but they failed the final attack-speed target. This usually means the search is missing enough +atkTier support for the selected weapon/target combination.":Nr>0&&Ae.length>0?"The engine found many full builds, but they failed advanced ID min/max thresholds. This usually means the search is not preserving enough support items for those IDs.":"This usually means your hard constraints are too strict (pinned-only, major IDs, must-includes, attack-speed, or thresholds), or the selected objective conflicts with them."),ul||(rl>0?"Try switching Primary Goal to Balanced or Tank and keeping Exact Search + Deep Fallback enabled.":ha>0?"Tip: keep Exact Search + Deep Fallback enabled, lower thresholds, and try adding/pinning known +Attack Speed Bonus support items for the target speed.":Nr>0&&Ae.length>0?"Tip: switch Solver Strategy to Constraint-first or Exhaustive-ish and keep Deep Fallback enabled. For strict advanced IDs, add only the most important thresholds first.":"Tip: disable pinned-only first, remove major-ID constraints, then try again.")].join(" "))}else oe(`Completed. ${Ne.length} valid candidates.`)}catch(Ne){me(Ne instanceof Error?Ne.message:"Auto builder failed"),oe("")}finally{be(!1),Fe(null)}},gn=()=>{ct.current?.abort(),n.current?.cancelCurrent(),be(!1),oe("Cancelled"),Fe(null)},Jt=async te=>{const he=e.catalog,ge=pe.current,je=Ge.current;if(!he||!ge||!je)return;me(null),V(!1),Ut(null),Mt(null),ke(null),Ye.current=null,Dt.current=null;const Qe={...ge,topKPerSlot:te==="exhaustive"?Math.max(ge.topKPerSlot,300):Math.max(ge.topKPerSlot,180),beamWidth:te==="exhaustive"?Math.max(ge.beamWidth,2600):Math.max(ge.beamWidth,1200),maxStates:te==="exhaustive"?Math.max(ge.maxStates,12e6):Math.max(ge.maxStates,4e6),useExhaustiveSmallPool:!0,exhaustiveStateLimit:te==="exhaustive"?Math.max(ge.exhaustiveStateLimit,2e6):Math.max(ge.exhaustiveStateLimit,12e5),weights:{...ge.weights,...ge.constraintOnlyMode?{}:{legacyBaseDps:ge.weights.legacyBaseDps*.6,dpsProxy:ge.weights.dpsProxy*.55,legacyEhp:Math.max(ge.weights.legacyEhp,1),ehpProxy:Math.max(ge.weights.ehpProxy,1),sustain:Math.max(ge.weights.sustain,.8),skillPointTotal:Math.max(ge.weights.skillPointTotal,.8),reqTotalPenalty:Math.max(ge.weights.reqTotalPenalty,1.8)}}};ct.current?.abort();const wt=new AbortController;ct.current=wt,be(!0),Qt([]);const Te=te==="exhaustive"?"Exhaustive retry":"Deep retry";oe(`${Te}  topK ${Qe.topKPerSlot}, beam ${Qe.beamWidth}`);try{const Ae=await n.current.run(he,je,Qe,{signal:wt.signal,onProgress:Be=>{Fe(Be),Be.previewCandidates&&Qt(Be.previewCandidates),Be.phase==="diagnostics"&&Be.reasonCode&&(Dt.current=Be.reasonCode,ke(Be.reasonCode)),Be.phase==="diagnostics"&&Be.detail&&(Ye.current=Be.detail,Mt(Be.detail)),oe(`${Te}  ${Be.phase}: ${Be.expandedSlots}/${Be.totalSlots} slots, beam ${Be.beamSize}, states ${Be.processedStates}${Be.detail?`  ${Be.detail}`:""}`)}});if(X(Ae),Ae.length===0){const Be=Lf(Ye.current??void 0);Ut(Be),oe(""),Fe(null),me(`No valid candidates found after ${Te.toLowerCase()}. Try relaxing constraints or increasing search budgets further.`)}else oe(`Completed. ${Ae.length} valid candidates.`)}catch(Ae){me(Ae instanceof Error?Ae.message:"Auto builder failed"),oe("")}finally{be(!1),Fe(null)}},on=De??Xt,bn=!!De,Pt=Lf(Pe?.detail),it=(le?Pt:pt)??null,cn=it?it.spInvalid+it.majorIds+it.duplicate+it.hard:0;return h.jsxs(Hh,{open:e.open,onOpenChange:e.onOpenChange,title:"Build Solver",description:"Beam search over item combinations. Uses Workbench summary metrics (legacy-style Base DPS / EHP, ability tree excluded).",className:"!w-[min(95vw,1360px)]",footer:h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsx("div",{className:"text-sm text-[var(--wb-muted)]",children:ue}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Me,{variant:"ghost",onClick:()=>Re(te=>!te),children:we?"Hide Tips":"Tips"}),le?h.jsx(Me,{variant:"ghost",onClick:gn,children:"Cancel"}):null,h.jsx(Me,{variant:"primary",onClick:pn,disabled:!e.catalog||le,children:"Generate Candidates"})]})]}),children:[le&&Pe?h.jsxs("div",{className:"wb-beam-progress mb-4 rounded-xl p-3",children:[h.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[h.jsx("span",{className:"rounded-md border border-[var(--wb-info-border)] bg-[var(--wb-info-soft)] px-2 py-0.5 text-xs font-medium text-[var(--wb-info)]",children:Pe.phase==="exact-search"?"Exact search":Pe.phase==="beam-search"?"Beam search":Pe.phase==="diagnostics"?"Finalize / diagnostics":Pe.phase}),Pe.totalSlots>0?h.jsxs("span",{className:"text-xs text-[var(--wb-muted)]",children:["Slots ",Pe.expandedSlots,"/",Pe.totalSlots]}):null]}),h.jsx("div",{className:"wb-beam-progress-track h-2.5 w-full overflow-hidden rounded-full",children:h.jsx("div",{className:"wb-beam-progress-fill h-full rounded-full transition-[width] duration-300 ease-out",style:{width:Pe.totalSlots>0?`${100*Pe.expandedSlots/Pe.totalSlots}%`:"0%"}})}),h.jsxs("div",{className:"mt-2 flex flex-wrap gap-4 text-xs text-[var(--wb-muted)]",children:[h.jsxs("span",{children:["States: ",Pe.processedStates.toLocaleString()]}),h.jsxs("span",{children:["Beam: ",Pe.beamSize.toLocaleString()]})]}),it&&cn>0?h.jsxs("div",{className:"mt-3 border-t border-[var(--wb-info-border)] pt-2",children:[h.jsx("div",{className:"mb-1 text-[11px] font-medium uppercase tracking-wide text-[var(--wb-muted)]",children:"Rejected builds (this pass)"}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[it.spInvalid>0?h.jsxs("span",{className:"rounded bg-rose-400/20 px-1.5 py-0.5 text-[11px] text-rose-200",title:"Skill point / equip feasibility",children:["SP: ",it.spInvalid]}):null,it.majorIds>0?h.jsxs("span",{className:"rounded bg-amber-400/20 px-1.5 py-0.5 text-[11px] text-amber-200",title:"Major ID requirement",children:["Major ID: ",it.majorIds]}):null,it.duplicate>0?h.jsxs("span",{className:"rounded bg-slate-400/20 px-1.5 py-0.5 text-[11px] text-slate-200",title:"Duplicate build",children:["Dup: ",it.duplicate]}):null,it.speed>0?h.jsxs("span",{className:"rounded bg-orange-400/20 px-1.5 py-0.5 text-[11px] text-orange-200",title:"Attack speed",children:["Speed: ",it.speed]}):null,it.thresholds>0?h.jsxs("span",{className:"rounded bg-amber-400/20 px-1.5 py-0.5 text-[11px] text-amber-200",title:"Min/max thresholds",children:["Thresholds: ",it.thresholds]}):null,it.item>0?h.jsxs("span",{className:"rounded bg-slate-400/20 px-1.5 py-0.5 text-[11px] text-slate-200",title:"Item constraint",children:["Item: ",it.item]}):null]})]}):null]}):null,!le&&(We||pt&&cn>0)?h.jsxs("div",{className:"mb-4 rounded-xl border border-amber-400/30 bg-amber-400/8 p-3",children:[pt&&cn>0?h.jsxs("div",{className:"mb-3",children:[h.jsx("div",{className:"mb-1 text-[11px] font-medium uppercase tracking-wide text-amber-200/80",children:"Last pass reject breakdown"}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[pt.spInvalid>0?h.jsxs("span",{className:"rounded bg-rose-400/20 px-1.5 py-0.5 text-[11px] text-rose-200",children:["SP: ",pt.spInvalid]}):null,pt.majorIds>0?h.jsxs("span",{className:"rounded bg-amber-400/20 px-1.5 py-0.5 text-[11px] text-amber-200",children:["Major ID: ",pt.majorIds]}):null,pt.duplicate>0?h.jsxs("span",{className:"rounded bg-slate-400/20 px-1.5 py-0.5 text-[11px] text-slate-200",children:["Dup: ",pt.duplicate]}):null,pt.speed>0?h.jsxs("span",{className:"rounded bg-orange-400/20 px-1.5 py-0.5 text-[11px] text-orange-200",children:["Speed: ",pt.speed]}):null,pt.thresholds>0?h.jsxs("span",{className:"rounded bg-amber-400/20 px-1.5 py-0.5 text-[11px] text-amber-200",children:["Thresholds: ",pt.thresholds]}):null,pt.item>0?h.jsxs("span",{className:"rounded bg-slate-400/20 px-1.5 py-0.5 text-[11px] text-slate-200",children:["Item: ",pt.item]}):null]})]}):null,We?h.jsxs("div",{children:[h.jsx("div",{className:"mb-2 text-xs text-amber-100",children:"Fast pass found 0 results. Retry with a higher search budget?"}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsx(Me,{variant:"ghost",className:"text-xs",onClick:()=>Jt("deep"),children:"Deeper search (2x budget)"}),h.jsx(Me,{variant:"ghost",className:"text-xs",onClick:()=>Jt("exhaustive"),children:"Exhaustive search (max budget)"})]})]}):null]}):null,h.jsxs("div",{className:"grid h-[52vh] min-h-0 gap-4 overflow-hidden lg:h-[56vh] lg:grid-cols-[1fr_1fr] lg:items-stretch",children:[h.jsxs("div",{className:"grid h-full min-h-0 min-w-0 gap-3 overflow-auto pr-1 wb-scrollbar",children:[we?h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Tips (New Players)"}),h.jsxs("div",{className:"grid gap-2 text-xs text-[var(--wb-muted)]",children:[h.jsxs("div",{children:["1. Start with a Primary Goal like ",h.jsx("b",{children:"Damage"})," or ",h.jsx("b",{children:"Tank / EHP"}),". Leave most constraints empty."]}),h.jsx("div",{children:"2. Add only a few hard constraints first: class/level, maybe one must-include item."}),h.jsxs("div",{children:["3. If you get 0 candidates, turn off ",h.jsx("b",{children:"Only use pinned items in bins"})," and clear major-ID constraints."]}),h.jsx("div",{children:"4. Build Solver filters out builds that fail skill requirements / equip order feasibility."}),h.jsx("div",{children:"5. Use Workbench bins to guide it: pin good options, then rerun with pinned-only once you have enough items in each slot category."})]})]}):null,h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Optimization"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{children:[h.jsx(qe,{children:"Primary Goal"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:UA.map(te=>h.jsx(at,{active:b===te,onClick:()=>S(te),children:qA[te]},te))})]}),h.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2 text-xs text-[var(--wb-muted)]",children:"Build Solver always filters out builds that fail skill point/equip-order feasibility. You do not need to set a minimum SP total."})]})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Hard Constraints (Optional)"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{children:[h.jsx(qe,{children:"Character Class"}),h.jsxs("select",{className:"wb-select",value:_??"",onChange:te=>T(te.target.value||null),children:[h.jsx("option",{value:"",children:"Auto / Any"}),h.jsx("option",{value:"Warrior",children:"Warrior"}),h.jsx("option",{value:"Assassin",children:"Assassin"}),h.jsx("option",{value:"Mage",children:"Mage"}),h.jsx("option",{value:"Archer",children:"Archer"}),h.jsx("option",{value:"Shaman",children:"Shaman"})]})]}),h.jsx(Za,{label:"Level",value:j,onChange:te=>k(te??e.snapshot.level),min:1,max:106}),h.jsxs("div",{children:[h.jsx(qe,{children:"Must-Include Items (comma-separated names)"}),h.jsx("textarea",{className:"wb-textarea min-h-20",value:s,onChange:te=>i(te.target.value),placeholder:"Example: Cancer, Stardew"})]}),h.jsxs("div",{children:[h.jsx(qe,{children:"Excluded Items (comma-separated names)"}),h.jsx("textarea",{className:"wb-textarea min-h-20",value:r,onChange:te=>c(te.target.value),placeholder:"Blacklist item names"})]}),h.jsxs("details",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[h.jsx("summary",{className:"cursor-pointer text-sm font-medium",children:"Advanced: Specific ID Min / Max"}),h.jsxs("div",{className:"mt-3 grid gap-3",children:[h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Set build-wide min/max totals for any numeric ID (e.g. `mr`, `ms`, `spd`, `reqTotal`, `sdPct`, `poison`, `atkTier`). These are hard constraints."}),y.length===0?h.jsx("div",{className:"rounded-lg border border-dashed border-[var(--wb-border-muted)] px-3 py-2 text-xs text-[var(--wb-muted)]",children:"No advanced ID thresholds yet."}):null,y.map(te=>{const he=e.catalog?.facetsMeta.numericRanges[te.key];return h.jsxs("div",{className:"rounded-lg border border-[var(--wb-border-muted)] p-2",children:[h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs("div",{children:[h.jsx(qe,{children:"ID"}),h.jsx("select",{className:"wb-select w-full",value:te.key,onChange:ge=>vt(te.id,{key:ge.target.value}),children:da.map(ge=>h.jsxs("option",{value:ge,children:[qf(ge)," (",ge,")"]},ge))})]}),h.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[h.jsxs("div",{className:"min-w-[80px] flex-1",children:[h.jsx(qe,{children:"Min"}),h.jsx("input",{className:"wb-input w-full",type:"number",value:te.min??"",onChange:ge=>{const je=ge.target.value.trim();vt(te.id,{min:je===""?null:Number(je)})}})]}),h.jsxs("div",{className:"min-w-[80px] flex-1",children:[h.jsx(qe,{children:"Max"}),h.jsx("input",{className:"wb-input w-full",type:"number",value:te.max??"",onChange:ge=>{const je=ge.target.value.trim();vt(te.id,{max:je===""?null:Number(je)})}})]}),h.jsx(Me,{variant:"ghost",className:"shrink-0",onClick:()=>jt(te.id),children:"Remove"})]})]}),he?h.jsxs("div",{className:"mt-1 text-[11px] text-[var(--wb-muted)]",children:["Catalog item range: ",he.min," to ",he.max," (per item)"]}):null]},te.id)}),h.jsx("div",{children:h.jsx(Me,{variant:"ghost",onClick:Ka,disabled:da.length===0,children:"Add ID Threshold"})}),b==="constraints"&&!Rt?h.jsx("div",{className:"mt-1 rounded-lg border border-amber-400/40 bg-amber-400/10 p-2 text-[11px] text-amber-50",children:"Advanced IDs preset is selected as Primary Goal, but no ID has both Min and Max set. Add at least one ID with a Min and Max, or switch primary goal. You can still run the solver without this."}):null]})]})]})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Solver Strategy"}),h.jsx("div",{className:"grid gap-3",children:h.jsxs("div",{children:[h.jsx(qe,{children:"Strategies (select one or more; All is exclusive)"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:$A.map(te=>{const he=te==="auto",ge=Y.length===1&&Y[0]==="auto",je=he?ge:Y.includes(te),Qe=he&&!ge;return h.jsx(at,{active:je,disabled:Qe,onClick:()=>{if(Qe)return;if(he){N(["auto"]);return}if(ge){N([te]);return}const Te=Y.includes(te)?Y.filter(Be=>Be!==te):[...Y,te],Ae=Te.length===3&&Te.includes("fast")&&Te.includes("constraint")&&Te.includes("exhaustive");N(Te.length>0?Ae?["auto"]:Te:["auto"])},children:z0[te]},te)})}),h.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:Y.length===1&&Y[0]==="auto"?Xe?"Starts fast, then auto-retries deeper if needed.":"Starts fast. Prompts to retry deeper if 0 results.":Y.includes("fast")&&!Y.includes("constraint")&&!Y.includes("exhaustive")?"Single fast pass. Lowest wait time, weakest fallback.":Y.includes("constraint")?"Constraint-first helps strict attack-speed or advanced ID min/max.":Y.includes("exhaustive")?"Exhaustive-ish: highest search budget, strongest fallback.":"Selected strategies run in order (fast  constraint  exhaustive)."})]})})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Pool Filters"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsx(Za,{label:"Min Powder Slots",value:re,onChange:fe,min:0,max:6}),h.jsxs("div",{children:[h.jsx(qe,{children:"Allowed Tiers (optional)"}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[As.map(te=>h.jsx(at,{active:R.includes(te),onClick:()=>P(he=>nc(he,te)),children:te},te)),As.length===0?h.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:"Catalog not loaded."}):null]})]}),h.jsxs("div",{children:[h.jsx(qe,{children:"Final Weapon Attack Speed (optional hard constraint)"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:LA.map(te=>h.jsx(at,{active:B.includes(te),onClick:()=>q(he=>nc(he,te)),children:te},te))}),h.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:"Matches the completed build attack speed (weapon base speed plus total Attack Speed Bonus / `atkTier`)."})]}),h.jsxs("div",{children:[h.jsx(qe,{children:"Attack Target Logic"}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsx(at,{active:M==="or",onClick:()=>C("or"),children:"Either"}),h.jsx(at,{active:M==="and",onClick:()=>C("and"),children:"Both"})]}),h.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:"Applies when both final attack speed and advanced `atkTier` thresholds are set."})]}),h.jsxs("div",{children:[h.jsx(qe,{children:"SP Feasibility Mode"}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsx(at,{active:D==="no_tomes",onClick:()=>Z("no_tomes"),children:"No tomes"}),h.jsx(at,{active:D==="guild_rainbow",onClick:()=>Z("guild_rainbow"),children:"Guild rainbow (+1 each)"}),h.jsx(at,{active:D==="flexible_2",onClick:()=>Z("flexible_2"),children:"+2 flexible"})]}),h.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:"Guild rainbow: +1 each (total +5). +2 flexible: +2 in two skills (total +4)."})]}),h.jsx(at,{active:ae,onClick:()=>ce(te=>!te),children:"Only use pinned items in bins"}),h.jsxs("div",{children:[h.jsx(qe,{children:"Required Major IDs (build must include all)"}),h.jsx("textarea",{className:"wb-textarea min-h-16",value:u,onChange:te=>d(te.target.value),placeholder:"Example: HAWKEYE, GREED"})]}),h.jsxs("div",{children:[h.jsx(qe,{children:"Excluded Major IDs (avoid any item with these)"}),h.jsx("textarea",{className:"wb-textarea min-h-16",value:m,onChange:te=>p(te.target.value),placeholder:"Example: NAPALM"})]}),si.length>0?h.jsxs("div",{children:[h.jsx(qe,{children:"Major ID Quick Picks"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:si.map(te=>{const he=Hi(u,je=>je.toUpperCase()),ge=Hi(m,je=>je.toUpperCase());return h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsxs(at,{active:he.includes(te.toUpperCase()),onClick:()=>{d(je=>nc(Hi(je,Qe=>Qe.toUpperCase()),te.toUpperCase()).join(", "))},title:`Require ${te}`,children:["+",te]}),h.jsxs(at,{active:ge.includes(te.toUpperCase()),onClick:()=>{p(je=>nc(Hi(je,Qe=>Qe.toUpperCase()),te.toUpperCase()).join(", "))},title:`Exclude ${te}`,children:["-",te]})]},te)})})]}):null]})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Search Heuristics"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsx(at,{active:Xe,onClick:()=>Wt(te=>!te),children:"Deep fallback if 0 results"}),h.jsx(at,{active:et,onClick:()=>ln(te=>!te),children:"Exact search for small pools"}),h.jsx(Za,{label:"Exact Search Combination Limit",value:Nt,onChange:te=>rn(te??ia.exhaustiveStateLimit),min:1e3,max:5e6}),h.jsx(Za,{label:"Beam Width",value:$,onChange:te=>W(te??ia.beamWidth),min:20,max:5e3}),h.jsx(Za,{label:"Top K per Slot",value:L,onChange:te=>Q(te??ia.topKPerSlot),min:10,max:300}),h.jsx(Za,{label:"Top N Results",value:ee,onChange:te=>A(te??ia.topN),min:1,max:150}),h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2 text-xs text-[var(--wb-muted)]",children:["Locked slots from the Workbench will be preserved. Current locks: ",Object.values(Sa).filter(Boolean).length,ae?" | Candidate pools restricted to pinned bins.":"",Y.length>0&&!(Y.length===1&&Y[0]==="auto")?` | Strategy: ${Y.map(te=>z0[te]).join("  ")}.`:"",` | Attack logic: ${M==="or"?"Either":"Both"}.`,` | SP mode: ${D==="guild_rainbow"?"Guild rainbow (+1 each)":D==="flexible_2"?"+2 flexible":"No tomes"}.`,Xe?" | Auto retries with deeper search if fast pass finds 0 candidates.":" | Prompts to retry manually if fast pass finds 0.",et?` | Exact enumeration is used automatically when pool combinations are <= ${Math.round(Nt).toLocaleString()}.`:""]})]})]})]}),h.jsx("div",{className:"h-full min-h-0 min-w-0",children:h.jsxs("div",{className:"wb-card flex h-full min-h-0 flex-col overflow-hidden p-3",children:[(()=>{const te=le&&Le.length>0,he=te?Le.slice(0,2):z;return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[h.jsxs("div",{className:"text-sm font-semibold",children:["Candidates"," ",te?h.jsx("span",{className:"text-[11px] text-[var(--wb-muted)]",children:"(live preview; may be partial)"}):null]}),h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[he.length," shown"]})]}),h.jsx("div",{className:"min-h-0 flex-1 space-y-2 overflow-auto pr-1 wb-scrollbar",children:he.length===0?h.jsx("div",{className:"rounded-xl border border-dashed border-[var(--wb-border)] p-4 text-sm text-[var(--wb-muted)]",children:"Run Build Solver to generate candidate builds."}):he.map((ge,je)=>h.jsxs("div",{className:te?"rounded-xl border border-[var(--wb-info-border)] bg-[var(--wb-info-soft)] p-3":"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3",children:[h.jsxs("div",{className:"flex items-start justify-between gap-3",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"text-sm font-semibold",children:["#",je+1," | Score ",Math.round(ge.score).toLocaleString()]}),h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["HP ",Math.round(ge.summary.aggregated.hpTotal)," | Req ",ge.summary.derived.reqTotal]}),h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["SP Needed ",Math.round(ge.summary.derived.assignedSkillPointsRequired)," | MR ",ge.summary.aggregated.mr," | MS ",ge.summary.aggregated.ms]}),te?h.jsx("div",{className:"mt-1 text-[11px] text-[var(--wb-muted)]",children:"Live preview only  may not be a complete or fully feasible build."}):null]}),te?null:h.jsx(Me,{className:"px-2 py-1 text-xs",onClick:()=>e.onLoadCandidate(ge),children:"Load into Workbench"})]}),h.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1 text-xs sm:grid-cols-2 xl:grid-cols-3",children:Je.map(Qe=>h.jsxs("div",{className:"min-w-0 rounded-md border border-[var(--wb-border-muted)] bg-black/10 px-2 py-1",children:[h.jsx("div",{className:"text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:Qe}),h.jsx("div",{className:"truncate",children:ge.slots[Qe]!=null?e.catalog?.itemsById.get(ge.slots[Qe])?.displayName??ge.slots[Qe]:"Empty"})]},Qe))})]},`${ge.score}-${je}`))})]})})(),on?h.jsxs("details",{className:`mt-2 rounded-xl border p-2 ${bn?"border-rose-400/30 bg-rose-400/8 text-rose-100":"border-sky-400/20 bg-sky-400/5 text-sky-100"}`,children:[h.jsx("summary",{className:"cursor-pointer list-none text-xs font-medium",children:bn?"Run issue (click to expand)":"Diagnostics (click to expand)"}),h.jsx("div",{className:"mt-2 text-xs leading-relaxed",children:on})]}):null]})})]})]})}const YA=["Warrior","Assassin","Mage","Archer","Shaman"],Uf=[0,1,2,2,3,3,4,4,5,5,6,6,7,8,8,9,9,10,11,11,12,12,13,14,14,15,16,16,17,17,18,18,19,19,20,20,20,21,21,22,22,23,23,23,24,24,25,25,26,26,27,27,28,28,29,29,30,30,31,31,32,32,33,33,34,34,34,35,35,35,36,36,36,37,37,37,38,38,38,38,39,39,39,39,40,40,40,40,41,41,41,41,42,42,42,42,43,43,43,43,44,44,44,44,45,45,45];function Qs(e,n=0){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const s=Number(e);if(Number.isFinite(s))return s}return n}function tr(e){return typeof e=="string"?e:""}function $f(e){return Array.isArray(e)?e.map(n=>Qs(n,Number.NaN)).filter(n=>Number.isFinite(n)).map(n=>Math.trunc(n)):[]}function VA(e){const n=Qs(e.id,Number.NaN);if(!Number.isFinite(n))return null;const s=Qs(e.display?.row,0),i=Qs(e.display?.col,0);return{id:Math.trunc(n),displayName:tr(e.display_name)||`Ability ${n}`,descriptionHtml:tr(e.desc),parents:$f(e.parents),dependencies:$f(e.dependencies),blockers:$f(e.blockers),cost:Math.max(0,Math.trunc(Qs(e.cost,1))),archetype:tr(e.archetype).trim()||null,archetypeReq:Math.max(0,Math.trunc(Qs(e.archetype_req,0))),reqArchetype:tr(e.req_archetype).trim()||null,baseAbilityId:e.base_abil==null?null:Math.trunc(Qs(e.base_abil,Number.NaN)),display:{row:Math.max(0,Math.trunc(s)),col:Math.max(0,Math.trunc(i)),icon:tr(e.display?.icon)||"node_0"},properties:typeof e.properties=="object"&&e.properties?e.properties:{},effects:Array.isArray(e.effects)?e.effects.filter(r=>!!r&&typeof r=="object"):[]}}function KA(e,n){const s=n.map(VA).filter(u=>u!==null).sort((u,d)=>{const m=u.display.row-d.display.row;if(m!==0)return m;const p=u.display.col-d.display.col;return p!==0?p:u.id-d.id}),i=new Map;let r=0,c=0;for(const u of s)i.set(u.id,u),r=Math.max(r,u.display.row),c=Math.max(c,u.display.col);return{className:e,nodes:s,nodeById:i,maxRow:r,maxCol:c}}function WA(e,n){const s={};for(const i of YA){const r=Array.isArray(e[i])?e[i]:[];s[i]=KA(i,r)}return{version:n,classes:s}}function XA(e){if(!Number.isFinite(e))return 45;const n=Math.trunc(e);return n>=Uf.length?45:n<1?Uf[1]:Uf[n]??45}function Hf(e,n,s,i,r){if(e.parents.length===0)return e.cost>r?{ok:!1,hardBlocked:!1,reason:"not enough ability points left"}:{ok:!0,hardBlocked:!1,reason:""};const c=e.dependencies.filter(m=>!s.has(m));if(c.length>0)return{ok:!1,hardBlocked:!0,reason:`missing dep: ${c.map(p=>`"${n.nodeById.get(p)?.displayName??p}"`).join(", ")}`};const u=e.blockers.filter(m=>s.has(m));if(u.length>0)return{ok:!1,hardBlocked:!0,reason:`blocked by: ${u.map(p=>`"${n.nodeById.get(p)?.displayName??p}"`).join(", ")}`};if(!e.parents.some(m=>s.has(m)))return{ok:!1,hardBlocked:!1,reason:"not reachable"};if(e.archetypeReq>0){const m=e.reqArchetype||e.archetype,p=m?i.get(m)??0:0;if(!m||p<e.archetypeReq)return{ok:!1,hardBlocked:!1,reason:`${m??"Archetype"}: ${p} < ${e.archetypeReq}`}}return e.cost>r?{ok:!1,hardBlocked:!1,reason:"not enough ability points left"}:{ok:!0,hardBlocked:!1,reason:""}}function QA(e,n,s){const i=new Set(n.filter(j=>e.nodeById.has(j)));let r=new Set(i),c=e.nodes.filter(j=>r.has(j.id));const u=new Set,d=new Map;let m=0;const p=new Map;for(;;){let j=!1;const k=[];for(const R of c){const P=Hf(R,e,u,d,9999);if(!P.ok){k.push(R),p.set(R.id,{reason:P.reason,hardBlocked:P.hardBlocked});continue}p.delete(R.id),u.add(R.id),r.delete(R.id),m+=R.cost,R.archetype&&d.set(R.archetype,(d.get(R.archetype)??0)+1),j=!0}if(c=k,!j)break}const y=XA(s),v=y-m,b=[];for(const j of e.nodes){if(u.has(j.id))continue;Hf(j,e,u,d,v).ok&&b.push(j.id)}const S={};for(const j of e.nodes){if(u.has(j.id)){S[j.id]={active:!0,selectable:!0,hardBlocked:!1,reason:null};continue}const k=p.get(j.id);if(k){S[j.id]={active:!1,selectable:!1,hardBlocked:k.hardBlocked,reason:k.reason};continue}const R=Hf(j,e,u,d,v);S[j.id]={active:!1,selectable:R.ok,hardBlocked:R.hardBlocked,reason:R.ok?null:R.reason}}const _=[];let T=!1;m>y&&_.push(`too many ability points assigned! (${m} > ${y})`);for(const j of c){const k=p.get(j.id);k&&(k.hardBlocked&&(T=!0),_.push(`${j.displayName}: ${k.reason}`))}return{apCap:y,apUsed:m,apRemaining:v,reachable:u,pending:c,unresolved:p,availableIds:b,errors:_,hardErrors:T,archetypeCounts:d,nodeStatusById:S}}function Xc(e,n,s){const i=QA(e,n,s),r=e.nodes.filter(d=>i.reachable.has(d.id)).map(d=>d.id),c=i.pending.map(d=>d.id),u=Object.fromEntries([...i.archetypeCounts.entries()].sort((d,m)=>d[0].localeCompare(m[0])));return{className:e.className,level:s,apCap:i.apCap,apUsed:i.apUsed,apRemaining:i.apRemaining,selectedIdsInput:[...n],activeIds:r,unresolvedIds:c,availableIds:i.availableIds,hardErrors:i.hardErrors,errors:i.errors,archetypeCounts:u,nodeStatusById:i.nodeStatusById}}function JA(e,n,s){let i=[...new Set(n)].filter(r=>e.nodeById.has(r));for(;;){const r=Xc(e,i,s);if(r.unresolvedIds.length===0&&r.apUsed<=r.apCap)return r.activeIds;const c=new Set(r.activeIds),u=i.filter(d=>c.has(d));if(u.length===i.length)return u;i=u}}function eO(e,n,s,i){if(!e.nodeById.has(s))return[...n];const r=new Set(n);return r.has(s)?(r.delete(s),JA(e,[...r],i)):Xc(e,n,i).nodeStatusById[s]?.selectable?(r.add(s),e.nodes.filter(d=>r.has(d.id)).map(d=>d.id)):[...n]}function ES(e,n){return!e||!n?null:e.classes[n]??null}function tO(e){return e.length>20?`${e.slice(0,19)}`:e}function nO(e,n){return e??n??null}function aO(e){const n=nO(e.selectedClass,e.inferredClass),s=w.useMemo(()=>ES(e.dataset,n),[e.dataset,n]),i=w.useMemo(()=>n?e.selectionsByClass[n]??[]:[],[e.selectionsByClass,n]),r=w.useMemo(()=>s?Xc(s,i,e.level):null,[s,i,e.level]),[c,u]=w.useState(null);w.useEffect(()=>{if(!s){u(null);return}c!=null&&s.nodeById.has(c)||u(r?.activeIds[0]??s.nodes[0]?.id??null)},[s,c,r]);const d=w.useMemo(()=>!s||c==null?null:s.nodeById.get(c)??null,[s,c]),m=S=>{n&&e.onSelectionsChange({...e.selectionsByClass,[n]:S})},p=S=>{if(!s||!n)return;const _=eO(s,i,S,e.level);m(_),u(S)},y=()=>{n&&e.onSelectionsChange({...e.selectionsByClass,[n]:[]})},v=r?.activeIds.length??0,b=s?{gridTemplateColumns:`repeat(${Math.max(1,s.maxCol+1)}, minmax(56px, 1fr))`,gridTemplateRows:`repeat(${Math.max(1,s.maxRow+1)}, minmax(56px, auto))`}:void 0;return h.jsx(Hh,{open:e.open,onOpenChange:e.onOpenChange,title:"Ability Tree",description:"Legacy ability tree data and activation rules integrated into Workbench. Effects are tracked here, but Workbench DPS/EHP still excludes ability-tree math for now.",className:"w-[min(97vw,1320px)]",footer:h.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:n?`Editing ${n} tree at level ${e.level}.`:"Select a class (or equip a class weapon) to start editing an ability tree."}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Me,{variant:"ghost",onClick:y,disabled:!n||v===0,children:"Reset Tree"}),h.jsx(Me,{onClick:()=>e.onOpenChange(!1),children:"Done"})]})]}),children:e.loading?h.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-4 text-sm text-[var(--wb-muted)]",children:"Loading ability tree data..."}):e.error?h.jsx("div",{className:"rounded-xl border border-rose-400/30 bg-rose-400/8 p-4 text-sm text-rose-100",children:e.error}):n?!s||!r?h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-4 text-sm text-[var(--wb-muted)]",children:["No ability tree data available for ",n,"."]}):h.jsxs("div",{className:"grid min-h-0 grid-cols-1 gap-3 xl:grid-cols-[minmax(0,1fr)_360px]",children:[h.jsxs("div",{className:"min-h-0 space-y-3",children:[h.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-4",children:[h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"AP"}),h.jsxs("div",{className:"mt-1 text-lg font-semibold",children:[r.apUsed," / ",r.apCap]}),h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[r.apRemaining," left"]})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Selected"}),h.jsx("div",{className:"mt-1 text-lg font-semibold",children:r.activeIds.length}),h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[r.availableIds.length," available next"]})]}),h.jsxs("div",{className:"wb-card p-3 sm:col-span-2",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2 text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:[h.jsx(uT,{size:12}),"Archetypes"]}),h.jsx("div",{className:"flex flex-wrap gap-1",children:Object.keys(r.archetypeCounts).length===0?h.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:"No archetype points yet."}):Object.entries(r.archetypeCounts).map(([S,_])=>h.jsxs("span",{className:"wb-chip",children:[S,": ",_]},S))})]})]}),r.errors.length>0?h.jsxs("div",{className:"rounded-xl border border-amber-400/25 bg-amber-400/8 p-3",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2 text-xs font-semibold text-amber-100",children:[h.jsx(mT,{size:14}),"Tree Validation (",r.hardErrors?"hard":"soft"," issues)"]}),h.jsx(Ji,{className:"max-h-28",children:h.jsx("div",{className:"grid gap-1",children:r.errors.map((S,_)=>h.jsx("div",{className:"text-xs text-amber-100/95",children:S},`${S}-${_}`))})})]}):null,h.jsx(Qi,{title:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(yb,{size:14}),n," Tree"]}),headerRight:h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:e.selectedClass?"Using selected class":e.inferredClass?"Using weapon-inferred class":""}),className:"min-h-0",children:h.jsx(Ji,{className:"max-h-[52vh] p-3",children:h.jsx("div",{className:"atree-grid-container rounded-xl border border-[var(--wb-border-muted)] p-2",children:h.jsx("div",{className:"grid gap-2",style:b,children:s.nodes.map(S=>{const _=r.nodeStatusById[S.id],T=!!_?.active,j=!!_?.selectable,k=!!_?.hardBlocked,R=T?"atree-node--active":j?"atree-node--selectable":k?"atree-node--blocked":"atree-node--default";return h.jsxs("button",{type:"button",className:`atree-node ${R}`,style:{gridColumnStart:S.display.col+1,gridRowStart:S.display.row+1},title:_?.reason??"",onClick:()=>p(S.id),onMouseEnter:()=>u(S.id),onFocus:()=>u(S.id),children:[h.jsxs("div",{className:"text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:["#",S.id]}),h.jsx("div",{className:"mt-1 text-xs font-semibold leading-tight",children:tO(S.displayName)}),h.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2 text-[10px]",children:[h.jsxs("span",{className:"text-[var(--wb-muted)]",children:["AP ",S.cost]}),S.archetype?h.jsx("span",{className:"wb-chip px-1.5 py-0.5",children:S.archetype}):null]})]},S.id)})})})})})]}),h.jsxs("div",{className:"min-h-0 space-y-3",children:[h.jsx(Qi,{title:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(KE,{size:14}),"Node Details"]}),className:"min-h-0",children:h.jsx("div",{className:"space-y-3 p-3",children:d?h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-base font-semibold",children:d.displayName}),h.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[h.jsxs("span",{className:"wb-chip",children:["AP ",d.cost]}),d.archetype?h.jsx("span",{className:"wb-chip",children:d.archetype}):null,d.archetypeReq>0?h.jsxs("span",{className:"wb-chip",children:["Req ",d.reqArchetype||d.archetype||"Archetype",": ",d.archetypeReq]}):null,r.nodeStatusById[d.id]?.reason?h.jsx("span",{className:"wb-chip text-amber-100",children:r.nodeStatusById[d.id]?.reason}):null]})]}),h.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs leading-relaxed text-[var(--wb-text)] [&_br]:block [&_br]:content-[''] [&_span]:text-inherit",dangerouslySetInnerHTML:{__html:d.descriptionHtml||'<span class="text-slate-400">No description.</span>'}}),h.jsxs("div",{className:"grid gap-2 text-xs",children:[h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Parents"}),h.jsx("div",{className:"mt-1",children:d.parents.length===0?"Root node":d.parents.map(S=>s.nodeById.get(S)?.displayName??`#${S}`).join("  ")})]}),d.dependencies.length>0?h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Dependencies"}),h.jsx("div",{className:"mt-1",children:d.dependencies.map(S=>s.nodeById.get(S)?.displayName??`#${S}`).join("  ")})]}):null,d.blockers.length>0?h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Blockers"}),h.jsx("div",{className:"mt-1",children:d.blockers.map(S=>s.nodeById.get(S)?.displayName??`#${S}`).join("  ")})]}):null]})]}):h.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs text-[var(--wb-muted)]",children:"Hover or focus an ability node to inspect it here."})})}),h.jsx(Qi,{title:"Selected Abilities",className:"min-h-0",children:h.jsx(Ji,{className:"max-h-[28vh] p-3",children:r.activeIds.length===0?h.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs text-[var(--wb-muted)]",children:"No abilities selected yet."}):h.jsx("div",{className:"grid gap-1",children:r.activeIds.map(S=>{const _=s.nodeById.get(S);return _?h.jsx(at,{className:"justify-start text-left",active:c===S,onClick:()=>u(S),title:`AP ${_.cost}`,children:_.displayName},S):null})})})})]})]}):h.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-4 text-sm text-[var(--wb-muted)]",children:"Pick a class in the Workbench header, or equip a weapon so Workbench can infer the class and load the correct ability tree."})})}const sO=["helmet","chestplate","leggings","boots"],iO=["spear","wand","dagger","bow","relik"],lO=["ring","bracelet","necklace"],rO=["HELMET","CHESTPLATE","LEGGINGS","BOOTS","RELIK","WAND","SPEAR","DAGGER","BOW","RING","NECKLACE","BRACELET","POTION","SCROLL","FOOD"],oO=["1-3","3-5","5-7","7-9","10-13","13-15","15-17","17-19","20-23","23-25","25-27","27-29","30-33","33-35","35-37","37-39","40-43","43-45","45-47","47-49","50-53","53-55","55-57","57-59","60-63","63-65","65-67","67-69","70-73","73-75","75-77","77-79","80-83","83-85","85-87","87-89","90-93","93-95","95-97","97-99","100-103","103-105"],TS=["SLOW","NORMAL","FAST"];function Xh(e){const n=e.toLowerCase();return sO.includes(n)?"armor":iO.includes(n)?"weapon":lO.includes(n)?"accessory":"consumable"}const NS={offense:1,defense:.6,utility:.4,skillPoints:.3,reqPenalty:.5},Ws={recipeType:"HELMET",levelRange:"103-105",matTiers:null,atkSpd:null,weights:NS,mustIncludeIngredients:[],excludedIngredients:[],topN:30,topKPerSlot:120,beamWidth:400,target:{},maxReqs:[null,null,null,null,null]},Ts=4e3,P0=[0,1,1.25,1.4],gh=["e","t","w","f","a"],cO=[{min:3,max:6,convert:17,defPlus:2,defMinus:1},{min:5,max:8,convert:21,defPlus:4,defMinus:2},{min:6,max:10,convert:25,defPlus:8,defMinus:3},{min:7,max:10,convert:31,defPlus:14,defMinus:5},{min:9,max:11,convert:38,defPlus:22,defMinus:9},{min:11,max:13,convert:46,defPlus:30,defMinus:13},{min:1,max:8,convert:9,defPlus:3,defMinus:1},{min:1,max:12,convert:11,defPlus:5,defMinus:1},{min:2,max:15,convert:13,defPlus:9,defMinus:2},{min:3,max:15,convert:17,defPlus:14,defMinus:4},{min:4,max:17,convert:22,defPlus:20,defMinus:7},{min:5,max:20,convert:28,defPlus:28,defMinus:10},{min:3,max:4,convert:13,defPlus:3,defMinus:1},{min:4,max:6,convert:15,defPlus:6,defMinus:1},{min:5,max:8,convert:17,defPlus:11,defMinus:2},{min:6,max:8,convert:21,defPlus:18,defMinus:4},{min:7,max:10,convert:26,defPlus:28,defMinus:7},{min:9,max:11,convert:32,defPlus:40,defMinus:10},{min:2,max:5,convert:14,defPlus:3,defMinus:1},{min:4,max:8,convert:16,defPlus:5,defMinus:2},{min:5,max:9,convert:19,defPlus:9,defMinus:3},{min:6,max:9,convert:24,defPlus:16,defMinus:5},{min:8,max:10,convert:30,defPlus:25,defMinus:9},{min:10,max:12,convert:37,defPlus:36,defMinus:13},{min:2,max:6,convert:11,defPlus:3,defMinus:1},{min:3,max:10,convert:14,defPlus:6,defMinus:2},{min:4,max:11,convert:17,defPlus:10,defMinus:3},{min:5,max:11,convert:22,defPlus:16,defMinus:5},{min:7,max:12,convert:28,defPlus:24,defMinus:9},{min:8,max:14,convert:35,defPlus:34,defMinus:13}];function uO(e){return e/6|0}function dO(e){return gh[uO(e)]}function fO(e){const n=[[100,100],[100,100],[100,100]];for(let s=0;s<6;s++){const r=e[s].posMods,c=Math.floor(s/2),u=s%2;if(r.above!==0)for(let d=c-1;d>=0;d--)n[d][u]+=r.above;if(r.under!==0)for(let d=c+1;d<3;d++)n[d][u]+=r.under;if(r.left!==0&&u===1&&(n[c][u-1]+=r.left),r.right!==0&&u===0&&(n[c][u+1]+=r.right),r.touching!==0)for(let d=0;d<3;d++)for(let m=0;m<2;m++)(Math.abs(d-c)===1&&m===u||d===c&&Math.abs(m-u)===1)&&(n[d][m]+=r.touching);if(r.notTouching!==0)for(let d=0;d<3;d++)for(let m=0;m<2;m++)(Math.abs(d-c)>1||Math.abs(d-c)===1&&Math.abs(m-u)===1)&&(n[d][m]+=r.notTouching)}return n.flat()}function Qh(e,n,s,i){const r=e.type.toLowerCase(),c=Xh(r);let u=!0;for(const ce of s)if(ce.id!==Ts){u=!1;break}let d=0,m=0;(c==="weapon"||c==="armor")&&(e.lvl[0]<30?d=1:e.lvl[0]<70?d=2:d=3),c==="consumable"&&(e.lvl[0]<30?m=1:e.lvl[0]<70?m=2:m=3,u&&(m=3));const p=e.materials.map(ce=>ce.amount),y=(P0[n[0]]*p[0]+P0[n[1]]*p[1])/(p[0]+p[1]);let v=[e.durability[0],e.durability[1]],b=[e.duration[0],e.duration[1]];c==="consumable"?(u&&(b=[e.basicDuration[0],e.basicDuration[1]]),b=[Math.round(b[0]*y),Math.round(b[1]*y)]):v=[Math.round(v[0]*y),Math.round(v[1]*y)];const S=e.healthOrDamage[0],_=e.healthOrDamage[1];let T=0,j=0,k="0-0",R="0-0";const P={e:0,t:0,w:0,f:0,a:0};if(c==="armor")T=Math.floor(_*y),j=Math.floor(S*y);else if(c==="weapon"){let ce=2.05;i==="SLOW"?ce/=1.5:i==="NORMAL"?ce=1:i==="FAST"&&(ce/=2.5);const $=Math.floor(Math.floor(S*y)*ce),W=Math.floor(Math.floor(_*y)*ce);R=`${Math.floor($*.9)}-${Math.floor($*1.1)}`,k=`${Math.floor(W*.9)}-${Math.floor(W*1.1)}`}else c==="consumable"&&u&&(T=Math.floor(_*y),j=Math.floor(S*y));if(c==="armor"||c==="accessory"){for(const ce of s)if(ce.isPowder&&ce.pid!=null){const $=cO[ce.pid],W=dO(ce.pid),L=gh[(gh.indexOf(W)+4)%5];P[W]=(P[W]||0)+$.defPlus,P[L]=(P[L]||0)-$.defMinus}}const B=fO(s),q=[0,0,0,0,0],M={},C={};for(let ce=0;ce<6;ce++){const $=s[ce],W=B[ce]/100,L=$.itemIDs;if(c!=="consumable"){const Q=["strReq","dexReq","intReq","defReq","agiReq"];for(let ee=0;ee<Q.length;ee++){const A=L[Q[ee]];A!==0&&($.isPowder?q[ee]+=Math.round(A):q[ee]+=Math.round(A*W))}}L.dura!==0&&(v[0]+=L.dura,v[1]+=L.dura),$.consumableIDs.dura!==0&&(b[0]+=$.consumableIDs.dura,b[1]+=$.consumableIDs.dura),$.consumableIDs.charges!==0&&(m+=$.consumableIDs.charges);for(const[Q,ee]of Object.entries($.ids)){if(ee.max===0&&ee.min===0)continue;let A=ee.min,Y=ee.max;const N=[Math.floor(A*W),Math.floor(Y*W)].sort((z,X)=>z-X);A=N[0],Y=N[1],C[Q]=(C[Q]??0)+A,M[Q]=(M[Q]??0)+Y}}return v[0]=Math.max(1,Math.floor(v[0])),v[1]=Math.max(1,Math.floor(v[1])),u||(b[0]=Math.max(10,b[0]),b[1]=Math.max(10,b[1])),m=Math.max(m,c==="consumable"?1:0),{category:c,type:r,lvl:e.lvl[1],hp:T,hpLow:j,nDam:k,nDamLow:R,eDam:"0-0",tDam:"0-0",wDam:"0-0",fDam:"0-0",aDam:"0-0",eDef:P.e,tDef:P.t,wDef:P.w,fDef:P.f,aDef:P.a,atkSpd:i,durability:v,duration:b,charges:m,slots:d,reqs:[q[0],q[1],q[2],q[3],q[4]],effectiveness:B,maxRolls:M,minRolls:C}}function MS(e,n,s,i,r){const c={SLOW:0,NORMAL:1,FAST:2},u=[0];let d=0;function m(b,S){for(let _=0;_<S;_++){const T=b>>>_&1,j=d+_,k=j>>>5;for(;k>=u.length;)u.push(0);T&&(u[k]|=1<<(j&31))}d+=S}m(0,1),m(2,7);for(const b of e)m(b,12);m(n,12),m(s[0]-1,3),m(s[1]-1,3),r==="weapon"&&m(c[i]??0,4);const p=d%6;m(0,p===0?6:6-p);const y="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+-";let v="";for(let b=0;b<d;b+=6){let S=0;for(let _=0;_<6;_++){const T=b+_;T<d&&(S|=(u[T>>>5]>>>(T&31)&1)<<_)}v+=y[S]}return"CR-"+v}const jS=["sdPct","sdRaw","mdPct","mdRaw","damPct","poison","fDamPct","wDamPct","aDamPct","tDamPct","eDamPct","spPct1","spRaw1","spPct2","spRaw2","spPct3","spRaw3","spPct4","spRaw4","rSdRaw","critDamPct"],CS=["hpBonus","hprRaw","hprPct","fDefPct","wDefPct","aDefPct","tDefPct","eDefPct"],DS=["mr","ms","ls","spd","xpb","lb","ref","thorns","spRegen","eSteal","sprint","sprintReg","jh","lq","gXp","gSpd"],RS=["str","dex","int","def","agi"];function kS(e,n){let s=0;for(const i of n){const r=e.maxRolls[i]??0;r>0&&(s+=r)}return s}function hO(e,n){let s=0;for(const i of n)s+=e.maxRolls[i]??0;return s}function mO(e){let n=kS(e,jS);return e.category==="armor"&&(n+=e.hp*.02),n}function pO(e){let n=kS(e,CS);return e.category==="armor"&&(n+=e.hp*.15),n+=Math.max(0,e.eDef)+Math.max(0,e.tDef)+Math.max(0,e.wDef)+Math.max(0,e.fDef)+Math.max(0,e.aDef),n}function gO(e){let n=0;const s=e.maxRolls.mr??0,i=e.maxRolls.ms??0,r=e.maxRolls.ls??0,c=e.maxRolls.spd??0;n+=s*12+i*8+r*6+c*3;for(const u of DS){if(u==="mr"||u==="ms"||u==="ls"||u==="spd")continue;const d=e.maxRolls[u]??0;d>0&&(n+=d)}return n}function vO(e){return hO(e,RS)}function yO(e){let n=0;for(const s of e.reqs)n+=Math.max(0,s);return n}function AS(e,n){if(n==="durability")return[e.durability[0],e.durability[1]];if(n==="duration")return[e.duration[0],e.duration[1]];const s=e.maxRolls[n]??0;return[s,s]}function bO(e,n){let s=0;for(const[i,r]of Object.entries(n)){const[c,u]=AS(e,i);if(typeof r.min=="number"&&c<r.min){const d=r.min-c;s+=d*200+d*d}if(typeof r.max=="number"&&u>r.max){const d=u-r.max;s+=d*200+d*d}}return s}function OS(e,n){for(const[s,i]of Object.entries(n)){const[r,c]=AS(e,s);if(typeof i.min=="number"&&r<i.min||typeof i.max=="number"&&c>i.max)return!1}return!0}function Jh(e,n,s){const i=mO(e)*n.offense,r=pO(e)*n.defense,c=gO(e)*n.utility,u=vO(e)*n.skillPoints,d=yO(e)*n.reqPenalty,m=bO(e,s.target),p={offense:i,defense:r,utility:c,skillPoints:u,reqPenalty:d,thresholdPenalty:m};return{score:i+r+c+u-d-m,breakdown:p}}function em(e,n,s){let i=0;for(const[c,u]of Object.entries(e.ids)){const d=u.max;jS.includes(c)&&d>0?i+=d*n.offense:CS.includes(c)&&d>0?i+=d*n.defense:DS.includes(c)?c==="mr"?i+=d*12*n.utility:c==="ms"?i+=d*8*n.utility:c==="ls"?i+=d*6*n.utility:c==="spd"?i+=d*3*n.utility:d>0&&(i+=d*n.utility):RS.includes(c)&&(i+=d*n.skillPoints),s?.has(c)&&d>0&&(i+=d*50)}const r=Math.max(0,e.itemIDs.strReq)+Math.max(0,e.itemIDs.dexReq)+Math.max(0,e.itemIDs.intReq)+Math.max(0,e.itemIDs.defReq)+Math.max(0,e.itemIDs.agiReq);return i-=r*n.reqPenalty*.5,i}const xt=6,xO=.65,vh=2e3,SO=36,wO=12,_O=12,zS=10;function EO(e,n,s){const i=e.recipesByType.get(n.toUpperCase());if(!i)return null;const r=`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()}-${s}`;return i.find(c=>c.name===r)??null}function TO(e,n,s){const i=n.skill.toUpperCase(),r=n.lvl[1],c=new Set(s.excludedIngredients),u=[];for(const d of e.ingredients)d.id!==Ts&&(c.has(d.id)||d.lvl>r||d.skills.some(m=>m.toUpperCase()===i)&&u.push(d));return u}function Er(e,n){return n==="durability"?e.itemIDs.dura??0:n==="duration"?e.consumableIDs.dura??0:e.ids[n]?.max??0}function NO(e){const n=e.posMods;return n.left>0||n.right>0||n.above>0||n.under>0||n.touching>0||n.notTouching>0}function PS(e){const n=e.posMods;return Math.max(0,n.left)+Math.max(0,n.right)+Math.max(0,n.above)+Math.max(0,n.under)+Math.max(0,n.touching)+Math.max(0,n.notTouching)}function IS(e,n){let s=0;for(const i of n){const r=Er(e,i);r>0&&(s+=r)}return s}function MO(e,n,s){const i=new Set(s.mustIncludeIngredients),r=new Set(Object.keys(s.target)),c=r.size>0,u=n.map(v=>({ing:v,score:em(v,s.weights,c?r:void 0)}));u.sort((v,b)=>b.score-v.score);const d=s.topKPerSlot,m=new Set,p=[e.noIngredient];m.add(Ts);let y=0;for(const{ing:v}of u)i.has(v.id)&&!m.has(v.id)&&(m.add(v.id),p.push(v));for(const{ing:v}of u)if(!m.has(v.id)&&(m.add(v.id),p.push(v),y++,y>=d))break;if(c){const v=n.filter(S=>!m.has(S.id)).map(S=>({ing:S,tScore:Array.from(r).reduce((_,T)=>{const j=Er(S,T);return j>0?_+j:_},0)})).filter(({tScore:S})=>S>0);v.sort((S,_)=>_.tScore-S.tScore);const b=Math.min(v.length,Math.max(30,Math.floor(d/2)));for(let S=0;S<b;S++){const{ing:_}=v[S];m.has(_.id)||(m.add(_.id),p.push(_))}}return p}function BS(e,n){if(n.size===0)return 0;const s=new Set(e);let i=0;for(const r of n)s.has(r)||i++;return i}function LS(e,n){const s=n.maxReqs;for(let i=0;i<5;i++){const r=s[i];if(r!=null&&Math.max(0,e.reqs[i])>r)return!1}return!0}function qS(e,n){if(n.size===0)return!0;const s=new Set(e);for(const i of n)if(!s.has(i))return!1;return!0}function jO(e,n,s,i,r,c){const u=[];for(let y=0;y<xt;y++)y<n.length?u.push(s.ingredientsById.get(n[y])??s.noIngredient):u.push(s.noIngredient);const d=Qh(e,r,u,c),{score:m,breakdown:p}=Jh(d,i.weights,i);return{score:m,thresholdPenalty:p.thresholdPenalty}}function CO(e,n,s){const i=Math.floor(n/2),r=n%2,c=Math.floor(s/2),u=s%2;if(i===c&&r===u)return 0;let d=0;return u===r&&c<i&&(d+=e.above),u===r&&c>i&&(d+=e.under),i===c&&r===1&&u===0&&(d+=e.left),i===c&&r===0&&u===1&&(d+=e.right),(Math.abs(c-i)===1&&u===r||c===i&&Math.abs(u-r)===1)&&(d+=e.touching),(Math.abs(c-i)>1||Math.abs(c-i)===1&&Math.abs(u-r)===1)&&(d+=e.notTouching),d}function DO(e){const n=[];for(let s=0;s<xt;s++){let i=100;for(let r=0;r<xt;r++){if(r===s)continue;let c=0;for(const u of e){const d=CO(u.posMods,r,s);d>c&&(c=d)}i+=Math.max(0,c)}n[s]=Math.max(0,i)/100}return n}function I0(e,n,s){const i=Er(e,n);if(i<=0)return 0;let r=0;for(const c of s){const u=Math.ceil(i*c);u>r&&(r=u)}return r}function RO(e,n,s){if(s.size>xt)return`Unsatisfiable constraints: ${s.size} distinct must-include ingredients exceed ${xt} slots.`;const i=new Map;for(const u of e)i.set(u.id,u);for(const u of s)if(!i.has(u))return`Unsatisfiable constraints: must-include ingredient #${u} is not eligible for this recipe/level range.`;const r=DO(e),c=Math.max(0,xt-s.size);for(const[u,d]of Object.entries(n.target)){if(typeof d.min!="number"||u==="durability"||u==="duration")continue;let m=0;for(const v of e){const b=I0(v,u,r);b>m&&(m=b)}let p=0;for(const v of s){const b=i.get(v);b&&(p+=I0(b,u,r))}const y=p+c*m;if(y<d.min)return`Unsatisfiable threshold: ${u} min ${d.min} exceeds theoretical max ${y} for the current recipe/level/ingredient pool.`}return null}function kO(e,n,s,i){const r=Object.keys(s.target),c=s.maxReqs.some(S=>S!=null),u=new Set(r),d=new Set,m=[],p=new Map;for(const S of n)p.set(S.id,S);const y=S=>{!S||d.has(S.id)||(d.add(S.id),m.push(S))};y(e.noIngredient);for(const S of i)y(p.get(S));const v=n.map(S=>({ing:S,score:IS(S,r)})).filter(({score:S})=>S>0).sort((S,_)=>_.score-S.score);for(let S=0;S<Math.min(SO,v.length);S++)y(v[S].ing);const b=n.filter(NO).map(S=>({ing:S,score:PS(S)})).sort((S,_)=>_.score-S.score);for(let S=0;S<Math.min(wO,b.length);S++)y(b[S].ing);if(c){const S=n.map(_=>{const T=Math.max(0,-_.itemIDs.strReq)+Math.max(0,-_.itemIDs.dexReq)+Math.max(0,-_.itemIDs.intReq)+Math.max(0,-_.itemIDs.defReq)+Math.max(0,-_.itemIDs.agiReq);return{ing:_,reduction:T}}).filter(({reduction:_})=>_>0).sort((_,T)=>T.reduction-_.reduction);for(let _=0;_<Math.min(_O,S.length);_++)y(S[_].ing)}if(m.length<12){const S=n.map(_=>({ing:_,score:em(_,s.weights,u)})).sort((_,T)=>T.score-_.score);for(const{ing:_}of S)if(y(_),m.length>=12)break}return m}function AO(e,n,s,i,r){for(const[c,u]of Object.entries(i.target)){if(typeof u.min!="number"||c==="durability"||c==="duration")continue;let d=0;for(const p of e){const y=s.get(p);if(!y)continue;const v=Math.max(0,Er(y,c));d+=v*zS}if(d+n*(r.get(c)??0)<u.min)return!1}return!0}function OO(e){const{recipe:n,catalog:s,constraints:i,category:r,matTierOptions:c,atkSpdOptions:u,mustIncludeSet:d,eligible:m,signal:p}=e,y=Date.now();let v=!1,b=0;const S=Object.keys(i.target),_=kO(s,m,i,d);if(_.length===0)return{candidates:[],processedStates:0,timedOut:!1,detail:"Deterministic fallback had no eligible fallback ingredients to explore."};const T=new Map;for(const[D,Z]of Object.entries(i.target)){if(typeof Z.min!="number"||D==="durability"||D==="duration")continue;let re=0;for(const fe of _){const ae=Math.max(0,Er(fe,D));ae>re&&(re=ae)}T.set(D,re*zS)}const j=new Map;for(const D of _){const Z=Math.max(0,-D.itemIDs.strReq)+Math.max(0,-D.itemIDs.dexReq)+Math.max(0,-D.itemIDs.intReq)+Math.max(0,-D.itemIDs.defReq)+Math.max(0,-D.itemIDs.agiReq);j.set(D.id,{threshold:IS(D,S),support:PS(D),reqReduce:Z,rough:em(D,i.weights,new Set(S))})}const k=[..._].sort((D,Z)=>{if(D.id===Ts&&Z.id!==Ts)return 1;if(Z.id===Ts&&D.id!==Ts)return-1;const re=d.has(D.id)?1:0,fe=d.has(Z.id)?1:0;if(re!==fe)return fe-re;const ae=j.get(D.id),ce=j.get(Z.id);return!ae||!ce?0:ae.threshold!==ce.threshold?ce.threshold-ae.threshold:ae.reqReduce!==ce.reqReduce?ce.reqReduce-ae.reqReduce:ae.support!==ce.support?ce.support-ae.support:ce.rough-ae.rough}),R=new Map;for(const D of _)R.set(D.id,D);const P=new Map,B=()=>Date.now()-y>=vh?(v=!0,!0):!1,q=(D,Z)=>{if(v)return;if(p?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");if(B())return;const re=xt-D;if(!(BS(Z,d)>re)&&AO(Z,re,R,i,T)){if(D===xt){const ae=[...Z];if(!qS(ae,d))return;const ce=ae.map($=>R.get($)??s.noIngredient);for(const $ of c)for(const W of u){if(p?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");if(B())return;const L=Qh(n,$,ce,W);if(b++,!LS(L,i)||!OS(L,i.target))continue;const{score:Q,breakdown:ee}=Jh(L,i.weights,i),A=MS(ae,n.id,$,W,r),Y=ae.join(",")+"|"+$.join(",")+"|"+W,N=P.get(Y);(!N||Q>N.score)&&P.set(Y,{recipeId:n.id,ingredientIds:ae,matTiers:$,atkSpd:W,effectiveness:L.effectiveness,stats:L,score:Q,scoreBreakdown:ee,hash:A})}return}for(const ae of k)if(Z.push(ae.id),q(D+1,Z),Z.pop(),v)return}};q(0,[]);const M=Array.from(P.values());M.sort((D,Z)=>Z.score-D.score);const C=M.slice(0,i.topN);return{candidates:C,processedStates:b,timedOut:v,detail:v?`Deterministic fallback hit ${vh}ms time budget after ${b} evaluated states.`:`Deterministic fallback evaluated ${b} states and found ${C.length} threshold-satisfying candidates.`}}function US(e){const{catalog:n,constraints:s,signal:i,onProgress:r,alreadyThresholdRescue:c=!1}=e,u=EO(n,s.recipeType,s.levelRange);if(!u)return r?.({phase:"complete",processedStates:0,beamSize:0,expandedSlots:0,totalSlots:xt,detail:`No recipe found for ${s.recipeType}-${s.levelRange}.`}),[];const d=Xh(u.type.toLowerCase()),m=new Set(s.mustIncludeIngredients),p=Object.keys(s.target).length>0,y=TO(n,u,s);if(y.length===0)return r?.({phase:"complete",processedStates:0,beamSize:0,expandedSlots:0,totalSlots:xt,detail:"No eligible ingredients remain after recipe, level, and exclusion filters."}),[];const v=RO(y,s,m);if(v)return r?.({phase:"complete",processedStates:0,beamSize:0,expandedSlots:0,totalSlots:xt,detail:v}),[];const b=MO(n,y,s);if(b.length===0)return[];const S=s.matTiers?[s.matTiers]:[[1,1],[1,2],[1,3],[2,1],[2,2],[2,3],[3,1],[3,2],[3,3]],_=d==="weapon"?s.atkSpd?[s.atkSpd]:[...TS]:["SLOW"],T=S[S.length-1],j=_[0],k=s.beamWidth;let R=0;const P=m.size>0?1e6:0;let B=[{ingredientIds:[],score:0,thresholdPenalty:p?Number.POSITIVE_INFINITY:0,missingMust:m.size}];for(let ae=0;ae<xt;ae++){if(i?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");const ce=[];for(const L of B)for(const Q of b){if(i?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");const ee=[...L.ingredientIds,Q.id],A=jO(u,ee,n,s,T,j),Y=BS(ee,m);let N=A.score;P>0&&Y===0&&(N+=P),ce.push({ingredientIds:ee,score:N,thresholdPenalty:A.thresholdPenalty,missingMust:Y}),R++}const $=new Set,W=(L,Q)=>{for(const ee of L){const A=ee.ingredientIds.join(",");if(!$.has(A)&&($.add(A),Q.push(ee),Q.length>=k))break}};if(p){const L=Math.max(1,Math.floor(k*xO)),Q=Math.max(1,k-L),ee=[...ce].sort((N,z)=>z.score-N.score).slice(0,L),A=[...ce].sort((N,z)=>N.missingMust!==z.missingMust?N.missingMust-z.missingMust:N.thresholdPenalty!==z.thresholdPenalty?N.thresholdPenalty-z.thresholdPenalty:z.score-N.score).slice(0,Q),Y=[];W(ee,Y),Y.length<k&&W(A,Y),Y.length<k&&W(ce.sort((N,z)=>z.score-N.score),Y),B=Y.slice(0,k)}else{const L=[];W(ce.sort((Q,ee)=>ee.score-Q.score),L),B=L.slice(0,k)}r?.({phase:"beam-search",processedStates:R,beamSize:B.length,expandedSlots:ae+1,totalSlots:xt,detail:p?`Dual-lane prune (score + threshold) on pool=${b.length}`:`Score-lane prune on pool=${b.length}`})}r?.({phase:"material-sweep",processedStates:R,beamSize:B.length,expandedSlots:xt,totalSlots:xt,detail:`Sweeping ${S.length} tier combos x ${_.length} atk speeds`});const q=new Map;for(const ae of B){if(i?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");const ce=ae.ingredientIds,$=ce.map(W=>n.ingredientsById.get(W)??n.noIngredient);for(const W of S)for(const L of _){const Q=Qh(u,W,$,L),{score:ee,breakdown:A}=Jh(Q,s.weights,s),Y=MS(ce,u.id,W,L,d),N=ce.join(",")+"|"+W.join(",")+"|"+L,z=q.get(N);(!z||ee>z.score)&&q.set(N,{recipeId:u.id,ingredientIds:ce,matTiers:W,atkSpd:L,effectiveness:Q.effectiveness,stats:Q,score:ee,scoreBreakdown:A,hash:Y}),R++}}const M=Array.from(q.values());M.sort((ae,ce)=>ce.score-ae.score);const C=new Set,D=[],Z=[];for(const ae of M)C.has(ae.hash)||(C.add(ae.hash),qS(ae.ingredientIds,m)&&LS(ae.stats,s)&&(p&&OS(ae.stats,s.target)?D.push(ae):Z.push(ae)));if(p&&D.length===0&&!c){const ae={...s,topKPerSlot:Math.min(400,Math.max(s.topKPerSlot*2,180)),beamWidth:Math.min(5e3,Math.max(s.beamWidth*2,1200))};if(ae.topKPerSlot!==s.topKPerSlot||ae.beamWidth!==s.beamWidth){r?.({phase:"threshold-rescue",processedStates:R,beamSize:B.length,expandedSlots:xt,totalSlots:xt,detail:`No candidates satisfied thresholds. Retrying beam with topK=${ae.topKPerSlot}, beam=${ae.beamWidth}.`});const W=US({catalog:n,constraints:ae,signal:i,onProgress:r,alreadyThresholdRescue:!0});if(W.length>0)return W}r?.({phase:"deterministic-fallback",processedStates:R,beamSize:0,expandedSlots:xt,totalSlots:xt,detail:`Beam search produced no threshold-satisfying candidates. Running deterministic fallback (<=${vh}ms).`});const $=OO({recipe:u,catalog:n,constraints:s,category:d,matTierOptions:S,atkSpdOptions:_,mustIncludeSet:m,eligible:y,signal:i});return R+=$.processedStates,$.candidates.length>0?(r?.({phase:"complete",processedStates:R,beamSize:$.candidates.length,expandedSlots:xt,totalSlots:xt,detail:`Beam/rescue found 0 threshold-satisfying candidates. ${$.detail}`}),$.candidates):(r?.({phase:"complete",processedStates:R,beamSize:0,expandedSlots:xt,totalSlots:xt,detail:$.timedOut?`No valid candidates found before timeout. ${$.detail}`:`No candidates satisfy all hard thresholds. ${$.detail}`}),[])}const re=p?D.slice(0,s.topN):Z.slice(0,s.topN),fe=D.length;return r?.({phase:"complete",processedStates:R,beamSize:re.length,expandedSlots:xt,totalSlots:xt,detail:p?fe>0?`Found ${re.length} candidates (${fe} satisfy thresholds) from ${R} states`:`Found 0 candidates satisfying thresholds (${Z.length} failed threshold checks) from ${R} states`:`Found ${re.length} candidates from ${R} states`}),re}class zO{worker=null;requestId=0;currentReject=null;currentRequestId=null;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL(""+new URL("worker-runtime-eivtBpT4.js",import.meta.url).href,import.meta.url),{type:"module"}))}async run(n,s,i={}){if(!this.worker)return US({catalog:n,constraints:s,onProgress:i.onProgress,signal:i.signal});const r=++this.requestId;return this.currentRequestId=r,new Promise((c,u)=>{this.currentReject=u;const d=()=>{this.worker?.postMessage({type:"cancel",requestId:r}),u(new DOMException("Recipe solver cancelled","AbortError"))};i.signal?.addEventListener("abort",d,{once:!0});const m=p=>{const y=p.data;if(y.requestId===r){if(y.type==="progress"){i.onProgress?.(y.progress);return}if(this.worker?.removeEventListener("message",m),i.signal?.removeEventListener("abort",d),this.currentReject=null,this.currentRequestId=null,y.type==="error"){u(new Error(y.message));return}c(y.candidates)}};this.worker.addEventListener("message",m),this.worker.postMessage({type:"run",requestId:r,catalog:n,constraints:s})})}cancelCurrent(){this.currentRequestId!==null&&(this.worker?.postMessage({type:"cancel",requestId:this.currentRequestId}),this.currentReject?.(new DOMException("Recipe solver cancelled","AbortError")),this.currentReject=null,this.currentRequestId=null)}dispose(){this.worker?.terminate(),this.worker=null}}function nr(e){return e?[e.minimum,e.maximum]:[0,0]}function PO(e){const n={item:e.materials[0].item,amount:e.materials[0].amount},s={item:e.materials[1].item,amount:e.materials[1].amount};return{id:e.id,name:e.name,type:e.type,skill:e.skill,materials:[n,s],healthOrDamage:nr(e.healthOrDamage),durability:nr(e.durability),duration:nr(e.duration),basicDuration:nr(e.basicDuration),lvl:nr(e.lvl)}}function IO(e){const n={};if(e.ids)for(const[c,u]of Object.entries(e.ids))u&&typeof u=="object"&&"minimum"in u&&(n[c]={min:u.minimum,max:u.maximum});const s={left:e.posMods?.left??0,right:e.posMods?.right??0,above:e.posMods?.above??0,under:e.posMods?.under??0,touching:e.posMods?.touching??0,notTouching:e.posMods?.notTouching??0},i={dura:e.itemIDs?.dura??0,strReq:e.itemIDs?.strReq??0,dexReq:e.itemIDs?.dexReq??0,intReq:e.itemIDs?.intReq??0,defReq:e.itemIDs?.defReq??0,agiReq:e.itemIDs?.agiReq??0},r={dura:e.consumableIDs?.dura??0,charges:e.consumableIDs?.charges??0};return{id:e.id,name:e.name,displayName:e.displayName??e.name,lvl:e.lvl,tier:e.tier,skills:e.skills??[],ids:n,itemIDs:i,consumableIDs:r,posMods:s,isPowder:e.isPowder,pid:e.pid}}function BO(){return{id:Ts,name:"No Ingredient",displayName:"No Ingredient",lvl:0,tier:0,skills:[],ids:{},itemIDs:{dura:0,strReq:0,dexReq:0,intReq:0,defReq:0,agiReq:0},consumableIDs:{dura:0,charges:0},posMods:{left:0,right:0,above:0,under:0,touching:0,notTouching:0}}}function LO(e,n){const s=new Map,i=new Map;for(const p of e){s.set(p.id,p);const y=p.type.toUpperCase(),v=i.get(y)??[];v.push(p),i.set(y,v)}const r=BO(),c=[r,...n],u=new Map,d=new Map,m=new Map;for(const p of c){u.set(p.id,p),m.set(p.name.toLowerCase(),p.id),p.displayName&&m.set(p.displayName.toLowerCase(),p.id);for(const y of p.skills){const v=y.toUpperCase(),b=d.get(v)??[];b.push(p),d.set(v,b)}}return{recipes:e,recipesById:s,recipesByType:i,ingredients:c,ingredientsById:u,ingredientsBySkill:d,ingredientIdByName:m,noIngredient:r}}async function B0(e){let n=null;for(const s of e)try{const i=await fetch(s,{cache:"force-cache"});if(!i.ok)throw new Error(`HTTP ${i.status} for ${s}`);return await i.json()}catch(i){n=i}throw n instanceof Error?n:new Error("Failed to fetch data")}class qO{snapshotPromise=null;async getCatalog(){return this.snapshotPromise||(this.snapshotPromise=this.load()),this.snapshotPromise}async load(){const n=m=>{if(typeof window>"u")return m;const p=window.location.href.split("?")[0].replace(/\/[^/]*$/,"/")||window.location.origin+"/";return new URL(m,p).href},s=[n("recipes_compress.json"),"./recipes_compress.json","../recipes_compress.json","recipes_compress.json"],i=[n("ingreds_compress.json"),"./ingreds_compress.json","../ingreds_compress.json","ingreds_compress.json"],[r,c]=await Promise.all([B0(s),B0(i)]),u=r.recipes.map(PO),d=c.map(IO);return LO(u,d)}}const UO=new qO,$O={helmet:"helmet",chestplate:"chestplate",leggings:"leggings",boots:"boots",ring:"ring1",bracelet:"bracelet",necklace:"necklace",spear:"weapon",bow:"weapon",wand:"weapon",dagger:"weapon",relik:"weapon"},HO={advancedIds:"Advanced IDs only",balanced:"Balanced",offense:"Offense",defense:"Defense",utility:"Utility / Sustain",skillpoints:"Skill Points"},ZO=["advancedIds","balanced","offense","defense","utility","skillpoints"];function FO(e){const n={...NS};switch(e){case"advancedIds":return{offense:.25,defense:.25,utility:.25,skillPoints:.25,reqPenalty:.25};case"offense":return{offense:2,defense:0,utility:0,skillPoints:0,reqPenalty:0};case"defense":return{offense:0,defense:2,utility:0,skillPoints:0,reqPenalty:0};case"utility":return{offense:0,defense:0,utility:2,skillPoints:0,reqPenalty:0};case"skillpoints":return{offense:0,defense:0,utility:0,skillPoints:2,reqPenalty:0};default:return n}}const GO={durability:"Durability",duration:"Duration",sdPct:"Spell Dmg %",sdRaw:"Spell Dmg Raw",mdPct:"Melee Dmg %",mdRaw:"Melee Dmg Raw",damPct:"Damage %",poison:"Poison",hpBonus:"HP Bonus",hprRaw:"HPR Raw",hprPct:"HPR %",mr:"Mana Regen",ms:"Mana Steal",ls:"Life Steal",spd:"Walk Speed",xpb:"XP Bonus",lb:"Loot Bonus",ref:"Reflection",thorns:"Thorns",expd:"Exploding",str:"STR",dex:"DEX",int:"INT",def:"DEF",agi:"AGI",eDamPct:"Earth Dmg %",tDamPct:"Thunder Dmg %",wDamPct:"Water Dmg %",fDamPct:"Fire Dmg %",aDamPct:"Air Dmg %",nDamPct:"Neutral Dmg %",rDamPct:"Elem Dmg %",eDefPct:"Earth Def %",tDefPct:"Thunder Def %",wDefPct:"Water Def %",fDefPct:"Fire Def %",aDefPct:"Air Def %",rDefPct:"Elem Def %",atkTier:"Atk Speed Bonus",spRegen:"Soul Point Regen",eSteal:"Emerald Steal",rSdRaw:"Rainbow Spell Raw",critDamPct:"Crit Damage %",spPct1:"1st Spell Cost %",spRaw1:"1st Spell Cost Raw",spPct2:"2nd Spell Cost %",spRaw2:"2nd Spell Cost Raw",spPct3:"3rd Spell Cost %",spRaw3:"3rd Spell Cost Raw",spPct4:"4th Spell Cost %",spRaw4:"4th Spell Cost Raw",sprint:"Sprint",sprintReg:"Sprint Regen",jh:"Jump Height",lq:"Loot Quality",gXp:"Gather XP",gSpd:"Gather Speed",healPct:"Healing %",kb:"Knockback",weakenEnemy:"Weaken Enemy",slowEnemy:"Slow Enemy",maxMana:"Max Mana",mainAttackRange:"Main Attack Range",eDamRaw:"Earth Dmg Raw",tDamRaw:"Thunder Dmg Raw",wDamRaw:"Water Dmg Raw",fDamRaw:"Fire Dmg Raw",aDamRaw:"Air Dmg Raw",nDamRaw:"Neutral Dmg Raw",damRaw:"Damage Raw",rDamRaw:"Elem Dmg Raw"},L0=["durability","duration","hprPct","mr","sdPct","mdPct","ls","ms","xpb","lb","ref","thorns","expd","spd","atkTier","poison","hpBonus","spRegen","eSteal","hprRaw","sdRaw","mdRaw","fDamPct","wDamPct","aDamPct","tDamPct","eDamPct","nDamPct","rDamPct","damPct","fDefPct","wDefPct","aDefPct","tDefPct","eDefPct","rDefPct","spPct1","spRaw1","spPct2","spRaw2","spPct3","spRaw3","spPct4","spRaw4","rSdRaw","sprint","sprintReg","jh","lq","gXp","gSpd","eDamRaw","tDamRaw","wDamRaw","fDamRaw","aDamRaw","nDamRaw","damRaw","rDamRaw","critDamPct","healPct","maxMana","str","dex","int","def","agi"];function $S(e){return GO[e]??e}const ac={HELMET:"ARMOURING",CHESTPLATE:"TAILORING",LEGGINGS:"TAILORING",BOOTS:"TAILORING",SPEAR:"WEAPONSMITHING",DAGGER:"WEAPONSMITHING",WAND:"WOODWORKING",BOW:"WOODWORKING",RELIK:"WOODWORKING",RING:"JEWELING",NECKLACE:"JEWELING",BRACELET:"JEWELING",POTION:"ALCHEMISM",SCROLL:"SCRIBING",FOOD:"COOKING"};function YO(e){const n=w.useRef(null);n.current||(n.current=new zO);const[s,i]=w.useState(null),[r,c]=w.useState(null),[u,d]=w.useState("HELMET"),[m,p]=w.useState("103-105"),[y,v]=w.useState("auto"),[b,S]=w.useState(3),[_,T]=w.useState(3),[j,k]=w.useState("auto"),[R,P]=w.useState("FAST"),[B,q]=w.useState("advancedIds"),[M,C]=w.useState(""),[D,Z]=w.useState(""),[re,fe]=w.useState([]),ae=w.useRef(1),[ce,$]=w.useState(Ws.beamWidth),[W,L]=w.useState(Ws.topKPerSlot),[Q,ee]=w.useState(Ws.topN),[A,Y]=w.useState([null,null,null,null,null]),[N,z]=w.useState([]),[X,ue]=w.useState(""),[oe,le]=w.useState(!1),[be,De]=w.useState(null),[me,we]=w.useState(null),[Re,Xe]=w.useState(null),Wt=w.useRef(null),et=Xh(u.toLowerCase())==="weapon";w.useEffect(()=>{e.open&&(s||UO.getCatalog().then(i).catch(de=>{c(de instanceof Error?de.message:"Failed to load crafting data")}))},[e.open,s]);const ln=w.useMemo(()=>{if(!s)return 0;const de=ac[u]??"";return s.ingredientsBySkill.get(de)?.length??0},[s,u]);function Nt(de){if(!s)return{ids:[],unknown:[]};const ke=de.split(",").map(Le=>Le.trim()).filter(Boolean),Pe=[],Fe=[];for(const Le of ke){const Qt=s.ingredientIdByName.get(Le.toLowerCase());Qt==null?Fe.push(Le):Pe.push(Qt)}return{ids:Pe,unknown:Fe}}const rn=de=>{navigator.clipboard.writeText(de).then(()=>{Xe(de),setTimeout(()=>Xe(null),2e3)})},Xt=async()=>{if(!s)return;De(null),z([]),we(null);const de=Nt(M),ke=Nt(D);if(de.unknown.length>0||ke.unknown.length>0){De([de.unknown.length?`Unknown must-include: ${de.unknown.join(", ")}`:"",ke.unknown.length?`Unknown excluded: ${ke.unknown.join(", ")}`:""].filter(Boolean).join(" | "));return}const Pe=(ac[u]??"").toUpperCase(),Fe=[];for(const We of de.ids){const V=s.ingredientsById.get(We);V&&!V.skills.some(pe=>pe.toUpperCase()===Pe)&&Fe.push(V.displayName||V.name)}if(Fe.length>0){De(`${Fe.join(", ")} cannot be used for ${u} (${Pe})  they require a different profession.`);return}const Le={};for(const We of re)We.key&&(We.min==null&&We.max==null||(Le[We.key]={min:We.min??void 0,max:We.max??void 0}));const Qt={...Ws,recipeType:u,levelRange:m,matTiers:y==="manual"?[b,_]:null,atkSpd:et&&j==="manual"?R:null,weights:FO(B),mustIncludeIngredients:de.ids,excludedIngredients:ke.ids,topN:Math.max(1,Math.min(100,Q)),topKPerSlot:Math.max(10,Math.min(300,W)),beamWidth:Math.max(20,Math.min(3e3,ce)),target:Le,maxReqs:A};Wt.current?.abort();const pt=new AbortController;Wt.current=pt,le(!0),ue("Starting...");let Ut="";try{const We=await n.current.run(s,Qt,{signal:pt.signal,onProgress:V=>{V.detail&&(Ut=V.detail),we(V),ue(`${V.phase}: ${V.expandedSlots}/${V.totalSlots} slots, beam ${V.beamSize}, states ${V.processedStates}${V.detail?` | ${V.detail}`:""}`)}});z(We),We.length===0?De(Ut?`No valid candidates found. ${Ut}`:"No valid candidates found. Try relaxing constraints, increasing beam width/top K, or choosing a different recipe."):ue(`Done. ${We.length} candidates found.`)}catch(We){We instanceof DOMException&&We.name==="AbortError"?ue("Cancelled"):(De(We instanceof Error?We.message:"Recipe solver failed"),ue(""))}finally{le(!1),we(null)}},Mt=()=>{Wt.current?.abort(),n.current?.cancelCurrent(),le(!1),ue("Cancelled"),we(null)};return h.jsxs(Hh,{open:e.open,onOpenChange:e.onOpenChange,title:"Recipe Solver",description:"Find optimal ingredient combinations for crafted items. Uses beam search over the ingredient pool.",className:"!w-[min(95vw,1360px)]",footer:h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsx("div",{className:"text-sm text-[var(--wb-muted)]",children:X}),h.jsxs("div",{className:"flex gap-2",children:[oe?h.jsx(Me,{variant:"ghost",onClick:Mt,children:"Cancel"}):null,h.jsx(Me,{variant:"primary",onClick:Xt,disabled:!s||oe,children:"Solve Recipe"})]})]}),children:[r?h.jsx("div",{className:"mb-4 rounded-xl border border-rose-400/30 bg-rose-400/5 p-3 text-sm text-rose-200",children:r}):null,oe&&me?h.jsxs("div",{className:"mb-4 rounded-xl border border-sky-400/30 bg-sky-400/5 p-3",children:[h.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[h.jsx("span",{className:"rounded-md bg-sky-400/20 px-2 py-0.5 text-xs font-medium text-sky-100",children:me.phase}),me.totalSlots>0?h.jsxs("span",{className:"text-xs text-[var(--wb-muted)]",children:["Slots ",me.expandedSlots,"/",me.totalSlots]}):null]}),h.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-black/20",children:h.jsx("div",{className:"h-full rounded-full bg-sky-400/70 transition-all duration-300",style:{width:me.totalSlots>0?`${100*me.expandedSlots/me.totalSlots}%`:"0%"}})}),h.jsxs("div",{className:"mt-2 flex flex-wrap gap-4 text-xs text-[var(--wb-muted)]",children:[h.jsxs("span",{children:["States: ",me.processedStates.toLocaleString()]}),h.jsxs("span",{children:["Beam: ",me.beamSize.toLocaleString()]})]})]}):null,h.jsxs("div",{className:"grid h-[52vh] min-h-0 gap-4 overflow-hidden lg:h-[56vh] lg:grid-cols-[1fr_1fr] lg:items-stretch",children:[h.jsxs("div",{className:"grid h-full min-h-0 min-w-0 gap-3 overflow-auto pr-1 wb-scrollbar",children:[h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Recipe"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{children:[h.jsx(qe,{children:"Item Type"}),h.jsx("select",{className:"wb-select",value:u,onChange:de=>d(de.target.value),children:rO.map(de=>h.jsxs("option",{value:de,children:[de," (",ac[de],")"]},de))})]}),h.jsxs("div",{children:[h.jsx(qe,{children:"Level Range"}),h.jsx("select",{className:"wb-select",value:m,onChange:de=>p(de.target.value),children:oO.map(de=>h.jsx("option",{value:de,children:de},de))})]}),s?h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[ln," compatible ingredients in pool for ",ac[u]]}):null]})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Material Tiers"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx(at,{active:y==="auto",onClick:()=>v("auto"),children:"Auto-optimize"}),h.jsx(at,{active:y==="manual",onClick:()=>v("manual"),children:"Manual"})]}),y==="manual"?h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx(qe,{children:"Material 1 Tier"}),h.jsx("div",{className:"flex gap-2",children:[1,2,3].map(de=>h.jsx(at,{active:b===de,onClick:()=>S(de),children:de},de))})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx(qe,{children:"Material 2 Tier"}),h.jsx("div",{className:"flex gap-2",children:[1,2,3].map(de=>h.jsx(at,{active:_===de,onClick:()=>T(de),children:de},de))})]})]}):null]})]}),et?h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Attack Speed"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx(at,{active:j==="auto",onClick:()=>k("auto"),children:"Auto-optimize"}),h.jsx(at,{active:j==="manual",onClick:()=>k("manual"),children:"Manual"})]}),j==="manual"?h.jsx("div",{className:"flex gap-2",children:TS.map(de=>h.jsx(at,{active:R===de,onClick:()=>P(de),children:de},de))}):null]})]}):null,h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Optimization Goal"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:ZO.map(de=>h.jsx(at,{active:B===de,onClick:()=>q(de),children:HO[de]},de))})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Ingredient Constraints"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{children:[h.jsx(qe,{children:"Must-Include Ingredients (comma-separated)"}),h.jsx("textarea",{className:"wb-textarea min-h-16",value:M,onChange:de=>C(de.target.value),placeholder:"e.g. Blueshift Beacon, Depurinated Genome"})]}),h.jsxs("div",{children:[h.jsx(qe,{children:"Excluded Ingredients (comma-separated)"}),h.jsx("textarea",{className:"wb-textarea min-h-16",value:D,onChange:de=>Z(de.target.value),placeholder:"Blacklist ingredient names"})]})]})]}),h.jsx("div",{className:"wb-card p-3",children:h.jsxs("details",{className:"group",children:[h.jsx("summary",{className:"cursor-pointer text-sm font-semibold",children:"Advanced: Stat Thresholds"}),h.jsxs("div",{className:"mt-3 grid gap-3",children:[h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Set minimum / maximum targets for specific stats on the crafted item."}),re.map(de=>h.jsx("div",{className:"rounded-lg border border-[var(--wb-border-muted)] p-2",children:h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs("div",{children:[h.jsx(qe,{children:"Stat"}),h.jsx("select",{className:"wb-select w-full",value:de.key,onChange:ke=>fe(Pe=>Pe.map(Fe=>Fe.id===de.id?{...Fe,key:ke.target.value}:Fe)),children:L0.map(ke=>h.jsxs("option",{value:ke,children:[$S(ke)," (",ke,")"]},ke))})]}),h.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[h.jsxs("div",{className:"min-w-[80px] flex-1",children:[h.jsx(qe,{children:"Min"}),h.jsx("input",{className:"wb-input w-full",type:"number",value:de.min??"",onChange:ke=>{const Pe=ke.target.value.trim();fe(Fe=>Fe.map(Le=>Le.id===de.id?{...Le,min:Pe===""?null:Number(Pe)}:Le))}})]}),h.jsxs("div",{className:"min-w-[80px] flex-1",children:[h.jsx(qe,{children:"Max"}),h.jsx("input",{className:"wb-input w-full",type:"number",value:de.max??"",onChange:ke=>{const Pe=ke.target.value.trim();fe(Fe=>Fe.map(Le=>Le.id===de.id?{...Le,max:Pe===""?null:Number(Pe)}:Le))}})]}),h.jsx(Me,{variant:"ghost",className:"shrink-0",onClick:()=>fe(ke=>ke.filter(Pe=>Pe.id!==de.id)),children:"Remove"})]})]})},de.id)),h.jsx("div",{children:h.jsx(Me,{variant:"ghost",onClick:()=>fe(de=>[...de,{id:ae.current++,key:L0[0],min:null,max:null}]),children:"Add Threshold"})}),h.jsxs("div",{className:"mt-3 border-t border-[var(--wb-border-muted)] pt-3",children:[h.jsx(qe,{children:"Max Skill Points (Req Limit)"}),h.jsx("div",{className:"mt-1 text-[11px] text-[var(--wb-muted)]",children:"Exclude recipes that exceed any of these. Leave empty for no limit."}),h.jsx("div",{className:"mt-2 grid grid-cols-5 gap-2",children:["STR","DEX","INT","DEF","AGI"].map((de,ke)=>h.jsxs("div",{children:[h.jsx("label",{className:"mb-0.5 block text-[11px] text-[var(--wb-muted)]",children:de}),h.jsx("input",{className:"wb-input w-full",type:"number",min:0,placeholder:"",value:A[ke]??"",onChange:Pe=>{const Fe=Pe.target.value.trim();Y(Le=>{const Qt=[...Le];return Qt[ke]=Fe===""?null:Math.max(0,Number(Fe)),Qt})}})]},de))})]})]})]})}),h.jsx("div",{className:"wb-card p-3",children:h.jsxs("details",{className:"group",children:[h.jsx("summary",{className:"cursor-pointer text-sm font-semibold",children:"Search Heuristics"}),h.jsxs("div",{className:"mt-3 grid gap-3",children:[h.jsx(Za,{label:"Beam Width",value:ce,onChange:de=>$(de??Ws.beamWidth),min:20,max:3e3}),h.jsx(Za,{label:"Top K per Slot",value:W,onChange:de=>L(de??Ws.topKPerSlot),min:10,max:300}),h.jsx(Za,{label:"Top N Results",value:Q,onChange:de=>ee(de??Ws.topN),min:1,max:100})]})]})})]}),h.jsx("div",{className:"h-full min-h-0 min-w-0",children:h.jsxs("div",{className:"wb-card flex h-full min-h-0 flex-col overflow-hidden p-3",children:[h.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[h.jsx("div",{className:"text-sm font-semibold",children:"Candidates"}),h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[N.length," shown"]})]}),h.jsx("div",{className:"min-h-0 flex-1 space-y-2 overflow-auto pr-1 wb-scrollbar",children:N.length===0?h.jsx("div",{className:"rounded-xl border border-dashed border-[var(--wb-border)] p-4 text-sm text-[var(--wb-muted)]",children:"Run Recipe Solver to find optimal ingredient combinations."}):N.map((de,ke)=>h.jsx(KO,{candidate:de,index:ke,catalog:s,copiedHash:Re,onCopyHash:rn,onEquipCraft:e.onEquipCraft},`${de.hash}-${ke}`))}),be?h.jsx("div",{className:"mt-2 rounded-xl border border-rose-400/30 bg-rose-400/8 p-2 text-xs text-rose-100",children:be}):null]})})]})]})}function VO(e){return`https://hppeng-wynn.github.io/crafter/#${e.startsWith("CR-")?e.slice(3):e}`}function KO(e){const{candidate:n,index:s,catalog:i}=e,{stats:r,scoreBreakdown:c}=n,u=n.ingredientIds.map(v=>{const b=i?.ingredientsById.get(v);return b?.displayName??b?.name??`#${v}`}),d=[];for(const[v,b]of Object.entries(r.maxRolls))b!==0&&d.push({label:$S(v),value:b>0?`+${b}`:`${b}`});d.sort((v,b)=>{const S=typeof v.value=="string"?parseInt(v.value):v.value,_=typeof b.value=="string"?parseInt(b.value):b.value;return Math.abs(_)-Math.abs(S)});const m=()=>{window.open(VO(n.hash),"_blank","noopener,noreferrer")},p=$O[r.type.toLowerCase()]??null,y=()=>{p&&e.onEquipCraft&&e.onEquipCraft(p,{hash:n.hash,type:r.type,category:r.category,lvl:r.lvl})};return h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3",children:[h.jsxs("div",{className:"flex items-start justify-between gap-3",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"text-sm font-semibold",children:["#",s+1," | Score ",Math.round(n.score)]}),h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Off ",Math.round(c.offense)," | Def ",Math.round(c.defense)," | ","Util ",Math.round(c.utility)," | SP ",Math.round(c.skillPoints),c.reqPenalty>0?` | Req -${Math.round(c.reqPenalty)}`:""]}),h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Mat Tiers: ",n.matTiers[0],"/",n.matTiers[1],r.category==="weapon"?` | Atk Spd: ${n.atkSpd}`:""]})]}),h.jsxs("div",{className:"flex shrink-0 flex-col gap-1",children:[h.jsx(Me,{className:"px-2 py-1 text-xs",onClick:()=>e.onCopyHash(n.hash),children:e.copiedHash===n.hash?"Copied!":"Copy Hash"}),h.jsx(Me,{variant:"ghost",className:"px-2 py-1 text-xs",onClick:m,children:"Open in Crafter"}),p?h.jsx(Me,{className:"border border-emerald-400/40 bg-emerald-400/15 px-2 py-1 text-xs text-emerald-100 hover:bg-emerald-400/25",onClick:y,children:"Use in Build"}):null]})]}),h.jsxs("div",{className:"mt-2",children:[h.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Ingredients (3x2 grid)"}),h.jsx("div",{className:"grid grid-cols-2 gap-1",children:u.map((v,b)=>h.jsxs("div",{className:"rounded-md border border-[var(--wb-border-muted)] bg-black/10 px-2 py-1 text-xs",children:[h.jsx("div",{className:"truncate",children:v}),h.jsxs("div",{className:"text-[10px] text-[var(--wb-muted)]",children:["Eff: ",n.effectiveness[b],"%"]})]},b))})]}),d.length>0?h.jsxs("div",{className:"mt-2",children:[h.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Stats (max rolls)"}),h.jsx("div",{className:"flex flex-wrap gap-1",children:d.slice(0,12).map(({label:v,value:b})=>{const S=typeof b=="string"?b.startsWith("+"):b>0;return h.jsxs("span",{className:`rounded px-1.5 py-0.5 text-[11px] ${S?"bg-emerald-400/15 text-emerald-200":"bg-rose-400/15 text-rose-200"}`,children:[v,": ",b]},v)})})]}):null,r.category==="armor"?h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["HP: ",r.hpLow,"-",r.hp," | Dur: ",r.durability[0],"-",r.durability[1],"| Reqs: [",r.reqs.join(", "),"]"]}):null,r.category==="consumable"?h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Duration: ",r.duration[0],"-",r.duration[1],"s | Charges: ",r.charges]}):null,r.category==="weapon"?h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["nDam: ",r.nDam," | Dur: ",r.durability[0],"-",r.durability[1],"| Reqs: [",r.reqs.join(", "),"]"]}):null]})}const q0="2.1.6.0";function WO(e){return typeof e=="string"&&/^\d+\.\d+\.\d+\.\d+$/.test(e)}function XO(e){return[...new Set(e)]}class QO{cache=new Map;async getDataset(n){const s=WO(n)?n:q0;return this.cache.has(s)||this.cache.set(s,this.loadDataset(s)),this.cache.get(s)}async loadDataset(n){const s=XO([n,q0]),i=[];for(const r of s){const c=this.buildUrls(r);for(const u of c)try{const d=await fetch(u,{cache:"force-cache"});if(!d.ok)throw new Error(`Failed to fetch ${u}: ${d.status}`);const m=await d.json();return WA(m,r)}catch(d){i.push(d instanceof Error?d.message:`Failed to fetch ${u}`)}}throw new Error(`Unable to load ability tree data. Tried versions: ${s.join(", ")}. ${i.slice(-4).join(" | ")}`)}buildUrls(n){return[(i=>{if(typeof window>"u")return i;const r=window.location.href.split("?")[0].replace(/\/[^/]*$/,"/")||window.location.origin+"/";return new URL(i,r).href})(`data/${n}/atree.json`),`./data/${n}/atree.json`,`../data/${n}/atree.json`,`data/${n}/atree.json`]}}const JO=new QO;class ez{numeric=new Map;maps=new Map;get(n){return this.maps.has(n)?this.maps.get(n):this.numeric.get(n)??0}getNum(n){const s=this.get(n);return typeof s=="number"?s:0}has(n){return this.maps.has(n)||this.numeric.has(n)}add(n,s){!Number.isFinite(s)||s===0||this.numeric.set(n,(this.numeric.get(n)??0)+s)}set(n,s){Number.isFinite(s)&&this.numeric.set(n,s)}getMap(n){let s=this.maps.get(n);return s||(s=new Map,this.maps.set(n,s)),s}addMap(n,s,i){if(!Number.isFinite(i)||i===0)return;const r=this.getMap(n);r.set(s,(r.get(s)??0)+i)}}const U0=["str","dex","int","def","agi"],tz=["e","t","w","f","a"],qn=["n",...tz],yh=["SUPER_SLOW","VERY_SLOW","SLOW","NORMAL","FAST","VERY_FAST","SUPER_FAST"],bh=[.51,.83,1.5,2.05,2.5,3.1,4.3],nz=[1,1,1,.867,.951],az=[1,1,.5/Qc(150),.867,.951],sz=["nDam","eDam","tDam","wDam","fDam","aDam"],iz=["Super Slow","Very Slow","Slow","Normal","Fast","Very Fast","Super Fast"],$0=["str","dex","int","def","agi","sdPct","sdRaw","mdPct","mdRaw","atkTier","damPct","damRaw","rSdPct","rSdRaw","rMdPct","rMdRaw","rDamPct","rDamRaw","critDamPct","healPct","spPct1","spPct2","spPct3","spPct4","spRaw1","spRaw2","spRaw3","spRaw4","spPct1Final","spPct2Final","spPct3Final","spPct4Final","nSdPct","eSdPct","tSdPct","wSdPct","fSdPct","aSdPct","nMdPct","eMdPct","tMdPct","wMdPct","fMdPct","aMdPct","nDamPct","eDamPct","tDamPct","wDamPct","fDamPct","aDamPct","nSdRaw","eSdRaw","tSdRaw","wSdRaw","fSdRaw","aSdRaw","nMdRaw","eMdRaw","tMdRaw","wMdRaw","fMdRaw","aMdRaw","nDamRaw","eDamRaw","tDamRaw","wDamRaw","fDamRaw","aDamRaw","nDamAddMin","nDamAddMax","eDamAddMin","eDamAddMax","tDamAddMin","tDamAddMax","wDamAddMin","wDamAddMax","fDamAddMin","fDamAddMax","aDamAddMin","aDamAddMax","rDamAddMin","rDamAddMax","damAddMin","damAddMax","hp","hpBonus","defMult"];function mt(e,n=0){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const s=Number(e);if(Number.isFinite(s))return s}return n}function Qc(e){if(e<=0)return 0;let n=e;n>=150&&(n=150);const s=.9908;return s/(1-s)*(1-Math.pow(s,n))/100}function lz(e){return Math.max(1,Math.min(106,Math.round(e||1)))*5+5}function rz(e){if(Array.isArray(e)&&e.length>=2)return[mt(e[0]),mt(e[1])];if(typeof e=="string"){const n=e.match(/(-?\d+(?:\.\d+)?)\s*-\s*(-?\d+(?:\.\d+)?)/);if(n)return[Number(n[1]),Number(n[2])]}return[0,0]}function oz(e){if(e.category!=="weapon")return null;const n=e.legacyRaw??{},s=sz.map(r=>rz(n[r])),i=s.map(([r,c])=>r!==0||c!==0);return{atkSpd:typeof n.atkSpd=="string"&&n.atkSpd?n.atkSpd:e.atkSpd,type:e.type,tier:typeof n.tier=="string"?n.tier:e.tier,damages:s,damagePresent:i}}function cz(e){switch(e){case"bow":return{type:"replace_spell",name:"Bow Shot",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Single Shot",parts:[{name:"Single Shot",multipliers:[100,0,0,0,0,0]}]};case"relik":return{type:"replace_spell",name:"Relik Melee",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Total",parts:[{name:"Single Beam",multipliers:[33,0,0,0,0,0]},{name:"Total",hits:{"Single Beam":3}}]};case"wand":return{type:"replace_spell",name:"Wand Melee",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Melee",parts:[{name:"Melee",multipliers:[100,0,0,0,0,0]}]};default:return{type:"replace_spell",name:"Melee",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Melee",parts:[{name:"Melee",multipliers:[100,0,0,0,0,0]}]}}}function Yi(e){return structuredClone(e)}function Zf(e,n){if(typeof n=="string"){const[s,i]=n.split("."),r=Number(s);if(!Number.isFinite(r)||!i)return 0;const c=e.get(r);return mt(c?.properties?.[i])}return mt(n)}function uz(e,n){const s=new Set(n.activeIds),i=new Map,r=c=>{const u={id:c.id,baseAbilityId:c.baseAbilityId??null,properties:Yi(c.properties??{}),effects:Yi(c.effects??[])};if(u.baseAbilityId!=null&&i.has(u.baseAbilityId)){const d=i.get(u.baseAbilityId);d.effects=d.effects.concat(u.effects);for(const[m,p]of Object.entries(u.properties))d.properties[m]=mt(d.properties[m])+mt(p);return}i.set(u.id,u)};for(const c of e.nodes)s.has(c.id)&&r(c);return i}function dz(e,n=[]){const s=new Map;for(const i of n)s.set(i.base_spell,Yi(i));for(const[,i]of e)for(const r of i.effects){if(r.type!=="replace_spell")continue;const c=mt(r.base_spell,Number.NaN);if(!Number.isFinite(c))continue;const u=Yi(r);let d=s.get(c);if(!d)d=u,s.set(c,d);else for(const[m,p]of Object.entries(u))d[m]=Yi(p);for(const m of d.parts??[]){const p=m.hits;if(p)for(const[y,v]of Object.entries(p))p[y]=Zf(e,v)}}for(const[,i]of e)for(const r of i.effects){const c=typeof r.type=="string"?r.type:"";if(c!=="replace_spell"){if(c==="add_spell_prop"){const u=mt(r.base_spell,Number.NaN);if(!Number.isFinite(u)||!s.has(u))continue;const d=s.get(u),m=typeof r.target_part=="string"?r.target_part:null,p=typeof r.behavior=="string"?r.behavior:"merge",y=mt(r.cost);if(typeof d.cost=="number"&&(d.cost+=y),!m)continue;let v=!1;for(const b of d.parts)if(b.name===m){if("multipliers"in r&&Array.isArray(r.multipliers)&&"multipliers"in b)for(let S=0;S<r.multipliers.length;S++){const _=mt(r.multipliers[S]);Array.isArray(b.multipliers)&&(p==="overwrite"?b.multipliers[S]=_:b.multipliers[S]=(b.multipliers[S]??0)+_)}else if("power"in r&&"power"in b){const S=mt(r.power);b.power=p==="overwrite"?S:mt(b.power)+S}else if("hits"in r&&typeof r.hits=="object"&&r.hits&&"hits"in b)for(const[S,_]of Object.entries(r.hits)){const T=Zf(e,_);p==="overwrite"?b.hits[S]=T:b.hits[S]=(b.hits[S]??0)+T}if("hide"in r&&(b.display=!1),"ignored_mults"in r){const S=Array.isArray(r.ignored_mults)?r.ignored_mults.filter(_=>typeof _=="string"):[];"ignored_mults"in b&&Array.isArray(b.ignored_mults)?b.ignored_mults.push(...S):"multipliers"in b&&(b.ignored_mults=S)}v=!0;break}if(!v&&p==="merge"){const b=Yi(r);if(b.name=m,typeof b.hits=="object"&&b.hits)for(const[S,_]of Object.entries(b.hits))b.hits[S]=Zf(e,_);"hide"in r&&(b.display=!1),d.parts.push(b)}typeof r.display=="string"&&(d.display=r.display)}else if(c==="convert_spell_conv"){const u=mt(r.base_spell,Number.NaN);if(!Number.isFinite(u)||!s.has(u))continue;const d=s.get(u),m=typeof r.target_part=="string"?r.target_part:"all",p=typeof r.conversion=="string"?r.conversion:"",y=qn.indexOf(p);if(y<0)continue;const v=m==="all";for(const b of d.parts){if(!("multipliers"in b)||!v&&b.name!==m)continue;const S=b.multipliers.slice(1).reduce((T,j)=>T+mt(j),0),_=[mt(b.multipliers[0]),0,0,0,0,0];_[y]=S,b.multipliers=_}}}}return s}function fz(e,n,s){let i=!1,r=!1;for(const[,c]of e)for(const u of c.effects){const d=typeof u.type=="string"?u.type:"";if(d==="raw_stat"){if(u.toggle){i=!0;continue}const m=Array.isArray(u.bonuses)?u.bonuses:[];for(const p of m){if(!p||typeof p!="object")continue;const y=typeof p.type=="string"?p.type:"",v=typeof p.name=="string"?p.name:"",b=mt(p.value);!v||b===0||y==="stat"&&(v.startsWith("damMult.")?n.addMap("damMult",v.slice(8),b):v.startsWith("healMult.")?n.addMap("healMult",v.slice(9),b):v.startsWith("defMult.")?n.add("defMult",b):n.add(v,b))}continue}d==="stat_scaling"&&(r=!0)}i&&s.push("Some ability-tree toggle effects are not applied in Workbench spell damage yet."),r&&s.push("Some ability-tree scaling/slider effects are not applied in Workbench spell damage yet.")}function hz(e,n,s){const i=new ez;for(const m of $0)i.set(m,0);i.getMap("damMult"),i.getMap("healMult");let r=0,c=0,u=[0,0,0,0,0];for(const m of Je){const p=e.slots[m];if(p==null)continue;const y=n.itemsById.get(p);if(!y)continue;const v=y.legacyRaw??{};for(const b of $0)i.add(b,mt(v[b]));r+=mt(v.hp),c+=mt(v.hpBonus),u=[u[0]+mt(v.str),u[1]+mt(v.dex),u[2]+mt(v.int),u[3]+mt(v.def),u[4]+mt(v.agi)]}const d=s??[0,0,0,0,0];return i.set("str",u[0]+d[0]),i.set("dex",u[1]+d[1]),i.set("int",u[2]+d[2]),i.set("def",u[3]+d[3]),i.set("agi",u[4]+d[4]),i.set("hp",r+c+lz(e.level)),i}function mz(e,n,s,i,r=!1,c,u=!1,d=[]){const m=n.damages.map(A=>[...A]),p=[...n.damagePresent],y=s.map(A=>mt(A));for(let A=0;A<qn.length;A++){const Y=c?`:${c}`:"",N=`${qn[A]}ConvBase${Y}`;c&&e.has(N)&&(y[A]+=e.getNum(N));const z=`${qn[A]}ConvBase`;e.has(z)&&(y[A]+=e.getNum(z))}const v=[],b=(y[0]??0)/100;if(b===0)for(let A=0;A<p.length;A++)p[A]=!1;let S=0,_=0;for(const A of m)v.push([A[0]*b,A[1]*b]),S+=A[0],_+=A[1];let T=0;for(let A=1;A<=5;A++){const Y=y[A]??0;if(Y>0){const N=Y/100;v[A][0]+=N*S,v[A][1]+=N*_,p[A]=!0,T+=N}}if(T+=b,!r){const A=yh.indexOf(n.atkSpd||"NORMAL"),Y=bh[A>=0?A:3]??bh[3];for(let N=0;N<v.length;N++)v[N][0]*=Y,v[N][1]*=Y}for(let A=0;A<qn.length;A++){if(!p[A])continue;const Y=qn[A];v[A][0]+=e.getNum(`${Y}DamAddMin`),v[A][1]+=e.getNum(`${Y}DamAddMax`)}const j=i?"Sd":"Md",k=[0];for(let A=0;A<U0.length;A++)k.push(Qc(e.getNum(U0[A]))*nz[A]);const R=(e.getNum(`${j.toLowerCase()}Pct`)+e.getNum("damPct"))/100;let P=0,B=0;const q=[];for(let A=0;A<qn.length;A++){q.push([...v[A]]),P+=v[A][0],B+=v[A][1];const Y=qn[A],N=`${Y}${j}Pct`;let z=1+(k[A]??0)+R+(e.getNum(N)+e.getNum(`${Y}DamPct`))/100;A>0&&(z+=(e.getNum(`r${j}Pct`)+e.getNum("rDamPct"))/100),v[A][0]*=z,v[A][1]*=z}const M=P-q[0][0],C=B-q[0][1],D=e.getNum(`${j.toLowerCase()}Raw`)+e.getNum("damRaw"),Z=e.getNum(`r${j}Raw`)+e.getNum("rDamRaw");for(let A=0;A<v.length;A++){const Y=q[A],N=qn[A];let z=0;p[A]&&(z+=e.getNum(`${N}${j}Raw`)+e.getNum(`${N}DamRaw`));let X=z,ue=z;B>0&&(X+=(P===0?Y[1]/B:Y[0]/P)*D,ue+=Y[1]/B*D),A!==0&&C>0&&(X+=(M===0?Y[1]/C:Y[0]/M)*Z,ue+=Y[1]/C*Z),v[A][0]+=X*T,v[A][1]+=ue*T}const re=u?1:1+(k[1]??0),fe=e.getMap("damMult");let ae=1;const ce=[1,1,1,1,1,1],$=[...y];for(const[A,Y]of fe.entries())if(!(A.includes(":")&&A.split(":")[1]!==c)&&!d.includes(A))if(A.includes(";")){const N=qn.indexOf(A.split(";")[1]);N!==-1&&(ce[N]*=1+Y/100)}else ae*=1+Y/100;const W=u?0:1+e.getNum("critDamPct")/100,L=[0,0],Q=[0,0],ee=[];for(let A=0;A<qn.length;A++){v[A][0]*=ce[A]*ae,v[A][1]*=ce[A]*ae,$[A]*=ce[A]*ae,v[A][0]<0&&(v[A][0]=0),v[A][1]<0&&(v[A][1]=0);const Y=[v[A][0]*re,v[A][1]*re,v[A][0]*(re+W),v[A][1]*(re+W)];ee.push(Y),L[0]+=Y[0],L[1]+=Y[1],Q[0]+=Y[2],Q[1]+=Y[3]}return[L,Q,ee,$]}function HS(e,n,s){const i=new Map;for(const p of e.parts)i.set(p.name,{type:"need_eval",store:p});const r="use_atkspd"in e?!!e.use_atkspd:!0,c="scaling"in e?e.scaling==="spell":!0,u=p=>{const y=i.get(p);if(!y)return null;if(y.type!=="need_eval")return y;const v=y.store,b=`${e.base_spell}.${v.name}`;let S;if("multipliers"in v){const _=Array.isArray(v.ignored_mults)?v.ignored_mults:[],T=mz(n,s,v.multipliers.map(j=>mt(j)),c,!r,b,v.use_str===!1,_);S={type:"damage",name:v.name,display:v.display!==!1,normal_total:T[0],crit_total:T[1],damage_results:T[2]}}else if("power"in v){const _=n.getNum("hp"),T=1+n.getNum("healPct")/100;S={type:"heal",name:v.name,display:v.display!==!1,heal_amount:mt(v.power)*_*T}}else{let _=null,T=[0,0],j=[0,0],k=0;for(const[R,P]of Object.entries(v.hits)){const B=u(R);B&&(_&&_!==B.type||(_=B.type,B.type==="damage"?(T=[T[0]+B.normal_total[0]*P,T[1]+B.normal_total[1]*P],j=[j[0]+B.crit_total[0]*P,j[1]+B.crit_total[1]*P]):k+=B.heal_amount*P))}_==="heal"?S={type:"heal",name:v.name,display:v.display!==!1,heal_amount:k}:S={type:"damage",name:v.name,display:v.display!==!1,normal_total:T,crit_total:j}}return i.set(v.name,S),S},d=[],m=Qc(n.getNum("dex"));for(const p of e.parts){const y=u(p.name);if(y)if(y.type==="damage"){const v=(y.normal_total[0]+y.normal_total[1])/2,b=(y.crit_total[0]+y.crit_total[1])/2;let S;if(Array.isArray(y.damage_results)){const _=y.damage_results;let T=0;for(let j=1;j<qn.length;j++){const k=_[j];if(!k)continue;const R=(k[0]+k[1])/2;R>T&&(T=R,S=qn[j])}}d.push({type:"damage",name:y.name,display:y.display,normalTotal:y.normal_total,critTotal:y.crit_total,averageNonCrit:v,averageCrit:b,averageTotal:(1-m)*v+m*b,dominantElement:S})}else d.push({type:"heal",name:y.name,display:y.display,healAmount:y.heal_amount,averageTotal:y.heal_amount})}return d}function pz(e){const{spells:n,stats:s,weapon:i}=e,r=n.get(0);if(!r||!Array.isArray(r.parts)||r.parts.length===0)return null;const c=HS(r,s,i);if(c.length===0)return null;const u=(r.display||"").trim(),d=u&&c.find(b=>b.name===u)||c.find(b=>b.display)||c[0];if(!d||d.type!=="damage")return null;const m=d.averageTotal??0,p=yh.indexOf(i.atkSpd||"NORMAL"),y=Math.max(0,Math.min(yh.length-1,(p>=0?p:3)+Math.round(s.getNum("atkTier")))),v=m*bh[y];return{perAttackAverage:m,dps:v,attackSpeedTier:iz[y]}}function gz(e,n){if(typeof n.cost!="number"||n.base_spell<1||n.base_spell>4)return null;const s=n.base_spell;let i=n.cost*(1-Qc(e.getNum("int"))*az[2]);return i+=e.getNum(`spRaw${s}`),i=i*(1+e.getNum(`spPct${s}`)/100),i=Math.max(1,i*(1+e.getNum(`spPct${s}Final`)/100)),i}function vz(e){const{catalog:n,snapshot:s,abilityTreeTree:i,abilityTreeEvaluation:r}=e;if(!i||!r)return null;const c=s.slots.weapon;if(c==null)return null;const u=n.itemsById.get(c);if(!u)return null;const d=oz(u);if(!d)return null;const m={...s.slots},p=Hc(m,n,s.level),y=hz(s,n,p.assignedByStat),v=[];p.feasible||v.push("Spell preview uses current build state, but skill-point feasibility is invalid.");const b=uz(i,r);fz(b,y,v);const S=dz(b,[cz(d.type)]),_=pz({spells:S,stats:y,weapon:d});if(S.size===0)return{melee:_,spells:[],notes:v};const T=[];for(const j of[...S.values()].sort((k,R)=>k.base_spell-R.base_spell)){if(!Array.isArray(j.parts)||j.parts.length===0)continue;const k=HS(j,y,d);if(k.length===0)continue;const R=(j.display||"").trim(),P=R&&k.find(M=>M.name===R)||k.find(M=>M.display)||k[0];if(!P)continue;const B=P.type==="heal",q=B?null:P.dominantElement??null;T.push({baseSpell:j.base_spell,name:j.name,displayPartName:P.name,averageDisplayValue:P.averageTotal??0,isHealing:B,manaCost:gz(y,j),dominantElement:q,parts:k})}return r.activeIds.length>0&&T.length===0&&v.push("No spell damage entries found in the selected ability tree nodes."),{melee:_,spells:T,notes:v}}function H0(e){return navigator.clipboard?.writeText?navigator.clipboard.writeText(e):(window.prompt("Copy text:",e),Promise.resolve())}function Z0(e){return typeof e!="string"?null:e.startsWith("slot:")?{kind:"slot",slot:e.slice(5)}:e.startsWith("bin:")?{kind:"bin",category:e.slice(4)}:null}function yz(e,n,s){const i=n.itemsById.get(e);if(!i)return null;const r=i.category;if(s.selectedSlot&&xa(s.selectedSlot)===r)return s.selectedSlot;const c=Je.filter(d=>xa(d)===r);return c.find(d=>s.slots[d]==null)??c[0]??null}function bz(e){return{slots:{...e.slots},craftedSlots:{...e.craftedSlots},binsByCategory:{helmet:[...e.binsByCategory.helmet],chestplate:[...e.binsByCategory.chestplate],leggings:[...e.binsByCategory.leggings],boots:[...e.binsByCategory.boots],ring:[...e.binsByCategory.ring],bracelet:[...e.binsByCategory.bracelet],necklace:[...e.binsByCategory.necklace],weapon:[...e.binsByCategory.weapon]},locks:{...e.locks},level:e.level,characterClass:e.characterClass,selectedSlot:e.selectedSlot,comparePreview:{...e.comparePreview},legacyHash:e.legacyHash,skillpointTomeMode:e.skillpointTomeMode??"no_tomes"}}function xz(){const e=w.useRef(null);!e.current&&typeof window<"u"&&(e.current=fA(window.location));const n=e.current,[s,i]=w.useState(null),[r,c]=w.useState(null),[u,d]=w.useState(n?.search??Ha),[m,p]=w.useState(null),[y,v]=w.useState(!1),[b,S]=w.useState(!1),[_,T]=w.useState(n?.mode==="autobuilder"),[j,k]=w.useState(n?.mode==="abilitytree"),[R,P]=w.useState(!1),[B,q]=w.useState(null),[M,C]=w.useState(!1),[D,Z]=w.useState(null),[re,fe]=w.useState(n?.abilityTree?.selectedByClass??{}),[ae,ce]=w.useState(n?.abilityTree?.version??null),[$,W]=w.useState(""),[L,Q]=w.useState(0),[ee,A]=w.useState(()=>Sb()),Y=w.useRef(null),N=w.useRef(null),z=w.useRef(null),X=Jo(V=>V.hydrateSnapshot),ue=Jo(V=>V.setLegacyHash),oe=Jo(zE(V=>({slots:V.slots,craftedSlots:V.craftedSlots,binsByCategory:V.binsByCategory,locks:V.locks,level:V.level,characterClass:V.characterClass,selectedSlot:V.selectedSlot,comparePreview:V.comparePreview,legacyHash:V.legacyHash,skillpointTomeMode:V.skillpointTomeMode,undoStack:V.undoStack,redoStack:V.redoStack,setLevel:V.setLevel,setCharacterClass:V.setCharacterClass,setSkillpointTomeMode:V.setSkillpointTomeMode,setSelectedSlot:V.setSelectedSlot,setComparePreview:V.setComparePreview,pinItem:V.pinItem,removePinnedItem:V.removePinnedItem,clearCategory:V.clearCategory,clearAll:V.clearAll,equipItem:V.equipItem,equipCraftedItem:V.equipCraftedItem,clearCraftedSlot:V.clearCraftedSlot,moveSlotToBin:V.moveSlotToBin,swapSlots:V.swapSlots,assignDraggedItemToSlot:V.assignDraggedItemToSlot,assignDraggedItemToBin:V.assignDraggedItemToBin,toggleLock:V.toggleLock,undo:V.undo,redo:V.redo,hydrateSnapshot:V.hydrateSnapshot,loadCandidate:V.loadCandidate,setLegacyHash:V.setLegacyHash}))),le=w.useMemo(()=>bz(oe),[oe]);w.useEffect(()=>{wb(ee),wT(ee)},[ee]),w.useEffect(()=>{n?.workbenchPatch&&X(n.workbenchPatch)},[n?.workbenchPatch,X]),w.useEffect(()=>{let V=!1;return(async()=>{try{const pe=await IT.getCatalog();if(V)return;S(!1);const Ge=new $C;if(await Ge.init(pe.items),V){Ge.dispose();return}if(Y.current=Ge,i(pe),S(!0),n?.legacyHash){W("Importing legacy builder hash...");try{const Ye=await Af.decodeLegacyHash(n.legacyHash),Dt={};for(const[Rt,St]of Object.entries(Ye.slots)){if(!St)continue;const Sa=pe.itemIdByName.get(St.toLowerCase());typeof Sa=="number"&&(Dt[Rt]=Sa)}const ct=Jo.getState().level;X({...n.workbenchPatch,slots:{...n.workbenchPatch?.slots??{},...Dt},level:Ye.level??n.workbenchPatch?.level??ct,legacyHash:Ye.legacyHash}),ue(Ye.legacyHash),W("Imported legacy builder hash into Workbench.")}catch(Ye){console.error(Ye),W("Failed to import legacy hash automatically. You can still open it in legacy builder.")}}}catch(pe){console.error(pe),c(pe instanceof Error?pe.message:"Failed to load item catalog")}})(),()=>{V=!0,Y.current?.dispose(),N.current&&window.clearTimeout(N.current),z.current&&window.clearTimeout(z.current)}},[n,X,ue]),w.useEffect(()=>{if(!(!s||!b||!Y.current)){if(!bC(u)&&L===0){p(null),v(!1);return}return N.current&&window.clearTimeout(N.current),v(!0),N.current=window.setTimeout(async()=>{try{const V=await Y.current.search(u);p(V)}catch(V){console.error(V),c(V instanceof Error?V.message:"Search failed")}finally{v(!1)}},180),()=>{N.current&&window.clearTimeout(N.current)}}},[s,b,u,L]),w.useEffect(()=>{if(!j||!s||M||B||D)return;let V=!1;return C(!0),Z(null),(async()=>{try{const pe=await JO.getDataset(ae||s.version);if(V)return;q(pe),ce(pe.version)}catch(pe){if(V)return;console.error(pe),Z(pe instanceof Error?pe.message:"Failed to load ability tree data")}finally{V||C(!1)}})(),()=>{V=!0}},[j,B,s,ae,D]),w.useEffect(()=>{if(!(typeof window>"u"))return z.current&&window.clearTimeout(z.current),z.current=window.setTimeout(()=>{try{N0({search:u,workbenchSnapshot:le,mode:_?"autobuilder":j?"abilitytree":null,abilityTreeState:{version:ae,selectedByClass:re},replace:!0})}catch(V){console.error(V)}},250),()=>{z.current&&window.clearTimeout(z.current)}},[u,le,_,j,re,ae]);const be=w.useMemo(()=>s?nl({slots:le.slots,level:le.level,characterClass:le.characterClass},s,{skillpointTomeMode:le.skillpointTomeMode??"no_tomes"}):null,[s,le]),De=w.useMemo(()=>{if(!s)return null;const V=le.slots.weapon;if(V==null)return null;const pe=s.itemsById.get(V);return pe?pe.classReq??pc(pe.type):null},[s,le.slots.weapon]),me=le.characterClass??De,we=w.useMemo(()=>ES(B,me),[B,me]),Re=w.useMemo(()=>{if(!we||!me)return null;const V=re[me]??[];return Xc(we,V,le.level)},[re,we,me,le.level]),Xe=w.useMemo(()=>{if(!s||!be)return null;const V=le.comparePreview;if(!V.itemId||!V.slot)return null;const pe={...le.slots,[V.slot]:V.itemId};return nl({slots:pe,level:le.level,characterClass:le.characterClass},s,{skillpointTomeMode:le.skillpointTomeMode??"no_tomes"})},[s,be,le]),Wt=w.useMemo(()=>s?vz({catalog:s,snapshot:le,abilityTreeTree:we,abilityTreeEvaluation:Re}):null,[s,le,we,Re]),et=w_(Xv(jh,{activationConstraint:{distance:6}}),Xv(Nh,{coordinateGetter:RE})),ln=V=>{const pe=V.active.data.current?.dragItem;if(!pe)return;const Ge=pe.kind==="slot"?pe.sourceSlot??null:le.selectedSlot??null;oe.setComparePreview({itemId:pe.itemId,slot:Ge})},Nt=V=>{const pe=V.active.data.current?.dragItem,Ge=Z0(V.over?.id);!pe||!Ge||Ge.kind==="slot"&&oe.setComparePreview({itemId:pe.itemId,slot:Ge.slot})},rn=V=>{const pe=V.active.data.current?.dragItem,Ge=Z0(V.over?.id);if(oe.setComparePreview(null),!s||!pe||!Ge)return;const Ye=s.itemsById.get(pe.itemId);if(Ye){if(Ge.kind==="slot"){if(xa(Ge.slot)!==Ye.category)return;oe.assignDraggedItemToSlot({targetSlot:Ge.slot,source:pe.kind,itemId:pe.itemId,sourceCategory:pe.sourceCategory,sourceSlot:pe.sourceSlot});return}if(Ge.kind==="bin"){if(Ge.category!==Ye.category)return;oe.assignDraggedItemToBin({targetCategory:Ge.category,source:pe.kind,itemId:pe.itemId,sourceCategory:pe.sourceCategory,sourceSlot:pe.sourceSlot})}}},Xt=V=>{if(!s)return;const pe=yz(V,s,le);pe&&(oe.equipItem(pe,V),oe.setSelectedSlot(pe),W(`Equipped item into ${pe}.`))},Mt=V=>{if(!s)return;const pe=s.itemsById.get(V);pe&&oe.pinItem(pe.category,pe.id)},de=()=>{const V=pS(le),pe=JSON.stringify(le,null,2);window.prompt("Copy Workbench export (JSON). URL-safe code is also in the current ?wb= param.",pe),W(`Workbench export ready. Code length: ${V.length}`)},ke=()=>{if(!s){W("Catalog not loaded yet.");return}const V=Bk(le);if(!V){W("No items equipped  nothing to export.");return}const pe=Lk(V);window.open(pe,"_blank","noopener,noreferrer"),W("Opened build in WynnBuilder.")},Pe=async()=>{const V=window.prompt("Paste a Workbench JSON export, Workbench URL, or legacy builder URL/hash.");if(!V)return;const pe=V.trim();try{if(Af.isSupported(pe)&&s){const Ye=await Af.decodeLegacyHash(pe),Dt={};for(const[ct,Rt]of Object.entries(Ye.slots)){const St=s.itemIdByName.get((Rt??"").toLowerCase());St!=null&&(Dt[ct]=St)}oe.hydrateSnapshot({slots:{...le.slots,...Dt},level:Ye.level??le.level,legacyHash:Ye.legacyHash}),oe.setLegacyHash(Ye.legacyHash),W("Imported legacy build hash.");return}if(pe.startsWith("http://")||pe.startsWith("https://")){const Ye=new URL(pe),Dt=fS(Ye),ct=hS(Ye),Rt=mS(Ye);d(Dt),ct&&oe.hydrateSnapshot(ct),Rt&&(fe(Rt.selectedByClass??{}),ce(Rt.version??null)),W("Imported Workbench URL state.");return}const Ge=JSON.parse(pe);oe.hydrateSnapshot(Ge),W("Imported Workbench JSON.")}catch(Ge){console.error(Ge),W("Import failed. Check the pasted JSON/URL/hash.")}},Fe=async()=>{N0({workbenchSnapshot:le,mode:_?"autobuilder":j?"abilitytree":null,abilityTreeState:{version:ae,selectedByClass:re},replace:!0}),await H0(window.location.href),W("Workbench link copied.")},Le=async()=>{if(!le.legacyHash){W("No imported legacy hash is currently available.");return}const V=new URL(h0(le.legacyHash),window.location.href).href;await H0(V),W("Legacy builder link copied.")},Qt=()=>{window.open(h0(le.legacyHash),"_blank","noopener,noreferrer")},pt=()=>{Z(null),T(!1),k(!0)},Ut=()=>{k(!1),P(!1),T(!0)},We=()=>{T(!1),k(!1),P(!0)};return r?h.jsx("div",{className:"wb-app-shell flex min-h-screen items-center justify-center p-6",children:h.jsxs("div",{className:"wb-panel max-w-xl rounded-2xl p-6",children:[h.jsx("div",{className:"text-xl font-semibold",children:"Failed to load"}),h.jsx("div",{className:"mt-2 text-sm text-[var(--wb-muted)]",children:r})]})}):!s||!be?h.jsx("div",{className:"wb-app-shell flex min-h-screen items-center justify-center p-6",children:h.jsxs("div",{className:"wb-panel max-w-xl rounded-2xl p-6",children:[h.jsx("div",{className:"text-xl font-semibold",children:"Loading..."}),h.jsx("div",{className:"mt-2 text-sm text-[var(--wb-muted)]",children:"Preparing item catalog, search index, and build state."})]})}):h.jsxs(TE,{sensors:et,collisionDetection:E_,onDragStart:ln,onDragOver:Nt,onDragEnd:rn,children:[h.jsxs("div",{className:"wb-app-shell flex min-h-screen flex-col gap-3 p-3 lg:p-4",children:[h.jsxs("header",{className:"wb-panel wb-hero rounded-2xl px-4 py-3",children:[h.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[h.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[h.jsxs("div",{className:"wb-theme-toggle",children:[h.jsx("span",{className:"wb-theme-toggle-label",children:"Theme"}),["minimal","classic"].map(V=>h.jsx("button",{type:"button",className:"wb-theme-toggle-button","data-active":ee===V?"true":"false",onClick:()=>A(V),children:V==="minimal"?"Minimal":"Classic"},V))]}),h.jsx("span",{className:"wb-chip",children:"Legacy-compatible imports"}),Re?h.jsxs("span",{className:"wb-chip","data-tone":"success",children:["Ability Tree ",Re.apUsed,"/",Re.apCap," AP"]}):null]}),h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Modular loadout planning studio with legacy builder compatibility."})]}),h.jsxs("button",{type:"button",className:"build-solver-logo-btn order-first flex shrink-0 cursor-pointer items-center justify-center gap-2 self-center rounded-xl px-6 py-3 text-lg font-bold tracking-tight shadow-lg sm:px-8 sm:py-4 sm:text-xl lg:order-none",onClick:Ut,title:"Open Build Solver for automated build search",children:[h.jsx(JE,{size:28,style:{color:"var(--wb-brand-icon)"},strokeWidth:2.5}),"Build Solver"]}),h.jsxs("div",{className:"flex min-w-0 flex-1 flex-wrap items-center justify-end gap-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("label",{className:"text-xs text-[var(--wb-muted)]",children:"Class"}),h.jsxs("select",{className:"wb-select w-36",value:le.characterClass??"",onChange:V=>oe.setCharacterClass(V.target.value||null),children:[h.jsx("option",{value:"",children:"Auto / Any"}),h.jsx("option",{value:"Warrior",children:"Warrior"}),h.jsx("option",{value:"Assassin",children:"Assassin"}),h.jsx("option",{value:"Mage",children:"Mage"}),h.jsx("option",{value:"Archer",children:"Archer"}),h.jsx("option",{value:"Shaman",children:"Shaman"})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("label",{className:"text-xs text-[var(--wb-muted)]",children:"Level"}),h.jsx("input",{className:"wb-input w-22",type:"number",min:1,max:106,value:le.level,onChange:V=>oe.setLevel(Number(V.target.value))})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("label",{className:"text-xs text-[var(--wb-muted)]",title:"Assume tomes for SP feasibility",children:"SP Tomes"}),h.jsxs("select",{className:"wb-select w-36",value:le.skillpointTomeMode??"no_tomes",onChange:V=>oe.setSkillpointTomeMode(V.target.value||"no_tomes"),children:[h.jsx("option",{value:"no_tomes",children:"None (200)"}),h.jsx("option",{value:"guild_rainbow",children:"Guild rainbow (+1 each)"}),h.jsx("option",{value:"flexible_2",children:"+2 flexible"})]})]}),h.jsxs(Me,{variant:"ghost",onClick:Fe,children:[h.jsx(Ch,{size:13,className:"mr-1 inline"}),"Share Session"]}),h.jsxs(Me,{variant:"ghost",onClick:pt,children:[h.jsx(yb,{size:13,className:"mr-1 inline"}),"Ability Tree"]}),h.jsx(Me,{variant:"primary",onClick:We,children:"Recipe Solver"})]})]}),$?h.jsx("div",{className:"mt-3 text-xs wb-text-success",children:$}):null]}),h.jsxs("main",{className:"grid min-h-0 flex-1 grid-cols-1 gap-3 xl:grid-cols-[minmax(300px,22vw)_minmax(0,1fr)_440px] 2xl:grid-cols-[320px_minmax(0,1fr)_480px]",children:[h.jsx(JR,{catalog:s,state:u,setState:d,result:m,loading:y,selectedSlot:le.selectedSlot,onPin:Mt,onEquip:Xt,onHover:()=>{},onSearch:()=>Q(V=>V+1)}),h.jsx(jk,{catalog:s,store:oe,onHoverItem:(V,pe)=>oe.setComparePreview(V&&pe?{itemId:V,slot:pe}:null),onShareWorkbench:()=>{Fe()},onExportWorkbench:de,onImportWorkbench:()=>{Pe()},onOpenInWynnBuilder:ke,searchResults:u.resultsBelowBuild?h.jsx(Xx,{catalog:s,result:m,selectedSlot:le.selectedSlot,state:u,loading:y,onPin:Mt,onEquip:Xt,onHover:()=>{},embedded:!0}):void 0}),h.jsx(Nk,{catalog:s,snapshot:le,summary:be,compareSummary:Xe,compareSlot:le.comparePreview.slot,spellPreview:Wt,abilityTreeSummary:Re&&me?{className:me,apUsed:Re.apUsed,apCap:Re.apCap,selectedCount:Re.activeIds.length,hasErrors:Re.errors.length>0||Re.apUsed>Re.apCap}:null,actions:{onOpenAbilityTree:pt,onCopyLegacyLink:()=>{Le()},onOpenLegacyBuilder:Qt}})]})]}),h.jsx(GA,{open:_,onOpenChange:T,catalog:s,snapshot:le,onLoadCandidate:V=>{oe.loadCandidate(V.slots),T(!1),W("Loaded Build Solver candidate into Workbench.")}}),h.jsx(aO,{open:j,onOpenChange:V=>{V&&Z(null),k(V)},dataset:B,loading:M,error:D,level:le.level,selectedClass:le.characterClass,inferredClass:De,selectionsByClass:re,onSelectionsChange:fe}),h.jsx(YO,{open:R,onOpenChange:P,onEquipCraft:(V,pe)=>{oe.equipCraftedItem(V,pe),P(!1),W(`Crafted ${pe.type} equipped to ${V}.`)}})]})}class Sz extends w.Component{state={hasError:!1,error:void 0};static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,s){console.error("App failed to render:",n,s)}render(){return this.state.hasError?h.jsx("div",{className:"flex min-h-screen items-center justify-center p-6",style:{background:"var(--wb-bg-bottom)",color:"var(--wb-text)"},children:h.jsxs("div",{className:"max-w-xl rounded-2xl p-6",style:{background:"var(--wb-panel)",border:"1px solid var(--wb-border)"},children:[h.jsx("div",{className:"text-xl font-semibold",children:"Something went wrong"}),h.jsxs("div",{className:"mt-2 text-sm",style:{color:"var(--wb-muted)"},children:[this.state.error?.message??"Failed to load the app."," Try refreshing the page."]})]})}):this.props.children}}wb(Sb());r_.createRoot(document.getElementById("root")).render(h.jsx(w.StrictMode,{children:h.jsx(Sz,{children:h.jsx(xz,{})})}));
