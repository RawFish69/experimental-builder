function $w(e,n){for(var s=0;s<n.length;s++){const i=n[s];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const c=Object.getOwnPropertyDescriptor(i,r);c&&Object.defineProperty(e,r,c.get?c:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}})();function hh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ef={exports:{}},Fl={};var Bv;function Hw(){if(Bv)return Fl;Bv=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function s(i,r,c){var u=null;if(c!==void 0&&(u=""+c),r.key!==void 0&&(u=""+r.key),"key"in r){c={};for(var d in r)d!=="key"&&(c[d]=r[d])}else c=r;return r=c.ref,{$$typeof:e,type:i,key:u,ref:r!==void 0?r:null,props:c}}return Fl.Fragment=n,Fl.jsx=s,Fl.jsxs=s,Fl}var Lv;function Zw(){return Lv||(Lv=1,ef.exports=Hw()),ef.exports}var h=Zw(),tf={exports:{}},Me={};var qv;function Fw(){if(qv)return Me;qv=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function S(N){return N===null||typeof N!="object"?null:(N=b&&N[b]||N["@@iterator"],typeof N=="function"?N:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,C={};function k(N,P,ee){this.props=N,this.context=P,this.refs=C,this.updater=ee||E}k.prototype.isReactComponent={},k.prototype.setState=function(N,P){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,P,"setState")},k.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function R(){}R.prototype=k.prototype;function z(N,P,ee){this.props=N,this.context=P,this.refs=C,this.updater=ee||E}var B=z.prototype=new R;B.constructor=z,T(B,k.prototype),B.isPureReactComponent=!0;var U=Array.isArray;function M(){}var j={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function K(N,P,ee){var oe=ee.ref;return{$$typeof:e,type:N,key:P,ref:oe!==void 0?oe:null,props:ee}}function re(N,P){return K(N.type,P,N.props)}function he(N){return typeof N=="object"&&N!==null&&N.$$typeof===e}function se(N){var P={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ee){return P[ee]})}var Z=/\/+/g;function le(N,P){return typeof N=="object"&&N!==null&&N.key!=null?se(""+N.key):P.toString(36)}function Q(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(M,M):(N.status="pending",N.then(function(P){N.status==="pending"&&(N.status="fulfilled",N.value=P)},function(P){N.status==="pending"&&(N.status="rejected",N.reason=P)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function L(N,P,ee,oe,ue){var ce=typeof N;(ce==="undefined"||ce==="boolean")&&(N=null);var ye=!1;if(N===null)ye=!0;else switch(ce){case"bigint":case"string":case"number":ye=!0;break;case"object":switch(N.$$typeof){case e:case n:ye=!0;break;case y:return ye=N._init,L(ye(N._payload),P,ee,oe,ue)}}if(ye)return ue=ue(N),ye=oe===""?"."+le(N,0):oe,U(ue)?(ee="",ye!=null&&(ee=ye.replace(Z,"$&/")+"/"),L(ue,P,ee,"",function(_e){return _e})):ue!=null&&(he(ue)&&(ue=re(ue,ee+(ue.key==null||N&&N.key===ue.key?"":(""+ue.key).replace(Z,"$&/")+"/")+ye)),P.push(ue)),1;ye=0;var be=oe===""?".":oe+":";if(U(N))for(var ge=0;ge<N.length;ge++)oe=N[ge],ce=be+le(oe,ge),ye+=L(oe,P,ee,ce,ue);else if(ge=S(N),typeof ge=="function")for(N=ge.call(N),ge=0;!(oe=N.next()).done;)oe=oe.value,ce=be+le(oe,ge++),ye+=L(oe,P,ee,ce,ue);else if(ce==="object"){if(typeof N.then=="function")return L(Q(N),P,ee,oe,ue);throw P=String(N),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.")}return ye}function G(N,P,ee){if(N==null)return N;var oe=[],ue=0;return L(N,oe,"","",function(ce){return P.call(ee,ce,ue++)}),oe}function ae(N){if(N._status===-1){var P=N._result;P=P(),P.then(function(ee){(N._status===0||N._status===-1)&&(N._status=1,N._result=ee)},function(ee){(N._status===0||N._status===-1)&&(N._status=2,N._result=ee)}),N._status===-1&&(N._status=0,N._result=P)}if(N._status===1)return N._result.default;throw N._result}var A=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var P=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(P))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},Y={map:G,forEach:function(N,P,ee){G(N,function(){P.apply(this,arguments)},ee)},count:function(N){var P=0;return G(N,function(){P++}),P},toArray:function(N){return G(N,function(P){return P})||[]},only:function(N){if(!he(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Me.Activity=v,Me.Children=Y,Me.Component=k,Me.Fragment=s,Me.Profiler=r,Me.PureComponent=z,Me.StrictMode=i,Me.Suspense=g,Me.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Me.__COMPILER_RUNTIME={__proto__:null,c:function(N){return j.H.useMemoCache(N)}},Me.cache=function(N){return function(){return N.apply(null,arguments)}},Me.cacheSignal=function(){return null},Me.cloneElement=function(N,P,ee){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var oe=T({},N.props),ue=N.key;if(P!=null)for(ce in P.key!==void 0&&(ue=""+P.key),P)!D.call(P,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&P.ref===void 0||(oe[ce]=P[ce]);var ce=arguments.length-2;if(ce===1)oe.children=ee;else if(1<ce){for(var ye=Array(ce),be=0;be<ce;be++)ye[be]=arguments[be+2];oe.children=ye}return K(N.type,ue,oe)},Me.createContext=function(N){return N={$$typeof:u,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:c,_context:N},N},Me.createElement=function(N,P,ee){var oe,ue={},ce=null;if(P!=null)for(oe in P.key!==void 0&&(ce=""+P.key),P)D.call(P,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(ue[oe]=P[oe]);var ye=arguments.length-2;if(ye===1)ue.children=ee;else if(1<ye){for(var be=Array(ye),ge=0;ge<ye;ge++)be[ge]=arguments[ge+2];ue.children=be}if(N&&N.defaultProps)for(oe in ye=N.defaultProps,ye)ue[oe]===void 0&&(ue[oe]=ye[oe]);return K(N,ce,ue)},Me.createRef=function(){return{current:null}},Me.forwardRef=function(N){return{$$typeof:d,render:N}},Me.isValidElement=he,Me.lazy=function(N){return{$$typeof:y,_payload:{_status:-1,_result:N},_init:ae}},Me.memo=function(N,P){return{$$typeof:p,type:N,compare:P===void 0?null:P}},Me.startTransition=function(N){var P=j.T,ee={};j.T=ee;try{var oe=N(),ue=j.S;ue!==null&&ue(ee,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(M,A)}catch(ce){A(ce)}finally{P!==null&&ee.types!==null&&(P.types=ee.types),j.T=P}},Me.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Me.use=function(N){return j.H.use(N)},Me.useActionState=function(N,P,ee){return j.H.useActionState(N,P,ee)},Me.useCallback=function(N,P){return j.H.useCallback(N,P)},Me.useContext=function(N){return j.H.useContext(N)},Me.useDebugValue=function(){},Me.useDeferredValue=function(N,P){return j.H.useDeferredValue(N,P)},Me.useEffect=function(N,P){return j.H.useEffect(N,P)},Me.useEffectEvent=function(N){return j.H.useEffectEvent(N)},Me.useId=function(){return j.H.useId()},Me.useImperativeHandle=function(N,P,ee){return j.H.useImperativeHandle(N,P,ee)},Me.useInsertionEffect=function(N,P){return j.H.useInsertionEffect(N,P)},Me.useLayoutEffect=function(N,P){return j.H.useLayoutEffect(N,P)},Me.useMemo=function(N,P){return j.H.useMemo(N,P)},Me.useOptimistic=function(N,P){return j.H.useOptimistic(N,P)},Me.useReducer=function(N,P,ee){return j.H.useReducer(N,P,ee)},Me.useRef=function(N){return j.H.useRef(N)},Me.useState=function(N){return j.H.useState(N)},Me.useSyncExternalStore=function(N,P,ee){return j.H.useSyncExternalStore(N,P,ee)},Me.useTransition=function(){return j.H.useTransition()},Me.version="19.2.4",Me}var Uv;function mh(){return Uv||(Uv=1,tf.exports=Fw()),tf.exports}var w=mh();const Qt=hh(w),L0=$w({__proto__:null,default:Qt},[w]);var nf={exports:{}},Gl={},af={exports:{}},sf={};var $v;function Gw(){return $v||($v=1,(function(e){function n(L,G){var ae=L.length;L.push(G);e:for(;0<ae;){var A=ae-1>>>1,Y=L[A];if(0<r(Y,G))L[A]=G,L[ae]=Y,ae=A;else break e}}function s(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var G=L[0],ae=L.pop();if(ae!==G){L[0]=ae;e:for(var A=0,Y=L.length,N=Y>>>1;A<N;){var P=2*(A+1)-1,ee=L[P],oe=P+1,ue=L[oe];if(0>r(ee,ae))oe<Y&&0>r(ue,ee)?(L[A]=ue,L[oe]=ae,A=oe):(L[A]=ee,L[P]=ae,A=P);else if(oe<Y&&0>r(ue,ae))L[A]=ue,L[oe]=ae,A=oe;else break e}}return G}function r(L,G){var ae=L.sortIndex-G.sortIndex;return ae!==0?ae:L.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var u=Date,d=u.now();e.unstable_now=function(){return u.now()-d}}var g=[],p=[],y=1,v=null,b=3,S=!1,E=!1,T=!1,C=!1,k=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function B(L){for(var G=s(p);G!==null;){if(G.callback===null)i(p);else if(G.startTime<=L)i(p),G.sortIndex=G.expirationTime,n(g,G);else break;G=s(p)}}function U(L){if(T=!1,B(L),!E)if(s(g)!==null)E=!0,M||(M=!0,se());else{var G=s(p);G!==null&&Q(U,G.startTime-L)}}var M=!1,j=-1,D=5,K=-1;function re(){return C?!0:!(e.unstable_now()-K<D)}function he(){if(C=!1,M){var L=e.unstable_now();K=L;var G=!0;try{e:{E=!1,T&&(T=!1,R(j),j=-1),S=!0;var ae=b;try{t:{for(B(L),v=s(g);v!==null&&!(v.expirationTime>L&&re());){var A=v.callback;if(typeof A=="function"){v.callback=null,b=v.priorityLevel;var Y=A(v.expirationTime<=L);if(L=e.unstable_now(),typeof Y=="function"){v.callback=Y,B(L),G=!0;break t}v===s(g)&&i(g),B(L)}else i(g);v=s(g)}if(v!==null)G=!0;else{var N=s(p);N!==null&&Q(U,N.startTime-L),G=!1}}break e}finally{v=null,b=ae,S=!1}G=void 0}}finally{G?se():M=!1}}}var se;if(typeof z=="function")se=function(){z(he)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,le=Z.port2;Z.port1.onmessage=he,se=function(){le.postMessage(null)}}else se=function(){k(he,0)};function Q(L,G){j=k(function(){L(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(L){switch(b){case 1:case 2:case 3:var G=3;break;default:G=b}var ae=b;b=G;try{return L()}finally{b=ae}},e.unstable_requestPaint=function(){C=!0},e.unstable_runWithPriority=function(L,G){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var ae=b;b=L;try{return G()}finally{b=ae}},e.unstable_scheduleCallback=function(L,G,ae){var A=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?A+ae:A):ae=A,L){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=ae+Y,L={id:y++,callback:G,priorityLevel:L,startTime:ae,expirationTime:Y,sortIndex:-1},ae>A?(L.sortIndex=ae,n(p,L),s(g)===null&&L===s(p)&&(T?(R(j),j=-1):T=!0,Q(U,ae-A))):(L.sortIndex=Y,n(g,L),E||S||(E=!0,M||(M=!0,se()))),L},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(L){var G=b;return function(){var ae=b;b=G;try{return L.apply(this,arguments)}finally{b=ae}}}})(sf)),sf}var Hv;function Yw(){return Hv||(Hv=1,af.exports=Gw()),af.exports}var lf={exports:{}},hn={};var Zv;function Vw(){if(Zv)return hn;Zv=1;var e=mh();function n(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(n(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},r=Symbol.for("react.portal");function c(g,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:g,containerInfo:p,implementation:y}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,hn.createPortal=function(g,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(n(299));return c(g,p,null,y)},hn.flushSync=function(g){var p=u.T,y=i.p;try{if(u.T=null,i.p=2,g)return g()}finally{u.T=p,i.p=y,i.d.f()}},hn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(g,p))},hn.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},hn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?i.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:S}):y==="script"&&i.d.X(g,{crossOrigin:v,integrity:b,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},hn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);i.d.M(g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(g)},hn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin);i.d.L(g,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},hn.preloadModule=function(g,p){if(typeof g=="string")if(p){var y=d(p.as,p.crossOrigin);i.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(g)},hn.requestFormReset=function(g){i.d.r(g)},hn.unstable_batchedUpdates=function(g,p){return g(p)},hn.useFormState=function(g,p,y){return u.H.useFormState(g,p,y)},hn.useFormStatus=function(){return u.H.useHostTransitionStatus()},hn.version="19.2.4",hn}var Fv;function q0(){if(Fv)return lf.exports;Fv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),lf.exports=Vw(),lf.exports}var Gv;function Kw(){if(Gv)return Gl;Gv=1;var e=Yw(),n=mh(),s=q0();function i(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)a+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var a=t,l=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(l=a.return),t=a.return;while(t)}return a.tag===3?l:null}function u(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function d(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(i(188))}function p(t){var a=t.alternate;if(!a){if(a=c(t),a===null)throw Error(i(188));return a!==t?null:t}for(var l=t,o=a;;){var f=l.return;if(f===null)break;var m=f.alternate;if(m===null){if(o=f.return,o!==null){l=o;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===l)return g(f),t;if(m===o)return g(f),a;m=m.sibling}throw Error(i(188))}if(l.return!==o.return)l=f,o=m;else{for(var x=!1,_=f.child;_;){if(_===l){x=!0,l=f,o=m;break}if(_===o){x=!0,o=f,l=m;break}_=_.sibling}if(!x){for(_=m.child;_;){if(_===l){x=!0,l=m,o=f;break}if(_===o){x=!0,o=m,l=f;break}_=_.sibling}if(!x)throw Error(i(189))}}if(l.alternate!==o)throw Error(i(190))}if(l.tag!==3)throw Error(i(188));return l.stateNode.current===l?t:a}function y(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=y(t),a!==null)return a;t=t.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),z=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),K=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),he=Symbol.iterator;function se(t){return t===null||typeof t!="object"?null:(t=he&&t[he]||t["@@iterator"],typeof t=="function"?t:null)}var Z=Symbol.for("react.client.reference");function le(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Z?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case T:return"Fragment";case k:return"Profiler";case C:return"StrictMode";case U:return"Suspense";case M:return"SuspenseList";case K:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case E:return"Portal";case z:return t.displayName||"Context";case R:return(t._context.displayName||"Context")+".Consumer";case B:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case j:return a=t.displayName||null,a!==null?a:le(t.type)||"Memo";case D:a=t._payload,t=t._init;try{return le(t(a))}catch{}}return null}var Q=Array.isArray,L=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae={pending:!1,data:null,method:null,action:null},A=[],Y=-1;function N(t){return{current:t}}function P(t){0>Y||(t.current=A[Y],A[Y]=null,Y--)}function ee(t,a){Y++,A[Y]=t.current,t.current=a}var oe=N(null),ue=N(null),ce=N(null),ye=N(null);function be(t,a){switch(ee(ce,a),ee(ue,t),ee(oe,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?rv(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=rv(a),t=ov(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}P(oe),ee(oe,t)}function ge(){P(oe),P(ue),P(ce)}function _e(t){t.memoizedState!==null&&ee(ye,t);var a=oe.current,l=ov(a,t.type);a!==l&&(ee(ue,t),ee(oe,l))}function Be(t){ue.current===t&&(P(oe),P(ue)),ye.current===t&&(P(ye),Ul._currentValue=ae)}var it,Rt;function ct(t){if(it===void 0)try{throw Error()}catch(l){var a=l.stack.trim().match(/\n( *(at )?)/);it=a&&a[1]||"",Rt=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+it+t+Rt}var Vt=!1;function ht(t,a){if(!t||Vt)return"";Vt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(a){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(V){var F=V}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(V){F=V}t.call(ie.prototype)}}else{try{throw Error()}catch(V){F=V}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(V){if(V&&F&&typeof V.stack=="string")return[V.stack,F.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),x=m[0],_=m[1];if(x&&_){var O=x.split(`
`),H=_.split(`
`);for(f=o=0;o<O.length&&!O[o].includes("DetermineComponentFrameRoot");)o++;for(;f<H.length&&!H[f].includes("DetermineComponentFrameRoot");)f++;if(o===O.length||f===H.length)for(o=O.length-1,f=H.length-1;1<=o&&0<=f&&O[o]!==H[f];)f--;for(;1<=o&&0<=f;o--,f--)if(O[o]!==H[f]){if(o!==1||f!==1)do if(o--,f--,0>f||O[o]!==H[f]){var J=`
`+O[o].replace(" at new "," at ");return t.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",t.displayName)),J}while(1<=o&&0<=f);break}}}finally{Vt=!1,Error.prepareStackTrace=l}return(l=t?t.displayName||t.name:"")?ct(l):""}function Jt(t,a){switch(t.tag){case 26:case 27:case 5:return ct(t.type);case 16:return ct("Lazy");case 13:return t.child!==a&&a!==null?ct("Suspense Fallback"):ct("Suspense");case 19:return ct("SuspenseList");case 0:case 15:return ht(t.type,!1);case 11:return ht(t.type.render,!1);case 1:return ht(t.type,!0);case 31:return ct("Activity");default:return""}}function en(t){try{var a="",l=null;do a+=Jt(t,l),l=t,t=t.return;while(t);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Zt=Object.prototype.hasOwnProperty,de=e.unstable_scheduleCallback,ze=e.unstable_cancelCallback,De=e.unstable_shouldYield,We=e.unstable_requestPaint,je=e.unstable_now,Ft=e.unstable_getCurrentPriorityLevel,Nn=e.unstable_ImmediatePriority,tn=e.unstable_UserBlockingPriority,W=e.unstable_NormalPriority,me=e.unstable_LowPriority,Ye=e.unstable_IdlePriority,Ge=e.log,cn=e.unstable_setDisableYieldValue,un=null,ut=null;function zt(t){if(typeof Ge=="function"&&cn(t),ut&&typeof ut.setStrictMode=="function")try{ut.setStrictMode(un,t)}catch{}}var kt=Math.clz32?Math.clz32:Vs,tl=Math.log,Ys=Math.LN2;function Vs(t){return t>>>=0,t===0?32:31-(tl(t)/Ys|0)|0}var ha=256,pt=262144,Et=4194304;function X(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function fe(t,a,l){var o=t.pendingLanes;if(o===0)return 0;var f=0,m=t.suspendedLanes,x=t.pingedLanes;t=t.warmLanes;var _=o&134217727;return _!==0?(o=_&~m,o!==0?f=X(o):(x&=_,x!==0?f=X(x):l||(l=_&~t,l!==0&&(f=X(l))))):(_=o&~m,_!==0?f=X(_):x!==0?f=X(x):l||(l=o&~t,l!==0&&(f=X(l)))),f===0?0:a!==0&&a!==f&&(a&m)===0&&(m=f&-f,l=a&-a,m>=l||m===32&&(l&4194048)!==0)?a:f}function Ne(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function Ae(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xe(){var t=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),t}function Tt(t){for(var a=[],l=0;31>l;l++)a.push(t);return a}function Le(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Pe(t,a,l,o,f,m){var x=t.pendingLanes;t.pendingLanes=l,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=l,t.entangledLanes&=l,t.errorRecoveryDisabledLanes&=l,t.shellSuspendCounter=0;var _=t.entanglements,O=t.expirationTimes,H=t.hiddenUpdates;for(l=x&~l;0<l;){var J=31-kt(l),ie=1<<J;_[J]=0,O[J]=-1;var F=H[J];if(F!==null)for(H[J]=null,J=0;J<F.length;J++){var V=F[J];V!==null&&(V.lane&=-536870913)}l&=~ie}o!==0&&xt(t,o,0),m!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=m&~(x&~a))}function xt(t,a,l){t.pendingLanes|=a,t.suspendedLanes&=~a;var o=31-kt(a);t.entangledLanes|=a,t.entanglements[o]=t.entanglements[o]|1073741824|l&261930}function mt(t,a){var l=t.entangledLanes|=a;for(t=t.entanglements;l;){var o=31-kt(l),f=1<<o;f&a|t[o]&a&&(t[o]|=a),l&=~f}}function we(t,a){var l=a&-a;return l=(l&42)!==0?1:Mn(l),(l&(t.suspendedLanes|a))!==0?0:l}function Mn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function dn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Te(){var t=G.p;return t!==0?t:(t=window.event,t===void 0?32:Rv(t.type))}function fn(t,a){var l=G.p;try{return G.p=t,a()}finally{G.p=l}}var Qe=Math.random().toString(36).slice(2),Pt="__reactFiber$"+Qe,nn="__reactProps$"+Qe,ma="__reactContainer$"+Qe,Ks="__reactEvents$"+Qe,br="__reactListeners$"+Qe,xr="__reactHandles$"+Qe,nl="__reactResources$"+Qe,qa="__reactMarker$"+Qe;function Gc(t){delete t[Pt],delete t[nn],delete t[Ks],delete t[br],delete t[xr]}function Ws(t){var a=t[Pt];if(a)return a;for(var l=t.parentNode;l;){if(a=l[ma]||l[Pt]){if(l=a.alternate,a.child!==null||l!==null&&l.child!==null)for(t=gv(t);t!==null;){if(l=t[Pt])return l;t=gv(t)}return a}t=l,l=t.parentNode}return null}function Xs(t){if(t=t[Pt]||t[ma]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function al(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(i(33))}function Qs(t){var a=t[nl];return a||(a=t[nl]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function Kt(t){t[qa]=!0}var Kh=new Set,Wh={};function ws(t,a){Js(t,a),Js(t+"Capture",a)}function Js(t,a){for(Wh[t]=a,t=0;t<a.length;t++)Kh.add(a[t])}var AS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xh={},Qh={};function OS(t){return Zt.call(Qh,t)?!0:Zt.call(Xh,t)?!1:AS.test(t)?Qh[t]=!0:(Xh[t]=!0,!1)}function Sr(t,a,l){if(OS(a))if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var o=a.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+l)}}function wr(t,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+l)}}function ga(t,a,l,o){if(o===null)t.removeAttribute(l);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(l);return}t.setAttributeNS(a,l,""+o)}}function Ln(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Jh(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function zS(t,a,l){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return f.call(this)},set:function(x){l=""+x,m.call(this,x)}}),Object.defineProperty(t,a,{enumerable:o.enumerable}),{getValue:function(){return l},setValue:function(x){l=""+x},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function Yc(t){if(!t._valueTracker){var a=Jh(t)?"checked":"value";t._valueTracker=zS(t,a,""+t[a])}}function em(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var l=a.getValue(),o="";return t&&(o=Jh(t)?t.checked?"true":"false":t.value),t=o,t!==l?(a.setValue(t),!0):!1}function _r(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var PS=/[\n"\\]/g;function qn(t){return t.replace(PS,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Vc(t,a,l,o,f,m,x,_){t.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?t.type=x:t.removeAttribute("type"),a!=null?x==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+Ln(a)):t.value!==""+Ln(a)&&(t.value=""+Ln(a)):x!=="submit"&&x!=="reset"||t.removeAttribute("value"),a!=null?Kc(t,x,Ln(a)):l!=null?Kc(t,x,Ln(l)):o!=null&&t.removeAttribute("value"),f==null&&m!=null&&(t.defaultChecked=!!m),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.name=""+Ln(_):t.removeAttribute("name")}function tm(t,a,l,o,f,m,x,_){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.type=m),a!=null||l!=null){if(!(m!=="submit"&&m!=="reset"||a!=null)){Yc(t);return}l=l!=null?""+Ln(l):"",a=a!=null?""+Ln(a):l,_||a===t.value||(t.value=a),t.defaultValue=a}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=_?t.checked:!!o,t.defaultChecked=!!o,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(t.name=x),Yc(t)}function Kc(t,a,l){a==="number"&&_r(t.ownerDocument)===t||t.defaultValue===""+l||(t.defaultValue=""+l)}function ei(t,a,l,o){if(t=t.options,a){a={};for(var f=0;f<l.length;f++)a["$"+l[f]]=!0;for(l=0;l<t.length;l++)f=a.hasOwnProperty("$"+t[l].value),t[l].selected!==f&&(t[l].selected=f),f&&o&&(t[l].defaultSelected=!0)}else{for(l=""+Ln(l),a=null,f=0;f<t.length;f++){if(t[f].value===l){t[f].selected=!0,o&&(t[f].defaultSelected=!0);return}a!==null||t[f].disabled||(a=t[f])}a!==null&&(a.selected=!0)}}function nm(t,a,l){if(a!=null&&(a=""+Ln(a),a!==t.value&&(t.value=a),l==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=l!=null?""+Ln(l):""}function am(t,a,l,o){if(a==null){if(o!=null){if(l!=null)throw Error(i(92));if(Q(o)){if(1<o.length)throw Error(i(93));o=o[0]}l=o}l==null&&(l=""),a=l}l=Ln(a),t.defaultValue=l,o=t.textContent,o===l&&o!==""&&o!==null&&(t.value=o),Yc(t)}function ti(t,a){if(a){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=a;return}}t.textContent=a}var IS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sm(t,a,l){var o=a.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?o?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":o?t.setProperty(a,l):typeof l!="number"||l===0||IS.has(a)?a==="float"?t.cssFloat=l:t[a]=(""+l).trim():t[a]=l+"px"}function im(t,a,l){if(a!=null&&typeof a!="object")throw Error(i(62));if(t=t.style,l!=null){for(var o in l)!l.hasOwnProperty(o)||a!=null&&a.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var f in a)o=a[f],a.hasOwnProperty(f)&&l[f]!==o&&sm(t,f,o)}else for(var m in a)a.hasOwnProperty(m)&&sm(t,m,a[m])}function Wc(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var BS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),LS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Er(t){return LS.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function pa(){}var Xc=null;function Qc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ni=null,ai=null;function lm(t){var a=Xs(t);if(a&&(t=a.stateNode)){var l=t[nn]||null;e:switch(t=a.stateNode,a.type){case"input":if(Vc(t,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),a=l.name,l.type==="radio"&&a!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+qn(""+a)+'"][type="radio"]'),a=0;a<l.length;a++){var o=l[a];if(o!==t&&o.form===t.form){var f=o[nn]||null;if(!f)throw Error(i(90));Vc(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(a=0;a<l.length;a++)o=l[a],o.form===t.form&&em(o)}break e;case"textarea":nm(t,l.value,l.defaultValue);break e;case"select":a=l.value,a!=null&&ei(t,!!l.multiple,a,!1)}}}var Jc=!1;function rm(t,a,l){if(Jc)return t(a,l);Jc=!0;try{var o=t(a);return o}finally{if(Jc=!1,(ni!==null||ai!==null)&&(fo(),ni&&(a=ni,t=ai,ai=ni=null,lm(a),t)))for(a=0;a<t.length;a++)lm(t[a])}}function sl(t,a){var l=t.stateNode;if(l===null)return null;var o=l[nn]||null;if(o===null)return null;l=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(i(231,a,typeof l));return l}var va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),eu=!1;if(va)try{var il={};Object.defineProperty(il,"passive",{get:function(){eu=!0}}),window.addEventListener("test",il,il),window.removeEventListener("test",il,il)}catch{eu=!1}var Ua=null,tu=null,Tr=null;function om(){if(Tr)return Tr;var t,a=tu,l=a.length,o,f="value"in Ua?Ua.value:Ua.textContent,m=f.length;for(t=0;t<l&&a[t]===f[t];t++);var x=l-t;for(o=1;o<=x&&a[l-o]===f[m-o];o++);return Tr=f.slice(t,1<o?1-o:void 0)}function Nr(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function Mr(){return!0}function cm(){return!1}function vn(t){function a(l,o,f,m,x){this._reactName=l,this._targetInst=f,this.type=o,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var _ in t)t.hasOwnProperty(_)&&(l=t[_],this[_]=l?l(m):m[_]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Mr:cm,this.isPropagationStopped=cm,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=Mr)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=Mr)},persist:function(){},isPersistent:Mr}),a}var _s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jr=vn(_s),ll=v({},_s,{view:0,detail:0}),qS=vn(ll),nu,au,rl,Cr=v({},ll,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==rl&&(rl&&t.type==="mousemove"?(nu=t.screenX-rl.screenX,au=t.screenY-rl.screenY):au=nu=0,rl=t),nu)},movementY:function(t){return"movementY"in t?t.movementY:au}}),um=vn(Cr),US=v({},Cr,{dataTransfer:0}),$S=vn(US),HS=v({},ll,{relatedTarget:0}),su=vn(HS),ZS=v({},_s,{animationName:0,elapsedTime:0,pseudoElement:0}),FS=vn(ZS),GS=v({},_s,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YS=vn(GS),VS=v({},_s,{data:0}),dm=vn(VS),KS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QS(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=XS[t])?!!a[t]:!1}function iu(){return QS}var JS=v({},ll,{key:function(t){if(t.key){var a=KS[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=Nr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iu,charCode:function(t){return t.type==="keypress"?Nr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Nr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),e1=vn(JS),t1=v({},Cr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fm=vn(t1),n1=v({},ll,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iu}),a1=vn(n1),s1=v({},_s,{propertyName:0,elapsedTime:0,pseudoElement:0}),i1=vn(s1),l1=v({},Cr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),r1=vn(l1),o1=v({},_s,{newState:0,oldState:0}),c1=vn(o1),u1=[9,13,27,32],lu=va&&"CompositionEvent"in window,ol=null;va&&"documentMode"in document&&(ol=document.documentMode);var d1=va&&"TextEvent"in window&&!ol,hm=va&&(!lu||ol&&8<ol&&11>=ol),mm=" ",gm=!1;function pm(t,a){switch(t){case"keyup":return u1.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var si=!1;function f1(t,a){switch(t){case"compositionend":return vm(a);case"keypress":return a.which!==32?null:(gm=!0,mm);case"textInput":return t=a.data,t===mm&&gm?null:t;default:return null}}function h1(t,a){if(si)return t==="compositionend"||!lu&&pm(t,a)?(t=om(),Tr=tu=Ua=null,si=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return hm&&a.locale!=="ko"?null:a.data;default:return null}}var m1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ym(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!m1[t.type]:a==="textarea"}function bm(t,a,l,o){ni?ai?ai.push(o):ai=[o]:ni=o,a=bo(a,"onChange"),0<a.length&&(l=new jr("onChange","change",null,l,o),t.push({event:l,listeners:a}))}var cl=null,ul=null;function g1(t){tv(t,0)}function Dr(t){var a=al(t);if(em(a))return t}function xm(t,a){if(t==="change")return a}var Sm=!1;if(va){var ru;if(va){var ou="oninput"in document;if(!ou){var wm=document.createElement("div");wm.setAttribute("oninput","return;"),ou=typeof wm.oninput=="function"}ru=ou}else ru=!1;Sm=ru&&(!document.documentMode||9<document.documentMode)}function _m(){cl&&(cl.detachEvent("onpropertychange",Em),ul=cl=null)}function Em(t){if(t.propertyName==="value"&&Dr(ul)){var a=[];bm(a,ul,t,Qc(t)),rm(g1,a)}}function p1(t,a,l){t==="focusin"?(_m(),cl=a,ul=l,cl.attachEvent("onpropertychange",Em)):t==="focusout"&&_m()}function v1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Dr(ul)}function y1(t,a){if(t==="click")return Dr(a)}function b1(t,a){if(t==="input"||t==="change")return Dr(a)}function x1(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var jn=typeof Object.is=="function"?Object.is:x1;function dl(t,a){if(jn(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var l=Object.keys(t),o=Object.keys(a);if(l.length!==o.length)return!1;for(o=0;o<l.length;o++){var f=l[o];if(!Zt.call(a,f)||!jn(t[f],a[f]))return!1}return!0}function Tm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Nm(t,a){var l=Tm(t);t=0;for(var o;l;){if(l.nodeType===3){if(o=t+l.textContent.length,t<=a&&o>=a)return{node:l,offset:a-t};t=o}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=Tm(l)}}function Mm(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?Mm(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function jm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=_r(t.document);a instanceof t.HTMLIFrameElement;){try{var l=typeof a.contentWindow.location.href=="string"}catch{l=!1}if(l)t=a.contentWindow;else break;a=_r(t.document)}return a}function cu(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var S1=va&&"documentMode"in document&&11>=document.documentMode,ii=null,uu=null,fl=null,du=!1;function Cm(t,a,l){var o=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;du||ii==null||ii!==_r(o)||(o=ii,"selectionStart"in o&&cu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),fl&&dl(fl,o)||(fl=o,o=bo(uu,"onSelect"),0<o.length&&(a=new jr("onSelect","select",null,a,l),t.push({event:a,listeners:o}),a.target=ii)))}function Es(t,a){var l={};return l[t.toLowerCase()]=a.toLowerCase(),l["Webkit"+t]="webkit"+a,l["Moz"+t]="moz"+a,l}var li={animationend:Es("Animation","AnimationEnd"),animationiteration:Es("Animation","AnimationIteration"),animationstart:Es("Animation","AnimationStart"),transitionrun:Es("Transition","TransitionRun"),transitionstart:Es("Transition","TransitionStart"),transitioncancel:Es("Transition","TransitionCancel"),transitionend:Es("Transition","TransitionEnd")},fu={},Dm={};va&&(Dm=document.createElement("div").style,"AnimationEvent"in window||(delete li.animationend.animation,delete li.animationiteration.animation,delete li.animationstart.animation),"TransitionEvent"in window||delete li.transitionend.transition);function Ts(t){if(fu[t])return fu[t];if(!li[t])return t;var a=li[t],l;for(l in a)if(a.hasOwnProperty(l)&&l in Dm)return fu[t]=a[l];return t}var Rm=Ts("animationend"),km=Ts("animationiteration"),Am=Ts("animationstart"),w1=Ts("transitionrun"),_1=Ts("transitionstart"),E1=Ts("transitioncancel"),Om=Ts("transitionend"),zm=new Map,hu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hu.push("scrollEnd");function Xn(t,a){zm.set(t,a),ws(a,[t])}var Rr=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Un=[],ri=0,mu=0;function kr(){for(var t=ri,a=mu=ri=0;a<t;){var l=Un[a];Un[a++]=null;var o=Un[a];Un[a++]=null;var f=Un[a];Un[a++]=null;var m=Un[a];if(Un[a++]=null,o!==null&&f!==null){var x=o.pending;x===null?f.next=f:(f.next=x.next,x.next=f),o.pending=f}m!==0&&Pm(l,f,m)}}function Ar(t,a,l,o){Un[ri++]=t,Un[ri++]=a,Un[ri++]=l,Un[ri++]=o,mu|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function gu(t,a,l,o){return Ar(t,a,l,o),Or(t)}function Ns(t,a){return Ar(t,null,null,a),Or(t)}function Pm(t,a,l){t.lanes|=l;var o=t.alternate;o!==null&&(o.lanes|=l);for(var f=!1,m=t.return;m!==null;)m.childLanes|=l,o=m.alternate,o!==null&&(o.childLanes|=l),m.tag===22&&(t=m.stateNode,t===null||t._visibility&1||(f=!0)),t=m,m=m.return;return t.tag===3?(m=t.stateNode,f&&a!==null&&(f=31-kt(l),t=m.hiddenUpdates,o=t[f],o===null?t[f]=[a]:o.push(a),a.lane=l|536870912),m):null}function Or(t){if(50<Ol)throw Ol=0,Ed=null,Error(i(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var oi={};function T1(t,a,l,o){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,a,l,o){return new T1(t,a,l,o)}function pu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ya(t,a){var l=t.alternate;return l===null?(l=Cn(t.tag,a,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=a,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&65011712,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,a=t.dependencies,l.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l.refCleanup=t.refCleanup,l}function Im(t,a){t.flags&=65011714;var l=t.alternate;return l===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=l.childLanes,t.lanes=l.lanes,t.child=l.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=l.memoizedProps,t.memoizedState=l.memoizedState,t.updateQueue=l.updateQueue,t.type=l.type,a=l.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function zr(t,a,l,o,f,m){var x=0;if(o=t,typeof t=="function")pu(t)&&(x=1);else if(typeof t=="string")x=Dw(t,l,oe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case K:return t=Cn(31,l,a,f),t.elementType=K,t.lanes=m,t;case T:return Ms(l.children,f,m,a);case C:x=8,f|=24;break;case k:return t=Cn(12,l,a,f|2),t.elementType=k,t.lanes=m,t;case U:return t=Cn(13,l,a,f),t.elementType=U,t.lanes=m,t;case M:return t=Cn(19,l,a,f),t.elementType=M,t.lanes=m,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case z:x=10;break e;case R:x=9;break e;case B:x=11;break e;case j:x=14;break e;case D:x=16,o=null;break e}x=29,l=Error(i(130,t===null?"null":typeof t,"")),o=null}return a=Cn(x,l,a,f),a.elementType=t,a.type=o,a.lanes=m,a}function Ms(t,a,l,o){return t=Cn(7,t,o,a),t.lanes=l,t}function vu(t,a,l){return t=Cn(6,t,null,a),t.lanes=l,t}function Bm(t){var a=Cn(18,null,null,0);return a.stateNode=t,a}function yu(t,a,l){return a=Cn(4,t.children!==null?t.children:[],t.key,a),a.lanes=l,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var Lm=new WeakMap;function $n(t,a){if(typeof t=="object"&&t!==null){var l=Lm.get(t);return l!==void 0?l:(a={value:t,source:a,stack:en(a)},Lm.set(t,a),a)}return{value:t,source:a,stack:en(a)}}var ci=[],ui=0,Pr=null,hl=0,Hn=[],Zn=0,$a=null,la=1,ra="";function ba(t,a){ci[ui++]=hl,ci[ui++]=Pr,Pr=t,hl=a}function qm(t,a,l){Hn[Zn++]=la,Hn[Zn++]=ra,Hn[Zn++]=$a,$a=t;var o=la;t=ra;var f=32-kt(o)-1;o&=~(1<<f),l+=1;var m=32-kt(a)+f;if(30<m){var x=f-f%5;m=(o&(1<<x)-1).toString(32),o>>=x,f-=x,la=1<<32-kt(a)+f|l<<f|o,ra=m+t}else la=1<<m|l<<f|o,ra=t}function bu(t){t.return!==null&&(ba(t,1),qm(t,1,0))}function xu(t){for(;t===Pr;)Pr=ci[--ui],ci[ui]=null,hl=ci[--ui],ci[ui]=null;for(;t===$a;)$a=Hn[--Zn],Hn[Zn]=null,ra=Hn[--Zn],Hn[Zn]=null,la=Hn[--Zn],Hn[Zn]=null}function Um(t,a){Hn[Zn++]=la,Hn[Zn++]=ra,Hn[Zn++]=$a,la=a.id,ra=a.overflow,$a=t}var an=null,vt=null,Ze=!1,Ha=null,Fn=!1,Su=Error(i(519));function Za(t){var a=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ml($n(a,t)),Su}function $m(t){var a=t.stateNode,l=t.type,o=t.memoizedProps;switch(a[Pt]=t,a[nn]=o,l){case"dialog":Ue("cancel",a),Ue("close",a);break;case"iframe":case"object":case"embed":Ue("load",a);break;case"video":case"audio":for(l=0;l<Pl.length;l++)Ue(Pl[l],a);break;case"source":Ue("error",a);break;case"img":case"image":case"link":Ue("error",a),Ue("load",a);break;case"details":Ue("toggle",a);break;case"input":Ue("invalid",a),tm(a,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ue("invalid",a);break;case"textarea":Ue("invalid",a),am(a,o.value,o.defaultValue,o.children)}l=o.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||a.textContent===""+l||o.suppressHydrationWarning===!0||iv(a.textContent,l)?(o.popover!=null&&(Ue("beforetoggle",a),Ue("toggle",a)),o.onScroll!=null&&Ue("scroll",a),o.onScrollEnd!=null&&Ue("scrollend",a),o.onClick!=null&&(a.onclick=pa),a=!0):a=!1,a||Za(t,!0)}function Hm(t){for(an=t.return;an;)switch(an.tag){case 5:case 31:case 13:Fn=!1;return;case 27:case 3:Fn=!0;return;default:an=an.return}}function di(t){if(t!==an)return!1;if(!Ze)return Hm(t),Ze=!0,!1;var a=t.tag,l;if((l=a!==3&&a!==27)&&((l=a===5)&&(l=t.type,l=!(l!=="form"&&l!=="button")||Ld(t.type,t.memoizedProps)),l=!l),l&&vt&&Za(t),Hm(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));vt=mv(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));vt=mv(t)}else a===27?(a=vt,ss(t.type)?(t=Zd,Zd=null,vt=t):vt=a):vt=an?Yn(t.stateNode.nextSibling):null;return!0}function js(){vt=an=null,Ze=!1}function wu(){var t=Ha;return t!==null&&(Sn===null?Sn=t:Sn.push.apply(Sn,t),Ha=null),t}function ml(t){Ha===null?Ha=[t]:Ha.push(t)}var _u=N(null),Cs=null,xa=null;function Fa(t,a,l){ee(_u,a._currentValue),a._currentValue=l}function Sa(t){t._currentValue=_u.current,P(_u)}function Eu(t,a,l){for(;t!==null;){var o=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),t===l)break;t=t.return}}function Tu(t,a,l,o){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var m=f.dependencies;if(m!==null){var x=f.child;m=m.firstContext;e:for(;m!==null;){var _=m;m=f;for(var O=0;O<a.length;O++)if(_.context===a[O]){m.lanes|=l,_=m.alternate,_!==null&&(_.lanes|=l),Eu(m.return,l,t),o||(x=null);break e}m=_.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(i(341));x.lanes|=l,m=x.alternate,m!==null&&(m.lanes|=l),Eu(x,l,t),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===t){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function fi(t,a,l,o){t=null;for(var f=a,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(i(387));if(x=x.memoizedProps,x!==null){var _=f.type;jn(f.pendingProps.value,x.value)||(t!==null?t.push(_):t=[_])}}else if(f===ye.current){if(x=f.alternate,x===null)throw Error(i(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Ul):t=[Ul])}f=f.return}t!==null&&Tu(a,t,l,o),a.flags|=262144}function Ir(t){for(t=t.firstContext;t!==null;){if(!jn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ds(t){Cs=t,xa=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function sn(t){return Zm(Cs,t)}function Br(t,a){return Cs===null&&Ds(t),Zm(t,a)}function Zm(t,a){var l=a._currentValue;if(a={context:a,memoizedValue:l,next:null},xa===null){if(t===null)throw Error(i(308));xa=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else xa=xa.next=a;return l}var N1=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(l,o){t.push(o)}};this.abort=function(){a.aborted=!0,t.forEach(function(l){return l()})}},M1=e.unstable_scheduleCallback,j1=e.unstable_NormalPriority,It={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Nu(){return{controller:new N1,data:new Map,refCount:0}}function gl(t){t.refCount--,t.refCount===0&&M1(j1,function(){t.controller.abort()})}var pl=null,Mu=0,hi=0,mi=null;function C1(t,a){if(pl===null){var l=pl=[];Mu=0,hi=Dd(),mi={status:"pending",value:void 0,then:function(o){l.push(o)}}}return Mu++,a.then(Fm,Fm),a}function Fm(){if(--Mu===0&&pl!==null){mi!==null&&(mi.status="fulfilled");var t=pl;pl=null,hi=0,mi=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function D1(t,a){var l=[],o={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return t.then(function(){o.status="fulfilled",o.value=a;for(var f=0;f<l.length;f++)(0,l[f])(a)},function(f){for(o.status="rejected",o.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),o}var Gm=L.S;L.S=function(t,a){Cp=je(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&C1(t,a),Gm!==null&&Gm(t,a)};var Rs=N(null);function ju(){var t=Rs.current;return t!==null?t:dt.pooledCache}function Lr(t,a){a===null?ee(Rs,Rs.current):ee(Rs,a.pool)}function Ym(){var t=ju();return t===null?null:{parent:It._currentValue,pool:t}}var gi=Error(i(460)),Cu=Error(i(474)),qr=Error(i(542)),Ur={then:function(){}};function Vm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Km(t,a,l){switch(l=t[l],l===void 0?t.push(a):l!==a&&(a.then(pa,pa),a=l),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Xm(t),t;default:if(typeof a.status=="string")a.then(pa,pa);else{if(t=dt,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=a,t.status="pending",t.then(function(o){if(a.status==="pending"){var f=a;f.status="fulfilled",f.value=o}},function(o){if(a.status==="pending"){var f=a;f.status="rejected",f.reason=o}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Xm(t),t}throw As=a,gi}}function ks(t){try{var a=t._init;return a(t._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(As=l,gi):l}}var As=null;function Wm(){if(As===null)throw Error(i(459));var t=As;return As=null,t}function Xm(t){if(t===gi||t===qr)throw Error(i(483))}var pi=null,vl=0;function $r(t){var a=vl;return vl+=1,pi===null&&(pi=[]),Km(pi,t,a)}function yl(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Hr(t,a){throw a.$$typeof===b?Error(i(525)):(t=Object.prototype.toString.call(a),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function Qm(t){function a(q,I){if(t){var $=q.deletions;$===null?(q.deletions=[I],q.flags|=16):$.push(I)}}function l(q,I){if(!t)return null;for(;I!==null;)a(q,I),I=I.sibling;return null}function o(q){for(var I=new Map;q!==null;)q.key!==null?I.set(q.key,q):I.set(q.index,q),q=q.sibling;return I}function f(q,I){return q=ya(q,I),q.index=0,q.sibling=null,q}function m(q,I,$){return q.index=$,t?($=q.alternate,$!==null?($=$.index,$<I?(q.flags|=67108866,I):$):(q.flags|=67108866,I)):(q.flags|=1048576,I)}function x(q){return t&&q.alternate===null&&(q.flags|=67108866),q}function _(q,I,$,te){return I===null||I.tag!==6?(I=vu($,q.mode,te),I.return=q,I):(I=f(I,$),I.return=q,I)}function O(q,I,$,te){var xe=$.type;return xe===T?J(q,I,$.props.children,te,$.key):I!==null&&(I.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===D&&ks(xe)===I.type)?(I=f(I,$.props),yl(I,$),I.return=q,I):(I=zr($.type,$.key,$.props,null,q.mode,te),yl(I,$),I.return=q,I)}function H(q,I,$,te){return I===null||I.tag!==4||I.stateNode.containerInfo!==$.containerInfo||I.stateNode.implementation!==$.implementation?(I=yu($,q.mode,te),I.return=q,I):(I=f(I,$.children||[]),I.return=q,I)}function J(q,I,$,te,xe){return I===null||I.tag!==7?(I=Ms($,q.mode,te,xe),I.return=q,I):(I=f(I,$),I.return=q,I)}function ie(q,I,$){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=vu(""+I,q.mode,$),I.return=q,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case S:return $=zr(I.type,I.key,I.props,null,q.mode,$),yl($,I),$.return=q,$;case E:return I=yu(I,q.mode,$),I.return=q,I;case D:return I=ks(I),ie(q,I,$)}if(Q(I)||se(I))return I=Ms(I,q.mode,$,null),I.return=q,I;if(typeof I.then=="function")return ie(q,$r(I),$);if(I.$$typeof===z)return ie(q,Br(q,I),$);Hr(q,I)}return null}function F(q,I,$,te){var xe=I!==null?I.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return xe!==null?null:_(q,I,""+$,te);if(typeof $=="object"&&$!==null){switch($.$$typeof){case S:return $.key===xe?O(q,I,$,te):null;case E:return $.key===xe?H(q,I,$,te):null;case D:return $=ks($),F(q,I,$,te)}if(Q($)||se($))return xe!==null?null:J(q,I,$,te,null);if(typeof $.then=="function")return F(q,I,$r($),te);if($.$$typeof===z)return F(q,I,Br(q,$),te);Hr(q,$)}return null}function V(q,I,$,te,xe){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return q=q.get($)||null,_(I,q,""+te,xe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case S:return q=q.get(te.key===null?$:te.key)||null,O(I,q,te,xe);case E:return q=q.get(te.key===null?$:te.key)||null,H(I,q,te,xe);case D:return te=ks(te),V(q,I,$,te,xe)}if(Q(te)||se(te))return q=q.get($)||null,J(I,q,te,xe,null);if(typeof te.then=="function")return V(q,I,$,$r(te),xe);if(te.$$typeof===z)return V(q,I,$,Br(I,te),xe);Hr(I,te)}return null}function pe(q,I,$,te){for(var xe=null,Ve=null,ve=I,Oe=I=0,He=null;ve!==null&&Oe<$.length;Oe++){ve.index>Oe?(He=ve,ve=null):He=ve.sibling;var Ke=F(q,ve,$[Oe],te);if(Ke===null){ve===null&&(ve=He);break}t&&ve&&Ke.alternate===null&&a(q,ve),I=m(Ke,I,Oe),Ve===null?xe=Ke:Ve.sibling=Ke,Ve=Ke,ve=He}if(Oe===$.length)return l(q,ve),Ze&&ba(q,Oe),xe;if(ve===null){for(;Oe<$.length;Oe++)ve=ie(q,$[Oe],te),ve!==null&&(I=m(ve,I,Oe),Ve===null?xe=ve:Ve.sibling=ve,Ve=ve);return Ze&&ba(q,Oe),xe}for(ve=o(ve);Oe<$.length;Oe++)He=V(ve,q,Oe,$[Oe],te),He!==null&&(t&&He.alternate!==null&&ve.delete(He.key===null?Oe:He.key),I=m(He,I,Oe),Ve===null?xe=He:Ve.sibling=He,Ve=He);return t&&ve.forEach(function(cs){return a(q,cs)}),Ze&&ba(q,Oe),xe}function Ee(q,I,$,te){if($==null)throw Error(i(151));for(var xe=null,Ve=null,ve=I,Oe=I=0,He=null,Ke=$.next();ve!==null&&!Ke.done;Oe++,Ke=$.next()){ve.index>Oe?(He=ve,ve=null):He=ve.sibling;var cs=F(q,ve,Ke.value,te);if(cs===null){ve===null&&(ve=He);break}t&&ve&&cs.alternate===null&&a(q,ve),I=m(cs,I,Oe),Ve===null?xe=cs:Ve.sibling=cs,Ve=cs,ve=He}if(Ke.done)return l(q,ve),Ze&&ba(q,Oe),xe;if(ve===null){for(;!Ke.done;Oe++,Ke=$.next())Ke=ie(q,Ke.value,te),Ke!==null&&(I=m(Ke,I,Oe),Ve===null?xe=Ke:Ve.sibling=Ke,Ve=Ke);return Ze&&ba(q,Oe),xe}for(ve=o(ve);!Ke.done;Oe++,Ke=$.next())Ke=V(ve,q,Oe,Ke.value,te),Ke!==null&&(t&&Ke.alternate!==null&&ve.delete(Ke.key===null?Oe:Ke.key),I=m(Ke,I,Oe),Ve===null?xe=Ke:Ve.sibling=Ke,Ve=Ke);return t&&ve.forEach(function(Uw){return a(q,Uw)}),Ze&&ba(q,Oe),xe}function ot(q,I,$,te){if(typeof $=="object"&&$!==null&&$.type===T&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case S:e:{for(var xe=$.key;I!==null;){if(I.key===xe){if(xe=$.type,xe===T){if(I.tag===7){l(q,I.sibling),te=f(I,$.props.children),te.return=q,q=te;break e}}else if(I.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===D&&ks(xe)===I.type){l(q,I.sibling),te=f(I,$.props),yl(te,$),te.return=q,q=te;break e}l(q,I);break}else a(q,I);I=I.sibling}$.type===T?(te=Ms($.props.children,q.mode,te,$.key),te.return=q,q=te):(te=zr($.type,$.key,$.props,null,q.mode,te),yl(te,$),te.return=q,q=te)}return x(q);case E:e:{for(xe=$.key;I!==null;){if(I.key===xe)if(I.tag===4&&I.stateNode.containerInfo===$.containerInfo&&I.stateNode.implementation===$.implementation){l(q,I.sibling),te=f(I,$.children||[]),te.return=q,q=te;break e}else{l(q,I);break}else a(q,I);I=I.sibling}te=yu($,q.mode,te),te.return=q,q=te}return x(q);case D:return $=ks($),ot(q,I,$,te)}if(Q($))return pe(q,I,$,te);if(se($)){if(xe=se($),typeof xe!="function")throw Error(i(150));return $=xe.call($),Ee(q,I,$,te)}if(typeof $.then=="function")return ot(q,I,$r($),te);if($.$$typeof===z)return ot(q,I,Br(q,$),te);Hr(q,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,I!==null&&I.tag===6?(l(q,I.sibling),te=f(I,$),te.return=q,q=te):(l(q,I),te=vu($,q.mode,te),te.return=q,q=te),x(q)):l(q,I)}return function(q,I,$,te){try{vl=0;var xe=ot(q,I,$,te);return pi=null,xe}catch(ve){if(ve===gi||ve===qr)throw ve;var Ve=Cn(29,ve,null,q.mode);return Ve.lanes=te,Ve.return=q,Ve}}}var Os=Qm(!0),Jm=Qm(!1),Ga=!1;function Du(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ru(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ya(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Va(t,a,l){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Je&2)!==0){var f=o.pending;return f===null?a.next=a:(a.next=f.next,f.next=a),o.pending=a,a=Or(t),Pm(t,null,l),a}return Ar(t,o,a,l),Or(t)}function bl(t,a,l){if(a=a.updateQueue,a!==null&&(a=a.shared,(l&4194048)!==0)){var o=a.lanes;o&=t.pendingLanes,l|=o,a.lanes=l,mt(t,l)}}function ku(t,a){var l=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,l===o)){var f=null,m=null;if(l=l.firstBaseUpdate,l!==null){do{var x={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};m===null?f=m=x:m=m.next=x,l=l.next}while(l!==null);m===null?f=m=a:m=m.next=a}else f=m=a;l={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=a:t.next=a,l.lastBaseUpdate=a}var Au=!1;function xl(){if(Au){var t=mi;if(t!==null)throw t}}function Sl(t,a,l,o){Au=!1;var f=t.updateQueue;Ga=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,_=f.shared.pending;if(_!==null){f.shared.pending=null;var O=_,H=O.next;O.next=null,x===null?m=H:x.next=H,x=O;var J=t.alternate;J!==null&&(J=J.updateQueue,_=J.lastBaseUpdate,_!==x&&(_===null?J.firstBaseUpdate=H:_.next=H,J.lastBaseUpdate=O))}if(m!==null){var ie=f.baseState;x=0,J=H=O=null,_=m;do{var F=_.lane&-536870913,V=F!==_.lane;if(V?($e&F)===F:(o&F)===F){F!==0&&F===hi&&(Au=!0),J!==null&&(J=J.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});e:{var pe=t,Ee=_;F=a;var ot=l;switch(Ee.tag){case 1:if(pe=Ee.payload,typeof pe=="function"){ie=pe.call(ot,ie,F);break e}ie=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Ee.payload,F=typeof pe=="function"?pe.call(ot,ie,F):pe,F==null)break e;ie=v({},ie,F);break e;case 2:Ga=!0}}F=_.callback,F!==null&&(t.flags|=64,V&&(t.flags|=8192),V=f.callbacks,V===null?f.callbacks=[F]:V.push(F))}else V={lane:F,tag:_.tag,payload:_.payload,callback:_.callback,next:null},J===null?(H=J=V,O=ie):J=J.next=V,x|=F;if(_=_.next,_===null){if(_=f.shared.pending,_===null)break;V=_,_=V.next,V.next=null,f.lastBaseUpdate=V,f.shared.pending=null}}while(!0);J===null&&(O=ie),f.baseState=O,f.firstBaseUpdate=H,f.lastBaseUpdate=J,m===null&&(f.shared.lanes=0),Ja|=x,t.lanes=x,t.memoizedState=ie}}function eg(t,a){if(typeof t!="function")throw Error(i(191,t));t.call(a)}function tg(t,a){var l=t.callbacks;if(l!==null)for(t.callbacks=null,t=0;t<l.length;t++)eg(l[t],a)}var vi=N(null),Zr=N(0);function ng(t,a){t=Da,ee(Zr,t),ee(vi,a),Da=t|a.baseLanes}function Ou(){ee(Zr,Da),ee(vi,vi.current)}function zu(){Da=Zr.current,P(vi),P(Zr)}var Dn=N(null),Gn=null;function Ka(t){var a=t.alternate;ee(At,At.current&1),ee(Dn,t),Gn===null&&(a===null||vi.current!==null||a.memoizedState!==null)&&(Gn=t)}function Pu(t){ee(At,At.current),ee(Dn,t),Gn===null&&(Gn=t)}function ag(t){t.tag===22?(ee(At,At.current),ee(Dn,t),Gn===null&&(Gn=t)):Wa()}function Wa(){ee(At,At.current),ee(Dn,Dn.current)}function Rn(t){P(Dn),Gn===t&&(Gn=null),P(At)}var At=N(0);function Fr(t){for(var a=t;a!==null;){if(a.tag===13){var l=a.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||$d(l)||Hd(l)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var wa=0,Re=null,lt=null,Bt=null,Gr=!1,yi=!1,zs=!1,Yr=0,wl=0,bi=null,R1=0;function Mt(){throw Error(i(321))}function Iu(t,a){if(a===null)return!1;for(var l=0;l<a.length&&l<t.length;l++)if(!jn(t[l],a[l]))return!1;return!0}function Bu(t,a,l,o,f,m){return wa=m,Re=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,L.H=t===null||t.memoizedState===null?qg:Ju,zs=!1,m=l(o,f),zs=!1,yi&&(m=ig(a,l,o,f)),sg(t),m}function sg(t){L.H=Tl;var a=lt!==null&&lt.next!==null;if(wa=0,Bt=lt=Re=null,Gr=!1,wl=0,bi=null,a)throw Error(i(300));t===null||Lt||(t=t.dependencies,t!==null&&Ir(t)&&(Lt=!0))}function ig(t,a,l,o){Re=t;var f=0;do{if(yi&&(bi=null),wl=0,yi=!1,25<=f)throw Error(i(301));if(f+=1,Bt=lt=null,t.updateQueue!=null){var m=t.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}L.H=Ug,m=a(l,o)}while(yi);return m}function k1(){var t=L.H,a=t.useState()[0];return a=typeof a.then=="function"?_l(a):a,t=t.useState()[0],(lt!==null?lt.memoizedState:null)!==t&&(Re.flags|=1024),a}function Lu(){var t=Yr!==0;return Yr=0,t}function qu(t,a,l){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~l}function Uu(t){if(Gr){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}Gr=!1}wa=0,Bt=lt=Re=null,yi=!1,wl=Yr=0,bi=null}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Re.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function Ot(){if(lt===null){var t=Re.alternate;t=t!==null?t.memoizedState:null}else t=lt.next;var a=Bt===null?Re.memoizedState:Bt.next;if(a!==null)Bt=a,lt=t;else{if(t===null)throw Re.alternate===null?Error(i(467)):Error(i(310));lt=t,t={memoizedState:lt.memoizedState,baseState:lt.baseState,baseQueue:lt.baseQueue,queue:lt.queue,next:null},Bt===null?Re.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function Vr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _l(t){var a=wl;return wl+=1,bi===null&&(bi=[]),t=Km(bi,t,a),a=Re,(Bt===null?a.memoizedState:Bt.next)===null&&(a=a.alternate,L.H=a===null||a.memoizedState===null?qg:Ju),t}function Kr(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return _l(t);if(t.$$typeof===z)return sn(t)}throw Error(i(438,String(t)))}function $u(t){var a=null,l=Re.updateQueue;if(l!==null&&(a=l.memoCache),a==null){var o=Re.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(a={data:o.data.map(function(f){return f.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),l===null&&(l=Vr(),Re.updateQueue=l),l.memoCache=a,l=a.data[a.index],l===void 0)for(l=a.data[a.index]=Array(t),o=0;o<t;o++)l[o]=re;return a.index++,l}function _a(t,a){return typeof a=="function"?a(t):a}function Wr(t){var a=Ot();return Hu(a,lt,t)}function Hu(t,a,l){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=l;var f=t.baseQueue,m=o.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}a.baseQueue=f=m,o.pending=null}if(m=t.baseState,f===null)t.memoizedState=m;else{a=f.next;var _=x=null,O=null,H=a,J=!1;do{var ie=H.lane&-536870913;if(ie!==H.lane?($e&ie)===ie:(wa&ie)===ie){var F=H.revertLane;if(F===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),ie===hi&&(J=!0);else if((wa&F)===F){H=H.next,F===hi&&(J=!0);continue}else ie={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(_=O=ie,x=m):O=O.next=ie,Re.lanes|=F,Ja|=F;ie=H.action,zs&&l(m,ie),m=H.hasEagerState?H.eagerState:l(m,ie)}else F={lane:ie,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},O===null?(_=O=F,x=m):O=O.next=F,Re.lanes|=ie,Ja|=ie;H=H.next}while(H!==null&&H!==a);if(O===null?x=m:O.next=_,!jn(m,t.memoizedState)&&(Lt=!0,J&&(l=mi,l!==null)))throw l;t.memoizedState=m,t.baseState=x,t.baseQueue=O,o.lastRenderedState=m}return f===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Zu(t){var a=Ot(),l=a.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=t;var o=l.dispatch,f=l.pending,m=a.memoizedState;if(f!==null){l.pending=null;var x=f=f.next;do m=t(m,x.action),x=x.next;while(x!==f);jn(m,a.memoizedState)||(Lt=!0),a.memoizedState=m,a.baseQueue===null&&(a.baseState=m),l.lastRenderedState=m}return[m,o]}function lg(t,a,l){var o=Re,f=Ot(),m=Ze;if(m){if(l===void 0)throw Error(i(407));l=l()}else l=a();var x=!jn((lt||f).memoizedState,l);if(x&&(f.memoizedState=l,Lt=!0),f=f.queue,Yu(cg.bind(null,o,f,t),[t]),f.getSnapshot!==a||x||Bt!==null&&Bt.memoizedState.tag&1){if(o.flags|=2048,xi(9,{destroy:void 0},og.bind(null,o,f,l,a),null),dt===null)throw Error(i(349));m||(wa&127)!==0||rg(o,a,l)}return l}function rg(t,a,l){t.flags|=16384,t={getSnapshot:a,value:l},a=Re.updateQueue,a===null?(a=Vr(),Re.updateQueue=a,a.stores=[t]):(l=a.stores,l===null?a.stores=[t]:l.push(t))}function og(t,a,l,o){a.value=l,a.getSnapshot=o,ug(a)&&dg(t)}function cg(t,a,l){return l(function(){ug(a)&&dg(t)})}function ug(t){var a=t.getSnapshot;t=t.value;try{var l=a();return!jn(t,l)}catch{return!0}}function dg(t){var a=Ns(t,2);a!==null&&wn(a,t,2)}function Fu(t){var a=mn();if(typeof t=="function"){var l=t;if(t=l(),zs){zt(!0);try{l()}finally{zt(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:t},a}function fg(t,a,l,o){return t.baseState=l,Hu(t,lt,typeof o=="function"?o:_a)}function A1(t,a,l,o,f){if(Jr(t))throw Error(i(485));if(t=a.action,t!==null){var m={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};L.T!==null?l(!0):m.isTransition=!1,o(m),l=a.pending,l===null?(m.next=a.pending=m,hg(a,m)):(m.next=l.next,a.pending=l.next=m)}}function hg(t,a){var l=a.action,o=a.payload,f=t.state;if(a.isTransition){var m=L.T,x={};L.T=x;try{var _=l(f,o),O=L.S;O!==null&&O(x,_),mg(t,a,_)}catch(H){Gu(t,a,H)}finally{m!==null&&x.types!==null&&(m.types=x.types),L.T=m}}else try{m=l(f,o),mg(t,a,m)}catch(H){Gu(t,a,H)}}function mg(t,a,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(o){gg(t,a,o)},function(o){return Gu(t,a,o)}):gg(t,a,l)}function gg(t,a,l){a.status="fulfilled",a.value=l,pg(a),t.state=l,a=t.pending,a!==null&&(l=a.next,l===a?t.pending=null:(l=l.next,a.next=l,hg(t,l)))}function Gu(t,a,l){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do a.status="rejected",a.reason=l,pg(a),a=a.next;while(a!==o)}t.action=null}function pg(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function vg(t,a){return a}function yg(t,a){if(Ze){var l=dt.formState;if(l!==null){e:{var o=Re;if(Ze){if(vt){t:{for(var f=vt,m=Fn;f.nodeType!==8;){if(!m){f=null;break t}if(f=Yn(f.nextSibling),f===null){f=null;break t}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){vt=Yn(f.nextSibling),o=f.data==="F!";break e}}Za(o)}o=!1}o&&(a=l[0])}}return l=mn(),l.memoizedState=l.baseState=a,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vg,lastRenderedState:a},l.queue=o,l=Ig.bind(null,Re,o),o.dispatch=l,o=Fu(!1),m=Qu.bind(null,Re,!1,o.queue),o=mn(),f={state:a,dispatch:null,action:t,pending:null},o.queue=f,l=A1.bind(null,Re,f,m,l),f.dispatch=l,o.memoizedState=t,[a,l,!1]}function bg(t){var a=Ot();return xg(a,lt,t)}function xg(t,a,l){if(a=Hu(t,a,vg)[0],t=Wr(_a)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var o=_l(a)}catch(x){throw x===gi?qr:x}else o=a;a=Ot();var f=a.queue,m=f.dispatch;return l!==a.memoizedState&&(Re.flags|=2048,xi(9,{destroy:void 0},O1.bind(null,f,l),null)),[o,m,t]}function O1(t,a){t.action=a}function Sg(t){var a=Ot(),l=lt;if(l!==null)return xg(a,l,t);Ot(),a=a.memoizedState,l=Ot();var o=l.queue.dispatch;return l.memoizedState=t,[a,o,!1]}function xi(t,a,l,o){return t={tag:t,create:l,deps:o,inst:a,next:null},a=Re.updateQueue,a===null&&(a=Vr(),Re.updateQueue=a),l=a.lastEffect,l===null?a.lastEffect=t.next=t:(o=l.next,l.next=t,t.next=o,a.lastEffect=t),t}function wg(){return Ot().memoizedState}function Xr(t,a,l,o){var f=mn();Re.flags|=t,f.memoizedState=xi(1|a,{destroy:void 0},l,o===void 0?null:o)}function Qr(t,a,l,o){var f=Ot();o=o===void 0?null:o;var m=f.memoizedState.inst;lt!==null&&o!==null&&Iu(o,lt.memoizedState.deps)?f.memoizedState=xi(a,m,l,o):(Re.flags|=t,f.memoizedState=xi(1|a,m,l,o))}function _g(t,a){Xr(8390656,8,t,a)}function Yu(t,a){Qr(2048,8,t,a)}function z1(t){Re.flags|=4;var a=Re.updateQueue;if(a===null)a=Vr(),Re.updateQueue=a,a.events=[t];else{var l=a.events;l===null?a.events=[t]:l.push(t)}}function Eg(t){var a=Ot().memoizedState;return z1({ref:a,nextImpl:t}),function(){if((Je&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}function Tg(t,a){return Qr(4,2,t,a)}function Ng(t,a){return Qr(4,4,t,a)}function Mg(t,a){if(typeof a=="function"){t=t();var l=a(t);return function(){typeof l=="function"?l():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function jg(t,a,l){l=l!=null?l.concat([t]):null,Qr(4,4,Mg.bind(null,a,t),l)}function Vu(){}function Cg(t,a){var l=Ot();a=a===void 0?null:a;var o=l.memoizedState;return a!==null&&Iu(a,o[1])?o[0]:(l.memoizedState=[t,a],t)}function Dg(t,a){var l=Ot();a=a===void 0?null:a;var o=l.memoizedState;if(a!==null&&Iu(a,o[1]))return o[0];if(o=t(),zs){zt(!0);try{t()}finally{zt(!1)}}return l.memoizedState=[o,a],o}function Ku(t,a,l){return l===void 0||(wa&1073741824)!==0&&($e&261930)===0?t.memoizedState=a:(t.memoizedState=l,t=Rp(),Re.lanes|=t,Ja|=t,l)}function Rg(t,a,l,o){return jn(l,a)?l:vi.current!==null?(t=Ku(t,l,o),jn(t,a)||(Lt=!0),t):(wa&42)===0||(wa&1073741824)!==0&&($e&261930)===0?(Lt=!0,t.memoizedState=l):(t=Rp(),Re.lanes|=t,Ja|=t,a)}function kg(t,a,l,o,f){var m=G.p;G.p=m!==0&&8>m?m:8;var x=L.T,_={};L.T=_,Qu(t,!1,a,l);try{var O=f(),H=L.S;if(H!==null&&H(_,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var J=D1(O,o);El(t,a,J,On(t))}else El(t,a,o,On(t))}catch(ie){El(t,a,{then:function(){},status:"rejected",reason:ie},On())}finally{G.p=m,x!==null&&_.types!==null&&(x.types=_.types),L.T=x}}function P1(){}function Wu(t,a,l,o){if(t.tag!==5)throw Error(i(476));var f=Ag(t).queue;kg(t,f,a,ae,l===null?P1:function(){return Og(t),l(o)})}function Ag(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:ae,baseState:ae,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:ae},next:null};var l={};return a.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:l},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function Og(t){var a=Ag(t);a.next===null&&(a=t.alternate.memoizedState),El(t,a.next.queue,{},On())}function Xu(){return sn(Ul)}function zg(){return Ot().memoizedState}function Pg(){return Ot().memoizedState}function I1(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var l=On();t=Ya(l);var o=Va(a,t,l);o!==null&&(wn(o,a,l),bl(o,a,l)),a={cache:Nu()},t.payload=a;return}a=a.return}}function B1(t,a,l){var o=On();l={lane:o,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Jr(t)?Bg(a,l):(l=gu(t,a,l,o),l!==null&&(wn(l,t,o),Lg(l,a,o)))}function Ig(t,a,l){var o=On();El(t,a,l,o)}function El(t,a,l,o){var f={lane:o,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(Jr(t))Bg(a,f);else{var m=t.alternate;if(t.lanes===0&&(m===null||m.lanes===0)&&(m=a.lastRenderedReducer,m!==null))try{var x=a.lastRenderedState,_=m(x,l);if(f.hasEagerState=!0,f.eagerState=_,jn(_,x))return Ar(t,a,f,0),dt===null&&kr(),!1}catch{}if(l=gu(t,a,f,o),l!==null)return wn(l,t,o),Lg(l,a,o),!0}return!1}function Qu(t,a,l,o){if(o={lane:2,revertLane:Dd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Jr(t)){if(a)throw Error(i(479))}else a=gu(t,l,o,2),a!==null&&wn(a,t,2)}function Jr(t){var a=t.alternate;return t===Re||a!==null&&a===Re}function Bg(t,a){yi=Gr=!0;var l=t.pending;l===null?a.next=a:(a.next=l.next,l.next=a),t.pending=a}function Lg(t,a,l){if((l&4194048)!==0){var o=a.lanes;o&=t.pendingLanes,l|=o,a.lanes=l,mt(t,l)}}var Tl={readContext:sn,use:Kr,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt};Tl.useEffectEvent=Mt;var qg={readContext:sn,use:Kr,useCallback:function(t,a){return mn().memoizedState=[t,a===void 0?null:a],t},useContext:sn,useEffect:_g,useImperativeHandle:function(t,a,l){l=l!=null?l.concat([t]):null,Xr(4194308,4,Mg.bind(null,a,t),l)},useLayoutEffect:function(t,a){return Xr(4194308,4,t,a)},useInsertionEffect:function(t,a){Xr(4,2,t,a)},useMemo:function(t,a){var l=mn();a=a===void 0?null:a;var o=t();if(zs){zt(!0);try{t()}finally{zt(!1)}}return l.memoizedState=[o,a],o},useReducer:function(t,a,l){var o=mn();if(l!==void 0){var f=l(a);if(zs){zt(!0);try{l(a)}finally{zt(!1)}}}else f=a;return o.memoizedState=o.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},o.queue=t,t=t.dispatch=B1.bind(null,Re,t),[o.memoizedState,t]},useRef:function(t){var a=mn();return t={current:t},a.memoizedState=t},useState:function(t){t=Fu(t);var a=t.queue,l=Ig.bind(null,Re,a);return a.dispatch=l,[t.memoizedState,l]},useDebugValue:Vu,useDeferredValue:function(t,a){var l=mn();return Ku(l,t,a)},useTransition:function(){var t=Fu(!1);return t=kg.bind(null,Re,t.queue,!0,!1),mn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,l){var o=Re,f=mn();if(Ze){if(l===void 0)throw Error(i(407));l=l()}else{if(l=a(),dt===null)throw Error(i(349));($e&127)!==0||rg(o,a,l)}f.memoizedState=l;var m={value:l,getSnapshot:a};return f.queue=m,_g(cg.bind(null,o,m,t),[t]),o.flags|=2048,xi(9,{destroy:void 0},og.bind(null,o,m,l,a),null),l},useId:function(){var t=mn(),a=dt.identifierPrefix;if(Ze){var l=ra,o=la;l=(o&~(1<<32-kt(o)-1)).toString(32)+l,a="_"+a+"R_"+l,l=Yr++,0<l&&(a+="H"+l.toString(32)),a+="_"}else l=R1++,a="_"+a+"r_"+l.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:Xu,useFormState:yg,useActionState:yg,useOptimistic:function(t){var a=mn();a.memoizedState=a.baseState=t;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=l,a=Qu.bind(null,Re,!0,l),l.dispatch=a,[t,a]},useMemoCache:$u,useCacheRefresh:function(){return mn().memoizedState=I1.bind(null,Re)},useEffectEvent:function(t){var a=mn(),l={impl:t};return a.memoizedState=l,function(){if((Je&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}},Ju={readContext:sn,use:Kr,useCallback:Cg,useContext:sn,useEffect:Yu,useImperativeHandle:jg,useInsertionEffect:Tg,useLayoutEffect:Ng,useMemo:Dg,useReducer:Wr,useRef:wg,useState:function(){return Wr(_a)},useDebugValue:Vu,useDeferredValue:function(t,a){var l=Ot();return Rg(l,lt.memoizedState,t,a)},useTransition:function(){var t=Wr(_a)[0],a=Ot().memoizedState;return[typeof t=="boolean"?t:_l(t),a]},useSyncExternalStore:lg,useId:zg,useHostTransitionStatus:Xu,useFormState:bg,useActionState:bg,useOptimistic:function(t,a){var l=Ot();return fg(l,lt,t,a)},useMemoCache:$u,useCacheRefresh:Pg};Ju.useEffectEvent=Eg;var Ug={readContext:sn,use:Kr,useCallback:Cg,useContext:sn,useEffect:Yu,useImperativeHandle:jg,useInsertionEffect:Tg,useLayoutEffect:Ng,useMemo:Dg,useReducer:Zu,useRef:wg,useState:function(){return Zu(_a)},useDebugValue:Vu,useDeferredValue:function(t,a){var l=Ot();return lt===null?Ku(l,t,a):Rg(l,lt.memoizedState,t,a)},useTransition:function(){var t=Zu(_a)[0],a=Ot().memoizedState;return[typeof t=="boolean"?t:_l(t),a]},useSyncExternalStore:lg,useId:zg,useHostTransitionStatus:Xu,useFormState:Sg,useActionState:Sg,useOptimistic:function(t,a){var l=Ot();return lt!==null?fg(l,lt,t,a):(l.baseState=t,[t,l.queue.dispatch])},useMemoCache:$u,useCacheRefresh:Pg};Ug.useEffectEvent=Eg;function ed(t,a,l,o){a=t.memoizedState,l=l(o,a),l=l==null?a:v({},a,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var td={enqueueSetState:function(t,a,l){t=t._reactInternals;var o=On(),f=Ya(o);f.payload=a,l!=null&&(f.callback=l),a=Va(t,f,o),a!==null&&(wn(a,t,o),bl(a,t,o))},enqueueReplaceState:function(t,a,l){t=t._reactInternals;var o=On(),f=Ya(o);f.tag=1,f.payload=a,l!=null&&(f.callback=l),a=Va(t,f,o),a!==null&&(wn(a,t,o),bl(a,t,o))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var l=On(),o=Ya(l);o.tag=2,a!=null&&(o.callback=a),a=Va(t,o,l),a!==null&&(wn(a,t,l),bl(a,t,l))}};function $g(t,a,l,o,f,m,x){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,m,x):a.prototype&&a.prototype.isPureReactComponent?!dl(l,o)||!dl(f,m):!0}function Hg(t,a,l,o){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(l,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(l,o),a.state!==t&&td.enqueueReplaceState(a,a.state,null)}function Ps(t,a){var l=a;if("ref"in a){l={};for(var o in a)o!=="ref"&&(l[o]=a[o])}if(t=t.defaultProps){l===a&&(l=v({},l));for(var f in t)l[f]===void 0&&(l[f]=t[f])}return l}function Zg(t){Rr(t)}function Fg(t){console.error(t)}function Gg(t){Rr(t)}function eo(t,a){try{var l=t.onUncaughtError;l(a.value,{componentStack:a.stack})}catch(o){setTimeout(function(){throw o})}}function Yg(t,a,l){try{var o=t.onCaughtError;o(l.value,{componentStack:l.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function nd(t,a,l){return l=Ya(l),l.tag=3,l.payload={element:null},l.callback=function(){eo(t,a)},l}function Vg(t){return t=Ya(t),t.tag=3,t}function Kg(t,a,l,o){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var m=o.value;t.payload=function(){return f(m)},t.callback=function(){Yg(a,l,o)}}var x=l.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(t.callback=function(){Yg(a,l,o),typeof f!="function"&&(es===null?es=new Set([this]):es.add(this));var _=o.stack;this.componentDidCatch(o.value,{componentStack:_!==null?_:""})})}function L1(t,a,l,o,f){if(l.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(a=l.alternate,a!==null&&fi(a,l,f,!0),l=Dn.current,l!==null){switch(l.tag){case 31:case 13:return Gn===null?ho():l.alternate===null&&jt===0&&(jt=3),l.flags&=-257,l.flags|=65536,l.lanes=f,o===Ur?l.flags|=16384:(a=l.updateQueue,a===null?l.updateQueue=new Set([o]):a.add(o),Md(t,o,f)),!1;case 22:return l.flags|=65536,o===Ur?l.flags|=16384:(a=l.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([o])},l.updateQueue=a):(l=a.retryQueue,l===null?a.retryQueue=new Set([o]):l.add(o)),Md(t,o,f)),!1}throw Error(i(435,l.tag))}return Md(t,o,f),ho(),!1}if(Ze)return a=Dn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=f,o!==Su&&(t=Error(i(422),{cause:o}),ml($n(t,l)))):(o!==Su&&(a=Error(i(423),{cause:o}),ml($n(a,l))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,o=$n(o,l),f=nd(t.stateNode,o,f),ku(t,f),jt!==4&&(jt=2)),!1;var m=Error(i(520),{cause:o});if(m=$n(m,l),Al===null?Al=[m]:Al.push(m),jt!==4&&(jt=2),a===null)return!0;o=$n(o,l),l=a;do{switch(l.tag){case 3:return l.flags|=65536,t=f&-f,l.lanes|=t,t=nd(l.stateNode,o,t),ku(l,t),!1;case 1:if(a=l.type,m=l.stateNode,(l.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(es===null||!es.has(m))))return l.flags|=65536,f&=-f,l.lanes|=f,f=Vg(f),Kg(f,t,l,o),ku(l,f),!1}l=l.return}while(l!==null);return!1}var ad=Error(i(461)),Lt=!1;function ln(t,a,l,o){a.child=t===null?Jm(a,null,l,o):Os(a,t.child,l,o)}function Wg(t,a,l,o,f){l=l.render;var m=a.ref;if("ref"in o){var x={};for(var _ in o)_!=="ref"&&(x[_]=o[_])}else x=o;return Ds(a),o=Bu(t,a,l,x,m,f),_=Lu(),t!==null&&!Lt?(qu(t,a,f),Ea(t,a,f)):(Ze&&_&&bu(a),a.flags|=1,ln(t,a,o,f),a.child)}function Xg(t,a,l,o,f){if(t===null){var m=l.type;return typeof m=="function"&&!pu(m)&&m.defaultProps===void 0&&l.compare===null?(a.tag=15,a.type=m,Qg(t,a,m,o,f)):(t=zr(l.type,null,o,a,a.mode,f),t.ref=a.ref,t.return=a,a.child=t)}if(m=t.child,!dd(t,f)){var x=m.memoizedProps;if(l=l.compare,l=l!==null?l:dl,l(x,o)&&t.ref===a.ref)return Ea(t,a,f)}return a.flags|=1,t=ya(m,o),t.ref=a.ref,t.return=a,a.child=t}function Qg(t,a,l,o,f){if(t!==null){var m=t.memoizedProps;if(dl(m,o)&&t.ref===a.ref)if(Lt=!1,a.pendingProps=o=m,dd(t,f))(t.flags&131072)!==0&&(Lt=!0);else return a.lanes=t.lanes,Ea(t,a,f)}return sd(t,a,l,o,f)}function Jg(t,a,l,o){var f=o.children,m=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((a.flags&128)!==0){if(m=m!==null?m.baseLanes|l:l,t!==null){for(o=a.child=t.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~m}else o=0,a.child=null;return ep(t,a,m,l,o)}if((l&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Lr(a,m!==null?m.cachePool:null),m!==null?ng(a,m):Ou(),ag(a);else return o=a.lanes=536870912,ep(t,a,m!==null?m.baseLanes|l:l,l,o)}else m!==null?(Lr(a,m.cachePool),ng(a,m),Wa(),a.memoizedState=null):(t!==null&&Lr(a,null),Ou(),Wa());return ln(t,a,f,l),a.child}function Nl(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function ep(t,a,l,o,f){var m=ju();return m=m===null?null:{parent:It._currentValue,pool:m},a.memoizedState={baseLanes:l,cachePool:m},t!==null&&Lr(a,null),Ou(),ag(a),t!==null&&fi(t,a,o,!0),a.childLanes=f,null}function to(t,a){return a=ao({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function tp(t,a,l){return Os(a,t.child,null,l),t=to(a,a.pendingProps),t.flags|=2,Rn(a),a.memoizedState=null,t}function q1(t,a,l){var o=a.pendingProps,f=(a.flags&128)!==0;if(a.flags&=-129,t===null){if(Ze){if(o.mode==="hidden")return t=to(a,o),a.lanes=536870912,Nl(null,t);if(Pu(a),(t=vt)?(t=hv(t,Fn),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:$a!==null?{id:la,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},l=Bm(t),l.return=a,a.child=l,an=a,vt=null)):t=null,t===null)throw Za(a);return a.lanes=536870912,null}return to(a,o)}var m=t.memoizedState;if(m!==null){var x=m.dehydrated;if(Pu(a),f)if(a.flags&256)a.flags&=-257,a=tp(t,a,l);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(i(558));else if(Lt||fi(t,a,l,!1),f=(l&t.childLanes)!==0,Lt||f){if(o=dt,o!==null&&(x=we(o,l),x!==0&&x!==m.retryLane))throw m.retryLane=x,Ns(t,x),wn(o,t,x),ad;ho(),a=tp(t,a,l)}else t=m.treeContext,vt=Yn(x.nextSibling),an=a,Ze=!0,Ha=null,Fn=!1,t!==null&&Um(a,t),a=to(a,o),a.flags|=4096;return a}return t=ya(t.child,{mode:o.mode,children:o.children}),t.ref=a.ref,a.child=t,t.return=a,t}function no(t,a){var l=a.ref;if(l===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(i(284));(t===null||t.ref!==l)&&(a.flags|=4194816)}}function sd(t,a,l,o,f){return Ds(a),l=Bu(t,a,l,o,void 0,f),o=Lu(),t!==null&&!Lt?(qu(t,a,f),Ea(t,a,f)):(Ze&&o&&bu(a),a.flags|=1,ln(t,a,l,f),a.child)}function np(t,a,l,o,f,m){return Ds(a),a.updateQueue=null,l=ig(a,o,l,f),sg(t),o=Lu(),t!==null&&!Lt?(qu(t,a,m),Ea(t,a,m)):(Ze&&o&&bu(a),a.flags|=1,ln(t,a,l,m),a.child)}function ap(t,a,l,o,f){if(Ds(a),a.stateNode===null){var m=oi,x=l.contextType;typeof x=="object"&&x!==null&&(m=sn(x)),m=new l(o,m),a.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=td,a.stateNode=m,m._reactInternals=a,m=a.stateNode,m.props=o,m.state=a.memoizedState,m.refs={},Du(a),x=l.contextType,m.context=typeof x=="object"&&x!==null?sn(x):oi,m.state=a.memoizedState,x=l.getDerivedStateFromProps,typeof x=="function"&&(ed(a,l,x,o),m.state=a.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&td.enqueueReplaceState(m,m.state,null),Sl(a,o,m,f),xl(),m.state=a.memoizedState),typeof m.componentDidMount=="function"&&(a.flags|=4194308),o=!0}else if(t===null){m=a.stateNode;var _=a.memoizedProps,O=Ps(l,_);m.props=O;var H=m.context,J=l.contextType;x=oi,typeof J=="object"&&J!==null&&(x=sn(J));var ie=l.getDerivedStateFromProps;J=typeof ie=="function"||typeof m.getSnapshotBeforeUpdate=="function",_=a.pendingProps!==_,J||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_||H!==x)&&Hg(a,m,o,x),Ga=!1;var F=a.memoizedState;m.state=F,Sl(a,o,m,f),xl(),H=a.memoizedState,_||F!==H||Ga?(typeof ie=="function"&&(ed(a,l,ie,o),H=a.memoizedState),(O=Ga||$g(a,l,O,o,F,H,x))?(J||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(a.flags|=4194308)):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=H),m.props=o,m.state=H,m.context=x,o=O):(typeof m.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{m=a.stateNode,Ru(t,a),x=a.memoizedProps,J=Ps(l,x),m.props=J,ie=a.pendingProps,F=m.context,H=l.contextType,O=oi,typeof H=="object"&&H!==null&&(O=sn(H)),_=l.getDerivedStateFromProps,(H=typeof _=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==ie||F!==O)&&Hg(a,m,o,O),Ga=!1,F=a.memoizedState,m.state=F,Sl(a,o,m,f),xl();var V=a.memoizedState;x!==ie||F!==V||Ga||t!==null&&t.dependencies!==null&&Ir(t.dependencies)?(typeof _=="function"&&(ed(a,l,_,o),V=a.memoizedState),(J=Ga||$g(a,l,J,o,F,V,O)||t!==null&&t.dependencies!==null&&Ir(t.dependencies))?(H||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,V,O),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,V,O)),typeof m.componentDidUpdate=="function"&&(a.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=V),m.props=o,m.state=V,m.context=O,o=J):(typeof m.componentDidUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(a.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&F===t.memoizedState||(a.flags|=1024),o=!1)}return m=o,no(t,a),o=(a.flags&128)!==0,m||o?(m=a.stateNode,l=o&&typeof l.getDerivedStateFromError!="function"?null:m.render(),a.flags|=1,t!==null&&o?(a.child=Os(a,t.child,null,f),a.child=Os(a,null,l,f)):ln(t,a,l,f),a.memoizedState=m.state,t=a.child):t=Ea(t,a,f),t}function sp(t,a,l,o){return js(),a.flags|=256,ln(t,a,l,o),a.child}var id={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ld(t){return{baseLanes:t,cachePool:Ym()}}function rd(t,a,l){return t=t!==null?t.childLanes&~l:0,a&&(t|=An),t}function ip(t,a,l){var o=a.pendingProps,f=!1,m=(a.flags&128)!==0,x;if((x=m)||(x=t!==null&&t.memoizedState===null?!1:(At.current&2)!==0),x&&(f=!0,a.flags&=-129),x=(a.flags&32)!==0,a.flags&=-33,t===null){if(Ze){if(f?Ka(a):Wa(),(t=vt)?(t=hv(t,Fn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:$a!==null?{id:la,overflow:ra}:null,retryLane:536870912,hydrationErrors:null},l=Bm(t),l.return=a,a.child=l,an=a,vt=null)):t=null,t===null)throw Za(a);return Hd(t)?a.lanes=32:a.lanes=536870912,null}var _=o.children;return o=o.fallback,f?(Wa(),f=a.mode,_=ao({mode:"hidden",children:_},f),o=Ms(o,f,l,null),_.return=a,o.return=a,_.sibling=o,a.child=_,o=a.child,o.memoizedState=ld(l),o.childLanes=rd(t,x,l),a.memoizedState=id,Nl(null,o)):(Ka(a),od(a,_))}var O=t.memoizedState;if(O!==null&&(_=O.dehydrated,_!==null)){if(m)a.flags&256?(Ka(a),a.flags&=-257,a=cd(t,a,l)):a.memoizedState!==null?(Wa(),a.child=t.child,a.flags|=128,a=null):(Wa(),_=o.fallback,f=a.mode,o=ao({mode:"visible",children:o.children},f),_=Ms(_,f,l,null),_.flags|=2,o.return=a,_.return=a,o.sibling=_,a.child=o,Os(a,t.child,null,l),o=a.child,o.memoizedState=ld(l),o.childLanes=rd(t,x,l),a.memoizedState=id,a=Nl(null,o));else if(Ka(a),Hd(_)){if(x=_.nextSibling&&_.nextSibling.dataset,x)var H=x.dgst;x=H,o=Error(i(419)),o.stack="",o.digest=x,ml({value:o,source:null,stack:null}),a=cd(t,a,l)}else if(Lt||fi(t,a,l,!1),x=(l&t.childLanes)!==0,Lt||x){if(x=dt,x!==null&&(o=we(x,l),o!==0&&o!==O.retryLane))throw O.retryLane=o,Ns(t,o),wn(x,t,o),ad;$d(_)||ho(),a=cd(t,a,l)}else $d(_)?(a.flags|=192,a.child=t.child,a=null):(t=O.treeContext,vt=Yn(_.nextSibling),an=a,Ze=!0,Ha=null,Fn=!1,t!==null&&Um(a,t),a=od(a,o.children),a.flags|=4096);return a}return f?(Wa(),_=o.fallback,f=a.mode,O=t.child,H=O.sibling,o=ya(O,{mode:"hidden",children:o.children}),o.subtreeFlags=O.subtreeFlags&65011712,H!==null?_=ya(H,_):(_=Ms(_,f,l,null),_.flags|=2),_.return=a,o.return=a,o.sibling=_,a.child=o,Nl(null,o),o=a.child,_=t.child.memoizedState,_===null?_=ld(l):(f=_.cachePool,f!==null?(O=It._currentValue,f=f.parent!==O?{parent:O,pool:O}:f):f=Ym(),_={baseLanes:_.baseLanes|l,cachePool:f}),o.memoizedState=_,o.childLanes=rd(t,x,l),a.memoizedState=id,Nl(t.child,o)):(Ka(a),l=t.child,t=l.sibling,l=ya(l,{mode:"visible",children:o.children}),l.return=a,l.sibling=null,t!==null&&(x=a.deletions,x===null?(a.deletions=[t],a.flags|=16):x.push(t)),a.child=l,a.memoizedState=null,l)}function od(t,a){return a=ao({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function ao(t,a){return t=Cn(22,t,null,a),t.lanes=0,t}function cd(t,a,l){return Os(a,t.child,null,l),t=od(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function lp(t,a,l){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a),Eu(t.return,a,l)}function ud(t,a,l,o,f,m){var x=t.memoizedState;x===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:l,tailMode:f,treeForkCount:m}:(x.isBackwards=a,x.rendering=null,x.renderingStartTime=0,x.last=o,x.tail=l,x.tailMode=f,x.treeForkCount=m)}function rp(t,a,l){var o=a.pendingProps,f=o.revealOrder,m=o.tail;o=o.children;var x=At.current,_=(x&2)!==0;if(_?(x=x&1|2,a.flags|=128):x&=1,ee(At,x),ln(t,a,o,l),o=Ze?hl:0,!_&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lp(t,l,a);else if(t.tag===19)lp(t,l,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(l=a.child,f=null;l!==null;)t=l.alternate,t!==null&&Fr(t)===null&&(f=l),l=l.sibling;l=f,l===null?(f=a.child,a.child=null):(f=l.sibling,l.sibling=null),ud(a,!1,f,l,m,o);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=a.child,a.child=null;f!==null;){if(t=f.alternate,t!==null&&Fr(t)===null){a.child=f;break}t=f.sibling,f.sibling=l,l=f,f=t}ud(a,!0,l,null,m,o);break;case"together":ud(a,!1,null,null,void 0,o);break;default:a.memoizedState=null}return a.child}function Ea(t,a,l){if(t!==null&&(a.dependencies=t.dependencies),Ja|=a.lanes,(l&a.childLanes)===0)if(t!==null){if(fi(t,a,l,!1),(l&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(i(153));if(a.child!==null){for(t=a.child,l=ya(t,t.pendingProps),a.child=l,l.return=a;t.sibling!==null;)t=t.sibling,l=l.sibling=ya(t,t.pendingProps),l.return=a;l.sibling=null}return a.child}function dd(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Ir(t)))}function U1(t,a,l){switch(a.tag){case 3:be(a,a.stateNode.containerInfo),Fa(a,It,t.memoizedState.cache),js();break;case 27:case 5:_e(a);break;case 4:be(a,a.stateNode.containerInfo);break;case 10:Fa(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,Pu(a),null;break;case 13:var o=a.memoizedState;if(o!==null)return o.dehydrated!==null?(Ka(a),a.flags|=128,null):(l&a.child.childLanes)!==0?ip(t,a,l):(Ka(a),t=Ea(t,a,l),t!==null?t.sibling:null);Ka(a);break;case 19:var f=(t.flags&128)!==0;if(o=(l&a.childLanes)!==0,o||(fi(t,a,l,!1),o=(l&a.childLanes)!==0),f){if(o)return rp(t,a,l);a.flags|=128}if(f=a.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ee(At,At.current),o)break;return null;case 22:return a.lanes=0,Jg(t,a,l,a.pendingProps);case 24:Fa(a,It,t.memoizedState.cache)}return Ea(t,a,l)}function op(t,a,l){if(t!==null)if(t.memoizedProps!==a.pendingProps)Lt=!0;else{if(!dd(t,l)&&(a.flags&128)===0)return Lt=!1,U1(t,a,l);Lt=(t.flags&131072)!==0}else Lt=!1,Ze&&(a.flags&1048576)!==0&&qm(a,hl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var o=a.pendingProps;if(t=ks(a.elementType),a.type=t,typeof t=="function")pu(t)?(o=Ps(t,o),a.tag=1,a=ap(null,a,t,o,l)):(a.tag=0,a=sd(null,a,t,o,l));else{if(t!=null){var f=t.$$typeof;if(f===B){a.tag=11,a=Wg(null,a,t,o,l);break e}else if(f===j){a.tag=14,a=Xg(null,a,t,o,l);break e}}throw a=le(t)||t,Error(i(306,a,""))}}return a;case 0:return sd(t,a,a.type,a.pendingProps,l);case 1:return o=a.type,f=Ps(o,a.pendingProps),ap(t,a,o,f,l);case 3:e:{if(be(a,a.stateNode.containerInfo),t===null)throw Error(i(387));o=a.pendingProps;var m=a.memoizedState;f=m.element,Ru(t,a),Sl(a,o,null,l);var x=a.memoizedState;if(o=x.cache,Fa(a,It,o),o!==m.cache&&Tu(a,[It],l,!0),xl(),o=x.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:x.cache},a.updateQueue.baseState=m,a.memoizedState=m,a.flags&256){a=sp(t,a,o,l);break e}else if(o!==f){f=$n(Error(i(424)),a),ml(f),a=sp(t,a,o,l);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,vt=Yn(t.firstChild),an=a,Ze=!0,Ha=null,Fn=!0,l=Jm(a,null,o,l),a.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(js(),o===f){a=Ea(t,a,l);break e}ln(t,a,o,l)}a=a.child}return a;case 26:return no(t,a),t===null?(l=bv(a.type,null,a.pendingProps,null))?a.memoizedState=l:Ze||(l=a.type,t=a.pendingProps,o=xo(ce.current).createElement(l),o[Pt]=a,o[nn]=t,rn(o,l,t),Kt(o),a.stateNode=o):a.memoizedState=bv(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return _e(a),t===null&&Ze&&(o=a.stateNode=pv(a.type,a.pendingProps,ce.current),an=a,Fn=!0,f=vt,ss(a.type)?(Zd=f,vt=Yn(o.firstChild)):vt=f),ln(t,a,a.pendingProps.children,l),no(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&Ze&&((f=o=vt)&&(o=vw(o,a.type,a.pendingProps,Fn),o!==null?(a.stateNode=o,an=a,vt=Yn(o.firstChild),Fn=!1,f=!0):f=!1),f||Za(a)),_e(a),f=a.type,m=a.pendingProps,x=t!==null?t.memoizedProps:null,o=m.children,Ld(f,m)?o=null:x!==null&&Ld(f,x)&&(a.flags|=32),a.memoizedState!==null&&(f=Bu(t,a,k1,null,null,l),Ul._currentValue=f),no(t,a),ln(t,a,o,l),a.child;case 6:return t===null&&Ze&&((t=l=vt)&&(l=yw(l,a.pendingProps,Fn),l!==null?(a.stateNode=l,an=a,vt=null,t=!0):t=!1),t||Za(a)),null;case 13:return ip(t,a,l);case 4:return be(a,a.stateNode.containerInfo),o=a.pendingProps,t===null?a.child=Os(a,null,o,l):ln(t,a,o,l),a.child;case 11:return Wg(t,a,a.type,a.pendingProps,l);case 7:return ln(t,a,a.pendingProps,l),a.child;case 8:return ln(t,a,a.pendingProps.children,l),a.child;case 12:return ln(t,a,a.pendingProps.children,l),a.child;case 10:return o=a.pendingProps,Fa(a,a.type,o.value),ln(t,a,o.children,l),a.child;case 9:return f=a.type._context,o=a.pendingProps.children,Ds(a),f=sn(f),o=o(f),a.flags|=1,ln(t,a,o,l),a.child;case 14:return Xg(t,a,a.type,a.pendingProps,l);case 15:return Qg(t,a,a.type,a.pendingProps,l);case 19:return rp(t,a,l);case 31:return q1(t,a,l);case 22:return Jg(t,a,l,a.pendingProps);case 24:return Ds(a),o=sn(It),t===null?(f=ju(),f===null&&(f=dt,m=Nu(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=l),f=m),a.memoizedState={parent:o,cache:f},Du(a),Fa(a,It,f)):((t.lanes&l)!==0&&(Ru(t,a),Sl(a,null,null,l),xl()),f=t.memoizedState,m=a.memoizedState,f.parent!==o?(f={parent:o,cache:o},a.memoizedState=f,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=f),Fa(a,It,o)):(o=m.cache,Fa(a,It,o),o!==f.cache&&Tu(a,[It],l,!0))),ln(t,a,a.pendingProps.children,l),a.child;case 29:throw a.pendingProps}throw Error(i(156,a.tag))}function Ta(t){t.flags|=4}function fd(t,a,l,o,f){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(zp())t.flags|=8192;else throw As=Ur,Cu}else t.flags&=-16777217}function cp(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Ev(a))if(zp())t.flags|=8192;else throw As=Ur,Cu}function so(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Xe():536870912,t.lanes|=a,Ei|=a)}function Ml(t,a){if(!Ze)switch(t.tailMode){case"hidden":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var o=null;l!==null;)l.alternate!==null&&(o=l),l=l.sibling;o===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function yt(t){var a=t.alternate!==null&&t.alternate.child===t.child,l=0,o=0;if(a)for(var f=t.child;f!==null;)l|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)l|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=o,t.childLanes=l,a}function $1(t,a,l){var o=a.pendingProps;switch(xu(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(a),null;case 1:return yt(a),null;case 3:return l=a.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),Sa(It),ge(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(t===null||t.child===null)&&(di(a)?Ta(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,wu())),yt(a),null;case 26:var f=a.type,m=a.memoizedState;return t===null?(Ta(a),m!==null?(yt(a),cp(a,m)):(yt(a),fd(a,f,null,o,l))):m?m!==t.memoizedState?(Ta(a),yt(a),cp(a,m)):(yt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==o&&Ta(a),yt(a),fd(a,f,t,o,l)),null;case 27:if(Be(a),l=ce.current,f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Ta(a);else{if(!o){if(a.stateNode===null)throw Error(i(166));return yt(a),null}t=oe.current,di(a)?$m(a):(t=pv(f,o,l),a.stateNode=t,Ta(a))}return yt(a),null;case 5:if(Be(a),f=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&Ta(a);else{if(!o){if(a.stateNode===null)throw Error(i(166));return yt(a),null}if(m=oe.current,di(a))$m(a);else{var x=xo(ce.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?x.createElement("select",{is:o.is}):x.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?x.createElement(f,{is:o.is}):x.createElement(f)}}m[Pt]=a,m[nn]=o;e:for(x=a.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===a)break e;for(;x.sibling===null;){if(x.return===null||x.return===a)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}a.stateNode=m;e:switch(rn(m,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ta(a)}}return yt(a),fd(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,l),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==o&&Ta(a);else{if(typeof o!="string"&&a.stateNode===null)throw Error(i(166));if(t=ce.current,di(a)){if(t=a.stateNode,l=a.memoizedProps,o=null,f=an,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}t[Pt]=a,t=!!(t.nodeValue===l||o!==null&&o.suppressHydrationWarning===!0||iv(t.nodeValue,l)),t||Za(a,!0)}else t=xo(t).createTextNode(o),t[Pt]=a,a.stateNode=t}return yt(a),null;case 31:if(l=a.memoizedState,t===null||t.memoizedState!==null){if(o=di(a),l!==null){if(t===null){if(!o)throw Error(i(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[Pt]=a}else js(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;yt(a),t=!1}else l=wu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=l),t=!0;if(!t)return a.flags&256?(Rn(a),a):(Rn(a),null);if((a.flags&128)!==0)throw Error(i(558))}return yt(a),null;case 13:if(o=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=di(a),o!==null&&o.dehydrated!==null){if(t===null){if(!f)throw Error(i(318));if(f=a.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Pt]=a}else js(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;yt(a),f=!1}else f=wu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return a.flags&256?(Rn(a),a):(Rn(a),null)}return Rn(a),(a.flags&128)!==0?(a.lanes=l,a):(l=o!==null,t=t!==null&&t.memoizedState!==null,l&&(o=a.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==f&&(o.flags|=2048)),l!==t&&l&&(a.child.flags|=8192),so(a,a.updateQueue),yt(a),null);case 4:return ge(),t===null&&Od(a.stateNode.containerInfo),yt(a),null;case 10:return Sa(a.type),yt(a),null;case 19:if(P(At),o=a.memoizedState,o===null)return yt(a),null;if(f=(a.flags&128)!==0,m=o.rendering,m===null)if(f)Ml(o,!1);else{if(jt!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(m=Fr(t),m!==null){for(a.flags|=128,Ml(o,!1),t=m.updateQueue,a.updateQueue=t,so(a,t),a.subtreeFlags=0,t=l,l=a.child;l!==null;)Im(l,t),l=l.sibling;return ee(At,At.current&1|2),Ze&&ba(a,o.treeForkCount),a.child}t=t.sibling}o.tail!==null&&je()>co&&(a.flags|=128,f=!0,Ml(o,!1),a.lanes=4194304)}else{if(!f)if(t=Fr(m),t!==null){if(a.flags|=128,f=!0,t=t.updateQueue,a.updateQueue=t,so(a,t),Ml(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!Ze)return yt(a),null}else 2*je()-o.renderingStartTime>co&&l!==536870912&&(a.flags|=128,f=!0,Ml(o,!1),a.lanes=4194304);o.isBackwards?(m.sibling=a.child,a.child=m):(t=o.last,t!==null?t.sibling=m:a.child=m,o.last=m)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=je(),t.sibling=null,l=At.current,ee(At,f?l&1|2:l&1),Ze&&ba(a,o.treeForkCount),t):(yt(a),null);case 22:case 23:return Rn(a),zu(),o=a.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(a.flags|=8192):o&&(a.flags|=8192),o?(l&536870912)!==0&&(a.flags&128)===0&&(yt(a),a.subtreeFlags&6&&(a.flags|=8192)):yt(a),l=a.updateQueue,l!==null&&so(a,l.retryQueue),l=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==l&&(a.flags|=2048),t!==null&&P(Rs),null;case 24:return l=null,t!==null&&(l=t.memoizedState.cache),a.memoizedState.cache!==l&&(a.flags|=2048),Sa(It),yt(a),null;case 25:return null;case 30:return null}throw Error(i(156,a.tag))}function H1(t,a){switch(xu(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return Sa(It),ge(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return Be(a),null;case 31:if(a.memoizedState!==null){if(Rn(a),a.alternate===null)throw Error(i(340));js()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(Rn(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(i(340));js()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return P(At),null;case 4:return ge(),null;case 10:return Sa(a.type),null;case 22:case 23:return Rn(a),zu(),t!==null&&P(Rs),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return Sa(It),null;case 25:return null;default:return null}}function up(t,a){switch(xu(a),a.tag){case 3:Sa(It),ge();break;case 26:case 27:case 5:Be(a);break;case 4:ge();break;case 31:a.memoizedState!==null&&Rn(a);break;case 13:Rn(a);break;case 19:P(At);break;case 10:Sa(a.type);break;case 22:case 23:Rn(a),zu(),t!==null&&P(Rs);break;case 24:Sa(It)}}function jl(t,a){try{var l=a.updateQueue,o=l!==null?l.lastEffect:null;if(o!==null){var f=o.next;l=f;do{if((l.tag&t)===t){o=void 0;var m=l.create,x=l.inst;o=m(),x.destroy=o}l=l.next}while(l!==f)}}catch(_){at(a,a.return,_)}}function Xa(t,a,l){try{var o=a.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var m=f.next;o=m;do{if((o.tag&t)===t){var x=o.inst,_=x.destroy;if(_!==void 0){x.destroy=void 0,f=a;var O=l,H=_;try{H()}catch(J){at(f,O,J)}}}o=o.next}while(o!==m)}}catch(J){at(a,a.return,J)}}function dp(t){var a=t.updateQueue;if(a!==null){var l=t.stateNode;try{tg(a,l)}catch(o){at(t,t.return,o)}}}function fp(t,a,l){l.props=Ps(t.type,t.memoizedProps),l.state=t.memoizedState;try{l.componentWillUnmount()}catch(o){at(t,a,o)}}function Cl(t,a){try{var l=t.ref;if(l!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof l=="function"?t.refCleanup=l(o):l.current=o}}catch(f){at(t,a,f)}}function oa(t,a){var l=t.ref,o=t.refCleanup;if(l!==null)if(typeof o=="function")try{o()}catch(f){at(t,a,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){at(t,a,f)}else l.current=null}function hp(t){var a=t.type,l=t.memoizedProps,o=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":l.autoFocus&&o.focus();break e;case"img":l.src?o.src=l.src:l.srcSet&&(o.srcset=l.srcSet)}}catch(f){at(t,t.return,f)}}function hd(t,a,l){try{var o=t.stateNode;dw(o,t.type,l,a),o[nn]=a}catch(f){at(t,t.return,f)}}function mp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ss(t.type)||t.tag===4}function md(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ss(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gd(t,a,l){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(t,a):(a=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,a.appendChild(t),l=l._reactRootContainer,l!=null||a.onclick!==null||(a.onclick=pa));else if(o!==4&&(o===27&&ss(t.type)&&(l=t.stateNode,a=null),t=t.child,t!==null))for(gd(t,a,l),t=t.sibling;t!==null;)gd(t,a,l),t=t.sibling}function io(t,a,l){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?l.insertBefore(t,a):l.appendChild(t);else if(o!==4&&(o===27&&ss(t.type)&&(l=t.stateNode),t=t.child,t!==null))for(io(t,a,l),t=t.sibling;t!==null;)io(t,a,l),t=t.sibling}function gp(t){var a=t.stateNode,l=t.memoizedProps;try{for(var o=t.type,f=a.attributes;f.length;)a.removeAttributeNode(f[0]);rn(a,o,l),a[Pt]=t,a[nn]=l}catch(m){at(t,t.return,m)}}var Na=!1,qt=!1,pd=!1,pp=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function Z1(t,a){if(t=t.containerInfo,Id=Mo,t=jm(t),cu(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var o=l.getSelection&&l.getSelection();if(o&&o.rangeCount!==0){l=o.anchorNode;var f=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{l.nodeType,m.nodeType}catch{l=null;break e}var x=0,_=-1,O=-1,H=0,J=0,ie=t,F=null;t:for(;;){for(var V;ie!==l||f!==0&&ie.nodeType!==3||(_=x+f),ie!==m||o!==0&&ie.nodeType!==3||(O=x+o),ie.nodeType===3&&(x+=ie.nodeValue.length),(V=ie.firstChild)!==null;)F=ie,ie=V;for(;;){if(ie===t)break t;if(F===l&&++H===f&&(_=x),F===m&&++J===o&&(O=x),(V=ie.nextSibling)!==null)break;ie=F,F=ie.parentNode}ie=V}l=_===-1||O===-1?null:{start:_,end:O}}else l=null}l=l||{start:0,end:0}}else l=null;for(Bd={focusedElem:t,selectionRange:l},Mo=!1,Wt=a;Wt!==null;)if(a=Wt,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Wt=t;else for(;Wt!==null;){switch(a=Wt,m=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(l=0;l<t.length;l++)f=t[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&m!==null){t=void 0,l=a,f=m.memoizedProps,m=m.memoizedState,o=l.stateNode;try{var pe=Ps(l.type,f);t=o.getSnapshotBeforeUpdate(pe,m),o.__reactInternalSnapshotBeforeUpdate=t}catch(Ee){at(l,l.return,Ee)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,l=t.nodeType,l===9)Ud(t);else if(l===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Ud(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=a.sibling,t!==null){t.return=a.return,Wt=t;break}Wt=a.return}}function vp(t,a,l){var o=l.flags;switch(l.tag){case 0:case 11:case 15:ja(t,l),o&4&&jl(5,l);break;case 1:if(ja(t,l),o&4)if(t=l.stateNode,a===null)try{t.componentDidMount()}catch(x){at(l,l.return,x)}else{var f=Ps(l.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(f,a,t.__reactInternalSnapshotBeforeUpdate)}catch(x){at(l,l.return,x)}}o&64&&dp(l),o&512&&Cl(l,l.return);break;case 3:if(ja(t,l),o&64&&(t=l.updateQueue,t!==null)){if(a=null,l.child!==null)switch(l.child.tag){case 27:case 5:a=l.child.stateNode;break;case 1:a=l.child.stateNode}try{tg(t,a)}catch(x){at(l,l.return,x)}}break;case 27:a===null&&o&4&&gp(l);case 26:case 5:ja(t,l),a===null&&o&4&&hp(l),o&512&&Cl(l,l.return);break;case 12:ja(t,l);break;case 31:ja(t,l),o&4&&xp(t,l);break;case 13:ja(t,l),o&4&&Sp(t,l),o&64&&(t=l.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(l=J1.bind(null,l),bw(t,l))));break;case 22:if(o=l.memoizedState!==null||Na,!o){a=a!==null&&a.memoizedState!==null||qt,f=Na;var m=qt;Na=o,(qt=a)&&!m?Ca(t,l,(l.subtreeFlags&8772)!==0):ja(t,l),Na=f,qt=m}break;case 30:break;default:ja(t,l)}}function yp(t){var a=t.alternate;a!==null&&(t.alternate=null,yp(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Gc(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var St=null,yn=!1;function Ma(t,a,l){for(l=l.child;l!==null;)bp(t,a,l),l=l.sibling}function bp(t,a,l){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(un,l)}catch{}switch(l.tag){case 26:qt||oa(l,a),Ma(t,a,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:qt||oa(l,a);var o=St,f=yn;ss(l.type)&&(St=l.stateNode,yn=!1),Ma(t,a,l),Bl(l.stateNode),St=o,yn=f;break;case 5:qt||oa(l,a);case 6:if(o=St,f=yn,St=null,Ma(t,a,l),St=o,yn=f,St!==null)if(yn)try{(St.nodeType===9?St.body:St.nodeName==="HTML"?St.ownerDocument.body:St).removeChild(l.stateNode)}catch(m){at(l,a,m)}else try{St.removeChild(l.stateNode)}catch(m){at(l,a,m)}break;case 18:St!==null&&(yn?(t=St,dv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,l.stateNode),ki(t)):dv(St,l.stateNode));break;case 4:o=St,f=yn,St=l.stateNode.containerInfo,yn=!0,Ma(t,a,l),St=o,yn=f;break;case 0:case 11:case 14:case 15:Xa(2,l,a),qt||Xa(4,l,a),Ma(t,a,l);break;case 1:qt||(oa(l,a),o=l.stateNode,typeof o.componentWillUnmount=="function"&&fp(l,a,o)),Ma(t,a,l);break;case 21:Ma(t,a,l);break;case 22:qt=(o=qt)||l.memoizedState!==null,Ma(t,a,l),qt=o;break;default:Ma(t,a,l)}}function xp(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ki(t)}catch(l){at(a,a.return,l)}}}function Sp(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ki(t)}catch(l){at(a,a.return,l)}}function F1(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new pp),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new pp),a;default:throw Error(i(435,t.tag))}}function lo(t,a){var l=F1(t);a.forEach(function(o){if(!l.has(o)){l.add(o);var f=ew.bind(null,t,o);o.then(f,f)}})}function bn(t,a){var l=a.deletions;if(l!==null)for(var o=0;o<l.length;o++){var f=l[o],m=t,x=a,_=x;e:for(;_!==null;){switch(_.tag){case 27:if(ss(_.type)){St=_.stateNode,yn=!1;break e}break;case 5:St=_.stateNode,yn=!1;break e;case 3:case 4:St=_.stateNode.containerInfo,yn=!0;break e}_=_.return}if(St===null)throw Error(i(160));bp(m,x,f),St=null,yn=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)wp(a,t),a=a.sibling}var Qn=null;function wp(t,a){var l=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:bn(a,t),xn(t),o&4&&(Xa(3,t,t.return),jl(3,t),Xa(5,t,t.return));break;case 1:bn(a,t),xn(t),o&512&&(qt||l===null||oa(l,l.return)),o&64&&Na&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(l=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=l===null?o:l.concat(o))));break;case 26:var f=Qn;if(bn(a,t),xn(t),o&512&&(qt||l===null||oa(l,l.return)),o&4){var m=l!==null?l.memoizedState:null;if(o=t.memoizedState,l===null)if(o===null)if(t.stateNode===null){e:{o=t.type,l=t.memoizedProps,f=f.ownerDocument||f;t:switch(o){case"title":m=f.getElementsByTagName("title")[0],(!m||m[qa]||m[Pt]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(o),f.head.insertBefore(m,f.querySelector("head > title"))),rn(m,o,l),m[Pt]=t,Kt(m),o=m;break e;case"link":var x=wv("link","href",f).get(o+(l.href||""));if(x){for(var _=0;_<x.length;_++)if(m=x[_],m.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&m.getAttribute("rel")===(l.rel==null?null:l.rel)&&m.getAttribute("title")===(l.title==null?null:l.title)&&m.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){x.splice(_,1);break t}}m=f.createElement(o),rn(m,o,l),f.head.appendChild(m);break;case"meta":if(x=wv("meta","content",f).get(o+(l.content||""))){for(_=0;_<x.length;_++)if(m=x[_],m.getAttribute("content")===(l.content==null?null:""+l.content)&&m.getAttribute("name")===(l.name==null?null:l.name)&&m.getAttribute("property")===(l.property==null?null:l.property)&&m.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&m.getAttribute("charset")===(l.charSet==null?null:l.charSet)){x.splice(_,1);break t}}m=f.createElement(o),rn(m,o,l),f.head.appendChild(m);break;default:throw Error(i(468,o))}m[Pt]=t,Kt(m),o=m}t.stateNode=o}else _v(f,t.type,t.stateNode);else t.stateNode=Sv(f,o,t.memoizedProps);else m!==o?(m===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):m.count--,o===null?_v(f,t.type,t.stateNode):Sv(f,o,t.memoizedProps)):o===null&&t.stateNode!==null&&hd(t,t.memoizedProps,l.memoizedProps)}break;case 27:bn(a,t),xn(t),o&512&&(qt||l===null||oa(l,l.return)),l!==null&&o&4&&hd(t,t.memoizedProps,l.memoizedProps);break;case 5:if(bn(a,t),xn(t),o&512&&(qt||l===null||oa(l,l.return)),t.flags&32){f=t.stateNode;try{ti(f,"")}catch(pe){at(t,t.return,pe)}}o&4&&t.stateNode!=null&&(f=t.memoizedProps,hd(t,f,l!==null?l.memoizedProps:f)),o&1024&&(pd=!0);break;case 6:if(bn(a,t),xn(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,l=t.stateNode;try{l.nodeValue=o}catch(pe){at(t,t.return,pe)}}break;case 3:if(_o=null,f=Qn,Qn=So(a.containerInfo),bn(a,t),Qn=f,xn(t),o&4&&l!==null&&l.memoizedState.isDehydrated)try{ki(a.containerInfo)}catch(pe){at(t,t.return,pe)}pd&&(pd=!1,_p(t));break;case 4:o=Qn,Qn=So(t.stateNode.containerInfo),bn(a,t),xn(t),Qn=o;break;case 12:bn(a,t),xn(t);break;case 31:bn(a,t),xn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,lo(t,o)));break;case 13:bn(a,t),xn(t),t.child.flags&8192&&t.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(oo=je()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,lo(t,o)));break;case 22:f=t.memoizedState!==null;var O=l!==null&&l.memoizedState!==null,H=Na,J=qt;if(Na=H||f,qt=J||O,bn(a,t),qt=J,Na=H,xn(t),o&8192)e:for(a=t.stateNode,a._visibility=f?a._visibility&-2:a._visibility|1,f&&(l===null||O||Na||qt||Is(t)),l=null,a=t;;){if(a.tag===5||a.tag===26){if(l===null){O=l=a;try{if(m=O.stateNode,f)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{_=O.stateNode;var ie=O.memoizedProps.style,F=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;_.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(pe){at(O,O.return,pe)}}}else if(a.tag===6){if(l===null){O=a;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(pe){at(O,O.return,pe)}}}else if(a.tag===18){if(l===null){O=a;try{var V=O.stateNode;f?fv(V,!0):fv(O.stateNode,!1)}catch(pe){at(O,O.return,pe)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;l===a&&(l=null),a=a.return}l===a&&(l=null),a.sibling.return=a.return,a=a.sibling}o&4&&(o=t.updateQueue,o!==null&&(l=o.retryQueue,l!==null&&(o.retryQueue=null,lo(t,l))));break;case 19:bn(a,t),xn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,lo(t,o)));break;case 30:break;case 21:break;default:bn(a,t),xn(t)}}function xn(t){var a=t.flags;if(a&2){try{for(var l,o=t.return;o!==null;){if(mp(o)){l=o;break}o=o.return}if(l==null)throw Error(i(160));switch(l.tag){case 27:var f=l.stateNode,m=md(t);io(t,m,f);break;case 5:var x=l.stateNode;l.flags&32&&(ti(x,""),l.flags&=-33);var _=md(t);io(t,_,x);break;case 3:case 4:var O=l.stateNode.containerInfo,H=md(t);gd(t,H,O);break;default:throw Error(i(161))}}catch(J){at(t,t.return,J)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function _p(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;_p(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function ja(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)vp(t,a.alternate,a),a=a.sibling}function Is(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Xa(4,a,a.return),Is(a);break;case 1:oa(a,a.return);var l=a.stateNode;typeof l.componentWillUnmount=="function"&&fp(a,a.return,l),Is(a);break;case 27:Bl(a.stateNode);case 26:case 5:oa(a,a.return),Is(a);break;case 22:a.memoizedState===null&&Is(a);break;case 30:Is(a);break;default:Is(a)}t=t.sibling}}function Ca(t,a,l){for(l=l&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var o=a.alternate,f=t,m=a,x=m.flags;switch(m.tag){case 0:case 11:case 15:Ca(f,m,l),jl(4,m);break;case 1:if(Ca(f,m,l),o=m,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(H){at(o,o.return,H)}if(o=m,f=o.updateQueue,f!==null){var _=o.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)eg(O[f],_)}catch(H){at(o,o.return,H)}}l&&x&64&&dp(m),Cl(m,m.return);break;case 27:gp(m);case 26:case 5:Ca(f,m,l),l&&o===null&&x&4&&hp(m),Cl(m,m.return);break;case 12:Ca(f,m,l);break;case 31:Ca(f,m,l),l&&x&4&&xp(f,m);break;case 13:Ca(f,m,l),l&&x&4&&Sp(f,m);break;case 22:m.memoizedState===null&&Ca(f,m,l),Cl(m,m.return);break;case 30:break;default:Ca(f,m,l)}a=a.sibling}}function vd(t,a){var l=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==l&&(t!=null&&t.refCount++,l!=null&&gl(l))}function yd(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&gl(t))}function Jn(t,a,l,o){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ep(t,a,l,o),a=a.sibling}function Ep(t,a,l,o){var f=a.flags;switch(a.tag){case 0:case 11:case 15:Jn(t,a,l,o),f&2048&&jl(9,a);break;case 1:Jn(t,a,l,o);break;case 3:Jn(t,a,l,o),f&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&gl(t)));break;case 12:if(f&2048){Jn(t,a,l,o),t=a.stateNode;try{var m=a.memoizedProps,x=m.id,_=m.onPostCommit;typeof _=="function"&&_(x,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){at(a,a.return,O)}}else Jn(t,a,l,o);break;case 31:Jn(t,a,l,o);break;case 13:Jn(t,a,l,o);break;case 23:break;case 22:m=a.stateNode,x=a.alternate,a.memoizedState!==null?m._visibility&2?Jn(t,a,l,o):Dl(t,a):m._visibility&2?Jn(t,a,l,o):(m._visibility|=2,Si(t,a,l,o,(a.subtreeFlags&10256)!==0||!1)),f&2048&&vd(x,a);break;case 24:Jn(t,a,l,o),f&2048&&yd(a.alternate,a);break;default:Jn(t,a,l,o)}}function Si(t,a,l,o,f){for(f=f&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var m=t,x=a,_=l,O=o,H=x.flags;switch(x.tag){case 0:case 11:case 15:Si(m,x,_,O,f),jl(8,x);break;case 23:break;case 22:var J=x.stateNode;x.memoizedState!==null?J._visibility&2?Si(m,x,_,O,f):Dl(m,x):(J._visibility|=2,Si(m,x,_,O,f)),f&&H&2048&&vd(x.alternate,x);break;case 24:Si(m,x,_,O,f),f&&H&2048&&yd(x.alternate,x);break;default:Si(m,x,_,O,f)}a=a.sibling}}function Dl(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var l=t,o=a,f=o.flags;switch(o.tag){case 22:Dl(l,o),f&2048&&vd(o.alternate,o);break;case 24:Dl(l,o),f&2048&&yd(o.alternate,o);break;default:Dl(l,o)}a=a.sibling}}var Rl=8192;function wi(t,a,l){if(t.subtreeFlags&Rl)for(t=t.child;t!==null;)Tp(t,a,l),t=t.sibling}function Tp(t,a,l){switch(t.tag){case 26:wi(t,a,l),t.flags&Rl&&t.memoizedState!==null&&Rw(l,Qn,t.memoizedState,t.memoizedProps);break;case 5:wi(t,a,l);break;case 3:case 4:var o=Qn;Qn=So(t.stateNode.containerInfo),wi(t,a,l),Qn=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Rl,Rl=16777216,wi(t,a,l),Rl=o):wi(t,a,l));break;default:wi(t,a,l)}}function Np(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function kl(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var o=a[l];Wt=o,jp(o,t)}Np(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Mp(t),t=t.sibling}function Mp(t){switch(t.tag){case 0:case 11:case 15:kl(t),t.flags&2048&&Xa(9,t,t.return);break;case 3:kl(t);break;case 12:kl(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,ro(t)):kl(t);break;default:kl(t)}}function ro(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var l=0;l<a.length;l++){var o=a[l];Wt=o,jp(o,t)}Np(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Xa(8,a,a.return),ro(a);break;case 22:l=a.stateNode,l._visibility&2&&(l._visibility&=-3,ro(a));break;default:ro(a)}t=t.sibling}}function jp(t,a){for(;Wt!==null;){var l=Wt;switch(l.tag){case 0:case 11:case 15:Xa(8,l,a);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var o=l.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:gl(l.memoizedState.cache)}if(o=l.child,o!==null)o.return=l,Wt=o;else e:for(l=t;Wt!==null;){o=Wt;var f=o.sibling,m=o.return;if(yp(o),o===l){Wt=null;break e}if(f!==null){f.return=m,Wt=f;break e}Wt=m}}}var G1={getCacheForType:function(t){var a=sn(It),l=a.data.get(t);return l===void 0&&(l=t(),a.data.set(t,l)),l},cacheSignal:function(){return sn(It).controller.signal}},Y1=typeof WeakMap=="function"?WeakMap:Map,Je=0,dt=null,qe=null,$e=0,nt=0,kn=null,Qa=!1,_i=!1,bd=!1,Da=0,jt=0,Ja=0,Bs=0,xd=0,An=0,Ei=0,Al=null,Sn=null,Sd=!1,oo=0,Cp=0,co=1/0,uo=null,es=null,Gt=0,ts=null,Ti=null,Ra=0,wd=0,_d=null,Dp=null,Ol=0,Ed=null;function On(){return(Je&2)!==0&&$e!==0?$e&-$e:L.T!==null?Dd():Te()}function Rp(){if(An===0)if(($e&536870912)===0||Ze){var t=pt;pt<<=1,(pt&3932160)===0&&(pt=262144),An=t}else An=536870912;return t=Dn.current,t!==null&&(t.flags|=32),An}function wn(t,a,l){(t===dt&&(nt===2||nt===9)||t.cancelPendingCommit!==null)&&(Ni(t,0),ns(t,$e,An,!1)),Le(t,l),((Je&2)===0||t!==dt)&&(t===dt&&((Je&2)===0&&(Bs|=l),jt===4&&ns(t,$e,An,!1)),ca(t))}function kp(t,a,l){if((Je&6)!==0)throw Error(i(327));var o=!l&&(a&127)===0&&(a&t.expiredLanes)===0||Ne(t,a),f=o?W1(t,a):Nd(t,a,!0),m=o;do{if(f===0){_i&&!o&&ns(t,a,0,!1);break}else{if(l=t.current.alternate,m&&!V1(l)){f=Nd(t,a,!1),m=!1;continue}if(f===2){if(m=a,t.errorRecoveryDisabledLanes&m)var x=0;else x=t.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){a=x;e:{var _=t;f=Al;var O=_.current.memoizedState.isDehydrated;if(O&&(Ni(_,x).flags|=256),x=Nd(_,x,!1),x!==2){if(bd&&!O){_.errorRecoveryDisabledLanes|=m,Bs|=m,f=4;break e}m=Sn,Sn=f,m!==null&&(Sn===null?Sn=m:Sn.push.apply(Sn,m))}f=x}if(m=!1,f!==2)continue}}if(f===1){Ni(t,0),ns(t,a,0,!0);break}e:{switch(o=t,m=f,m){case 0:case 1:throw Error(i(345));case 4:if((a&4194048)!==a)break;case 6:ns(o,a,An,!Qa);break e;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((a&62914560)===a&&(f=oo+300-je(),10<f)){if(ns(o,a,An,!Qa),fe(o,0,!0)!==0)break e;Ra=a,o.timeoutHandle=cv(Ap.bind(null,o,l,Sn,uo,Sd,a,An,Bs,Ei,Qa,m,"Throttled",-0,0),f);break e}Ap(o,l,Sn,uo,Sd,a,An,Bs,Ei,Qa,m,null,-0,0)}}break}while(!0);ca(t)}function Ap(t,a,l,o,f,m,x,_,O,H,J,ie,F,V){if(t.timeoutHandle=-1,ie=a.subtreeFlags,ie&8192||(ie&16785408)===16785408){ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pa},Tp(a,m,ie);var pe=(m&62914560)===m?oo-je():(m&4194048)===m?Cp-je():0;if(pe=kw(ie,pe),pe!==null){Ra=m,t.cancelPendingCommit=pe(Up.bind(null,t,a,m,l,o,f,x,_,O,J,ie,null,F,V)),ns(t,m,x,!H);return}}Up(t,a,m,l,o,f,x,_,O)}function V1(t){for(var a=t;;){var l=a.tag;if((l===0||l===11||l===15)&&a.flags&16384&&(l=a.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var o=0;o<l.length;o++){var f=l[o],m=f.getSnapshot;f=f.value;try{if(!jn(m(),f))return!1}catch{return!1}}if(l=a.child,a.subtreeFlags&16384&&l!==null)l.return=a,a=l;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function ns(t,a,l,o){a&=~xd,a&=~Bs,t.suspendedLanes|=a,t.pingedLanes&=~a,o&&(t.warmLanes|=a),o=t.expirationTimes;for(var f=a;0<f;){var m=31-kt(f),x=1<<m;o[m]=-1,f&=~x}l!==0&&xt(t,l,a)}function fo(){return(Je&6)===0?(zl(0),!1):!0}function Td(){if(qe!==null){if(nt===0)var t=qe.return;else t=qe,xa=Cs=null,Uu(t),pi=null,vl=0,t=qe;for(;t!==null;)up(t.alternate,t),t=t.return;qe=null}}function Ni(t,a){var l=t.timeoutHandle;l!==-1&&(t.timeoutHandle=-1,mw(l)),l=t.cancelPendingCommit,l!==null&&(t.cancelPendingCommit=null,l()),Ra=0,Td(),dt=t,qe=l=ya(t.current,null),$e=a,nt=0,kn=null,Qa=!1,_i=Ne(t,a),bd=!1,Ei=An=xd=Bs=Ja=jt=0,Sn=Al=null,Sd=!1,(a&8)!==0&&(a|=a&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=a;0<o;){var f=31-kt(o),m=1<<f;a|=t[f],o&=~m}return Da=a,kr(),l}function Op(t,a){Re=null,L.H=Tl,a===gi||a===qr?(a=Wm(),nt=3):a===Cu?(a=Wm(),nt=4):nt=a===ad?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,kn=a,qe===null&&(jt=1,eo(t,$n(a,t.current)))}function zp(){var t=Dn.current;return t===null?!0:($e&4194048)===$e?Gn===null:($e&62914560)===$e||($e&536870912)!==0?t===Gn:!1}function Pp(){var t=L.H;return L.H=Tl,t===null?Tl:t}function Ip(){var t=L.A;return L.A=G1,t}function ho(){jt=4,Qa||($e&4194048)!==$e&&Dn.current!==null||(_i=!0),(Ja&134217727)===0&&(Bs&134217727)===0||dt===null||ns(dt,$e,An,!1)}function Nd(t,a,l){var o=Je;Je|=2;var f=Pp(),m=Ip();(dt!==t||$e!==a)&&(uo=null,Ni(t,a)),a=!1;var x=jt;e:do try{if(nt!==0&&qe!==null){var _=qe,O=kn;switch(nt){case 8:Td(),x=6;break e;case 3:case 2:case 9:case 6:Dn.current===null&&(a=!0);var H=nt;if(nt=0,kn=null,Mi(t,_,O,H),l&&_i){x=0;break e}break;default:H=nt,nt=0,kn=null,Mi(t,_,O,H)}}K1(),x=jt;break}catch(J){Op(t,J)}while(!0);return a&&t.shellSuspendCounter++,xa=Cs=null,Je=o,L.H=f,L.A=m,qe===null&&(dt=null,$e=0,kr()),x}function K1(){for(;qe!==null;)Bp(qe)}function W1(t,a){var l=Je;Je|=2;var o=Pp(),f=Ip();dt!==t||$e!==a?(uo=null,co=je()+500,Ni(t,a)):_i=Ne(t,a);e:do try{if(nt!==0&&qe!==null){a=qe;var m=kn;t:switch(nt){case 1:nt=0,kn=null,Mi(t,a,m,1);break;case 2:case 9:if(Vm(m)){nt=0,kn=null,Lp(a);break}a=function(){nt!==2&&nt!==9||dt!==t||(nt=7),ca(t)},m.then(a,a);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:Vm(m)?(nt=0,kn=null,Lp(a)):(nt=0,kn=null,Mi(t,a,m,7));break;case 5:var x=null;switch(qe.tag){case 26:x=qe.memoizedState;case 5:case 27:var _=qe;if(x?Ev(x):_.stateNode.complete){nt=0,kn=null;var O=_.sibling;if(O!==null)qe=O;else{var H=_.return;H!==null?(qe=H,mo(H)):qe=null}break t}}nt=0,kn=null,Mi(t,a,m,5);break;case 6:nt=0,kn=null,Mi(t,a,m,6);break;case 8:Td(),jt=6;break e;default:throw Error(i(462))}}X1();break}catch(J){Op(t,J)}while(!0);return xa=Cs=null,L.H=o,L.A=f,Je=l,qe!==null?0:(dt=null,$e=0,kr(),jt)}function X1(){for(;qe!==null&&!De();)Bp(qe)}function Bp(t){var a=op(t.alternate,t,Da);t.memoizedProps=t.pendingProps,a===null?mo(t):qe=a}function Lp(t){var a=t,l=a.alternate;switch(a.tag){case 15:case 0:a=np(l,a,a.pendingProps,a.type,void 0,$e);break;case 11:a=np(l,a,a.pendingProps,a.type.render,a.ref,$e);break;case 5:Uu(a);default:up(l,a),a=qe=Im(a,Da),a=op(l,a,Da)}t.memoizedProps=t.pendingProps,a===null?mo(t):qe=a}function Mi(t,a,l,o){xa=Cs=null,Uu(a),pi=null,vl=0;var f=a.return;try{if(L1(t,f,a,l,$e)){jt=1,eo(t,$n(l,t.current)),qe=null;return}}catch(m){if(f!==null)throw qe=f,m;jt=1,eo(t,$n(l,t.current)),qe=null;return}a.flags&32768?(Ze||o===1?t=!0:_i||($e&536870912)!==0?t=!1:(Qa=t=!0,(o===2||o===9||o===3||o===6)&&(o=Dn.current,o!==null&&o.tag===13&&(o.flags|=16384))),qp(a,t)):mo(a)}function mo(t){var a=t;do{if((a.flags&32768)!==0){qp(a,Qa);return}t=a.return;var l=$1(a.alternate,a,Da);if(l!==null){qe=l;return}if(a=a.sibling,a!==null){qe=a;return}qe=a=t}while(a!==null);jt===0&&(jt=5)}function qp(t,a){do{var l=H1(t.alternate,t);if(l!==null){l.flags&=32767,qe=l;return}if(l=t.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!a&&(t=t.sibling,t!==null)){qe=t;return}qe=t=l}while(t!==null);jt=6,qe=null}function Up(t,a,l,o,f,m,x,_,O){t.cancelPendingCommit=null;do go();while(Gt!==0);if((Je&6)!==0)throw Error(i(327));if(a!==null){if(a===t.current)throw Error(i(177));if(m=a.lanes|a.childLanes,m|=mu,Pe(t,l,m,x,_,O),t===dt&&(qe=dt=null,$e=0),Ti=a,ts=t,Ra=l,wd=m,_d=f,Dp=o,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,tw(W,function(){return Gp(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||o){o=L.T,L.T=null,f=G.p,G.p=2,x=Je,Je|=4;try{Z1(t,a,l)}finally{Je=x,G.p=f,L.T=o}}Gt=1,$p(),Hp(),Zp()}}function $p(){if(Gt===1){Gt=0;var t=ts,a=Ti,l=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||l){l=L.T,L.T=null;var o=G.p;G.p=2;var f=Je;Je|=4;try{wp(a,t);var m=Bd,x=jm(t.containerInfo),_=m.focusedElem,O=m.selectionRange;if(x!==_&&_&&_.ownerDocument&&Mm(_.ownerDocument.documentElement,_)){if(O!==null&&cu(_)){var H=O.start,J=O.end;if(J===void 0&&(J=H),"selectionStart"in _)_.selectionStart=H,_.selectionEnd=Math.min(J,_.value.length);else{var ie=_.ownerDocument||document,F=ie&&ie.defaultView||window;if(F.getSelection){var V=F.getSelection(),pe=_.textContent.length,Ee=Math.min(O.start,pe),ot=O.end===void 0?Ee:Math.min(O.end,pe);!V.extend&&Ee>ot&&(x=ot,ot=Ee,Ee=x);var q=Nm(_,Ee),I=Nm(_,ot);if(q&&I&&(V.rangeCount!==1||V.anchorNode!==q.node||V.anchorOffset!==q.offset||V.focusNode!==I.node||V.focusOffset!==I.offset)){var $=ie.createRange();$.setStart(q.node,q.offset),V.removeAllRanges(),Ee>ot?(V.addRange($),V.extend(I.node,I.offset)):($.setEnd(I.node,I.offset),V.addRange($))}}}}for(ie=[],V=_;V=V.parentNode;)V.nodeType===1&&ie.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<ie.length;_++){var te=ie[_];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Mo=!!Id,Bd=Id=null}finally{Je=f,G.p=o,L.T=l}}t.current=a,Gt=2}}function Hp(){if(Gt===2){Gt=0;var t=ts,a=Ti,l=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||l){l=L.T,L.T=null;var o=G.p;G.p=2;var f=Je;Je|=4;try{vp(t,a.alternate,a)}finally{Je=f,G.p=o,L.T=l}}Gt=3}}function Zp(){if(Gt===4||Gt===3){Gt=0,We();var t=ts,a=Ti,l=Ra,o=Dp;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Gt=5:(Gt=0,Ti=ts=null,Fp(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(es=null),dn(l),a=a.stateNode,ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(un,a,void 0,(a.current.flags&128)===128)}catch{}if(o!==null){a=L.T,f=G.p,G.p=2,L.T=null;try{for(var m=t.onRecoverableError,x=0;x<o.length;x++){var _=o[x];m(_.value,{componentStack:_.stack})}}finally{L.T=a,G.p=f}}(Ra&3)!==0&&go(),ca(t),f=t.pendingLanes,(l&261930)!==0&&(f&42)!==0?t===Ed?Ol++:(Ol=0,Ed=t):Ol=0,zl(0)}}function Fp(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,gl(a)))}function go(){return $p(),Hp(),Zp(),Gp()}function Gp(){if(Gt!==5)return!1;var t=ts,a=wd;wd=0;var l=dn(Ra),o=L.T,f=G.p;try{G.p=32>l?32:l,L.T=null,l=_d,_d=null;var m=ts,x=Ra;if(Gt=0,Ti=ts=null,Ra=0,(Je&6)!==0)throw Error(i(331));var _=Je;if(Je|=4,Mp(m.current),Ep(m,m.current,x,l),Je=_,zl(0,!1),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(un,m)}catch{}return!0}finally{G.p=f,L.T=o,Fp(t,a)}}function Yp(t,a,l){a=$n(l,a),a=nd(t.stateNode,a,2),t=Va(t,a,2),t!==null&&(Le(t,2),ca(t))}function at(t,a,l){if(t.tag===3)Yp(t,t,l);else for(;a!==null;){if(a.tag===3){Yp(a,t,l);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(es===null||!es.has(o))){t=$n(l,t),l=Vg(2),o=Va(a,l,2),o!==null&&(Kg(l,o,a,t),Le(o,2),ca(o));break}}a=a.return}}function Md(t,a,l){var o=t.pingCache;if(o===null){o=t.pingCache=new Y1;var f=new Set;o.set(a,f)}else f=o.get(a),f===void 0&&(f=new Set,o.set(a,f));f.has(l)||(bd=!0,f.add(l),t=Q1.bind(null,t,a,l),a.then(t,t))}function Q1(t,a,l){var o=t.pingCache;o!==null&&o.delete(a),t.pingedLanes|=t.suspendedLanes&l,t.warmLanes&=~l,dt===t&&($e&l)===l&&(jt===4||jt===3&&($e&62914560)===$e&&300>je()-oo?(Je&2)===0&&Ni(t,0):xd|=l,Ei===$e&&(Ei=0)),ca(t)}function Vp(t,a){a===0&&(a=Xe()),t=Ns(t,a),t!==null&&(Le(t,a),ca(t))}function J1(t){var a=t.memoizedState,l=0;a!==null&&(l=a.retryLane),Vp(t,l)}function ew(t,a){var l=0;switch(t.tag){case 31:case 13:var o=t.stateNode,f=t.memoizedState;f!==null&&(l=f.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(a),Vp(t,l)}function tw(t,a){return de(t,a)}var po=null,ji=null,jd=!1,vo=!1,Cd=!1,as=0;function ca(t){t!==ji&&t.next===null&&(ji===null?po=ji=t:ji=ji.next=t),vo=!0,jd||(jd=!0,aw())}function zl(t,a){if(!Cd&&vo){Cd=!0;do for(var l=!1,o=po;o!==null;){if(t!==0){var f=o.pendingLanes;if(f===0)var m=0;else{var x=o.suspendedLanes,_=o.pingedLanes;m=(1<<31-kt(42|t)+1)-1,m&=f&~(x&~_),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(l=!0,Qp(o,m))}else m=$e,m=fe(o,o===dt?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||Ne(o,m)||(l=!0,Qp(o,m));o=o.next}while(l);Cd=!1}}function nw(){Kp()}function Kp(){vo=jd=!1;var t=0;as!==0&&hw()&&(t=as);for(var a=je(),l=null,o=po;o!==null;){var f=o.next,m=Wp(o,a);m===0?(o.next=null,l===null?po=f:l.next=f,f===null&&(ji=l)):(l=o,(t!==0||(m&3)!==0)&&(vo=!0)),o=f}Gt!==0&&Gt!==5||zl(t),as!==0&&(as=0)}function Wp(t,a){for(var l=t.suspendedLanes,o=t.pingedLanes,f=t.expirationTimes,m=t.pendingLanes&-62914561;0<m;){var x=31-kt(m),_=1<<x,O=f[x];O===-1?((_&l)===0||(_&o)!==0)&&(f[x]=Ae(_,a)):O<=a&&(t.expiredLanes|=_),m&=~_}if(a=dt,l=$e,l=fe(t,t===a?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,l===0||t===a&&(nt===2||nt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&ze(o),t.callbackNode=null,t.callbackPriority=0;if((l&3)===0||Ne(t,l)){if(a=l&-l,a===t.callbackPriority)return a;switch(o!==null&&ze(o),dn(l)){case 2:case 8:l=tn;break;case 32:l=W;break;case 268435456:l=Ye;break;default:l=W}return o=Xp.bind(null,t),l=de(l,o),t.callbackPriority=a,t.callbackNode=l,a}return o!==null&&o!==null&&ze(o),t.callbackPriority=2,t.callbackNode=null,2}function Xp(t,a){if(Gt!==0&&Gt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var l=t.callbackNode;if(go()&&t.callbackNode!==l)return null;var o=$e;return o=fe(t,t===dt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(kp(t,o,a),Wp(t,je()),t.callbackNode!=null&&t.callbackNode===l?Xp.bind(null,t):null)}function Qp(t,a){if(go())return null;kp(t,a,!0)}function aw(){gw(function(){(Je&6)!==0?de(Nn,nw):Kp()})}function Dd(){if(as===0){var t=hi;t===0&&(t=ha,ha<<=1,(ha&261888)===0&&(ha=256)),as=t}return as}function Jp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Er(""+t)}function ev(t,a){var l=a.ownerDocument.createElement("input");return l.name=a.name,l.value=a.value,t.id&&l.setAttribute("form",t.id),a.parentNode.insertBefore(l,a),t=new FormData(t),l.parentNode.removeChild(l),t}function sw(t,a,l,o,f){if(a==="submit"&&l&&l.stateNode===f){var m=Jp((f[nn]||null).action),x=o.submitter;x&&(a=(a=x[nn]||null)?Jp(a.formAction):x.getAttribute("formAction"),a!==null&&(m=a,x=null));var _=new jr("action","action",null,o,f);t.push({event:_,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(as!==0){var O=x?ev(f,x):new FormData(f);Wu(l,{pending:!0,data:O,method:f.method,action:m},null,O)}}else typeof m=="function"&&(_.preventDefault(),O=x?ev(f,x):new FormData(f),Wu(l,{pending:!0,data:O,method:f.method,action:m},m,O))},currentTarget:f}]})}}for(var Rd=0;Rd<hu.length;Rd++){var kd=hu[Rd],iw=kd.toLowerCase(),lw=kd[0].toUpperCase()+kd.slice(1);Xn(iw,"on"+lw)}Xn(Rm,"onAnimationEnd"),Xn(km,"onAnimationIteration"),Xn(Am,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(w1,"onTransitionRun"),Xn(_1,"onTransitionStart"),Xn(E1,"onTransitionCancel"),Xn(Om,"onTransitionEnd"),Js("onMouseEnter",["mouseout","mouseover"]),Js("onMouseLeave",["mouseout","mouseover"]),Js("onPointerEnter",["pointerout","pointerover"]),Js("onPointerLeave",["pointerout","pointerover"]),ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ws("onBeforeInput",["compositionend","keypress","textInput","paste"]),ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Pl));function tv(t,a){a=(a&4)!==0;for(var l=0;l<t.length;l++){var o=t[l],f=o.event;o=o.listeners;e:{var m=void 0;if(a)for(var x=o.length-1;0<=x;x--){var _=o[x],O=_.instance,H=_.currentTarget;if(_=_.listener,O!==m&&f.isPropagationStopped())break e;m=_,f.currentTarget=H;try{m(f)}catch(J){Rr(J)}f.currentTarget=null,m=O}else for(x=0;x<o.length;x++){if(_=o[x],O=_.instance,H=_.currentTarget,_=_.listener,O!==m&&f.isPropagationStopped())break e;m=_,f.currentTarget=H;try{m(f)}catch(J){Rr(J)}f.currentTarget=null,m=O}}}}function Ue(t,a){var l=a[Ks];l===void 0&&(l=a[Ks]=new Set);var o=t+"__bubble";l.has(o)||(nv(a,t,2,!1),l.add(o))}function Ad(t,a,l){var o=0;a&&(o|=4),nv(l,t,o,a)}var yo="_reactListening"+Math.random().toString(36).slice(2);function Od(t){if(!t[yo]){t[yo]=!0,Kh.forEach(function(l){l!=="selectionchange"&&(rw.has(l)||Ad(l,!1,t),Ad(l,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[yo]||(a[yo]=!0,Ad("selectionchange",!1,a))}}function nv(t,a,l,o){switch(Rv(a)){case 2:var f=zw;break;case 8:f=Pw;break;default:f=Kd}l=f.bind(null,a,l,t),f=void 0,!eu||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(f=!0),o?f!==void 0?t.addEventListener(a,l,{capture:!0,passive:f}):t.addEventListener(a,l,!0):f!==void 0?t.addEventListener(a,l,{passive:f}):t.addEventListener(a,l,!1)}function zd(t,a,l,o,f){var m=o;if((a&1)===0&&(a&2)===0&&o!==null)e:for(;;){if(o===null)return;var x=o.tag;if(x===3||x===4){var _=o.stateNode.containerInfo;if(_===f)break;if(x===4)for(x=o.return;x!==null;){var O=x.tag;if((O===3||O===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;_!==null;){if(x=Ws(_),x===null)return;if(O=x.tag,O===5||O===6||O===26||O===27){o=m=x;continue e}_=_.parentNode}}o=o.return}rm(function(){var H=m,J=Qc(l),ie=[];e:{var F=zm.get(t);if(F!==void 0){var V=jr,pe=t;switch(t){case"keypress":if(Nr(l)===0)break e;case"keydown":case"keyup":V=e1;break;case"focusin":pe="focus",V=su;break;case"focusout":pe="blur",V=su;break;case"beforeblur":case"afterblur":V=su;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=um;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=$S;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=a1;break;case Rm:case km:case Am:V=FS;break;case Om:V=i1;break;case"scroll":case"scrollend":V=qS;break;case"wheel":V=r1;break;case"copy":case"cut":case"paste":V=YS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=fm;break;case"toggle":case"beforetoggle":V=c1}var Ee=(a&4)!==0,ot=!Ee&&(t==="scroll"||t==="scrollend"),q=Ee?F!==null?F+"Capture":null:F;Ee=[];for(var I=H,$;I!==null;){var te=I;if($=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||$===null||q===null||(te=sl(I,q),te!=null&&Ee.push(Il(I,te,$))),ot)break;I=I.return}0<Ee.length&&(F=new V(F,pe,null,l,J),ie.push({event:F,listeners:Ee}))}}if((a&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",V=t==="mouseout"||t==="pointerout",F&&l!==Xc&&(pe=l.relatedTarget||l.fromElement)&&(Ws(pe)||pe[ma]))break e;if((V||F)&&(F=J.window===J?J:(F=J.ownerDocument)?F.defaultView||F.parentWindow:window,V?(pe=l.relatedTarget||l.toElement,V=H,pe=pe?Ws(pe):null,pe!==null&&(ot=c(pe),Ee=pe.tag,pe!==ot||Ee!==5&&Ee!==27&&Ee!==6)&&(pe=null)):(V=null,pe=H),V!==pe)){if(Ee=um,te="onMouseLeave",q="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(Ee=fm,te="onPointerLeave",q="onPointerEnter",I="pointer"),ot=V==null?F:al(V),$=pe==null?F:al(pe),F=new Ee(te,I+"leave",V,l,J),F.target=ot,F.relatedTarget=$,te=null,Ws(J)===H&&(Ee=new Ee(q,I+"enter",pe,l,J),Ee.target=$,Ee.relatedTarget=ot,te=Ee),ot=te,V&&pe)t:{for(Ee=ow,q=V,I=pe,$=0,te=q;te;te=Ee(te))$++;te=0;for(var xe=I;xe;xe=Ee(xe))te++;for(;0<$-te;)q=Ee(q),$--;for(;0<te-$;)I=Ee(I),te--;for(;$--;){if(q===I||I!==null&&q===I.alternate){Ee=q;break t}q=Ee(q),I=Ee(I)}Ee=null}else Ee=null;V!==null&&av(ie,F,V,Ee,!1),pe!==null&&ot!==null&&av(ie,ot,pe,Ee,!0)}}e:{if(F=H?al(H):window,V=F.nodeName&&F.nodeName.toLowerCase(),V==="select"||V==="input"&&F.type==="file")var Ve=xm;else if(ym(F))if(Sm)Ve=b1;else{Ve=v1;var ve=p1}else V=F.nodeName,!V||V.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?H&&Wc(H.elementType)&&(Ve=xm):Ve=y1;if(Ve&&(Ve=Ve(t,H))){bm(ie,Ve,l,J);break e}ve&&ve(t,F,H),t==="focusout"&&H&&F.type==="number"&&H.memoizedProps.value!=null&&Kc(F,"number",F.value)}switch(ve=H?al(H):window,t){case"focusin":(ym(ve)||ve.contentEditable==="true")&&(ii=ve,uu=H,fl=null);break;case"focusout":fl=uu=ii=null;break;case"mousedown":du=!0;break;case"contextmenu":case"mouseup":case"dragend":du=!1,Cm(ie,l,J);break;case"selectionchange":if(S1)break;case"keydown":case"keyup":Cm(ie,l,J)}var Oe;if(lu)e:{switch(t){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else si?pm(t,l)&&(He="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(He="onCompositionStart");He&&(hm&&l.locale!=="ko"&&(si||He!=="onCompositionStart"?He==="onCompositionEnd"&&si&&(Oe=om()):(Ua=J,tu="value"in Ua?Ua.value:Ua.textContent,si=!0)),ve=bo(H,He),0<ve.length&&(He=new dm(He,t,null,l,J),ie.push({event:He,listeners:ve}),Oe?He.data=Oe:(Oe=vm(l),Oe!==null&&(He.data=Oe)))),(Oe=d1?f1(t,l):h1(t,l))&&(He=bo(H,"onBeforeInput"),0<He.length&&(ve=new dm("onBeforeInput","beforeinput",null,l,J),ie.push({event:ve,listeners:He}),ve.data=Oe)),sw(ie,t,H,l,J)}tv(ie,a)})}function Il(t,a,l){return{instance:t,listener:a,currentTarget:l}}function bo(t,a){for(var l=a+"Capture",o=[];t!==null;){var f=t,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=sl(t,l),f!=null&&o.unshift(Il(t,f,m)),f=sl(t,a),f!=null&&o.push(Il(t,f,m))),t.tag===3)return o;t=t.return}return[]}function ow(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function av(t,a,l,o,f){for(var m=a._reactName,x=[];l!==null&&l!==o;){var _=l,O=_.alternate,H=_.stateNode;if(_=_.tag,O!==null&&O===o)break;_!==5&&_!==26&&_!==27||H===null||(O=H,f?(H=sl(l,m),H!=null&&x.unshift(Il(l,H,O))):f||(H=sl(l,m),H!=null&&x.push(Il(l,H,O)))),l=l.return}x.length!==0&&t.push({event:a,listeners:x})}var cw=/\r\n?/g,uw=/\u0000|\uFFFD/g;function sv(t){return(typeof t=="string"?t:""+t).replace(cw,`
`).replace(uw,"")}function iv(t,a){return a=sv(a),sv(t)===a}function rt(t,a,l,o,f,m){switch(l){case"children":typeof o=="string"?a==="body"||a==="textarea"&&o===""||ti(t,o):(typeof o=="number"||typeof o=="bigint")&&a!=="body"&&ti(t,""+o);break;case"className":wr(t,"class",o);break;case"tabIndex":wr(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":wr(t,l,o);break;case"style":im(t,o,m);break;case"data":if(a!=="object"){wr(t,"data",o);break}case"src":case"href":if(o===""&&(a!=="a"||l!=="href")){t.removeAttribute(l);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(l);break}o=Er(""+o),t.setAttribute(l,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(l==="formAction"?(a!=="input"&&rt(t,a,"name",f.name,f,null),rt(t,a,"formEncType",f.formEncType,f,null),rt(t,a,"formMethod",f.formMethod,f,null),rt(t,a,"formTarget",f.formTarget,f,null)):(rt(t,a,"encType",f.encType,f,null),rt(t,a,"method",f.method,f,null),rt(t,a,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(l);break}o=Er(""+o),t.setAttribute(l,o);break;case"onClick":o!=null&&(t.onclick=pa);break;case"onScroll":o!=null&&Ue("scroll",t);break;case"onScrollEnd":o!=null&&Ue("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(l=o.__html,l!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=l}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}l=Er(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(l,""+o):t.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(l,""):t.removeAttribute(l);break;case"capture":case"download":o===!0?t.setAttribute(l,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(l,o):t.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(l,o):t.removeAttribute(l);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(l):t.setAttribute(l,o);break;case"popover":Ue("beforetoggle",t),Ue("toggle",t),Sr(t,"popover",o);break;case"xlinkActuate":ga(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ga(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ga(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ga(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ga(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ga(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ga(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ga(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ga(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Sr(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=BS.get(l)||l,Sr(t,l,o))}}function Pd(t,a,l,o,f,m){switch(l){case"style":im(t,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(l=o.__html,l!=null){if(f.children!=null)throw Error(i(60));t.innerHTML=l}}break;case"children":typeof o=="string"?ti(t,o):(typeof o=="number"||typeof o=="bigint")&&ti(t,""+o);break;case"onScroll":o!=null&&Ue("scroll",t);break;case"onScrollEnd":o!=null&&Ue("scrollend",t);break;case"onClick":o!=null&&(t.onclick=pa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Wh.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),a=l.slice(2,f?l.length-7:void 0),m=t[nn]||null,m=m!=null?m[l]:null,typeof m=="function"&&t.removeEventListener(a,m,f),typeof o=="function")){typeof m!="function"&&m!==null&&(l in t?t[l]=null:t.hasAttribute(l)&&t.removeAttribute(l)),t.addEventListener(a,o,f);break e}l in t?t[l]=o:o===!0?t.setAttribute(l,""):Sr(t,l,o)}}}function rn(t,a,l){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",t),Ue("load",t);var o=!1,f=!1,m;for(m in l)if(l.hasOwnProperty(m)){var x=l[m];if(x!=null)switch(m){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:rt(t,a,m,x,l,null)}}f&&rt(t,a,"srcSet",l.srcSet,l,null),o&&rt(t,a,"src",l.src,l,null);return;case"input":Ue("invalid",t);var _=m=x=f=null,O=null,H=null;for(o in l)if(l.hasOwnProperty(o)){var J=l[o];if(J!=null)switch(o){case"name":f=J;break;case"type":x=J;break;case"checked":O=J;break;case"defaultChecked":H=J;break;case"value":m=J;break;case"defaultValue":_=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(i(137,a));break;default:rt(t,a,o,J,l,null)}}tm(t,m,_,O,H,x,f,!1);return;case"select":Ue("invalid",t),o=x=m=null;for(f in l)if(l.hasOwnProperty(f)&&(_=l[f],_!=null))switch(f){case"value":m=_;break;case"defaultValue":x=_;break;case"multiple":o=_;default:rt(t,a,f,_,l,null)}a=m,l=x,t.multiple=!!o,a!=null?ei(t,!!o,a,!1):l!=null&&ei(t,!!o,l,!0);return;case"textarea":Ue("invalid",t),m=f=o=null;for(x in l)if(l.hasOwnProperty(x)&&(_=l[x],_!=null))switch(x){case"value":o=_;break;case"defaultValue":f=_;break;case"children":m=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:rt(t,a,x,_,l,null)}am(t,o,f,m);return;case"option":for(O in l)l.hasOwnProperty(O)&&(o=l[O],o!=null)&&(O==="selected"?t.selected=o&&typeof o!="function"&&typeof o!="symbol":rt(t,a,O,o,l,null));return;case"dialog":Ue("beforetoggle",t),Ue("toggle",t),Ue("cancel",t),Ue("close",t);break;case"iframe":case"object":Ue("load",t);break;case"video":case"audio":for(o=0;o<Pl.length;o++)Ue(Pl[o],t);break;case"image":Ue("error",t),Ue("load",t);break;case"details":Ue("toggle",t);break;case"embed":case"source":case"link":Ue("error",t),Ue("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in l)if(l.hasOwnProperty(H)&&(o=l[H],o!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,a));default:rt(t,a,H,o,l,null)}return;default:if(Wc(a)){for(J in l)l.hasOwnProperty(J)&&(o=l[J],o!==void 0&&Pd(t,a,J,o,l,void 0));return}}for(_ in l)l.hasOwnProperty(_)&&(o=l[_],o!=null&&rt(t,a,_,o,l,null))}function dw(t,a,l,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,x=null,_=null,O=null,H=null,J=null;for(V in l){var ie=l[V];if(l.hasOwnProperty(V)&&ie!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":O=ie;default:o.hasOwnProperty(V)||rt(t,a,V,null,o,ie)}}for(var F in o){var V=o[F];if(ie=l[F],o.hasOwnProperty(F)&&(V!=null||ie!=null))switch(F){case"type":m=V;break;case"name":f=V;break;case"checked":H=V;break;case"defaultChecked":J=V;break;case"value":x=V;break;case"defaultValue":_=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,a));break;default:V!==ie&&rt(t,a,F,V,o,ie)}}Vc(t,x,_,O,H,J,m,f);return;case"select":V=x=_=F=null;for(m in l)if(O=l[m],l.hasOwnProperty(m)&&O!=null)switch(m){case"value":break;case"multiple":V=O;default:o.hasOwnProperty(m)||rt(t,a,m,null,o,O)}for(f in o)if(m=o[f],O=l[f],o.hasOwnProperty(f)&&(m!=null||O!=null))switch(f){case"value":F=m;break;case"defaultValue":_=m;break;case"multiple":x=m;default:m!==O&&rt(t,a,f,m,o,O)}a=_,l=x,o=V,F!=null?ei(t,!!l,F,!1):!!o!=!!l&&(a!=null?ei(t,!!l,a,!0):ei(t,!!l,l?[]:"",!1));return;case"textarea":V=F=null;for(_ in l)if(f=l[_],l.hasOwnProperty(_)&&f!=null&&!o.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:rt(t,a,_,null,o,f)}for(x in o)if(f=o[x],m=l[x],o.hasOwnProperty(x)&&(f!=null||m!=null))switch(x){case"value":F=f;break;case"defaultValue":V=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==m&&rt(t,a,x,f,o,m)}nm(t,F,V);return;case"option":for(var pe in l)F=l[pe],l.hasOwnProperty(pe)&&F!=null&&!o.hasOwnProperty(pe)&&(pe==="selected"?t.selected=!1:rt(t,a,pe,null,o,F));for(O in o)F=o[O],V=l[O],o.hasOwnProperty(O)&&F!==V&&(F!=null||V!=null)&&(O==="selected"?t.selected=F&&typeof F!="function"&&typeof F!="symbol":rt(t,a,O,F,o,V));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in l)F=l[Ee],l.hasOwnProperty(Ee)&&F!=null&&!o.hasOwnProperty(Ee)&&rt(t,a,Ee,null,o,F);for(H in o)if(F=o[H],V=l[H],o.hasOwnProperty(H)&&F!==V&&(F!=null||V!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(i(137,a));break;default:rt(t,a,H,F,o,V)}return;default:if(Wc(a)){for(var ot in l)F=l[ot],l.hasOwnProperty(ot)&&F!==void 0&&!o.hasOwnProperty(ot)&&Pd(t,a,ot,void 0,o,F);for(J in o)F=o[J],V=l[J],!o.hasOwnProperty(J)||F===V||F===void 0&&V===void 0||Pd(t,a,J,F,o,V);return}}for(var q in l)F=l[q],l.hasOwnProperty(q)&&F!=null&&!o.hasOwnProperty(q)&&rt(t,a,q,null,o,F);for(ie in o)F=o[ie],V=l[ie],!o.hasOwnProperty(ie)||F===V||F==null&&V==null||rt(t,a,ie,F,o,V)}function lv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function fw(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,l=performance.getEntriesByType("resource"),o=0;o<l.length;o++){var f=l[o],m=f.transferSize,x=f.initiatorType,_=f.duration;if(m&&_&&lv(x)){for(x=0,_=f.responseEnd,o+=1;o<l.length;o++){var O=l[o],H=O.startTime;if(H>_)break;var J=O.transferSize,ie=O.initiatorType;J&&lv(ie)&&(O=O.responseEnd,x+=J*(O<_?1:(_-H)/(O-H)))}if(--o,a+=8*(m+x)/(f.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Id=null,Bd=null;function xo(t){return t.nodeType===9?t:t.ownerDocument}function rv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ov(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Ld(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var qd=null;function hw(){var t=window.event;return t&&t.type==="popstate"?t===qd?!1:(qd=t,!0):(qd=null,!1)}var cv=typeof setTimeout=="function"?setTimeout:void 0,mw=typeof clearTimeout=="function"?clearTimeout:void 0,uv=typeof Promise=="function"?Promise:void 0,gw=typeof queueMicrotask=="function"?queueMicrotask:typeof uv<"u"?function(t){return uv.resolve(null).then(t).catch(pw)}:cv;function pw(t){setTimeout(function(){throw t})}function ss(t){return t==="head"}function dv(t,a){var l=a,o=0;do{var f=l.nextSibling;if(t.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(o===0){t.removeChild(f),ki(a);return}o--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")o++;else if(l==="html")Bl(t.ownerDocument.documentElement);else if(l==="head"){l=t.ownerDocument.head,Bl(l);for(var m=l.firstChild;m;){var x=m.nextSibling,_=m.nodeName;m[qa]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&m.rel.toLowerCase()==="stylesheet"||l.removeChild(m),m=x}}else l==="body"&&Bl(t.ownerDocument.body);l=f}while(l);ki(a)}function fv(t,a){var l=t;t=0;do{var o=l.nextSibling;if(l.nodeType===1?a?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(a?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),o&&o.nodeType===8)if(l=o.data,l==="/$"){if(t===0)break;t--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||t++;l=o}while(l)}function Ud(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var l=a;switch(a=a.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Ud(l),Gc(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}t.removeChild(l)}}function vw(t,a,l,o){for(;t.nodeType===1;){var f=l;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[qa])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(m=t.getAttribute("rel"),m==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(m!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(m=t.getAttribute("src"),(m!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===m)return t}else return t;if(t=Yn(t.nextSibling),t===null)break}return null}function yw(t,a,l){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!l||(t=Yn(t.nextSibling),t===null))return null;return t}function hv(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Yn(t.nextSibling),t===null))return null;return t}function $d(t){return t.data==="$?"||t.data==="$~"}function Hd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function bw(t,a){var l=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||l.readyState!=="loading")a();else{var o=function(){a(),l.removeEventListener("DOMContentLoaded",o)};l.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Yn(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var Zd=null;function mv(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"||l==="/&"){if(a===0)return Yn(t.nextSibling);a--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||a++}t=t.nextSibling}return null}function gv(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(a===0)return t;a--}else l!=="/$"&&l!=="/&"||a++}t=t.previousSibling}return null}function pv(t,a,l){switch(a=xo(l),t){case"html":if(t=a.documentElement,!t)throw Error(i(452));return t;case"head":if(t=a.head,!t)throw Error(i(453));return t;case"body":if(t=a.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Bl(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Gc(t)}var Vn=new Map,vv=new Set;function So(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ka=G.d;G.d={f:xw,r:Sw,D:ww,C:_w,L:Ew,m:Tw,X:Mw,S:Nw,M:jw};function xw(){var t=ka.f(),a=fo();return t||a}function Sw(t){var a=Xs(t);a!==null&&a.tag===5&&a.type==="form"?Og(a):ka.r(t)}var Ci=typeof document>"u"?null:document;function yv(t,a,l){var o=Ci;if(o&&typeof a=="string"&&a){var f=qn(a);f='link[rel="'+t+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),vv.has(f)||(vv.add(f),t={rel:t,crossOrigin:l,href:a},o.querySelector(f)===null&&(a=o.createElement("link"),rn(a,"link",t),Kt(a),o.head.appendChild(a)))}}function ww(t){ka.D(t),yv("dns-prefetch",t,null)}function _w(t,a){ka.C(t,a),yv("preconnect",t,a)}function Ew(t,a,l){ka.L(t,a,l);var o=Ci;if(o&&t&&a){var f='link[rel="preload"][as="'+qn(a)+'"]';a==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+qn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+qn(l.imageSizes)+'"]')):f+='[href="'+qn(t)+'"]';var m=f;switch(a){case"style":m=Di(t);break;case"script":m=Ri(t)}Vn.has(m)||(t=v({rel:"preload",href:a==="image"&&l&&l.imageSrcSet?void 0:t,as:a},l),Vn.set(m,t),o.querySelector(f)!==null||a==="style"&&o.querySelector(Ll(m))||a==="script"&&o.querySelector(ql(m))||(a=o.createElement("link"),rn(a,"link",t),Kt(a),o.head.appendChild(a)))}}function Tw(t,a){ka.m(t,a);var l=Ci;if(l&&t){var o=a&&typeof a.as=="string"?a.as:"script",f='link[rel="modulepreload"][as="'+qn(o)+'"][href="'+qn(t)+'"]',m=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Ri(t)}if(!Vn.has(m)&&(t=v({rel:"modulepreload",href:t},a),Vn.set(m,t),l.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(ql(m)))return}o=l.createElement("link"),rn(o,"link",t),Kt(o),l.head.appendChild(o)}}}function Nw(t,a,l){ka.S(t,a,l);var o=Ci;if(o&&t){var f=Qs(o).hoistableStyles,m=Di(t);a=a||"default";var x=f.get(m);if(!x){var _={loading:0,preload:null};if(x=o.querySelector(Ll(m)))_.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":a},l),(l=Vn.get(m))&&Fd(t,l);var O=x=o.createElement("link");Kt(O),rn(O,"link",t),O._p=new Promise(function(H,J){O.onload=H,O.onerror=J}),O.addEventListener("load",function(){_.loading|=1}),O.addEventListener("error",function(){_.loading|=2}),_.loading|=4,wo(x,a,o)}x={type:"stylesheet",instance:x,count:1,state:_},f.set(m,x)}}}function Mw(t,a){ka.X(t,a);var l=Ci;if(l&&t){var o=Qs(l).hoistableScripts,f=Ri(t),m=o.get(f);m||(m=l.querySelector(ql(f)),m||(t=v({src:t,async:!0},a),(a=Vn.get(f))&&Gd(t,a),m=l.createElement("script"),Kt(m),rn(m,"link",t),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(f,m))}}function jw(t,a){ka.M(t,a);var l=Ci;if(l&&t){var o=Qs(l).hoistableScripts,f=Ri(t),m=o.get(f);m||(m=l.querySelector(ql(f)),m||(t=v({src:t,async:!0,type:"module"},a),(a=Vn.get(f))&&Gd(t,a),m=l.createElement("script"),Kt(m),rn(m,"link",t),l.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(f,m))}}function bv(t,a,l,o){var f=(f=ce.current)?So(f):null;if(!f)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(a=Di(l.href),l=Qs(f).hoistableStyles,o=l.get(a),o||(o={type:"style",instance:null,count:0,state:null},l.set(a,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){t=Di(l.href);var m=Qs(f).hoistableStyles,x=m.get(t);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(t,x),(m=f.querySelector(Ll(t)))&&!m._p&&(x.instance=m,x.state.loading=5),Vn.has(t)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Vn.set(t,l),m||Cw(f,t,l,x.state))),a&&o===null)throw Error(i(528,""));return x}if(a&&o!==null)throw Error(i(529,""));return null;case"script":return a=l.async,l=l.src,typeof l=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ri(l),l=Qs(f).hoistableScripts,o=l.get(a),o||(o={type:"script",instance:null,count:0,state:null},l.set(a,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function Di(t){return'href="'+qn(t)+'"'}function Ll(t){return'link[rel="stylesheet"]['+t+"]"}function xv(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function Cw(t,a,l,o){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=t.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),rn(a,"link",l),Kt(a),t.head.appendChild(a))}function Ri(t){return'[src="'+qn(t)+'"]'}function ql(t){return"script[async]"+t}function Sv(t,a,l){if(a.count++,a.instance===null)switch(a.type){case"style":var o=t.querySelector('style[data-href~="'+qn(l.href)+'"]');if(o)return a.instance=o,Kt(o),o;var f=v({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Kt(o),rn(o,"style",f),wo(o,l.precedence,t),a.instance=o;case"stylesheet":f=Di(l.href);var m=t.querySelector(Ll(f));if(m)return a.state.loading|=4,a.instance=m,Kt(m),m;o=xv(l),(f=Vn.get(f))&&Fd(o,f),m=(t.ownerDocument||t).createElement("link"),Kt(m);var x=m;return x._p=new Promise(function(_,O){x.onload=_,x.onerror=O}),rn(m,"link",o),a.state.loading|=4,wo(m,l.precedence,t),a.instance=m;case"script":return m=Ri(l.src),(f=t.querySelector(ql(m)))?(a.instance=f,Kt(f),f):(o=l,(f=Vn.get(m))&&(o=v({},l),Gd(o,f)),t=t.ownerDocument||t,f=t.createElement("script"),Kt(f),rn(f,"link",o),t.head.appendChild(f),a.instance=f);case"void":return null;default:throw Error(i(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(o=a.instance,a.state.loading|=4,wo(o,l.precedence,t));return a.instance}function wo(t,a,l){for(var o=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,m=f,x=0;x<o.length;x++){var _=o[x];if(_.dataset.precedence===a)m=_;else if(m!==f)break}m?m.parentNode.insertBefore(t,m.nextSibling):(a=l.nodeType===9?l.head:l,a.insertBefore(t,a.firstChild))}function Fd(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Gd(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var _o=null;function wv(t,a,l){if(_o===null){var o=new Map,f=_o=new Map;f.set(l,o)}else f=_o,o=f.get(l),o||(o=new Map,f.set(l,o));if(o.has(t))return o;for(o.set(t,null),l=l.getElementsByTagName(t),f=0;f<l.length;f++){var m=l[f];if(!(m[qa]||m[Pt]||t==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(a)||"";x=t+x;var _=o.get(x);_?_.push(m):o.set(x,[m])}}return o}function _v(t,a,l){t=t.ownerDocument||t,t.head.insertBefore(l,a==="title"?t.querySelector("head > title"):null)}function Dw(t,a,l){if(l===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Ev(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function Rw(t,a,l,o){if(l.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=Di(o.href),m=a.querySelector(Ll(f));if(m){a=m._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=Eo.bind(t),a.then(t,t)),l.state.loading|=4,l.instance=m,Kt(m);return}m=a.ownerDocument||a,o=xv(o),(f=Vn.get(f))&&Fd(o,f),m=m.createElement("link"),Kt(m);var x=m;x._p=new Promise(function(_,O){x.onload=_,x.onerror=O}),rn(m,"link",o),l.instance=m}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(l,a),(a=l.state.preload)&&(l.state.loading&3)===0&&(t.count++,l=Eo.bind(t),a.addEventListener("load",l),a.addEventListener("error",l))}}var Yd=0;function kw(t,a){return t.stylesheets&&t.count===0&&No(t,t.stylesheets),0<t.count||0<t.imgCount?function(l){var o=setTimeout(function(){if(t.stylesheets&&No(t,t.stylesheets),t.unsuspend){var m=t.unsuspend;t.unsuspend=null,m()}},6e4+a);0<t.imgBytes&&Yd===0&&(Yd=62500*fw());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&No(t,t.stylesheets),t.unsuspend)){var m=t.unsuspend;t.unsuspend=null,m()}},(t.imgBytes>Yd?50:800)+a);return t.unsuspend=l,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function Eo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)No(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var To=null;function No(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,To=new Map,a.forEach(Aw,t),To=null,Eo.call(t))}function Aw(t,a){if(!(a.state.loading&4)){var l=To.get(t);if(l)var o=l.get(null);else{l=new Map,To.set(t,l);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var x=f[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(l.set(x.dataset.precedence,x),o=x)}o&&l.set(null,o)}f=a.instance,x=f.getAttribute("data-precedence"),m=l.get(x)||o,m===o&&l.set(null,f),l.set(x,f),this.count++,o=Eo.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),m?m.parentNode.insertBefore(f,m.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),a.state.loading|=4}}var Ul={$$typeof:z,Provider:null,Consumer:null,_currentValue:ae,_currentValue2:ae,_threadCount:0};function Ow(t,a,l,o,f,m,x,_,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tt(0),this.hiddenUpdates=Tt(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function Tv(t,a,l,o,f,m,x,_,O,H,J,ie){return t=new Ow(t,a,l,x,O,H,J,ie,_),a=1,m===!0&&(a|=24),m=Cn(3,null,null,a),t.current=m,m.stateNode=t,a=Nu(),a.refCount++,t.pooledCache=a,a.refCount++,m.memoizedState={element:o,isDehydrated:l,cache:a},Du(m),t}function Nv(t){return t?(t=oi,t):oi}function Mv(t,a,l,o,f,m){f=Nv(f),o.context===null?o.context=f:o.pendingContext=f,o=Ya(a),o.payload={element:l},m=m===void 0?null:m,m!==null&&(o.callback=m),l=Va(t,o,a),l!==null&&(wn(l,t,a),bl(l,t,a))}function jv(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<a?l:a}}function Vd(t,a){jv(t,a),(t=t.alternate)&&jv(t,a)}function Cv(t){if(t.tag===13||t.tag===31){var a=Ns(t,67108864);a!==null&&wn(a,t,67108864),Vd(t,67108864)}}function Dv(t){if(t.tag===13||t.tag===31){var a=On();a=Mn(a);var l=Ns(t,a);l!==null&&wn(l,t,a),Vd(t,a)}}var Mo=!0;function zw(t,a,l,o){var f=L.T;L.T=null;var m=G.p;try{G.p=2,Kd(t,a,l,o)}finally{G.p=m,L.T=f}}function Pw(t,a,l,o){var f=L.T;L.T=null;var m=G.p;try{G.p=8,Kd(t,a,l,o)}finally{G.p=m,L.T=f}}function Kd(t,a,l,o){if(Mo){var f=Wd(o);if(f===null)zd(t,a,o,jo,l),kv(t,o);else if(Bw(f,t,a,l,o))o.stopPropagation();else if(kv(t,o),a&4&&-1<Iw.indexOf(t)){for(;f!==null;){var m=Xs(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=X(m.pendingLanes);if(x!==0){var _=m;for(_.pendingLanes|=2,_.entangledLanes|=2;x;){var O=1<<31-kt(x);_.entanglements[1]|=O,x&=~O}ca(m),(Je&6)===0&&(co=je()+500,zl(0))}}break;case 31:case 13:_=Ns(m,2),_!==null&&wn(_,m,2),fo(),Vd(m,2)}if(m=Wd(o),m===null&&zd(t,a,o,jo,l),m===f)break;f=m}f!==null&&o.stopPropagation()}else zd(t,a,o,null,l)}}function Wd(t){return t=Qc(t),Xd(t)}var jo=null;function Xd(t){if(jo=null,t=Ws(t),t!==null){var a=c(t);if(a===null)t=null;else{var l=a.tag;if(l===13){if(t=u(a),t!==null)return t;t=null}else if(l===31){if(t=d(a),t!==null)return t;t=null}else if(l===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return jo=t,null}function Rv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ft()){case Nn:return 2;case tn:return 8;case W:case me:return 32;case Ye:return 268435456;default:return 32}default:return 32}}var Qd=!1,is=null,ls=null,rs=null,$l=new Map,Hl=new Map,os=[],Iw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kv(t,a){switch(t){case"focusin":case"focusout":is=null;break;case"dragenter":case"dragleave":ls=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":$l.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hl.delete(a.pointerId)}}function Zl(t,a,l,o,f,m){return t===null||t.nativeEvent!==m?(t={blockedOn:a,domEventName:l,eventSystemFlags:o,nativeEvent:m,targetContainers:[f]},a!==null&&(a=Xs(a),a!==null&&Cv(a)),t):(t.eventSystemFlags|=o,a=t.targetContainers,f!==null&&a.indexOf(f)===-1&&a.push(f),t)}function Bw(t,a,l,o,f){switch(a){case"focusin":return is=Zl(is,t,a,l,o,f),!0;case"dragenter":return ls=Zl(ls,t,a,l,o,f),!0;case"mouseover":return rs=Zl(rs,t,a,l,o,f),!0;case"pointerover":var m=f.pointerId;return $l.set(m,Zl($l.get(m)||null,t,a,l,o,f)),!0;case"gotpointercapture":return m=f.pointerId,Hl.set(m,Zl(Hl.get(m)||null,t,a,l,o,f)),!0}return!1}function Av(t){var a=Ws(t.target);if(a!==null){var l=c(a);if(l!==null){if(a=l.tag,a===13){if(a=u(l),a!==null){t.blockedOn=a,fn(t.priority,function(){Dv(l)});return}}else if(a===31){if(a=d(l),a!==null){t.blockedOn=a,fn(t.priority,function(){Dv(l)});return}}else if(a===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Co(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var l=Wd(t.nativeEvent);if(l===null){l=t.nativeEvent;var o=new l.constructor(l.type,l);Xc=o,l.target.dispatchEvent(o),Xc=null}else return a=Xs(l),a!==null&&Cv(a),t.blockedOn=l,!1;a.shift()}return!0}function Ov(t,a,l){Co(t)&&l.delete(a)}function Lw(){Qd=!1,is!==null&&Co(is)&&(is=null),ls!==null&&Co(ls)&&(ls=null),rs!==null&&Co(rs)&&(rs=null),$l.forEach(Ov),Hl.forEach(Ov)}function Do(t,a){t.blockedOn===a&&(t.blockedOn=null,Qd||(Qd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Lw)))}var Ro=null;function zv(t){Ro!==t&&(Ro=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Ro===t&&(Ro=null);for(var a=0;a<t.length;a+=3){var l=t[a],o=t[a+1],f=t[a+2];if(typeof o!="function"){if(Xd(o||l)===null)continue;break}var m=Xs(l);m!==null&&(t.splice(a,3),a-=3,Wu(m,{pending:!0,data:f,method:l.method,action:o},o,f))}}))}function ki(t){function a(O){return Do(O,t)}is!==null&&Do(is,t),ls!==null&&Do(ls,t),rs!==null&&Do(rs,t),$l.forEach(a),Hl.forEach(a);for(var l=0;l<os.length;l++){var o=os[l];o.blockedOn===t&&(o.blockedOn=null)}for(;0<os.length&&(l=os[0],l.blockedOn===null);)Av(l),l.blockedOn===null&&os.shift();if(l=(t.ownerDocument||t).$$reactFormReplay,l!=null)for(o=0;o<l.length;o+=3){var f=l[o],m=l[o+1],x=f[nn]||null;if(typeof m=="function")x||zv(l);else if(x){var _=null;if(m&&m.hasAttribute("formAction")){if(f=m,x=m[nn]||null)_=x.formAction;else if(Xd(f)!==null)continue}else _=x.action;typeof _=="function"?l[o+1]=_:(l.splice(o,3),o-=3),zv(l)}}}function Pv(){function t(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function a(){f!==null&&(f(),f=null),o||setTimeout(l,20)}function l(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(l,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),f!==null&&(f(),f=null)}}}function Jd(t){this._internalRoot=t}ko.prototype.render=Jd.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(i(409));var l=a.current,o=On();Mv(l,o,t,a,null,null)},ko.prototype.unmount=Jd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;Mv(t.current,2,null,t,null,null),fo(),a[ma]=null}};function ko(t){this._internalRoot=t}ko.prototype.unstable_scheduleHydration=function(t){if(t){var a=Te();t={blockedOn:null,target:t,priority:a};for(var l=0;l<os.length&&a!==0&&a<os[l].priority;l++);os.splice(l,0,t),l===0&&Av(t)}};var Iv=n.version;if(Iv!=="19.2.4")throw Error(i(527,Iv,"19.2.4"));G.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=p(a),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var qw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ao=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ao.isDisabled&&Ao.supportsFiber)try{un=Ao.inject(qw),ut=Ao}catch{}}return Gl.createRoot=function(t,a){if(!r(t))throw Error(i(299));var l=!1,o="",f=Zg,m=Fg,x=Gg;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),a=Tv(t,1,!1,null,null,l,o,null,f,m,x,Pv),t[ma]=a.current,Od(t),new Jd(a)},Gl.hydrateRoot=function(t,a,l){if(!r(t))throw Error(i(299));var o=!1,f="",m=Zg,x=Fg,_=Gg,O=null;return l!=null&&(l.unstable_strictMode===!0&&(o=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(m=l.onUncaughtError),l.onCaughtError!==void 0&&(x=l.onCaughtError),l.onRecoverableError!==void 0&&(_=l.onRecoverableError),l.formState!==void 0&&(O=l.formState)),a=Tv(t,1,!0,a,l??null,o,f,O,m,x,_,Pv),a.context=Nv(null),l=a.current,o=On(),o=Mn(o),f=Ya(o),f.callback=null,Va(l,f,o),l=o,a.current.lanes=l,Le(a,l),ca(a),t[ma]=a.current,Od(t),new ko(a)},Gl.version="19.2.4",Gl}var Yv;function Ww(){if(Yv)return nf.exports;Yv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),nf.exports=Kw(),nf.exports}var Xw=Ww(),Pa=q0();const Qw=hh(Pa),Ec=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Qi(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function gh(e){return"nodeType"in e}function En(e){var n,s;return e?Qi(e)?e:gh(e)&&(n=(s=e.ownerDocument)==null?void 0:s.defaultView)!=null?n:window:window}function ph(e){const{Document:n}=En(e);return e instanceof n}function mr(e){return Qi(e)?!1:e instanceof En(e).HTMLElement}function U0(e){return e instanceof En(e).SVGElement}function Ji(e){return e?Qi(e)?e.document:gh(e)?ph(e)?e:mr(e)||U0(e)?e.ownerDocument:document:document:document}const ps=Ec?w.useLayoutEffect:w.useEffect;function vh(e){const n=w.useRef(e);return ps(()=>{n.current=e}),w.useCallback(function(){for(var s=arguments.length,i=new Array(s),r=0;r<s;r++)i[r]=arguments[r];return n.current==null?void 0:n.current(...i)},[])}function Jw(){const e=w.useRef(null),n=w.useCallback((i,r)=>{e.current=setInterval(i,r)},[]),s=w.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,s]}function ar(e,n){n===void 0&&(n=[e]);const s=w.useRef(e);return ps(()=>{s.current!==e&&(s.current=e)},n),s}function gr(e,n){const s=w.useRef();return w.useMemo(()=>{const i=e(s.current);return s.current=i,i},[...n])}function ac(e){const n=vh(e),s=w.useRef(null),i=w.useCallback(r=>{r!==s.current&&n?.(r,s.current),s.current=r},[]);return[s,i]}function Bf(e){const n=w.useRef();return w.useEffect(()=>{n.current=e},[e]),n.current}let rf={};function Tc(e,n){return w.useMemo(()=>{if(n)return n;const s=rf[e]==null?0:rf[e]+1;return rf[e]=s,e+"-"+s},[e,n])}function $0(e){return function(n){for(var s=arguments.length,i=new Array(s>1?s-1:0),r=1;r<s;r++)i[r-1]=arguments[r];return i.reduce((c,u)=>{const d=Object.entries(u);for(const[g,p]of d){const y=c[g];y!=null&&(c[g]=y+e*p)}return c},{...n})}}const Hi=$0(1),sr=$0(-1);function e_(e){return"clientX"in e&&"clientY"in e}function H0(e){if(!e)return!1;const{KeyboardEvent:n}=En(e.target);return n&&e instanceof n}function t_(e){if(!e)return!1;const{TouchEvent:n}=En(e.target);return n&&e instanceof n}function Lf(e){if(t_(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:s}=e.touches[0];return{x:n,y:s}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:s}=e.changedTouches[0];return{x:n,y:s}}}return e_(e)?{x:e.clientX,y:e.clientY}:null}const sc=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:s}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(s?Math.round(s):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:s}=e;return"scaleX("+n+") scaleY("+s+")"}},Transform:{toString(e){if(e)return[sc.Translate.toString(e),sc.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:s,easing:i}=e;return n+" "+s+"ms "+i}}}),Vv="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function n_(e){return e.matches(Vv)?e:e.querySelector(Vv)}const a_={display:"none"};function s_(e){let{id:n,value:s}=e;return Qt.createElement("div",{id:n,style:a_},s)}function i_(e){let{id:n,announcement:s,ariaLiveType:i="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Qt.createElement("div",{id:n,style:r,role:"status","aria-live":i,"aria-atomic":!0},s)}function l_(){const[e,n]=w.useState("");return{announce:w.useCallback(i=>{i!=null&&n(i)},[]),announcement:e}}const Z0=w.createContext(null);function r_(e){const n=w.useContext(Z0);w.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function o_(){const[e]=w.useState(()=>new Set),n=w.useCallback(i=>(e.add(i),()=>e.delete(i)),[e]);return[w.useCallback(i=>{let{type:r,event:c}=i;e.forEach(u=>{var d;return(d=u[r])==null?void 0:d.call(u,c)})},[e]),n]}const c_={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},u_={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was moved over droppable area "+s.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:s}=e;return s?"Draggable item "+n.id+" was dropped over droppable area "+s.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function d_(e){let{announcements:n=u_,container:s,hiddenTextDescribedById:i,screenReaderInstructions:r=c_}=e;const{announce:c,announcement:u}=l_(),d=Tc("DndLiveRegion"),[g,p]=w.useState(!1);if(w.useEffect(()=>{p(!0)},[]),r_(w.useMemo(()=>({onDragStart(v){let{active:b}=v;c(n.onDragStart({active:b}))},onDragMove(v){let{active:b,over:S}=v;n.onDragMove&&c(n.onDragMove({active:b,over:S}))},onDragOver(v){let{active:b,over:S}=v;c(n.onDragOver({active:b,over:S}))},onDragEnd(v){let{active:b,over:S}=v;c(n.onDragEnd({active:b,over:S}))},onDragCancel(v){let{active:b,over:S}=v;c(n.onDragCancel({active:b,over:S}))}}),[c,n])),!g)return null;const y=Qt.createElement(Qt.Fragment,null,Qt.createElement(s_,{id:i,value:r.draggable}),Qt.createElement(i_,{id:d,announcement:u}));return s?Pa.createPortal(y,s):y}var Yt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Yt||(Yt={}));function ic(){}function Kv(e,n){return w.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function f_(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return w.useMemo(()=>[...n].filter(i=>i!=null),[...n])}const sa=Object.freeze({x:0,y:0});function F0(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function G0(e,n){let{data:{value:s}}=e,{data:{value:i}}=n;return s-i}function h_(e,n){let{data:{value:s}}=e,{data:{value:i}}=n;return i-s}function Wv(e){let{left:n,top:s,height:i,width:r}=e;return[{x:n,y:s},{x:n+r,y:s},{x:n,y:s+i},{x:n+r,y:s+i}]}function Y0(e,n){if(!e||e.length===0)return null;const[s]=e;return s[n]}function Xv(e,n,s){return n===void 0&&(n=e.left),s===void 0&&(s=e.top),{x:n+e.width*.5,y:s+e.height*.5}}const m_=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:i}=e;const r=Xv(n,n.left,n.top),c=[];for(const u of i){const{id:d}=u,g=s.get(d);if(g){const p=F0(Xv(g),r);c.push({id:d,data:{droppableContainer:u,value:p}})}}return c.sort(G0)},g_=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:i}=e;const r=Wv(n),c=[];for(const u of i){const{id:d}=u,g=s.get(d);if(g){const p=Wv(g),y=r.reduce((b,S,E)=>b+F0(p[E],S),0),v=Number((y/4).toFixed(4));c.push({id:d,data:{droppableContainer:u,value:v}})}}return c.sort(G0)};function p_(e,n){const s=Math.max(n.top,e.top),i=Math.max(n.left,e.left),r=Math.min(n.left+n.width,e.left+e.width),c=Math.min(n.top+n.height,e.top+e.height),u=r-i,d=c-s;if(i<r&&s<c){const g=n.width*n.height,p=e.width*e.height,y=u*d,v=y/(g+p-y);return Number(v.toFixed(4))}return 0}const v_=e=>{let{collisionRect:n,droppableRects:s,droppableContainers:i}=e;const r=[];for(const c of i){const{id:u}=c,d=s.get(u);if(d){const g=p_(d,n);g>0&&r.push({id:u,data:{droppableContainer:c,value:g}})}}return r.sort(h_)};function y_(e,n,s){return{...e,scaleX:n&&s?n.width/s.width:1,scaleY:n&&s?n.height/s.height:1}}function V0(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:sa}function b_(e){return function(s){for(var i=arguments.length,r=new Array(i>1?i-1:0),c=1;c<i;c++)r[c-1]=arguments[c];return r.reduce((u,d)=>({...u,top:u.top+e*d.y,bottom:u.bottom+e*d.y,left:u.left+e*d.x,right:u.right+e*d.x}),{...s})}}const x_=b_(1);function S_(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function w_(e,n,s){const i=S_(n);if(!i)return e;const{scaleX:r,scaleY:c,x:u,y:d}=i,g=e.left-u-(1-r)*parseFloat(s),p=e.top-d-(1-c)*parseFloat(s.slice(s.indexOf(" ")+1)),y=r?e.width/r:e.width,v=c?e.height/c:e.height;return{width:y,height:v,top:p,right:g+y,bottom:p+v,left:g}}const __={ignoreTransform:!1};function pr(e,n){n===void 0&&(n=__);let s=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:p,transformOrigin:y}=En(e).getComputedStyle(e);p&&(s=w_(s,p,y))}const{top:i,left:r,width:c,height:u,bottom:d,right:g}=s;return{top:i,left:r,width:c,height:u,bottom:d,right:g}}function Qv(e){return pr(e,{ignoreTransform:!0})}function E_(e){const n=e.innerWidth,s=e.innerHeight;return{top:0,left:0,right:n,bottom:s,width:n,height:s}}function T_(e,n){return n===void 0&&(n=En(e).getComputedStyle(e)),n.position==="fixed"}function N_(e,n){n===void 0&&(n=En(e).getComputedStyle(e));const s=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const c=n[r];return typeof c=="string"?s.test(c):!1})}function Nc(e,n){const s=[];function i(r){if(n!=null&&s.length>=n||!r)return s;if(ph(r)&&r.scrollingElement!=null&&!s.includes(r.scrollingElement))return s.push(r.scrollingElement),s;if(!mr(r)||U0(r)||s.includes(r))return s;const c=En(e).getComputedStyle(r);return r!==e&&N_(r,c)&&s.push(r),T_(r,c)?s:i(r.parentNode)}return e?i(e):s}function K0(e){const[n]=Nc(e,1);return n??null}function of(e){return!Ec||!e?null:Qi(e)?e:gh(e)?ph(e)||e===Ji(e).scrollingElement?window:mr(e)?e:null:null}function W0(e){return Qi(e)?e.scrollX:e.scrollLeft}function X0(e){return Qi(e)?e.scrollY:e.scrollTop}function qf(e){return{x:W0(e),y:X0(e)}}var Xt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Xt||(Xt={}));function Q0(e){return!Ec||!e?!1:e===document.scrollingElement}function J0(e){const n={x:0,y:0},s=Q0(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-s.width,y:e.scrollHeight-s.height},r=e.scrollTop<=n.y,c=e.scrollLeft<=n.x,u=e.scrollTop>=i.y,d=e.scrollLeft>=i.x;return{isTop:r,isLeft:c,isBottom:u,isRight:d,maxScroll:i,minScroll:n}}const M_={x:.2,y:.2};function j_(e,n,s,i,r){let{top:c,left:u,right:d,bottom:g}=s;i===void 0&&(i=10),r===void 0&&(r=M_);const{isTop:p,isBottom:y,isLeft:v,isRight:b}=J0(e),S={x:0,y:0},E={x:0,y:0},T={height:n.height*r.y,width:n.width*r.x};return!p&&c<=n.top+T.height?(S.y=Xt.Backward,E.y=i*Math.abs((n.top+T.height-c)/T.height)):!y&&g>=n.bottom-T.height&&(S.y=Xt.Forward,E.y=i*Math.abs((n.bottom-T.height-g)/T.height)),!b&&d>=n.right-T.width?(S.x=Xt.Forward,E.x=i*Math.abs((n.right-T.width-d)/T.width)):!v&&u<=n.left+T.width&&(S.x=Xt.Backward,E.x=i*Math.abs((n.left+T.width-u)/T.width)),{direction:S,speed:E}}function C_(e){if(e===document.scrollingElement){const{innerWidth:c,innerHeight:u}=window;return{top:0,left:0,right:c,bottom:u,width:c,height:u}}const{top:n,left:s,right:i,bottom:r}=e.getBoundingClientRect();return{top:n,left:s,right:i,bottom:r,width:e.clientWidth,height:e.clientHeight}}function eb(e){return e.reduce((n,s)=>Hi(n,qf(s)),sa)}function D_(e){return e.reduce((n,s)=>n+W0(s),0)}function R_(e){return e.reduce((n,s)=>n+X0(s),0)}function k_(e,n){if(n===void 0&&(n=pr),!e)return;const{top:s,left:i,bottom:r,right:c}=n(e);K0(e)&&(r<=0||c<=0||s>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const A_=[["x",["left","right"],D_],["y",["top","bottom"],R_]];class yh{constructor(n,s){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const i=Nc(s),r=eb(i);this.rect={...n},this.width=n.width,this.height=n.height;for(const[c,u,d]of A_)for(const g of u)Object.defineProperty(this,g,{get:()=>{const p=d(i),y=r[c]-p;return this.rect[g]+y},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ql{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(s=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...s)})},this.target=n}add(n,s,i){var r;(r=this.target)==null||r.addEventListener(n,s,i),this.listeners.push([n,s,i])}}function O_(e){const{EventTarget:n}=En(e);return e instanceof n?e:Ji(e)}function cf(e,n){const s=Math.abs(e.x),i=Math.abs(e.y);return typeof n=="number"?Math.sqrt(s**2+i**2)>n:"x"in n&&"y"in n?s>n.x&&i>n.y:"x"in n?s>n.x:"y"in n?i>n.y:!1}var Kn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Kn||(Kn={}));function Jv(e){e.preventDefault()}function z_(e){e.stopPropagation()}var Fe;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Fe||(Fe={}));const tb={start:[Fe.Space,Fe.Enter],cancel:[Fe.Esc],end:[Fe.Space,Fe.Enter,Fe.Tab]},P_=(e,n)=>{let{currentCoordinates:s}=n;switch(e.code){case Fe.Right:return{...s,x:s.x+25};case Fe.Left:return{...s,x:s.x-25};case Fe.Down:return{...s,y:s.y+25};case Fe.Up:return{...s,y:s.y-25}}};class bh{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:s}}=n;this.props=n,this.listeners=new Ql(Ji(s)),this.windowListeners=new Ql(En(s)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Kn.Resize,this.handleCancel),this.windowListeners.add(Kn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Kn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:s}=this.props,i=n.node.current;i&&k_(i),s(sa)}handleKeyDown(n){if(H0(n)){const{active:s,context:i,options:r}=this.props,{keyboardCodes:c=tb,coordinateGetter:u=P_,scrollBehavior:d="smooth"}=r,{code:g}=n;if(c.end.includes(g)){this.handleEnd(n);return}if(c.cancel.includes(g)){this.handleCancel(n);return}const{collisionRect:p}=i.current,y=p?{x:p.left,y:p.top}:sa;this.referenceCoordinates||(this.referenceCoordinates=y);const v=u(n,{active:s,context:i.current,currentCoordinates:y});if(v){const b=sr(v,y),S={x:0,y:0},{scrollableAncestors:E}=i.current;for(const T of E){const C=n.code,{isTop:k,isRight:R,isLeft:z,isBottom:B,maxScroll:U,minScroll:M}=J0(T),j=C_(T),D={x:Math.min(C===Fe.Right?j.right-j.width/2:j.right,Math.max(C===Fe.Right?j.left:j.left+j.width/2,v.x)),y:Math.min(C===Fe.Down?j.bottom-j.height/2:j.bottom,Math.max(C===Fe.Down?j.top:j.top+j.height/2,v.y))},K=C===Fe.Right&&!R||C===Fe.Left&&!z,re=C===Fe.Down&&!B||C===Fe.Up&&!k;if(K&&D.x!==v.x){const he=T.scrollLeft+b.x,se=C===Fe.Right&&he<=U.x||C===Fe.Left&&he>=M.x;if(se&&!b.y){T.scrollTo({left:he,behavior:d});return}se?S.x=T.scrollLeft-he:S.x=C===Fe.Right?T.scrollLeft-U.x:T.scrollLeft-M.x,S.x&&T.scrollBy({left:-S.x,behavior:d});break}else if(re&&D.y!==v.y){const he=T.scrollTop+b.y,se=C===Fe.Down&&he<=U.y||C===Fe.Up&&he>=M.y;if(se&&!b.x){T.scrollTo({top:he,behavior:d});return}se?S.y=T.scrollTop-he:S.y=C===Fe.Down?T.scrollTop-U.y:T.scrollTop-M.y,S.y&&T.scrollBy({top:-S.y,behavior:d});break}}this.handleMove(n,Hi(sr(v,this.referenceCoordinates),S))}}}handleMove(n,s){const{onMove:i}=this.props;n.preventDefault(),i(s)}handleEnd(n){const{onEnd:s}=this.props;n.preventDefault(),this.detach(),s()}handleCancel(n){const{onCancel:s}=this.props;n.preventDefault(),this.detach(),s()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}bh.activators=[{eventName:"onKeyDown",handler:(e,n,s)=>{let{keyboardCodes:i=tb,onActivation:r}=n,{active:c}=s;const{code:u}=e.nativeEvent;if(i.start.includes(u)){const d=c.activatorNode.current;return d&&e.target!==d?!1:(e.preventDefault(),r?.({event:e.nativeEvent}),!0)}return!1}}];function ey(e){return!!(e&&"distance"in e)}function ty(e){return!!(e&&"delay"in e)}class xh{constructor(n,s,i){var r;i===void 0&&(i=O_(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=s;const{event:c}=n,{target:u}=c;this.props=n,this.events=s,this.document=Ji(u),this.documentListeners=new Ql(this.document),this.listeners=new Ql(i),this.windowListeners=new Ql(En(u)),this.initialCoordinates=(r=Lf(c))!=null?r:sa,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:s,bypassActivationConstraint:i}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(Kn.Resize,this.handleCancel),this.windowListeners.add(Kn.DragStart,Jv),this.windowListeners.add(Kn.VisibilityChange,this.handleCancel),this.windowListeners.add(Kn.ContextMenu,Jv),this.documentListeners.add(Kn.Keydown,this.handleKeydown),s){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(ty(s)){this.timeoutId=setTimeout(this.handleStart,s.delay),this.handlePending(s);return}if(ey(s)){this.handlePending(s);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,s){const{active:i,onPending:r}=this.props;r(i,n,this.initialCoordinates,s)}handleStart(){const{initialCoordinates:n}=this,{onStart:s}=this.props;n&&(this.activated=!0,this.documentListeners.add(Kn.Click,z_,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Kn.SelectionChange,this.removeTextSelection),s(n))}handleMove(n){var s;const{activated:i,initialCoordinates:r,props:c}=this,{onMove:u,options:{activationConstraint:d}}=c;if(!r)return;const g=(s=Lf(n))!=null?s:sa,p=sr(r,g);if(!i&&d){if(ey(d)){if(d.tolerance!=null&&cf(p,d.tolerance))return this.handleCancel();if(cf(p,d.distance))return this.handleStart()}if(ty(d)&&cf(p,d.tolerance))return this.handleCancel();this.handlePending(d,p);return}n.cancelable&&n.preventDefault(),u(g)}handleEnd(){const{onAbort:n,onEnd:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleCancel(){const{onAbort:n,onCancel:s}=this.props;this.detach(),this.activated||n(this.props.active),s()}handleKeydown(n){n.code===Fe.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const I_={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Sh extends xh{constructor(n){const{event:s}=n,i=Ji(s.target);super(n,I_,i)}}Sh.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:i}=n;return!s.isPrimary||s.button!==0?!1:(i?.({event:s}),!0)}}];const B_={move:{name:"mousemove"},end:{name:"mouseup"}};var Uf;(function(e){e[e.RightClick=2]="RightClick"})(Uf||(Uf={}));class L_ extends xh{constructor(n){super(n,B_,Ji(n.event.target))}}L_.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:i}=n;return s.button===Uf.RightClick?!1:(i?.({event:s}),!0)}}];const uf={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class q_ extends xh{constructor(n){super(n,uf)}static setup(){return window.addEventListener(uf.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(uf.move.name,n)};function n(){}}}q_.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:s}=e,{onActivation:i}=n;const{touches:r}=s;return r.length>1?!1:(i?.({event:s}),!0)}}];var Jl;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Jl||(Jl={}));var lc;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(lc||(lc={}));function U_(e){let{acceleration:n,activator:s=Jl.Pointer,canScroll:i,draggingRect:r,enabled:c,interval:u=5,order:d=lc.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:y,delta:v,threshold:b}=e;const S=H_({delta:v,disabled:!c}),[E,T]=Jw(),C=w.useRef({x:0,y:0}),k=w.useRef({x:0,y:0}),R=w.useMemo(()=>{switch(s){case Jl.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Jl.DraggableRect:return r}},[s,r,g]),z=w.useRef(null),B=w.useCallback(()=>{const M=z.current;if(!M)return;const j=C.current.x*k.current.x,D=C.current.y*k.current.y;M.scrollBy(j,D)},[]),U=w.useMemo(()=>d===lc.TreeOrder?[...p].reverse():p,[d,p]);w.useEffect(()=>{if(!c||!p.length||!R){T();return}for(const M of U){if(i?.(M)===!1)continue;const j=p.indexOf(M),D=y[j];if(!D)continue;const{direction:K,speed:re}=j_(M,D,R,n,b);for(const he of["x","y"])S[he][K[he]]||(re[he]=0,K[he]=0);if(re.x>0||re.y>0){T(),z.current=M,E(B,u),C.current=re,k.current=K;return}}C.current={x:0,y:0},k.current={x:0,y:0},T()},[n,B,i,T,c,u,JSON.stringify(R),JSON.stringify(S),E,p,U,y,JSON.stringify(b)])}const $_={x:{[Xt.Backward]:!1,[Xt.Forward]:!1},y:{[Xt.Backward]:!1,[Xt.Forward]:!1}};function H_(e){let{delta:n,disabled:s}=e;const i=Bf(n);return gr(r=>{if(s||!i||!r)return $_;const c={x:Math.sign(n.x-i.x),y:Math.sign(n.y-i.y)};return{x:{[Xt.Backward]:r.x[Xt.Backward]||c.x===-1,[Xt.Forward]:r.x[Xt.Forward]||c.x===1},y:{[Xt.Backward]:r.y[Xt.Backward]||c.y===-1,[Xt.Forward]:r.y[Xt.Forward]||c.y===1}}},[s,n,i])}function Z_(e,n){const s=n!=null?e.get(n):void 0,i=s?s.node.current:null;return gr(r=>{var c;return n==null?null:(c=i??r)!=null?c:null},[i,n])}function F_(e,n){return w.useMemo(()=>e.reduce((s,i)=>{const{sensor:r}=i,c=r.activators.map(u=>({eventName:u.eventName,handler:n(u.handler,i)}));return[...s,...c]},[]),[e,n])}var ir;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(ir||(ir={}));var $f;(function(e){e.Optimized="optimized"})($f||($f={}));const ny=new Map;function G_(e,n){let{dragging:s,dependencies:i,config:r}=n;const[c,u]=w.useState(null),{frequency:d,measure:g,strategy:p}=r,y=w.useRef(e),v=C(),b=ar(v),S=w.useCallback(function(k){k===void 0&&(k=[]),!b.current&&u(R=>R===null?k:R.concat(k.filter(z=>!R.includes(z))))},[b]),E=w.useRef(null),T=gr(k=>{if(v&&!s)return ny;if(!k||k===ny||y.current!==e||c!=null){const R=new Map;for(let z of e){if(!z)continue;if(c&&c.length>0&&!c.includes(z.id)&&z.rect.current){R.set(z.id,z.rect.current);continue}const B=z.node.current,U=B?new yh(g(B),B):null;z.rect.current=U,U&&R.set(z.id,U)}return R}return k},[e,c,s,v,g]);return w.useEffect(()=>{y.current=e},[e]),w.useEffect(()=>{v||S()},[s,v]),w.useEffect(()=>{c&&c.length>0&&u(null)},[JSON.stringify(c)]),w.useEffect(()=>{v||typeof d!="number"||E.current!==null||(E.current=setTimeout(()=>{S(),E.current=null},d))},[d,v,S,...i]),{droppableRects:T,measureDroppableContainers:S,measuringScheduled:c!=null};function C(){switch(p){case ir.Always:return!1;case ir.BeforeDragging:return s;default:return!s}}}function nb(e,n){return gr(s=>e?s||(typeof n=="function"?n(e):e):null,[n,e])}function Y_(e,n){return nb(e,n)}function V_(e){let{callback:n,disabled:s}=e;const i=vh(n),r=w.useMemo(()=>{if(s||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(i)},[i,s]);return w.useEffect(()=>()=>r?.disconnect(),[r]),r}function Mc(e){let{callback:n,disabled:s}=e;const i=vh(n),r=w.useMemo(()=>{if(s||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(i)},[s]);return w.useEffect(()=>()=>r?.disconnect(),[r]),r}function K_(e){return new yh(pr(e),e)}function ay(e,n,s){n===void 0&&(n=K_);const[i,r]=w.useState(null);function c(){r(g=>{if(!e)return null;if(e.isConnected===!1){var p;return(p=g??s)!=null?p:null}const y=n(e);return JSON.stringify(g)===JSON.stringify(y)?g:y})}const u=V_({callback(g){if(e)for(const p of g){const{type:y,target:v}=p;if(y==="childList"&&v instanceof HTMLElement&&v.contains(e)){c();break}}}}),d=Mc({callback:c});return ps(()=>{c(),e?(d?.observe(e),u?.observe(document.body,{childList:!0,subtree:!0})):(d?.disconnect(),u?.disconnect())},[e]),i}function W_(e){const n=nb(e);return V0(e,n)}const sy=[];function X_(e){const n=w.useRef(e),s=gr(i=>e?i&&i!==sy&&e&&n.current&&e.parentNode===n.current.parentNode?i:Nc(e):sy,[e]);return w.useEffect(()=>{n.current=e},[e]),s}function Q_(e){const[n,s]=w.useState(null),i=w.useRef(e),r=w.useCallback(c=>{const u=of(c.target);u&&s(d=>d?(d.set(u,qf(u)),new Map(d)):null)},[]);return w.useEffect(()=>{const c=i.current;if(e!==c){u(c);const d=e.map(g=>{const p=of(g);return p?(p.addEventListener("scroll",r,{passive:!0}),[p,qf(p)]):null}).filter(g=>g!=null);s(d.length?new Map(d):null),i.current=e}return()=>{u(e),u(c)};function u(d){d.forEach(g=>{const p=of(g);p?.removeEventListener("scroll",r)})}},[r,e]),w.useMemo(()=>e.length?n?Array.from(n.values()).reduce((c,u)=>Hi(c,u),sa):eb(e):sa,[e,n])}function iy(e,n){n===void 0&&(n=[]);const s=w.useRef(null);return w.useEffect(()=>{s.current=null},n),w.useEffect(()=>{const i=e!==sa;i&&!s.current&&(s.current=e),!i&&s.current&&(s.current=null)},[e]),s.current?sr(e,s.current):sa}function J_(e){w.useEffect(()=>{if(!Ec)return;const n=e.map(s=>{let{sensor:i}=s;return i.setup==null?void 0:i.setup()});return()=>{for(const s of n)s?.()}},e.map(n=>{let{sensor:s}=n;return s}))}function eE(e,n){return w.useMemo(()=>e.reduce((s,i)=>{let{eventName:r,handler:c}=i;return s[r]=u=>{c(u,n)},s},{}),[e,n])}function ab(e){return w.useMemo(()=>e?E_(e):null,[e])}const ly=[];function tE(e,n){n===void 0&&(n=pr);const[s]=e,i=ab(s?En(s):null),[r,c]=w.useState(ly);function u(){c(()=>e.length?e.map(g=>Q0(g)?i:new yh(n(g),g)):ly)}const d=Mc({callback:u});return ps(()=>{d?.disconnect(),u(),e.forEach(g=>d?.observe(g))},[e]),r}function nE(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return mr(n)?n:e}function aE(e){let{measure:n}=e;const[s,i]=w.useState(null),r=w.useCallback(p=>{for(const{target:y}of p)if(mr(y)){i(v=>{const b=n(y);return v?{...v,width:b.width,height:b.height}:b});break}},[n]),c=Mc({callback:r}),u=w.useCallback(p=>{const y=nE(p);c?.disconnect(),y&&c?.observe(y),i(y?n(y):null)},[n,c]),[d,g]=ac(u);return w.useMemo(()=>({nodeRef:d,rect:s,setRef:g}),[s,d,g])}const sE=[{sensor:Sh,options:{}},{sensor:bh,options:{}}],iE={current:{}},Qo={draggable:{measure:Qv},droppable:{measure:Qv,strategy:ir.WhileDragging,frequency:$f.Optimized},dragOverlay:{measure:pr}};class er extends Map{get(n){var s;return n!=null&&(s=super.get(n))!=null?s:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:s}=n;return!s})}getNodeFor(n){var s,i;return(s=(i=this.get(n))==null?void 0:i.node.current)!=null?s:void 0}}const lE={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new er,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ic},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Qo,measureDroppableContainers:ic,windowRect:null,measuringScheduled:!1},rE={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ic,draggableNodes:new Map,over:null,measureDroppableContainers:ic},jc=w.createContext(rE),oE=w.createContext(lE);function cE(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new er}}}function uE(e,n){switch(n.type){case Yt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case Yt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case Yt.DragEnd:case Yt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Yt.RegisterDroppable:{const{element:s}=n,{id:i}=s,r=new er(e.droppable.containers);return r.set(i,s),{...e,droppable:{...e.droppable,containers:r}}}case Yt.SetDroppableDisabled:{const{id:s,key:i,disabled:r}=n,c=e.droppable.containers.get(s);if(!c||i!==c.key)return e;const u=new er(e.droppable.containers);return u.set(s,{...c,disabled:r}),{...e,droppable:{...e.droppable,containers:u}}}case Yt.UnregisterDroppable:{const{id:s,key:i}=n,r=e.droppable.containers.get(s);if(!r||i!==r.key)return e;const c=new er(e.droppable.containers);return c.delete(s),{...e,droppable:{...e.droppable,containers:c}}}default:return e}}function dE(e){let{disabled:n}=e;const{active:s,activatorEvent:i,draggableNodes:r}=w.useContext(jc),c=Bf(i),u=Bf(s?.id);return w.useEffect(()=>{if(!n&&!i&&c&&u!=null){if(!H0(c)||document.activeElement===c.target)return;const d=r.get(u);if(!d)return;const{activatorNode:g,node:p}=d;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const y of[g.current,p.current]){if(!y)continue;const v=n_(y);if(v){v.focus();break}}})}},[i,n,r,u,c]),null}function fE(e,n){let{transform:s,...i}=n;return e!=null&&e.length?e.reduce((r,c)=>c({transform:r,...i}),s):s}function hE(e){return w.useMemo(()=>({draggable:{...Qo.draggable,...e?.draggable},droppable:{...Qo.droppable,...e?.droppable},dragOverlay:{...Qo.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function mE(e){let{activeNode:n,measure:s,initialRect:i,config:r=!0}=e;const c=w.useRef(!1),{x:u,y:d}=typeof r=="boolean"?{x:r,y:r}:r;ps(()=>{if(!u&&!d||!n){c.current=!1;return}if(c.current||!i)return;const p=n?.node.current;if(!p||p.isConnected===!1)return;const y=s(p),v=V0(y,i);if(u||(v.x=0),d||(v.y=0),c.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const b=K0(p);b&&b.scrollBy({top:v.y,left:v.x})}},[n,u,d,i,s])}const sb=w.createContext({...sa,scaleX:1,scaleY:1});var ds;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ds||(ds={}));const gE=w.memo(function(n){var s,i,r,c;let{id:u,accessibility:d,autoScroll:g=!0,children:p,sensors:y=sE,collisionDetection:v=v_,measuring:b,modifiers:S,...E}=n;const T=w.useReducer(uE,void 0,cE),[C,k]=T,[R,z]=o_(),[B,U]=w.useState(ds.Uninitialized),M=B===ds.Initialized,{draggable:{active:j,nodes:D,translate:K},droppable:{containers:re}}=C,he=j!=null?D.get(j):null,se=w.useRef({initial:null,translated:null}),Z=w.useMemo(()=>{var Et;return j!=null?{id:j,data:(Et=he?.data)!=null?Et:iE,rect:se}:null},[j,he]),le=w.useRef(null),[Q,L]=w.useState(null),[G,ae]=w.useState(null),A=ar(E,Object.values(E)),Y=Tc("DndDescribedBy",u),N=w.useMemo(()=>re.getEnabled(),[re]),P=hE(b),{droppableRects:ee,measureDroppableContainers:oe,measuringScheduled:ue}=G_(N,{dragging:M,dependencies:[K.x,K.y],config:P.droppable}),ce=Z_(D,j),ye=w.useMemo(()=>G?Lf(G):null,[G]),be=pt(),ge=Y_(ce,P.draggable.measure);mE({activeNode:j!=null?D.get(j):null,config:be.layoutShiftCompensation,initialRect:ge,measure:P.draggable.measure});const _e=ay(ce,P.draggable.measure,ge),Be=ay(ce?ce.parentElement:null),it=w.useRef({activatorEvent:null,active:null,activeNode:ce,collisionRect:null,collisions:null,droppableRects:ee,draggableNodes:D,draggingNode:null,draggingNodeRect:null,droppableContainers:re,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Rt=re.getNodeFor((s=it.current.over)==null?void 0:s.id),ct=aE({measure:P.dragOverlay.measure}),Vt=(i=ct.nodeRef.current)!=null?i:ce,ht=M?(r=ct.rect)!=null?r:_e:null,Jt=!!(ct.nodeRef.current&&ct.rect),en=W_(Jt?null:_e),Zt=ab(Vt?En(Vt):null),de=X_(M?Rt??ce:null),ze=tE(de),De=fE(S,{transform:{x:K.x-en.x,y:K.y-en.y,scaleX:1,scaleY:1},activatorEvent:G,active:Z,activeNodeRect:_e,containerNodeRect:Be,draggingNodeRect:ht,over:it.current.over,overlayNodeRect:ct.rect,scrollableAncestors:de,scrollableAncestorRects:ze,windowRect:Zt}),We=ye?Hi(ye,K):null,je=Q_(de),Ft=iy(je),Nn=iy(je,[_e]),tn=Hi(De,Ft),W=ht?x_(ht,De):null,me=Z&&W?v({active:Z,collisionRect:W,droppableRects:ee,droppableContainers:N,pointerCoordinates:We}):null,Ye=Y0(me,"id"),[Ge,cn]=w.useState(null),un=Jt?De:Hi(De,Nn),ut=y_(un,(c=Ge?.rect)!=null?c:null,_e),zt=w.useRef(null),kt=w.useCallback((Et,X)=>{let{sensor:fe,options:Ne}=X;if(le.current==null)return;const Ae=D.get(le.current);if(!Ae)return;const Xe=Et.nativeEvent,Tt=new fe({active:le.current,activeNode:Ae,event:Xe,options:Ne,context:it,onAbort(Pe){if(!D.get(Pe))return;const{onDragAbort:mt}=A.current,we={id:Pe};mt?.(we),R({type:"onDragAbort",event:we})},onPending(Pe,xt,mt,we){if(!D.get(Pe))return;const{onDragPending:dn}=A.current,Te={id:Pe,constraint:xt,initialCoordinates:mt,offset:we};dn?.(Te),R({type:"onDragPending",event:Te})},onStart(Pe){const xt=le.current;if(xt==null)return;const mt=D.get(xt);if(!mt)return;const{onDragStart:we}=A.current,Mn={activatorEvent:Xe,active:{id:xt,data:mt.data,rect:se}};Pa.unstable_batchedUpdates(()=>{we?.(Mn),U(ds.Initializing),k({type:Yt.DragStart,initialCoordinates:Pe,active:xt}),R({type:"onDragStart",event:Mn}),L(zt.current),ae(Xe)})},onMove(Pe){k({type:Yt.DragMove,coordinates:Pe})},onEnd:Le(Yt.DragEnd),onCancel:Le(Yt.DragCancel)});zt.current=Tt;function Le(Pe){return async function(){const{active:mt,collisions:we,over:Mn,scrollAdjustedTranslate:dn}=it.current;let Te=null;if(mt&&dn){const{cancelDrop:fn}=A.current;Te={activatorEvent:Xe,active:mt,collisions:we,delta:dn,over:Mn},Pe===Yt.DragEnd&&typeof fn=="function"&&await Promise.resolve(fn(Te))&&(Pe=Yt.DragCancel)}le.current=null,Pa.unstable_batchedUpdates(()=>{k({type:Pe}),U(ds.Uninitialized),cn(null),L(null),ae(null),zt.current=null;const fn=Pe===Yt.DragEnd?"onDragEnd":"onDragCancel";if(Te){const Qe=A.current[fn];Qe?.(Te),R({type:fn,event:Te})}})}}},[D]),tl=w.useCallback((Et,X)=>(fe,Ne)=>{const Ae=fe.nativeEvent,Xe=D.get(Ne);if(le.current!==null||!Xe||Ae.dndKit||Ae.defaultPrevented)return;const Tt={active:Xe};Et(fe,X.options,Tt)===!0&&(Ae.dndKit={capturedBy:X.sensor},le.current=Ne,kt(fe,X))},[D,kt]),Ys=F_(y,tl);J_(y),ps(()=>{_e&&B===ds.Initializing&&U(ds.Initialized)},[_e,B]),w.useEffect(()=>{const{onDragMove:Et}=A.current,{active:X,activatorEvent:fe,collisions:Ne,over:Ae}=it.current;if(!X||!fe)return;const Xe={active:X,activatorEvent:fe,collisions:Ne,delta:{x:tn.x,y:tn.y},over:Ae};Pa.unstable_batchedUpdates(()=>{Et?.(Xe),R({type:"onDragMove",event:Xe})})},[tn.x,tn.y]),w.useEffect(()=>{const{active:Et,activatorEvent:X,collisions:fe,droppableContainers:Ne,scrollAdjustedTranslate:Ae}=it.current;if(!Et||le.current==null||!X||!Ae)return;const{onDragOver:Xe}=A.current,Tt=Ne.get(Ye),Le=Tt&&Tt.rect.current?{id:Tt.id,rect:Tt.rect.current,data:Tt.data,disabled:Tt.disabled}:null,Pe={active:Et,activatorEvent:X,collisions:fe,delta:{x:Ae.x,y:Ae.y},over:Le};Pa.unstable_batchedUpdates(()=>{cn(Le),Xe?.(Pe),R({type:"onDragOver",event:Pe})})},[Ye]),ps(()=>{it.current={activatorEvent:G,active:Z,activeNode:ce,collisionRect:W,collisions:me,droppableRects:ee,draggableNodes:D,draggingNode:Vt,draggingNodeRect:ht,droppableContainers:re,over:Ge,scrollableAncestors:de,scrollAdjustedTranslate:tn},se.current={initial:ht,translated:W}},[Z,ce,me,W,D,Vt,ht,ee,re,Ge,de,tn]),U_({...be,delta:K,draggingRect:W,pointerCoordinates:We,scrollableAncestors:de,scrollableAncestorRects:ze});const Vs=w.useMemo(()=>({active:Z,activeNode:ce,activeNodeRect:_e,activatorEvent:G,collisions:me,containerNodeRect:Be,dragOverlay:ct,draggableNodes:D,droppableContainers:re,droppableRects:ee,over:Ge,measureDroppableContainers:oe,scrollableAncestors:de,scrollableAncestorRects:ze,measuringConfiguration:P,measuringScheduled:ue,windowRect:Zt}),[Z,ce,_e,G,me,Be,ct,D,re,ee,Ge,oe,de,ze,P,ue,Zt]),ha=w.useMemo(()=>({activatorEvent:G,activators:Ys,active:Z,activeNodeRect:_e,ariaDescribedById:{draggable:Y},dispatch:k,draggableNodes:D,over:Ge,measureDroppableContainers:oe}),[G,Ys,Z,_e,k,Y,D,Ge,oe]);return Qt.createElement(Z0.Provider,{value:z},Qt.createElement(jc.Provider,{value:ha},Qt.createElement(oE.Provider,{value:Vs},Qt.createElement(sb.Provider,{value:ut},p)),Qt.createElement(dE,{disabled:d?.restoreFocus===!1})),Qt.createElement(d_,{...d,hiddenTextDescribedById:Y}));function pt(){const Et=Q?.autoScrollEnabled===!1,X=typeof g=="object"?g.enabled===!1:g===!1,fe=M&&!Et&&!X;return typeof g=="object"?{...g,enabled:fe}:{enabled:fe}}}),pE=w.createContext(null),ry="button",vE="Draggable";function ib(e){let{id:n,data:s,disabled:i=!1,attributes:r}=e;const c=Tc(vE),{activators:u,activatorEvent:d,active:g,activeNodeRect:p,ariaDescribedById:y,draggableNodes:v,over:b}=w.useContext(jc),{role:S=ry,roleDescription:E="draggable",tabIndex:T=0}=r??{},C=g?.id===n,k=w.useContext(C?sb:pE),[R,z]=ac(),[B,U]=ac(),M=eE(u,n),j=ar(s);ps(()=>(v.set(n,{id:n,key:c,node:R,activatorNode:B,data:j}),()=>{const K=v.get(n);K&&K.key===c&&v.delete(n)}),[v,n]);const D=w.useMemo(()=>({role:S,tabIndex:T,"aria-disabled":i,"aria-pressed":C&&S===ry?!0:void 0,"aria-roledescription":E,"aria-describedby":y.draggable}),[i,S,T,C,E,y.draggable]);return{active:g,activatorEvent:d,activeNodeRect:p,attributes:D,isDragging:C,listeners:i?void 0:M,node:R,over:b,setNodeRef:z,setActivatorNodeRef:U,transform:k}}const yE="Droppable",bE={timeout:25};function lb(e){let{data:n,disabled:s=!1,id:i,resizeObserverConfig:r}=e;const c=Tc(yE),{active:u,dispatch:d,over:g,measureDroppableContainers:p}=w.useContext(jc),y=w.useRef({disabled:s}),v=w.useRef(!1),b=w.useRef(null),S=w.useRef(null),{disabled:E,updateMeasurementsFor:T,timeout:C}={...bE,...r},k=ar(T??i),R=w.useCallback(()=>{if(!v.current){v.current=!0;return}S.current!=null&&clearTimeout(S.current),S.current=setTimeout(()=>{p(Array.isArray(k.current)?k.current:[k.current]),S.current=null},C)},[C]),z=Mc({callback:R,disabled:E||!u}),B=w.useCallback((D,K)=>{z&&(K&&(z.unobserve(K),v.current=!1),D&&z.observe(D))},[z]),[U,M]=ac(B),j=ar(n);return w.useEffect(()=>{!z||!U.current||(z.disconnect(),v.current=!1,z.observe(U.current))},[U,z]),w.useEffect(()=>(d({type:Yt.RegisterDroppable,element:{id:i,key:c,disabled:s,node:U,rect:b,data:j}}),()=>d({type:Yt.UnregisterDroppable,key:c,id:i})),[i]),w.useEffect(()=>{s!==y.current.disabled&&(d({type:Yt.SetDroppableDisabled,id:i,key:c,disabled:s}),y.current.disabled=s)},[i,c,s,d]),{active:u,rect:b,isOver:g?.id===i,node:U,over:g,setNodeRef:M}}function rc(e){if(!e)return!1;const n=e.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const xE=[Fe.Down,Fe.Right,Fe.Up,Fe.Left],SE=(e,n)=>{let{context:{active:s,collisionRect:i,droppableRects:r,droppableContainers:c,over:u,scrollableAncestors:d}}=n;if(xE.includes(e.code)){if(e.preventDefault(),!s||!i)return;const g=[];c.getEnabled().forEach(v=>{if(!v||v!=null&&v.disabled)return;const b=r.get(v.id);if(b)switch(e.code){case Fe.Down:i.top<b.top&&g.push(v);break;case Fe.Up:i.top>b.top&&g.push(v);break;case Fe.Left:i.left>b.left&&g.push(v);break;case Fe.Right:i.left<b.left&&g.push(v);break}});const p=g_({collisionRect:i,droppableRects:r,droppableContainers:g});let y=Y0(p,"id");if(y===u?.id&&p.length>1&&(y=p[1].id),y!=null){const v=c.get(s.id),b=c.get(y),S=b?r.get(b.id):null,E=b?.node.current;if(E&&S&&v&&b){const C=Nc(E).some((M,j)=>d[j]!==M),k=rb(v,b),R=wE(v,b),z=C||!k?{x:0,y:0}:{x:R?i.width-S.width:0,y:R?i.height-S.height:0},B={x:S.left,y:S.top};return z.x&&z.y?B:sr(B,z)}}}};function rb(e,n){return!rc(e)||!rc(n)?!1:e.data.current.sortable.containerId===n.data.current.sortable.containerId}function wE(e,n){return!rc(e)||!rc(n)||!rb(e,n)?!1:e.data.current.sortable.index<n.data.current.sortable.index}const oy=e=>Symbol.iterator in e,cy=e=>"entries"in e,uy=(e,n)=>{const s=e instanceof Map?e:new Map(e.entries()),i=n instanceof Map?n:new Map(n.entries());if(s.size!==i.size)return!1;for(const[r,c]of s)if(!i.has(r)||!Object.is(c,i.get(r)))return!1;return!0},_E=(e,n)=>{const s=e[Symbol.iterator](),i=n[Symbol.iterator]();let r=s.next(),c=i.next();for(;!r.done&&!c.done;){if(!Object.is(r.value,c.value))return!1;r=s.next(),c=i.next()}return!!r.done&&!!c.done};function EE(e,n){return Object.is(e,n)?!0:typeof e!="object"||e===null||typeof n!="object"||n===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(n)?!1:oy(e)&&oy(n)?cy(e)&&cy(n)?uy(e,n):_E(e,n):uy({entries:()=>Object.entries(e)},{entries:()=>Object.entries(n)})}function TE(e){const n=Qt.useRef(void 0);return s=>{const i=e(s);return EE(n.current,i)?n.current:n.current=i}}const NE=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ME=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,s,i)=>i?i.toUpperCase():s.toLowerCase()),dy=e=>{const n=ME(e);return n.charAt(0).toUpperCase()+n.slice(1)},ob=(...e)=>e.filter((n,s,i)=>!!n&&n.trim()!==""&&i.indexOf(n)===s).join(" ").trim(),jE=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};var CE={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const DE=w.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:r="",children:c,iconNode:u,...d},g)=>w.createElement("svg",{ref:g,...CE,width:n,height:n,stroke:e,strokeWidth:i?Number(s)*24/Number(n):s,className:ob("lucide",r),...!c&&!jE(d)&&{"aria-hidden":"true"},...d},[...u.map(([p,y])=>w.createElement(p,y)),...Array.isArray(c)?c:[c]]));const Ht=(e,n)=>{const s=w.forwardRef(({className:i,...r},c)=>w.createElement(DE,{ref:c,iconNode:n,className:ob(`lucide-${NE(dy(e))}`,`lucide-${e}`,i),...r}));return s.displayName=dy(e),s};const RE=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],kE=Ht("chevron-down",RE);const AE=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],OE=Ht("chevron-right",AE);const zE=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],PE=Ht("copy",zE);const IE=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],BE=Ht("external-link",IE);const LE=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],qE=Ht("git-branch",LE);const UE=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],$E=Ht("grip-vertical",UE);const HE=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],ZE=Ht("hammer",HE);const FE=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],wh=Ht("link-2",FE);const GE=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],cb=Ht("lock",GE);const YE=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],VE=Ht("pin",YE);const KE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],WE=Ht("plus",KE);const XE=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],QE=Ht("search",XE);const JE=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],fy=Ht("sliders-horizontal",JE);const eT=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],tT=Ht("sparkles",eT);const nT=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ub=Ht("trash-2",nT);const aT=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]],db=Ht("tree-pine",aT);const sT=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],iT=Ht("triangle-alert",sT);const lT=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],rT=Ht("undo-2",lT);const oT=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],cT=Ht("upload",oT);const uT=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],dT=Ht("x",uT),fb="build-solver:theme-mode",hb="minimal";function fT(e){return e==="classic"?"classic":hb}function mb(){return typeof window>"u"?hb:fT(window.localStorage.getItem(fb))}function hT(e){typeof window>"u"||window.localStorage.setItem(fb,e)}function gb(e){typeof document>"u"||(document.documentElement.dataset.wbTheme=e)}const vs=["helmet","chestplate","leggings","boots","ring","bracelet","necklace","weapon"],tt=["helmet","chestplate","leggings","boots","ring1","ring2","bracelet","necklace","weapon"],fa=e=>e==="ring1"||e==="ring2"?"ring":e,oc=e=>{switch(e){case"ring1":return"Ring 1";case"ring2":return"Ring 2";default:return e.charAt(0).toUpperCase()+e.slice(1)}};function _h(e){return e==="weapon"?"Weapon":e.charAt(0).toUpperCase()+e.slice(1)}const pb={spear:"Warrior",dagger:"Assassin",wand:"Mage",bow:"Archer",relik:"Shaman"};function cc(e){return pb[e]??null}function mT(e,n){return e in pb?"weapon":vs.includes(e)?e:n==="weapon"?"weapon":e==="ring"?"ring":null}function vb(e,n){return!n||!e.classReq?!0:e.classReq===n}function gT(e,n){return e.level<=n}const pT=["hp","hpBonus","hprRaw","hprPct","mr","ms","ls","sdPct","sdRaw","mdPct","mdRaw","poison","spd","atkTier","averageDps","strReq","dexReq","intReq","defReq","agiReq","str","dex","int","def","agi","eDef","tDef","wDef","fDef","aDef","eDamPct","tDamPct","wDamPct","fDamPct","aDamPct","damPct","rDamPct","nDamPct","slots","lvl","spPct1","spRaw1","spPct2","spRaw2","spPct3","spRaw3","spPct4","spRaw4"];function ke(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const n=Number(e);if(Number.isFinite(n))return n}return 0}function zn(e){return typeof e=="string"?e:""}function vT(e){return Array.isArray(e)?e.filter(n=>typeof n=="string"):[]}function yT(e,n){const s=zn(e).trim();if(!s)return cc(n);switch(s.toLowerCase()){case"warrior":return"Warrior";case"assassin":return"Assassin";case"mage":return"Mage";case"archer":return"Archer";case"shaman":return"Shaman";default:return cc(n)}}function bT(e){return{hp:ke(e.hp),hpBonus:ke(e.hpBonus),hprRaw:ke(e.hprRaw),hprPct:ke(e.hprPct),mr:ke(e.mr),ms:ke(e.ms),ls:ke(e.ls),sdPct:ke(e.sdPct),sdRaw:ke(e.sdRaw),mdPct:ke(e.mdPct),mdRaw:ke(e.mdRaw),poison:ke(e.poison),spd:ke(e.spd),atkTier:ke(e.atkTier),baseDps:ke(e.averageDps),reqStr:ke(e.strReq),reqDex:ke(e.dexReq),reqInt:ke(e.intReq),reqDef:ke(e.defReq),reqAgi:ke(e.agiReq),spStr:ke(e.str),spDex:ke(e.dex),spInt:ke(e.int),spDef:ke(e.def),spAgi:ke(e.agi),eDef:ke(e.eDef),tDef:ke(e.tDef),wDef:ke(e.wDef),fDef:ke(e.fDef),aDef:ke(e.aDef),eDamPct:ke(e.eDamPct),tDamPct:ke(e.tDamPct),wDamPct:ke(e.wDamPct),fDamPct:ke(e.fDamPct),aDamPct:ke(e.aDamPct),damPct:ke(e.damPct),rDamPct:ke(e.rDamPct),nDamPct:ke(e.nDamPct)}}function xT(e){const n={};for(const s of pT)n[s]=ke(e[s]);return n.reqTotal=n.strReq+n.dexReq+n.intReq+n.defReq+n.agiReq,n.skillPointTotal=n.str+n.dex+n.int+n.def+n.agi,n.offenseScore=n.averageDps+n.sdPct*1.4+n.mdPct*1.15+n.sdRaw*.12+n.mdRaw*.12+(n.damPct+n.rDamPct+n.nDamPct)*.8+(n.eDamPct+n.tDamPct+n.wDamPct+n.fDamPct+n.aDamPct)*.5+n.atkTier*7+n.poison*.03,n.ehpProxy=n.hp+n.hpBonus+(n.eDef+n.tDef+n.wDef+n.fDef+n.aDef)*.45+n.hprRaw*1.2+n.hprPct*2.5,n.utilityScore=n.spd*1.8+n.mr*8+n.ms*7+n.ls*6,n.sumSpPct=n.spPct1+n.spPct2+n.spPct3+n.spPct4,n.sumSpRaw=n.spRaw1+n.spRaw2+n.spRaw3+n.spRaw4,n}function ST(e){if(typeof e.remapID<"u")return null;const n=zn(e.type).toLowerCase(),s=zn(e.category).toLowerCase(),i=mT(n,s);if(!i)return null;const r=zn(e.displayName)||zn(e.name),c=zn(e.tier)||"Normal",u=ke(e.lvl),d=vT(e.majorIds),g=bT(e),p=xT(e),y={baseDps:g.baseDps,offense:p.offenseScore,ehpProxy:p.ehpProxy,utility:p.utilityScore,skillPointTotal:p.skillPointTotal,reqTotal:p.reqTotal},v=[r,zn(e.name),zn(e.lore),n,c,s,zn(e.classReq),...d];return{id:ke(e.id),name:zn(e.name),displayName:r,category:i,type:n,sourceCategory:s,tier:c,level:u,classReq:yT(e.classReq,n),majorIds:d,powderSlots:ke(e.slots),atkSpd:zn(e.atkSpd),restricted:zn(e.restrict)!=="",deprecated:zn(e.restrict).toUpperCase()==="DEPRECATED",numeric:g,numericIndex:p,searchText:v.filter(Boolean).join(" ").toLowerCase(),majorIdsText:d.join(" ").toLowerCase(),roughScoreFields:y,legacyRaw:e}}function wT(e,n,s){if(!Number.isFinite(s))return;const i=e[n];if(!i){e[n]={min:s,max:s};return}i.min=Math.min(i.min,s),i.max=Math.max(i.max,s)}function _T(e){const n=e.items.map(ST).filter(T=>T!==null);n.sort((T,C)=>T.displayName.localeCompare(C.displayName));const s=new Map,i=new Map,r=new Map,c=new Map(vs.map(T=>[T,[]])),u=new Set,d=new Set,g=new Set,p=new Set,y={},v=new Map;for(const T of n){s.set(T.id,T),i.set(T.displayName.toLowerCase(),T.id),r.has(T.type)||r.set(T.type,[]),r.get(T.type).push(T.id),c.get(T.category).push(T.id),u.add(T.tier),d.add(T.type),T.classReq&&g.add(T.classReq);for(const C of T.majorIds)C&&p.add(C);for(const[C,k]of Object.entries(T.numericIndex))wT(y,C,k)}const b=e.sets??{},S=new Map;for(const[T,C]of Object.entries(b)){const k=C?.bonuses;if(!Array.isArray(k))continue;const R=[];k.forEach((B,U)=>{B&&typeof B=="object"&&B.illegal&&R.push(U+1)}),R.length>0&&v.set(T,{illegalCounts:R});const z=C?.items;if(Array.isArray(z))for(const B of z)typeof B=="string"&&S.set(B.toLowerCase(),T)}const E=new Map;for(const[T,C]of S){const k=i.get(T);k!=null&&E.set(k,C)}return{version:String(e.version??"unknown"),items:n,itemsById:s,itemIdByName:i,itemsByType:r,itemsByCategory:c,facetsMeta:{categories:[...vs],types:[...d].sort(),tiers:[...u].sort(),classReqs:[...g].sort(),majorIds:[...p].sort(),numericRanges:y},setsMeta:v,itemSetName:E}}class ET{snapshotPromise=null;async getCatalog(){return this.snapshotPromise||(this.snapshotPromise=this.loadCatalog()),this.snapshotPromise}async getItemById(n){return(await this.getCatalog()).itemsById.get(n)}async loadCatalog(){const n=await this.fetchCompressPayload();return _T(n)}async fetchCompressPayload(){const n=c=>{if(typeof window>"u")return c;const u=window.location.href.split("?")[0].replace(/\/[^/]*$/,"/")||window.location.origin+"/";return new URL(c,u).href},s=[n("compress.json"),n("./compress.json"),"./compress.json","../compress.json","compress.json"];let i=null;const r=[];for(const c of s)try{const u=await fetch(c,{cache:"force-cache"});if(!u.ok)throw new Error(`Failed to fetch ${c}: ${u.status}`);const d=await u.json();if(!d?.items||!Array.isArray(d.items))throw new Error(`Invalid compress payload from ${c}`);return d}catch(u){i=u,r.push(u instanceof Error?u.message:`Failed to fetch ${c}`)}throw i instanceof Error?new Error(`Unable to load compress.json. Tried: ${s.join(", ")}. Last error: ${i.message}`):new Error(`Unable to load compress.json. Tried: ${s.join(", ")}. Failures: ${r.join(" | ")}`)}}const TT=new ET;function ne(e,n,s){function i(d,g){if(d._zod||Object.defineProperty(d,"_zod",{value:{def:g,constr:u,traits:new Set},enumerable:!1}),d._zod.traits.has(e))return;d._zod.traits.add(e),n(d,g);const p=u.prototype,y=Object.keys(p);for(let v=0;v<y.length;v++){const b=y[v];b in d||(d[b]=p[b].bind(d))}}const r=s?.Parent??Object;class c extends r{}Object.defineProperty(c,"name",{value:e});function u(d){var g;const p=s?.Parent?new c:this;i(p,d),(g=p._zod).deferred??(g.deferred=[]);for(const y of p._zod.deferred)y();return p}return Object.defineProperty(u,"init",{value:i}),Object.defineProperty(u,Symbol.hasInstance,{value:d=>s?.Parent&&d instanceof s.Parent?!0:d?._zod?.traits?.has(e)}),Object.defineProperty(u,"name",{value:e}),u}class Zi extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class yb extends Error{constructor(n){super(`Encountered unidirectional transform during encode: ${n}`),this.name="ZodEncodeError"}}const bb={};function ys(e){return bb}function xb(e){const n=Object.values(e).filter(i=>typeof i=="number");return Object.entries(e).filter(([i,r])=>n.indexOf(+i)===-1).map(([i,r])=>r)}function Hf(e,n){return typeof n=="bigint"?n.toString():n}function Eh(e){return{get value(){{const n=e();return Object.defineProperty(this,"value",{value:n}),n}}}}function Th(e){return e==null}function Nh(e){const n=e.startsWith("^")?1:0,s=e.endsWith("$")?e.length-1:e.length;return e.slice(n,s)}function NT(e,n){const s=(e.toString().split(".")[1]||"").length,i=n.toString();let r=(i.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(i)){const g=i.match(/\d?e-(\d?)/);g?.[1]&&(r=Number.parseInt(g[1]))}const c=s>r?s:r,u=Number.parseInt(e.toFixed(c).replace(".","")),d=Number.parseInt(n.toFixed(c).replace(".",""));return u%d/10**c}const hy=Symbol("evaluating");function st(e,n,s){let i;Object.defineProperty(e,n,{get(){if(i!==hy)return i===void 0&&(i=hy,i=s()),i},set(r){Object.defineProperty(e,n,{value:r})},configurable:!0})}function Fs(e,n,s){Object.defineProperty(e,n,{value:s,writable:!0,enumerable:!0,configurable:!0})}function xs(...e){const n={};for(const s of e){const i=Object.getOwnPropertyDescriptors(s);Object.assign(n,i)}return Object.defineProperties({},n)}function my(e){return JSON.stringify(e)}function MT(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Sb="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function uc(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const jT=Eh(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Wi(e){if(uc(e)===!1)return!1;const n=e.constructor;if(n===void 0||typeof n!="function")return!0;const s=n.prototype;return!(uc(s)===!1||Object.prototype.hasOwnProperty.call(s,"isPrototypeOf")===!1)}function wb(e){return Wi(e)?{...e}:Array.isArray(e)?[...e]:e}const CT=new Set(["string","number","symbol"]);function Cc(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ss(e,n,s){const i=new e._zod.constr(n??e._zod.def);return(!n||s?.parent)&&(i._zod.parent=e),i}function Se(e){const n=e;if(!n)return{};if(typeof n=="string")return{error:()=>n};if(n?.message!==void 0){if(n?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");n.error=n.message}return delete n.message,typeof n.error=="string"?{...n,error:()=>n.error}:n}function DT(e){return Object.keys(e).filter(n=>e[n]._zod.optin==="optional"&&e[n]._zod.optout==="optional")}const RT={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function kT(e,n){const s=e._zod.def,i=s.checks;if(i&&i.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const c=xs(e._zod.def,{get shape(){const u={};for(const d in n){if(!(d in s.shape))throw new Error(`Unrecognized key: "${d}"`);n[d]&&(u[d]=s.shape[d])}return Fs(this,"shape",u),u},checks:[]});return Ss(e,c)}function AT(e,n){const s=e._zod.def,i=s.checks;if(i&&i.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const c=xs(e._zod.def,{get shape(){const u={...e._zod.def.shape};for(const d in n){if(!(d in s.shape))throw new Error(`Unrecognized key: "${d}"`);n[d]&&delete u[d]}return Fs(this,"shape",u),u},checks:[]});return Ss(e,c)}function OT(e,n){if(!Wi(n))throw new Error("Invalid input to extend: expected a plain object");const s=e._zod.def.checks;if(s&&s.length>0){const c=e._zod.def.shape;for(const u in n)if(Object.getOwnPropertyDescriptor(c,u)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const r=xs(e._zod.def,{get shape(){const c={...e._zod.def.shape,...n};return Fs(this,"shape",c),c}});return Ss(e,r)}function zT(e,n){if(!Wi(n))throw new Error("Invalid input to safeExtend: expected a plain object");const s=xs(e._zod.def,{get shape(){const i={...e._zod.def.shape,...n};return Fs(this,"shape",i),i}});return Ss(e,s)}function PT(e,n){const s=xs(e._zod.def,{get shape(){const i={...e._zod.def.shape,...n._zod.def.shape};return Fs(this,"shape",i),i},get catchall(){return n._zod.def.catchall},checks:[]});return Ss(e,s)}function IT(e,n,s){const r=n._zod.def.checks;if(r&&r.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const u=xs(n._zod.def,{get shape(){const d=n._zod.def.shape,g={...d};if(s)for(const p in s){if(!(p in d))throw new Error(`Unrecognized key: "${p}"`);s[p]&&(g[p]=e?new e({type:"optional",innerType:d[p]}):d[p])}else for(const p in d)g[p]=e?new e({type:"optional",innerType:d[p]}):d[p];return Fs(this,"shape",g),g},checks:[]});return Ss(n,u)}function BT(e,n,s){const i=xs(n._zod.def,{get shape(){const r=n._zod.def.shape,c={...r};if(s)for(const u in s){if(!(u in c))throw new Error(`Unrecognized key: "${u}"`);s[u]&&(c[u]=new e({type:"nonoptional",innerType:r[u]}))}else for(const u in r)c[u]=new e({type:"nonoptional",innerType:r[u]});return Fs(this,"shape",c),c}});return Ss(n,i)}function qi(e,n=0){if(e.aborted===!0)return!0;for(let s=n;s<e.issues.length;s++)if(e.issues[s]?.continue!==!0)return!0;return!1}function Ui(e,n){return n.map(s=>{var i;return(i=s).path??(i.path=[]),s.path.unshift(e),s})}function Oo(e){return typeof e=="string"?e:e?.message}function bs(e,n,s){const i={...e,path:e.path??[]};if(!e.message){const r=Oo(e.inst?._zod.def?.error?.(e))??Oo(n?.error?.(e))??Oo(s.customError?.(e))??Oo(s.localeError?.(e))??"Invalid input";i.message=r}return delete i.inst,delete i.continue,n?.reportInput||delete i.input,i}function Mh(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function lr(...e){const[n,s,i]=e;return typeof n=="string"?{message:n,code:"custom",input:s,inst:i}:{...n}}const _b=(e,n)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:n,enumerable:!1}),e.message=JSON.stringify(n,Hf,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Eb=ne("$ZodError",_b),Tb=ne("$ZodError",_b,{Parent:Error});function LT(e,n=s=>s.message){const s={},i=[];for(const r of e.issues)r.path.length>0?(s[r.path[0]]=s[r.path[0]]||[],s[r.path[0]].push(n(r))):i.push(n(r));return{formErrors:i,fieldErrors:s}}function qT(e,n=s=>s.message){const s={_errors:[]},i=r=>{for(const c of r.issues)if(c.code==="invalid_union"&&c.errors.length)c.errors.map(u=>i({issues:u}));else if(c.code==="invalid_key")i({issues:c.issues});else if(c.code==="invalid_element")i({issues:c.issues});else if(c.path.length===0)s._errors.push(n(c));else{let u=s,d=0;for(;d<c.path.length;){const g=c.path[d];d===c.path.length-1?(u[g]=u[g]||{_errors:[]},u[g]._errors.push(n(c))):u[g]=u[g]||{_errors:[]},u=u[g],d++}}};return i(e),s}const jh=e=>(n,s,i,r)=>{const c=i?Object.assign(i,{async:!1}):{async:!1},u=n._zod.run({value:s,issues:[]},c);if(u instanceof Promise)throw new Zi;if(u.issues.length){const d=new(r?.Err??e)(u.issues.map(g=>bs(g,c,ys())));throw Sb(d,r?.callee),d}return u.value},Ch=e=>async(n,s,i,r)=>{const c=i?Object.assign(i,{async:!0}):{async:!0};let u=n._zod.run({value:s,issues:[]},c);if(u instanceof Promise&&(u=await u),u.issues.length){const d=new(r?.Err??e)(u.issues.map(g=>bs(g,c,ys())));throw Sb(d,r?.callee),d}return u.value},Dc=e=>(n,s,i)=>{const r=i?{...i,async:!1}:{async:!1},c=n._zod.run({value:s,issues:[]},r);if(c instanceof Promise)throw new Zi;return c.issues.length?{success:!1,error:new(e??Eb)(c.issues.map(u=>bs(u,r,ys())))}:{success:!0,data:c.value}},UT=Dc(Tb),Rc=e=>async(n,s,i)=>{const r=i?Object.assign(i,{async:!0}):{async:!0};let c=n._zod.run({value:s,issues:[]},r);return c instanceof Promise&&(c=await c),c.issues.length?{success:!1,error:new e(c.issues.map(u=>bs(u,r,ys())))}:{success:!0,data:c.value}},$T=Rc(Tb),HT=e=>(n,s,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return jh(e)(n,s,r)},ZT=e=>(n,s,i)=>jh(e)(n,s,i),FT=e=>async(n,s,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Ch(e)(n,s,r)},GT=e=>async(n,s,i)=>Ch(e)(n,s,i),YT=e=>(n,s,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Dc(e)(n,s,r)},VT=e=>(n,s,i)=>Dc(e)(n,s,i),KT=e=>async(n,s,i)=>{const r=i?Object.assign(i,{direction:"backward"}):{direction:"backward"};return Rc(e)(n,s,r)},WT=e=>async(n,s,i)=>Rc(e)(n,s,i),XT=/^[cC][^\s-]{8,}$/,QT=/^[0-9a-z]+$/,JT=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,eN=/^[0-9a-vA-V]{20}$/,tN=/^[A-Za-z0-9]{27}$/,nN=/^[a-zA-Z0-9_-]{21}$/,aN=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,sN=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,gy=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,iN=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,lN="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function rN(){return new RegExp(lN,"u")}const oN=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,cN=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,uN=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,dN=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,fN=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Nb=/^[A-Za-z0-9_-]*$/,hN=/^\+[1-9]\d{6,14}$/,Mb="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",mN=new RegExp(`^${Mb}$`);function jb(e){const n="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${n}`:e.precision===0?`${n}:[0-5]\\d`:`${n}:[0-5]\\d\\.\\d{${e.precision}}`:`${n}(?::[0-5]\\d(?:\\.\\d+)?)?`}function gN(e){return new RegExp(`^${jb(e)}$`)}function pN(e){const n=jb({precision:e.precision}),s=["Z"];e.local&&s.push(""),e.offset&&s.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const i=`${n}(?:${s.join("|")})`;return new RegExp(`^${Mb}T(?:${i})$`)}const vN=e=>{const n=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${n}$`)},yN=/^-?\d+$/,Cb=/^-?\d+(?:\.\d+)?$/,bN=/^(?:true|false)$/i,xN=/^[^A-Z]*$/,SN=/^[^a-z]*$/,Tn=ne("$ZodCheck",(e,n)=>{var s;e._zod??(e._zod={}),e._zod.def=n,(s=e._zod).onattach??(s.onattach=[])}),Db={number:"number",bigint:"bigint",object:"date"},Rb=ne("$ZodCheckLessThan",(e,n)=>{Tn.init(e,n);const s=Db[typeof n.value];e._zod.onattach.push(i=>{const r=i._zod.bag,c=(n.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;n.value<c&&(n.inclusive?r.maximum=n.value:r.exclusiveMaximum=n.value)}),e._zod.check=i=>{(n.inclusive?i.value<=n.value:i.value<n.value)||i.issues.push({origin:s,code:"too_big",maximum:typeof n.value=="object"?n.value.getTime():n.value,input:i.value,inclusive:n.inclusive,inst:e,continue:!n.abort})}}),kb=ne("$ZodCheckGreaterThan",(e,n)=>{Tn.init(e,n);const s=Db[typeof n.value];e._zod.onattach.push(i=>{const r=i._zod.bag,c=(n.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;n.value>c&&(n.inclusive?r.minimum=n.value:r.exclusiveMinimum=n.value)}),e._zod.check=i=>{(n.inclusive?i.value>=n.value:i.value>n.value)||i.issues.push({origin:s,code:"too_small",minimum:typeof n.value=="object"?n.value.getTime():n.value,input:i.value,inclusive:n.inclusive,inst:e,continue:!n.abort})}}),wN=ne("$ZodCheckMultipleOf",(e,n)=>{Tn.init(e,n),e._zod.onattach.push(s=>{var i;(i=s._zod.bag).multipleOf??(i.multipleOf=n.value)}),e._zod.check=s=>{if(typeof s.value!=typeof n.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof s.value=="bigint"?s.value%n.value===BigInt(0):NT(s.value,n.value)===0)||s.issues.push({origin:typeof s.value,code:"not_multiple_of",divisor:n.value,input:s.value,inst:e,continue:!n.abort})}}),_N=ne("$ZodCheckNumberFormat",(e,n)=>{Tn.init(e,n),n.format=n.format||"float64";const s=n.format?.includes("int"),i=s?"int":"number",[r,c]=RT[n.format];e._zod.onattach.push(u=>{const d=u._zod.bag;d.format=n.format,d.minimum=r,d.maximum=c,s&&(d.pattern=yN)}),e._zod.check=u=>{const d=u.value;if(s){if(!Number.isInteger(d)){u.issues.push({expected:i,format:n.format,code:"invalid_type",continue:!1,input:d,inst:e});return}if(!Number.isSafeInteger(d)){d>0?u.issues.push({input:d,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,inclusive:!0,continue:!n.abort}):u.issues.push({input:d,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:i,inclusive:!0,continue:!n.abort});return}}d<r&&u.issues.push({origin:"number",input:d,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!n.abort}),d>c&&u.issues.push({origin:"number",input:d,code:"too_big",maximum:c,inclusive:!0,inst:e,continue:!n.abort})}}),EN=ne("$ZodCheckMaxLength",(e,n)=>{var s;Tn.init(e,n),(s=e._zod.def).when??(s.when=i=>{const r=i.value;return!Th(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag.maximum??Number.POSITIVE_INFINITY;n.maximum<r&&(i._zod.bag.maximum=n.maximum)}),e._zod.check=i=>{const r=i.value;if(r.length<=n.maximum)return;const u=Mh(r);i.issues.push({origin:u,code:"too_big",maximum:n.maximum,inclusive:!0,input:r,inst:e,continue:!n.abort})}}),TN=ne("$ZodCheckMinLength",(e,n)=>{var s;Tn.init(e,n),(s=e._zod.def).when??(s.when=i=>{const r=i.value;return!Th(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag.minimum??Number.NEGATIVE_INFINITY;n.minimum>r&&(i._zod.bag.minimum=n.minimum)}),e._zod.check=i=>{const r=i.value;if(r.length>=n.minimum)return;const u=Mh(r);i.issues.push({origin:u,code:"too_small",minimum:n.minimum,inclusive:!0,input:r,inst:e,continue:!n.abort})}}),NN=ne("$ZodCheckLengthEquals",(e,n)=>{var s;Tn.init(e,n),(s=e._zod.def).when??(s.when=i=>{const r=i.value;return!Th(r)&&r.length!==void 0}),e._zod.onattach.push(i=>{const r=i._zod.bag;r.minimum=n.length,r.maximum=n.length,r.length=n.length}),e._zod.check=i=>{const r=i.value,c=r.length;if(c===n.length)return;const u=Mh(r),d=c>n.length;i.issues.push({origin:u,...d?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},inclusive:!0,exact:!0,input:i.value,inst:e,continue:!n.abort})}}),kc=ne("$ZodCheckStringFormat",(e,n)=>{var s,i;Tn.init(e,n),e._zod.onattach.push(r=>{const c=r._zod.bag;c.format=n.format,n.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(n.pattern))}),n.pattern?(s=e._zod).check??(s.check=r=>{n.pattern.lastIndex=0,!n.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:n.format,input:r.value,...n.pattern?{pattern:n.pattern.toString()}:{},inst:e,continue:!n.abort})}):(i=e._zod).check??(i.check=()=>{})}),MN=ne("$ZodCheckRegex",(e,n)=>{kc.init(e,n),e._zod.check=s=>{n.pattern.lastIndex=0,!n.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:"regex",input:s.value,pattern:n.pattern.toString(),inst:e,continue:!n.abort})}}),jN=ne("$ZodCheckLowerCase",(e,n)=>{n.pattern??(n.pattern=xN),kc.init(e,n)}),CN=ne("$ZodCheckUpperCase",(e,n)=>{n.pattern??(n.pattern=SN),kc.init(e,n)}),DN=ne("$ZodCheckIncludes",(e,n)=>{Tn.init(e,n);const s=Cc(n.includes),i=new RegExp(typeof n.position=="number"?`^.{${n.position}}${s}`:s);n.pattern=i,e._zod.onattach.push(r=>{const c=r._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(i)}),e._zod.check=r=>{r.value.includes(n.includes,n.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:n.includes,input:r.value,inst:e,continue:!n.abort})}}),RN=ne("$ZodCheckStartsWith",(e,n)=>{Tn.init(e,n);const s=new RegExp(`^${Cc(n.prefix)}.*`);n.pattern??(n.pattern=s),e._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(s)}),e._zod.check=i=>{i.value.startsWith(n.prefix)||i.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:n.prefix,input:i.value,inst:e,continue:!n.abort})}}),kN=ne("$ZodCheckEndsWith",(e,n)=>{Tn.init(e,n);const s=new RegExp(`.*${Cc(n.suffix)}$`);n.pattern??(n.pattern=s),e._zod.onattach.push(i=>{const r=i._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(s)}),e._zod.check=i=>{i.value.endsWith(n.suffix)||i.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:n.suffix,input:i.value,inst:e,continue:!n.abort})}}),AN=ne("$ZodCheckOverwrite",(e,n)=>{Tn.init(e,n),e._zod.check=s=>{s.value=n.tx(s.value)}});class ON{constructor(n=[]){this.content=[],this.indent=0,this&&(this.args=n)}indented(n){this.indent+=1,n(this),this.indent-=1}write(n){if(typeof n=="function"){n(this,{execution:"sync"}),n(this,{execution:"async"});return}const i=n.split(`
`).filter(u=>u),r=Math.min(...i.map(u=>u.length-u.trimStart().length)),c=i.map(u=>u.slice(r)).map(u=>" ".repeat(this.indent*2)+u);for(const u of c)this.content.push(u)}compile(){const n=Function,s=this?.args,r=[...(this?.content??[""]).map(c=>`  ${c}`)];return new n(...s,r.join(`
`))}}const zN={major:4,minor:3,patch:6},Ct=ne("$ZodType",(e,n)=>{var s;e??(e={}),e._zod.def=n,e._zod.bag=e._zod.bag||{},e._zod.version=zN;const i=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&i.unshift(e);for(const r of i)for(const c of r._zod.onattach)c(e);if(i.length===0)(s=e._zod).deferred??(s.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const r=(u,d,g)=>{let p=qi(u),y;for(const v of d){if(v._zod.def.when){if(!v._zod.def.when(u))continue}else if(p)continue;const b=u.issues.length,S=v._zod.check(u);if(S instanceof Promise&&g?.async===!1)throw new Zi;if(y||S instanceof Promise)y=(y??Promise.resolve()).then(async()=>{await S,u.issues.length!==b&&(p||(p=qi(u,b)))});else{if(u.issues.length===b)continue;p||(p=qi(u,b))}}return y?y.then(()=>u):u},c=(u,d,g)=>{if(qi(u))return u.aborted=!0,u;const p=r(d,i,g);if(p instanceof Promise){if(g.async===!1)throw new Zi;return p.then(y=>e._zod.parse(y,g))}return e._zod.parse(p,g)};e._zod.run=(u,d)=>{if(d.skipChecks)return e._zod.parse(u,d);if(d.direction==="backward"){const p=e._zod.parse({value:u.value,issues:[]},{...d,skipChecks:!0});return p instanceof Promise?p.then(y=>c(y,u,d)):c(p,u,d)}const g=e._zod.parse(u,d);if(g instanceof Promise){if(d.async===!1)throw new Zi;return g.then(p=>r(p,i,d))}return r(g,i,d)}}st(e,"~standard",()=>({validate:r=>{try{const c=UT(e,r);return c.success?{value:c.data}:{issues:c.error?.issues}}catch{return $T(e,r).then(u=>u.success?{value:u.data}:{issues:u.error?.issues})}},vendor:"zod",version:1}))}),Dh=ne("$ZodString",(e,n)=>{Ct.init(e,n),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??vN(e._zod.bag),e._zod.parse=(s,i)=>{if(n.coerce)try{s.value=String(s.value)}catch{}return typeof s.value=="string"||s.issues.push({expected:"string",code:"invalid_type",input:s.value,inst:e}),s}}),_t=ne("$ZodStringFormat",(e,n)=>{kc.init(e,n),Dh.init(e,n)}),PN=ne("$ZodGUID",(e,n)=>{n.pattern??(n.pattern=sN),_t.init(e,n)}),IN=ne("$ZodUUID",(e,n)=>{if(n.version){const i={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[n.version];if(i===void 0)throw new Error(`Invalid UUID version: "${n.version}"`);n.pattern??(n.pattern=gy(i))}else n.pattern??(n.pattern=gy());_t.init(e,n)}),BN=ne("$ZodEmail",(e,n)=>{n.pattern??(n.pattern=iN),_t.init(e,n)}),LN=ne("$ZodURL",(e,n)=>{_t.init(e,n),e._zod.check=s=>{try{const i=s.value.trim(),r=new URL(i);n.hostname&&(n.hostname.lastIndex=0,n.hostname.test(r.hostname)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:n.hostname.source,input:s.value,inst:e,continue:!n.abort})),n.protocol&&(n.protocol.lastIndex=0,n.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||s.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:n.protocol.source,input:s.value,inst:e,continue:!n.abort})),n.normalize?s.value=r.href:s.value=i;return}catch{s.issues.push({code:"invalid_format",format:"url",input:s.value,inst:e,continue:!n.abort})}}}),qN=ne("$ZodEmoji",(e,n)=>{n.pattern??(n.pattern=rN()),_t.init(e,n)}),UN=ne("$ZodNanoID",(e,n)=>{n.pattern??(n.pattern=nN),_t.init(e,n)}),$N=ne("$ZodCUID",(e,n)=>{n.pattern??(n.pattern=XT),_t.init(e,n)}),HN=ne("$ZodCUID2",(e,n)=>{n.pattern??(n.pattern=QT),_t.init(e,n)}),ZN=ne("$ZodULID",(e,n)=>{n.pattern??(n.pattern=JT),_t.init(e,n)}),FN=ne("$ZodXID",(e,n)=>{n.pattern??(n.pattern=eN),_t.init(e,n)}),GN=ne("$ZodKSUID",(e,n)=>{n.pattern??(n.pattern=tN),_t.init(e,n)}),YN=ne("$ZodISODateTime",(e,n)=>{n.pattern??(n.pattern=pN(n)),_t.init(e,n)}),VN=ne("$ZodISODate",(e,n)=>{n.pattern??(n.pattern=mN),_t.init(e,n)}),KN=ne("$ZodISOTime",(e,n)=>{n.pattern??(n.pattern=gN(n)),_t.init(e,n)}),WN=ne("$ZodISODuration",(e,n)=>{n.pattern??(n.pattern=aN),_t.init(e,n)}),XN=ne("$ZodIPv4",(e,n)=>{n.pattern??(n.pattern=oN),_t.init(e,n),e._zod.bag.format="ipv4"}),QN=ne("$ZodIPv6",(e,n)=>{n.pattern??(n.pattern=cN),_t.init(e,n),e._zod.bag.format="ipv6",e._zod.check=s=>{try{new URL(`http://[${s.value}]`)}catch{s.issues.push({code:"invalid_format",format:"ipv6",input:s.value,inst:e,continue:!n.abort})}}}),JN=ne("$ZodCIDRv4",(e,n)=>{n.pattern??(n.pattern=uN),_t.init(e,n)}),eM=ne("$ZodCIDRv6",(e,n)=>{n.pattern??(n.pattern=dN),_t.init(e,n),e._zod.check=s=>{const i=s.value.split("/");try{if(i.length!==2)throw new Error;const[r,c]=i;if(!c)throw new Error;const u=Number(c);if(`${u}`!==c)throw new Error;if(u<0||u>128)throw new Error;new URL(`http://[${r}]`)}catch{s.issues.push({code:"invalid_format",format:"cidrv6",input:s.value,inst:e,continue:!n.abort})}}});function Ab(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const tM=ne("$ZodBase64",(e,n)=>{n.pattern??(n.pattern=fN),_t.init(e,n),e._zod.bag.contentEncoding="base64",e._zod.check=s=>{Ab(s.value)||s.issues.push({code:"invalid_format",format:"base64",input:s.value,inst:e,continue:!n.abort})}});function nM(e){if(!Nb.test(e))return!1;const n=e.replace(/[-_]/g,i=>i==="-"?"+":"/"),s=n.padEnd(Math.ceil(n.length/4)*4,"=");return Ab(s)}const aM=ne("$ZodBase64URL",(e,n)=>{n.pattern??(n.pattern=Nb),_t.init(e,n),e._zod.bag.contentEncoding="base64url",e._zod.check=s=>{nM(s.value)||s.issues.push({code:"invalid_format",format:"base64url",input:s.value,inst:e,continue:!n.abort})}}),sM=ne("$ZodE164",(e,n)=>{n.pattern??(n.pattern=hN),_t.init(e,n)});function iM(e,n=null){try{const s=e.split(".");if(s.length!==3)return!1;const[i]=s;if(!i)return!1;const r=JSON.parse(atob(i));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||n&&(!("alg"in r)||r.alg!==n))}catch{return!1}}const lM=ne("$ZodJWT",(e,n)=>{_t.init(e,n),e._zod.check=s=>{iM(s.value,n.alg)||s.issues.push({code:"invalid_format",format:"jwt",input:s.value,inst:e,continue:!n.abort})}}),Ob=ne("$ZodNumber",(e,n)=>{Ct.init(e,n),e._zod.pattern=e._zod.bag.pattern??Cb,e._zod.parse=(s,i)=>{if(n.coerce)try{s.value=Number(s.value)}catch{}const r=s.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return s;const c=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return s.issues.push({expected:"number",code:"invalid_type",input:r,inst:e,...c?{received:c}:{}}),s}}),rM=ne("$ZodNumberFormat",(e,n)=>{_N.init(e,n),Ob.init(e,n)}),oM=ne("$ZodBoolean",(e,n)=>{Ct.init(e,n),e._zod.pattern=bN,e._zod.parse=(s,i)=>{if(n.coerce)try{s.value=!!s.value}catch{}const r=s.value;return typeof r=="boolean"||s.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:e}),s}}),cM=ne("$ZodUnknown",(e,n)=>{Ct.init(e,n),e._zod.parse=s=>s}),uM=ne("$ZodNever",(e,n)=>{Ct.init(e,n),e._zod.parse=(s,i)=>(s.issues.push({expected:"never",code:"invalid_type",input:s.value,inst:e}),s)});function py(e,n,s){e.issues.length&&n.issues.push(...Ui(s,e.issues)),n.value[s]=e.value}const dM=ne("$ZodArray",(e,n)=>{Ct.init(e,n),e._zod.parse=(s,i)=>{const r=s.value;if(!Array.isArray(r))return s.issues.push({expected:"array",code:"invalid_type",input:r,inst:e}),s;s.value=Array(r.length);const c=[];for(let u=0;u<r.length;u++){const d=r[u],g=n.element._zod.run({value:d,issues:[]},i);g instanceof Promise?c.push(g.then(p=>py(p,s,u))):py(g,s,u)}return c.length?Promise.all(c).then(()=>s):s}});function dc(e,n,s,i,r){if(e.issues.length){if(r&&!(s in i))return;n.issues.push(...Ui(s,e.issues))}e.value===void 0?s in i&&(n.value[s]=void 0):n.value[s]=e.value}function zb(e){const n=Object.keys(e.shape);for(const i of n)if(!e.shape?.[i]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${i}": expected a Zod schema`);const s=DT(e.shape);return{...e,keys:n,keySet:new Set(n),numKeys:n.length,optionalKeys:new Set(s)}}function Pb(e,n,s,i,r,c){const u=[],d=r.keySet,g=r.catchall._zod,p=g.def.type,y=g.optout==="optional";for(const v in n){if(d.has(v))continue;if(p==="never"){u.push(v);continue}const b=g.run({value:n[v],issues:[]},i);b instanceof Promise?e.push(b.then(S=>dc(S,s,v,n,y))):dc(b,s,v,n,y)}return u.length&&s.issues.push({code:"unrecognized_keys",keys:u,input:n,inst:c}),e.length?Promise.all(e).then(()=>s):s}const fM=ne("$ZodObject",(e,n)=>{if(Ct.init(e,n),!Object.getOwnPropertyDescriptor(n,"shape")?.get){const d=n.shape;Object.defineProperty(n,"shape",{get:()=>{const g={...d};return Object.defineProperty(n,"shape",{value:g}),g}})}const i=Eh(()=>zb(n));st(e._zod,"propValues",()=>{const d=n.shape,g={};for(const p in d){const y=d[p]._zod;if(y.values){g[p]??(g[p]=new Set);for(const v of y.values)g[p].add(v)}}return g});const r=uc,c=n.catchall;let u;e._zod.parse=(d,g)=>{u??(u=i.value);const p=d.value;if(!r(p))return d.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),d;d.value={};const y=[],v=u.shape;for(const b of u.keys){const S=v[b],E=S._zod.optout==="optional",T=S._zod.run({value:p[b],issues:[]},g);T instanceof Promise?y.push(T.then(C=>dc(C,d,b,p,E))):dc(T,d,b,p,E)}return c?Pb(y,p,d,g,i.value,e):y.length?Promise.all(y).then(()=>d):d}}),hM=ne("$ZodObjectJIT",(e,n)=>{fM.init(e,n);const s=e._zod.parse,i=Eh(()=>zb(n)),r=b=>{const S=new ON(["shape","payload","ctx"]),E=i.value,T=z=>{const B=my(z);return`shape[${B}]._zod.run({ value: input[${B}], issues: [] }, ctx)`};S.write("const input = payload.value;");const C=Object.create(null);let k=0;for(const z of E.keys)C[z]=`key_${k++}`;S.write("const newResult = {};");for(const z of E.keys){const B=C[z],U=my(z),j=b[z]?._zod?.optout==="optional";S.write(`const ${B} = ${T(z)};`),j?S.write(`
        if (${B}.issues.length) {
          if (${U} in input) {
            payload.issues = payload.issues.concat(${B}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${U}, ...iss.path] : [${U}]
            })));
          }
        }
        
        if (${B}.value === undefined) {
          if (${U} in input) {
            newResult[${U}] = undefined;
          }
        } else {
          newResult[${U}] = ${B}.value;
        }
        
      `):S.write(`
        if (${B}.issues.length) {
          payload.issues = payload.issues.concat(${B}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${U}, ...iss.path] : [${U}]
          })));
        }
        
        if (${B}.value === undefined) {
          if (${U} in input) {
            newResult[${U}] = undefined;
          }
        } else {
          newResult[${U}] = ${B}.value;
        }
        
      `)}S.write("payload.value = newResult;"),S.write("return payload;");const R=S.compile();return(z,B)=>R(b,z,B)};let c;const u=uc,d=!bb.jitless,p=d&&jT.value,y=n.catchall;let v;e._zod.parse=(b,S)=>{v??(v=i.value);const E=b.value;return u(E)?d&&p&&S?.async===!1&&S.jitless!==!0?(c||(c=r(n.shape)),b=c(b,S),y?Pb([],E,b,S,v,e):b):s(b,S):(b.issues.push({expected:"object",code:"invalid_type",input:E,inst:e}),b)}});function vy(e,n,s,i){for(const c of e)if(c.issues.length===0)return n.value=c.value,n;const r=e.filter(c=>!qi(c));return r.length===1?(n.value=r[0].value,r[0]):(n.issues.push({code:"invalid_union",input:n.value,inst:s,errors:e.map(c=>c.issues.map(u=>bs(u,i,ys())))}),n)}const mM=ne("$ZodUnion",(e,n)=>{Ct.init(e,n),st(e._zod,"optin",()=>n.options.some(r=>r._zod.optin==="optional")?"optional":void 0),st(e._zod,"optout",()=>n.options.some(r=>r._zod.optout==="optional")?"optional":void 0),st(e._zod,"values",()=>{if(n.options.every(r=>r._zod.values))return new Set(n.options.flatMap(r=>Array.from(r._zod.values)))}),st(e._zod,"pattern",()=>{if(n.options.every(r=>r._zod.pattern)){const r=n.options.map(c=>c._zod.pattern);return new RegExp(`^(${r.map(c=>Nh(c.source)).join("|")})$`)}});const s=n.options.length===1,i=n.options[0]._zod.run;e._zod.parse=(r,c)=>{if(s)return i(r,c);let u=!1;const d=[];for(const g of n.options){const p=g._zod.run({value:r.value,issues:[]},c);if(p instanceof Promise)d.push(p),u=!0;else{if(p.issues.length===0)return p;d.push(p)}}return u?Promise.all(d).then(g=>vy(g,r,e,c)):vy(d,r,e,c)}}),gM=ne("$ZodIntersection",(e,n)=>{Ct.init(e,n),e._zod.parse=(s,i)=>{const r=s.value,c=n.left._zod.run({value:r,issues:[]},i),u=n.right._zod.run({value:r,issues:[]},i);return c instanceof Promise||u instanceof Promise?Promise.all([c,u]).then(([g,p])=>yy(s,g,p)):yy(s,c,u)}});function Zf(e,n){if(e===n)return{valid:!0,data:e};if(e instanceof Date&&n instanceof Date&&+e==+n)return{valid:!0,data:e};if(Wi(e)&&Wi(n)){const s=Object.keys(n),i=Object.keys(e).filter(c=>s.indexOf(c)!==-1),r={...e,...n};for(const c of i){const u=Zf(e[c],n[c]);if(!u.valid)return{valid:!1,mergeErrorPath:[c,...u.mergeErrorPath]};r[c]=u.data}return{valid:!0,data:r}}if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return{valid:!1,mergeErrorPath:[]};const s=[];for(let i=0;i<e.length;i++){const r=e[i],c=n[i],u=Zf(r,c);if(!u.valid)return{valid:!1,mergeErrorPath:[i,...u.mergeErrorPath]};s.push(u.data)}return{valid:!0,data:s}}return{valid:!1,mergeErrorPath:[]}}function yy(e,n,s){const i=new Map;let r;for(const d of n.issues)if(d.code==="unrecognized_keys"){r??(r=d);for(const g of d.keys)i.has(g)||i.set(g,{}),i.get(g).l=!0}else e.issues.push(d);for(const d of s.issues)if(d.code==="unrecognized_keys")for(const g of d.keys)i.has(g)||i.set(g,{}),i.get(g).r=!0;else e.issues.push(d);const c=[...i].filter(([,d])=>d.l&&d.r).map(([d])=>d);if(c.length&&r&&e.issues.push({...r,keys:c}),qi(e))return e;const u=Zf(n.value,s.value);if(!u.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(u.mergeErrorPath)}`);return e.value=u.data,e}const pM=ne("$ZodRecord",(e,n)=>{Ct.init(e,n),e._zod.parse=(s,i)=>{const r=s.value;if(!Wi(r))return s.issues.push({expected:"record",code:"invalid_type",input:r,inst:e}),s;const c=[],u=n.keyType._zod.values;if(u){s.value={};const d=new Set;for(const p of u)if(typeof p=="string"||typeof p=="number"||typeof p=="symbol"){d.add(typeof p=="number"?p.toString():p);const y=n.valueType._zod.run({value:r[p],issues:[]},i);y instanceof Promise?c.push(y.then(v=>{v.issues.length&&s.issues.push(...Ui(p,v.issues)),s.value[p]=v.value})):(y.issues.length&&s.issues.push(...Ui(p,y.issues)),s.value[p]=y.value)}let g;for(const p in r)d.has(p)||(g=g??[],g.push(p));g&&g.length>0&&s.issues.push({code:"unrecognized_keys",input:r,inst:e,keys:g})}else{s.value={};for(const d of Reflect.ownKeys(r)){if(d==="__proto__")continue;let g=n.keyType._zod.run({value:d,issues:[]},i);if(g instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof d=="string"&&Cb.test(d)&&g.issues.length){const v=n.keyType._zod.run({value:Number(d),issues:[]},i);if(v instanceof Promise)throw new Error("Async schemas not supported in object keys currently");v.issues.length===0&&(g=v)}if(g.issues.length){n.mode==="loose"?s.value[d]=r[d]:s.issues.push({code:"invalid_key",origin:"record",issues:g.issues.map(v=>bs(v,i,ys())),input:d,path:[d],inst:e});continue}const y=n.valueType._zod.run({value:r[d],issues:[]},i);y instanceof Promise?c.push(y.then(v=>{v.issues.length&&s.issues.push(...Ui(d,v.issues)),s.value[g.value]=v.value})):(y.issues.length&&s.issues.push(...Ui(d,y.issues)),s.value[g.value]=y.value)}}return c.length?Promise.all(c).then(()=>s):s}}),vM=ne("$ZodEnum",(e,n)=>{Ct.init(e,n);const s=xb(n.entries),i=new Set(s);e._zod.values=i,e._zod.pattern=new RegExp(`^(${s.filter(r=>CT.has(typeof r)).map(r=>typeof r=="string"?Cc(r):r.toString()).join("|")})$`),e._zod.parse=(r,c)=>{const u=r.value;return i.has(u)||r.issues.push({code:"invalid_value",values:s,input:u,inst:e}),r}}),yM=ne("$ZodTransform",(e,n)=>{Ct.init(e,n),e._zod.parse=(s,i)=>{if(i.direction==="backward")throw new yb(e.constructor.name);const r=n.transform(s.value,s);if(i.async)return(r instanceof Promise?r:Promise.resolve(r)).then(u=>(s.value=u,s));if(r instanceof Promise)throw new Zi;return s.value=r,s}});function by(e,n){return e.issues.length&&n===void 0?{issues:[],value:void 0}:e}const Ib=ne("$ZodOptional",(e,n)=>{Ct.init(e,n),e._zod.optin="optional",e._zod.optout="optional",st(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,void 0]):void 0),st(e._zod,"pattern",()=>{const s=n.innerType._zod.pattern;return s?new RegExp(`^(${Nh(s.source)})?$`):void 0}),e._zod.parse=(s,i)=>{if(n.innerType._zod.optin==="optional"){const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(c=>by(c,s.value)):by(r,s.value)}return s.value===void 0?s:n.innerType._zod.run(s,i)}}),bM=ne("$ZodExactOptional",(e,n)=>{Ib.init(e,n),st(e._zod,"values",()=>n.innerType._zod.values),st(e._zod,"pattern",()=>n.innerType._zod.pattern),e._zod.parse=(s,i)=>n.innerType._zod.run(s,i)}),xM=ne("$ZodNullable",(e,n)=>{Ct.init(e,n),st(e._zod,"optin",()=>n.innerType._zod.optin),st(e._zod,"optout",()=>n.innerType._zod.optout),st(e._zod,"pattern",()=>{const s=n.innerType._zod.pattern;return s?new RegExp(`^(${Nh(s.source)}|null)$`):void 0}),st(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,null]):void 0),e._zod.parse=(s,i)=>s.value===null?s:n.innerType._zod.run(s,i)}),SM=ne("$ZodDefault",(e,n)=>{Ct.init(e,n),e._zod.optin="optional",st(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(s,i)=>{if(i.direction==="backward")return n.innerType._zod.run(s,i);if(s.value===void 0)return s.value=n.defaultValue,s;const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(c=>xy(c,n)):xy(r,n)}});function xy(e,n){return e.value===void 0&&(e.value=n.defaultValue),e}const wM=ne("$ZodPrefault",(e,n)=>{Ct.init(e,n),e._zod.optin="optional",st(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(s,i)=>(i.direction==="backward"||s.value===void 0&&(s.value=n.defaultValue),n.innerType._zod.run(s,i))}),_M=ne("$ZodNonOptional",(e,n)=>{Ct.init(e,n),st(e._zod,"values",()=>{const s=n.innerType._zod.values;return s?new Set([...s].filter(i=>i!==void 0)):void 0}),e._zod.parse=(s,i)=>{const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(c=>Sy(c,e)):Sy(r,e)}});function Sy(e,n){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:n}),e}const EM=ne("$ZodCatch",(e,n)=>{Ct.init(e,n),st(e._zod,"optin",()=>n.innerType._zod.optin),st(e._zod,"optout",()=>n.innerType._zod.optout),st(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(s,i)=>{if(i.direction==="backward")return n.innerType._zod.run(s,i);const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(c=>(s.value=c.value,c.issues.length&&(s.value=n.catchValue({...s,error:{issues:c.issues.map(u=>bs(u,i,ys()))},input:s.value}),s.issues=[]),s)):(s.value=r.value,r.issues.length&&(s.value=n.catchValue({...s,error:{issues:r.issues.map(c=>bs(c,i,ys()))},input:s.value}),s.issues=[]),s)}}),TM=ne("$ZodPipe",(e,n)=>{Ct.init(e,n),st(e._zod,"values",()=>n.in._zod.values),st(e._zod,"optin",()=>n.in._zod.optin),st(e._zod,"optout",()=>n.out._zod.optout),st(e._zod,"propValues",()=>n.in._zod.propValues),e._zod.parse=(s,i)=>{if(i.direction==="backward"){const c=n.out._zod.run(s,i);return c instanceof Promise?c.then(u=>zo(u,n.in,i)):zo(c,n.in,i)}const r=n.in._zod.run(s,i);return r instanceof Promise?r.then(c=>zo(c,n.out,i)):zo(r,n.out,i)}});function zo(e,n,s){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:e.value,issues:e.issues},s)}const NM=ne("$ZodReadonly",(e,n)=>{Ct.init(e,n),st(e._zod,"propValues",()=>n.innerType._zod.propValues),st(e._zod,"values",()=>n.innerType._zod.values),st(e._zod,"optin",()=>n.innerType?._zod?.optin),st(e._zod,"optout",()=>n.innerType?._zod?.optout),e._zod.parse=(s,i)=>{if(i.direction==="backward")return n.innerType._zod.run(s,i);const r=n.innerType._zod.run(s,i);return r instanceof Promise?r.then(wy):wy(r)}});function wy(e){return e.value=Object.freeze(e.value),e}const MM=ne("$ZodCustom",(e,n)=>{Tn.init(e,n),Ct.init(e,n),e._zod.parse=(s,i)=>s,e._zod.check=s=>{const i=s.value,r=n.fn(i);if(r instanceof Promise)return r.then(c=>_y(c,s,i,e));_y(r,s,i,e)}});function _y(e,n,s,i){if(!e){const r={code:"custom",input:s,inst:i,path:[...i._zod.def.path??[]],continue:!i._zod.def.abort};i._zod.def.params&&(r.params=i._zod.def.params),n.issues.push(lr(r))}}var Ey;class jM{constructor(){this._map=new WeakMap,this._idmap=new Map}add(n,...s){const i=s[0];return this._map.set(n,i),i&&typeof i=="object"&&"id"in i&&this._idmap.set(i.id,n),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(n){const s=this._map.get(n);return s&&typeof s=="object"&&"id"in s&&this._idmap.delete(s.id),this._map.delete(n),this}get(n){const s=n._zod.parent;if(s){const i={...this.get(s)??{}};delete i.id;const r={...i,...this._map.get(n)};return Object.keys(r).length?r:void 0}return this._map.get(n)}has(n){return this._map.has(n)}}function CM(){return new jM}(Ey=globalThis).__zod_globalRegistry??(Ey.__zod_globalRegistry=CM());const Wl=globalThis.__zod_globalRegistry;function DM(e,n){return new e({type:"string",...Se(n)})}function RM(e,n){return new e({type:"string",format:"email",check:"string_format",abort:!1,...Se(n)})}function Ty(e,n){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...Se(n)})}function kM(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...Se(n)})}function AM(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...Se(n)})}function OM(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...Se(n)})}function zM(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...Se(n)})}function PM(e,n){return new e({type:"string",format:"url",check:"string_format",abort:!1,...Se(n)})}function IM(e,n){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...Se(n)})}function BM(e,n){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...Se(n)})}function LM(e,n){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...Se(n)})}function qM(e,n){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...Se(n)})}function UM(e,n){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...Se(n)})}function $M(e,n){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...Se(n)})}function HM(e,n){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...Se(n)})}function ZM(e,n){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...Se(n)})}function FM(e,n){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...Se(n)})}function GM(e,n){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...Se(n)})}function YM(e,n){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...Se(n)})}function VM(e,n){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...Se(n)})}function KM(e,n){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...Se(n)})}function WM(e,n){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...Se(n)})}function XM(e,n){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...Se(n)})}function QM(e,n){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...Se(n)})}function JM(e,n){return new e({type:"string",format:"date",check:"string_format",...Se(n)})}function e2(e,n){return new e({type:"string",format:"time",check:"string_format",precision:null,...Se(n)})}function t2(e,n){return new e({type:"string",format:"duration",check:"string_format",...Se(n)})}function n2(e,n){return new e({type:"number",checks:[],...Se(n)})}function a2(e,n){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...Se(n)})}function s2(e,n){return new e({type:"boolean",...Se(n)})}function i2(e){return new e({type:"unknown"})}function l2(e,n){return new e({type:"never",...Se(n)})}function Ny(e,n){return new Rb({check:"less_than",...Se(n),value:e,inclusive:!1})}function df(e,n){return new Rb({check:"less_than",...Se(n),value:e,inclusive:!0})}function My(e,n){return new kb({check:"greater_than",...Se(n),value:e,inclusive:!1})}function ff(e,n){return new kb({check:"greater_than",...Se(n),value:e,inclusive:!0})}function jy(e,n){return new wN({check:"multiple_of",...Se(n),value:e})}function Bb(e,n){return new EN({check:"max_length",...Se(n),maximum:e})}function fc(e,n){return new TN({check:"min_length",...Se(n),minimum:e})}function Lb(e,n){return new NN({check:"length_equals",...Se(n),length:e})}function r2(e,n){return new MN({check:"string_format",format:"regex",...Se(n),pattern:e})}function o2(e){return new jN({check:"string_format",format:"lowercase",...Se(e)})}function c2(e){return new CN({check:"string_format",format:"uppercase",...Se(e)})}function u2(e,n){return new DN({check:"string_format",format:"includes",...Se(n),includes:e})}function d2(e,n){return new RN({check:"string_format",format:"starts_with",...Se(n),prefix:e})}function f2(e,n){return new kN({check:"string_format",format:"ends_with",...Se(n),suffix:e})}function el(e){return new AN({check:"overwrite",tx:e})}function h2(e){return el(n=>n.normalize(e))}function m2(){return el(e=>e.trim())}function g2(){return el(e=>e.toLowerCase())}function p2(){return el(e=>e.toUpperCase())}function v2(){return el(e=>MT(e))}function y2(e,n,s){return new e({type:"array",element:n,...Se(s)})}function b2(e,n,s){return new e({type:"custom",check:"custom",fn:n,...Se(s)})}function x2(e){const n=S2(s=>(s.addIssue=i=>{if(typeof i=="string")s.issues.push(lr(i,s.value,n._zod.def));else{const r=i;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=s.value),r.inst??(r.inst=n),r.continue??(r.continue=!n._zod.def.abort),s.issues.push(lr(r))}},e(s.value,s)));return n}function S2(e,n){const s=new Tn({check:"custom",...Se(n)});return s._zod.check=e,s}function qb(e){let n=e?.target??"draft-2020-12";return n==="draft-4"&&(n="draft-04"),n==="draft-7"&&(n="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??Wl,target:n,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function $t(e,n,s={path:[],schemaPath:[]}){var i;const r=e._zod.def,c=n.seen.get(e);if(c)return c.count++,s.schemaPath.includes(e)&&(c.cycle=s.path),c.schema;const u={schema:{},count:1,cycle:void 0,path:s.path};n.seen.set(e,u);const d=e._zod.toJSONSchema?.();if(d)u.schema=d;else{const y={...s,schemaPath:[...s.schemaPath,e],path:s.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(n,u.schema,y);else{const b=u.schema,S=n.processors[r.type];if(!S)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${r.type}`);S(e,n,b,y)}const v=e._zod.parent;v&&(u.ref||(u.ref=v),$t(v,n,y),n.seen.get(v).isParent=!0)}const g=n.metadataRegistry.get(e);return g&&Object.assign(u.schema,g),n.io==="input"&&pn(e)&&(delete u.schema.examples,delete u.schema.default),n.io==="input"&&u.schema._prefault&&((i=u.schema).default??(i.default=u.schema._prefault)),delete u.schema._prefault,n.seen.get(e).schema}function Ub(e,n){const s=e.seen.get(n);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=new Map;for(const u of e.seen.entries()){const d=e.metadataRegistry.get(u[0])?.id;if(d){const g=i.get(d);if(g&&g!==u[0])throw new Error(`Duplicate schema id "${d}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);i.set(d,u[0])}}const r=u=>{const d=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const v=e.external.registry.get(u[0])?.id,b=e.external.uri??(E=>E);if(v)return{ref:b(v)};const S=u[1].defId??u[1].schema.id??`schema${e.counter++}`;return u[1].defId=S,{defId:S,ref:`${b("__shared")}#/${d}/${S}`}}if(u[1]===s)return{ref:"#"};const p=`#/${d}/`,y=u[1].schema.id??`__schema${e.counter++}`;return{defId:y,ref:p+y}},c=u=>{if(u[1].schema.$ref)return;const d=u[1],{ref:g,defId:p}=r(u);d.def={...d.schema},p&&(d.defId=p);const y=d.schema;for(const v in y)delete y[v];y.$ref=g};if(e.cycles==="throw")for(const u of e.seen.entries()){const d=u[1];if(d.cycle)throw new Error(`Cycle detected: #/${d.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const u of e.seen.entries()){const d=u[1];if(n===u[0]){c(u);continue}if(e.external){const p=e.external.registry.get(u[0])?.id;if(n!==u[0]&&p){c(u);continue}}if(e.metadataRegistry.get(u[0])?.id){c(u);continue}if(d.cycle){c(u);continue}if(d.count>1&&e.reused==="ref"){c(u);continue}}}function $b(e,n){const s=e.seen.get(n);if(!s)throw new Error("Unprocessed schema. This is a bug in Zod.");const i=u=>{const d=e.seen.get(u);if(d.ref===null)return;const g=d.def??d.schema,p={...g},y=d.ref;if(d.ref=null,y){i(y);const b=e.seen.get(y),S=b.schema;if(S.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(g.allOf=g.allOf??[],g.allOf.push(S)):Object.assign(g,S),Object.assign(g,p),u._zod.parent===y)for(const T in g)T==="$ref"||T==="allOf"||T in p||delete g[T];if(S.$ref&&b.def)for(const T in g)T==="$ref"||T==="allOf"||T in b.def&&JSON.stringify(g[T])===JSON.stringify(b.def[T])&&delete g[T]}const v=u._zod.parent;if(v&&v!==y){i(v);const b=e.seen.get(v);if(b?.schema.$ref&&(g.$ref=b.schema.$ref,b.def))for(const S in g)S==="$ref"||S==="allOf"||S in b.def&&JSON.stringify(g[S])===JSON.stringify(b.def[S])&&delete g[S]}e.override({zodSchema:u,jsonSchema:g,path:d.path??[]})};for(const u of[...e.seen.entries()].reverse())i(u[0]);const r={};if(e.target==="draft-2020-12"?r.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?r.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?r.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const u=e.external.registry.get(n)?.id;if(!u)throw new Error("Schema is missing an `id` property");r.$id=e.external.uri(u)}Object.assign(r,s.def??s.schema);const c=e.external?.defs??{};for(const u of e.seen.entries()){const d=u[1];d.def&&d.defId&&(c[d.defId]=d.def)}e.external||Object.keys(c).length>0&&(e.target==="draft-2020-12"?r.$defs=c:r.definitions=c);try{const u=JSON.parse(JSON.stringify(r));return Object.defineProperty(u,"~standard",{value:{...n["~standard"],jsonSchema:{input:hc(n,"input",e.processors),output:hc(n,"output",e.processors)}},enumerable:!1,writable:!1}),u}catch{throw new Error("Error converting schema to JSON.")}}function pn(e,n){const s=n??{seen:new Set};if(s.seen.has(e))return!1;s.seen.add(e);const i=e._zod.def;if(i.type==="transform")return!0;if(i.type==="array")return pn(i.element,s);if(i.type==="set")return pn(i.valueType,s);if(i.type==="lazy")return pn(i.getter(),s);if(i.type==="promise"||i.type==="optional"||i.type==="nonoptional"||i.type==="nullable"||i.type==="readonly"||i.type==="default"||i.type==="prefault")return pn(i.innerType,s);if(i.type==="intersection")return pn(i.left,s)||pn(i.right,s);if(i.type==="record"||i.type==="map")return pn(i.keyType,s)||pn(i.valueType,s);if(i.type==="pipe")return pn(i.in,s)||pn(i.out,s);if(i.type==="object"){for(const r in i.shape)if(pn(i.shape[r],s))return!0;return!1}if(i.type==="union"){for(const r of i.options)if(pn(r,s))return!0;return!1}if(i.type==="tuple"){for(const r of i.items)if(pn(r,s))return!0;return!!(i.rest&&pn(i.rest,s))}return!1}const w2=(e,n={})=>s=>{const i=qb({...s,processors:n});return $t(e,i),Ub(i,e),$b(i,e)},hc=(e,n,s={})=>i=>{const{libraryOptions:r,target:c}=i??{},u=qb({...r??{},target:c,io:n,processors:s});return $t(e,u),Ub(u,e),$b(u,e)},_2={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},E2=(e,n,s,i)=>{const r=s;r.type="string";const{minimum:c,maximum:u,format:d,patterns:g,contentEncoding:p}=e._zod.bag;if(typeof c=="number"&&(r.minLength=c),typeof u=="number"&&(r.maxLength=u),d&&(r.format=_2[d]??d,r.format===""&&delete r.format,d==="time"&&delete r.format),p&&(r.contentEncoding=p),g&&g.size>0){const y=[...g];y.length===1?r.pattern=y[0].source:y.length>1&&(r.allOf=[...y.map(v=>({...n.target==="draft-07"||n.target==="draft-04"||n.target==="openapi-3.0"?{type:"string"}:{},pattern:v.source}))])}},T2=(e,n,s,i)=>{const r=s,{minimum:c,maximum:u,format:d,multipleOf:g,exclusiveMaximum:p,exclusiveMinimum:y}=e._zod.bag;typeof d=="string"&&d.includes("int")?r.type="integer":r.type="number",typeof y=="number"&&(n.target==="draft-04"||n.target==="openapi-3.0"?(r.minimum=y,r.exclusiveMinimum=!0):r.exclusiveMinimum=y),typeof c=="number"&&(r.minimum=c,typeof y=="number"&&n.target!=="draft-04"&&(y>=c?delete r.minimum:delete r.exclusiveMinimum)),typeof p=="number"&&(n.target==="draft-04"||n.target==="openapi-3.0"?(r.maximum=p,r.exclusiveMaximum=!0):r.exclusiveMaximum=p),typeof u=="number"&&(r.maximum=u,typeof p=="number"&&n.target!=="draft-04"&&(p<=u?delete r.maximum:delete r.exclusiveMaximum)),typeof g=="number"&&(r.multipleOf=g)},N2=(e,n,s,i)=>{s.type="boolean"},M2=(e,n,s,i)=>{s.not={}},j2=(e,n,s,i)=>{},C2=(e,n,s,i)=>{const r=e._zod.def,c=xb(r.entries);c.every(u=>typeof u=="number")&&(s.type="number"),c.every(u=>typeof u=="string")&&(s.type="string"),s.enum=c},D2=(e,n,s,i)=>{if(n.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},R2=(e,n,s,i)=>{if(n.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},k2=(e,n,s,i)=>{const r=s,c=e._zod.def,{minimum:u,maximum:d}=e._zod.bag;typeof u=="number"&&(r.minItems=u),typeof d=="number"&&(r.maxItems=d),r.type="array",r.items=$t(c.element,n,{...i,path:[...i.path,"items"]})},A2=(e,n,s,i)=>{const r=s,c=e._zod.def;r.type="object",r.properties={};const u=c.shape;for(const p in u)r.properties[p]=$t(u[p],n,{...i,path:[...i.path,"properties",p]});const d=new Set(Object.keys(u)),g=new Set([...d].filter(p=>{const y=c.shape[p]._zod;return n.io==="input"?y.optin===void 0:y.optout===void 0}));g.size>0&&(r.required=Array.from(g)),c.catchall?._zod.def.type==="never"?r.additionalProperties=!1:c.catchall?c.catchall&&(r.additionalProperties=$t(c.catchall,n,{...i,path:[...i.path,"additionalProperties"]})):n.io==="output"&&(r.additionalProperties=!1)},O2=(e,n,s,i)=>{const r=e._zod.def,c=r.inclusive===!1,u=r.options.map((d,g)=>$t(d,n,{...i,path:[...i.path,c?"oneOf":"anyOf",g]}));c?s.oneOf=u:s.anyOf=u},z2=(e,n,s,i)=>{const r=e._zod.def,c=$t(r.left,n,{...i,path:[...i.path,"allOf",0]}),u=$t(r.right,n,{...i,path:[...i.path,"allOf",1]}),d=p=>"allOf"in p&&Object.keys(p).length===1,g=[...d(c)?c.allOf:[c],...d(u)?u.allOf:[u]];s.allOf=g},P2=(e,n,s,i)=>{const r=s,c=e._zod.def;r.type="object";const u=c.keyType,g=u._zod.bag?.patterns;if(c.mode==="loose"&&g&&g.size>0){const y=$t(c.valueType,n,{...i,path:[...i.path,"patternProperties","*"]});r.patternProperties={};for(const v of g)r.patternProperties[v.source]=y}else(n.target==="draft-07"||n.target==="draft-2020-12")&&(r.propertyNames=$t(c.keyType,n,{...i,path:[...i.path,"propertyNames"]})),r.additionalProperties=$t(c.valueType,n,{...i,path:[...i.path,"additionalProperties"]});const p=u._zod.values;if(p){const y=[...p].filter(v=>typeof v=="string"||typeof v=="number");y.length>0&&(r.required=y)}},I2=(e,n,s,i)=>{const r=e._zod.def,c=$t(r.innerType,n,i),u=n.seen.get(e);n.target==="openapi-3.0"?(u.ref=r.innerType,s.nullable=!0):s.anyOf=[c,{type:"null"}]},B2=(e,n,s,i)=>{const r=e._zod.def;$t(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType},L2=(e,n,s,i)=>{const r=e._zod.def;$t(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType,s.default=JSON.parse(JSON.stringify(r.defaultValue))},q2=(e,n,s,i)=>{const r=e._zod.def;$t(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType,n.io==="input"&&(s._prefault=JSON.parse(JSON.stringify(r.defaultValue)))},U2=(e,n,s,i)=>{const r=e._zod.def;$t(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType;let u;try{u=r.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}s.default=u},$2=(e,n,s,i)=>{const r=e._zod.def,c=n.io==="input"?r.in._zod.def.type==="transform"?r.out:r.in:r.out;$t(c,n,i);const u=n.seen.get(e);u.ref=c},H2=(e,n,s,i)=>{const r=e._zod.def;$t(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType,s.readOnly=!0},Hb=(e,n,s,i)=>{const r=e._zod.def;$t(r.innerType,n,i);const c=n.seen.get(e);c.ref=r.innerType},Z2=ne("ZodISODateTime",(e,n)=>{YN.init(e,n),Nt.init(e,n)});function F2(e){return QM(Z2,e)}const G2=ne("ZodISODate",(e,n)=>{VN.init(e,n),Nt.init(e,n)});function Y2(e){return JM(G2,e)}const V2=ne("ZodISOTime",(e,n)=>{KN.init(e,n),Nt.init(e,n)});function K2(e){return e2(V2,e)}const W2=ne("ZodISODuration",(e,n)=>{WN.init(e,n),Nt.init(e,n)});function X2(e){return t2(W2,e)}const Q2=(e,n)=>{Eb.init(e,n),e.name="ZodError",Object.defineProperties(e,{format:{value:s=>qT(e,s)},flatten:{value:s=>LT(e,s)},addIssue:{value:s=>{e.issues.push(s),e.message=JSON.stringify(e.issues,Hf,2)}},addIssues:{value:s=>{e.issues.push(...s),e.message=JSON.stringify(e.issues,Hf,2)}},isEmpty:{get(){return e.issues.length===0}}})},Wn=ne("ZodError",Q2,{Parent:Error}),J2=jh(Wn),ej=Ch(Wn),tj=Dc(Wn),nj=Rc(Wn),aj=HT(Wn),sj=ZT(Wn),ij=FT(Wn),lj=GT(Wn),rj=YT(Wn),oj=VT(Wn),cj=KT(Wn),uj=WT(Wn),Dt=ne("ZodType",(e,n)=>(Ct.init(e,n),Object.assign(e["~standard"],{jsonSchema:{input:hc(e,"input"),output:hc(e,"output")}}),e.toJSONSchema=w2(e,{}),e.def=n,e.type=n.type,Object.defineProperty(e,"_def",{value:n}),e.check=(...s)=>e.clone(xs(n,{checks:[...n.checks??[],...s.map(i=>typeof i=="function"?{_zod:{check:i,def:{check:"custom"},onattach:[]}}:i)]}),{parent:!0}),e.with=e.check,e.clone=(s,i)=>Ss(e,s,i),e.brand=()=>e,e.register=((s,i)=>(s.add(e,i),e)),e.parse=(s,i)=>J2(e,s,i,{callee:e.parse}),e.safeParse=(s,i)=>tj(e,s,i),e.parseAsync=async(s,i)=>ej(e,s,i,{callee:e.parseAsync}),e.safeParseAsync=async(s,i)=>nj(e,s,i),e.spa=e.safeParseAsync,e.encode=(s,i)=>aj(e,s,i),e.decode=(s,i)=>sj(e,s,i),e.encodeAsync=async(s,i)=>ij(e,s,i),e.decodeAsync=async(s,i)=>lj(e,s,i),e.safeEncode=(s,i)=>rj(e,s,i),e.safeDecode=(s,i)=>oj(e,s,i),e.safeEncodeAsync=async(s,i)=>cj(e,s,i),e.safeDecodeAsync=async(s,i)=>uj(e,s,i),e.refine=(s,i)=>e.check(aC(s,i)),e.superRefine=s=>e.check(sC(s)),e.overwrite=s=>e.check(el(s)),e.optional=()=>ky(e),e.exactOptional=()=>Zj(e),e.nullable=()=>Ay(e),e.nullish=()=>ky(Ay(e)),e.nonoptional=s=>Wj(e,s),e.array=()=>In(e),e.or=s=>Ij([e,s]),e.and=s=>Lj(e,s),e.transform=s=>Oy(e,$j(s)),e.default=s=>Yj(e,s),e.prefault=s=>Kj(e,s),e.catch=s=>Qj(e,s),e.pipe=s=>Oy(e,s),e.readonly=()=>tC(e),e.describe=s=>{const i=e.clone();return Wl.add(i,{description:s}),i},Object.defineProperty(e,"description",{get(){return Wl.get(e)?.description},configurable:!0}),e.meta=(...s)=>{if(s.length===0)return Wl.get(e);const i=e.clone();return Wl.add(i,s[0]),i},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=s=>s(e),e)),Zb=ne("_ZodString",(e,n)=>{Dh.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(i,r,c)=>E2(e,i,r);const s=e._zod.bag;e.format=s.format??null,e.minLength=s.minimum??null,e.maxLength=s.maximum??null,e.regex=(...i)=>e.check(r2(...i)),e.includes=(...i)=>e.check(u2(...i)),e.startsWith=(...i)=>e.check(d2(...i)),e.endsWith=(...i)=>e.check(f2(...i)),e.min=(...i)=>e.check(fc(...i)),e.max=(...i)=>e.check(Bb(...i)),e.length=(...i)=>e.check(Lb(...i)),e.nonempty=(...i)=>e.check(fc(1,...i)),e.lowercase=i=>e.check(o2(i)),e.uppercase=i=>e.check(c2(i)),e.trim=()=>e.check(m2()),e.normalize=(...i)=>e.check(h2(...i)),e.toLowerCase=()=>e.check(g2()),e.toUpperCase=()=>e.check(p2()),e.slugify=()=>e.check(v2())}),dj=ne("ZodString",(e,n)=>{Dh.init(e,n),Zb.init(e,n),e.email=s=>e.check(RM(fj,s)),e.url=s=>e.check(PM(hj,s)),e.jwt=s=>e.check(XM(jj,s)),e.emoji=s=>e.check(IM(mj,s)),e.guid=s=>e.check(Ty(Cy,s)),e.uuid=s=>e.check(kM(Po,s)),e.uuidv4=s=>e.check(AM(Po,s)),e.uuidv6=s=>e.check(OM(Po,s)),e.uuidv7=s=>e.check(zM(Po,s)),e.nanoid=s=>e.check(BM(gj,s)),e.guid=s=>e.check(Ty(Cy,s)),e.cuid=s=>e.check(LM(pj,s)),e.cuid2=s=>e.check(qM(vj,s)),e.ulid=s=>e.check(UM(yj,s)),e.base64=s=>e.check(VM(Tj,s)),e.base64url=s=>e.check(KM(Nj,s)),e.xid=s=>e.check($M(bj,s)),e.ksuid=s=>e.check(HM(xj,s)),e.ipv4=s=>e.check(ZM(Sj,s)),e.ipv6=s=>e.check(FM(wj,s)),e.cidrv4=s=>e.check(GM(_j,s)),e.cidrv6=s=>e.check(YM(Ej,s)),e.e164=s=>e.check(WM(Mj,s)),e.datetime=s=>e.check(F2(s)),e.date=s=>e.check(Y2(s)),e.time=s=>e.check(K2(s)),e.duration=s=>e.check(X2(s))});function _n(e){return DM(dj,e)}const Nt=ne("ZodStringFormat",(e,n)=>{_t.init(e,n),Zb.init(e,n)}),fj=ne("ZodEmail",(e,n)=>{BN.init(e,n),Nt.init(e,n)}),Cy=ne("ZodGUID",(e,n)=>{PN.init(e,n),Nt.init(e,n)}),Po=ne("ZodUUID",(e,n)=>{IN.init(e,n),Nt.init(e,n)}),hj=ne("ZodURL",(e,n)=>{LN.init(e,n),Nt.init(e,n)}),mj=ne("ZodEmoji",(e,n)=>{qN.init(e,n),Nt.init(e,n)}),gj=ne("ZodNanoID",(e,n)=>{UN.init(e,n),Nt.init(e,n)}),pj=ne("ZodCUID",(e,n)=>{$N.init(e,n),Nt.init(e,n)}),vj=ne("ZodCUID2",(e,n)=>{HN.init(e,n),Nt.init(e,n)}),yj=ne("ZodULID",(e,n)=>{ZN.init(e,n),Nt.init(e,n)}),bj=ne("ZodXID",(e,n)=>{FN.init(e,n),Nt.init(e,n)}),xj=ne("ZodKSUID",(e,n)=>{GN.init(e,n),Nt.init(e,n)}),Sj=ne("ZodIPv4",(e,n)=>{XN.init(e,n),Nt.init(e,n)}),wj=ne("ZodIPv6",(e,n)=>{QN.init(e,n),Nt.init(e,n)}),_j=ne("ZodCIDRv4",(e,n)=>{JN.init(e,n),Nt.init(e,n)}),Ej=ne("ZodCIDRv6",(e,n)=>{eM.init(e,n),Nt.init(e,n)}),Tj=ne("ZodBase64",(e,n)=>{tM.init(e,n),Nt.init(e,n)}),Nj=ne("ZodBase64URL",(e,n)=>{aM.init(e,n),Nt.init(e,n)}),Mj=ne("ZodE164",(e,n)=>{sM.init(e,n),Nt.init(e,n)}),jj=ne("ZodJWT",(e,n)=>{lM.init(e,n),Nt.init(e,n)}),Fb=ne("ZodNumber",(e,n)=>{Ob.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(i,r,c)=>T2(e,i,r),e.gt=(i,r)=>e.check(My(i,r)),e.gte=(i,r)=>e.check(ff(i,r)),e.min=(i,r)=>e.check(ff(i,r)),e.lt=(i,r)=>e.check(Ny(i,r)),e.lte=(i,r)=>e.check(df(i,r)),e.max=(i,r)=>e.check(df(i,r)),e.int=i=>e.check(Dy(i)),e.safe=i=>e.check(Dy(i)),e.positive=i=>e.check(My(0,i)),e.nonnegative=i=>e.check(ff(0,i)),e.negative=i=>e.check(Ny(0,i)),e.nonpositive=i=>e.check(df(0,i)),e.multipleOf=(i,r)=>e.check(jy(i,r)),e.step=(i,r)=>e.check(jy(i,r)),e.finite=()=>e;const s=e._zod.bag;e.minValue=Math.max(s.minimum??Number.NEGATIVE_INFINITY,s.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(s.maximum??Number.POSITIVE_INFINITY,s.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(s.format??"").includes("int")||Number.isSafeInteger(s.multipleOf??.5),e.isFinite=!0,e.format=s.format??null});function ta(e){return n2(Fb,e)}const Cj=ne("ZodNumberFormat",(e,n)=>{rM.init(e,n),Fb.init(e,n)});function Dy(e){return a2(Cj,e)}const Dj=ne("ZodBoolean",(e,n)=>{oM.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>N2(e,s,i)});function Xl(e){return s2(Dj,e)}const Rj=ne("ZodUnknown",(e,n)=>{cM.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>j2()});function Ry(){return i2(Rj)}const kj=ne("ZodNever",(e,n)=>{uM.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>M2(e,s,i)});function Aj(e){return l2(kj,e)}const Oj=ne("ZodArray",(e,n)=>{dM.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>k2(e,s,i,r),e.element=n.element,e.min=(s,i)=>e.check(fc(s,i)),e.nonempty=s=>e.check(fc(1,s)),e.max=(s,i)=>e.check(Bb(s,i)),e.length=(s,i)=>e.check(Lb(s,i)),e.unwrap=()=>e.element});function In(e,n){return y2(Oj,e,n)}const zj=ne("ZodObject",(e,n)=>{hM.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>A2(e,s,i,r),st(e,"shape",()=>n.shape),e.keyof=()=>mc(Object.keys(e._zod.def.shape)),e.catchall=s=>e.clone({...e._zod.def,catchall:s}),e.passthrough=()=>e.clone({...e._zod.def,catchall:Ry()}),e.loose=()=>e.clone({...e._zod.def,catchall:Ry()}),e.strict=()=>e.clone({...e._zod.def,catchall:Aj()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=s=>OT(e,s),e.safeExtend=s=>zT(e,s),e.merge=s=>PT(e,s),e.pick=s=>kT(e,s),e.omit=s=>AT(e,s),e.partial=(...s)=>IT(Gb,e,s[0]),e.required=(...s)=>BT(Yb,e,s[0])});function rr(e,n){const s={type:"object",shape:e??{},...Se(n)};return new zj(s)}const Pj=ne("ZodUnion",(e,n)=>{mM.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>O2(e,s,i,r),e.options=n.options});function Ij(e,n){return new Pj({type:"union",options:e,...Se(n)})}const Bj=ne("ZodIntersection",(e,n)=>{gM.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>z2(e,s,i,r)});function Lj(e,n){return new Bj({type:"intersection",left:e,right:n})}const qj=ne("ZodRecord",(e,n)=>{pM.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>P2(e,s,i,r),e.keyType=n.keyType,e.valueType=n.valueType});function tr(e,n,s){return new qj({type:"record",keyType:e,valueType:n,...Se(s)})}const Ff=ne("ZodEnum",(e,n)=>{vM.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(i,r,c)=>C2(e,i,r),e.enum=n.entries,e.options=Object.values(n.entries);const s=new Set(Object.keys(n.entries));e.extract=(i,r)=>{const c={};for(const u of i)if(s.has(u))c[u]=n.entries[u];else throw new Error(`Key ${u} not found in enum`);return new Ff({...n,checks:[],...Se(r),entries:c})},e.exclude=(i,r)=>{const c={...n.entries};for(const u of i)if(s.has(u))delete c[u];else throw new Error(`Key ${u} not found in enum`);return new Ff({...n,checks:[],...Se(r),entries:c})}});function mc(e,n){const s=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new Ff({type:"enum",entries:s,...Se(n)})}const Uj=ne("ZodTransform",(e,n)=>{yM.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>R2(e,s),e._zod.parse=(s,i)=>{if(i.direction==="backward")throw new yb(e.constructor.name);s.addIssue=c=>{if(typeof c=="string")s.issues.push(lr(c,s.value,n));else{const u=c;u.fatal&&(u.continue=!1),u.code??(u.code="custom"),u.input??(u.input=s.value),u.inst??(u.inst=e),s.issues.push(lr(u))}};const r=n.transform(s.value,s);return r instanceof Promise?r.then(c=>(s.value=c,s)):(s.value=r,s)}});function $j(e){return new Uj({type:"transform",transform:e})}const Gb=ne("ZodOptional",(e,n)=>{Ib.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>Hb(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function ky(e){return new Gb({type:"optional",innerType:e})}const Hj=ne("ZodExactOptional",(e,n)=>{bM.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>Hb(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function Zj(e){return new Hj({type:"optional",innerType:e})}const Fj=ne("ZodNullable",(e,n)=>{xM.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>I2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function Ay(e){return new Fj({type:"nullable",innerType:e})}const Gj=ne("ZodDefault",(e,n)=>{SM.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>L2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function Yj(e,n){return new Gj({type:"default",innerType:e,get defaultValue(){return typeof n=="function"?n():wb(n)}})}const Vj=ne("ZodPrefault",(e,n)=>{wM.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>q2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function Kj(e,n){return new Vj({type:"prefault",innerType:e,get defaultValue(){return typeof n=="function"?n():wb(n)}})}const Yb=ne("ZodNonOptional",(e,n)=>{_M.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>B2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function Wj(e,n){return new Yb({type:"nonoptional",innerType:e,...Se(n)})}const Xj=ne("ZodCatch",(e,n)=>{EM.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>U2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function Qj(e,n){return new Xj({type:"catch",innerType:e,catchValue:typeof n=="function"?n:()=>n})}const Jj=ne("ZodPipe",(e,n)=>{TM.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>$2(e,s,i,r),e.in=n.in,e.out=n.out});function Oy(e,n){return new Jj({type:"pipe",in:e,out:n})}const eC=ne("ZodReadonly",(e,n)=>{NM.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>H2(e,s,i,r),e.unwrap=()=>e._zod.def.innerType});function tC(e){return new eC({type:"readonly",innerType:e})}const nC=ne("ZodCustom",(e,n)=>{MM.init(e,n),Dt.init(e,n),e._zod.processJSONSchema=(s,i,r)=>D2(e,s)});function aC(e,n={}){return b2(nC,e,n)}function sC(e){return x2(e)}const iC=["list","grid"],Oa={text:"",categories:[],types:[],tiers:[],classReqs:[],majorIds:[],numericRanges:{},exclusionRanges:{},onlyWearableAtLevel:106,onlyClassCompatible:!1,excludeRestricted:!1,sortKeys:["relevance"],sortDescending:!0,viewMode:"list",resultsBelowBuild:!0},zy=rr({min:ta().finite().optional(),max:ta().finite().optional()}),lC=rr({text:_n().catch(Oa.text),categories:In(_n()).catch([]),types:In(_n()).catch([]),tiers:In(_n()).catch([]),classReqs:In(mc(["Warrior","Assassin","Mage","Archer","Shaman"])).catch([]),majorIds:In(_n()).catch([]),numericRanges:tr(_n(),zy).catch({}),exclusionRanges:tr(_n(),zy).catch({}),onlyWearableAtLevel:ta().int().min(1).max(106).nullable().catch(106),onlyClassCompatible:Xl().catch(!1),excludeRestricted:Xl().catch(!1),sortKeys:In(_n()).catch(["relevance"]),sortDescending:Xl().catch(!0),viewMode:mc(iC).catch("list"),resultsBelowBuild:Xl().catch(!0)});function Vb(e){const n=e,s=lC.parse(e),i=Array.isArray(s.sortKeys)&&s.sortKeys.length>0?s.sortKeys:typeof n?.sort=="string"?[n.sort]:["relevance"];return{text:s.text,categories:s.categories,types:s.types,tiers:s.tiers,classReqs:s.classReqs,majorIds:s.majorIds,numericRanges:s.numericRanges,exclusionRanges:s.exclusionRanges??{},onlyWearableAtLevel:s.onlyWearableAtLevel,onlyClassCompatible:s.onlyClassCompatible,excludeRestricted:s.excludeRestricted,sortKeys:i,sortDescending:s.sortDescending,viewMode:s.viewMode,resultsBelowBuild:!!s.resultsBelowBuild}}function rC(e){return!!(e.text.trim()!==""||e.categories.length>0||e.types.length>0||e.tiers.length>0||e.classReqs.length>0||e.majorIds.length>0||e.numericRanges&&Object.keys(e.numericRanges).length>0||e.exclusionRanges&&Object.keys(e.exclusionRanges).length>0)}function oC(e,n){return Vb({...e,...n,numericRanges:n.numericRanges!==void 0?n.numericRanges:e.numericRanges,exclusionRanges:n.exclusionRanges!==void 0?n.exclusionRanges:e.exclusionRanges??{}})}const cC="ENTRIES",Kb="KEYS",Wb="VALUES",on="";class hf{constructor(n,s){const i=n._tree,r=Array.from(i.keys());this.set=n,this._type=s,this._path=r.length>0?[{node:i,keys:r}]:[]}next(){const n=this.dive();return this.backtrack(),n}dive(){if(this._path.length===0)return{done:!0,value:void 0};const{node:n,keys:s}=Ai(this._path);if(Ai(s)===on)return{done:!1,value:this.result()};const i=n.get(Ai(s));return this._path.push({node:i,keys:Array.from(i.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;const n=Ai(this._path).keys;n.pop(),!(n.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:n})=>Ai(n)).filter(n=>n!==on).join("")}value(){return Ai(this._path).node.get(on)}result(){switch(this._type){case Wb:return this.value();case Kb:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const Ai=e=>e[e.length-1],uC=(e,n,s)=>{const i=new Map;if(n===void 0)return i;const r=n.length+1,c=r+s,u=new Uint8Array(c*r).fill(s+1);for(let d=0;d<r;++d)u[d]=d;for(let d=1;d<c;++d)u[d*r]=d;return Xb(e,n,s,i,u,1,r,""),i},Xb=(e,n,s,i,r,c,u,d)=>{const g=c*u;e:for(const p of e.keys())if(p===on){const y=r[g-1];y<=s&&i.set(d,[e.get(p),y])}else{let y=c;for(let v=0;v<p.length;++v,++y){const b=p[v],S=u*y,E=S-u;let T=r[S];const C=Math.max(0,y-s-1),k=Math.min(u-1,y+s);for(let R=C;R<k;++R){const z=b!==n[R],B=r[E+R]+ +z,U=r[E+R+1]+1,M=r[S+R]+1,j=r[S+R+1]=Math.min(B,U,M);j<T&&(T=j)}if(T>s)continue e}Xb(e.get(p),n,s,i,r,y,u,d+p)}};class fs{constructor(n=new Map,s=""){this._size=void 0,this._tree=n,this._prefix=s}atPrefix(n){if(!n.startsWith(this._prefix))throw new Error("Mismatched prefix");const[s,i]=gc(this._tree,n.slice(this._prefix.length));if(s===void 0){const[r,c]=Rh(i);for(const u of r.keys())if(u!==on&&u.startsWith(c)){const d=new Map;return d.set(u.slice(c.length),r.get(u)),new fs(d,n)}}return new fs(s,n)}clear(){this._size=void 0,this._tree.clear()}delete(n){return this._size=void 0,dC(this._tree,n)}entries(){return new hf(this,cC)}forEach(n){for(const[s,i]of this)n(s,i,this)}fuzzyGet(n,s){return uC(this._tree,n,s)}get(n){const s=Gf(this._tree,n);return s!==void 0?s.get(on):void 0}has(n){const s=Gf(this._tree,n);return s!==void 0&&s.has(on)}keys(){return new hf(this,Kb)}set(n,s){if(typeof n!="string")throw new Error("key must be a string");return this._size=void 0,mf(this._tree,n).set(on,s),this}get size(){if(this._size)return this._size;this._size=0;const n=this.entries();for(;!n.next().done;)this._size+=1;return this._size}update(n,s){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;const i=mf(this._tree,n);return i.set(on,s(i.get(on))),this}fetch(n,s){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;const i=mf(this._tree,n);let r=i.get(on);return r===void 0&&i.set(on,r=s()),r}values(){return new hf(this,Wb)}[Symbol.iterator](){return this.entries()}static from(n){const s=new fs;for(const[i,r]of n)s.set(i,r);return s}static fromObject(n){return fs.from(Object.entries(n))}}const gc=(e,n,s=[])=>{if(n.length===0||e==null)return[e,s];for(const i of e.keys())if(i!==on&&n.startsWith(i))return s.push([e,i]),gc(e.get(i),n.slice(i.length),s);return s.push([e,n]),gc(void 0,"",s)},Gf=(e,n)=>{if(n.length===0||e==null)return e;for(const s of e.keys())if(s!==on&&n.startsWith(s))return Gf(e.get(s),n.slice(s.length))},mf=(e,n)=>{const s=n.length;e:for(let i=0;e&&i<s;){for(const c of e.keys())if(c!==on&&n[i]===c[0]){const u=Math.min(s-i,c.length);let d=1;for(;d<u&&n[i+d]===c[d];)++d;const g=e.get(c);if(d===c.length)e=g;else{const p=new Map;p.set(c.slice(d),g),e.set(n.slice(i,i+d),p),e.delete(c),e=p}i+=d;continue e}const r=new Map;return e.set(n.slice(i),r),r}return e},dC=(e,n)=>{const[s,i]=gc(e,n);if(s!==void 0){if(s.delete(on),s.size===0)Qb(i);else if(s.size===1){const[r,c]=s.entries().next().value;Jb(i,r,c)}}},Qb=e=>{if(e.length===0)return;const[n,s]=Rh(e);if(n.delete(s),n.size===0)Qb(e.slice(0,-1));else if(n.size===1){const[i,r]=n.entries().next().value;i!==on&&Jb(e.slice(0,-1),i,r)}},Jb=(e,n,s)=>{if(e.length===0)return;const[i,r]=Rh(e);i.set(r+n,s),i.delete(r)},Rh=e=>e[e.length-1],kh="or",ex="and",fC="and_not";class Fi{constructor(n){if(n?.fields==null)throw new Error('MiniSearch: option "fields" must be provided');const s=n.autoVacuum==null||n.autoVacuum===!0?vf:n.autoVacuum;this._options={...pf,...n,autoVacuum:s,searchOptions:{...Py,...n.searchOptions||{}},autoSuggestOptions:{...vC,...n.autoSuggestOptions||{}}},this._index=new fs,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=Vf,this.addFields(this._options.fields)}add(n){const{extractField:s,stringifyField:i,tokenize:r,processTerm:c,fields:u,idField:d}=this._options,g=s(n,d);if(g==null)throw new Error(`MiniSearch: document does not have ID field "${d}"`);if(this._idToShortId.has(g))throw new Error(`MiniSearch: duplicate ID ${g}`);const p=this.addDocumentId(g);this.saveStoredFields(p,n);for(const y of u){const v=s(n,y);if(v==null)continue;const b=r(i(v,y),y),S=this._fieldIds[y],E=new Set(b).size;this.addFieldLength(p,S,this._documentCount-1,E);for(const T of b){const C=c(T,y);if(Array.isArray(C))for(const k of C)this.addTerm(S,p,k);else C&&this.addTerm(S,p,C)}}}addAll(n){for(const s of n)this.add(s)}addAllAsync(n,s={}){const{chunkSize:i=10}=s,r={chunk:[],promise:Promise.resolve()},{chunk:c,promise:u}=n.reduce(({chunk:d,promise:g},p,y)=>(d.push(p),(y+1)%i===0?{chunk:[],promise:g.then(()=>new Promise(v=>setTimeout(v,0))).then(()=>this.addAll(d))}:{chunk:d,promise:g}),r);return u.then(()=>this.addAll(c))}remove(n){const{tokenize:s,processTerm:i,extractField:r,stringifyField:c,fields:u,idField:d}=this._options,g=r(n,d);if(g==null)throw new Error(`MiniSearch: document does not have ID field "${d}"`);const p=this._idToShortId.get(g);if(p==null)throw new Error(`MiniSearch: cannot remove document with ID ${g}: it is not in the index`);for(const y of u){const v=r(n,y);if(v==null)continue;const b=s(c(v,y),y),S=this._fieldIds[y],E=new Set(b).size;this.removeFieldLength(p,S,this._documentCount,E);for(const T of b){const C=i(T,y);if(Array.isArray(C))for(const k of C)this.removeTerm(S,p,k);else C&&this.removeTerm(S,p,C)}}this._storedFields.delete(p),this._documentIds.delete(p),this._idToShortId.delete(g),this._fieldLength.delete(p),this._documentCount-=1}removeAll(n){if(n)for(const s of n)this.remove(s);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new fs,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(n){const s=this._idToShortId.get(n);if(s==null)throw new Error(`MiniSearch: cannot discard document with ID ${n}: it is not in the index`);this._idToShortId.delete(n),this._documentIds.delete(s),this._storedFields.delete(s),(this._fieldLength.get(s)||[]).forEach((i,r)=>{this.removeFieldLength(s,r,this._documentCount,i)}),this._fieldLength.delete(s),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;const{minDirtFactor:n,minDirtCount:s,batchSize:i,batchWait:r}=this._options.autoVacuum;this.conditionalVacuum({batchSize:i,batchWait:r},{minDirtCount:s,minDirtFactor:n})}discardAll(n){const s=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const i of n)this.discard(i)}finally{this._options.autoVacuum=s}this.maybeAutoVacuum()}replace(n){const{idField:s,extractField:i}=this._options,r=i(n,s);this.discard(r),this.add(n)}vacuum(n={}){return this.conditionalVacuum(n)}conditionalVacuum(n,s){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&s,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{const i=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=Vf,this.performVacuuming(n,i)}),this._enqueuedVacuum)):this.vacuumConditionsMet(s)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(n),this._currentVacuum)}async performVacuuming(n,s){const i=this._dirtCount;if(this.vacuumConditionsMet(s)){const r=n.batchSize||Yf.batchSize,c=n.batchWait||Yf.batchWait;let u=1;for(const[d,g]of this._index){for(const[p,y]of g)for(const[v]of y)this._documentIds.has(v)||(y.size<=1?g.delete(p):y.delete(v));this._index.get(d).size===0&&this._index.delete(d),u%r===0&&await new Promise(p=>setTimeout(p,c)),u+=1}this._dirtCount-=i}await null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null}vacuumConditionsMet(n){if(n==null)return!0;let{minDirtCount:s,minDirtFactor:i}=n;return s=s||vf.minDirtCount,i=i||vf.minDirtFactor,this.dirtCount>=s&&this.dirtFactor>=i}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(n){return this._idToShortId.has(n)}getStoredFields(n){const s=this._idToShortId.get(n);if(s!=null)return this._storedFields.get(s)}search(n,s={}){const{searchOptions:i}=this._options,r={...i,...s},c=this.executeQuery(n,s),u=[];for(const[d,{score:g,terms:p,match:y}]of c){const v=p.length||1,b={id:this._documentIds.get(d),score:g*v,terms:Object.keys(y),queryTerms:p,match:y};Object.assign(b,this._storedFields.get(d)),(r.filter==null||r.filter(b))&&u.push(b)}return n===Fi.wildcard&&r.boostDocument==null||u.sort(By),u}autoSuggest(n,s={}){s={...this._options.autoSuggestOptions,...s};const i=new Map;for(const{score:c,terms:u}of this.search(n,s)){const d=u.join(" "),g=i.get(d);g!=null?(g.score+=c,g.count+=1):i.set(d,{score:c,terms:u,count:1})}const r=[];for(const[c,{score:u,terms:d,count:g}]of i)r.push({suggestion:c,terms:d,score:u/g});return r.sort(By),r}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(n,s){if(s==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(n),s)}static async loadJSONAsync(n,s){if(s==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(n),s)}static getDefault(n){if(pf.hasOwnProperty(n))return gf(pf,n);throw new Error(`MiniSearch: unknown option "${n}"`)}static loadJS(n,s){const{index:i,documentIds:r,fieldLength:c,storedFields:u,serializationVersion:d}=n,g=this.instantiateMiniSearch(n,s);g._documentIds=Io(r),g._fieldLength=Io(c),g._storedFields=Io(u);for(const[p,y]of g._documentIds)g._idToShortId.set(y,p);for(const[p,y]of i){const v=new Map;for(const b of Object.keys(y)){let S=y[b];d===1&&(S=S.ds),v.set(parseInt(b,10),Io(S))}g._index.set(p,v)}return g}static async loadJSAsync(n,s){const{index:i,documentIds:r,fieldLength:c,storedFields:u,serializationVersion:d}=n,g=this.instantiateMiniSearch(n,s);g._documentIds=await Bo(r),g._fieldLength=await Bo(c),g._storedFields=await Bo(u);for(const[y,v]of g._documentIds)g._idToShortId.set(v,y);let p=0;for(const[y,v]of i){const b=new Map;for(const S of Object.keys(v)){let E=v[S];d===1&&(E=E.ds),b.set(parseInt(S,10),await Bo(E))}++p%1e3===0&&await tx(0),g._index.set(y,b)}return g}static instantiateMiniSearch(n,s){const{documentCount:i,nextId:r,fieldIds:c,averageFieldLength:u,dirtCount:d,serializationVersion:g}=n;if(g!==1&&g!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const p=new Fi(s);return p._documentCount=i,p._nextId=r,p._idToShortId=new Map,p._fieldIds=c,p._avgFieldLength=u,p._dirtCount=d||0,p._index=new fs,p}executeQuery(n,s={}){if(n===Fi.wildcard)return this.executeWildcardQuery(s);if(typeof n!="string"){const b={...s,...n,queries:void 0},S=n.queries.map(E=>this.executeQuery(E,b));return this.combineResults(S,b.combineWith)}const{tokenize:i,processTerm:r,searchOptions:c}=this._options,u={tokenize:i,processTerm:r,...c,...s},{tokenize:d,processTerm:g}=u,v=d(n).flatMap(b=>g(b)).filter(b=>!!b).map(pC(u)).map(b=>this.executeQuerySpec(b,u));return this.combineResults(v,u.combineWith)}executeQuerySpec(n,s){const i={...this._options.searchOptions,...s},r=(i.fields||this._options.fields).reduce((T,C)=>({...T,[C]:gf(i.boost,C)||1}),{}),{boostDocument:c,weights:u,maxFuzzy:d,bm25:g}=i,{fuzzy:p,prefix:y}={...Py.weights,...u},v=this._index.get(n.term),b=this.termResults(n.term,n.term,1,n.termBoost,v,r,c,g);let S,E;if(n.prefix&&(S=this._index.atPrefix(n.term)),n.fuzzy){const T=n.fuzzy===!0?.2:n.fuzzy,C=T<1?Math.min(d,Math.round(n.term.length*T)):T;C&&(E=this._index.fuzzyGet(n.term,C))}if(S)for(const[T,C]of S){const k=T.length-n.term.length;if(!k)continue;E?.delete(T);const R=y*T.length/(T.length+.3*k);this.termResults(n.term,T,R,n.termBoost,C,r,c,g,b)}if(E)for(const T of E.keys()){const[C,k]=E.get(T);if(!k)continue;const R=p*T.length/(T.length+k);this.termResults(n.term,T,R,n.termBoost,C,r,c,g,b)}return b}executeWildcardQuery(n){const s=new Map,i={...this._options.searchOptions,...n};for(const[r,c]of this._documentIds){const u=i.boostDocument?i.boostDocument(c,"",this._storedFields.get(r)):1;s.set(r,{score:u,terms:[],match:{}})}return s}combineResults(n,s=kh){if(n.length===0)return new Map;const i=s.toLowerCase(),r=hC[i];if(!r)throw new Error(`Invalid combination operator: ${s}`);return n.reduce(r)||new Map}toJSON(){const n=[];for(const[s,i]of this._index){const r={};for(const[c,u]of i)r[c]=Object.fromEntries(u);n.push([s,r])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:n,serializationVersion:2}}termResults(n,s,i,r,c,u,d,g,p=new Map){if(c==null)return p;for(const y of Object.keys(u)){const v=u[y],b=this._fieldIds[y],S=c.get(b);if(S==null)continue;let E=S.size;const T=this._avgFieldLength[b];for(const C of S.keys()){if(!this._documentIds.has(C)){this.removeTerm(b,C,s),E-=1;continue}const k=d?d(this._documentIds.get(C),s,this._storedFields.get(C)):1;if(!k)continue;const R=S.get(C),z=this._fieldLength.get(C)[b],B=gC(R,E,this._documentCount,z,T,g),U=i*r*v*k*B,M=p.get(C);if(M){M.score+=U,yC(M.terms,n);const j=gf(M.match,s);j?j.push(y):M.match[s]=[y]}else p.set(C,{score:U,terms:[n],match:{[s]:[y]}})}}return p}addTerm(n,s,i){const r=this._index.fetch(i,Ly);let c=r.get(n);if(c==null)c=new Map,c.set(s,1),r.set(n,c);else{const u=c.get(s);c.set(s,(u||0)+1)}}removeTerm(n,s,i){if(!this._index.has(i)){this.warnDocumentChanged(s,n,i);return}const r=this._index.fetch(i,Ly),c=r.get(n);c==null||c.get(s)==null?this.warnDocumentChanged(s,n,i):c.get(s)<=1?c.size<=1?r.delete(n):c.delete(s):c.set(s,c.get(s)-1),this._index.get(i).size===0&&this._index.delete(i)}warnDocumentChanged(n,s,i){for(const r of Object.keys(this._fieldIds))if(this._fieldIds[r]===s){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(n)} has changed before removal: term "${i}" was not present in field "${r}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(n){const s=this._nextId;return this._idToShortId.set(n,s),this._documentIds.set(s,n),this._documentCount+=1,this._nextId+=1,s}addFields(n){for(let s=0;s<n.length;s++)this._fieldIds[n[s]]=s}addFieldLength(n,s,i,r){let c=this._fieldLength.get(n);c==null&&this._fieldLength.set(n,c=[]),c[s]=r;const d=(this._avgFieldLength[s]||0)*i+r;this._avgFieldLength[s]=d/(i+1)}removeFieldLength(n,s,i,r){if(i===1){this._avgFieldLength[s]=0;return}const c=this._avgFieldLength[s]*i-r;this._avgFieldLength[s]=c/(i-1)}saveStoredFields(n,s){const{storeFields:i,extractField:r}=this._options;if(i==null||i.length===0)return;let c=this._storedFields.get(n);c==null&&this._storedFields.set(n,c={});for(const u of i){const d=r(s,u);d!==void 0&&(c[u]=d)}}}Fi.wildcard=Symbol("*");const gf=(e,n)=>Object.prototype.hasOwnProperty.call(e,n)?e[n]:void 0,hC={[kh]:(e,n)=>{for(const s of n.keys()){const i=e.get(s);if(i==null)e.set(s,n.get(s));else{const{score:r,terms:c,match:u}=n.get(s);i.score=i.score+r,i.match=Object.assign(i.match,u),Iy(i.terms,c)}}return e},[ex]:(e,n)=>{const s=new Map;for(const i of n.keys()){const r=e.get(i);if(r==null)continue;const{score:c,terms:u,match:d}=n.get(i);Iy(r.terms,u),s.set(i,{score:r.score+c,terms:r.terms,match:Object.assign(r.match,d)})}return s},[fC]:(e,n)=>{for(const s of n.keys())e.delete(s);return e}},mC={k:1.2,b:.7,d:.5},gC=(e,n,s,i,r,c)=>{const{k:u,b:d,d:g}=c;return Math.log(1+(s-n+.5)/(n+.5))*(g+e*(u+1)/(e+u*(1-d+d*i/r)))},pC=e=>(n,s,i)=>{const r=typeof e.fuzzy=="function"?e.fuzzy(n,s,i):e.fuzzy||!1,c=typeof e.prefix=="function"?e.prefix(n,s,i):e.prefix===!0,u=typeof e.boostTerm=="function"?e.boostTerm(n,s,i):1;return{term:n,fuzzy:r,prefix:c,termBoost:u}},pf={idField:"id",extractField:(e,n)=>e[n],stringifyField:(e,n)=>e.toString(),tokenize:e=>e.split(bC),processTerm:e=>e.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(e,n)=>{typeof console?.[e]=="function"&&console[e](n)},autoVacuum:!0},Py={combineWith:kh,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:mC},vC={combineWith:ex,prefix:(e,n,s)=>n===s.length-1},Yf={batchSize:1e3,batchWait:10},Vf={minDirtFactor:.1,minDirtCount:20},vf={...Yf,...Vf},yC=(e,n)=>{e.includes(n)||e.push(n)},Iy=(e,n)=>{for(const s of n)e.includes(s)||e.push(s)},By=({score:e},{score:n})=>n-e,Ly=()=>new Map,Io=e=>{const n=new Map;for(const s of Object.keys(e))n.set(parseInt(s,10),e[s]);return n},Bo=async e=>{const n=new Map;let s=0;for(const i of Object.keys(e))n.set(parseInt(i,10),e[i]),++s%1e3===0&&await tx(0);return n},tx=e=>new Promise(n=>setTimeout(n,e)),bC=/[\n\r\p{Z}\p{P}]+/u;function nx(e,n){return n==="level"?e.level:n==="powderSlots"||n==="slots"?e.powderSlots:n==="baseDps"?e.roughScoreFields.baseDps:e.numericIndex[n]??0}function xC(e,n){return n.length===0||n.includes(e.category)}function qy(e,n){return n.length===0?!0:e?n.includes(e):!1}function SC(e,n){for(const[s,i]of Object.entries(n.numericRanges)){if(!i)continue;const r=nx(e,s);if(typeof i.min=="number"&&r<i.min||typeof i.max=="number"&&r>i.max)return!1}return!0}function wC(e,n){for(const[s,i]of Object.entries(n.exclusionRanges??{})){if(!i)continue;const r=nx(e,s);if(typeof i.max=="number"&&r>i.max||typeof i.min=="number"&&r<i.min)return!1}return!0}function _C(e,n){if(n.excludeRestricted&&(e.restricted||e.deprecated)||n.onlyWearableAtLevel!==null&&!gT(e,n.onlyWearableAtLevel))return!1;if(n.onlyClassCompatible){const s=n.classReqs[0]??null;if(!vb(e,s))return!1}return!0}function EC(e,n){return n.length===0?!0:e.majorIds.length===0?!1:n.every(s=>e.majorIds.includes(s))}function TC(e,n){return!(!xC(e,n.categories)||!qy(e.type,n.types)||!qy(e.tier,n.tiers)||n.classReqs.length>0&&(e.classReq===null||!n.classReqs.includes(e.classReq))||!EC(e,n.majorIds)||!SC(e,n)||!wC(e,n)||!_C(e,n))}function Uy(e,n){return n==="relevance"?0:n==="level"?e.level:n==="powderSlots"||n==="slots"?e.powderSlots:n==="baseDps"?e.roughScoreFields.baseDps:e.numericIndex[n]??0}function NC(e,n,s){const i=n.trim().toLowerCase();if(!i)return 0;const r=e.displayName.toLowerCase();return r===i?s+5e3:r.startsWith(i)?s+3e3:r.includes(i)?s+1200:e.searchText.includes(i)?s+300:s}function MC(e,n,s){const i=s.sortDescending?-1:1,r=s.sortKeys?.length?s.sortKeys:["relevance"];for(const c of r)if(c==="relevance"){if(e.relevance!==n.relevance)return(e.relevance>n.relevance?-1:1)*(s.sortDescending?1:-1)}else{const u=Uy(e.item,c),d=Uy(n.item,c);if(u!==d)return u<d?-i:i}return e.item.displayName.localeCompare(n.item.displayName)}function jC(){return{categories:{},types:{},tiers:{},majorIds:{}}}function yf(e,n){n&&(e[n]=(e[n]??0)+1)}class CC{miniSearch;itemsById;allItems;constructor(n){this.allItems=n,this.itemsById=new Map(n.map(s=>[s.id,s])),this.miniSearch=new Fi({fields:["displayName","searchText","majorIdsText"],storeFields:["id"],idField:"id",searchOptions:{boost:{displayName:6,searchText:2,majorIdsText:2},prefix:!0,fuzzy:.2,combineWith:"OR"}}),this.miniSearch.addAll(n.map(s=>({id:s.id,displayName:s.displayName,searchText:s.searchText,majorIdsText:s.majorIdsText})))}search(n){const s=n.text.trim(),i=s?this.miniSearch.search(s,{prefix:!0,fuzzy:.2,boost:{displayName:8,searchText:2,majorIdsText:2}}):[],r=new Map;for(const p of i){const y=this.itemsById.get(p.id);y&&r.set(y.id,NC(y,s,Number(p.score??0)))}const c=s?[...this.allItems]:this.allItems,u=[],d=jC();for(const p of c){const y=r.get(p.id)??0;if(!(s&&y===0&&!p.searchText.includes(s.toLowerCase()))&&TC(p,n)){u.push({item:p,relevance:y}),d.categories[p.category]=(d.categories[p.category]??0)+1,yf(d.types,p.type),yf(d.tiers,p.tier);for(const v of p.majorIds)yf(d.majorIds,v)}}u.sort((p,y)=>MC(p,y,n));const g=u.map(({item:p,relevance:y})=>({id:p.id,relevance:y}));return{total:g.length,rows:g,facetCounts:d}}}class DC{worker=null;fallbackEngine=null;requestId=0;pending=new Map;initialized=!1;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL(""+new URL("search-worker-Dray3ejl.js",import.meta.url).href,import.meta.url),{type:"module"}),this.worker.onmessage=n=>{const s=n.data,i=this.pending.get(s.requestId);i&&(this.pending.delete(s.requestId),s.type==="error"?i.reject(new Error(s.message)):s.type==="ready"?i.resolve(void 0):i.resolve(s.result))},this.worker.onerror=n=>{console.error(n),this.worker?.terminate(),this.worker=null})}async init(n){if(!this.initialized){if(this.worker){await this.send({type:"init",items:n}),this.initialized=!0;return}this.fallbackEngine=new CC(n),this.initialized=!0}}async search(n){if(!this.initialized)throw new Error("SearchWorkerClient.init() must be called before search()");if(this.worker)return this.send({type:"search",state:n});if(!this.fallbackEngine)throw new Error("Fallback search engine unavailable");return this.fallbackEngine.search(n)}dispose(){this.worker?.terminate(),this.worker=null,this.fallbackEngine=null,this.pending.clear()}send(n){if(!this.worker)return Promise.reject(new Error("Search worker unavailable"));const s=++this.requestId;return new Promise((i,r)=>{this.pending.set(s,{resolve:i,reject:r}),this.worker.postMessage({...n,requestId:s})})}}function Oi(e,n,s){let i=s.initialDeps??[],r,c=!0;function u(){var d,g,p;let y;s.key&&((d=s.debug)!=null&&d.call(s))&&(y=Date.now());const v=e();if(!(v.length!==i.length||v.some((E,T)=>i[T]!==E)))return r;i=v;let S;if(s.key&&((g=s.debug)!=null&&g.call(s))&&(S=Date.now()),r=n(...v),s.key&&((p=s.debug)!=null&&p.call(s))){const E=Math.round((Date.now()-y)*100)/100,T=Math.round((Date.now()-S)*100)/100,C=T/16,k=(R,z)=>{for(R=String(R);R.length<z;)R=" "+R;return R};console.info(`%c ${k(T,5)} /${k(E,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*C,120))}deg 100% 31%);`,s?.key)}return s?.onChange&&!(c&&s.skipInitialOnChange)&&s.onChange(r),c=!1,r}return u.updateDeps=d=>{i=d},u}function $y(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const RC=(e,n)=>Math.abs(e-n)<1.01,kC=(e,n,s)=>{let i;return function(...r){e.clearTimeout(i),i=e.setTimeout(()=>n.apply(this,r),s)}},Hy=e=>{const{offsetWidth:n,offsetHeight:s}=e;return{width:n,height:s}},AC=e=>e,OC=e=>{const n=Math.max(e.startIndex-e.overscan,0),s=Math.min(e.endIndex+e.overscan,e.count-1),i=[];for(let r=n;r<=s;r++)i.push(r);return i},zC=(e,n)=>{const s=e.scrollElement;if(!s)return;const i=e.targetWindow;if(!i)return;const r=u=>{const{width:d,height:g}=u;n({width:Math.round(d),height:Math.round(g)})};if(r(Hy(s)),!i.ResizeObserver)return()=>{};const c=new i.ResizeObserver(u=>{const d=()=>{const g=u[0];if(g?.borderBoxSize){const p=g.borderBoxSize[0];if(p){r({width:p.inlineSize,height:p.blockSize});return}}r(Hy(s))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(d):d()});return c.observe(s,{box:"border-box"}),()=>{c.unobserve(s)}},Zy={passive:!0},Fy=typeof window>"u"?!0:"onscrollend"in window,PC=(e,n)=>{const s=e.scrollElement;if(!s)return;const i=e.targetWindow;if(!i)return;let r=0;const c=e.options.useScrollendEvent&&Fy?()=>{}:kC(i,()=>{n(r,!1)},e.options.isScrollingResetDelay),u=y=>()=>{const{horizontal:v,isRtl:b}=e.options;r=v?s.scrollLeft*(b&&-1||1):s.scrollTop,c(),n(r,y)},d=u(!0),g=u(!1);s.addEventListener("scroll",d,Zy);const p=e.options.useScrollendEvent&&Fy;return p&&s.addEventListener("scrollend",g,Zy),()=>{s.removeEventListener("scroll",d),p&&s.removeEventListener("scrollend",g)}},IC=(e,n,s)=>{if(n?.borderBoxSize){const i=n.borderBoxSize[0];if(i)return Math.round(i[s.options.horizontal?"inlineSize":"blockSize"])}return e[s.options.horizontal?"offsetWidth":"offsetHeight"]},BC=(e,{adjustments:n=0,behavior:s},i)=>{var r,c;const u=e+n;(c=(r=i.scrollElement)==null?void 0:r.scrollTo)==null||c.call(r,{[i.options.horizontal?"left":"top"]:u,behavior:s})};class LC{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let s=null;const i=()=>s||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:s=new this.targetWindow.ResizeObserver(r=>{r.forEach(c=>{const u=()=>{this._measureElement(c.target,c)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(u):u()})}));return{disconnect:()=>{var r;(r=i())==null||r.disconnect(),s=null},observe:r=>{var c;return(c=i())==null?void 0:c.observe(r,{box:"border-box"})},unobserve:r=>{var c;return(c=i())==null?void 0:c.unobserve(r)}}})(),this.range=null,this.setOptions=s=>{Object.entries(s).forEach(([i,r])=>{typeof r>"u"&&delete s[i]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:AC,rangeExtractor:OC,onChange:()=>{},measureElement:IC,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...s}},this.notify=s=>{var i,r;(r=(i=this.options).onChange)==null||r.call(i,this,s)},this.maybeNotify=Oi(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),s=>{this.notify(s)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(s=>s()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var s;const i=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==i){if(this.cleanup(),!i){this.maybeNotify();return}this.scrollElement=i,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((s=this.scrollElement)==null?void 0:s.window)??null,this.elementsCache.forEach(r=>{this.observer.observe(r)}),this.unsubs.push(this.options.observeElementRect(this,r=>{this.scrollRect=r,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(r,c)=>{this.scrollAdjustments=0,this.scrollDirection=c?this.getScrollOffset()<r?"forward":"backward":null,this.scrollOffset=r,this.isScrolling=c,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(s,i)=>{const r=new Map,c=new Map;for(let u=i-1;u>=0;u--){const d=s[u];if(r.has(d.lane))continue;const g=c.get(d.lane);if(g==null||d.end>g.end?c.set(d.lane,d):d.end<g.end&&r.set(d.lane,!0),r.size===this.options.lanes)break}return c.size===this.options.lanes?Array.from(c.values()).sort((u,d)=>u.end===d.end?u.index-d.index:u.end-d.end)[0]:void 0},this.getMeasurementOptions=Oi(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(s,i,r,c,u,d)=>(this.prevLanes!==void 0&&this.prevLanes!==d&&(this.lanesChangedFlag=!0),this.prevLanes=d,this.pendingMeasuredCacheIndexes=[],{count:s,paddingStart:i,scrollMargin:r,getItemKey:c,enabled:u,lanes:d}),{key:!1}),this.getMeasurements=Oi(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:s,paddingStart:i,scrollMargin:r,getItemKey:c,enabled:u,lanes:d},g)=>{if(!u)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>s)for(const b of this.laneAssignments.keys())b>=s&&this.laneAssignments.delete(b);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(b=>{this.itemSizeCache.set(b.key,b.size)}));const p=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===s&&(this.lanesSettling=!1);const y=this.measurementsCache.slice(0,p),v=new Array(d).fill(void 0);for(let b=0;b<p;b++){const S=y[b];S&&(v[S.lane]=b)}for(let b=p;b<s;b++){const S=c(b),E=this.laneAssignments.get(b);let T,C;if(E!==void 0&&this.options.lanes>1){T=E;const B=v[T],U=B!==void 0?y[B]:void 0;C=U?U.end+this.options.gap:i+r}else{const B=this.options.lanes===1?y[b-1]:this.getFurthestMeasurement(y,b);C=B?B.end+this.options.gap:i+r,T=B?B.lane:b%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(b,T)}const k=g.get(S),R=typeof k=="number"?k:this.options.estimateSize(b),z=C+R;y[b]={index:b,start:C,size:R,end:z,key:S,lane:T},v[T]=b}return this.measurementsCache=y,y},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Oi(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(s,i,r,c)=>this.range=s.length>0&&i>0?qC({measurements:s,outerSize:i,scrollOffset:r,lanes:c}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Oi(()=>{let s=null,i=null;const r=this.calculateRange();return r&&(s=r.startIndex,i=r.endIndex),this.maybeNotify.updateDeps([this.isScrolling,s,i]),[this.options.rangeExtractor,this.options.overscan,this.options.count,s,i]},(s,i,r,c,u)=>c===null||u===null?[]:s({startIndex:c,endIndex:u,overscan:i,count:r}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=s=>{const i=this.options.indexAttribute,r=s.getAttribute(i);return r?parseInt(r,10):(console.warn(`Missing attribute name '${i}={index}' on measured element.`),-1)},this._measureElement=(s,i)=>{const r=this.indexFromElement(s),c=this.measurementsCache[r];if(!c)return;const u=c.key,d=this.elementsCache.get(u);d!==s&&(d&&this.observer.unobserve(d),this.observer.observe(s),this.elementsCache.set(u,s)),s.isConnected&&this.resizeItem(r,this.options.measureElement(s,i,this))},this.resizeItem=(s,i)=>{const r=this.measurementsCache[s];if(!r)return;const c=this.itemSizeCache.get(r.key)??r.size,u=i-c;u!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(r,u,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=u,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,i)),this.notify(!1))},this.measureElement=s=>{if(!s){this.elementsCache.forEach((i,r)=>{i.isConnected||(this.observer.unobserve(i),this.elementsCache.delete(r))});return}this._measureElement(s,void 0)},this.getVirtualItems=Oi(()=>[this.getVirtualIndexes(),this.getMeasurements()],(s,i)=>{const r=[];for(let c=0,u=s.length;c<u;c++){const d=s[c],g=i[d];r.push(g)}return r},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=s=>{const i=this.getMeasurements();if(i.length!==0)return $y(i[ax(0,i.length-1,r=>$y(i[r]).start,s)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const s=this.scrollElement.document.documentElement;return this.options.horizontal?s.scrollWidth-this.scrollElement.innerWidth:s.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(s,i,r=0)=>{if(!this.scrollElement)return 0;const c=this.getSize(),u=this.getScrollOffset();i==="auto"&&(i=s>=u+c?"end":"start"),i==="center"?s+=(r-c)/2:i==="end"&&(s-=c);const d=this.getMaxScrollOffset();return Math.max(Math.min(d,s),0)},this.getOffsetForIndex=(s,i="auto")=>{s=Math.max(0,Math.min(s,this.options.count-1));const r=this.measurementsCache[s];if(!r)return;const c=this.getSize(),u=this.getScrollOffset();if(i==="auto")if(r.end>=u+c-this.options.scrollPaddingEnd)i="end";else if(r.start<=u+this.options.scrollPaddingStart)i="start";else return[u,i];if(i==="end"&&s===this.options.count-1)return[this.getMaxScrollOffset(),i];const d=i==="end"?r.end+this.options.scrollPaddingEnd:r.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(d,i,r.size),i]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(s,{align:i="start",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(s,i),{adjustments:void 0,behavior:r})},this.scrollToIndex=(s,{align:i="auto",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),s=Math.max(0,Math.min(s,this.options.count-1)),this.currentScrollToIndex=s;let c=0;const u=10,d=p=>{if(!this.targetWindow)return;const y=this.getOffsetForIndex(s,p);if(!y){console.warn("Failed to get offset for index:",s);return}const[v,b]=y;this._scrollToOffset(v,{adjustments:void 0,behavior:r}),this.targetWindow.requestAnimationFrame(()=>{const S=()=>{if(this.currentScrollToIndex!==s)return;const E=this.getScrollOffset(),T=this.getOffsetForIndex(s,b);if(!T){console.warn("Failed to get offset for index:",s);return}RC(T[0],E)||g(b)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(S):S()})},g=p=>{this.targetWindow&&this.currentScrollToIndex===s&&(c++,c<u?this.targetWindow.requestAnimationFrame(()=>d(p)):console.warn(`Failed to scroll to index ${s} after ${u} attempts.`))};d(i)},this.scrollBy=(s,{behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+s,{adjustments:void 0,behavior:i})},this.getTotalSize=()=>{var s;const i=this.getMeasurements();let r;if(i.length===0)r=this.options.paddingStart;else if(this.options.lanes===1)r=((s=i[i.length-1])==null?void 0:s.end)??0;else{const c=Array(this.options.lanes).fill(null);let u=i.length-1;for(;u>=0&&c.some(d=>d===null);){const d=i[u];c[d.lane]===null&&(c[d.lane]=d.end),u--}r=Math.max(...c.filter(d=>d!==null))}return Math.max(r-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(s,{adjustments:i,behavior:r})=>{this.options.scrollToFn(s,{behavior:r,adjustments:i},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(n)}}const ax=(e,n,s,i)=>{for(;e<=n;){const r=(e+n)/2|0,c=s(r);if(c<i)e=r+1;else if(c>i)n=r-1;else return r}return e>0?e-1:0};function qC({measurements:e,outerSize:n,scrollOffset:s,lanes:i}){const r=e.length-1,c=g=>e[g].start;if(e.length<=i)return{startIndex:0,endIndex:r};let u=ax(0,r,c,s),d=u;if(i===1)for(;d<r&&e[d].end<s+n;)d++;else if(i>1){const g=Array(i).fill(0);for(;d<r&&g.some(y=>y<s+n);){const y=e[d];g[y.lane]=y.end,d++}const p=Array(i).fill(s+n);for(;u>=0&&p.some(y=>y>=s);){const y=e[u];p[y.lane]=y.start,u--}u=Math.max(0,u-u%i),d=Math.min(r,d+(i-1-d%i))}return{startIndex:u,endIndex:d}}const Gy=typeof document<"u"?w.useLayoutEffect:w.useEffect;function UC({useFlushSync:e=!0,...n}){const s=w.useReducer(()=>({}),{})[1],i={...n,onChange:(c,u)=>{var d;e&&u?Pa.flushSync(s):s(),(d=n.onChange)==null||d.call(n,c,u)}},[r]=w.useState(()=>new LC(i));return r.setOptions(i),Gy(()=>r._didMount(),[]),Gy(()=>r._willUpdate()),r}function $C(e){return UC({observeElementRect:zC,observeElementOffset:PC,scrollToFn:BC,...e})}const HC={relevance:"Relevance",level:"Combat Level",baseDps:"Base DPS",slots:"Powder Slots",hp:"Health",hpBonus:"Health Bonus",hprRaw:"Raw Health Regen",hprPct:"Health Regen %",mr:"Mana Regen",ms:"Mana Steal",ls:"Life Steal",sdPct:"Spell Damage %",sdRaw:"Spell Damage Raw",mdPct:"Melee Damage %",mdRaw:"Melee Damage Raw",poison:"Poison",spd:"Walk Speed Bonus",atkTier:"Attack Speed Bonus",averageDps:"Average DPS",str:"Strength",dex:"Dexterity",int:"Intelligence",def:"Defense",agi:"Agility",strReq:"Strength Min",dexReq:"Dexterity Min",intReq:"Intelligence Min",defReq:"Defense Min",agiReq:"Agility Min",eDef:"Earth Defense",tDef:"Thunder Defense",wDef:"Water Defense",fDef:"Fire Defense",aDef:"Air Defense",eDamPct:"Earth Damage %",tDamPct:"Thunder Damage %",wDamPct:"Water Damage %",fDamPct:"Fire Damage %",aDamPct:"Air Damage %",damPct:"Damage %",rDamPct:"Elemental Damage %",nDamPct:"Neutral Damage %",lvl:"Combat Level",reqTotal:"Req Total",skillPointTotal:"Skill Point Total",offenseScore:"Offense Score",ehpProxy:"EHP Proxy",utilityScore:"Utility Score",spPct1:"1st Spell Cost %",spRaw1:"1st Spell Cost Raw",spPct2:"2nd Spell Cost %",spRaw2:"2nd Spell Cost Raw",spPct3:"3rd Spell Cost %",spRaw3:"3rd Spell Cost Raw",spPct4:"4th Spell Cost %",spRaw4:"4th Spell Cost Raw",sumSpPct:"Sum Spell Cost %",sumSpRaw:"Sum Spell Cost Raw"};function Ut(e){return HC[e]??e}function gs(e,n,{checkForDefaultPrevented:s=!0}={}){return function(r){if(e?.(r),s===!1||!r.defaultPrevented)return n?.(r)}}function Yy(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function sx(...e){return n=>{let s=!1;const i=e.map(r=>{const c=Yy(r,n);return!s&&typeof c=="function"&&(s=!0),c});if(s)return()=>{for(let r=0;r<i.length;r++){const c=i[r];typeof c=="function"?c():Yy(e[r],null)}}}}function Gs(...e){return w.useCallback(sx(...e),e)}function ZC(e,n){const s=w.createContext(n),i=c=>{const{children:u,...d}=c,g=w.useMemo(()=>d,Object.values(d));return h.jsx(s.Provider,{value:g,children:u})};i.displayName=e+"Provider";function r(c){const u=w.useContext(s);if(u)return u;if(n!==void 0)return n;throw new Error(`\`${c}\` must be used within \`${e}\``)}return[i,r]}function FC(e,n=[]){let s=[];function i(c,u){const d=w.createContext(u),g=s.length;s=[...s,u];const p=v=>{const{scope:b,children:S,...E}=v,T=b?.[e]?.[g]||d,C=w.useMemo(()=>E,Object.values(E));return h.jsx(T.Provider,{value:C,children:S})};p.displayName=c+"Provider";function y(v,b){const S=b?.[e]?.[g]||d,E=w.useContext(S);if(E)return E;if(u!==void 0)return u;throw new Error(`\`${v}\` must be used within \`${c}\``)}return[p,y]}const r=()=>{const c=s.map(u=>w.createContext(u));return function(d){const g=d?.[e]||c;return w.useMemo(()=>({[`__scope${e}`]:{...d,[e]:g}}),[d,g])}};return r.scopeName=e,[i,GC(r,...n)]}function GC(...e){const n=e[0];if(e.length===1)return n;const s=()=>{const i=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(c){const u=i.reduce((d,{useScope:g,scopeName:p})=>{const v=g(c)[`__scope${p}`];return{...d,...v}},{});return w.useMemo(()=>({[`__scope${n.scopeName}`]:u}),[u])}};return s.scopeName=n.scopeName,s}var or=globalThis?.document?w.useLayoutEffect:()=>{},YC=L0[" useId ".trim().toString()]||(()=>{}),VC=0;function bf(e){const[n,s]=w.useState(YC());return or(()=>{s(i=>i??String(VC++))},[e]),e||(n?`radix-${n}`:"")}var KC=L0[" useInsertionEffect ".trim().toString()]||or;function WC({prop:e,defaultProp:n,onChange:s=()=>{},caller:i}){const[r,c,u]=XC({defaultProp:n,onChange:s}),d=e!==void 0,g=d?e:r;{const y=w.useRef(e!==void 0);w.useEffect(()=>{const v=y.current;v!==d&&console.warn(`${i} is changing from ${v?"controlled":"uncontrolled"} to ${d?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),y.current=d},[d,i])}const p=w.useCallback(y=>{if(d){const v=QC(y)?y(e):y;v!==e&&u.current?.(v)}else c(y)},[d,e,c,u]);return[g,p]}function XC({defaultProp:e,onChange:n}){const[s,i]=w.useState(e),r=w.useRef(s),c=w.useRef(n);return KC(()=>{c.current=n},[n]),w.useEffect(()=>{r.current!==s&&(c.current?.(s),r.current=s)},[s,r]),[s,i,c]}function QC(e){return typeof e=="function"}function ix(e){const n=JC(e),s=w.forwardRef((i,r)=>{const{children:c,...u}=i,d=w.Children.toArray(c),g=d.find(tD);if(g){const p=g.props.children,y=d.map(v=>v===g?w.Children.count(p)>1?w.Children.only(null):w.isValidElement(p)?p.props.children:null:v);return h.jsx(n,{...u,ref:r,children:w.isValidElement(p)?w.cloneElement(p,void 0,y):null})}return h.jsx(n,{...u,ref:r,children:c})});return s.displayName=`${e}.Slot`,s}function JC(e){const n=w.forwardRef((s,i)=>{const{children:r,...c}=s;if(w.isValidElement(r)){const u=aD(r),d=nD(c,r.props);return r.type!==w.Fragment&&(d.ref=i?sx(i,u):u),w.cloneElement(r,d)}return w.Children.count(r)>1?w.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var eD=Symbol("radix.slottable");function tD(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===eD}function nD(e,n){const s={...n};for(const i in n){const r=e[i],c=n[i];/^on[A-Z]/.test(i)?r&&c?s[i]=(...d)=>{const g=c(...d);return r(...d),g}:r&&(s[i]=r):i==="style"?s[i]={...r,...c}:i==="className"&&(s[i]=[r,c].filter(Boolean).join(" "))}return{...e,...s}}function aD(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var sD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],La=sD.reduce((e,n)=>{const s=ix(`Primitive.${n}`),i=w.forwardRef((r,c)=>{const{asChild:u,...d}=r,g=u?s:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(g,{...d,ref:c})});return i.displayName=`Primitive.${n}`,{...e,[n]:i}},{});function iD(e,n){e&&Pa.flushSync(()=>e.dispatchEvent(n))}function cr(e){const n=w.useRef(e);return w.useEffect(()=>{n.current=e}),w.useMemo(()=>(...s)=>n.current?.(...s),[])}function lD(e,n=globalThis?.document){const s=cr(e);w.useEffect(()=>{const i=r=>{r.key==="Escape"&&s(r)};return n.addEventListener("keydown",i,{capture:!0}),()=>n.removeEventListener("keydown",i,{capture:!0})},[s,n])}var rD="DismissableLayer",Kf="dismissableLayer.update",oD="dismissableLayer.pointerDownOutside",cD="dismissableLayer.focusOutside",Vy,lx=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),rx=w.forwardRef((e,n)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:c,onInteractOutside:u,onDismiss:d,...g}=e,p=w.useContext(lx),[y,v]=w.useState(null),b=y?.ownerDocument??globalThis?.document,[,S]=w.useState({}),E=Gs(n,j=>v(j)),T=Array.from(p.layers),[C]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),k=T.indexOf(C),R=y?T.indexOf(y):-1,z=p.layersWithOutsidePointerEventsDisabled.size>0,B=R>=k,U=fD(j=>{const D=j.target,K=[...p.branches].some(re=>re.contains(D));!B||K||(r?.(j),u?.(j),j.defaultPrevented||d?.())},b),M=hD(j=>{const D=j.target;[...p.branches].some(re=>re.contains(D))||(c?.(j),u?.(j),j.defaultPrevented||d?.())},b);return lD(j=>{R===p.layers.size-1&&(i?.(j),!j.defaultPrevented&&d&&(j.preventDefault(),d()))},b),w.useEffect(()=>{if(y)return s&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(Vy=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(y)),p.layers.add(y),Ky(),()=>{s&&p.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=Vy)}},[y,b,s,p]),w.useEffect(()=>()=>{y&&(p.layers.delete(y),p.layersWithOutsidePointerEventsDisabled.delete(y),Ky())},[y,p]),w.useEffect(()=>{const j=()=>S({});return document.addEventListener(Kf,j),()=>document.removeEventListener(Kf,j)},[]),h.jsx(La.div,{...g,ref:E,style:{pointerEvents:z?B?"auto":"none":void 0,...e.style},onFocusCapture:gs(e.onFocusCapture,M.onFocusCapture),onBlurCapture:gs(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:gs(e.onPointerDownCapture,U.onPointerDownCapture)})});rx.displayName=rD;var uD="DismissableLayerBranch",dD=w.forwardRef((e,n)=>{const s=w.useContext(lx),i=w.useRef(null),r=Gs(n,i);return w.useEffect(()=>{const c=i.current;if(c)return s.branches.add(c),()=>{s.branches.delete(c)}},[s.branches]),h.jsx(La.div,{...e,ref:r})});dD.displayName=uD;function fD(e,n=globalThis?.document){const s=cr(e),i=w.useRef(!1),r=w.useRef(()=>{});return w.useEffect(()=>{const c=d=>{if(d.target&&!i.current){let g=function(){ox(oD,s,p,{discrete:!0})};const p={originalEvent:d};d.pointerType==="touch"?(n.removeEventListener("click",r.current),r.current=g,n.addEventListener("click",r.current,{once:!0})):g()}else n.removeEventListener("click",r.current);i.current=!1},u=window.setTimeout(()=>{n.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(u),n.removeEventListener("pointerdown",c),n.removeEventListener("click",r.current)}},[n,s]),{onPointerDownCapture:()=>i.current=!0}}function hD(e,n=globalThis?.document){const s=cr(e),i=w.useRef(!1);return w.useEffect(()=>{const r=c=>{c.target&&!i.current&&ox(cD,s,{originalEvent:c},{discrete:!1})};return n.addEventListener("focusin",r),()=>n.removeEventListener("focusin",r)},[n,s]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function Ky(){const e=new CustomEvent(Kf);document.dispatchEvent(e)}function ox(e,n,s,{discrete:i}){const r=s.originalEvent.target,c=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:s});n&&r.addEventListener(e,n,{once:!0}),i?iD(r,c):r.dispatchEvent(c)}var xf="focusScope.autoFocusOnMount",Sf="focusScope.autoFocusOnUnmount",Wy={bubbles:!1,cancelable:!0},mD="FocusScope",cx=w.forwardRef((e,n)=>{const{loop:s=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:c,...u}=e,[d,g]=w.useState(null),p=cr(r),y=cr(c),v=w.useRef(null),b=Gs(n,T=>g(T)),S=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(i){let T=function(z){if(S.paused||!d)return;const B=z.target;d.contains(B)?v.current=B:us(v.current,{select:!0})},C=function(z){if(S.paused||!d)return;const B=z.relatedTarget;B!==null&&(d.contains(B)||us(v.current,{select:!0}))},k=function(z){if(document.activeElement===document.body)for(const U of z)U.removedNodes.length>0&&us(d)};document.addEventListener("focusin",T),document.addEventListener("focusout",C);const R=new MutationObserver(k);return d&&R.observe(d,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",T),document.removeEventListener("focusout",C),R.disconnect()}}},[i,d,S.paused]),w.useEffect(()=>{if(d){Qy.add(S);const T=document.activeElement;if(!d.contains(T)){const k=new CustomEvent(xf,Wy);d.addEventListener(xf,p),d.dispatchEvent(k),k.defaultPrevented||(gD(xD(ux(d)),{select:!0}),document.activeElement===T&&us(d))}return()=>{d.removeEventListener(xf,p),setTimeout(()=>{const k=new CustomEvent(Sf,Wy);d.addEventListener(Sf,y),d.dispatchEvent(k),k.defaultPrevented||us(T??document.body,{select:!0}),d.removeEventListener(Sf,y),Qy.remove(S)},0)}}},[d,p,y,S]);const E=w.useCallback(T=>{if(!s&&!i||S.paused)return;const C=T.key==="Tab"&&!T.altKey&&!T.ctrlKey&&!T.metaKey,k=document.activeElement;if(C&&k){const R=T.currentTarget,[z,B]=pD(R);z&&B?!T.shiftKey&&k===B?(T.preventDefault(),s&&us(z,{select:!0})):T.shiftKey&&k===z&&(T.preventDefault(),s&&us(B,{select:!0})):k===R&&T.preventDefault()}},[s,i,S.paused]);return h.jsx(La.div,{tabIndex:-1,...u,ref:b,onKeyDown:E})});cx.displayName=mD;function gD(e,{select:n=!1}={}){const s=document.activeElement;for(const i of e)if(us(i,{select:n}),document.activeElement!==s)return}function pD(e){const n=ux(e),s=Xy(n,e),i=Xy(n.reverse(),e);return[s,i]}function ux(e){const n=[],s=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)n.push(s.currentNode);return n}function Xy(e,n){for(const s of e)if(!vD(s,{upTo:n}))return s}function vD(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function yD(e){return e instanceof HTMLInputElement&&"select"in e}function us(e,{select:n=!1}={}){if(e&&e.focus){const s=document.activeElement;e.focus({preventScroll:!0}),e!==s&&yD(e)&&n&&e.select()}}var Qy=bD();function bD(){let e=[];return{add(n){const s=e[0];n!==s&&s?.pause(),e=Jy(e,n),e.unshift(n)},remove(n){e=Jy(e,n),e[0]?.resume()}}}function Jy(e,n){const s=[...e],i=s.indexOf(n);return i!==-1&&s.splice(i,1),s}function xD(e){return e.filter(n=>n.tagName!=="A")}var SD="Portal",dx=w.forwardRef((e,n)=>{const{container:s,...i}=e,[r,c]=w.useState(!1);or(()=>c(!0),[]);const u=s||r&&globalThis?.document?.body;return u?Qw.createPortal(h.jsx(La.div,{...i,ref:n}),u):null});dx.displayName=SD;function wD(e,n){return w.useReducer((s,i)=>n[s][i]??s,e)}var Ac=e=>{const{present:n,children:s}=e,i=_D(n),r=typeof s=="function"?s({present:i.isPresent}):w.Children.only(s),c=Gs(i.ref,ED(r));return typeof s=="function"||i.isPresent?w.cloneElement(r,{ref:c}):null};Ac.displayName="Presence";function _D(e){const[n,s]=w.useState(),i=w.useRef(null),r=w.useRef(e),c=w.useRef("none"),u=e?"mounted":"unmounted",[d,g]=wD(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const p=Lo(i.current);c.current=d==="mounted"?p:"none"},[d]),or(()=>{const p=i.current,y=r.current;if(y!==e){const b=c.current,S=Lo(p);e?g("MOUNT"):S==="none"||p?.display==="none"?g("UNMOUNT"):g(y&&b!==S?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,g]),or(()=>{if(n){let p;const y=n.ownerDocument.defaultView??window,v=S=>{const T=Lo(i.current).includes(CSS.escape(S.animationName));if(S.target===n&&T&&(g("ANIMATION_END"),!r.current)){const C=n.style.animationFillMode;n.style.animationFillMode="forwards",p=y.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=C)})}},b=S=>{S.target===n&&(c.current=Lo(i.current))};return n.addEventListener("animationstart",b),n.addEventListener("animationcancel",v),n.addEventListener("animationend",v),()=>{y.clearTimeout(p),n.removeEventListener("animationstart",b),n.removeEventListener("animationcancel",v),n.removeEventListener("animationend",v)}}else g("ANIMATION_END")},[n,g]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:w.useCallback(p=>{i.current=p?getComputedStyle(p):null,s(p)},[])}}function Lo(e){return e?.animationName||"none"}function ED(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning;return s?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,s=n&&"isReactWarning"in n&&n.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var wf=0;function TD(){w.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??e0()),document.body.insertAdjacentElement("beforeend",e[1]??e0()),wf++,()=>{wf===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),wf--}},[])}function e0(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var da=function(){return da=Object.assign||function(n){for(var s,i=1,r=arguments.length;i<r;i++){s=arguments[i];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(n[c]=s[c])}return n},da.apply(this,arguments)};function fx(e,n){var s={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&n.indexOf(i)<0&&(s[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)n.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(s[i[r]]=e[i[r]]);return s}function ND(e,n,s){if(s||arguments.length===2)for(var i=0,r=n.length,c;i<r;i++)(c||!(i in n))&&(c||(c=Array.prototype.slice.call(n,0,i)),c[i]=n[i]);return e.concat(c||Array.prototype.slice.call(n))}var Jo="right-scroll-bar-position",ec="width-before-scroll-bar",MD="with-scroll-bars-hidden",jD="--removed-body-scroll-bar-size";function _f(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function CD(e,n){var s=w.useState(function(){return{value:e,callback:n,facade:{get current(){return s.value},set current(i){var r=s.value;r!==i&&(s.value=i,s.callback(i,r))}}}})[0];return s.callback=n,s.facade}var DD=typeof window<"u"?w.useLayoutEffect:w.useEffect,t0=new WeakMap;function RD(e,n){var s=CD(null,function(i){return e.forEach(function(r){return _f(r,i)})});return DD(function(){var i=t0.get(s);if(i){var r=new Set(i),c=new Set(e),u=s.current;r.forEach(function(d){c.has(d)||_f(d,null)}),c.forEach(function(d){r.has(d)||_f(d,u)})}t0.set(s,e)},[e]),s}function kD(e){return e}function AD(e,n){n===void 0&&(n=kD);var s=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:e},useMedium:function(c){var u=n(c,i);return s.push(u),function(){s=s.filter(function(d){return d!==u})}},assignSyncMedium:function(c){for(i=!0;s.length;){var u=s;s=[],u.forEach(c)}s={push:function(d){return c(d)},filter:function(){return s}}},assignMedium:function(c){i=!0;var u=[];if(s.length){var d=s;s=[],d.forEach(c),u=s}var g=function(){var y=u;u=[],y.forEach(c)},p=function(){return Promise.resolve().then(g)};p(),s={push:function(y){u.push(y),p()},filter:function(y){return u=u.filter(y),s}}}};return r}function OD(e){e===void 0&&(e={});var n=AD(null);return n.options=da({async:!0,ssr:!1},e),n}var hx=function(e){var n=e.sideCar,s=fx(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=n.read();if(!i)throw new Error("Sidecar medium not found");return w.createElement(i,da({},s))};hx.isSideCarExport=!0;function zD(e,n){return e.useMedium(n),hx}var mx=OD(),Ef=function(){},Oc=w.forwardRef(function(e,n){var s=w.useRef(null),i=w.useState({onScrollCapture:Ef,onWheelCapture:Ef,onTouchMoveCapture:Ef}),r=i[0],c=i[1],u=e.forwardProps,d=e.children,g=e.className,p=e.removeScrollBar,y=e.enabled,v=e.shards,b=e.sideCar,S=e.noRelative,E=e.noIsolation,T=e.inert,C=e.allowPinchZoom,k=e.as,R=k===void 0?"div":k,z=e.gapMode,B=fx(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),U=b,M=RD([s,n]),j=da(da({},B),r);return w.createElement(w.Fragment,null,y&&w.createElement(U,{sideCar:mx,removeScrollBar:p,shards:v,noRelative:S,noIsolation:E,inert:T,setCallbacks:c,allowPinchZoom:!!C,lockRef:s,gapMode:z}),u?w.cloneElement(w.Children.only(d),da(da({},j),{ref:M})):w.createElement(R,da({},j,{className:g,ref:M}),d))});Oc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Oc.classNames={fullWidth:ec,zeroRight:Jo};var PD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ID(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=PD();return n&&e.setAttribute("nonce",n),e}function BD(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function LD(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var qD=function(){var e=0,n=null;return{add:function(s){e==0&&(n=ID())&&(BD(n,s),LD(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},UD=function(){var e=qD();return function(n,s){w.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&s])}},gx=function(){var e=UD(),n=function(s){var i=s.styles,r=s.dynamic;return e(i,r),null};return n},$D={left:0,top:0,right:0,gap:0},Tf=function(e){return parseInt(e||"",10)||0},HD=function(e){var n=window.getComputedStyle(document.body),s=n[e==="padding"?"paddingLeft":"marginLeft"],i=n[e==="padding"?"paddingTop":"marginTop"],r=n[e==="padding"?"paddingRight":"marginRight"];return[Tf(s),Tf(i),Tf(r)]},ZD=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return $D;var n=HD(e),s=document.documentElement.clientWidth,i=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,i-s+n[2]-n[0])}},FD=gx(),Gi="data-scroll-locked",GD=function(e,n,s,i){var r=e.left,c=e.top,u=e.right,d=e.gap;return s===void 0&&(s="margin"),`
  .`.concat(MD,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(d,"px ").concat(i,`;
  }
  body[`).concat(Gi,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(i,";"),s==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(d,"px ").concat(i,`;
    `),s==="padding"&&"padding-right: ".concat(d,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Jo,` {
    right: `).concat(d,"px ").concat(i,`;
  }
  
  .`).concat(ec,` {
    margin-right: `).concat(d,"px ").concat(i,`;
  }
  
  .`).concat(Jo," .").concat(Jo,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(ec," .").concat(ec,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Gi,`] {
    `).concat(jD,": ").concat(d,`px;
  }
`)},n0=function(){var e=parseInt(document.body.getAttribute(Gi)||"0",10);return isFinite(e)?e:0},YD=function(){w.useEffect(function(){return document.body.setAttribute(Gi,(n0()+1).toString()),function(){var e=n0()-1;e<=0?document.body.removeAttribute(Gi):document.body.setAttribute(Gi,e.toString())}},[])},VD=function(e){var n=e.noRelative,s=e.noImportant,i=e.gapMode,r=i===void 0?"margin":i;YD();var c=w.useMemo(function(){return ZD(r)},[r]);return w.createElement(FD,{styles:GD(c,!n,r,s?"":"!important")})},Wf=!1;if(typeof window<"u")try{var qo=Object.defineProperty({},"passive",{get:function(){return Wf=!0,!0}});window.addEventListener("test",qo,qo),window.removeEventListener("test",qo,qo)}catch{Wf=!1}var zi=Wf?{passive:!1}:!1,KD=function(e){return e.tagName==="TEXTAREA"},px=function(e,n){if(!(e instanceof Element))return!1;var s=window.getComputedStyle(e);return s[n]!=="hidden"&&!(s.overflowY===s.overflowX&&!KD(e)&&s[n]==="visible")},WD=function(e){return px(e,"overflowY")},XD=function(e){return px(e,"overflowX")},a0=function(e,n){var s=n.ownerDocument,i=n;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=vx(e,i);if(r){var c=yx(e,i),u=c[1],d=c[2];if(u>d)return!0}i=i.parentNode}while(i&&i!==s.body);return!1},QD=function(e){var n=e.scrollTop,s=e.scrollHeight,i=e.clientHeight;return[n,s,i]},JD=function(e){var n=e.scrollLeft,s=e.scrollWidth,i=e.clientWidth;return[n,s,i]},vx=function(e,n){return e==="v"?WD(n):XD(n)},yx=function(e,n){return e==="v"?QD(n):JD(n)},eR=function(e,n){return e==="h"&&n==="rtl"?-1:1},tR=function(e,n,s,i,r){var c=eR(e,window.getComputedStyle(n).direction),u=c*i,d=s.target,g=n.contains(d),p=!1,y=u>0,v=0,b=0;do{if(!d)break;var S=yx(e,d),E=S[0],T=S[1],C=S[2],k=T-C-c*E;(E||k)&&vx(e,d)&&(v+=k,b+=E);var R=d.parentNode;d=R&&R.nodeType===Node.DOCUMENT_FRAGMENT_NODE?R.host:R}while(!g&&d!==document.body||g&&(n.contains(d)||n===d));return(y&&Math.abs(v)<1||!y&&Math.abs(b)<1)&&(p=!0),p},Uo=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},s0=function(e){return[e.deltaX,e.deltaY]},i0=function(e){return e&&"current"in e?e.current:e},nR=function(e,n){return e[0]===n[0]&&e[1]===n[1]},aR=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},sR=0,Pi=[];function iR(e){var n=w.useRef([]),s=w.useRef([0,0]),i=w.useRef(),r=w.useState(sR++)[0],c=w.useState(gx)[0],u=w.useRef(e);w.useEffect(function(){u.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var T=ND([e.lockRef.current],(e.shards||[]).map(i0),!0).filter(Boolean);return T.forEach(function(C){return C.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),T.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var d=w.useCallback(function(T,C){if("touches"in T&&T.touches.length===2||T.type==="wheel"&&T.ctrlKey)return!u.current.allowPinchZoom;var k=Uo(T),R=s.current,z="deltaX"in T?T.deltaX:R[0]-k[0],B="deltaY"in T?T.deltaY:R[1]-k[1],U,M=T.target,j=Math.abs(z)>Math.abs(B)?"h":"v";if("touches"in T&&j==="h"&&M.type==="range")return!1;var D=window.getSelection(),K=D&&D.anchorNode,re=K?K===M||K.contains(M):!1;if(re)return!1;var he=a0(j,M);if(!he)return!0;if(he?U=j:(U=j==="v"?"h":"v",he=a0(j,M)),!he)return!1;if(!i.current&&"changedTouches"in T&&(z||B)&&(i.current=U),!U)return!0;var se=i.current||U;return tR(se,C,T,se==="h"?z:B)},[]),g=w.useCallback(function(T){var C=T;if(!(!Pi.length||Pi[Pi.length-1]!==c)){var k="deltaY"in C?s0(C):Uo(C),R=n.current.filter(function(U){return U.name===C.type&&(U.target===C.target||C.target===U.shadowParent)&&nR(U.delta,k)})[0];if(R&&R.should){C.cancelable&&C.preventDefault();return}if(!R){var z=(u.current.shards||[]).map(i0).filter(Boolean).filter(function(U){return U.contains(C.target)}),B=z.length>0?d(C,z[0]):!u.current.noIsolation;B&&C.cancelable&&C.preventDefault()}}},[]),p=w.useCallback(function(T,C,k,R){var z={name:T,delta:C,target:k,should:R,shadowParent:lR(k)};n.current.push(z),setTimeout(function(){n.current=n.current.filter(function(B){return B!==z})},1)},[]),y=w.useCallback(function(T){s.current=Uo(T),i.current=void 0},[]),v=w.useCallback(function(T){p(T.type,s0(T),T.target,d(T,e.lockRef.current))},[]),b=w.useCallback(function(T){p(T.type,Uo(T),T.target,d(T,e.lockRef.current))},[]);w.useEffect(function(){return Pi.push(c),e.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:b}),document.addEventListener("wheel",g,zi),document.addEventListener("touchmove",g,zi),document.addEventListener("touchstart",y,zi),function(){Pi=Pi.filter(function(T){return T!==c}),document.removeEventListener("wheel",g,zi),document.removeEventListener("touchmove",g,zi),document.removeEventListener("touchstart",y,zi)}},[]);var S=e.removeScrollBar,E=e.inert;return w.createElement(w.Fragment,null,E?w.createElement(c,{styles:aR(r)}):null,S?w.createElement(VD,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function lR(e){for(var n=null;e!==null;)e instanceof ShadowRoot&&(n=e.host,e=e.host),e=e.parentNode;return n}const rR=zD(mx,iR);var bx=w.forwardRef(function(e,n){return w.createElement(Oc,da({},e,{ref:n,sideCar:rR}))});bx.classNames=Oc.classNames;var oR=function(e){if(typeof document>"u")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},Ii=new WeakMap,$o=new WeakMap,Ho={},Nf=0,xx=function(e){return e&&(e.host||xx(e.parentNode))},cR=function(e,n){return n.map(function(s){if(e.contains(s))return s;var i=xx(s);return i&&e.contains(i)?i:(console.error("aria-hidden",s,"in not contained inside",e,". Doing nothing"),null)}).filter(function(s){return!!s})},uR=function(e,n,s,i){var r=cR(n,Array.isArray(e)?e:[e]);Ho[s]||(Ho[s]=new WeakMap);var c=Ho[s],u=[],d=new Set,g=new Set(r),p=function(v){!v||d.has(v)||(d.add(v),p(v.parentNode))};r.forEach(p);var y=function(v){!v||g.has(v)||Array.prototype.forEach.call(v.children,function(b){if(d.has(b))y(b);else try{var S=b.getAttribute(i),E=S!==null&&S!=="false",T=(Ii.get(b)||0)+1,C=(c.get(b)||0)+1;Ii.set(b,T),c.set(b,C),u.push(b),T===1&&E&&$o.set(b,!0),C===1&&b.setAttribute(s,"true"),E||b.setAttribute(i,"true")}catch(k){console.error("aria-hidden: cannot operate on ",b,k)}})};return y(n),d.clear(),Nf++,function(){u.forEach(function(v){var b=Ii.get(v)-1,S=c.get(v)-1;Ii.set(v,b),c.set(v,S),b||($o.has(v)||v.removeAttribute(i),$o.delete(v)),S||v.removeAttribute(s)}),Nf--,Nf||(Ii=new WeakMap,Ii=new WeakMap,$o=new WeakMap,Ho={})}},dR=function(e,n,s){s===void 0&&(s="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),r=oR(e);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),uR(i,r,s,"aria-hidden")):function(){return null}},zc="Dialog",[Sx]=FC(zc),[fR,ia]=Sx(zc),wx=e=>{const{__scopeDialog:n,children:s,open:i,defaultOpen:r,onOpenChange:c,modal:u=!0}=e,d=w.useRef(null),g=w.useRef(null),[p,y]=WC({prop:i,defaultProp:r??!1,onChange:c,caller:zc});return h.jsx(fR,{scope:n,triggerRef:d,contentRef:g,contentId:bf(),titleId:bf(),descriptionId:bf(),open:p,onOpenChange:y,onOpenToggle:w.useCallback(()=>y(v=>!v),[y]),modal:u,children:s})};wx.displayName=zc;var _x="DialogTrigger",hR=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=ia(_x,s),c=Gs(n,r.triggerRef);return h.jsx(La.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":zh(r.open),...i,ref:c,onClick:gs(e.onClick,r.onOpenToggle)})});hR.displayName=_x;var Ah="DialogPortal",[mR,Ex]=Sx(Ah,{forceMount:void 0}),Tx=e=>{const{__scopeDialog:n,forceMount:s,children:i,container:r}=e,c=ia(Ah,n);return h.jsx(mR,{scope:n,forceMount:s,children:w.Children.map(i,u=>h.jsx(Ac,{present:s||c.open,children:h.jsx(dx,{asChild:!0,container:r,children:u})}))})};Tx.displayName=Ah;var pc="DialogOverlay",Nx=w.forwardRef((e,n)=>{const s=Ex(pc,e.__scopeDialog),{forceMount:i=s.forceMount,...r}=e,c=ia(pc,e.__scopeDialog);return c.modal?h.jsx(Ac,{present:i||c.open,children:h.jsx(pR,{...r,ref:n})}):null});Nx.displayName=pc;var gR=ix("DialogOverlay.RemoveScroll"),pR=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=ia(pc,s);return h.jsx(bx,{as:gR,allowPinchZoom:!0,shards:[r.contentRef],children:h.jsx(La.div,{"data-state":zh(r.open),...i,ref:n,style:{pointerEvents:"auto",...i.style}})})}),$s="DialogContent",Mx=w.forwardRef((e,n)=>{const s=Ex($s,e.__scopeDialog),{forceMount:i=s.forceMount,...r}=e,c=ia($s,e.__scopeDialog);return h.jsx(Ac,{present:i||c.open,children:c.modal?h.jsx(vR,{...r,ref:n}):h.jsx(yR,{...r,ref:n})})});Mx.displayName=$s;var vR=w.forwardRef((e,n)=>{const s=ia($s,e.__scopeDialog),i=w.useRef(null),r=Gs(n,s.contentRef,i);return w.useEffect(()=>{const c=i.current;if(c)return dR(c)},[]),h.jsx(jx,{...e,ref:r,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:gs(e.onCloseAutoFocus,c=>{c.preventDefault(),s.triggerRef.current?.focus()}),onPointerDownOutside:gs(e.onPointerDownOutside,c=>{const u=c.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0;(u.button===2||d)&&c.preventDefault()}),onFocusOutside:gs(e.onFocusOutside,c=>c.preventDefault())})}),yR=w.forwardRef((e,n)=>{const s=ia($s,e.__scopeDialog),i=w.useRef(!1),r=w.useRef(!1);return h.jsx(jx,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{e.onCloseAutoFocus?.(c),c.defaultPrevented||(i.current||s.triggerRef.current?.focus(),c.preventDefault()),i.current=!1,r.current=!1},onInteractOutside:c=>{e.onInteractOutside?.(c),c.defaultPrevented||(i.current=!0,c.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const u=c.target;s.triggerRef.current?.contains(u)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&r.current&&c.preventDefault()}})}),jx=w.forwardRef((e,n)=>{const{__scopeDialog:s,trapFocus:i,onOpenAutoFocus:r,onCloseAutoFocus:c,...u}=e,d=ia($s,s),g=w.useRef(null),p=Gs(n,g);return TD(),h.jsxs(h.Fragment,{children:[h.jsx(cx,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:r,onUnmountAutoFocus:c,children:h.jsx(rx,{role:"dialog",id:d.contentId,"aria-describedby":d.descriptionId,"aria-labelledby":d.titleId,"data-state":zh(d.open),...u,ref:p,onDismiss:()=>d.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(bR,{titleId:d.titleId}),h.jsx(SR,{contentRef:g,descriptionId:d.descriptionId})]})]})}),Oh="DialogTitle",Cx=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=ia(Oh,s);return h.jsx(La.h2,{id:r.titleId,...i,ref:n})});Cx.displayName=Oh;var Dx="DialogDescription",Rx=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=ia(Dx,s);return h.jsx(La.p,{id:r.descriptionId,...i,ref:n})});Rx.displayName=Dx;var kx="DialogClose",Ax=w.forwardRef((e,n)=>{const{__scopeDialog:s,...i}=e,r=ia(kx,s);return h.jsx(La.button,{type:"button",...i,ref:n,onClick:gs(e.onClick,()=>r.onOpenChange(!1))})});Ax.displayName=kx;function zh(e){return e?"open":"closed"}var Ox="DialogTitleWarning",[sz,zx]=ZC(Ox,{contentName:$s,titleName:Oh,docsSlug:"dialog"}),bR=({titleId:e})=>{const n=zx(Ox),s=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return w.useEffect(()=>{e&&(document.getElementById(e)||console.error(s))},[s,e]),null},xR="DialogDescriptionWarning",SR=({contentRef:e,descriptionId:n})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${zx(xR).contentName}}.`;return w.useEffect(()=>{const r=e.current?.getAttribute("aria-describedby");n&&r&&(document.getElementById(n)||console.warn(i))},[i,e,n]),null},wR=wx,_R=Tx,ER=Nx,TR=Mx,NR=Cx,MR=Rx,jR=Ax;function Px(e){var n,s,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(n=0;n<r;n++)e[n]&&(s=Px(e[n]))&&(i&&(i+=" "),i+=s)}else for(s in e)e[s]&&(i&&(i+=" "),i+=s);return i}function CR(){for(var e,n,s=0,i="",r=arguments.length;s<r;s++)(e=arguments[s])&&(n=Px(e))&&(i&&(i+=" "),i+=n);return i}function gt(...e){return CR(e)}function Ce(e){return h.jsx("button",{type:e.type??"button",onClick:e.onClick,className:gt("wb-button",e.className,e.disabled&&"opacity-50 cursor-not-allowed"),"data-variant":e.variant==="default"?void 0:e.variant,title:e.title,disabled:e.disabled,children:e.children})}function Yi(e){return h.jsxs("section",{className:gt("wb-panel rounded-2xl",e.className),children:[(e.title||e.headerRight)&&h.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-[var(--wb-border-muted)] px-4 py-3",children:[h.jsx("div",{className:"text-sm font-semibold tracking-wide text-[var(--wb-text)]",children:e.title}),e.headerRight?h.jsx("div",{className:"flex items-center gap-2",children:e.headerRight}):null]}),h.jsx("div",{className:"min-h-0",children:e.children})]})}function Ie(e){return h.jsx("label",{className:gt("mb-1 block text-xs font-medium uppercase tracking-wide text-[var(--wb-muted)]",e.className),children:e.children})}function et(e){return h.jsx("button",{type:"button",className:gt("wb-chip",e.className,e.disabled&&"opacity-50 cursor-not-allowed"),"data-active":e.active?"true":"false",onClick:e.disabled?void 0:e.onClick,title:e.title,disabled:e.disabled,children:e.children})}function Zo(e){const n=e.delta,s=n==null?"":n>0?"wb-text-success":n<0?"wb-text-danger":"text-[var(--wb-muted)]";return h.jsxs("div",{className:gt("wb-card p-3",e.className),children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:e.label}),h.jsx("div",{className:gt("mt-1 text-lg font-semibold",e.valueClassName),children:e.value}),n!=null?h.jsxs("div",{className:gt("mt-1 text-xs",s),children:[n>0?"+":"",Math.round(n)]}):null]})}function Vi(e){return h.jsx("div",{className:gt("wb-scrollbar min-h-0 overflow-auto",e.className),children:e.children})}function Ph(e){return h.jsx(wR,{open:e.open,onOpenChange:e.onOpenChange,children:h.jsxs(_R,{children:[h.jsx(ER,{className:"fixed inset-0 z-40 backdrop-blur-sm",style:{background:"var(--wb-overlay)"}}),h.jsxs(TR,{className:gt("wb-panel fixed left-1/2 top-1/2 z-50 w-[min(95vw,1100px)] -translate-x-1/2 -translate-y-1/2 rounded-2xl shadow-2xl",e.className),children:[h.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-[var(--wb-border-muted)] px-5 py-4",children:[h.jsxs("div",{children:[h.jsx(NR,{className:"text-base font-semibold",children:e.title}),e.description?h.jsx(MR,{className:"mt-1 text-sm text-[var(--wb-muted)]",children:e.description}):null]}),h.jsx(jR,{asChild:!0,children:h.jsx("button",{className:"wb-icon-button","aria-label":"Close",children:h.jsx(dT,{size:16})})})]}),h.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:e.children}),e.footer?h.jsx("div",{className:"border-t border-[var(--wb-border-muted)] px-5 py-4",children:e.footer}):null]})]})})}function za(e){return h.jsxs("div",{children:[h.jsx(Ie,{children:e.label}),h.jsx("input",{className:"wb-input",type:"number",value:e.value??"",min:e.min,max:e.max,step:e.step??1,placeholder:e.placeholder,onChange:n=>{const s=n.target.value.trim();e.onChange(s===""?null:Number(s))}})]})}const DR={bow:"0 0",spear:"9.090909090909088% 0",wand:"18.181818181818183% 0",dagger:"27.27272727272727% 0",relik:"36.36363636363637% 0",helmet:"45.45454545454546% 0",chestplate:"54.54545454545454% 0",leggings:"63.63636363636363% 0",boots:"72.72727272727272% 0",ring:"81.81818181818181% 0",bracelet:"90.90909090909092% 0",necklace:"100% 0"};function RR(e){return e.category==="weapon"?e.type:e.category}function kR(e){const n=RR(e.item),s=DR[n],i="./media/items/new.png";return s?h.jsx("div",{className:"wb-surface-strong relative h-9 w-9 shrink-0 overflow-hidden rounded-lg",title:`${e.item.type} icon`,children:h.jsx("div",{"aria-hidden":!0,className:"absolute inset-[3px] rounded-[6px]",style:{backgroundImage:`url(${i})`,backgroundPosition:s,backgroundSize:"1200% 100%",backgroundRepeat:"no-repeat",imageRendering:"pixelated"}})}):h.jsx("div",{className:"wb-surface-strong flex h-9 w-9 items-center justify-center rounded-lg text-xs text-[var(--wb-muted)]",children:"?"})}function AR(e){switch(e){case"Mythic":return"wb-tier-mythic";case"Fabled":return"wb-tier-fabled";case"Legendary":return"wb-tier-legendary";case"Rare":return"wb-tier-rare";case"Unique":return"wb-tier-unique";case"Set":return"wb-tier-set";default:return"wb-tier-normal"}}function Ix(e){const n=[{label:"Strength",value:e.numeric.reqStr},{label:"Dexterity",value:e.numeric.reqDex},{label:"Intelligence",value:e.numeric.reqInt},{label:"Defense",value:e.numeric.reqDef},{label:"Agility",value:e.numeric.reqAgi}].filter(s=>s.value>0);return n.length===0?null:n.map(s=>`${s.label} ${s.value}`).join(", ")}function Bx(e){const n=[{label:"Strength",value:e.numeric.spStr},{label:"Dexterity",value:e.numeric.spDex},{label:"Intelligence",value:e.numeric.spInt},{label:"Defense",value:e.numeric.spDef},{label:"Agility",value:e.numeric.spAgi}].filter(s=>s.value!==0);return n.length===0?null:n.map(s=>`${s.label} ${s.value>0?"+":""}${s.value}`).join(", ")}function Lx(e){const n=e.legacyRaw,s=[["Neutral",typeof n.nDam=="string"?n.nDam:""],["Earth",typeof n.eDam=="string"?n.eDam:""],["Thunder",typeof n.tDam=="string"?n.tDam:""],["Water",typeof n.wDam=="string"?n.wDam:""],["Fire",typeof n.fDam=="string"?n.fDam:""],["Air",typeof n.aDam=="string"?n.aDam:""]].filter(([,i])=>i&&i!=="0-0");return s.length===0?null:s.map(([i,r])=>`${i}: ${r}`).join("  ")}const OR=new Set(["reqTotal","skillPointTotal","offenseScore","ehpProxy","utilityScore","sumSpPct","sumSpRaw","strReq","dexReq","intReq","defReq","agiReq","str","dex","int","def","agi"]);function qx(e){const n=[];for(const[s,i]of Object.entries(e.numericIndex)){if(OR.has(s))continue;const r=typeof i=="number"?i:0;r!==0&&n.push({key:s,value:r})}return e.powderSlots>0&&!n.some(s=>s.key==="slots")&&n.push({key:"slots",value:e.powderSlots}),n.sort((s,i)=>Ut(s.key).localeCompare(Ut(i.key))),n}function Ux(e,n){return Number.isInteger(n)?String(n):n.toFixed(1).replace(/\.0$/,"")}function $x(e){return e>0?"positive":e<0?"negative":"neutral"}function zR(e){const{item:n}=e,s=Ix(n),i=Bx(n),r=Lx(n),c=qx(n),u=e.dense??!1;return h.jsxs("div",{className:gt("space-y-1.5",u?"text-[11px]":"text-xs"),children:[(s||i)&&h.jsxs("div",{className:"flex flex-wrap gap-1.5 text-[11px]",children:[s?h.jsxs("span",{className:"wb-pill","data-tone":"req",children:[h.jsx("span",{className:"font-semibold",children:"Req"}),h.jsx("span",{className:"ml-1",children:s})]}):null,i?h.jsxs("span",{className:"wb-pill","data-tone":"bonus",children:[h.jsx("span",{className:"font-semibold",children:"SP"}),h.jsx("span",{className:"ml-1",children:i})]}):null]}),c.length>0?h.jsx("div",{className:"flex flex-wrap gap-1",children:c.map(({key:d,value:g})=>h.jsxs("span",{className:"wb-pill text-[11px]","data-tone":$x(g),children:[h.jsx("span",{className:gt((g>0||g<0)&&"font-semibold"),children:Ux(d,g)}),h.jsx("span",{className:"ml-1 opacity-90",children:Ut(d)})]},d))}):null,r?h.jsx("div",{className:"wb-surface-strong flex flex-wrap gap-1.5 rounded px-2 py-1.5 text-[11px] leading-relaxed text-[var(--wb-muted)]",children:r.split(/\s{2,}/).map((d,g)=>h.jsx("span",{className:"whitespace-nowrap",children:d},g))}):null,h.jsxs("div",{className:"grid grid-cols-2 gap-1.5",children:[h.jsxs("div",{className:"wb-surface-strong rounded px-2 py-1",children:[Ut("baseDps")," ",Math.round(n.roughScoreFields.baseDps)]}),h.jsxs("div",{className:"wb-surface-strong rounded px-2 py-1",children:[Ut("ehpProxy")," ",Math.round(n.roughScoreFields.ehpProxy)]}),h.jsxs("div",{className:"wb-surface-strong rounded px-2 py-1",children:[Ut("offenseScore")," ",Math.round(n.roughScoreFields.offense)]}),h.jsxs("div",{className:"wb-surface-strong rounded px-2 py-1",children:[Ut("skillPointTotal")," ",Math.round(n.roughScoreFields.skillPointTotal)]})]}),n.majorIds.length>0?h.jsxs("div",{className:"break-words text-[var(--wb-muted)]",children:["Major IDs: ",n.majorIds.join(", ")]}):null]})}function Pc(e){const n=ib({id:e.dragData?`drag:${e.dragData.kind}:${e.item.id}:${e.dragData.sourceSlot??e.dragData.sourceCategory??""}`:`item:${e.item.id}`,data:e.dragData?{dragItem:e.dragData}:void 0}),s=e.dragData?{transform:sc.Translate.toString(n.transform),opacity:n.isDragging?.45:1}:void 0,i=e.showDetails?Ix(e.item):null,r=e.showDetails?Bx(e.item):null,c=e.showDetails?Lx(e.item):null,u=e.showDetails?qx(e.item):[];return h.jsxs("div",{ref:e.dragData?n.setNodeRef:void 0,style:s,className:gt("wb-card",e.dense?"p-2":e.compact?"p-2.5":"p-3",n.isDragging&&"ring-2 ring-[var(--wb-success-border)]"),onMouseEnter:()=>e.onHover?.(!0),onMouseLeave:()=>e.onHover?.(!1),children:[h.jsxs("div",{className:gt("flex items-start gap-2",e.dense&&"gap-1.5"),children:[e.dragData?h.jsx("button",{type:"button",...n.listeners,...n.attributes,className:"wb-icon-button mt-0.5","aria-label":`Drag ${e.item.displayName}`,children:h.jsx($E,{size:14})}):null,h.jsx(kR,{item:e.item}),h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[h.jsx("div",{className:gt("break-words text-sm font-semibold leading-tight",AR(e.item.tier)),children:e.item.displayName}),e.badge?h.jsx("span",{className:"wb-chip",children:e.badge}):null,e.locked?h.jsxs("span",{className:"wb-chip inline-flex items-center gap-1",children:[h.jsx(cb,{size:11})," Locked"]}):null]}),h.jsxs("div",{className:gt("mt-1 flex flex-wrap gap-y-1 text-[var(--wb-muted)]",e.dense?"gap-x-2 text-xs":"gap-x-3 text-xs"),children:[h.jsx("span",{children:e.item.type}),h.jsxs("span",{children:["Lv ",e.item.level]}),e.dense?null:h.jsx("span",{children:e.item.tier}),!e.dense&&e.item.classReq?h.jsx("span",{children:e.item.classReq}):null,!e.dense&&e.item.majorIds.length>0?h.jsxs("span",{children:["MID ",e.item.majorIds.length]}):null,e.dense&&e.item.majorIds.length>0?h.jsxs("span",{children:["M",e.item.majorIds.length]}):null]}),e.showDetails?h.jsxs("div",{className:gt("mt-2 space-y-1",e.dense?"text-[11px]":"text-xs"),children:[(i||r)&&h.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[i?h.jsxs("span",{className:"wb-pill","data-tone":"req",children:[h.jsx("span",{className:"font-semibold",children:"Req"}),h.jsx("span",{className:"ml-1",children:i})]}):null,r?h.jsxs("span",{className:"wb-pill","data-tone":"bonus",children:[h.jsx("span",{className:"font-semibold",children:"SP"}),h.jsx("span",{className:"ml-1",children:r})]}):null]}),u.length>0?h.jsx("div",{className:"flex flex-wrap gap-1",children:u.map(({key:d,value:g})=>h.jsxs("span",{className:"wb-pill text-[11px]","data-tone":$x(g),children:[h.jsx("span",{className:gt((g>0||g<0)&&"font-semibold"),children:Ux(d,g)}),h.jsx("span",{className:"ml-1 opacity-90",children:Ut(d)})]},d))}):null,c?h.jsx("div",{className:"wb-surface-strong flex flex-wrap gap-1.5 rounded px-2 py-1.5 text-[11px] leading-relaxed text-[var(--wb-muted)]",children:c.split(/\s{2,}/).map((d,g)=>h.jsx("span",{className:"whitespace-nowrap",children:d},g))}):null,e.item.majorIds.length>0?h.jsxs("div",{className:"break-words text-[var(--wb-muted)]",children:["Major IDs: ",e.item.majorIds.join(", ")]}):null]}):null,e.compact?null:h.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs",children:[h.jsxs("div",{className:"wb-surface-strong rounded-lg px-2 py-1",children:[Ut("baseDps")," ",Math.round(e.item.roughScoreFields.baseDps)]}),h.jsxs("div",{className:"wb-surface-strong rounded-lg px-2 py-1",children:[Ut("ehpProxy")," ",Math.round(e.item.roughScoreFields.ehpProxy)]}),h.jsxs("div",{className:"wb-surface-strong rounded-lg px-2 py-1",children:[Ut("offenseScore")," ",Math.round(e.item.roughScoreFields.offense)]}),h.jsxs("div",{className:"wb-surface-strong rounded-lg px-2 py-1",children:[Ut("skillPointTotal")," ",Math.round(e.item.roughScoreFields.skillPointTotal)]})]})]})]}),(e.onPin||e.onEquip||e.onRemove)&&h.jsxs("div",{className:gt("mt-2 flex flex-wrap",e.dense?"gap-1":"gap-2"),children:[e.onPin?h.jsxs(Ce,{className:gt("text-xs",e.dense?"px-1.5 py-0.5":"px-2 py-1"),variant:"ghost",onClick:e.onPin,children:[h.jsx(VE,{size:12,className:"mr-1 inline"}),"Pin"]}):null,e.onEquip?h.jsxs(Ce,{className:gt("text-xs",e.dense?"px-1.5 py-0.5":"px-2 py-1"),onClick:e.onEquip,children:[h.jsx(WE,{size:12,className:"mr-1 inline"}),"Equip"]}):null,e.onRemove?h.jsx(Ce,{className:gt("text-xs",e.dense?"px-1.5 py-0.5":"px-2 py-1"),variant:"ghost",onClick:e.onRemove,children:"Remove"}):null]})]})}const Hx="workbench-search-presets:v2";function PR(){try{const e=window.localStorage.getItem(Hx);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}}function IR(e){window.localStorage.setItem(Hx,JSON.stringify(e))}function l0(e,n){return e.includes(n)?e.filter(s=>s!==n):[...e,n]}const BR=220,LR=200,Yl=50;function qR(e){const n=e.catalog.itemsById.get(e.itemId);if(!n)return null;const s=e.selectedSlot!=null&&fa(e.selectedSlot)===n.category;return h.jsx("div",{className:"relative",onMouseEnter:i=>e.onHoverForStats(e.itemId,i.currentTarget.getBoundingClientRect()),onMouseLeave:()=>e.onHoverForStats(null,null),children:h.jsx(Pc,{item:n,compact:!0,dense:!0,showDetails:!1,dragData:{kind:"search",itemId:n.id},onPin:()=>e.onPin(n.id),onEquip:()=>e.onEquip(n.id),onHover:i=>e.onHover(i?n.id:null,i?e.selectedSlot:null),badge:s?`Fits ${e.selectedSlot}`:void 0})})}function Zx(e){const n=w.useRef(null),s=e.result?.rows??[],i=w.useDeferredValue(s),[r,c]=w.useState(0),[u,d]=w.useState(null),g=w.useRef(null),p=i.length,y=Math.max(1,Math.ceil(p/Yl)),v=Math.min(r,Math.max(0,y-1)),b=i.slice(v*Yl,(v+1)*Yl);w.useEffect(()=>{c(0)},[e.result]);const S=K=>{g.current&&(window.clearTimeout(g.current),g.current=null),d(K)},E=()=>{g.current=window.setTimeout(()=>d(null),120)},T=!e.state.resultsBelowBuild,C=T?1:3,k=T?BR:LR,R=Math.ceil(b.length/C),z=$C({count:R,getScrollElement:()=>n.current,estimateSize:()=>k,measureElement:K=>K.getBoundingClientRect().height,overscan:4}),B=u?e.catalog.itemsById.get(u.itemId):null,U=e.result!=null||e.loading,M=e.loading?"Searching...":e.result?`${e.result.total.toLocaleString()} results`:"Search or filter to see items",j=p===0?0:v*Yl+1,D=Math.min((v+1)*Yl,p);return h.jsxs("div",{className:"min-h-0 flex-1",children:[h.jsxs("div",{className:"mb-2 flex flex-wrap items-center justify-between gap-2 text-xs text-[var(--wb-muted)]",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("span",{children:M}),U&&p>0?h.jsx("span",{className:"shrink-0",children:y>1?h.jsxs(h.Fragment,{children:[h.jsx("button",{type:"button",className:"wb-inline-button mr-1",onClick:()=>c(K=>Math.max(0,K-1)),disabled:v<=0,title:"Previous page",children:""}),h.jsxs("span",{children:[j.toLocaleString(),"",D.toLocaleString()]}),h.jsx("button",{type:"button",className:"wb-inline-button ml-1",onClick:()=>c(K=>Math.min(y-1,K+1)),disabled:v>=y-1,title:"Next page",children:""})]}):null}):null]}),U?h.jsxs("span",{children:[(e.state.sortKeys??["relevance"]).map(K=>Ut(K)).join("  "),e.state.sortDescending?" ":" "]}):null]}),h.jsx("div",{ref:n,className:gt("wb-scrollbar wb-surface overflow-auto rounded-xl",e.embedded?"min-h-[160px] flex-1":"h-[calc(100vh-26rem)]"),children:U?b.length===0?h.jsx("div",{className:"flex min-h-[120px] flex-col items-center justify-center gap-1 px-4 py-6 text-center text-sm text-[var(--wb-muted)]",children:h.jsx("span",{children:"No items match your filters."})}):h.jsx("div",{style:{height:z.getTotalSize(),position:"relative"},children:z.getVirtualItems().map(K=>{const re=K.index*C,he=b.slice(re,re+C);return h.jsx("div",{"data-index":K.index,ref:z.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${K.start}px)`,padding:"6px 8px"},className:T?"grid grid-cols-1":"grid grid-cols-2 gap-2 xl:grid-cols-3",children:he.map(se=>h.jsx(qR,{catalog:e.catalog,itemId:se.id,selectedSlot:e.selectedSlot,onPin:e.onPin,onEquip:e.onEquip,onHover:e.onHover,onHoverForStats:(Z,le)=>{Z!=null&&le?S({itemId:Z,rect:le}):E()}},se.id))},K.key)})}):h.jsx("div",{className:"flex min-h-[120px] flex-col items-center justify-center gap-1 px-4 py-6 text-center text-sm text-[var(--wb-muted)]",children:h.jsx("span",{children:"Enter a search term, select categories, or apply filters above to see items."})})}),B&&u?Pa.createPortal(h.jsxs("div",{className:"fixed z-[100] w-72 max-h-[80vh] overflow-auto rounded-xl border border-[var(--wb-border)] bg-[var(--wb-panel)] p-2.5 shadow-xl",style:{left:Math.min(u.rect.right+8,window.innerWidth-296),top:u.rect.top},onMouseEnter:()=>{g.current&&(window.clearTimeout(g.current),g.current=null)},onMouseLeave:()=>d(null),children:[h.jsx("div",{className:"mb-1.5 break-words text-xs font-semibold text-[var(--wb-text)]",children:B.displayName}),h.jsx(zR,{item:B,dense:!0})]}),document.body):null]})}function UR(e){const[n,s]=w.useState(()=>typeof window>"u"?[]:PR()),i=w.useMemo(()=>e.catalog.facetsMeta.majorIds.slice(0,20),[e.catalog]),r=e.result?.facetCounts,c=w.useMemo(()=>["relevance","level","baseDps",...Object.keys(e.catalog.facetsMeta.numericRanges).filter(y=>!["relevance","level","baseDps"].includes(y)).sort((y,v)=>Ut(y).localeCompare(Ut(v)))],[e.catalog.facetsMeta.numericRanges]),u=w.useMemo(()=>{const g=Object.keys(e.catalog.facetsMeta.numericRanges);return[...["level","baseDps","slots"].filter(y=>!g.includes(y)),...g].sort((y,v)=>Ut(y).localeCompare(Ut(v)))},[e.catalog.facetsMeta.numericRanges]);w.useEffect(()=>{typeof window<"u"&&IR(n)},[n]);const d=g=>e.setState(oC(e.state,g));return h.jsx(Yi,{className:"flex min-h-0 flex-col",title:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(QE,{size:15}),"Advanced Item Search"]}),headerRight:null,children:h.jsxs("div",{className:"flex min-h-0 flex-col gap-3 p-3",children:[h.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-end",children:[h.jsxs("div",{className:"min-w-0 flex-1",children:[h.jsx(Ie,{children:"Search Text"}),h.jsx("input",{className:"wb-input",placeholder:"Name, lore, major ID...",value:e.state.text,onChange:g=>d({text:g.target.value})})]}),h.jsx(Ce,{variant:"primary",className:"shrink-0",onClick:e.onSearch,disabled:e.loading,title:"Run search with current filters",children:e.loading?"Searching":"Show items"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Ie,{className:"mb-0 shrink-0",children:"Results"}),h.jsx(et,{active:e.state.resultsBelowBuild,onClick:()=>d({resultsBelowBuild:!e.state.resultsBelowBuild}),title:"Toggle: show below Workbench or in sidebar",children:e.state.resultsBelowBuild?"Below build":"In sidebar"})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx(Ie,{children:"Sort by"}),h.jsxs("div",{className:"flex flex-col gap-1",children:[(e.state.sortKeys??["relevance"]).map((g,p)=>h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("select",{className:"wb-select flex-1",value:g,onChange:y=>{const v=[...e.state.sortKeys??["relevance"]];v[p]=y.target.value,d({sortKeys:v})},children:c.map(y=>h.jsx("option",{value:y,children:Ut(y)},y))}),h.jsx(Ce,{variant:"ghost",className:"shrink-0 px-1",onClick:()=>{const y=(e.state.sortKeys??["relevance"]).filter((v,b)=>b!==p);y.length===0&&y.push("relevance"),d({sortKeys:y})},title:"Remove sort",children:""})]},p)),h.jsx(Ce,{variant:"ghost",className:"self-start text-xs",onClick:()=>{const g=e.state.sortKeys??["relevance"],p=c.find(y=>!g.includes(y))??c[0];d({sortKeys:[...g,p]})},disabled:(e.state.sortKeys??["relevance"]).length>=8,children:"+ Add sort level"})]})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"View"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(et,{active:e.state.viewMode==="list",onClick:()=>d({viewMode:"list"}),children:"List"}),h.jsx(et,{active:e.state.viewMode==="grid",onClick:()=>d({viewMode:"grid"}),children:"Grid"}),h.jsx(et,{active:e.state.sortDescending,onClick:()=>d({sortDescending:!e.state.sortDescending}),title:"Toggle descending",children:e.state.sortDescending?"Desc":"Asc"})]})]})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2 text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:[h.jsx(fy,{size:13}),"Category"]}),h.jsx("div",{className:"flex flex-wrap gap-2",children:vs.map(g=>h.jsxs(et,{active:e.state.categories.includes(g),onClick:()=>d({categories:l0(e.state.categories,g)}),children:[_h(g),r?.categories[g]?` (${r.categories[g]})`:""]},g))})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx(Ie,{children:"Wearable At Level"}),h.jsx("input",{className:"wb-input",type:"number",min:1,max:106,value:e.state.onlyWearableAtLevel??"",onChange:g=>{const p=g.target.value.trim();d({onlyWearableAtLevel:p?Number(p):null})}})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Class Filter"}),h.jsxs("select",{className:"wb-select",value:e.state.classReqs[0]??"",onChange:g=>{const p=g.target.value;d({classReqs:p?[p]:[]})},children:[h.jsx("option",{value:"",children:"Any"}),e.catalog.facetsMeta.classReqs.map(g=>h.jsx("option",{value:g,children:g},g))]})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsx(et,{active:e.state.onlyClassCompatible,onClick:()=>d({onlyClassCompatible:!e.state.onlyClassCompatible}),children:"Only class-compatible"}),h.jsx(et,{active:e.state.excludeRestricted,onClick:()=>d({excludeRestricted:!e.state.excludeRestricted}),children:"Exclude restricted"})]}),h.jsxs("details",{className:"group",children:[h.jsxs("summary",{className:"cursor-pointer text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)] flex items-center gap-2",children:[h.jsx(fy,{size:13}),"Advanced ID Filters"]}),h.jsxs("div",{className:"mt-3 grid gap-2",children:[h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Set min/max for any ID (e.g. mr, sdPct, ehpProxy). Items outside ranges are excluded."}),Object.entries(e.state.numericRanges).map(([g,p])=>{const y=g==="powderSlots"?"slots":g==="level"?"lvl":g==="baseDps"?"averageDps":g,v=e.catalog.facetsMeta.numericRanges[y],b=p??{};return h.jsxs("div",{className:"flex flex-wrap items-end gap-2 rounded-lg border border-[var(--wb-border-muted)] p-2",children:[h.jsxs("div",{className:"min-w-[120px] flex-1",children:[h.jsx(Ie,{children:"ID"}),h.jsx("select",{className:"wb-select w-full",value:g,onChange:S=>{const E={...e.state.numericRanges};delete E[g],E[S.target.value]=b,d({numericRanges:E})},children:u.map(S=>h.jsx("option",{value:S,disabled:S!==g&&S in e.state.numericRanges,children:Ut(S)},S))})]}),h.jsxs("div",{className:"min-w-[70px]",children:[h.jsx(Ie,{children:"Min"}),h.jsx("input",{className:"wb-input w-full",type:"number",placeholder:v?String(Math.floor(v.min)):"min",value:b.min??"",onChange:S=>{const E=S.target.value.trim();d({numericRanges:{...e.state.numericRanges,[g]:{...b,min:E===""?void 0:Number(E)}}})}})]}),h.jsxs("div",{className:"min-w-[70px]",children:[h.jsx(Ie,{children:"Max"}),h.jsx("input",{className:"wb-input w-full",type:"number",placeholder:v?String(Math.ceil(v.max)):"max",value:b.max??"",onChange:S=>{const E=S.target.value.trim();d({numericRanges:{...e.state.numericRanges,[g]:{...b,max:E===""?void 0:Number(E)}}})}})]}),h.jsx(Ce,{variant:"ghost",className:"shrink-0",onClick:()=>{const S={...e.state.numericRanges};delete S[g],d({numericRanges:S})},children:"Remove"})]},g)}),h.jsx(Ce,{variant:"ghost",onClick:()=>{const g=new Set(Object.keys(e.state.numericRanges)),p=u.find(y=>!g.has(y));p&&d({numericRanges:{...e.state.numericRanges,[p]:{}}})},disabled:u.every(g=>g in e.state.numericRanges),children:"Add ID Filter"})]})]}),h.jsxs("details",{className:"group",children:[h.jsx("summary",{className:"cursor-pointer text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)] flex items-center gap-2",children:"Exclusion (IDs to avoid)"}),h.jsxs("div",{className:"mt-3 grid gap-2",children:[h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Exclude items that exceed max (or are below min). E.g. mr max 20 = exclude items with mana regen > 20."}),Object.entries(e.state.exclusionRanges??{}).map(([g,p])=>{const y=g==="powderSlots"?"slots":g==="level"?"lvl":g==="baseDps"?"averageDps":g,v=e.catalog.facetsMeta.numericRanges[y],b=p??{};return h.jsxs("div",{className:"flex flex-wrap items-end gap-2 rounded-lg border border-[var(--wb-border-muted)] border-amber-500/30 p-2",children:[h.jsxs("div",{className:"min-w-[120px] flex-1",children:[h.jsx(Ie,{children:"Avoid ID"}),h.jsx("select",{className:"wb-select w-full",value:g,onChange:S=>{const E={...e.state.exclusionRanges??{}};delete E[g],E[S.target.value]=b,d({exclusionRanges:E})},children:u.map(S=>h.jsx("option",{value:S,disabled:S!==g&&S in(e.state.exclusionRanges??{}),children:Ut(S)},S))})]}),h.jsxs("div",{className:"min-w-[70px]",children:[h.jsx(Ie,{children:"Max (exclude if >)"}),h.jsx("input",{className:"wb-input w-full",type:"number",placeholder:v?String(Math.ceil(v.max)):"max",value:b.max??"",onChange:S=>{const E=S.target.value.trim();d({exclusionRanges:{...e.state.exclusionRanges??{},[g]:{...b,max:E===""?void 0:Number(E)}}})}})]}),h.jsxs("div",{className:"min-w-[70px]",children:[h.jsx(Ie,{children:"Min (exclude if <)"}),h.jsx("input",{className:"wb-input w-full",type:"number",placeholder:"min",value:b.min??"",onChange:S=>{const E=S.target.value.trim();d({exclusionRanges:{...e.state.exclusionRanges??{},[g]:{...b,min:E===""?void 0:Number(E)}}})}})]}),h.jsx(Ce,{variant:"ghost",className:"shrink-0",onClick:()=>{const S={...e.state.exclusionRanges??{}};delete S[g],d({exclusionRanges:S})},children:"Remove"})]},g)}),h.jsx(Ce,{variant:"ghost",onClick:()=>{const g=new Set(Object.keys(e.state.exclusionRanges??{})),p=u.find(y=>!g.has(y));p&&d({exclusionRanges:{...e.state.exclusionRanges??{},[p]:{}}})},disabled:u.every(g=>g in(e.state.exclusionRanges??{})),children:"Add exclusion"})]})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Major IDs (quick picks)"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:i.map(g=>h.jsx(et,{active:e.state.majorIds.includes(g),onClick:()=>d({majorIds:l0(e.state.majorIds,g)}),title:g,children:g},g))})]}),h.jsxs("div",{className:"wb-card p-2",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Filter Presets"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Ce,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>{const g=window.prompt("Preset name?")?.trim();if(!g)return;const p=[{name:g,state:e.state},...n.filter(y=>y.name.toLowerCase()!==g.toLowerCase())].slice(0,20);s(p)},children:"Save"}),h.jsx(Ce,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.setState(Oa),children:"Reset"})]})]}),h.jsx("div",{className:"flex flex-wrap gap-2",children:n.length===0?h.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:"No saved presets yet."}):n.map(g=>h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(et,{onClick:()=>e.setState(g.state),children:g.name}),h.jsx("button",{className:"wb-inline-button border border-[var(--wb-border)] px-1.5 py-0.5 text-xs",onClick:()=>s(p=>p.filter(y=>y.name!==g.name)),title:`Delete ${g.name}`,children:"x"})]},g.name))})]}),e.state.resultsBelowBuild?null:h.jsx(Zx,{catalog:e.catalog,result:e.result,selectedSlot:e.selectedSlot,state:e.state,loading:e.loading,onPin:e.onPin,onEquip:e.onEquip,onHover:e.onHover})]})})}const $R={slotStatus:{},warnings:{messages:[]},aggregated:{hpTotal:0,hprTotal:0,mr:0,ms:0,ls:0,speed:0,skillPoints:{str:0,dex:0,int:0,def:0,agi:0},skillReqs:{str:0,dex:0,int:0,def:0,agi:0},defenses:{e:0,t:0,w:0,f:0,a:0},offense:{baseDps:0,spellPct:0,spellRaw:0,meleePct:0,meleeRaw:0,elemDamPct:0,genericDamPct:0,offenseScore:0}},derived:{dpsProxy:0,spellProxy:0,meleeProxy:0,ehpProxy:0,reqTotal:0,skillPointTotal:0,legacyBaseDps:0,legacyEhp:0,legacyEhpNoAgi:0,skillpointFeasible:!0,assignedSkillPointsRequired:0}};function Xf(e){let n=Number.isFinite(e)?e:0;if(n<=0)return 0;n>=150&&(n=150);const s=.9908;return s/(1-s)*(1-Math.pow(s,n))/100}const HR=.867,ZR=.951,FR=90;function GR(e){return Math.max(1,Math.min(106,Math.round(e||1)))*5+5}function YR(e){const n=Math.max(1,Math.min(106,Math.round(e||1)));return n>=101?200:(n-1)*2}function VR(e){switch(e){case"relik":return .6;case"bow":return .7;case"wand":return .8;case"dagger":case"spear":return 1;default:return 1}}function KR(e){const n=Math.max(5,e.totalHp),s=Xf(e.defSkillPoints)*HR,i=Xf(e.agiSkillPoints)*ZR,c=2-VR(e.weaponType),d=(100-FR)/100*i+(1-i)*(1-s),g=1-s,p=n/Math.max(1e-9,d)/Math.max(1e-9,c),y=n/Math.max(1e-9,g)/Math.max(1e-9,c);return{withAgi:p,noAgi:y}}function WR(e){return[e.numeric.reqStr,e.numeric.reqDex,e.numeric.reqInt,e.numeric.reqDef,e.numeric.reqAgi]}function XR(e){return[e.numeric.spStr,e.numeric.spDex,e.numeric.spInt,e.numeric.spDef,e.numeric.spAgi]}function QR(e,n){return[e[0]+n[0],e[1]+n[1],e[2]+n[2],e[3]+n[3],e[4]+n[4]]}function JR(e){return e[0]+e[1]+e[2]+e[3]+e[4]}function r0(e,n){for(let s=0;s<5;s++)if(e[s]>n[s])return!1;return!0}function ek(e,n){for(const s of e)if(r0(s.assigned,n.assigned))return;for(let s=e.length-1;s>=0;s--)r0(n.assigned,e[s].assigned)&&e.splice(s,1);e.push(n)}function tk(e,n,s={}){if(e.length===0)return{feasible:!0,assignedTotal:0,assignedByStat:[0,0,0,0,0]};const i=YR(n),r=s.extraBaseSkillPoints??[0,0,0,0,0],c=e.length,u=e.map(WR),d=e.map(XR),g=1<<c,p=Array.from({length:g},()=>[0,0,0,0,0]);for(let E=1;E<g;E++){const T=E&-E,C=Math.log2(T)|0;p[E]=QR(p[E^T],d[C])}const y=new Array(g);y[0]=[{assigned:[0,0,0,0,0],assignedTotal:0}];for(let E=0;E<g;E++){const T=y[E];if(!T||T.length===0)continue;const C=p[E];for(const k of T)for(let R=0;R<c;R++){if((E&1<<R)!==0)continue;const z=[...k.assigned];let B=!0;for(let D=0;D<5;D++){const K=k.assigned[D]+C[D]+(r[D]??0),re=u[R][D];if(re>K&&(z[D]+=re-K),z[D]>100){B=!1;break}}if(!B)continue;const U=JR(z);if(U>i)continue;const M=E|1<<R,j=y[M]??=[];ek(j,{assigned:z,assignedTotal:U})}}const v=y[g-1];if(!v||v.length===0)return{feasible:!1,assignedTotal:1/0,assignedByStat:null};let b=1/0,S=null;for(const E of v)E.assignedTotal<b&&(b=E.assignedTotal,S=[...E.assigned]);return{feasible:Number.isFinite(b),assignedTotal:b,assignedByStat:Number.isFinite(b)?S:null}}function Ic(e,n,s,i={}){const r=[];for(const c of tt){const u=e[c];if(u==null)continue;const d=n.itemsById.get(u);d&&r.push(d)}return tk(r,s,i)}function nk(e,n){const s={};for(const i of tt){const r=e.slots[i];if(r==null)continue;const c=n.itemsById.get(r);c&&(s[i]=c)}return s}function ur(e,n,s={}){const i=nk(e,n),r=structuredClone($R),c=r.warnings.messages;let u=null;for(const se of tt){const Z=i[se];if(!Z)continue;se==="weapon"&&(u=Z.type),r.aggregated.hpTotal+=Z.numeric.hp+Z.numeric.hpBonus,r.aggregated.hprTotal+=Z.numeric.hprRaw+Z.numeric.hprPct,r.aggregated.mr+=Z.numeric.mr,r.aggregated.ms+=Z.numeric.ms,r.aggregated.ls+=Z.numeric.ls,r.aggregated.speed+=Z.numeric.spd,r.aggregated.skillPoints.str+=Z.numeric.spStr,r.aggregated.skillPoints.dex+=Z.numeric.spDex,r.aggregated.skillPoints.int+=Z.numeric.spInt,r.aggregated.skillPoints.def+=Z.numeric.spDef,r.aggregated.skillPoints.agi+=Z.numeric.spAgi,r.aggregated.skillReqs.str=Math.max(r.aggregated.skillReqs.str,Z.numeric.reqStr),r.aggregated.skillReqs.dex=Math.max(r.aggregated.skillReqs.dex,Z.numeric.reqDex),r.aggregated.skillReqs.int=Math.max(r.aggregated.skillReqs.int,Z.numeric.reqInt),r.aggregated.skillReqs.def=Math.max(r.aggregated.skillReqs.def,Z.numeric.reqDef),r.aggregated.skillReqs.agi=Math.max(r.aggregated.skillReqs.agi,Z.numeric.reqAgi),r.aggregated.defenses.e+=Z.numeric.eDef,r.aggregated.defenses.t+=Z.numeric.tDef,r.aggregated.defenses.w+=Z.numeric.wDef,r.aggregated.defenses.f+=Z.numeric.fDef,r.aggregated.defenses.a+=Z.numeric.aDef,r.aggregated.offense.baseDps+=Z.numeric.baseDps,r.aggregated.offense.spellPct+=Z.numeric.sdPct,r.aggregated.offense.spellRaw+=Z.numeric.sdRaw,r.aggregated.offense.meleePct+=Z.numeric.mdPct,r.aggregated.offense.meleeRaw+=Z.numeric.mdRaw,r.aggregated.offense.elemDamPct+=Z.numeric.eDamPct+Z.numeric.tDamPct+Z.numeric.wDamPct+Z.numeric.fDamPct+Z.numeric.aDamPct,r.aggregated.offense.genericDamPct+=Z.numeric.damPct+Z.numeric.rDamPct+Z.numeric.nDamPct,r.aggregated.offense.offenseScore+=Z.roughScoreFields.offense;const le=Z.classReq,Q=!le||!e.characterClass||le===e.characterClass,L=Z.level<=e.level,G=Z.numeric.reqStr<=100&&Z.numeric.reqDex<=100&&Z.numeric.reqInt<=100&&Z.numeric.reqDef<=100&&Z.numeric.reqAgi<=100;r.slotStatus[se]={classOk:Q,levelOk:L,skillReqsMet:G}}!e.characterClass&&u&&(e.characterClass=cc(u));for(const se of tt){const Z=i[se];Z&&(fa(se)!==Z.category&&c.push(`${se} contains incompatible item type (${Z.type}).`),Z.level>e.level&&c.push(`${Z.displayName} requires level ${Z.level}.`),e.characterClass&&Z.classReq&&Z.classReq!==e.characterClass&&c.push(`${Z.displayName} requires ${Z.classReq}.`),(Z.restricted||Z.deprecated)&&c.push(`${Z.displayName} is restricted/deprecated.`))}const d=r.aggregated.skillReqs.str+r.aggregated.skillReqs.dex+r.aggregated.skillReqs.int+r.aggregated.skillReqs.def+r.aggregated.skillReqs.agi,g=r.aggregated.skillPoints.str+r.aggregated.skillPoints.dex+r.aggregated.skillPoints.int+r.aggregated.skillPoints.def+r.aggregated.skillPoints.agi,p=Ic(e.slots,n,e.level,s.skillpointFeasibility),{spellPct:y,spellRaw:v,meleePct:b,meleeRaw:S,baseDps:E,elemDamPct:T,genericDamPct:C}=r.aggregated.offense,k=r.aggregated.skillPoints,z=1+Xf(k.str),B=(E*(1+(y+T+C)/100)+v)*z,U=(E*(1+(b+T+C)/100)+S)*z,M=U+B+r.aggregated.speed*.8,j=r.aggregated.defenses.e+r.aggregated.defenses.t+r.aggregated.defenses.w+r.aggregated.defenses.f+r.aggregated.defenses.a,D=r.aggregated.hpTotal+j*.45+r.aggregated.hprTotal*2+Math.max(0,r.aggregated.skillPoints.def)*12+Math.max(0,r.aggregated.skillPoints.agi)*10,K=r.aggregated.offense.baseDps,re=GR(e.level)+r.aggregated.hpTotal,he=KR({totalHp:re,defSkillPoints:r.aggregated.skillPoints.def,agiSkillPoints:r.aggregated.skillPoints.agi,weaponType:u});return r.derived={dpsProxy:M,spellProxy:B,meleeProxy:U,ehpProxy:D,reqTotal:d,skillPointTotal:g,legacyBaseDps:K,legacyEhp:he.withAgi,legacyEhpNoAgi:he.noAgi,skillpointFeasible:p.feasible,assignedSkillPointsRequired:Number.isFinite(p.assignedTotal)?p.assignedTotal:0},p.feasible||c.push(`Skill requirements are not satisfiable at level ${e.level} (estimated assigned SP exceeds available or equip order is invalid).`),r}function ak(e,n){return{dpsProxy:n.derived.dpsProxy-e.derived.dpsProxy,ehpProxy:n.derived.ehpProxy-e.derived.ehpProxy,legacyBaseDps:n.derived.legacyBaseDps-e.derived.legacyBaseDps,legacyEhp:n.derived.legacyEhp-e.derived.legacyEhp,hpTotal:n.aggregated.hpTotal-e.aggregated.hpTotal,speed:n.aggregated.speed-e.aggregated.speed,skillPointTotal:n.derived.skillPointTotal-e.derived.skillPointTotal}}const sk=25;function ik(e,n){return(e+sk)/5+n/3}function lk(e){if(e.length===0)return[];let n=[...e];for(;n.length>1&&n[0][1]===n[n.length-1][1];)n=[n.pop(),...n];const s=[];let i=0;for(let c=0;c<n.length;c++){const[u,d]=n[c],g=Math.max(1,u);if(c<2){s.push(g<=1?1:g);continue}const p=n[c-1][1],y=n[c-2][1];if(p===y&&p===d){i++;const v=g+i*5;s.push(v<=1?1:v)}else i=0,s.push(g<=1?1:g)}const r=n.length;return r>=2&&n[r-1][1]===n[r-2][1]&&(i++,Math.max(1,n[0][0])+i*5>1&&(s[0]=s[0]+i*5)),s}function rk(e,n){return e.filter(s=>s>=1&&s<=4).map(s=>[n[s]??1,s])}function ok(e){const{spellCosts:n,spellDamages:s,mr:i,ms:r,cps:c,spellSequence:u}=e;if(u.length===0||c<=0)return null;const d=rk(u,n);if(d.length===0)return null;const g=lk(d),p=g.length,y=g.reduce((R,z)=>R+z,0)/p,v=c/3,b=v*y,S=ik(i,r),E=S-b;let T=0;for(const[,R]of d)T+=s[R]??0;const k=T/p*v;return{manaGainPerSecond:S,manaUsagePerSecond:b,netManaPerSecond:E,sustainedSpellDps:k,cycleCosts:g,spellsPerSecond:v,sustainable:E>=0}}const ck=8,uk="1234";function Fo(e){return Number.isFinite(e)?e.toFixed(2):"-"}function dk(e){return Number.isFinite(e)?Math.round(e).toLocaleString():"-"}function fk(e){const[n,s]=w.useState(!1),[i,r]=w.useState(ck),[c,u]=w.useState(uk),d=w.useMemo(()=>{const p=e.spellPreview,y=e.summary;if(!p?.spells.length)return null;const v={},b={};for(const E of p.spells)E.baseSpell>=1&&E.baseSpell<=4&&(E.manaCost!=null&&(v[E.baseSpell]=E.manaCost),E.isHealing||(b[E.baseSpell]=E.averageDisplayValue));const S=c.replace(/\D/g,"").split("").map(E=>parseInt(E,10)).filter(E=>E>=1&&E<=4);return S.length===0?null:ok({spellCosts:v,spellDamages:b,mr:y.aggregated.mr,ms:y.aggregated.ms,cps:i,spellSequence:S})},[e.spellPreview,e.summary,i,c]);return e.spellPreview?.spells.some(p=>p.baseSpell>=1&&p.baseSpell<=4&&p.manaCost!=null)??!1?h.jsxs("div",{className:"wb-card overflow-hidden p-0",children:[h.jsx("button",{type:"button",className:"flex w-full items-center justify-between gap-2 px-3 py-2.5 text-left hover:bg-[var(--wb-surface-hover)]",onClick:()=>s(p=>!p),children:h.jsxs("div",{className:"flex items-center gap-2",children:[n?h.jsx(OE,{size:14,className:"text-[var(--wb-muted)]"}):h.jsx(kE,{size:14,className:"text-[var(--wb-muted)]"}),h.jsx("span",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Mana Sustain"}),d!=null&&h.jsx("span",{className:d.sustainable?"wb-text-success":"wb-text-danger",children:d.sustainable?"Sustainable":"Draining"})]})}),!n&&h.jsx("div",{className:"border-t border-[var(--wb-border-muted)] px-3 py-3",children:h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs("div",{children:[h.jsx("label",{className:"mb-1 block text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Clicks / s"}),h.jsx("input",{className:"wb-input w-full",type:"number",min:.5,max:30,step:.5,value:i,onChange:p=>r(Number(p.target.value)||0)})]}),h.jsxs("div",{children:[h.jsx("label",{className:"mb-1 block text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Spell sequence"}),h.jsx("input",{className:"wb-input w-full",type:"text",inputMode:"numeric",pattern:"[1-4]*",placeholder:"e.g. 1234",value:c,onChange:p=>u(p.target.value.replace(/[^1-4]/g,"").slice(0,20))})]})]}),h.jsx("p",{className:"text-[11px] text-[var(--wb-muted)]",children:"Each spell = 3 clicks. Sequence uses digits 14 for spell slots."}),d==null?h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Enter a valid sequence (digits 14)."}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"rounded-lg border p-2 text-xs",style:{borderColor:d.sustainable?"var(--wb-success-muted, #166534)":"var(--wb-danger-muted, #991b1b)",background:d.sustainable?"var(--wb-success-bg, rgba(22,101,52,0.08))":"var(--wb-danger-bg, rgba(153,27,27,0.08))"},children:h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Net mana/s"}),h.jsxs("span",{className:d.sustainable?"wb-text-success font-semibold":"wb-text-danger font-semibold",children:[d.netManaPerSecond>=0?"+":"",Fo(d.netManaPerSecond)]})]})}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[h.jsxs("div",{className:"wb-surface rounded-lg px-2 py-1.5",children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Mana gain/s"}),h.jsx("div",{className:"wb-text-success font-medium",children:Fo(d.manaGainPerSecond)})]}),h.jsxs("div",{className:"wb-surface rounded-lg px-2 py-1.5",children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Mana usage/s"}),h.jsx("div",{className:"wb-text-offense font-medium",children:Fo(d.manaUsagePerSecond)})]}),h.jsxs("div",{className:"wb-surface rounded-lg px-2 py-1.5 col-span-2",children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Sustained spell DPS"}),h.jsx("div",{className:"wb-text-offense font-semibold",children:dk(d.sustainedSpellDps)})]})]}),h.jsxs("div",{className:"text-[11px] text-[var(--wb-muted)]",children:["Spells/s: ",Fo(d.spellsPerSecond),"  Cycle costs: ",d.cycleCosts.map(p=>Math.round(p)).join(", ")]})]})]})})]}):h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Mana Sustain"}),h.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:"Equip a weapon and select spells with mana costs in the Ability Tree to see sustained mana and spell DPS."})]})}function wt(e){return Number.isFinite(e)?Math.round(e).toLocaleString():"-"}function hk(e){const n=e.compareSummary?ak(e.summary,e.compareSummary):null,s=e.spellPreview?.melee??null;return h.jsx(Yi,{className:"flex min-h-0 flex-col",title:"Live Build Summary",headerRight:null,children:h.jsxs("div",{className:"flex flex-col gap-3 p-3",children:[h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Melee DPS"}),h.jsxs("div",{className:"mt-1 flex items-end justify-between gap-2",children:[h.jsx("div",{className:"wb-text-offense text-xl font-semibold",children:wt(s?.dps??e.summary.derived.legacyBaseDps)}),n?.legacyBaseDps!=null?h.jsxs("div",{className:["text-xs",n.legacyBaseDps>0?"wb-text-success":n.legacyBaseDps<0?"wb-text-danger":"text-[var(--wb-muted)]"].join(" "),children:[n.legacyBaseDps>0?"+":"",Math.round(n.legacyBaseDps).toLocaleString()]}):null]}),h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:[s?`Legacy melee DPS (${s.attackSpeedTier})  Per Attack ${wt(s.perAttackAverage)}`:"Legacy melee DPS preview unavailable (equip a weapon and valid ability tree selection)."," "," Melee % / Raw ",h.jsx("span",{className:"wb-text-offense",children:wt(e.summary.aggregated.offense.meleePct)})," / ",h.jsx("span",{className:"wb-text-offense",children:wt(e.summary.aggregated.offense.meleeRaw)})]})]}),h.jsx(fk,{spellPreview:e.spellPreview??null,summary:e.summary}),e.spellPreview?h.jsxs("div",{className:"wb-card p-3",children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Spells (ATree)"}),h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[e.spellPreview.spells.length," entries"]})]}),e.spellPreview.notes.length>0?h.jsx("div",{className:"wb-banner mb-2 p-2 text-xs","data-tone":"warning",children:e.spellPreview.notes.join(" ")}):null,e.spellPreview.spells.length===0?h.jsx("div",{className:"rounded-lg border border-dashed border-[var(--wb-border-muted)] p-2 text-xs text-[var(--wb-muted)]",children:"No spell damage entries yet. Select active ability-tree spell nodes (roots / spell upgrades)."}):h.jsx(Vi,{className:"max-h-[36vh] lg:max-h-[44vh]",children:h.jsx("div",{className:"grid gap-2 pr-1",children:e.spellPreview.spells.map(i=>h.jsxs("div",{className:"wb-surface rounded-lg p-2",children:[h.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs",children:[h.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[h.jsxs("span",{children:[i.name,h.jsxs("span",{className:"ml-1 text-[var(--wb-muted)]",children:["(",i.displayPartName,")"]})]}),!i.isHealing&&i.dominantElement&&i.dominantElement!=="n"?h.jsx("span",{className:`spell-elem-chip spell-elem-${i.dominantElement}`,children:i.dominantElement==="e"?"Earth":i.dominantElement==="t"?"Thunder":i.dominantElement==="w"?"Water":i.dominantElement==="f"?"Fire":i.dominantElement==="a"?"Air":""}):null]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("div",{className:i.isHealing?"wb-text-defense":"wb-text-offense",children:[Math.round(i.averageDisplayValue).toLocaleString()," ",i.isHealing?"heal":"avg dmg"]}),i.manaCost!=null?h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[i.manaCost.toFixed(2)," mana"]}):null]})]}),h.jsx("div",{className:"mt-1 grid gap-1 text-xs text-[var(--wb-muted)]",children:i.parts.filter(r=>r.display).map(r=>h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsx("span",{className:"truncate",children:r.name}),h.jsx("span",{className:r.type==="heal"?"wb-text-defense":"wb-text-offense",children:Math.round(r.averageTotal??0).toLocaleString()})]},r.name))})]},`${i.baseSpell}-${i.name}`))})})]}):null,h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsx(Zo,{label:"Base DPS",value:wt(e.summary.derived.legacyBaseDps),delta:n?.legacyBaseDps??null,valueClassName:"wb-text-offense"}),h.jsx(Zo,{label:"Effective HP",value:wt(e.summary.derived.legacyEhp),delta:n?.legacyEhp??null,valueClassName:"wb-text-defense"}),h.jsx(Zo,{label:"Req Total",value:wt(e.summary.derived.reqTotal)}),h.jsx(Zo,{label:"SP Total",value:wt(e.summary.derived.skillPointTotal),delta:n?.skillPointTotal??null})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[h.jsxs("div",{className:"wb-surface rounded-xl px-3 py-2",children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"SP Feasibility:"})," ",h.jsx("span",{className:e.summary.derived.skillpointFeasible?"wb-text-success":"wb-text-danger",children:e.summary.derived.skillpointFeasible?"Wearable":"Invalid / Not Wearable"})]}),h.jsxs("div",{className:"wb-surface rounded-xl px-3 py-2",children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Assigned SP Needed:"})," ",h.jsx("span",{children:wt(e.summary.derived.assignedSkillPointsRequired)})]})]}),e.compareSummary&&e.compareSlot?h.jsxs("div",{className:"wb-banner p-3 text-xs","data-tone":"success",children:["Compare preview for ",h.jsx("b",{children:oc(e.compareSlot)})]}):null,h.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"text-xs uppercase tracking-wide text-[var(--wb-muted)]",children:"Offense"}),h.jsxs("div",{className:"mt-2 grid gap-1 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Legacy Base DPS:"})," ",h.jsx("span",{className:"wb-text-offense font-medium",children:wt(e.summary.derived.legacyBaseDps)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Heuristic DPS Proxy:"})," ",h.jsx("span",{className:"wb-text-offense",children:wt(e.summary.derived.dpsProxy)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Spell % / Raw:"})," ",h.jsx("span",{className:"wb-text-offense",children:wt(e.summary.aggregated.offense.spellPct)})," / ",h.jsx("span",{className:"wb-text-offense",children:wt(e.summary.aggregated.offense.spellRaw)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Melee % / Raw:"})," ",h.jsx("span",{className:"wb-text-offense",children:wt(e.summary.aggregated.offense.meleePct)})," / ",h.jsx("span",{className:"wb-text-offense",children:wt(e.summary.aggregated.offense.meleeRaw)})]})]})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"text-xs uppercase tracking-wide text-[var(--wb-muted)]",children:"Defense & Utility"}),h.jsxs("div",{className:"mt-2 grid gap-1 text-xs",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Legacy EHP (AGI):"})," ",h.jsx("span",{className:"wb-text-defense font-medium",children:wt(e.summary.derived.legacyEhp)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Legacy EHP (No AGI):"})," ",h.jsx("span",{className:"wb-text-defense",children:wt(e.summary.derived.legacyEhpNoAgi)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Heuristic EHP Proxy:"})," ",h.jsx("span",{className:"wb-text-defense",children:wt(e.summary.derived.ehpProxy)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"HP Total:"})," ",h.jsx("span",{className:"wb-text-defense",children:wt(e.summary.aggregated.hpTotal)})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"HPR Total:"})," ",wt(e.summary.aggregated.hprTotal)]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"MR / MS / LS:"})," ",wt(e.summary.aggregated.mr)," / ",wt(e.summary.aggregated.ms)," / ",wt(e.summary.aggregated.ls)]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-[var(--wb-muted)]",children:"Walk Speed:"})," ",wt(e.summary.aggregated.speed)]})]})]})]}),h.jsx("div",{className:"wb-surface rounded-xl p-3 text-xs text-[var(--wb-muted)]",children:"Workbench primary KPIs use legacy-compatible metrics (Base DPS + Effective HP). Ability tree editing is now in Workbench, but these summary metrics still exclude ability-tree effects for now. Proxy values are still used internally for search/Build Solver heuristics."}),h.jsxs("div",{className:"grid gap-2",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Warnings"}),e.summary.warnings.messages.length===0?h.jsx("div",{className:"wb-surface rounded-xl p-3 text-xs wb-text-success",children:"No active warnings."}):h.jsx(Vi,{className:"max-h-32",children:h.jsx("div",{className:"grid gap-2",children:e.summary.warnings.messages.map((i,r)=>h.jsx("div",{className:"wb-banner p-2 text-xs","data-tone":"warning",children:i},`${i}-${r}`))})})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[h.jsxs(Ce,{variant:"ghost",className:"justify-start",onClick:e.actions.onCopyLegacyLink,disabled:!e.snapshot.legacyHash,children:[h.jsx(wh,{size:14,className:"mr-2"}),"Legacy Link"]}),h.jsxs(Ce,{variant:"ghost",className:"justify-start",onClick:e.actions.onOpenLegacyBuilder,children:[h.jsx(BE,{size:14,className:"mr-2"}),"Open Legacy"]})]})]})})}function mk(e){const{info:n}=e;return h.jsx("div",{className:"wb-banner px-3 py-2","data-tone":"accent",children:h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"text-xs font-semibold",children:["Crafted ",n.type.charAt(0).toUpperCase()+n.type.slice(1)]}),h.jsxs("div",{className:"mt-0.5 text-[10px] text-[var(--wb-muted)]",children:["Lv. ",n.lvl," | ",n.hash.slice(0,20),"..."]})]}),h.jsx(Ce,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:e.onClear,title:"Remove crafted item",children:h.jsx(ub,{size:12})})]})})}function o0(e){const{isOver:n,setNodeRef:s}=lb({id:`slot:${e.slot}`,data:{droppableType:"slot",slot:e.slot}}),i=e.store.slots[e.slot],r=i!=null?e.catalog.itemsById.get(i):void 0,c=e.store.craftedSlots[e.slot],u=ib({id:r?`slot-item:${e.slot}:${r.id}`:`slot-empty:${e.slot}`,data:r?{dragItem:{kind:"slot",itemId:r.id,sourceSlot:e.slot}}:void 0,disabled:!r});return h.jsxs("div",{ref:s,className:gt("rounded-xl border p-2",n?"border-emerald-400/70 bg-emerald-400/8":"wb-surface-strong"),onMouseEnter:()=>e.store.setSelectedSlot(e.slot),children:[h.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:oc(e.slot)}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(Ce,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.toggleLock(e.slot),title:"Lock slot",children:h.jsx(cb,{size:12,className:gt(e.store.locks[e.slot]&&"wb-text-success")})}),h.jsx(Ce,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.moveSlotToBin(e.slot),title:"Move to bin",children:h.jsx(rT,{size:12})})]})]}),r?h.jsx("div",{ref:u.setNodeRef,style:{transform:sc.Translate.toString(u.transform),opacity:u.isDragging?.45:1},...u.listeners,...u.attributes,children:h.jsx(Pc,{item:r,compact:!0,dense:!0,showDetails:e.showItemDetails,dragData:{kind:"slot",itemId:r.id,sourceSlot:e.slot},locked:e.store.locks[e.slot],onHover:d=>e.onHoverItem?.(d?r.id:null,d?e.slot:null)})}):c?h.jsx(mk,{info:c,onClear:()=>e.store.clearCraftedSlot(e.slot)}):h.jsxs("div",{className:"wb-placeholder rounded-lg px-3 py-3 text-center text-xs",children:["Drop a ",fa(e.slot)," item here"]})]})}function c0(e){const{isOver:n,setNodeRef:s}=lb({id:`bin:${e.category}`,data:{droppableType:"bin",category:e.category}}),i=e.store.binsByCategory[e.category].map(r=>e.catalog.itemsById.get(r)).filter(r=>!!r);return h.jsxs("div",{className:"flex min-w-0 flex-col gap-1.5",children:[h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsxs("div",{className:"text-xs font-semibold",children:[_h(e.category)," Bin"]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:i.length}),h.jsxs(Ce,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.clearCategory(e.category),children:[h.jsx(ub,{size:12,className:"mr-1 inline"}),"Clear"]})]})]}),h.jsx("div",{ref:s,className:gt("wb-grid-backdrop min-h-20 rounded-xl border p-1.5",n?"border-emerald-400/70 bg-emerald-400/8":"wb-surface"),children:i.length===0?h.jsxs("div",{className:"p-2 text-[11px] text-[var(--wb-muted)]",children:["Drop items here for ",e.category,"."]}):h.jsx("div",{className:"grid max-h-40 gap-1.5 overflow-auto pr-0.5 wb-scrollbar",children:i.map(r=>h.jsx(Pc,{item:r,compact:!0,dense:!0,showDetails:e.showItemDetails,dragData:{kind:"bin",itemId:r.id,sourceCategory:e.category},onRemove:()=>e.store.removePinnedItem(e.category,r.id),onHover:c=>{const u=e.store.selectedSlot&&fa(e.store.selectedSlot)===e.category?e.store.selectedSlot:null;e.onHoverItem?.(c?r.id:null,c?u:null)}},`${e.category}-${r.id}`))})})]})}function gk(e){const[n,s]=w.useState(!1),i=w.useMemo(()=>[["helmet","chestplate","leggings","boots"],["ring1","ring2","bracelet","necklace"]],[]),r=w.useMemo(()=>[{key:"armor",title:"Armor Shelf",categories:["helmet","chestplate","leggings","boots"]},{key:"accessories",title:"Accessory Shelf",categories:["ring","bracelet","necklace"]},{key:"weapon",title:"Weapon Shelf",categories:["weapon"]}].filter(d=>d.key!=="weapon"),[]),c=e.store.comparePreview;let u=null;if(c?.itemId!=null&&c.slot)u={itemId:c.itemId,source:`Compare Preview  ${oc(c.slot)}`};else if(e.store.selectedSlot){const d=e.store.slots[e.store.selectedSlot];d!=null&&(u={itemId:d,source:`Selected Slot  ${oc(e.store.selectedSlot)}`})}else e.store.slots.weapon!=null&&(u={itemId:e.store.slots.weapon,source:"Equipped Weapon"});return h.jsx(Yi,{className:"flex min-h-0 flex-col",title:"Build",headerRight:h.jsxs(h.Fragment,{children:[h.jsx(Ce,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.undo(),children:"Undo"}),h.jsx(Ce,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.redo(),children:"Redo"}),h.jsx(Ce,{className:"px-2 py-1 text-xs",variant:n?"primary":"ghost",onClick:()=>s(d=>!d),children:n?"Hide Details":"Item Details"}),h.jsx(Ce,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.clearAll(),children:"Clear All"})]}),children:h.jsxs("div",{className:"grid min-h-0 flex-1 grid-rows-[auto_1fr_auto] gap-2 p-2.5",children:[h.jsxs("div",{className:"grid gap-1.5 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)_minmax(0,1.05fr)]",children:[i.map((d,g)=>h.jsx("div",{className:"grid gap-1.5",children:d.map(p=>h.jsx(o0,{slot:p,catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem},p))},g)),h.jsxs("div",{className:"grid content-start gap-1.5",children:[h.jsx(o0,{slot:"weapon",catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem}),h.jsxs("div",{className:"wb-surface rounded-xl p-2",children:[h.jsxs("div",{className:"mb-1.5 flex items-center justify-between gap-2",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Weapon Shelf"}),h.jsx("div",{className:"text-[11px] text-[var(--wb-muted)]",children:"Pinned weapon candidates"})]}),h.jsx(c0,{category:"weapon",catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem})]}),u?h.jsxs("div",{className:"wb-card p-2.5",children:[h.jsx("div",{className:"mb-2 flex items-center justify-between gap-2",children:h.jsxs("div",{children:[h.jsx("div",{className:"text-xs uppercase tracking-wide text-[var(--wb-muted)]",children:"Focused Item"}),h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:u.source})]})}),(()=>{const d=e.catalog.itemsById.get(u.itemId);return d?h.jsx(Pc,{item:d,compact:!0,dense:!0,showDetails:n}):null})()]}):null]})]}),h.jsx(Vi,{className:"min-h-0 pr-1",children:h.jsx("div",{className:"grid gap-3",children:r.map(d=>h.jsxs("div",{className:"grid gap-1.5",children:[h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:d.title}),h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:d.categories.map(_h).join("  ")})]}),h.jsx("div",{className:gt("grid gap-2",d.categories.length===1?"grid-cols-1":d.categories.length===3?"lg:grid-cols-3":"md:grid-cols-2 xl:grid-cols-4"),children:d.categories.map(g=>h.jsx(c0,{category:g,catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem},g))})]},d.key))})}),e.searchResults?h.jsx("div",{className:"wb-surface flex min-h-[220px] max-h-[40vh] min-w-0 flex-col overflow-hidden rounded-xl",children:e.searchResults}):null,h.jsx("div",{className:"wb-surface rounded-xl p-2",children:h.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-3",children:[h.jsxs(Ce,{variant:"ghost",className:"justify-start",onClick:e.onShareWorkbench,children:[h.jsx(wh,{size:14,className:"mr-2"}),"Share"]}),h.jsxs(Ce,{variant:"ghost",className:"justify-start",onClick:e.onExportWorkbench,children:[h.jsx(PE,{size:14,className:"mr-2"}),"Export"]}),h.jsxs(Ce,{variant:"ghost",className:"justify-start",onClick:e.onImportWorkbench,children:[h.jsx(cT,{size:14,className:"mr-2"}),"Import"]})]})})]})})}function tc(e){if(!e)return null;const n=e.startsWith("#")?e.slice(1):e;return n.trim()?n:null}function u0(e){const n=tc(e);if(typeof window>"u"){const r="builder/";return n?`${r}#${n}`:r}if(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"){const r="https://hppeng-wynn.github.io/builder/";return n?`${r}#${n}`:r}const i=new URL("builder/",window.location.href).href;return n?`${i}#${n}`:i}const pk=[["helmet","helmet-choice"],["chestplate","chestplate-choice"],["leggings","leggings-choice"],["boots","boots-choice"],["ring1","ring1-choice"],["ring2","ring2-choice"],["bracelet","bracelet-choice"],["necklace","necklace-choice"],["weapon","weapon-choice"]];function d0(e){const n=e.trim();if(!n)return null;if(n.startsWith("#"))return tc(n);try{const s=new URL(n,window.location.origin);return tc(s.hash)}catch{return tc(n)}}class vk{isSupported(n){return d0(n)!==null}async encodeLegacyHash(n){if(n.legacyHash)return n.legacyHash;throw new Error("Legacy hash encoding is only available for imported legacy builds in Workbench v1. Use Workbench share link or open legacy builder for full encode.")}async decodeLegacyHash(n){const s=d0(n);if(!s)throw new Error("No legacy hash found to decode");if(typeof document>"u")return{legacyHash:s,level:null,slots:{}};const i=document.createElement("iframe");i.style.position="fixed",i.style.left="-99999px",i.style.width="1200px",i.style.height="900px",i.style.opacity="0",i.src=`../builder/#${s}`,document.body.appendChild(i);const r=3e4,c=Date.now();try{return await new Promise((d,g)=>{const p=window.setInterval(()=>{try{if(!i.contentDocument)return;const y=i.contentDocument,v=y.getElementById("weapon-choice"),b=y.getElementById("level-choice");if(!v||!b){Date.now()-c>r&&(window.clearInterval(p),g(new Error("Timed out waiting for legacy builder UI")));return}const S={};for(const[k,R]of pk){const B=y.getElementById(R)?.value?.trim();B&&(S[k]=B)}if(!S.weapon&&Date.now()-c<2e3)return;const T=b.value?.trim(),C=T?Number(T):null;window.clearInterval(p),d({legacyHash:s,level:Number.isFinite(C??NaN)?C:null,slots:S,sourceUrl:i.src})}catch(y){window.clearInterval(p),g(y)}},250)})}finally{i.remove()}}}const Mf=new vk,f0=e=>{let n;const s=new Set,i=(p,y)=>{const v=typeof p=="function"?p(n):p;if(!Object.is(v,n)){const b=n;n=y??(typeof v!="object"||v===null)?v:Object.assign({},n,v),s.forEach(S=>S(n,b))}},r=()=>n,d={setState:i,getState:r,getInitialState:()=>g,subscribe:p=>(s.add(p),()=>s.delete(p))},g=n=e(i,r,d);return d},yk=(e=>e?f0(e):f0),bk=e=>e;function xk(e,n=bk){const s=Qt.useSyncExternalStore(e.subscribe,Qt.useCallback(()=>n(e.getState()),[e,n]),Qt.useCallback(()=>n(e.getInitialState()),[e,n]));return Qt.useDebugValue(s),s}const Sk=e=>{const n=yk(e),s=i=>xk(n,i);return Object.assign(s,n),s},wk=(e=>Sk);var Fx=Symbol.for("immer-nothing"),h0=Symbol.for("immer-draftable"),Bn=Symbol.for("immer-state");function na(e,...n){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var dr=Object.getPrototypeOf;function Xi(e){return!!e&&!!e[Bn]}function Hs(e){return e?Gx(e)||Array.isArray(e)||!!e[h0]||!!e.constructor?.[h0]||vr(e)||Lc(e):!1}var _k=Object.prototype.constructor.toString(),m0=new WeakMap;function Gx(e){if(!e||typeof e!="object")return!1;const n=Object.getPrototypeOf(e);if(n===null||n===Object.prototype)return!0;const s=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;if(s===Object)return!0;if(typeof s!="function")return!1;let i=m0.get(s);return i===void 0&&(i=Function.toString.call(s),m0.set(s,i)),i===_k}function vc(e,n,s=!0){Bc(e)===0?(s?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{n(r,e[r],e)}):e.forEach((i,r)=>n(r,i,e))}function Bc(e){const n=e[Bn];return n?n.type_:Array.isArray(e)?1:vr(e)?2:Lc(e)?3:0}function Qf(e,n){return Bc(e)===2?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function Yx(e,n,s){const i=Bc(e);i===2?e.set(n,s):i===3?e.add(s):e[n]=s}function Ek(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}function vr(e){return e instanceof Map}function Lc(e){return e instanceof Set}function qs(e){return e.copy_||e.base_}function Jf(e,n){if(vr(e))return new Map(e);if(Lc(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const s=Gx(e);if(n===!0||n==="class_only"&&!s){const i=Object.getOwnPropertyDescriptors(e);delete i[Bn];let r=Reflect.ownKeys(i);for(let c=0;c<r.length;c++){const u=r[c],d=i[u];d.writable===!1&&(d.writable=!0,d.configurable=!0),(d.get||d.set)&&(i[u]={configurable:!0,writable:!0,enumerable:d.enumerable,value:e[u]})}return Object.create(dr(e),i)}else{const i=dr(e);if(i!==null&&s)return{...e};const r=Object.create(i);return Object.assign(r,e)}}function Ih(e,n=!1){return qc(e)||Xi(e)||!Hs(e)||(Bc(e)>1&&Object.defineProperties(e,{set:Go,add:Go,clear:Go,delete:Go}),Object.freeze(e),n&&Object.values(e).forEach(s=>Ih(s,!0))),e}function Tk(){na(2)}var Go={value:Tk};function qc(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var Nk={};function Zs(e){const n=Nk[e];return n||na(0,e),n}var fr;function Vx(){return fr}function Mk(e,n){return{drafts_:[],parent_:e,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function g0(e,n){n&&(Zs("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=n)}function eh(e){th(e),e.drafts_.forEach(jk),e.drafts_=null}function th(e){e===fr&&(fr=e.parent_)}function p0(e){return fr=Mk(fr,e)}function jk(e){const n=e[Bn];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function v0(e,n){n.unfinalizedDrafts_=n.drafts_.length;const s=n.drafts_[0];return e!==void 0&&e!==s?(s[Bn].modified_&&(eh(n),na(4)),Hs(e)&&(e=yc(n,e),n.parent_||bc(n,e)),n.patches_&&Zs("Patches").generateReplacementPatches_(s[Bn].base_,e,n.patches_,n.inversePatches_)):e=yc(n,s,[]),eh(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),e!==Fx?e:void 0}function yc(e,n,s){if(qc(n))return n;const i=e.immer_.shouldUseStrictIteration(),r=n[Bn];if(!r)return vc(n,(c,u)=>y0(e,r,n,c,u,s),i),n;if(r.scope_!==e)return n;if(!r.modified_)return bc(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const c=r.copy_;let u=c,d=!1;r.type_===3&&(u=new Set(c),c.clear(),d=!0),vc(u,(g,p)=>y0(e,r,c,g,p,s,d),i),bc(e,c,!1),s&&e.patches_&&Zs("Patches").generatePatches_(r,s,e.patches_,e.inversePatches_)}return r.copy_}function y0(e,n,s,i,r,c,u){if(r==null||typeof r!="object"&&!u)return;const d=qc(r);if(!(d&&!u)){if(Xi(r)){const g=c&&n&&n.type_!==3&&!Qf(n.assigned_,i)?c.concat(i):void 0,p=yc(e,r,g);if(Yx(s,i,p),Xi(p))e.canAutoFreeze_=!1;else return}else u&&s.add(r);if(Hs(r)&&!d){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||n&&n.base_&&n.base_[i]===r&&d)return;yc(e,r),(!n||!n.scope_.parent_)&&typeof i!="symbol"&&(vr(s)?s.has(i):Object.prototype.propertyIsEnumerable.call(s,i))&&bc(e,r)}}}function bc(e,n,s=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ih(n,s)}function Ck(e,n){const s=Array.isArray(e),i={type_:s?1:0,scope_:n?n.scope_:Vx(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,c=Bh;s&&(r=[i],c=hr);const{revoke:u,proxy:d}=Proxy.revocable(r,c);return i.draft_=d,i.revoke_=u,d}var Bh={get(e,n){if(n===Bn)return e;const s=qs(e);if(!Qf(s,n))return Dk(e,s,n);const i=s[n];return e.finalized_||!Hs(i)?i:i===jf(e.base_,n)?(Cf(e),e.copy_[n]=ah(i,e)):i},has(e,n){return n in qs(e)},ownKeys(e){return Reflect.ownKeys(qs(e))},set(e,n,s){const i=Kx(qs(e),n);if(i?.set)return i.set.call(e.draft_,s),!0;if(!e.modified_){const r=jf(qs(e),n),c=r?.[Bn];if(c&&c.base_===s)return e.copy_[n]=s,e.assigned_[n]=!1,!0;if(Ek(s,r)&&(s!==void 0||Qf(e.base_,n)))return!0;Cf(e),nh(e)}return e.copy_[n]===s&&(s!==void 0||n in e.copy_)||Number.isNaN(s)&&Number.isNaN(e.copy_[n])||(e.copy_[n]=s,e.assigned_[n]=!0),!0},deleteProperty(e,n){return jf(e.base_,n)!==void 0||n in e.base_?(e.assigned_[n]=!1,Cf(e),nh(e)):delete e.assigned_[n],e.copy_&&delete e.copy_[n],!0},getOwnPropertyDescriptor(e,n){const s=qs(e),i=Reflect.getOwnPropertyDescriptor(s,n);return i&&{writable:!0,configurable:e.type_!==1||n!=="length",enumerable:i.enumerable,value:s[n]}},defineProperty(){na(11)},getPrototypeOf(e){return dr(e.base_)},setPrototypeOf(){na(12)}},hr={};vc(Bh,(e,n)=>{hr[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});hr.deleteProperty=function(e,n){return hr.set.call(this,e,n,void 0)};hr.set=function(e,n,s){return Bh.set.call(this,e[0],n,s,e[0])};function jf(e,n){const s=e[Bn];return(s?qs(s):e)[n]}function Dk(e,n,s){const i=Kx(n,s);return i?"value"in i?i.value:i.get?.call(e.draft_):void 0}function Kx(e,n){if(!(n in e))return;let s=dr(e);for(;s;){const i=Object.getOwnPropertyDescriptor(s,n);if(i)return i;s=dr(s)}}function nh(e){e.modified_||(e.modified_=!0,e.parent_&&nh(e.parent_))}function Cf(e){e.copy_||(e.copy_=Jf(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Rk=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(n,s,i)=>{if(typeof n=="function"&&typeof s!="function"){const c=s;s=n;const u=this;return function(g=c,...p){return u.produce(g,y=>s.call(this,y,...p))}}typeof s!="function"&&na(6),i!==void 0&&typeof i!="function"&&na(7);let r;if(Hs(n)){const c=p0(this),u=ah(n,void 0);let d=!0;try{r=s(u),d=!1}finally{d?eh(c):th(c)}return g0(c,i),v0(r,c)}else if(!n||typeof n!="object"){if(r=s(n),r===void 0&&(r=n),r===Fx&&(r=void 0),this.autoFreeze_&&Ih(r,!0),i){const c=[],u=[];Zs("Patches").generateReplacementPatches_(n,r,c,u),i(c,u)}return r}else na(1,n)},this.produceWithPatches=(n,s)=>{if(typeof n=="function")return(u,...d)=>this.produceWithPatches(u,g=>n(g,...d));let i,r;return[this.produce(n,s,(u,d)=>{i=u,r=d}),i,r]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Hs(e)||na(8),Xi(e)&&(e=kk(e));const n=p0(this),s=ah(e,void 0);return s[Bn].isManual_=!0,th(n),s}finishDraft(e,n){const s=e&&e[Bn];(!s||!s.isManual_)&&na(9);const{scope_:i}=s;return g0(i,n),v0(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let s;for(s=n.length-1;s>=0;s--){const r=n[s];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}s>-1&&(n=n.slice(s+1));const i=Zs("Patches").applyPatches_;return Xi(e)?i(e,n):this.produce(e,r=>i(r,n))}};function ah(e,n){const s=vr(e)?Zs("MapSet").proxyMap_(e,n):Lc(e)?Zs("MapSet").proxySet_(e,n):Ck(e,n);return(n?n.scope_:Vx()).drafts_.push(s),s}function kk(e){return Xi(e)||na(10,e),Wx(e)}function Wx(e){if(!Hs(e)||qc(e))return e;const n=e[Bn];let s,i=!0;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,s=Jf(e,n.scope_.immer_.useStrictShallowCopy_),i=n.scope_.immer_.shouldUseStrictIteration()}else s=Jf(e,!0);return vc(s,(r,c)=>{Yx(s,r,Wx(c))},i),n&&(n.finalized_=!1),s}var Ak=new Rk,Ok=Ak.produce;const zk=e=>(n,s,i)=>(i.setState=(r,c,...u)=>{const d=typeof r=="function"?Ok(r):r;return n(d,c,...u)},e(i.setState,s,i)),Pk=zk,nc={itemId:null,slot:null};function Xx(){return Object.fromEntries(tt.map(e=>[e,null]))}function Qx(){return Object.fromEntries(vs.map(e=>[e,[]]))}function Ik(){return Object.fromEntries(tt.map(e=>[e,!1]))}function b0(){return{slots:Xx(),craftedSlots:{},binsByCategory:Qx(),locks:Ik(),level:106,characterClass:null,selectedSlot:"weapon",comparePreview:{...nc},legacyHash:null}}function sh(e){return{slots:{...e.slots},craftedSlots:{...e.craftedSlots},binsByCategory:Object.fromEntries(vs.map(n=>[n,[...e.binsByCategory[n]]])),locks:{...e.locks},level:e.level,characterClass:e.characterClass,selectedSlot:e.selectedSlot,comparePreview:{...e.comparePreview},legacyHash:e.legacyHash}}function gn(e){e.undoStack.push(sh(e)),e.undoStack.length>100&&e.undoStack.shift(),e.redoStack=[]}function Df(e,n){e.slots={...n.slots},e.craftedSlots={...n.craftedSlots},e.binsByCategory=Object.fromEntries(vs.map(s=>[s,[...n.binsByCategory[s]]])),e.locks={...n.locks},e.level=n.level,e.characterClass=n.characterClass,e.selectedSlot=n.selectedSlot,e.comparePreview={...n.comparePreview},e.legacyHash=n.legacyHash}function Rf(e,n){e.includes(n)||e.unshift(n)}const Yo=wk()(Pk((e,n)=>({...b0(),undoStack:[],redoStack:[],setLevel(s){e(i=>{gn(i),i.level=Math.min(106,Math.max(1,Math.round(s)))})},setCharacterClass(s){e(i=>{gn(i),i.characterClass=s})},setSelectedSlot(s){e(i=>{i.selectedSlot=s})},setComparePreview(s){e(i=>{if(!s){i.comparePreview={...nc};return}i.comparePreview={itemId:s.itemId??i.comparePreview.itemId,slot:s.slot??i.comparePreview.slot}})},pinItem(s,i){e(r=>{gn(r),Rf(r.binsByCategory[s],i)})},removePinnedItem(s,i){e(r=>{gn(r),r.binsByCategory[s]=r.binsByCategory[s].filter(c=>c!==i)})},clearCategory(s){e(i=>{gn(i),i.binsByCategory[s]=[]})},clearAll(){e(s=>{gn(s),s.slots=Xx(),s.craftedSlots={},s.binsByCategory=Qx(),s.comparePreview={...nc},s.legacyHash=null})},equipItem(s,i){e(r=>{gn(r),r.slots[s]=i,delete r.craftedSlots[s],r.selectedSlot=s})},moveSlotToBin(s){e(i=>{const r=i.slots[s];if(r==null)return;gn(i);const c=fa(s);Rf(i.binsByCategory[c],r),i.slots[s]=null})},swapSlots(s,i){e(r=>{gn(r);const c=r.slots[s];r.slots[s]=r.slots[i],r.slots[i]=c})},assignDraggedItemToSlot({targetSlot:s,source:i,itemId:r,sourceCategory:c,sourceSlot:u}){e(d=>{gn(d);const g=d.slots[s];d.slots[s]=r,delete d.craftedSlots[s],d.selectedSlot=s,i==="bin"&&c&&(d.binsByCategory[c]=d.binsByCategory[c].filter(p=>p!==r)),i==="slot"&&u&&u!==s&&(d.slots[u]=g??null)})},assignDraggedItemToBin({targetCategory:s,source:i,itemId:r,sourceCategory:c,sourceSlot:u}){e(d=>{gn(d),i==="bin"&&c&&(d.binsByCategory[c]=d.binsByCategory[c].filter(g=>g!==r)),i==="slot"&&u&&(d.slots[u]=null),Rf(d.binsByCategory[s],r)})},toggleLock(s){e(i=>{gn(i),i.locks[s]=!i.locks[s]})},equipCraftedItem(s,i){e(r=>{gn(r),r.slots[s]=null,r.craftedSlots[s]=i,r.selectedSlot=s})},clearCraftedSlot(s){e(i=>{gn(i),delete i.craftedSlots[s]})},undo(){const s=n(),i=s.undoStack[s.undoStack.length-1];i&&e(r=>{const c=sh(r);r.undoStack.pop(),r.redoStack.push(c),Df(r,i)})},redo(){const s=n(),i=s.redoStack[s.redoStack.length-1];i&&e(r=>{const c=sh(r);r.redoStack.pop(),r.undoStack.push(c),Df(r,i)})},hydrateSnapshot(s){e(i=>{const r=b0(),c={...r,...s,slots:{...r.slots,...s.slots??{}},craftedSlots:{...r.craftedSlots,...s.craftedSlots??{}},locks:{...r.locks,...s.locks??{}},binsByCategory:{...r.binsByCategory,...s.binsByCategory??{}},comparePreview:{...r.comparePreview,...s.comparePreview??{}}};Df(i,c),i.undoStack=[],i.redoStack=[]})},loadCandidate(s){e(i=>{gn(i),i.slots={...s},i.comparePreview={...nc}})},setLegacyHash(s){e(i=>{i.legacyHash=s})}})));var kf={exports:{}},x0;function Bk(){return x0||(x0=1,(function(e){var n=(function(){var s=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",c={};function u(g,p){if(!c[g]){c[g]={};for(var y=0;y<g.length;y++)c[g][g.charAt(y)]=y}return c[g][p]}var d={compressToBase64:function(g){if(g==null)return"";var p=d._compress(g,6,function(y){return i.charAt(y)});switch(p.length%4){default:case 0:return p;case 1:return p+"===";case 2:return p+"==";case 3:return p+"="}},decompressFromBase64:function(g){return g==null?"":g==""?null:d._decompress(g.length,32,function(p){return u(i,g.charAt(p))})},compressToUTF16:function(g){return g==null?"":d._compress(g,15,function(p){return s(p+32)})+" "},decompressFromUTF16:function(g){return g==null?"":g==""?null:d._decompress(g.length,16384,function(p){return g.charCodeAt(p)-32})},compressToUint8Array:function(g){for(var p=d.compress(g),y=new Uint8Array(p.length*2),v=0,b=p.length;v<b;v++){var S=p.charCodeAt(v);y[v*2]=S>>>8,y[v*2+1]=S%256}return y},decompressFromUint8Array:function(g){if(g==null)return d.decompress(g);for(var p=new Array(g.length/2),y=0,v=p.length;y<v;y++)p[y]=g[y*2]*256+g[y*2+1];var b=[];return p.forEach(function(S){b.push(s(S))}),d.decompress(b.join(""))},compressToEncodedURIComponent:function(g){return g==null?"":d._compress(g,6,function(p){return r.charAt(p)})},decompressFromEncodedURIComponent:function(g){return g==null?"":g==""?null:(g=g.replace(/ /g,"+"),d._decompress(g.length,32,function(p){return u(r,g.charAt(p))}))},compress:function(g){return d._compress(g,16,function(p){return s(p)})},_compress:function(g,p,y){if(g==null)return"";var v,b,S={},E={},T="",C="",k="",R=2,z=3,B=2,U=[],M=0,j=0,D;for(D=0;D<g.length;D+=1)if(T=g.charAt(D),Object.prototype.hasOwnProperty.call(S,T)||(S[T]=z++,E[T]=!0),C=k+T,Object.prototype.hasOwnProperty.call(S,C))k=C;else{if(Object.prototype.hasOwnProperty.call(E,k)){if(k.charCodeAt(0)<256){for(v=0;v<B;v++)M=M<<1,j==p-1?(j=0,U.push(y(M)),M=0):j++;for(b=k.charCodeAt(0),v=0;v<8;v++)M=M<<1|b&1,j==p-1?(j=0,U.push(y(M)),M=0):j++,b=b>>1}else{for(b=1,v=0;v<B;v++)M=M<<1|b,j==p-1?(j=0,U.push(y(M)),M=0):j++,b=0;for(b=k.charCodeAt(0),v=0;v<16;v++)M=M<<1|b&1,j==p-1?(j=0,U.push(y(M)),M=0):j++,b=b>>1}R--,R==0&&(R=Math.pow(2,B),B++),delete E[k]}else for(b=S[k],v=0;v<B;v++)M=M<<1|b&1,j==p-1?(j=0,U.push(y(M)),M=0):j++,b=b>>1;R--,R==0&&(R=Math.pow(2,B),B++),S[C]=z++,k=String(T)}if(k!==""){if(Object.prototype.hasOwnProperty.call(E,k)){if(k.charCodeAt(0)<256){for(v=0;v<B;v++)M=M<<1,j==p-1?(j=0,U.push(y(M)),M=0):j++;for(b=k.charCodeAt(0),v=0;v<8;v++)M=M<<1|b&1,j==p-1?(j=0,U.push(y(M)),M=0):j++,b=b>>1}else{for(b=1,v=0;v<B;v++)M=M<<1|b,j==p-1?(j=0,U.push(y(M)),M=0):j++,b=0;for(b=k.charCodeAt(0),v=0;v<16;v++)M=M<<1|b&1,j==p-1?(j=0,U.push(y(M)),M=0):j++,b=b>>1}R--,R==0&&(R=Math.pow(2,B),B++),delete E[k]}else for(b=S[k],v=0;v<B;v++)M=M<<1|b&1,j==p-1?(j=0,U.push(y(M)),M=0):j++,b=b>>1;R--,R==0&&(R=Math.pow(2,B),B++)}for(b=2,v=0;v<B;v++)M=M<<1|b&1,j==p-1?(j=0,U.push(y(M)),M=0):j++,b=b>>1;for(;;)if(M=M<<1,j==p-1){U.push(y(M));break}else j++;return U.join("")},decompress:function(g){return g==null?"":g==""?null:d._decompress(g.length,32768,function(p){return g.charCodeAt(p)})},_decompress:function(g,p,y){var v=[],b=4,S=4,E=3,T="",C=[],k,R,z,B,U,M,j,D={val:y(0),position:p,index:1};for(k=0;k<3;k+=1)v[k]=k;for(z=0,U=Math.pow(2,2),M=1;M!=U;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=y(D.index++)),z|=(B>0?1:0)*M,M<<=1;switch(z){case 0:for(z=0,U=Math.pow(2,8),M=1;M!=U;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=y(D.index++)),z|=(B>0?1:0)*M,M<<=1;j=s(z);break;case 1:for(z=0,U=Math.pow(2,16),M=1;M!=U;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=y(D.index++)),z|=(B>0?1:0)*M,M<<=1;j=s(z);break;case 2:return""}for(v[3]=j,R=j,C.push(j);;){if(D.index>g)return"";for(z=0,U=Math.pow(2,E),M=1;M!=U;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=y(D.index++)),z|=(B>0?1:0)*M,M<<=1;switch(j=z){case 0:for(z=0,U=Math.pow(2,8),M=1;M!=U;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=y(D.index++)),z|=(B>0?1:0)*M,M<<=1;v[S++]=s(z),j=S-1,b--;break;case 1:for(z=0,U=Math.pow(2,16),M=1;M!=U;)B=D.val&D.position,D.position>>=1,D.position==0&&(D.position=p,D.val=y(D.index++)),z|=(B>0?1:0)*M,M<<=1;v[S++]=s(z),j=S-1,b--;break;case 2:return C.join("")}if(b==0&&(b=Math.pow(2,E),E++),v[j])T=v[j];else if(j===S)T=R+R.charAt(0);else return null;C.push(T),v[S++]=R+T.charAt(0),b--,R=T,b==0&&(b=Math.pow(2,E),E++)}}};return d})();e!=null?e.exports=n:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return n})})(kf)),kf.exports}var Lk=Bk();const Jx=hh(Lk),ih={helmet:"h",chestplate:"c",leggings:"l",boots:"b",ring1:"r1",ring2:"r2",bracelet:"br",necklace:"n",weapon:"w"},Vo=Object.fromEntries(Object.entries(ih).map(([e,n])=>[n,e])),qk=rr({slots:tr(_n(),ta().int().nullable()).optional(),binsByCategory:tr(_n(),In(ta().int())).optional(),locks:tr(_n(),Xl()).optional(),level:ta().int().min(1).max(106).optional(),characterClass:mc(["Warrior","Assassin","Mage","Archer","Shaman"]).nullable().optional(),selectedSlot:_n().nullable().optional(),legacyHash:_n().nullable().optional()}).passthrough(),Uk=rr({version:_n().nullable().optional(),selectedByClass:rr({Warrior:In(ta().int()).optional(),Assassin:In(ta().int()).optional(),Mage:In(ta().int()).optional(),Archer:In(ta().int()).optional(),Shaman:In(ta().int()).optional()}).partial().default({})});function $k(e){const n=e.replace(/-/g,"+").replace(/_/g,"/").padEnd(Math.ceil(e.length/4)*4,"="),s=atob(n),i=Uint8Array.from(s,r=>r.charCodeAt(0));return new TextDecoder().decode(i)}function eS(e){const n=Jx.decompressFromEncodedURIComponent(e);if(n!=null&&n!=="")return n;try{return $k(e)}catch{return null}}function tS(e){return Jx.compressToEncodedURIComponent(e)}function S0(e){try{return JSON.parse(e)}catch{return null}}function nS(e){const n=e.searchParams.get("q")??"",s=e.searchParams.get("sort"),i=s?s.split(",").map(k=>k.trim()).filter(Boolean):[],r=e.searchParams.get("sdesc"),c=e.searchParams.get("view"),u=e.searchParams.get("wearLevel"),d=e.searchParams.get("classCompat"),g=e.searchParams.get("excludeRestricted"),p=(e.searchParams.get("cats")??"").split(",").map(k=>k.trim()).filter(Boolean),y=(e.searchParams.get("types")??"").split(",").map(k=>k.trim()).filter(Boolean),v=(e.searchParams.get("tiers")??"").split(",").map(k=>k.trim()).filter(Boolean),b=(e.searchParams.get("classReqs")??"").split(",").map(k=>k.trim()).filter(Boolean),S=(e.searchParams.get("majorIds")??"").split(",").map(k=>k.trim()).filter(Boolean),E=S0(e.searchParams.get("ranges")??"")??{},T=S0(e.searchParams.get("excludeRanges")??"")??{},C=e.searchParams.get("resultsBelow");return Vb({...Oa,text:n,sortKeys:i.length>0?i:Oa.sortKeys,sortDescending:r===null?Oa.sortDescending:r!=="0",viewMode:c??Oa.viewMode,onlyWearableAtLevel:u?Number(u):Oa.onlyWearableAtLevel,onlyClassCompatible:d==="1",excludeRestricted:g===null?!1:g!=="0",categories:p,types:y,tiers:v,classReqs:b,majorIds:S,numericRanges:E,exclusionRanges:T,resultsBelowBuild:C===null?Oa.resultsBelowBuild:C==="1"})}function Hk(e){const n=e.s??e.slots,s=e.k??e.locks,i=e.l??e.level,r=e.c??e.characterClass,c=e.h??e.legacyHash;let u=e.selectedSlot;typeof u=="string"&&Vo[u]&&(u=Vo[u]);const d=e.binsByCategory;if(n&&typeof n=="object"){const g={};for(const[p,y]of Object.entries(n)){const v=Vo[p]??p;g[v]=typeof y=="number"||y===null?y:null}e={...e,slots:g}}if(s&&typeof s=="object"){const g={};for(const[p,y]of Object.entries(s)){const v=Vo[p]??p;g[v]=!!y}e={...e,locks:g}}return i!==void 0&&(e={...e,level:i}),r!==void 0&&(e={...e,characterClass:r}),c!==void 0&&(e={...e,legacyHash:c}),u!==void 0&&(e={...e,selectedSlot:u}),d!==void 0&&(e={...e,binsByCategory:d}),e}function aS(e){const n=e.searchParams.get("wb");if(!n)return null;try{const s=eS(n);if(!s)return null;const i=JSON.parse(s),r=Hk(i),c=qk.parse(r),u=Object.fromEntries(tt.map(p=>[p,c.slots?.[p]??null])),d=Object.fromEntries(vs.map(p=>[p,c.binsByCategory?.[p]??[]])),g=Object.fromEntries(tt.map(p=>[p,!!c.locks?.[p]]));return{slots:u,binsByCategory:d,locks:g,level:c.level,characterClass:c.characterClass??null,selectedSlot:c.selectedSlot??void 0,legacyHash:c.legacyHash??null}}catch{return null}}function sS(e){const n=e.searchParams.get("atree");if(!n)return null;try{const s=eS(n);if(!s)return null;const i=JSON.parse(s),r=Uk.parse({version:i.v??i.version,selectedByClass:i.s??i.selectedByClass});return{version:r.version??null,selectedByClass:r.selectedByClass}}catch{return null}}function Zk(e=window.location){const n=new URL(e.href),s=n.hash?n.hash.slice(1):null;return{search:nS(n),workbenchPatch:aS(n),legacyHash:s||null,mode:n.searchParams.get("mode"),abilityTree:sS(n)}}function iS(e){const n={};for(const[r,c]of Object.entries(e.slots)){const u=ih[r]??r;n[u]=c}const s={};for(const[r,c]of Object.entries(e.locks))c&&(s[ih[r]??r]=!0);const i={s:n,k:Object.keys(s).length>0?s:void 0,l:e.level,c:e.characterClass,h:e.legacyHash};return tS(JSON.stringify(i))}function w0(e){const n=new URL(window.location.origin+window.location.pathname),s=n.searchParams;s.set("wb",iS(e.workbenchSnapshot)),e.abilityTreeState&&Object.keys(e.abilityTreeState.selectedByClass??{}).length>0?s.set("atree",tS(JSON.stringify({v:e.abilityTreeState.version??null,s:e.abilityTreeState.selectedByClass}))):s.delete("atree"),e.mode?s.set("mode",e.mode):s.delete("mode");const i=e.legacyHash??e.workbenchSnapshot.legacyHash;n.hash=i?`#${i}`:"",e.replace?window.history.replaceState({},"",n):window.history.pushState({},"",n)}const ua={legacyBaseDps:1,legacyEhp:.7,dpsProxy:1,spellProxy:0,meleeProxy:0,ehpProxy:.6,speed:.4,sustain:.35,skillPointTotal:.15,reqTotalPenalty:.2},ea={characterClass:null,level:106,mustIncludeIds:[],excludedIds:[],lockedSlots:{},target:{},allowedTiers:[],requiredMajorIds:[],excludedMajorIds:[],weaponAttackSpeeds:[],attackSpeedConstraintMode:"or",skillpointFeasibilityMode:"no_tomes",minPowderSlots:null,onlyPinnedItems:!1,weights:ua,topN:50,topKPerSlot:80,beamWidth:350,maxStates:12e4,useExhaustiveSmallPool:!0,exhaustiveStateLimit:25e4,allowRestricted:!0};function Fk(e){return e.aggregated.hprTotal*.9+e.aggregated.mr*14+e.aggregated.ms*10+e.aggregated.ls*9}function Gk(e,n){let s=0;const{target:i}=n;return typeof i.minLegacyBaseDps=="number"&&e.derived.legacyBaseDps<i.minLegacyBaseDps&&(s+=(i.minLegacyBaseDps-e.derived.legacyBaseDps)*4),typeof i.minLegacyEhp=="number"&&e.derived.legacyEhp<i.minLegacyEhp&&(s+=(i.minLegacyEhp-e.derived.legacyEhp)*.8),typeof i.minDpsProxy=="number"&&e.derived.dpsProxy<i.minDpsProxy&&(s+=(i.minDpsProxy-e.derived.dpsProxy)*4),typeof i.minEhpProxy=="number"&&e.derived.ehpProxy<i.minEhpProxy&&(s+=(i.minEhpProxy-e.derived.ehpProxy)*1.1),typeof i.minMr=="number"&&e.aggregated.mr<i.minMr&&(s+=(i.minMr-e.aggregated.mr)*45),typeof i.minMs=="number"&&e.aggregated.ms<i.minMs&&(s+=(i.minMs-e.aggregated.ms)*35),typeof i.minSpeed=="number"&&e.aggregated.speed<i.minSpeed&&(s+=(i.minSpeed-e.aggregated.speed)*12),typeof i.minSkillPointTotal=="number"&&e.derived.skillPointTotal<i.minSkillPointTotal&&(s+=(i.minSkillPointTotal-e.derived.skillPointTotal)*15),typeof i.maxReqTotal=="number"&&e.derived.reqTotal>i.maxReqTotal&&(s+=(e.derived.reqTotal-i.maxReqTotal)*8),s}function Lh(e,n,s){const i=Fk(e),r=e.derived.reqTotal*n.reqTotalPenalty,c=Gk(e,s),u={legacyBaseDps:e.derived.legacyBaseDps*n.legacyBaseDps,legacyEhp:e.derived.legacyEhp*n.legacyEhp,dpsProxy:e.derived.dpsProxy*n.dpsProxy,spellProxy:e.derived.spellProxy*n.spellProxy,meleeProxy:e.derived.meleeProxy*n.meleeProxy,ehpProxy:e.derived.ehpProxy*n.ehpProxy,speed:e.aggregated.speed*n.speed,sustain:i*n.sustain,skillPointTotal:e.derived.skillPointTotal*n.skillPointTotal,reqPenalty:r,thresholdPenalty:c};return{score:u.legacyBaseDps+u.legacyEhp+u.dpsProxy+u.spellProxy+u.meleeProxy+u.ehpProxy+u.speed+u.sustain+u.skillPointTotal-u.reqPenalty-u.thresholdPenalty,breakdown:u}}function Yk(e,n){const s=new Map;for(const i of tt){const r=e[i];if(r==null)continue;const c=n.itemSetName.get(r);c&&s.set(c,(s.get(c)??0)+1)}return s}function Uc(e,n,s){const i=s.itemSetName.get(e);if(!i)return!1;const r=s.setsMeta.get(i);if(!r)return!1;let c=0;for(const u of tt){const d=n[u];d!=null&&s.itemSetName.get(d)===i&&c++}return r.illegalCounts.includes(c+1)}const Vk=[0,0,0,0,0],Kk=[1,1,1,1,1],_0=["str","dex","int","def","agi"],Ia=["SUPER_SLOW","VERY_SLOW","SLOW","NORMAL","FAST","VERY_FAST","SUPER_FAST"];function $c(e){return e.skillpointFeasibilityMode==="guild_rainbow"?Kk:Vk}function Ba(e){return Math.round(e.numeric.atkTier||0)}function qh(e,n){switch(n){case"str":return Math.max(0,e.numeric.spStr);case"dex":return Math.max(0,e.numeric.spDex);case"int":return Math.max(0,e.numeric.spInt);case"def":return Math.max(0,e.numeric.spDef);case"agi":return Math.max(0,e.numeric.spAgi)}}function Wk(e,n){switch(n){case"str":return e.numeric.reqStr;case"dex":return e.numeric.reqDex;case"int":return e.numeric.reqInt;case"def":return e.numeric.reqDef;case"agi":return e.numeric.reqAgi}}function Xk(e,n){if(n.length===0)return 0;let s=0;for(const i of n)s+=qh(e,i)*10,s-=Math.max(0,Wk(e,i))*.7;return s-=Math.max(0,e.roughScoreFields.reqTotal)*.12,s}function aa(e){return{...e}}function Qk(e,n){const s=e.weapon;if(s==null)return null;const i=n.itemsById.get(s);if(!i)return null;const r=Ia.indexOf(i.atkSpd);if(r<0)return null;let c=0;for(const d of tt){const g=e[d];if(g==null)continue;const p=n.itemsById.get(g);p&&(c+=Ba(p))}const u=Math.max(0,Math.min(Ia.length-1,r+c));return Ia[u]}function Uh(e,n){let s=0;for(const i of tt){const r=e[i];if(r==null)continue;const c=n.itemsById.get(r);c&&(s+=Ba(c))}return s}function Jk(e,n,s){if(s.weaponAttackSpeeds.length===0)return null;const i=e.weapon;if(i==null)return null;const r=n.itemsById.get(i);if(!r)return null;const c=Ia.indexOf(r.atkSpd);if(c<0)return null;const u=[...new Set(s.weaponAttackSpeeds.map(y=>Ia.indexOf(y)).filter(y=>y>=0))].sort((y,v)=>y-v);if(u.length===0)return null;const d=Uh(e,n),g=Math.max(0,Math.min(Ia.length-1,c+d));let p=0;if(!u.includes(g)){const y=u.reduce((v,b)=>Math.abs(b-g)<Math.abs(v-g)?b:v,u[0]);p=y>g?1:y<g?-1:0}return{baseSpeedIndex:c,fixedAtkTierTotal:d,allowedFinalIndices:u,allowedFinalIndexSet:new Set(u),preferredDirection:p}}function xc(e,n,s){const i=new Array(e.length+1).fill(0),r=new Array(e.length+1).fill(0);for(let c=e.length-1;c>=0;c--){const u=n.get(e[c])??[];let d=0,g=0;if(u.length>0){d=1/0,g=-1/0;for(const p of u){const y=s.itemsById.get(p.id),v=y?Ba(y):0;v<d&&(d=v),v>g&&(g=v)}Number.isFinite(d)||(d=0),Number.isFinite(g)||(g=0)}i[c]=i[c+1]+d,r[c]=r[c+1]+g}return{minSuffix:i,maxSuffix:r}}function eA(e,n,s,i){const r=e.fixedAtkTierTotal+n+s,c=e.fixedAtkTierTotal+n+i,u=Math.min(r,c),d=Math.max(r,c);for(let g=u;g<=d;g++){const p=Math.max(0,Math.min(Ia.length-1,e.baseSpeedIndex+g));if(e.allowedFinalIndexSet.has(p))return!0}return!1}function hs(e,n,s=0,i=0){if(!e||!e.preferredDirection)return 0;const r=e.fixedAtkTierTotal+(n??0),c=Math.max(0,Math.min(Ia.length-1,e.baseSpeedIndex+r+s)),u=Math.max(0,Math.min(Ia.length-1,e.baseSpeedIndex+r+i)),d=Math.min(c,u),g=Math.max(c,u);let p=1/0,y=0;for(let b=d;b<=g;b++){let S=1/0;for(const E of e.allowedFinalIndices){const T=Math.abs(E-b);T<S&&(S=T)}S<p&&(p=S),S>y&&(y=S)}if(!Number.isFinite(p)||y===0)return 0;const v=e.preferredDirection>0?d:-g;return-y*1e3-p*100+v}function tA(e,n,s,i){const{target:r}=n,c=Hc(n,{includeAttackTier:!1}),u=[];if(typeof r.minLegacyBaseDps=="number"&&e.derived.legacyBaseDps<r.minLegacyBaseDps&&u.push(`minLegacyBaseDps (${e.derived.legacyBaseDps} < ${r.minLegacyBaseDps})`),typeof r.minLegacyEhp=="number"&&e.derived.legacyEhp<r.minLegacyEhp&&u.push(`minLegacyEhp (${e.derived.legacyEhp} < ${r.minLegacyEhp})`),typeof r.minDpsProxy=="number"&&e.derived.dpsProxy<r.minDpsProxy&&u.push(`minDpsProxy (${e.derived.dpsProxy} < ${r.minDpsProxy})`),typeof r.minEhpProxy=="number"&&e.derived.ehpProxy<r.minEhpProxy&&u.push(`minEhpProxy (${e.derived.ehpProxy} < ${r.minEhpProxy})`),typeof r.minMr=="number"&&e.aggregated.mr<r.minMr&&u.push(`minMr (${e.aggregated.mr} < ${r.minMr})`),typeof r.minMs=="number"&&e.aggregated.ms<r.minMs&&u.push(`minMs (${e.aggregated.ms} < ${r.minMs})`),typeof r.minSpeed=="number"&&e.aggregated.speed<r.minSpeed&&u.push(`minSpeed (${e.aggregated.speed} < ${r.minSpeed})`),typeof r.minSkillPointTotal=="number"&&e.derived.skillPointTotal<r.minSkillPointTotal&&u.push(`minSkillPointTotal (${e.derived.skillPointTotal} < ${r.minSkillPointTotal})`),typeof r.maxReqTotal=="number"&&e.derived.reqTotal>r.maxReqTotal&&u.push(`maxReqTotal (${e.derived.reqTotal} > ${r.maxReqTotal})`),c.length>0&&s&&i)for(const d of c){const g=d.key;let p=0;for(const y of tt){const v=s[y];if(v==null)continue;const b=i.itemsById.get(v);b&&(p+=b.numericIndex[g]??0)}typeof d.min=="number"&&p<d.min&&u.push(`${g} (${p} < ${d.min})`),typeof d.max=="number"&&p>d.max&&u.push(`${g} (${p} > ${d.max})`)}return u.length>0?{ok:!1,failedChecks:u}:{ok:!0}}function $h(e,n,s,i){const r=[...new Set(s.mustIncludeIds)];for(const g of r){let p=!1;for(const y of tt)if(e[y]===g){p=!0;break}if(!p)return{ok:!1,reason:"item",failedChecks:[`mustIncludeMissing (${g})`]}}for(const g of tt){const p=e[g];if(p==null)continue;const y=n.itemsById.get(p);if(!y)return{ok:!1,reason:"item"};if(!Hh(y,s))return{ok:!1,reason:"item"}}const c=Yk(e,n);for(const[g,p]of c){const y=n.setsMeta.get(g);if(y&&y.illegalCounts.includes(p))return{ok:!1,reason:"item"}}const u=fA({constraints:s,slots:e,catalog:n,atkTierRequirement:cS(oS(s))});if(u.configured&&!u.ok)return{ok:!1,reason:"attackSpeed",failedChecks:u.failedChecks};const d=tA(i,s,e,n);return d.ok?{ok:!0}:{ok:!1,reason:"thresholds",failedChecks:d.failedChecks}}function Hh(e,n){return!(!n.allowRestricted&&(e.restricted||e.deprecated)||e.level>n.level||!vb(e,n.characterClass)||n.excludedIds.includes(e.id)||n.allowedTiers.length>0&&!n.allowedTiers.includes(e.tier)||n.minPowderSlots!=null&&e.powderSlots<n.minPowderSlots||n.excludedMajorIds.length>0&&n.excludedMajorIds.some(s=>e.majorIds.includes(s)))}const Aa=2.5;function lh(e,n){const s={...n};return typeof e.minLegacyBaseDps=="number"&&(s.legacyBaseDps=Math.max(s.legacyBaseDps,ua.legacyBaseDps*Aa)),typeof e.minLegacyEhp=="number"&&(s.legacyEhp=Math.max(s.legacyEhp,ua.legacyEhp*Aa)),typeof e.minDpsProxy=="number"&&(s.dpsProxy=Math.max(s.dpsProxy,ua.dpsProxy*Aa)),typeof e.minEhpProxy=="number"&&(s.ehpProxy=Math.max(s.ehpProxy,ua.ehpProxy*Aa)),(typeof e.minMr=="number"||typeof e.minMs=="number")&&(s.sustain=Math.max(s.sustain,ua.sustain*Aa)),typeof e.minSpeed=="number"&&(s.speed=Math.max(s.speed,ua.speed*Aa)),typeof e.minSkillPointTotal=="number"&&(s.skillPointTotal=Math.max(s.skillPointTotal,ua.skillPointTotal*Aa)),typeof e.maxReqTotal=="number"&&(s.reqTotalPenalty=Math.max(s.reqTotalPenalty,ua.reqTotalPenalty*Aa)),(e.customNumericRanges?.length??0)>0&&(s.sustain=Math.max(s.sustain,ua.sustain*Aa)),s}const nA=3,aA=2,sA=14;function iA(e,n){let s=e.numeric.baseDps*n.weights.legacyBaseDps+e.roughScoreFields.ehpProxy*n.weights.legacyEhp+e.roughScoreFields.offense*n.weights.dpsProxy+e.roughScoreFields.ehpProxy*n.weights.ehpProxy+e.numeric.spd*n.weights.speed+e.roughScoreFields.utility*n.weights.sustain+e.roughScoreFields.skillPointTotal*n.weights.skillPointTotal-e.roughScoreFields.reqTotal*n.weights.reqTotalPenalty;const i=n.target.customNumericRanges??[],c=i.some(u=>typeof u.min=="number")?sA:nA;for(const u of i){const d=u.key?.trim();if(!d)continue;const g=e.numericIndex[d]??0;typeof u.min=="number"&&(s+=g*c),typeof u.max=="number"&&(s-=g*aA)}return s}function Ki(e){const n=e.ring1??0,s=e.ring2??0,[i,r]=n<=s?[n,s]:[s,n];return[e.helmet??0,e.chestplate??0,e.leggings??0,e.boots??0,i,r,e.bracelet??0,e.necklace??0,e.weapon??0].join("|")}function lS(e,n,s,i=.6){const r=Math.max(1,s),c=[],u=new Set,d=Math.max(1,Math.min(r,Math.round(r*i)));let g=0,p=0;const y=v=>{const b=`${v.orderIndex}|${Ki(v.slots)}`;return u.has(b)?!1:(u.add(b),c.push(v),!0)};for(;c.length<r&&(g<e.length||p<n.length);){if(c.length<d&&g<e.length){y(e[g]),g++;continue}if(p<n.length){y(n[p]),p++;continue}if(g<e.length){y(e[g]),g++;continue}break}return c}function rS(e,n){return fa(n)===e.category}function lA(e,n,s){const i=aa(e),r=[...new Set(s.mustIncludeIds)];for(const c of r){const u=n.itemsById.get(c);if(!u)return{slots:i,ok:!1,reasonCode:"must_include_conflict",detail:`Must-include item ${c} does not exist in catalog.`};if(!Hh(u,s))return{slots:i,ok:!1,reasonCode:"must_include_conflict",detail:`Must-include item ${u.displayName} is incompatible with current hard filters (class/level/tier/exclusions).`};if(tt.some(y=>i[y]===u.id))continue;const p=tt.filter(y=>i[y]==null&&rS(u,y))[0];if(!p)return{slots:i,ok:!1,reasonCode:"must_include_conflict",detail:`No free ${u.category} slot available to place must-include item ${u.displayName}.`};i[p]=u.id}return{slots:i,ok:!0}}function rA(e,n){const s={str:0,dex:0,int:0,def:0,agi:0};for(const r of tt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);u&&(s.str=Math.max(s.str,u.numeric.reqStr),s.dex=Math.max(s.dex,u.numeric.reqDex),s.int=Math.max(s.int,u.numeric.reqInt),s.def=Math.max(s.def,u.numeric.reqDef),s.agi=Math.max(s.agi,u.numeric.reqAgi))}const i=_0.filter(r=>s[r]>100).sort((r,c)=>s[c]-s[r]);return i.length>0?i:_0.filter(r=>s[r]>=70).sort((r,c)=>s[c]-s[r]).slice(0,2)}function oA(e,n,s){if(s.length===0)return[];const i={str:0,dex:0,int:0,def:0,agi:0};for(const r of tt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);u&&(i.str=Math.max(i.str,u.numeric.reqStr),i.dex=Math.max(i.dex,u.numeric.reqDex),i.int=Math.max(i.int,u.numeric.reqInt),i.def=Math.max(i.def,u.numeric.reqDef),i.agi=Math.max(i.agi,u.numeric.reqAgi))}return s.map(r=>Math.max(0,i[r]-100))}function E0(e,n){return n.map(s=>qh(e,s))}function nr(e,n){if(e.length===0)return n.slice();const s=new Array(e.length);for(let i=0;i<e.length;i++)s[i]=(e[i]??0)+(n[i]??0);return s}function cA(e,n,s){for(let i=0;i<s.length;i++)if((e[i]??0)+(n[i]??0)<s[i])return!1;return!0}function T0(e,n){let s=0;for(let i=0;i<n.length;i++)s+=Math.max(0,n[i]-(e[i]??0));return s}function Sc(e,n){if(!e||n.length===0)return 0;let s=0;for(let i=0;i<n.length;i++){const r=e[i]??0,c=n[i];typeof c.min=="number"&&r<c.min&&(s+=c.min-r),typeof c.max=="number"&&r>c.max&&(s+=r-c.max)}return s}function N0(e,n,s,i){if(i.length===0)return 0;const r=n.get(e)??[];let c=0;for(const u of r){const d=s.itemsById.get(u.id);if(!d)continue;let g=0;for(const p of i)g+=qh(d,p);g>c&&(c=g)}return c}function Hc(e,n={}){const s=n.includeAttackTier??!0;return(e.target.customNumericRanges??[]).map(i=>({key:(i.key??"").trim(),min:typeof i.min=="number"?i.min:void 0,max:typeof i.max=="number"?i.max:void 0})).filter(i=>i.key&&(typeof i.min=="number"||typeof i.max=="number")).filter(i=>s||i.key!=="atkTier")}function oS(e){return Hc(e,{includeAttackTier:!0}).filter(n=>n.key==="atkTier")}function rh(e){const n=e.attackSpeedConstraintMode==="or"&&e.weaponAttackSpeeds.length>0;return Hc(e,{includeAttackTier:!n})}function cS(e){if(e.length===0)return{hasConstraint:!1,minAllowed:Number.NEGATIVE_INFINITY,maxAllowed:Number.POSITIVE_INFINITY,rows:[]};let n=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;for(const i of e)typeof i.min=="number"&&(n=Math.max(n,i.min)),typeof i.max=="number"&&(s=Math.min(s,i.max));return{hasConstraint:!0,minAllowed:n,maxAllowed:s,rows:e}}function uA(e,n){return n.hasConstraint?e>=n.minAllowed&&e<=n.maxAllowed:!1}function dA(e,n,s,i,r){if(!e.hasConstraint)return!1;const c=n+s+Math.min(i,r),u=n+s+Math.max(i,r);return c<=e.maxAllowed&&u>=e.minAllowed}function fA(e){const{constraints:n,slots:s,catalog:i,atkTierRequirement:r}=e,c=n.weaponAttackSpeeds.length>0,u=r.hasConstraint;if(!c&&!u)return{configured:!1,ok:!0};const d=[];let g=!1;if(c){const b=Qk(s,i);g=!!(b&&n.weaponAttackSpeeds.includes(b)),g||d.push(`attackSpeed (expected ${n.weaponAttackSpeeds.join("/")} )`)}let p=!1;if(u){const b=Uh(s,i);if(p=uA(b,r),!p){const S=Number.isFinite(r.minAllowed)?r.minAllowed:"-inf",E=Number.isFinite(r.maxAllowed)?r.maxAllowed:"+inf";d.push(`atkTier (${b} not in [${S}, ${E}])`)}}const y=n.attackSpeedConstraintMode;return(c&&u?y==="and"?g&&p:g||p:c?g:p)?{configured:!0,ok:!0}:{configured:!0,ok:!1,failedChecks:d}}function wc(e){const{constraints:n,attackSpeedCtx:s,atkTierRequirement:i,fixedAtkTierTotal:r,partialAssignedAtkTier:c,remainingMinAtkTier:u,remainingMaxAtkTier:d}=e,g=n.weaponAttackSpeeds.length>0,p=i.hasConstraint;if(!g&&!p)return!0;const y=g?s?eA(s,c,u,d):!0:!1,v=p?dA(i,r,c,u,d):!1;return g&&p?n.attackSpeedConstraintMode==="and"?y&&v:y||v:g?y:v}function Ko(e,n,s){const i=n.itemsById.get(e.id);return i?i.numericIndex[s]??0:0}function _c(e,n,s){const i=s.map(()=>0);if(s.length===0)return i;for(const r of tt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);if(u)for(let d=0;d<s.length;d++)i[d]+=u.numericIndex[s[d]]??0}return i}function oh(e){const{slotOrder:n,candidatePools:s,catalog:i,keys:r}=e,c=Array.from({length:n.length+1},()=>r.map(()=>0)),u=Array.from({length:n.length+1},()=>r.map(()=>0));if(r.length===0)return{maxSuffix:c,minSuffix:u};for(let d=n.length-1;d>=0;d--){const g=s.get(n[d])??[],p=r.map(()=>Number.NEGATIVE_INFINITY),y=r.map(()=>Number.POSITIVE_INFINITY);for(const v of g){const b=i.itemsById.get(v.id);if(b)for(let S=0;S<r.length;S++){const E=b.numericIndex[r[S]]??0;E>p[S]&&(p[S]=E),E<y[S]&&(y[S]=E)}}for(let v=0;v<r.length;v++){const b=Number.isFinite(p[v])?p[v]:0,S=Number.isFinite(y[v])?y[v]:0;c[d][v]=c[d+1][v]+b,u[d][v]=u[d+1][v]+S}}return{maxSuffix:c,minSuffix:u}}function hA(e,n,s,i,r=[]){const c=[],u=Hc(s);for(const M of n.items)rS(M,e)&&(i&&!i.has(M.id)||Hh(M,s)&&c.push({id:M.id,rough:iA(M,s),reqTotal:M.roughScoreFields.reqTotal,skillPointTotal:M.roughScoreFields.skillPointTotal,utility:M.roughScoreFields.utility+M.numeric.spd*.8,level:M.level,atkTier:Ba(M),spStr:M.numeric.spStr,spDex:M.numeric.spDex,spInt:M.numeric.spInt,spDef:M.numeric.spDef,spAgi:M.numeric.spAgi,supportFocus:Xk(M,r)}));const d=[...c].sort((M,j)=>M.rough!==j.rough?j.rough-M.rough:M.id-j.id),g=[...c].sort((M,j)=>M.reqTotal!==j.reqTotal?M.reqTotal-j.reqTotal:M.level!==j.level?M.level-j.level:M.id-j.id),p=[...c].sort((M,j)=>M.skillPointTotal!==j.skillPointTotal?j.skillPointTotal-M.skillPointTotal:M.reqTotal!==j.reqTotal?M.reqTotal-j.reqTotal:M.id-j.id),y=[...c].sort((M,j)=>M.utility!==j.utility?j.utility-M.utility:M.reqTotal!==j.reqTotal?M.reqTotal-j.reqTotal:M.id-j.id),v=s.weaponAttackSpeeds.length>0?[...c].sort((M,j)=>{const D=Math.max(0,M.atkTier),K=Math.max(0,j.atkTier);return D!==K?K-D:M.atkTier!==j.atkTier?j.atkTier-M.atkTier:M.reqTotal!==j.reqTotal?M.reqTotal-j.reqTotal:M.skillPointTotal!==j.skillPointTotal?j.skillPointTotal-M.skillPointTotal:M.id-j.id}):[],b=r.length>0?[...c].sort((M,j)=>M.supportFocus!==j.supportFocus?j.supportFocus-M.supportFocus:M.reqTotal!==j.reqTotal?M.reqTotal-j.reqTotal:M.skillPointTotal!==j.skillPointTotal?j.skillPointTotal-M.skillPointTotal:M.id-j.id):[],S=r.map(M=>[...c].sort((j,D)=>{const K=M==="str"?j.spStr:M==="dex"?j.spDex:M==="int"?j.spInt:M==="def"?j.spDef:j.spAgi,re=M==="str"?D.spStr:M==="dex"?D.spDex:M==="int"?D.spInt:M==="def"?D.spDef:D.spAgi;return K!==re?re-K:j.reqTotal!==D.reqTotal?j.reqTotal-D.reqTotal:j.supportFocus!==D.supportFocus?D.supportFocus-j.supportFocus:j.id-D.id})),E=u.filter(M=>typeof M.min=="number").map(M=>[...c].sort((j,D)=>{const K=Ko(j,n,M.key),re=Ko(D,n,M.key);return K!==re?re-K:j.reqTotal!==D.reqTotal?j.reqTotal-D.reqTotal:j.skillPointTotal!==D.skillPointTotal?D.skillPointTotal-j.skillPointTotal:j.id-D.id})),T=u.filter(M=>typeof M.max=="number").map(M=>[...c].sort((j,D)=>{const K=Ko(j,n,M.key),re=Ko(D,n,M.key);return K!==re?K-re:j.reqTotal!==D.reqTotal?j.reqTotal-D.reqTotal:j.skillPointTotal!==D.skillPointTotal?D.skillPointTotal-j.skillPointTotal:j.id-D.id})),C=Math.max(10,s.topKPerSlot),k=Math.min(140,Math.max(40,Math.floor(C*.8))),R=Math.min(c.length,C+k+(r.length>0?Math.min(60,r.length*12):0)+Math.min(80,u.length*14)),z=new Map,B=Math.min(12,Math.floor(C*.4),d.length);for(let M=0;M<B;M++){const j=d[M];z.set(j.id,{id:j.id,rough:j.rough})}const U=[{list:d,remaining:Math.max(0,C-B),cursor:0},{list:g,remaining:Math.floor(k*.28),cursor:0},{list:p,remaining:Math.floor(k*.24),cursor:0},{list:y,remaining:Math.floor(k*.18),cursor:0}];v.length>0&&U.push({list:v,remaining:Math.max(18,Math.floor(k*.22)),cursor:0}),b.length>0&&U.push({list:b,remaining:Math.max(16,Math.floor(k*.2)),cursor:0});for(const M of S)U.push({list:M,remaining:10,cursor:0});for(const M of E)U.push({list:M,remaining:35,cursor:0});for(const M of T)U.push({list:M,remaining:20,cursor:0});for(;z.size<R;){let M=!1;for(const j of U)if(!(j.remaining<=0))for(;j.cursor<j.list.length;){const D=j.list[j.cursor++];if(!z.has(D.id)){z.set(D.id,{id:D.id,rough:D.rough}),j.remaining--,M=!0;break}}if(!M)break}if(z.size<R)for(const M of d){if(z.size>=R)break;z.has(M.id)||z.set(M.id,{id:M.id,rough:M.rough})}return[...z.values()]}function mA(e){const n={};for(const s of tt){const i=fa(s),r=new Set(e.binsByCategory[i]??[]),c=e.slots[s];c!=null&&r.add(c),n[s]=r}return n}function Zh(e,n,s){if(s.length===0)return!0;const i=new Set;for(const r of tt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);if(u)for(const d of u.majorIds)s.includes(d)&&i.add(d)}return s.every(r=>i.has(r))}function uS(e,n){const s=new Array(e.length+1).fill(0);for(let i=e.length-1;i>=0;i--){const r=e[i],c=n.get(r)??[];let u=0;for(const d of c)d.rough>u&&(u=d.rough);s[i]=s[i+1]+u}return s}function dS(e){const{poolSize:n,beamSize:s,remainingStages:i,processedStates:r,maxStates:c}=e;if(n<=0)return 0;const u=Math.max(0,c-r),d=Math.max(1,s*Math.max(1,i)),g=Math.floor(u/d),p=Math.max(8,Math.min(96,g));return Math.min(n,p)}function gA(e,n,s){let i=1;for(const r of e){const c=n.get(r)?.length??0;if(c===0)return 0;if(i*=c,i>s)return i}return i}function M0(e){const{beam:n,catalog:s,constraints:i,skillpointAssist:r,signal:c}=e,u=r??$c(i),d=[],g=new Set,p={majorIds:0,spInvalid:0,duplicate:0,hardConstraints:0,hardAttackSpeed:0,hardThresholds:0,hardItem:0,thresholdFailureExample:void 0};for(const y of n){if(c?.aborted)throw new DOMException("Auto build cancelled","AbortError");if(!Zh(y.slots,s,i.requiredMajorIds)){p.majorIds++;continue}const v=ur({slots:y.slots,level:i.level,characterClass:i.characterClass},s,{skillpointFeasibility:{extraBaseSkillPoints:u}});if(!v.derived.skillpointFeasible){p.spInvalid++;continue}const b=$h(y.slots,s,i,v);if(!b.ok){p.hardConstraints++,b.reason==="attackSpeed"?p.hardAttackSpeed++:b.reason==="thresholds"?(p.hardThresholds++,p.thresholdFailureExample===void 0&&b.failedChecks?.length&&(p.thresholdFailureExample=b.failedChecks[0])):p.hardItem++;continue}const S=Ki(y.slots);if(g.has(S)){p.duplicate++;continue}const{score:E,breakdown:T}=Lh(v,i.weights,i);g.add(S),d.push({slots:aa(y.slots),score:E,scoreBreakdown:T,summary:v})}return d.sort((y,v)=>{if(y.score!==v.score)return v.score-y.score;for(const b of tt){const S=y.slots[b]??0,E=v.slots[b]??0;if(S!==E)return S-E}return 0}),{candidates:d,rejectStats:p}}function pA(e){const{slotOrder:n,candidatePools:s,baseSlots:i,catalog:r,constraints:c,focusStats:u,attackSpeedCtx:d,atkTierRequirement:g,fixedAtkTierTotal:p,onProgress:y,signal:v}=e,b=$c(c),S=uS(n,s),E=d||g.hasConstraint?xc(n,s,r):null,T=oA(i,r,u),C=Array.from({length:n.length+1},()=>u.map(()=>0));for(let D=n.length-1;D>=0;D--){const K=s.get(n[D])??[],re=u.map(()=>0);for(const he of K){const se=r.itemsById.get(he.id);if(!se)continue;const Z=E0(se,u);for(let le=0;le<Z.length;le++)Z[le]>re[le]&&(re[le]=Z[le])}C[D]=nr(C[D+1],re)}const k=rh(c),R=k.map(D=>D.key),z=oh({slotOrder:n,candidatePools:s,catalog:r,keys:R}),B=_c(i,r,R);let U=[{slots:aa(i),orderIndex:0,roughScore:0,optimisticBound:S[0],feasibilityAssigned:0,focusSupport:u.map(()=>0),atkTierAssigned:0,customTotals:B}],M=0,j=!1;for(let D=0;D<n.length;D++){if(v?.aborted)throw new DOMException("Auto build cancelled","AbortError");const K=n[D],re=s.get(K)??[],he=[],se=dS({poolSize:re.length,beamSize:U.length,remainingStages:n.length-D,processedStates:M,maxStates:c.maxStates});se<=0&&(j=!0);for(const G of U){let ae=0;for(const A of re){if(ae>=se)break;if(M>=c.maxStates){j=!0;break}if(M++,ae++,Uc(A.id,G.slots,r))continue;const Y=aa(G.slots);Y[K]=A.id;const N=r.itemsById.get(A.id),P=(G.atkTierAssigned??0)+(N?Ba(N):0),ee=nr(G.focusSupport??u.map(()=>0),N?E0(N,u):u.map(()=>0)),oe=R.length>0?nr(G.customTotals??R.map(()=>0),R.map(ye=>N?N.numericIndex[ye]??0:0)):void 0;if(E&&!wc({constraints:c,attackSpeedCtx:d??null,atkTierRequirement:g,fixedAtkTierTotal:p,partialAssignedAtkTier:P,remainingMinAtkTier:E.minSuffix[D+1],remainingMaxAtkTier:E.maxSuffix[D+1]})||u.length>0&&!cA(ee,C[D+1],T))continue;if(k.length>0&&oe){let ye=!0;for(let be=0;be<k.length;be++){const ge=k[be],_e=oe[be];if(typeof ge.min=="number"&&_e+z.maxSuffix[D+1][be]<ge.min){ye=!1;break}if(typeof ge.max=="number"&&_e+z.minSuffix[D+1][be]>ge.max){ye=!1;break}}if(!ye)continue}const ue=Ic(Y,r,c.level,{extraBaseSkillPoints:b}),ce=G.roughScore+A.rough;he.push({slots:Y,orderIndex:D+1,roughScore:ce,optimisticBound:ce+S[D+1],feasibilityAssigned:ue.feasible?ue.assignedTotal:1/0,focusSupport:ee,atkTierAssigned:P,customTotals:oe})}if(j)break}if(he.length===0)return y?.({phase:"diagnostics",processedStates:M,beamSize:U.length,totalSlots:n.length,expandedSlots:D,reasonCode:"search_pruned",detail:j?`Feasibility-first search exhausted state budget before completing slot ${K}.`:`Feasibility-first search found no branches that can still satisfy high-skill requirements by slot ${K}.`}),{beam:[],processedStates:M,stateBudgetHit:j};const Z=E?E.minSuffix[D+1]:0,le=E?E.maxSuffix[D+1]:0,Q=[...he].sort((G,ae)=>{if(d){const N=hs(d,G.atkTierAssigned,Z,le),P=hs(d,ae.atkTierAssigned,Z,le);if(N!==P)return P-N}if(u.length>0){const N=T0(G.focusSupport??[],T),P=T0(ae.focusSupport??[],T);if(N!==P)return N-P}const A=G.feasibilityAssigned??1/0,Y=ae.feasibilityAssigned??1/0;return A!==Y?A-Y:G.optimisticBound!==ae.optimisticBound?ae.optimisticBound-G.optimisticBound:G.roughScore!==ae.roughScore?ae.roughScore-G.roughScore:0}),L=[...he].sort((G,ae)=>{const A=Sc(G.customTotals,k),Y=Sc(ae.customTotals,k);if(A!==Y)return A-Y;if(d){const N=hs(d,G.atkTierAssigned,Z,le),P=hs(d,ae.atkTierAssigned,Z,le);if(N!==P)return P-N}return ae.optimisticBound-G.optimisticBound});U=lS(Q,L,Math.max(40,c.beamWidth)),y?.({phase:"beam-search",processedStates:M,beamSize:U.length,totalSlots:n.length,expandedSlots:D+1,detail:`feasibility-first | branchCap=${se}${u.length>0?` | focus=${u.join("/")}`:""}${d?` | atkSpeed=${c.weaponAttackSpeeds.join("/")}`:""}`})}return{beam:U,processedStates:M,stateBudgetHit:j}}function vA(e){const{slotOrder:n,candidatePools:s,baseSlots:i,catalog:r,constraints:c,signal:u,onProgress:d}=e,g=$c(c),p=[],y=new Set;let v=0,b=0,S=0,E=0,T=0,C=0,k=0,R=0;const z=(B,U)=>{if(u?.aborted)throw new DOMException("Auto build cancelled","AbortError");if(v>c.maxStates)return;if(B>=n.length){if(!Zh(U,r,c.requiredMajorIds)){b++;return}const D=ur({slots:U,level:c.level,characterClass:c.characterClass},r,{skillpointFeasibility:{extraBaseSkillPoints:g}});if(!D.derived.skillpointFeasible){S++;return}const K=$h(U,r,c,D);if(!K.ok){T++,K.reason==="attackSpeed"?C++:K.reason==="thresholds"?k++:R++;return}const re=Ki(U);if(y.has(re)){E++;return}y.add(re);const{score:he,breakdown:se}=Lh(D,c.weights,c);p.push({slots:aa(U),score:he,scoreBreakdown:se,summary:D});return}const M=n[B],j=s.get(M)??[];for(const D of j){if(v++,v>c.maxStates)break;Uc(D.id,U,r)||(U[M]=D.id,v%2e3===0&&d?.({phase:"exact-search",processedStates:v,beamSize:0,totalSlots:n.length,expandedSlots:B+1}),z(B+1,U))}U[M]=null};return z(0,aa(i)),d?.({phase:"diagnostics",processedStates:v,beamSize:0,totalSlots:n.length,expandedSlots:n.length,detail:p.length>0?`Exact search produced ${p.length} valid builds. Rejected duplicates=${E}, SP-invalid=${S}, majorID=${b}, hard=${T} (speed=${C}, thresholds=${k}, item=${R}).`:`Exact search produced 0 valid builds. Rejected SP-invalid=${S}, majorID=${b}, duplicates=${E}, hard=${T} (speed=${C}, thresholds=${k}, item=${R}).`}),p.sort((B,U)=>{if(B.score!==U.score)return U.score-B.score;for(const M of tt){const j=B.slots[M]??0,D=U.slots[M]??0;if(j!==D)return j-D}return 0}),p.slice(0,Math.max(1,c.topN))}function yA(e){const{slotOrder:n,candidatePools:s,baseSlots:i,catalog:r,constraints:c,attackSpeedCtx:u,atkTierRequirement:d,fixedAtkTierTotal:g,customSpecs:p,customBounds:y,signal:v,timeCapMs:b=2e3}=e,S=$c(c),E=new Map;for(const D of n){const K=s.get(D)??[];E.set(D,[...K].sort((re,he)=>re.rough!==he.rough?he.rough-re.rough:re.id-he.id))}const T=u||d.hasConstraint?xc(n,s,r):null,C=p.map(D=>D.key),k=_c(i,r,C),R=Date.now();let z=!1,B=0;const U=new Set,M=[],j=(D,K,re,he)=>{if(z)return;if(v?.aborted)throw new DOMException("Auto build cancelled","AbortError");if(Date.now()-R>=b){z=!0;return}if(M.length>=Math.max(1,c.topN))return;if(D>=n.length){if(!Zh(K,r,c.requiredMajorIds))return;const le=ur({slots:K,level:c.level,characterClass:c.characterClass},r,{skillpointFeasibility:{extraBaseSkillPoints:S}});if(!le.derived.skillpointFeasible||!$h(K,r,c,le).ok)return;const L=Ki(K);if(U.has(L))return;U.add(L);const{score:G,breakdown:ae}=Lh(le,c.weights,c);M.push({slots:aa(K),score:G,scoreBreakdown:ae,summary:le});return}const se=n[D],Z=E.get(se)??[];for(const le of Z){if(z)break;if(B++,Uc(le.id,K,r))continue;const Q=aa(K);Q[se]=le.id;const L=r.itemsById.get(le.id),G=re+(L?Ba(L):0);if(T&&!wc({constraints:c,attackSpeedCtx:u,atkTierRequirement:d,fixedAtkTierTotal:g,partialAssignedAtkTier:G,remainingMinAtkTier:T.minSuffix[D+1],remainingMaxAtkTier:T.maxSuffix[D+1]}))continue;const ae=C.length>0?nr(he??C.map(()=>0),C.map(Y=>L?L.numericIndex[Y]??0:0)):void 0;if(p.length>0&&ae){let Y=!0;for(let N=0;N<p.length;N++){const P=p[N],ee=ae[N];if(typeof P.min=="number"&&ee+y.maxSuffix[D+1][N]<P.min){Y=!1;break}if(typeof P.max=="number"&&ee+y.minSuffix[D+1][N]>P.max){Y=!1;break}}if(!Y)continue}Ic(Q,r,c.level,{extraBaseSkillPoints:S}).feasible&&j(D+1,Q,G,ae)}};return j(0,aa(i),0,k),M.sort((D,K)=>D.score!==K.score?K.score-D.score:Ki(D.slots).localeCompare(Ki(K.slots))),{candidates:M.slice(0,Math.max(1,c.topN)),processedStates:B,timedOut:z}}function fS(e){const{catalog:n,baseWorkbench:s,constraints:i,onProgress:r,signal:c,alreadyThresholdRescue:u}=e;if(c?.aborted)throw new DOMException("Auto build cancelled","AbortError");let d=aa(s.slots);for(const A of tt)i.lockedSlots[A]||(d[A]=null);const g=lA(d,n,i);if(!g.ok)return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:0,expandedSlots:0,reasonCode:g.reasonCode??"must_include_conflict",detail:g.detail??"Must-include assignment failed before search started."}),[];d=g.slots;const p=rA(d,n),y=tt.filter(A=>d[A]==null),v=i.onlyPinnedItems?mA(s):null,b=new Map;for(const A of y)b.set(A,hA(A,n,i,v?.[A]??null,p));const S=Jk(d,n,i),E=cS(oS(i)),T=Uh(d,n),C=rh(i),k=C.some(A=>typeof A.min=="number"),R=[...y].sort((A,Y)=>{if(S?.preferredDirection){const ee=b.get(A)??[],oe=b.get(Y)??[],ue=ee.reduce((ye,be)=>{const ge=n.itemsById.get(be.id);if(!ge)return ye;const _e=Ba(ge),Be=S.preferredDirection>0?Math.max(0,_e):Math.max(0,-_e);return Math.max(ye,Be)},0),ce=oe.reduce((ye,be)=>{const ge=n.itemsById.get(be.id);if(!ge)return ye;const _e=Ba(ge),Be=S.preferredDirection>0?Math.max(0,_e):Math.max(0,-_e);return Math.max(ye,Be)},0);if(ue!==ce)return ce-ue}if(p.length>0){const ee=N0(A,b,n,p),oe=N0(Y,b,n,p);if(ee!==oe)return oe-ee}if(k){const ee=["ring1","ring2","bracelet","necklace"],oe=ee.includes(A),ue=ee.includes(Y);if(oe!==ue)return oe?-1:1}const N=b.get(A)?.length??0,P=b.get(Y)?.length??0;return N!==P?N-P:A.localeCompare(Y)}),z=uS(R,b);if(R.some(A=>(b.get(A)?.length??0)===0)){const A=R.find(Y=>(b.get(Y)?.length??0)===0);return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"empty_pool",detail:A?`No candidate items available for slot ${A} under current hard filters.`:"One or more slots have empty candidate pools."}),[]}if(E.hasConstraint&&E.minAllowed>E.maxAllowed)return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"unsat_attack_target",detail:`Attack target is unsatisfiable: atkTier min (${E.minAllowed}) exceeds atkTier max (${E.maxAllowed}).`}),[];if(C.length>0){const A=C.map(P=>P.key),Y=oh({slotOrder:R,candidatePools:b,catalog:n,keys:A}),N=_c(d,n,A);for(let P=0;P<C.length;P++){const ee=C[P],oe=N[P]+Y.minSuffix[0][P],ue=N[P]+Y.maxSuffix[0][P];if(typeof ee.min=="number"&&ue<ee.min)return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"unsat_threshold",detail:`Unsatisfiable threshold: ${ee.key} min ${ee.min} is above maximum reachable total ${ue}.`}),[];if(typeof ee.max=="number"&&oe>ee.max)return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"unsat_threshold",detail:`Unsatisfiable threshold: ${ee.key} max ${ee.max} is below minimum reachable total ${oe}.`}),[]}}const B=S||E.hasConstraint?xc(R,b,n):null;if(B&&!wc({constraints:i,attackSpeedCtx:S??null,atkTierRequirement:E,fixedAtkTierTotal:T,partialAssignedAtkTier:0,remainingMinAtkTier:B.minSuffix[0],remainingMaxAtkTier:B.maxSuffix[0]}))return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0,reasonCode:"unsat_attack_target",detail:"Attack-speed / atkTier target cannot be reached from current candidate pools."}),[];const U=gA(R,b,i.exhaustiveStateLimit+1);if(i.useExhaustiveSmallPool&&R.length>0&&U>0&&U<=i.exhaustiveStateLimit){r?.({phase:"exact-search",processedStates:0,beamSize:0,totalSlots:R.length,expandedSlots:0});const A={...i,maxStates:Math.max(i.maxStates,i.exhaustiveStateLimit)};return vA({slotOrder:R,candidatePools:b,baseSlots:d,catalog:n,constraints:A,signal:c,onProgress:r})}const M=rh(i),j=M.map(A=>A.key),D=oh({slotOrder:R,candidatePools:b,catalog:n,keys:j});let K=[{slots:d,orderIndex:0,roughScore:0,optimisticBound:z[0],atkTierAssigned:0,customTotals:_c(d,n,j)}];const re=S||E.hasConstraint?xc(R,b,n):null;let he=0,se=!1;for(let A=0;A<R.length;A++){if(c?.aborted)throw new DOMException("Auto build cancelled","AbortError");const Y=R[A],N=b.get(Y),P=[],ee=dS({poolSize:N.length,beamSize:K.length,remainingStages:R.length-A,processedStates:he,maxStates:i.maxStates});ee<=0&&(se=!0);for(const be of K){let ge=0;for(const _e of N){if(ge>=ee)break;if(he>=i.maxStates){se=!0;break}if(he++,ge++,Uc(_e.id,be.slots,n))continue;const Be=aa(be.slots);Be[Y]=_e.id;const it=be.roughScore+_e.rough,Rt=n.itemsById.get(_e.id),ct=(be.atkTierAssigned??0)+(Rt?Ba(Rt):0),Vt=j.length>0?nr(be.customTotals??j.map(()=>0),j.map(ht=>Rt?Rt.numericIndex[ht]??0:0)):void 0;if(!(re&&!wc({constraints:i,attackSpeedCtx:S??null,atkTierRequirement:E,fixedAtkTierTotal:T,partialAssignedAtkTier:ct,remainingMinAtkTier:re.minSuffix[A+1],remainingMaxAtkTier:re.maxSuffix[A+1]}))){if(M.length>0&&Vt){let ht=!0;for(let Jt=0;Jt<M.length;Jt++){const en=M[Jt],Zt=Vt[Jt];if(typeof en.min=="number"&&Zt+D.maxSuffix[A+1][Jt]<en.min){ht=!1;break}if(typeof en.max=="number"&&Zt+D.minSuffix[A+1][Jt]>en.max){ht=!1;break}}if(!ht)continue}P.push({slots:Be,orderIndex:A+1,roughScore:it,optimisticBound:it+z[A+1],atkTierAssigned:ct,customTotals:Vt})}}if(se)break}if(P.length===0)return r?.({phase:"diagnostics",processedStates:he,beamSize:K.length,totalSlots:R.length,expandedSlots:A,reasonCode:"search_pruned",detail:se?`Search state budget exhausted before completing slot ${Y}. Try enabling deep fallback/exact mode or reduce hard filters.`:`No expansions produced at slot ${Y}.`}),[];const oe=re?re.minSuffix[A+1]:0,ue=re?re.maxSuffix[A+1]:0,ce=[...P].sort((be,ge)=>{if(S){const _e=hs(S,be.atkTierAssigned,oe,ue),Be=hs(S,ge.atkTierAssigned,oe,ue);if(_e!==Be)return Be-_e}return be.optimisticBound!==ge.optimisticBound?ge.optimisticBound-be.optimisticBound:ge.roughScore-be.roughScore}),ye=[...P].sort((be,ge)=>{const _e=Sc(be.customTotals,M),Be=Sc(ge.customTotals,M);if(_e!==Be)return _e-Be;if(S){const it=hs(S,be.atkTierAssigned,oe,ue),Rt=hs(S,ge.atkTierAssigned,oe,ue);if(it!==Rt)return Rt-it}return ge.optimisticBound-be.optimisticBound});K=lS(ce,ye,Math.max(20,i.beamWidth)),r?.({phase:"beam-search",processedStates:he,beamSize:K.length,totalSlots:R.length,expandedSlots:A+1,detail:`branchCap=${ee}${S?.preferredDirection?` | atkSpeedTarget=${i.weaponAttackSpeeds.join("/")}`:""}`})}let Z=K,{candidates:le,rejectStats:Q}=M0({beam:K,catalog:n,constraints:i,signal:c});const L=Q.thresholdFailureExample?` Example failure: ${Q.thresholdFailureExample}.`:"",G=le.length>0?void 0:Q.spInvalid>0&&Q.hardConstraints===0?"sp_infeasible":Q.hardThresholds>0?"unsat_threshold":Q.hardAttackSpeed>0?"unsat_attack_target":void 0;r?.({phase:"diagnostics",processedStates:he,beamSize:K.length,totalSlots:R.length,expandedSlots:R.length,reasonCode:G,detail:le.length>0?`Final eval: ${le.length} valid builds. Rejected duplicates=${Q.duplicate}, SP-invalid=${Q.spInvalid}, majorID=${Q.majorIds}, hard=${Q.hardConstraints}.`:`Final eval found 0 valid builds. Rejected SP-invalid=${Q.spInvalid}, majorID=${Q.majorIds}, duplicates=${Q.duplicate}, hard=${Q.hardConstraints} (speed=${Q.hardAttackSpeed}, thresholds=${Q.hardThresholds}, item=${Q.hardItem}).${L}`});const ae=i.weaponAttackSpeeds.length>0||E.hasConstraint;if(le.length===0&&R.length>0&&(Q.spInvalid>0||ae&&Q.hardAttackSpeed>0||Q.hardThresholds>0)){const A=Q.hardThresholds>0;r?.({phase:"diagnostics",processedStates:he,beamSize:K.length,totalSlots:R.length,expandedSlots:R.length,detail:A&&i.target.customNumericRanges?.length?"Retrying with threshold-aware rescue (advanced ID constraints + support-aware feasibility search).":Q.hardAttackSpeed>0?"Retrying with feasibility-first beam search (support-aware rescue + attack target reachability).":"Retrying with feasibility-first beam search (support-aware rescue for high-skill requirements)."});const Y={...i,maxStates:Math.max(i.maxStates,A?Math.min(18e6,i.maxStates*5):ae?Math.min(16e6,i.maxStates*4):Math.min(8e6,i.maxStates*2)),beamWidth:Math.max(i.beamWidth,A?3600:ae?3200:1800)};A&&(Y.weights=lh(i.target,i.weights));const N=pA({slotOrder:R,candidatePools:b,baseSlots:d,catalog:n,constraints:Y,focusStats:p,attackSpeedCtx:S,atkTierRequirement:E,fixedAtkTierTotal:T,onProgress:r,signal:c});if(N.beam.length>0){Z=N.beam;const P=M0({beam:N.beam,catalog:n,constraints:i,signal:c});le=P.candidates,Q=P.rejectStats;const ee=Q.thresholdFailureExample?` Example failure: ${Q.thresholdFailureExample}.`:"";r?.({phase:"diagnostics",processedStates:N.processedStates,beamSize:N.beam.length,totalSlots:R.length,expandedSlots:R.length,detail:le.length>0?`Feasibility-first eval: ${le.length} valid builds. Rejected duplicates=${Q.duplicate}, SP-invalid=${Q.spInvalid}, majorID=${Q.majorIds}, hard=${Q.hardConstraints}.`:`Feasibility-first eval still found 0 valid builds. Rejected SP-invalid=${Q.spInvalid}, majorID=${Q.majorIds}, duplicates=${Q.duplicate}, hard=${Q.hardConstraints} (speed=${Q.hardAttackSpeed}, thresholds=${Q.hardThresholds}, item=${Q.hardItem}).${ee}`})}}if(le.length===0&&Q.hardThresholds>0&&!u){const A=i.target;if(typeof A.minLegacyBaseDps=="number"||typeof A.minLegacyEhp=="number"||typeof A.minDpsProxy=="number"||typeof A.minEhpProxy=="number"||typeof A.minMr=="number"||typeof A.minMs=="number"||typeof A.minSpeed=="number"||typeof A.minSkillPointTotal=="number"||typeof A.maxReqTotal=="number"||(A.customNumericRanges?.length??0)>0){r?.({phase:"diagnostics",processedStates:he,beamSize:Z.length,totalSlots:R.length,expandedSlots:R.length,detail:"Retrying with threshold-biased beam search (weights tuned to target min/max)."});const N={...i,weights:lh(i.target,i.weights),beamWidth:Math.max(i.beamWidth,3600),maxStates:Math.max(i.maxStates,Math.min(18e6,i.maxStates*5))},P=fS({catalog:n,baseWorkbench:s,constraints:N,onProgress:r,signal:c,alreadyThresholdRescue:!0});if(P.length>0)return r?.({phase:"diagnostics",processedStates:he,beamSize:P.length,totalSlots:R.length,expandedSlots:R.length,detail:`Threshold rescue: ${P.length} valid builds.`}),P.slice(0,Math.max(1,i.topN))}}if(le.length===0&&R.length>0){r?.({phase:"diagnostics",processedStates:he,beamSize:Z.length,totalSlots:R.length,expandedSlots:R.length,reasonCode:"search_pruned",detail:"Running deterministic fallback search (2s cap) before returning no candidates."});const A=yA({slotOrder:R,candidatePools:b,baseSlots:d,catalog:n,constraints:i,attackSpeedCtx:S??null,atkTierRequirement:E,fixedAtkTierTotal:T,customSpecs:M,customBounds:D,signal:c,timeCapMs:2e3});if(A.candidates.length>0)le=A.candidates,r?.({phase:"diagnostics",processedStates:he+A.processedStates,beamSize:A.candidates.length,totalSlots:R.length,expandedSlots:R.length,detail:`Deterministic fallback recovered ${A.candidates.length} valid build(s).`});else{const Y=A.timedOut?"fallback_timeout":Q.spInvalid>0&&Q.hardConstraints===0?"sp_infeasible":Q.hardThresholds>0?"unsat_threshold":Q.hardAttackSpeed>0?"unsat_attack_target":"search_pruned";r?.({phase:"diagnostics",processedStates:he+A.processedStates,beamSize:0,totalSlots:R.length,expandedSlots:R.length,reasonCode:Y,detail:A.timedOut?"Deterministic fallback timed out after 2 seconds with no valid candidates.":`Deterministic fallback found 0 valid builds. Rejected SP-invalid=${Q.spInvalid}, majorID=${Q.majorIds}, duplicates=${Q.duplicate}, hard=${Q.hardConstraints} (speed=${Q.hardAttackSpeed}, thresholds=${Q.hardThresholds}, item=${Q.hardItem}).${Q.thresholdFailureExample?` Example failure: ${Q.thresholdFailureExample}.`:""}`})}}return le.slice(0,Math.max(1,i.topN))}class bA{worker=null;requestId=0;currentReject=null;currentRequestId=null;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL(""+new URL("worker-runtime-C2sWj7bW.js",import.meta.url).href,import.meta.url),{type:"module"}))}async run(n,s,i,r={}){if(!this.worker)return fS({catalog:n,baseWorkbench:s,constraints:i,onProgress:r.onProgress,signal:r.signal});const c=++this.requestId;return this.currentRequestId=c,new Promise((u,d)=>{this.currentReject=d;const g=()=>{this.worker?.postMessage({type:"cancel",requestId:c}),d(new DOMException("Auto build cancelled","AbortError"))};r.signal?.addEventListener("abort",g,{once:!0});const p=y=>{const v=y.data;if(v.requestId===c){if(v.type==="progress"){r.onProgress?.(v.progress);return}if(this.worker?.removeEventListener("message",p),r.signal?.removeEventListener("abort",g),this.currentReject=null,this.currentRequestId=null,v.type==="error"){d(new Error(v.message));return}u(v.candidates)}};this.worker.addEventListener("message",p),this.worker.postMessage({type:"run",requestId:c,catalog:n,baseWorkbench:s,constraints:i})})}cancelCurrent(){this.currentRequestId!==null&&(this.worker?.postMessage({type:"cancel",requestId:this.currentRequestId}),this.currentReject?.(new DOMException("Auto build cancelled","AbortError")),this.currentReject=null,this.currentRequestId=null)}dispose(){this.worker?.terminate(),this.worker=null}}function j0(e,n){const s=e.split(",").map(c=>c.trim()).filter(Boolean),i=[],r=[];for(const c of s){const u=n.itemIdByName.get(c.toLowerCase());u==null?r.push(c):i.push(u)}return{ids:i,unknown:r}}function Bi(e,n){return e.split(",").map(s=>s.trim()).filter(Boolean).map(s=>n?n(s):s)}function Wo(e,n){return e.includes(n)?e.filter(s=>s!==n):[...e,n]}function xA(e){if(!e)return null;const n=/SP-invalid=(\d+)/i.exec(e),s=/majorID=(\d+)/i.exec(e),i=/duplicates?=(\d+)/i.exec(e),r=/hard=(\d+)/i.exec(e),c=/speed=(\d+)/i.exec(e),u=/thresholds=(\d+)/i.exec(e),d=/item=(\d+)/i.exec(e);return r?{spInvalid:n?Number(n[1]):0,majorIds:s?Number(s[1]):0,duplicate:i?Number(i[1]):0,hard:Number(r[1]),speed:c?Number(c[1]):0,thresholds:u?Number(u[1]):0,item:d?Number(d[1]):0}:null}const SA=["SUPER_SLOW","VERY_SLOW","SLOW","NORMAL","FAST","VERY_FAST","SUPER_FAST"],wA={constraints:"Advanced IDs only",spell:"Spell Damage",melee:"Melee",mobility:"Mobility",tank:"Tank / EHP"},_A=["constraints","spell","melee","mobility","tank"],C0={auto:"All",fast:"Fast",constraint:"Constraint-first",exhaustive:"Exhaustive-ish"},EA=["auto","fast","constraint","exhaustive"],TA={hp:"Health",hpBonus:"Health Bonus",hprRaw:"Raw Health Regen",hprPct:"Health Regen %",mr:"Mana Regen",ms:"Mana Steal",ls:"Life Steal",sdPct:"Spell Damage %",sdRaw:"Spell Damage Raw",mdPct:"Melee Damage %",mdRaw:"Melee Damage Raw",poison:"Poison",spd:"Walk Speed Bonus",atkTier:"Attack Speed Bonus",averageDps:"Average DPS",str:"Strength",dex:"Dexterity",int:"Intelligence",def:"Defense",agi:"Agility",strReq:"Strength Min",dexReq:"Dexterity Min",intReq:"Intelligence Min",defReq:"Defense Min",agiReq:"Agility Min",eDef:"Earth Defense",tDef:"Thunder Defense",wDef:"Water Defense",fDef:"Fire Defense",aDef:"Air Defense",eDamPct:"Earth Damage %",tDamPct:"Thunder Damage %",wDamPct:"Water Damage %",fDamPct:"Fire Damage %",aDamPct:"Air Damage %",damPct:"Damage %",rDamPct:"Elemental Damage %",nDamPct:"Neutral Damage %",slots:"Powder Slots",lvl:"Combat Level",reqTotal:"Req Total",skillPointTotal:"Skill Point Total",offenseScore:"Offense Score",ehpProxy:"EHP Proxy",utilityScore:"Utility Score",spPct1:"1st Spell Cost %",spRaw1:"1st Spell Cost Raw",spPct2:"2nd Spell Cost %",spRaw2:"2nd Spell Cost Raw",spPct3:"3rd Spell Cost %",spRaw3:"3rd Spell Cost Raw",spPct4:"4th Spell Cost %",spRaw4:"4th Spell Cost Raw",sumSpPct:"Sum Spell Cost %",sumSpRaw:"Sum Spell Cost Raw"};function Af(e){return TA[e]??e}const Li={legacyBaseDps:0,legacyEhp:0,dpsProxy:0,spellProxy:0,meleeProxy:0,ehpProxy:0,speed:0,sustain:0,skillPointTotal:0,reqTotalPenalty:0};function NA(e){switch(e){case"spell":return{...Li,spellProxy:2};case"melee":return{...Li,meleeProxy:2};case"mobility":return{...Li,speed:2};case"tank":return{...Li,legacyEhp:2};case"constraints":return{...Li,legacyBaseDps:.25,legacyEhp:.25,dpsProxy:.25,spellProxy:.25,meleeProxy:.25,ehpProxy:.25,speed:.25,sustain:.25,skillPointTotal:.25,reqTotalPenalty:.25};default:return{...Li,spellProxy:2}}}function MA(e){return NA(e)}function jA(e){const n=w.useRef(null);n.current||(n.current=new bA);const[s,i]=w.useState(""),[r,c]=w.useState(""),[u,d]=w.useState(""),[g,p]=w.useState(""),[y,v]=w.useState([]),[b,S]=w.useState("constraints"),[E,T]=w.useState(e.snapshot.characterClass),[C,k]=w.useState(e.snapshot.level),[R,z]=w.useState([]),[B,U]=w.useState([]),[M,j]=w.useState(ea.attackSpeedConstraintMode),[D,K]=w.useState(ea.skillpointFeasibilityMode),[re,he]=w.useState(null),[se,Z]=w.useState(!1),[le,Q]=w.useState(ea.beamWidth),[L,G]=w.useState(ea.topKPerSlot),[ae,A]=w.useState(ea.topN),[Y,N]=w.useState(["auto"]),[P,ee]=w.useState([]),[oe,ue]=w.useState(""),[ce,ye]=w.useState(!1),[be,ge]=w.useState(null),[_e,Be]=w.useState(!1),[it,Rt]=w.useState(!0),[ct,Vt]=w.useState(!0),[ht,Jt]=w.useState(ea.exhaustiveStateLimit),[en,Zt]=w.useState(null),[de,ze]=w.useState(null),[De,We]=w.useState(null),je=w.useRef(null),Ft=w.useRef(null),Nn=w.useRef(null),tn=y.some(X=>X.key&&X.min!=null&&X.max!=null),W=w.useRef(1),me=w.useMemo(()=>{const X={};for(const fe of tt)e.snapshot.locks[fe]&&(X[fe]=!0);return X},[e.snapshot.locks]),Ye=e.catalog?.facetsMeta.tiers??[],Ge=(e.catalog?.facetsMeta.majorIds??[]).slice(0,24),cn=w.useMemo(()=>Object.keys(e.catalog?.facetsMeta.numericRanges??{}).sort((fe,Ne)=>Af(fe).localeCompare(Af(Ne))),[e.catalog]);w.useEffect(()=>{e.open&&(T(e.snapshot.characterClass),k(e.snapshot.level))},[e.open,e.snapshot.characterClass,e.snapshot.level]);const un=()=>{v(X=>[...X,{id:W.current++,key:cn[0]??"",min:null,max:null}])},ut=(X,fe)=>{v(Ne=>Ne.map(Ae=>Ae.id===X?{...Ae,...fe}:Ae))},zt=X=>{v(fe=>fe.filter(Ne=>Ne.id!==X))},kt=async(X,fe,Ne,Ae)=>{const Xe=(()=>{const Le={label:"Fast pass",topKPerSlot:fe.topKPerSlot,beamWidth:fe.beamWidth,maxStates:fe.maxStates,rescueWeights:!1},Pe={label:"Deep pass",topKPerSlot:Math.max(fe.topKPerSlot,140),beamWidth:Math.max(fe.beamWidth,700),maxStates:Math.max(fe.maxStates,9e5),rescueWeights:!1},xt={label:"Bruteforce-ish pass",topKPerSlot:Math.max(fe.topKPerSlot,220),beamWidth:Math.max(fe.beamWidth,1200),maxStates:Math.max(fe.maxStates,4e6),rescueWeights:!1},mt={label:"Feasibility rescue",topKPerSlot:Math.max(fe.topKPerSlot,260),beamWidth:Math.max(fe.beamWidth,1400),maxStates:Math.max(fe.maxStates,45e5),rescueWeights:!0},we={label:"Constraint-first pass",topKPerSlot:Math.max(fe.topKPerSlot,180),beamWidth:Math.max(fe.beamWidth,1200),maxStates:Math.max(fe.maxStates,22e5),rescueWeights:!0},Mn={label:"Constraint rescue deep",topKPerSlot:Math.max(fe.topKPerSlot,280),beamWidth:Math.max(fe.beamWidth,2200),maxStates:Math.max(fe.maxStates,9e6),rescueWeights:!0,useExhaustiveSmallPool:!0,exhaustiveStateLimit:Math.max(fe.exhaustiveStateLimit,12e5)},dn={label:"Exhaustive-ish pass",topKPerSlot:Math.max(fe.topKPerSlot,300),beamWidth:Math.max(fe.beamWidth,2600),maxStates:Math.max(fe.maxStates,12e6),rescueWeights:!0,useExhaustiveSmallPool:!0,exhaustiveStateLimit:Math.max(fe.exhaustiveStateLimit,2e6)},Te=Qe=>{switch(Qe){case"fast":return[Le];case"constraint":return it?[we,Mn,dn]:[we];case"exhaustive":return it?[we,dn]:[dn];default:return[Le,...it?[Pe,xt,mt]:[]]}},fn=Y.length>0?Y:["auto"];return fn.length===1&&fn[0]==="auto"?Te("auto"):fn.flatMap(Qe=>Te(Qe))})();let Tt=[];for(let Le=0;Le<Xe.length;Le++){if(Ae.aborted)throw new DOMException("Auto build cancelled","AbortError");const Pe=Xe[Le],xt={...fe,topKPerSlot:Pe.topKPerSlot,beamWidth:Pe.beamWidth,maxStates:Pe.maxStates,useExhaustiveSmallPool:Pe.useExhaustiveSmallPool??fe.useExhaustiveSmallPool,exhaustiveStateLimit:Pe.exhaustiveStateLimit??fe.exhaustiveStateLimit,weights:Pe.rescueWeights?{...fe.weights,legacyBaseDps:fe.weights.legacyBaseDps*.6,dpsProxy:fe.weights.dpsProxy*.55,legacyEhp:Math.max(fe.weights.legacyEhp,1),ehpProxy:Math.max(fe.weights.ehpProxy,1),sustain:Math.max(fe.weights.sustain,.8),skillPointTotal:Math.max(fe.weights.skillPointTotal,.8),reqTotalPenalty:Math.max(fe.weights.reqTotalPenalty,1.8)}:fe.weights};ue(`${Pe.label} (${Le+1}/${Xe.length})  topK ${xt.topKPerSlot}, beam ${xt.beamWidth}, maxStates ${xt.maxStates}`);const mt=await n.current.run(X,Ne,xt,{signal:Ae,onProgress:we=>{We(we),we.phase==="diagnostics"&&we.reasonCode&&(Ft.current=we.reasonCode,ze(we.reasonCode)),we.phase==="diagnostics"&&we.detail&&(je.current=we.detail,Zt(we.detail)),ue(`${Pe.label} (${Le+1}/${Xe.length})  ${we.phase}: ${we.expandedSlots}/${we.totalSlots} slots, beam ${we.beamSize}, states ${we.processedStates}${we.detail?`  ${we.detail}`:""}`)}});if(mt.length>0)return mt;Tt=mt}if(Tt.length===0){const Le=fe.target;if(typeof Le.minDpsProxy=="number"||typeof Le.minEhpProxy=="number"||typeof Le.minSkillPointTotal=="number"||(Le.customNumericRanges?.length??0)>0){ue("Threshold rescue pass  topK 180, beam 3600, maxStates 2200000");const xt={...fe,weights:lh(fe.target,fe.weights),topKPerSlot:Math.max(fe.topKPerSlot,180),beamWidth:Math.max(fe.beamWidth,3600),maxStates:Math.max(fe.maxStates,22e5)},mt=await n.current.run(X,Ne,xt,{signal:Ae,onProgress:we=>{We(we),we.phase==="diagnostics"&&we.reasonCode&&(Ft.current=we.reasonCode,ze(we.reasonCode)),we.phase==="diagnostics"&&we.detail&&(je.current=we.detail,Zt(we.detail)),ue(`Threshold rescue pass  ${we.phase}: ${we.expandedSlots}/${we.totalSlots} slots, beam ${we.beamSize}, states ${we.processedStates}${we.detail?`  ${we.detail}`:""}`)}});if(mt.length>0)return mt}}return Tt},tl=async()=>{if(!e.catalog)return;ge(null),ee([]),Zt(null),ze(null),We(null),je.current=null,Ft.current=null;const X=j0(s,e.catalog),fe=j0(r,e.catalog),Ne=Bi(u,Te=>Te.toUpperCase()),Ae=Bi(g,Te=>Te.toUpperCase()),Xe=new Set(e.catalog.facetsMeta.majorIds.map(Te=>Te.toUpperCase())),Tt=Ne.filter(Te=>!Xe.has(Te)),Le=Ae.filter(Te=>!Xe.has(Te)),Pe=y.map(Te=>({key:Te.key.trim(),min:Te.min??void 0,max:Te.max??void 0})).filter(Te=>Te.key&&(typeof Te.min=="number"||typeof Te.max=="number")),xt=new Set(Object.keys(e.catalog.facetsMeta.numericRanges)),mt=Pe.map(Te=>Te.key).filter(Te=>!xt.has(Te)),we=Pe.filter(Te=>typeof Te.min=="number"&&typeof Te.max=="number"&&Te.min>Te.max);if(X.unknown.length>0||fe.unknown.length>0||Tt.length>0||Le.length>0||mt.length>0||we.length>0){ge([X.unknown.length?`Unknown must-include items: ${X.unknown.join(", ")}`:"",fe.unknown.length?`Unknown excluded items: ${fe.unknown.join(", ")}`:"",Tt.length?`Unknown required major IDs: ${Tt.join(", ")}`:"",Le.length?`Unknown excluded major IDs: ${Le.join(", ")}`:"",mt.length?`Unknown advanced ID keys: ${mt.join(", ")}`:"",we.length?`Invalid advanced ID ranges (min > max): ${we.map(Te=>Te.key).join(", ")}`:""].filter(Boolean).join(" | "));return}const Mn={...ea,characterClass:E,level:Math.max(1,Math.min(106,Math.round(C||e.snapshot.level||106))),mustIncludeIds:X.ids,excludedIds:fe.ids,lockedSlots:me,target:{customNumericRanges:Pe},allowedTiers:[...R],requiredMajorIds:Ne,excludedMajorIds:Ae,weaponAttackSpeeds:[...B],attackSpeedConstraintMode:M,skillpointFeasibilityMode:D,minPowderSlots:re,onlyPinnedItems:se,useExhaustiveSmallPool:ct,exhaustiveStateLimit:Math.max(1e3,Math.min(5e6,ht)),weights:MA(b),topN:Math.max(1,Math.min(150,ae)),topKPerSlot:Math.max(10,Math.min(300,L)),beamWidth:Math.max(20,Math.min(5e3,le))};Nn.current?.abort();const dn=new AbortController;Nn.current=dn,ye(!0),ue("Starting...");try{const Te=await kt(e.catalog,Mn,e.snapshot,dn.signal);if(ee(Te),Te.length===0){ue(""),We(null);const fn=je.current??"",Qe=Ft.current??de??"",Pt=/SP-invalid=(\d+)/i.exec(fn),nn=Pt?Number(Pt[1]):0,ma=/hard=.*?\(speed=(\d+)/i.exec(fn),Ks=ma?Number(ma[1]):0,br=/hard=.*?\(speed=\d+,\s*thresholds=(\d+)/i.exec(fn),xr=br?Number(br[1]):0,nl=Qe==="must_include_conflict"?"At least one must-include item cannot be placed under current locks/filters.":Qe==="unsat_attack_target"?"The configured attack target cannot be satisfied from the current candidate pool.":Qe==="unsat_threshold"?"One or more hard thresholds are mathematically unsatisfiable with the current pool.":Qe==="sp_infeasible"?"The explored builds failed skill-point/equip-order feasibility in the selected SP mode.":Qe==="fallback_timeout"?"Deterministic fallback timed out before finding a valid candidate.":Qe==="empty_pool"?"At least one slot has no eligible candidate items after filters.":Qe==="search_pruned"?"Search pruning/state limits exhausted viable branches before a valid candidate was found.":null,qa=Qe==="must_include_conflict"?"Tip: unlock conflicting slots, remove exclusions on required items, or relax class/level/tier filters.":Qe==="unsat_attack_target"?"Tip: switch attack logic to Either, lower atkTier minimum, or broaden candidate pools.":Qe==="unsat_threshold"?"Tip: lower strict min/max thresholds or reduce simultaneous hard constraints.":Qe==="sp_infeasible"?D==="no_tomes"?"Tip: try SP Feasibility Mode = Guild rainbow (+1 each), or add more low-requirement/support items.":"Tip: relax hard constraints or lower requirement-heavy must-includes.":Qe==="fallback_timeout"?"Tip: increase Top K / Beam Width, disable pinned-only, or reduce hard filters.":Qe==="empty_pool"?"Tip: disable pinned-only first, then relax tier/powder/class filters.":Qe==="search_pruned"?"Tip: use Constraint-first/Exhaustive-ish strategy and increase search budgets.":null;ge(["No valid candidates found.",je.current?`Diagnostics: ${je.current}`:"",nl||(nn>0?"The engine found many full builds, but they failed skill-point/equip-order feasibility. This is not just a UI filter issue.":Ks>0?"The engine found many full builds, but they failed the final attack-speed target. This usually means the search is missing enough +atkTier support for the selected weapon/target combination.":xr>0&&Pe.length>0?"The engine found many full builds, but they failed advanced ID min/max thresholds. This usually means the search is not preserving enough support items for those IDs.":"This usually means your hard constraints are too strict (pinned-only, major IDs, must-includes, attack-speed, or thresholds), or the selected objective conflicts with them."),qa||(nn>0?"Try switching Primary Goal to Balanced or Tank and keeping Exact Search + Deep Fallback enabled.":Ks>0?"Tip: keep Exact Search + Deep Fallback enabled, lower thresholds, and try adding/pinning known +Attack Speed Bonus support items for the target speed.":xr>0&&Pe.length>0?"Tip: switch Solver Strategy to Constraint-first or Exhaustive-ish and keep Deep Fallback enabled. For strict advanced IDs, add only the most important thresholds first.":"Tip: disable pinned-only first, remove major-ID constraints, then try again.")].join(" "))}else ue(`Completed. ${Te.length} valid candidates.`)}catch(Te){ge(Te instanceof Error?Te.message:"Auto builder failed"),ue("")}finally{ye(!1),We(null)}},Ys=()=>{Nn.current?.abort(),n.current?.cancelCurrent(),ye(!1),ue("Cancelled"),We(null)},Vs=be??en,ha=!!be,pt=xA(De?.detail),Et=pt?pt.spInvalid+pt.majorIds+pt.duplicate+pt.hard:0;return h.jsxs(Ph,{open:e.open,onOpenChange:e.onOpenChange,title:"Build Solver",description:"Beam search over item combinations. Uses Workbench summary metrics (legacy-style Base DPS / EHP, ability tree excluded).",className:"!w-[min(95vw,1360px)]",footer:h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsx("div",{className:"text-sm text-[var(--wb-muted)]",children:oe}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Ce,{variant:"ghost",onClick:()=>Be(X=>!X),children:_e?"Hide Tips":"Tips"}),ce?h.jsx(Ce,{variant:"ghost",onClick:Ys,children:"Cancel"}):null,h.jsx(Ce,{variant:"primary",onClick:tl,disabled:!e.catalog||ce,children:"Generate Candidates"})]})]}),children:[ce&&De?h.jsxs("div",{className:"mb-4 rounded-xl border border-sky-400/30 bg-sky-400/5 p-3",children:[h.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[h.jsx("span",{className:"rounded-md bg-sky-400/20 px-2 py-0.5 text-xs font-medium text-sky-100",children:De.phase==="exact-search"?"Exact search":De.phase==="beam-search"?"Beam search":De.phase==="diagnostics"?"Finalize / diagnostics":De.phase}),De.totalSlots>0?h.jsxs("span",{className:"text-xs text-[var(--wb-muted)]",children:["Slots ",De.expandedSlots,"/",De.totalSlots]}):null]}),h.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-black/20",children:h.jsx("div",{className:"h-full rounded-full bg-sky-400/70 transition-all duration-300",style:{width:De.totalSlots>0?`${100*De.expandedSlots/De.totalSlots}%`:"0%"}})}),h.jsxs("div",{className:"mt-2 flex flex-wrap gap-4 text-xs text-[var(--wb-muted)]",children:[h.jsxs("span",{children:["States: ",De.processedStates.toLocaleString()]}),h.jsxs("span",{children:["Beam: ",De.beamSize.toLocaleString()]})]}),pt&&Et>0?h.jsxs("div",{className:"mt-3 border-t border-sky-400/20 pt-2",children:[h.jsx("div",{className:"mb-1 text-[11px] font-medium uppercase tracking-wide text-[var(--wb-muted)]",children:"Rejected builds (this pass)"}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[pt.spInvalid>0?h.jsxs("span",{className:"rounded bg-rose-400/20 px-1.5 py-0.5 text-[11px] text-rose-200",title:"Skill point / equip feasibility",children:["SP: ",pt.spInvalid]}):null,pt.majorIds>0?h.jsxs("span",{className:"rounded bg-amber-400/20 px-1.5 py-0.5 text-[11px] text-amber-200",title:"Major ID requirement",children:["Major ID: ",pt.majorIds]}):null,pt.duplicate>0?h.jsxs("span",{className:"rounded bg-slate-400/20 px-1.5 py-0.5 text-[11px] text-slate-200",title:"Duplicate build",children:["Dup: ",pt.duplicate]}):null,pt.speed>0?h.jsxs("span",{className:"rounded bg-orange-400/20 px-1.5 py-0.5 text-[11px] text-orange-200",title:"Attack speed",children:["Speed: ",pt.speed]}):null,pt.thresholds>0?h.jsxs("span",{className:"rounded bg-amber-400/20 px-1.5 py-0.5 text-[11px] text-amber-200",title:"Min/max thresholds",children:["Thresholds: ",pt.thresholds]}):null,pt.item>0?h.jsxs("span",{className:"rounded bg-slate-400/20 px-1.5 py-0.5 text-[11px] text-slate-200",title:"Item constraint",children:["Item: ",pt.item]}):null]})]}):null]}):null,h.jsxs("div",{className:"grid h-[52vh] min-h-0 gap-4 overflow-hidden lg:h-[56vh] lg:grid-cols-[1fr_1fr] lg:items-stretch",children:[h.jsxs("div",{className:"grid h-full min-h-0 min-w-0 gap-3 overflow-auto pr-1 wb-scrollbar",children:[_e?h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Tips (New Players)"}),h.jsxs("div",{className:"grid gap-2 text-xs text-[var(--wb-muted)]",children:[h.jsxs("div",{children:["1. Start with a Primary Goal like ",h.jsx("b",{children:"Damage"})," or ",h.jsx("b",{children:"Tank / EHP"}),". Leave most constraints empty."]}),h.jsx("div",{children:"2. Add only a few hard constraints first: class/level, maybe one must-include item."}),h.jsxs("div",{children:["3. If you get 0 candidates, turn off ",h.jsx("b",{children:"Only use pinned items in bins"})," and clear major-ID constraints."]}),h.jsx("div",{children:"4. Build Solver filters out builds that fail skill requirements / equip order feasibility."}),h.jsx("div",{children:"5. Use Workbench bins to guide it: pin good options, then rerun with pinned-only once you have enough items in each slot category."})]})]}):null,h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Optimization"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{children:[h.jsx(Ie,{children:"Primary Goal"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:_A.map(X=>h.jsx(et,{active:b===X,onClick:()=>S(X),children:wA[X]},X))})]}),h.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2 text-xs text-[var(--wb-muted)]",children:"Build Solver always filters out builds that fail skill point/equip-order feasibility. You do not need to set a minimum SP total."})]})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Hard Constraints (Optional)"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{children:[h.jsx(Ie,{children:"Character Class"}),h.jsxs("select",{className:"wb-select",value:E??"",onChange:X=>T(X.target.value||null),children:[h.jsx("option",{value:"",children:"Auto / Any"}),h.jsx("option",{value:"Warrior",children:"Warrior"}),h.jsx("option",{value:"Assassin",children:"Assassin"}),h.jsx("option",{value:"Mage",children:"Mage"}),h.jsx("option",{value:"Archer",children:"Archer"}),h.jsx("option",{value:"Shaman",children:"Shaman"})]})]}),h.jsx(za,{label:"Level",value:C,onChange:X=>k(X??e.snapshot.level),min:1,max:106}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Must-Include Items (comma-separated names)"}),h.jsx("textarea",{className:"wb-textarea min-h-20",value:s,onChange:X=>i(X.target.value),placeholder:"Example: Cancer, Stardew"})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Excluded Items (comma-separated names)"}),h.jsx("textarea",{className:"wb-textarea min-h-20",value:r,onChange:X=>c(X.target.value),placeholder:"Blacklist item names"})]}),h.jsxs("details",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[h.jsx("summary",{className:"cursor-pointer text-sm font-medium",children:"Advanced: Specific ID Min / Max"}),h.jsxs("div",{className:"mt-3 grid gap-3",children:[h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Set build-wide min/max totals for any numeric ID (e.g. `mr`, `ms`, `spd`, `reqTotal`, `sdPct`, `poison`, `atkTier`). These are hard constraints."}),y.length===0?h.jsx("div",{className:"rounded-lg border border-dashed border-[var(--wb-border-muted)] px-3 py-2 text-xs text-[var(--wb-muted)]",children:"No advanced ID thresholds yet."}):null,y.map(X=>{const fe=e.catalog?.facetsMeta.numericRanges[X.key];return h.jsxs("div",{className:"rounded-lg border border-[var(--wb-border-muted)] p-2",children:[h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs("div",{children:[h.jsx(Ie,{children:"ID"}),h.jsx("select",{className:"wb-select w-full",value:X.key,onChange:Ne=>ut(X.id,{key:Ne.target.value}),children:cn.map(Ne=>h.jsxs("option",{value:Ne,children:[Af(Ne)," (",Ne,")"]},Ne))})]}),h.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[h.jsxs("div",{className:"min-w-[80px] flex-1",children:[h.jsx(Ie,{children:"Min"}),h.jsx("input",{className:"wb-input w-full",type:"number",value:X.min??"",onChange:Ne=>{const Ae=Ne.target.value.trim();ut(X.id,{min:Ae===""?null:Number(Ae)})}})]}),h.jsxs("div",{className:"min-w-[80px] flex-1",children:[h.jsx(Ie,{children:"Max"}),h.jsx("input",{className:"wb-input w-full",type:"number",value:X.max??"",onChange:Ne=>{const Ae=Ne.target.value.trim();ut(X.id,{max:Ae===""?null:Number(Ae)})}})]}),h.jsx(Ce,{variant:"ghost",className:"shrink-0",onClick:()=>zt(X.id),children:"Remove"})]})]}),fe?h.jsxs("div",{className:"mt-1 text-[11px] text-[var(--wb-muted)]",children:["Catalog item range: ",fe.min," to ",fe.max," (per item)"]}):null]},X.id)}),h.jsx("div",{children:h.jsx(Ce,{variant:"ghost",onClick:un,disabled:cn.length===0,children:"Add ID Threshold"})}),b==="constraints"&&!tn?h.jsx("div",{className:"mt-1 rounded-lg border border-amber-400/40 bg-amber-400/10 p-2 text-[11px] text-amber-50",children:"Advanced IDs preset is selected as Primary Goal, but no ID has both Min and Max set. Add at least one ID with a Min and Max, or switch primary goal. You can still run the solver without this."}):null]})]})]})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Solver Strategy"}),h.jsx("div",{className:"grid gap-3",children:h.jsxs("div",{children:[h.jsx(Ie,{children:"Strategies (select one or more; All is exclusive)"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:EA.map(X=>{const fe=X==="auto",Ne=Y.length===1&&Y[0]==="auto",Ae=fe?Ne:Y.includes(X),Xe=fe&&!Ne;return h.jsx(et,{active:Ae,disabled:Xe,onClick:()=>{if(Xe)return;if(fe){N(["auto"]);return}if(Ne){N([X]);return}const Le=Y.includes(X)?Y.filter(xt=>xt!==X):[...Y,X],Pe=Le.length===3&&Le.includes("fast")&&Le.includes("constraint")&&Le.includes("exhaustive");N(Le.length>0?Pe?["auto"]:Le:["auto"])},children:C0[X]},X)})}),h.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:Y.length===1&&Y[0]==="auto"?"Starts fast, then retries deeper if needed.":Y.includes("fast")&&!Y.includes("constraint")&&!Y.includes("exhaustive")?"Single fast pass. Lowest wait time, weakest fallback.":Y.includes("constraint")?"Constraint-first helps strict attack-speed or advanced ID min/max.":Y.includes("exhaustive")?"Exhaustive-ish: highest search budget, strongest fallback.":"Selected strategies run in order (fast  constraint  exhaustive)."})]})})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Pool Filters"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsx(za,{label:"Min Powder Slots",value:re,onChange:he,min:0,max:6}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Allowed Tiers (optional)"}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ye.map(X=>h.jsx(et,{active:R.includes(X),onClick:()=>z(fe=>Wo(fe,X)),children:X},X)),Ye.length===0?h.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:"Catalog not loaded."}):null]})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Final Weapon Attack Speed (optional hard constraint)"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:SA.map(X=>h.jsx(et,{active:B.includes(X),onClick:()=>U(fe=>Wo(fe,X)),children:X},X))}),h.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:"Matches the completed build attack speed (weapon base speed plus total Attack Speed Bonus / `atkTier`)."})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Attack Target Logic"}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsx(et,{active:M==="or",onClick:()=>j("or"),children:"Either"}),h.jsx(et,{active:M==="and",onClick:()=>j("and"),children:"Both"})]}),h.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:"Applies when both final attack speed and advanced `atkTier` thresholds are set."})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"SP Feasibility Mode"}),h.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.jsx(et,{active:D==="no_tomes",onClick:()=>K("no_tomes"),children:"No tomes"}),h.jsx(et,{active:D==="guild_rainbow",onClick:()=>K("guild_rainbow"),children:"Guild rainbow (+1 each)"})]}),h.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:"Guild rainbow mode simulates legacy-compatible +1 STR/DEX/INT/DEF/AGI (total +5)."})]}),h.jsx(et,{active:se,onClick:()=>Z(X=>!X),children:"Only use pinned items in bins"}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Required Major IDs (build must include all)"}),h.jsx("textarea",{className:"wb-textarea min-h-16",value:u,onChange:X=>d(X.target.value),placeholder:"Example: HAWKEYE, GREED"})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Excluded Major IDs (avoid any item with these)"}),h.jsx("textarea",{className:"wb-textarea min-h-16",value:g,onChange:X=>p(X.target.value),placeholder:"Example: NAPALM"})]}),Ge.length>0?h.jsxs("div",{children:[h.jsx(Ie,{children:"Major ID Quick Picks"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:Ge.map(X=>{const fe=Bi(u,Ae=>Ae.toUpperCase()),Ne=Bi(g,Ae=>Ae.toUpperCase());return h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsxs(et,{active:fe.includes(X.toUpperCase()),onClick:()=>{d(Ae=>Wo(Bi(Ae,Xe=>Xe.toUpperCase()),X.toUpperCase()).join(", "))},title:`Require ${X}`,children:["+",X]}),h.jsxs(et,{active:Ne.includes(X.toUpperCase()),onClick:()=>{p(Ae=>Wo(Bi(Ae,Xe=>Xe.toUpperCase()),X.toUpperCase()).join(", "))},title:`Exclude ${X}`,children:["-",X]})]},X)})})]}):null]})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Search Heuristics"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsx(et,{active:it,onClick:()=>Rt(X=>!X),children:"Deep fallback if 0 results"}),h.jsx(et,{active:ct,onClick:()=>Vt(X=>!X),children:"Exact search for small pools"}),h.jsx(za,{label:"Exact Search Combination Limit",value:ht,onChange:X=>Jt(X??ea.exhaustiveStateLimit),min:1e3,max:5e6}),h.jsx(za,{label:"Beam Width",value:le,onChange:X=>Q(X??ea.beamWidth),min:20,max:5e3}),h.jsx(za,{label:"Top K per Slot",value:L,onChange:X=>G(X??ea.topKPerSlot),min:10,max:300}),h.jsx(za,{label:"Top N Results",value:ae,onChange:X=>A(X??ea.topN),min:1,max:150}),h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2 text-xs text-[var(--wb-muted)]",children:["Locked slots from the Workbench will be preserved. Current locks: ",Object.values(me).filter(Boolean).length,se?" | Candidate pools restricted to pinned bins.":"",Y.length>0&&!(Y.length===1&&Y[0]==="auto")?` | Strategy: ${Y.map(X=>C0[X]).join("  ")}.`:"",` | Attack logic: ${M==="or"?"Either":"Both"}.`,` | SP mode: ${D==="guild_rainbow"?"Guild rainbow (+1 each)":"No tomes"}.`,it?" | Auto retries with deeper search if fast pass finds 0 candidates.":"",ct?` | Exact enumeration is used automatically when pool combinations are <= ${Math.round(ht).toLocaleString()}.`:""]})]})]})]}),h.jsx("div",{className:"h-full min-h-0 min-w-0",children:h.jsxs("div",{className:"wb-card flex h-full min-h-0 flex-col overflow-hidden p-3",children:[h.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[h.jsx("div",{className:"text-sm font-semibold",children:"Candidates"}),h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[P.length," shown"]})]}),h.jsx("div",{className:"min-h-0 flex-1 space-y-2 overflow-auto pr-1 wb-scrollbar",children:P.length===0?h.jsx("div",{className:"rounded-xl border border-dashed border-[var(--wb-border)] p-4 text-sm text-[var(--wb-muted)]",children:"Run Build Solver to generate candidate builds."}):P.map((X,fe)=>h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3",children:[h.jsxs("div",{className:"flex items-start justify-between gap-3",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"text-sm font-semibold",children:["#",fe+1," | Score ",Math.round(X.score).toLocaleString()]}),h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Base DPS ",Math.round(X.summary.derived.legacyBaseDps)," | EHP ",Math.round(X.summary.derived.legacyEhp)," | Req ",X.summary.derived.reqTotal," | MR ",X.summary.aggregated.mr]}),h.jsxs("div",{className:"mt-1 text-xs text-emerald-200",children:["SP Valid | Assigned SP ",Math.round(X.summary.derived.assignedSkillPointsRequired)]})]}),h.jsx(Ce,{className:"px-2 py-1 text-xs",onClick:()=>e.onLoadCandidate(X),children:"Load into Workbench"})]}),h.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1 text-xs sm:grid-cols-2 xl:grid-cols-3",children:tt.map(Ne=>h.jsxs("div",{className:"min-w-0 rounded-md border border-[var(--wb-border-muted)] bg-black/10 px-2 py-1",children:[h.jsx("div",{className:"text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:Ne}),h.jsx("div",{className:"truncate",children:X.slots[Ne]!=null?e.catalog?.itemsById.get(X.slots[Ne])?.displayName??X.slots[Ne]:"Empty"})]},Ne))})]},`${X.score}-${fe}`))}),Vs?h.jsxs("details",{className:`mt-2 rounded-xl border p-2 ${ha?"border-rose-400/30 bg-rose-400/8 text-rose-100":"border-sky-400/20 bg-sky-400/5 text-sky-100"}`,children:[h.jsx("summary",{className:"cursor-pointer list-none text-xs font-medium",children:ha?"Run issue (click to expand)":"Diagnostics (click to expand)"}),h.jsx("div",{className:"mt-2 text-xs leading-relaxed",children:Vs})]}):null]})})]})]})}const CA=["Warrior","Assassin","Mage","Archer","Shaman"],Of=[0,1,2,2,3,3,4,4,5,5,6,6,7,8,8,9,9,10,11,11,12,12,13,14,14,15,16,16,17,17,18,18,19,19,20,20,20,21,21,22,22,23,23,23,24,24,25,25,26,26,27,27,28,28,29,29,30,30,31,31,32,32,33,33,34,34,34,35,35,35,36,36,36,37,37,37,38,38,38,38,39,39,39,39,40,40,40,40,41,41,41,41,42,42,42,42,43,43,43,43,44,44,44,44,45,45,45];function Us(e,n=0){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const s=Number(e);if(Number.isFinite(s))return s}return n}function Vl(e){return typeof e=="string"?e:""}function zf(e){return Array.isArray(e)?e.map(n=>Us(n,Number.NaN)).filter(n=>Number.isFinite(n)).map(n=>Math.trunc(n)):[]}function DA(e){const n=Us(e.id,Number.NaN);if(!Number.isFinite(n))return null;const s=Us(e.display?.row,0),i=Us(e.display?.col,0);return{id:Math.trunc(n),displayName:Vl(e.display_name)||`Ability ${n}`,descriptionHtml:Vl(e.desc),parents:zf(e.parents),dependencies:zf(e.dependencies),blockers:zf(e.blockers),cost:Math.max(0,Math.trunc(Us(e.cost,1))),archetype:Vl(e.archetype).trim()||null,archetypeReq:Math.max(0,Math.trunc(Us(e.archetype_req,0))),reqArchetype:Vl(e.req_archetype).trim()||null,baseAbilityId:e.base_abil==null?null:Math.trunc(Us(e.base_abil,Number.NaN)),display:{row:Math.max(0,Math.trunc(s)),col:Math.max(0,Math.trunc(i)),icon:Vl(e.display?.icon)||"node_0"},properties:typeof e.properties=="object"&&e.properties?e.properties:{},effects:Array.isArray(e.effects)?e.effects.filter(r=>!!r&&typeof r=="object"):[]}}function RA(e,n){const s=n.map(DA).filter(u=>u!==null).sort((u,d)=>{const g=u.display.row-d.display.row;if(g!==0)return g;const p=u.display.col-d.display.col;return p!==0?p:u.id-d.id}),i=new Map;let r=0,c=0;for(const u of s)i.set(u.id,u),r=Math.max(r,u.display.row),c=Math.max(c,u.display.col);return{className:e,nodes:s,nodeById:i,maxRow:r,maxCol:c}}function kA(e,n){const s={};for(const i of CA){const r=Array.isArray(e[i])?e[i]:[];s[i]=RA(i,r)}return{version:n,classes:s}}function AA(e){if(!Number.isFinite(e))return 45;const n=Math.trunc(e);return n>=Of.length?45:n<1?Of[1]:Of[n]??45}function Pf(e,n,s,i,r){if(e.parents.length===0)return e.cost>r?{ok:!1,hardBlocked:!1,reason:"not enough ability points left"}:{ok:!0,hardBlocked:!1,reason:""};const c=e.dependencies.filter(g=>!s.has(g));if(c.length>0)return{ok:!1,hardBlocked:!0,reason:`missing dep: ${c.map(p=>`"${n.nodeById.get(p)?.displayName??p}"`).join(", ")}`};const u=e.blockers.filter(g=>s.has(g));if(u.length>0)return{ok:!1,hardBlocked:!0,reason:`blocked by: ${u.map(p=>`"${n.nodeById.get(p)?.displayName??p}"`).join(", ")}`};if(!e.parents.some(g=>s.has(g)))return{ok:!1,hardBlocked:!1,reason:"not reachable"};if(e.archetypeReq>0){const g=e.reqArchetype||e.archetype,p=g?i.get(g)??0:0;if(!g||p<e.archetypeReq)return{ok:!1,hardBlocked:!1,reason:`${g??"Archetype"}: ${p} < ${e.archetypeReq}`}}return e.cost>r?{ok:!1,hardBlocked:!1,reason:"not enough ability points left"}:{ok:!0,hardBlocked:!1,reason:""}}function OA(e,n,s){const i=new Set(n.filter(C=>e.nodeById.has(C)));let r=new Set(i),c=e.nodes.filter(C=>r.has(C.id));const u=new Set,d=new Map;let g=0;const p=new Map;for(;;){let C=!1;const k=[];for(const R of c){const z=Pf(R,e,u,d,9999);if(!z.ok){k.push(R),p.set(R.id,{reason:z.reason,hardBlocked:z.hardBlocked});continue}p.delete(R.id),u.add(R.id),r.delete(R.id),g+=R.cost,R.archetype&&d.set(R.archetype,(d.get(R.archetype)??0)+1),C=!0}if(c=k,!C)break}const y=AA(s),v=y-g,b=[];for(const C of e.nodes){if(u.has(C.id))continue;Pf(C,e,u,d,v).ok&&b.push(C.id)}const S={};for(const C of e.nodes){if(u.has(C.id)){S[C.id]={active:!0,selectable:!0,hardBlocked:!1,reason:null};continue}const k=p.get(C.id);if(k){S[C.id]={active:!1,selectable:!1,hardBlocked:k.hardBlocked,reason:k.reason};continue}const R=Pf(C,e,u,d,v);S[C.id]={active:!1,selectable:R.ok,hardBlocked:R.hardBlocked,reason:R.ok?null:R.reason}}const E=[];let T=!1;g>y&&E.push(`too many ability points assigned! (${g} > ${y})`);for(const C of c){const k=p.get(C.id);k&&(k.hardBlocked&&(T=!0),E.push(`${C.displayName}: ${k.reason}`))}return{apCap:y,apUsed:g,apRemaining:v,reachable:u,pending:c,unresolved:p,availableIds:b,errors:E,hardErrors:T,archetypeCounts:d,nodeStatusById:S}}function Zc(e,n,s){const i=OA(e,n,s),r=e.nodes.filter(d=>i.reachable.has(d.id)).map(d=>d.id),c=i.pending.map(d=>d.id),u=Object.fromEntries([...i.archetypeCounts.entries()].sort((d,g)=>d[0].localeCompare(g[0])));return{className:e.className,level:s,apCap:i.apCap,apUsed:i.apUsed,apRemaining:i.apRemaining,selectedIdsInput:[...n],activeIds:r,unresolvedIds:c,availableIds:i.availableIds,hardErrors:i.hardErrors,errors:i.errors,archetypeCounts:u,nodeStatusById:i.nodeStatusById}}function zA(e,n,s){let i=[...new Set(n)].filter(r=>e.nodeById.has(r));for(;;){const r=Zc(e,i,s);if(r.unresolvedIds.length===0&&r.apUsed<=r.apCap)return r.activeIds;const c=new Set(r.activeIds),u=i.filter(d=>c.has(d));if(u.length===i.length)return u;i=u}}function PA(e,n,s,i){if(!e.nodeById.has(s))return[...n];const r=new Set(n);return r.has(s)?(r.delete(s),zA(e,[...r],i)):Zc(e,n,i).nodeStatusById[s]?.selectable?(r.add(s),e.nodes.filter(d=>r.has(d.id)).map(d=>d.id)):[...n]}function hS(e,n){return!e||!n?null:e.classes[n]??null}function IA(e){return e.length>20?`${e.slice(0,19)}`:e}function BA(e,n){return e??n??null}function LA(e){const n=BA(e.selectedClass,e.inferredClass),s=w.useMemo(()=>hS(e.dataset,n),[e.dataset,n]),i=w.useMemo(()=>n?e.selectionsByClass[n]??[]:[],[e.selectionsByClass,n]),r=w.useMemo(()=>s?Zc(s,i,e.level):null,[s,i,e.level]),[c,u]=w.useState(null);w.useEffect(()=>{if(!s){u(null);return}c!=null&&s.nodeById.has(c)||u(r?.activeIds[0]??s.nodes[0]?.id??null)},[s,c,r]);const d=w.useMemo(()=>!s||c==null?null:s.nodeById.get(c)??null,[s,c]),g=S=>{n&&e.onSelectionsChange({...e.selectionsByClass,[n]:S})},p=S=>{if(!s||!n)return;const E=PA(s,i,S,e.level);g(E),u(S)},y=()=>{n&&e.onSelectionsChange({...e.selectionsByClass,[n]:[]})},v=r?.activeIds.length??0,b=s?{gridTemplateColumns:`repeat(${Math.max(1,s.maxCol+1)}, minmax(56px, 1fr))`,gridTemplateRows:`repeat(${Math.max(1,s.maxRow+1)}, minmax(56px, auto))`}:void 0;return h.jsx(Ph,{open:e.open,onOpenChange:e.onOpenChange,title:"Ability Tree",description:"Legacy ability tree data and activation rules integrated into Workbench. Effects are tracked here, but Workbench DPS/EHP still excludes ability-tree math for now.",className:"w-[min(97vw,1320px)]",footer:h.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:n?`Editing ${n} tree at level ${e.level}.`:"Select a class (or equip a class weapon) to start editing an ability tree."}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx(Ce,{variant:"ghost",onClick:y,disabled:!n||v===0,children:"Reset Tree"}),h.jsx(Ce,{onClick:()=>e.onOpenChange(!1),children:"Done"})]})]}),children:e.loading?h.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-4 text-sm text-[var(--wb-muted)]",children:"Loading ability tree data..."}):e.error?h.jsx("div",{className:"rounded-xl border border-rose-400/30 bg-rose-400/8 p-4 text-sm text-rose-100",children:e.error}):n?!s||!r?h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-4 text-sm text-[var(--wb-muted)]",children:["No ability tree data available for ",n,"."]}):h.jsxs("div",{className:"grid min-h-0 grid-cols-1 gap-3 xl:grid-cols-[minmax(0,1fr)_360px]",children:[h.jsxs("div",{className:"min-h-0 space-y-3",children:[h.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-4",children:[h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"AP"}),h.jsxs("div",{className:"mt-1 text-lg font-semibold",children:[r.apUsed," / ",r.apCap]}),h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[r.apRemaining," left"]})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Selected"}),h.jsx("div",{className:"mt-1 text-lg font-semibold",children:r.activeIds.length}),h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[r.availableIds.length," available next"]})]}),h.jsxs("div",{className:"wb-card p-3 sm:col-span-2",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2 text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:[h.jsx(tT,{size:12}),"Archetypes"]}),h.jsx("div",{className:"flex flex-wrap gap-1",children:Object.keys(r.archetypeCounts).length===0?h.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:"No archetype points yet."}):Object.entries(r.archetypeCounts).map(([S,E])=>h.jsxs("span",{className:"wb-chip",children:[S,": ",E]},S))})]})]}),r.errors.length>0?h.jsxs("div",{className:"rounded-xl border border-amber-400/25 bg-amber-400/8 p-3",children:[h.jsxs("div",{className:"mb-2 flex items-center gap-2 text-xs font-semibold text-amber-100",children:[h.jsx(iT,{size:14}),"Tree Validation (",r.hardErrors?"hard":"soft"," issues)"]}),h.jsx(Vi,{className:"max-h-28",children:h.jsx("div",{className:"grid gap-1",children:r.errors.map((S,E)=>h.jsx("div",{className:"text-xs text-amber-100/95",children:S},`${S}-${E}`))})})]}):null,h.jsx(Yi,{title:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(db,{size:14}),n," Tree"]}),headerRight:h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:e.selectedClass?"Using selected class":e.inferredClass?"Using weapon-inferred class":""}),className:"min-h-0",children:h.jsx(Vi,{className:"max-h-[52vh] p-3",children:h.jsx("div",{className:"atree-grid-container rounded-xl border border-[var(--wb-border-muted)] p-2",children:h.jsx("div",{className:"grid gap-2",style:b,children:s.nodes.map(S=>{const E=r.nodeStatusById[S.id],T=!!E?.active,C=!!E?.selectable,k=!!E?.hardBlocked,R=T?"atree-node--active":C?"atree-node--selectable":k?"atree-node--blocked":"atree-node--default";return h.jsxs("button",{type:"button",className:`atree-node ${R}`,style:{gridColumnStart:S.display.col+1,gridRowStart:S.display.row+1},title:E?.reason??"",onClick:()=>p(S.id),onMouseEnter:()=>u(S.id),onFocus:()=>u(S.id),children:[h.jsxs("div",{className:"text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:["#",S.id]}),h.jsx("div",{className:"mt-1 text-xs font-semibold leading-tight",children:IA(S.displayName)}),h.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2 text-[10px]",children:[h.jsxs("span",{className:"text-[var(--wb-muted)]",children:["AP ",S.cost]}),S.archetype?h.jsx("span",{className:"wb-chip px-1.5 py-0.5",children:S.archetype}):null]})]},S.id)})})})})})]}),h.jsxs("div",{className:"min-h-0 space-y-3",children:[h.jsx(Yi,{title:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(qE,{size:14}),"Node Details"]}),className:"min-h-0",children:h.jsx("div",{className:"space-y-3 p-3",children:d?h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-base font-semibold",children:d.displayName}),h.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[h.jsxs("span",{className:"wb-chip",children:["AP ",d.cost]}),d.archetype?h.jsx("span",{className:"wb-chip",children:d.archetype}):null,d.archetypeReq>0?h.jsxs("span",{className:"wb-chip",children:["Req ",d.reqArchetype||d.archetype||"Archetype",": ",d.archetypeReq]}):null,r.nodeStatusById[d.id]?.reason?h.jsx("span",{className:"wb-chip text-amber-100",children:r.nodeStatusById[d.id]?.reason}):null]})]}),h.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs leading-relaxed text-[var(--wb-text)] [&_br]:block [&_br]:content-[''] [&_span]:text-inherit",dangerouslySetInnerHTML:{__html:d.descriptionHtml||'<span class="text-slate-400">No description.</span>'}}),h.jsxs("div",{className:"grid gap-2 text-xs",children:[h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Parents"}),h.jsx("div",{className:"mt-1",children:d.parents.length===0?"Root node":d.parents.map(S=>s.nodeById.get(S)?.displayName??`#${S}`).join("  ")})]}),d.dependencies.length>0?h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Dependencies"}),h.jsx("div",{className:"mt-1",children:d.dependencies.map(S=>s.nodeById.get(S)?.displayName??`#${S}`).join("  ")})]}):null,d.blockers.length>0?h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[h.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Blockers"}),h.jsx("div",{className:"mt-1",children:d.blockers.map(S=>s.nodeById.get(S)?.displayName??`#${S}`).join("  ")})]}):null]})]}):h.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs text-[var(--wb-muted)]",children:"Hover or focus an ability node to inspect it here."})})}),h.jsx(Yi,{title:"Selected Abilities",className:"min-h-0",children:h.jsx(Vi,{className:"max-h-[28vh] p-3",children:r.activeIds.length===0?h.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs text-[var(--wb-muted)]",children:"No abilities selected yet."}):h.jsx("div",{className:"grid gap-1",children:r.activeIds.map(S=>{const E=s.nodeById.get(S);return E?h.jsx(et,{className:"justify-start text-left",active:c===S,onClick:()=>u(S),title:`AP ${E.cost}`,children:E.displayName},S):null})})})})]})]}):h.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-4 text-sm text-[var(--wb-muted)]",children:"Pick a class in the Workbench header, or equip a weapon so Workbench can infer the class and load the correct ability tree."})})}const qA=["helmet","chestplate","leggings","boots"],UA=["spear","wand","dagger","bow","relik"],$A=["ring","bracelet","necklace"],HA=["HELMET","CHESTPLATE","LEGGINGS","BOOTS","RELIK","WAND","SPEAR","DAGGER","BOW","RING","NECKLACE","BRACELET","POTION","SCROLL","FOOD"],ZA=["1-3","3-5","5-7","7-9","10-13","13-15","15-17","17-19","20-23","23-25","25-27","27-29","30-33","33-35","35-37","37-39","40-43","43-45","45-47","47-49","50-53","53-55","55-57","57-59","60-63","63-65","65-67","67-69","70-73","73-75","75-77","77-79","80-83","83-85","85-87","87-89","90-93","93-95","95-97","97-99","100-103","103-105"],mS=["SLOW","NORMAL","FAST"];function Fh(e){const n=e.toLowerCase();return qA.includes(n)?"armor":UA.includes(n)?"weapon":$A.includes(n)?"accessory":"consumable"}const gS={offense:1,defense:.6,utility:.4,skillPoints:.3,reqPenalty:.5},Ls={recipeType:"HELMET",levelRange:"103-105",matTiers:null,atkSpd:null,weights:gS,mustIncludeIngredients:[],excludedIngredients:[],topN:30,topKPerSlot:120,beamWidth:400,target:{},maxReqs:[null,null,null,null,null]},ms=4e3,D0=[0,1,1.25,1.4],ch=["e","t","w","f","a"],FA=[{min:3,max:6,convert:17,defPlus:2,defMinus:1},{min:5,max:8,convert:21,defPlus:4,defMinus:2},{min:6,max:10,convert:25,defPlus:8,defMinus:3},{min:7,max:10,convert:31,defPlus:14,defMinus:5},{min:9,max:11,convert:38,defPlus:22,defMinus:9},{min:11,max:13,convert:46,defPlus:30,defMinus:13},{min:1,max:8,convert:9,defPlus:3,defMinus:1},{min:1,max:12,convert:11,defPlus:5,defMinus:1},{min:2,max:15,convert:13,defPlus:9,defMinus:2},{min:3,max:15,convert:17,defPlus:14,defMinus:4},{min:4,max:17,convert:22,defPlus:20,defMinus:7},{min:5,max:20,convert:28,defPlus:28,defMinus:10},{min:3,max:4,convert:13,defPlus:3,defMinus:1},{min:4,max:6,convert:15,defPlus:6,defMinus:1},{min:5,max:8,convert:17,defPlus:11,defMinus:2},{min:6,max:8,convert:21,defPlus:18,defMinus:4},{min:7,max:10,convert:26,defPlus:28,defMinus:7},{min:9,max:11,convert:32,defPlus:40,defMinus:10},{min:2,max:5,convert:14,defPlus:3,defMinus:1},{min:4,max:8,convert:16,defPlus:5,defMinus:2},{min:5,max:9,convert:19,defPlus:9,defMinus:3},{min:6,max:9,convert:24,defPlus:16,defMinus:5},{min:8,max:10,convert:30,defPlus:25,defMinus:9},{min:10,max:12,convert:37,defPlus:36,defMinus:13},{min:2,max:6,convert:11,defPlus:3,defMinus:1},{min:3,max:10,convert:14,defPlus:6,defMinus:2},{min:4,max:11,convert:17,defPlus:10,defMinus:3},{min:5,max:11,convert:22,defPlus:16,defMinus:5},{min:7,max:12,convert:28,defPlus:24,defMinus:9},{min:8,max:14,convert:35,defPlus:34,defMinus:13}];function GA(e){return e/6|0}function YA(e){return ch[GA(e)]}function VA(e){const n=[[100,100],[100,100],[100,100]];for(let s=0;s<6;s++){const r=e[s].posMods,c=Math.floor(s/2),u=s%2;if(r.above!==0)for(let d=c-1;d>=0;d--)n[d][u]+=r.above;if(r.under!==0)for(let d=c+1;d<3;d++)n[d][u]+=r.under;if(r.left!==0&&u===1&&(n[c][u-1]+=r.left),r.right!==0&&u===0&&(n[c][u+1]+=r.right),r.touching!==0)for(let d=0;d<3;d++)for(let g=0;g<2;g++)(Math.abs(d-c)===1&&g===u||d===c&&Math.abs(g-u)===1)&&(n[d][g]+=r.touching);if(r.notTouching!==0)for(let d=0;d<3;d++)for(let g=0;g<2;g++)(Math.abs(d-c)>1||Math.abs(d-c)===1&&Math.abs(g-u)===1)&&(n[d][g]+=r.notTouching)}return n.flat()}function Gh(e,n,s,i){const r=e.type.toLowerCase(),c=Fh(r);let u=!0;for(const Z of s)if(Z.id!==ms){u=!1;break}let d=0,g=0;(c==="weapon"||c==="armor")&&(e.lvl[0]<30?d=1:e.lvl[0]<70?d=2:d=3),c==="consumable"&&(e.lvl[0]<30?g=1:e.lvl[0]<70?g=2:g=3,u&&(g=3));const p=e.materials.map(Z=>Z.amount),y=(D0[n[0]]*p[0]+D0[n[1]]*p[1])/(p[0]+p[1]);let v=[e.durability[0],e.durability[1]],b=[e.duration[0],e.duration[1]];c==="consumable"?(u&&(b=[e.basicDuration[0],e.basicDuration[1]]),b=[Math.round(b[0]*y),Math.round(b[1]*y)]):v=[Math.round(v[0]*y),Math.round(v[1]*y)];const S=e.healthOrDamage[0],E=e.healthOrDamage[1];let T=0,C=0,k="0-0",R="0-0";const z={e:0,t:0,w:0,f:0,a:0};if(c==="armor")T=Math.floor(E*y),C=Math.floor(S*y);else if(c==="weapon"){let Z=2.05;i==="SLOW"?Z/=1.5:i==="NORMAL"?Z=1:i==="FAST"&&(Z/=2.5);const le=Math.floor(Math.floor(S*y)*Z),Q=Math.floor(Math.floor(E*y)*Z);R=`${Math.floor(le*.9)}-${Math.floor(le*1.1)}`,k=`${Math.floor(Q*.9)}-${Math.floor(Q*1.1)}`}else c==="consumable"&&u&&(T=Math.floor(E*y),C=Math.floor(S*y));if(c==="armor"||c==="accessory"){for(const Z of s)if(Z.isPowder&&Z.pid!=null){const le=FA[Z.pid],Q=YA(Z.pid),L=ch[(ch.indexOf(Q)+4)%5];z[Q]=(z[Q]||0)+le.defPlus,z[L]=(z[L]||0)-le.defMinus}}const B=VA(s),U=[0,0,0,0,0],M={},j={};for(let Z=0;Z<6;Z++){const le=s[Z],Q=B[Z]/100,L=le.itemIDs;if(c!=="consumable"){const G=["strReq","dexReq","intReq","defReq","agiReq"];for(let ae=0;ae<G.length;ae++){const A=L[G[ae]];A!==0&&(le.isPowder?U[ae]+=Math.round(A):U[ae]+=Math.round(A*Q))}}L.dura!==0&&(v[0]+=L.dura,v[1]+=L.dura),le.consumableIDs.dura!==0&&(b[0]+=le.consumableIDs.dura,b[1]+=le.consumableIDs.dura),le.consumableIDs.charges!==0&&(g+=le.consumableIDs.charges);for(const[G,ae]of Object.entries(le.ids)){if(ae.max===0&&ae.min===0)continue;let A=ae.min,Y=ae.max;const N=[Math.floor(A*Q),Math.floor(Y*Q)].sort((P,ee)=>P-ee);A=N[0],Y=N[1],j[G]=(j[G]??0)+A,M[G]=(M[G]??0)+Y}}return v[0]=Math.max(1,Math.floor(v[0])),v[1]=Math.max(1,Math.floor(v[1])),u||(b[0]=Math.max(10,b[0]),b[1]=Math.max(10,b[1])),g=Math.max(g,c==="consumable"?1:0),{category:c,type:r,lvl:e.lvl[1],hp:T,hpLow:C,nDam:k,nDamLow:R,eDam:"0-0",tDam:"0-0",wDam:"0-0",fDam:"0-0",aDam:"0-0",eDef:z.e,tDef:z.t,wDef:z.w,fDef:z.f,aDef:z.a,atkSpd:i,durability:v,duration:b,charges:g,slots:d,reqs:[U[0],U[1],U[2],U[3],U[4]],effectiveness:B,maxRolls:M,minRolls:j}}function pS(e,n,s,i,r){const c={SLOW:0,NORMAL:1,FAST:2},u=[];function d(v,b){for(let S=b-1;S>=0;S--)u.push(v>>S&1)}d(0,1),d(2,7);for(const v of e)d(v,12);d(n,12),d(s[0]-1,3),d(s[1]-1,3),r==="weapon"&&d(c[i]??0,4);const g=u.length%6;if(g!==0)for(let v=0;v<6-g;v++)u.push(0);const p="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+-";let y="";for(let v=0;v<u.length;v+=6){let b=0;for(let S=0;S<6;S++)b=b<<1|(u[v+S]??0);y+=p[b]}return"CR-"+y}const vS=["sdPct","sdRaw","mdPct","mdRaw","damPct","poison","fDamPct","wDamPct","aDamPct","tDamPct","eDamPct","spPct1","spRaw1","spPct2","spRaw2","spPct3","spRaw3","spPct4","spRaw4","rSdRaw","critDamPct"],yS=["hpBonus","hprRaw","hprPct","fDefPct","wDefPct","aDefPct","tDefPct","eDefPct"],bS=["mr","ms","ls","spd","xpb","lb","ref","thorns","spRegen","eSteal","sprint","sprintReg","jh","lq","gXp","gSpd"],xS=["str","dex","int","def","agi"];function SS(e,n){let s=0;for(const i of n){const r=e.maxRolls[i]??0;r>0&&(s+=r)}return s}function KA(e,n){let s=0;for(const i of n)s+=e.maxRolls[i]??0;return s}function WA(e){let n=SS(e,vS);return e.category==="armor"&&(n+=e.hp*.02),n}function XA(e){let n=SS(e,yS);return e.category==="armor"&&(n+=e.hp*.15),n+=Math.max(0,e.eDef)+Math.max(0,e.tDef)+Math.max(0,e.wDef)+Math.max(0,e.fDef)+Math.max(0,e.aDef),n}function QA(e){let n=0;const s=e.maxRolls.mr??0,i=e.maxRolls.ms??0,r=e.maxRolls.ls??0,c=e.maxRolls.spd??0;n+=s*12+i*8+r*6+c*3;for(const u of bS){if(u==="mr"||u==="ms"||u==="ls"||u==="spd")continue;const d=e.maxRolls[u]??0;d>0&&(n+=d)}return n}function JA(e){return KA(e,xS)}function eO(e){let n=0;for(const s of e.reqs)n+=Math.max(0,s);return n}function wS(e,n){if(n==="durability")return[e.durability[0],e.durability[1]];if(n==="duration")return[e.duration[0],e.duration[1]];const s=e.maxRolls[n]??0;return[s,s]}function tO(e,n){let s=0;for(const[i,r]of Object.entries(n)){const[c,u]=wS(e,i);if(typeof r.min=="number"&&c<r.min){const d=r.min-c;s+=d*200+d*d}if(typeof r.max=="number"&&u>r.max){const d=u-r.max;s+=d*200+d*d}}return s}function _S(e,n){for(const[s,i]of Object.entries(n)){const[r,c]=wS(e,s);if(typeof i.min=="number"&&r<i.min||typeof i.max=="number"&&c>i.max)return!1}return!0}function Yh(e,n,s){const i=WA(e)*n.offense,r=XA(e)*n.defense,c=QA(e)*n.utility,u=JA(e)*n.skillPoints,d=eO(e)*n.reqPenalty,g=tO(e,s.target),p={offense:i,defense:r,utility:c,skillPoints:u,reqPenalty:d,thresholdPenalty:g};return{score:i+r+c+u-d-g,breakdown:p}}function Vh(e,n,s){let i=0;for(const[c,u]of Object.entries(e.ids)){const d=u.max;vS.includes(c)&&d>0?i+=d*n.offense:yS.includes(c)&&d>0?i+=d*n.defense:bS.includes(c)?c==="mr"?i+=d*12*n.utility:c==="ms"?i+=d*8*n.utility:c==="ls"?i+=d*6*n.utility:c==="spd"?i+=d*3*n.utility:d>0&&(i+=d*n.utility):xS.includes(c)&&(i+=d*n.skillPoints),s?.has(c)&&d>0&&(i+=d*50)}const r=Math.max(0,e.itemIDs.strReq)+Math.max(0,e.itemIDs.dexReq)+Math.max(0,e.itemIDs.intReq)+Math.max(0,e.itemIDs.defReq)+Math.max(0,e.itemIDs.agiReq);return i-=r*n.reqPenalty*.5,i}const bt=6,nO=.65,uh=2e3,aO=36,sO=12,iO=12,ES=10;function lO(e,n,s){const i=e.recipesByType.get(n.toUpperCase());if(!i)return null;const r=`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()}-${s}`;return i.find(c=>c.name===r)??null}function rO(e,n,s){const i=n.skill.toUpperCase(),r=n.lvl[1],c=new Set(s.excludedIngredients),u=[];for(const d of e.ingredients)d.id!==ms&&(c.has(d.id)||d.lvl>r||d.skills.some(g=>g.toUpperCase()===i)&&u.push(d));return u}function yr(e,n){return n==="durability"?e.itemIDs.dura??0:n==="duration"?e.consumableIDs.dura??0:e.ids[n]?.max??0}function oO(e){const n=e.posMods;return n.left>0||n.right>0||n.above>0||n.under>0||n.touching>0||n.notTouching>0}function TS(e){const n=e.posMods;return Math.max(0,n.left)+Math.max(0,n.right)+Math.max(0,n.above)+Math.max(0,n.under)+Math.max(0,n.touching)+Math.max(0,n.notTouching)}function NS(e,n){let s=0;for(const i of n){const r=yr(e,i);r>0&&(s+=r)}return s}function cO(e,n,s){const i=new Set(s.mustIncludeIngredients),r=new Set(Object.keys(s.target)),c=r.size>0,u=n.map(v=>({ing:v,score:Vh(v,s.weights,c?r:void 0)}));u.sort((v,b)=>b.score-v.score);const d=s.topKPerSlot,g=new Set,p=[e.noIngredient];g.add(ms);let y=0;for(const{ing:v}of u)i.has(v.id)&&!g.has(v.id)&&(g.add(v.id),p.push(v));for(const{ing:v}of u)if(!g.has(v.id)&&(g.add(v.id),p.push(v),y++,y>=d))break;if(c){const v=n.filter(S=>!g.has(S.id)).map(S=>({ing:S,tScore:Array.from(r).reduce((E,T)=>{const C=yr(S,T);return C>0?E+C:E},0)})).filter(({tScore:S})=>S>0);v.sort((S,E)=>E.tScore-S.tScore);const b=Math.min(v.length,Math.max(30,Math.floor(d/2)));for(let S=0;S<b;S++){const{ing:E}=v[S];g.has(E.id)||(g.add(E.id),p.push(E))}}return p}function MS(e,n){if(n.size===0)return 0;const s=new Set(e);let i=0;for(const r of n)s.has(r)||i++;return i}function jS(e,n){const s=n.maxReqs;for(let i=0;i<5;i++){const r=s[i];if(r!=null&&Math.max(0,e.reqs[i])>r)return!1}return!0}function CS(e,n){if(n.size===0)return!0;const s=new Set(e);for(const i of n)if(!s.has(i))return!1;return!0}function uO(e,n,s,i,r,c){const u=[];for(let y=0;y<bt;y++)y<n.length?u.push(s.ingredientsById.get(n[y])??s.noIngredient):u.push(s.noIngredient);const d=Gh(e,r,u,c),{score:g,breakdown:p}=Yh(d,i.weights,i);return{score:g,thresholdPenalty:p.thresholdPenalty}}function dO(e,n,s){const i=Math.floor(n/2),r=n%2,c=Math.floor(s/2),u=s%2;if(i===c&&r===u)return 0;let d=0;return u===r&&c<i&&(d+=e.above),u===r&&c>i&&(d+=e.under),i===c&&r===1&&u===0&&(d+=e.left),i===c&&r===0&&u===1&&(d+=e.right),(Math.abs(c-i)===1&&u===r||c===i&&Math.abs(u-r)===1)&&(d+=e.touching),(Math.abs(c-i)>1||Math.abs(c-i)===1&&Math.abs(u-r)===1)&&(d+=e.notTouching),d}function fO(e){const n=[];for(let s=0;s<bt;s++){let i=100;for(let r=0;r<bt;r++){if(r===s)continue;let c=0;for(const u of e){const d=dO(u.posMods,r,s);d>c&&(c=d)}i+=Math.max(0,c)}n[s]=Math.max(0,i)/100}return n}function R0(e,n,s){const i=yr(e,n);if(i<=0)return 0;let r=0;for(const c of s){const u=Math.ceil(i*c);u>r&&(r=u)}return r}function hO(e,n,s){if(s.size>bt)return`Unsatisfiable constraints: ${s.size} distinct must-include ingredients exceed ${bt} slots.`;const i=new Map;for(const u of e)i.set(u.id,u);for(const u of s)if(!i.has(u))return`Unsatisfiable constraints: must-include ingredient #${u} is not eligible for this recipe/level range.`;const r=fO(e),c=Math.max(0,bt-s.size);for(const[u,d]of Object.entries(n.target)){if(typeof d.min!="number"||u==="durability"||u==="duration")continue;let g=0;for(const v of e){const b=R0(v,u,r);b>g&&(g=b)}let p=0;for(const v of s){const b=i.get(v);b&&(p+=R0(b,u,r))}const y=p+c*g;if(y<d.min)return`Unsatisfiable threshold: ${u} min ${d.min} exceeds theoretical max ${y} for the current recipe/level/ingredient pool.`}return null}function mO(e,n,s,i){const r=Object.keys(s.target),c=s.maxReqs.some(S=>S!=null),u=new Set(r),d=new Set,g=[],p=new Map;for(const S of n)p.set(S.id,S);const y=S=>{!S||d.has(S.id)||(d.add(S.id),g.push(S))};y(e.noIngredient);for(const S of i)y(p.get(S));const v=n.map(S=>({ing:S,score:NS(S,r)})).filter(({score:S})=>S>0).sort((S,E)=>E.score-S.score);for(let S=0;S<Math.min(aO,v.length);S++)y(v[S].ing);const b=n.filter(oO).map(S=>({ing:S,score:TS(S)})).sort((S,E)=>E.score-S.score);for(let S=0;S<Math.min(sO,b.length);S++)y(b[S].ing);if(c){const S=n.map(E=>{const T=Math.max(0,-E.itemIDs.strReq)+Math.max(0,-E.itemIDs.dexReq)+Math.max(0,-E.itemIDs.intReq)+Math.max(0,-E.itemIDs.defReq)+Math.max(0,-E.itemIDs.agiReq);return{ing:E,reduction:T}}).filter(({reduction:E})=>E>0).sort((E,T)=>T.reduction-E.reduction);for(let E=0;E<Math.min(iO,S.length);E++)y(S[E].ing)}if(g.length<12){const S=n.map(E=>({ing:E,score:Vh(E,s.weights,u)})).sort((E,T)=>T.score-E.score);for(const{ing:E}of S)if(y(E),g.length>=12)break}return g}function gO(e,n,s,i,r){for(const[c,u]of Object.entries(i.target)){if(typeof u.min!="number"||c==="durability"||c==="duration")continue;let d=0;for(const p of e){const y=s.get(p);if(!y)continue;const v=Math.max(0,yr(y,c));d+=v*ES}if(d+n*(r.get(c)??0)<u.min)return!1}return!0}function pO(e){const{recipe:n,catalog:s,constraints:i,category:r,matTierOptions:c,atkSpdOptions:u,mustIncludeSet:d,eligible:g,signal:p}=e,y=Date.now();let v=!1,b=0;const S=Object.keys(i.target),E=mO(s,g,i,d);if(E.length===0)return{candidates:[],processedStates:0,timedOut:!1,detail:"Deterministic fallback had no eligible fallback ingredients to explore."};const T=new Map;for(const[D,K]of Object.entries(i.target)){if(typeof K.min!="number"||D==="durability"||D==="duration")continue;let re=0;for(const he of E){const se=Math.max(0,yr(he,D));se>re&&(re=se)}T.set(D,re*ES)}const C=new Map;for(const D of E){const K=Math.max(0,-D.itemIDs.strReq)+Math.max(0,-D.itemIDs.dexReq)+Math.max(0,-D.itemIDs.intReq)+Math.max(0,-D.itemIDs.defReq)+Math.max(0,-D.itemIDs.agiReq);C.set(D.id,{threshold:NS(D,S),support:TS(D),reqReduce:K,rough:Vh(D,i.weights,new Set(S))})}const k=[...E].sort((D,K)=>{if(D.id===ms&&K.id!==ms)return 1;if(K.id===ms&&D.id!==ms)return-1;const re=d.has(D.id)?1:0,he=d.has(K.id)?1:0;if(re!==he)return he-re;const se=C.get(D.id),Z=C.get(K.id);return!se||!Z?0:se.threshold!==Z.threshold?Z.threshold-se.threshold:se.reqReduce!==Z.reqReduce?Z.reqReduce-se.reqReduce:se.support!==Z.support?Z.support-se.support:Z.rough-se.rough}),R=new Map;for(const D of E)R.set(D.id,D);const z=new Map,B=()=>Date.now()-y>=uh?(v=!0,!0):!1,U=(D,K)=>{if(v)return;if(p?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");if(B())return;const re=bt-D;if(!(MS(K,d)>re)&&gO(K,re,R,i,T)){if(D===bt){const se=[...K];if(!CS(se,d))return;const Z=se.map(le=>R.get(le)??s.noIngredient);for(const le of c)for(const Q of u){if(p?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");if(B())return;const L=Gh(n,le,Z,Q);if(b++,!jS(L,i)||!_S(L,i.target))continue;const{score:G,breakdown:ae}=Yh(L,i.weights,i),A=pS(se,n.id,le,Q,r),Y=se.join(",")+"|"+le.join(",")+"|"+Q,N=z.get(Y);(!N||G>N.score)&&z.set(Y,{recipeId:n.id,ingredientIds:se,matTiers:le,atkSpd:Q,effectiveness:L.effectiveness,stats:L,score:G,scoreBreakdown:ae,hash:A})}return}for(const se of k)if(K.push(se.id),U(D+1,K),K.pop(),v)return}};U(0,[]);const M=Array.from(z.values());M.sort((D,K)=>K.score-D.score);const j=M.slice(0,i.topN);return{candidates:j,processedStates:b,timedOut:v,detail:v?`Deterministic fallback hit ${uh}ms time budget after ${b} evaluated states.`:`Deterministic fallback evaluated ${b} states and found ${j.length} threshold-satisfying candidates.`}}function DS(e){const{catalog:n,constraints:s,signal:i,onProgress:r,alreadyThresholdRescue:c=!1}=e,u=lO(n,s.recipeType,s.levelRange);if(!u)return r?.({phase:"complete",processedStates:0,beamSize:0,expandedSlots:0,totalSlots:bt,detail:`No recipe found for ${s.recipeType}-${s.levelRange}.`}),[];const d=Fh(u.type.toLowerCase()),g=new Set(s.mustIncludeIngredients),p=Object.keys(s.target).length>0,y=rO(n,u,s);if(y.length===0)return r?.({phase:"complete",processedStates:0,beamSize:0,expandedSlots:0,totalSlots:bt,detail:"No eligible ingredients remain after recipe, level, and exclusion filters."}),[];const v=hO(y,s,g);if(v)return r?.({phase:"complete",processedStates:0,beamSize:0,expandedSlots:0,totalSlots:bt,detail:v}),[];const b=cO(n,y,s);if(b.length===0)return[];const S=s.matTiers?[s.matTiers]:[[1,1],[1,2],[1,3],[2,1],[2,2],[2,3],[3,1],[3,2],[3,3]],E=d==="weapon"?s.atkSpd?[s.atkSpd]:[...mS]:["SLOW"],T=S[S.length-1],C=E[0],k=s.beamWidth;let R=0;const z=g.size>0?1e6:0;let B=[{ingredientIds:[],score:0,thresholdPenalty:p?Number.POSITIVE_INFINITY:0,missingMust:g.size}];for(let se=0;se<bt;se++){if(i?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");const Z=[];for(const L of B)for(const G of b){if(i?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");const ae=[...L.ingredientIds,G.id],A=uO(u,ae,n,s,T,C),Y=MS(ae,g);let N=A.score;z>0&&Y===0&&(N+=z),Z.push({ingredientIds:ae,score:N,thresholdPenalty:A.thresholdPenalty,missingMust:Y}),R++}const le=new Set,Q=(L,G)=>{for(const ae of L){const A=ae.ingredientIds.join(",");if(!le.has(A)&&(le.add(A),G.push(ae),G.length>=k))break}};if(p){const L=Math.max(1,Math.floor(k*nO)),G=Math.max(1,k-L),ae=[...Z].sort((N,P)=>P.score-N.score).slice(0,L),A=[...Z].sort((N,P)=>N.missingMust!==P.missingMust?N.missingMust-P.missingMust:N.thresholdPenalty!==P.thresholdPenalty?N.thresholdPenalty-P.thresholdPenalty:P.score-N.score).slice(0,G),Y=[];Q(ae,Y),Y.length<k&&Q(A,Y),Y.length<k&&Q(Z.sort((N,P)=>P.score-N.score),Y),B=Y.slice(0,k)}else{const L=[];Q(Z.sort((G,ae)=>ae.score-G.score),L),B=L.slice(0,k)}r?.({phase:"beam-search",processedStates:R,beamSize:B.length,expandedSlots:se+1,totalSlots:bt,detail:p?`Dual-lane prune (score + threshold) on pool=${b.length}`:`Score-lane prune on pool=${b.length}`})}r?.({phase:"material-sweep",processedStates:R,beamSize:B.length,expandedSlots:bt,totalSlots:bt,detail:`Sweeping ${S.length} tier combos x ${E.length} atk speeds`});const U=new Map;for(const se of B){if(i?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");const Z=se.ingredientIds,le=Z.map(Q=>n.ingredientsById.get(Q)??n.noIngredient);for(const Q of S)for(const L of E){const G=Gh(u,Q,le,L),{score:ae,breakdown:A}=Yh(G,s.weights,s),Y=pS(Z,u.id,Q,L,d),N=Z.join(",")+"|"+Q.join(",")+"|"+L,P=U.get(N);(!P||ae>P.score)&&U.set(N,{recipeId:u.id,ingredientIds:Z,matTiers:Q,atkSpd:L,effectiveness:G.effectiveness,stats:G,score:ae,scoreBreakdown:A,hash:Y}),R++}}const M=Array.from(U.values());M.sort((se,Z)=>Z.score-se.score);const j=new Set,D=[],K=[];for(const se of M)j.has(se.hash)||(j.add(se.hash),CS(se.ingredientIds,g)&&jS(se.stats,s)&&(p&&_S(se.stats,s.target)?D.push(se):K.push(se)));if(p&&D.length===0&&!c){const se={...s,topKPerSlot:Math.min(400,Math.max(s.topKPerSlot*2,180)),beamWidth:Math.min(5e3,Math.max(s.beamWidth*2,1200))};if(se.topKPerSlot!==s.topKPerSlot||se.beamWidth!==s.beamWidth){r?.({phase:"threshold-rescue",processedStates:R,beamSize:B.length,expandedSlots:bt,totalSlots:bt,detail:`No candidates satisfied thresholds. Retrying beam with topK=${se.topKPerSlot}, beam=${se.beamWidth}.`});const Q=DS({catalog:n,constraints:se,signal:i,onProgress:r,alreadyThresholdRescue:!0});if(Q.length>0)return Q}r?.({phase:"deterministic-fallback",processedStates:R,beamSize:0,expandedSlots:bt,totalSlots:bt,detail:`Beam search produced no threshold-satisfying candidates. Running deterministic fallback (<=${uh}ms).`});const le=pO({recipe:u,catalog:n,constraints:s,category:d,matTierOptions:S,atkSpdOptions:E,mustIncludeSet:g,eligible:y,signal:i});return R+=le.processedStates,le.candidates.length>0?(r?.({phase:"complete",processedStates:R,beamSize:le.candidates.length,expandedSlots:bt,totalSlots:bt,detail:`Beam/rescue found 0 threshold-satisfying candidates. ${le.detail}`}),le.candidates):(r?.({phase:"complete",processedStates:R,beamSize:0,expandedSlots:bt,totalSlots:bt,detail:le.timedOut?`No valid candidates found before timeout. ${le.detail}`:`No candidates satisfy all hard thresholds. ${le.detail}`}),[])}const re=p?D.slice(0,s.topN):K.slice(0,s.topN),he=D.length;return r?.({phase:"complete",processedStates:R,beamSize:re.length,expandedSlots:bt,totalSlots:bt,detail:p?he>0?`Found ${re.length} candidates (${he} satisfy thresholds) from ${R} states`:`Found 0 candidates satisfying thresholds (${K.length} failed threshold checks) from ${R} states`:`Found ${re.length} candidates from ${R} states`}),re}class vO{worker=null;requestId=0;currentReject=null;currentRequestId=null;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL(""+new URL("worker-runtime-B9duvyvV.js",import.meta.url).href,import.meta.url),{type:"module"}))}async run(n,s,i={}){if(!this.worker)return DS({catalog:n,constraints:s,onProgress:i.onProgress,signal:i.signal});const r=++this.requestId;return this.currentRequestId=r,new Promise((c,u)=>{this.currentReject=u;const d=()=>{this.worker?.postMessage({type:"cancel",requestId:r}),u(new DOMException("Recipe solver cancelled","AbortError"))};i.signal?.addEventListener("abort",d,{once:!0});const g=p=>{const y=p.data;if(y.requestId===r){if(y.type==="progress"){i.onProgress?.(y.progress);return}if(this.worker?.removeEventListener("message",g),i.signal?.removeEventListener("abort",d),this.currentReject=null,this.currentRequestId=null,y.type==="error"){u(new Error(y.message));return}c(y.candidates)}};this.worker.addEventListener("message",g),this.worker.postMessage({type:"run",requestId:r,catalog:n,constraints:s})})}cancelCurrent(){this.currentRequestId!==null&&(this.worker?.postMessage({type:"cancel",requestId:this.currentRequestId}),this.currentReject?.(new DOMException("Recipe solver cancelled","AbortError")),this.currentReject=null,this.currentRequestId=null)}dispose(){this.worker?.terminate(),this.worker=null}}function Kl(e){return e?[e.minimum,e.maximum]:[0,0]}function yO(e){const n={item:e.materials[0].item,amount:e.materials[0].amount},s={item:e.materials[1].item,amount:e.materials[1].amount};return{id:e.id,name:e.name,type:e.type,skill:e.skill,materials:[n,s],healthOrDamage:Kl(e.healthOrDamage),durability:Kl(e.durability),duration:Kl(e.duration),basicDuration:Kl(e.basicDuration),lvl:Kl(e.lvl)}}function bO(e){const n={};if(e.ids)for(const[c,u]of Object.entries(e.ids))u&&typeof u=="object"&&"minimum"in u&&(n[c]={min:u.minimum,max:u.maximum});const s={left:e.posMods?.left??0,right:e.posMods?.right??0,above:e.posMods?.above??0,under:e.posMods?.under??0,touching:e.posMods?.touching??0,notTouching:e.posMods?.notTouching??0},i={dura:e.itemIDs?.dura??0,strReq:e.itemIDs?.strReq??0,dexReq:e.itemIDs?.dexReq??0,intReq:e.itemIDs?.intReq??0,defReq:e.itemIDs?.defReq??0,agiReq:e.itemIDs?.agiReq??0},r={dura:e.consumableIDs?.dura??0,charges:e.consumableIDs?.charges??0};return{id:e.id,name:e.name,displayName:e.displayName??e.name,lvl:e.lvl,tier:e.tier,skills:e.skills??[],ids:n,itemIDs:i,consumableIDs:r,posMods:s,isPowder:e.isPowder,pid:e.pid}}function xO(){return{id:ms,name:"No Ingredient",displayName:"No Ingredient",lvl:0,tier:0,skills:[],ids:{},itemIDs:{dura:0,strReq:0,dexReq:0,intReq:0,defReq:0,agiReq:0},consumableIDs:{dura:0,charges:0},posMods:{left:0,right:0,above:0,under:0,touching:0,notTouching:0}}}function SO(e,n){const s=new Map,i=new Map;for(const p of e){s.set(p.id,p);const y=p.type.toUpperCase(),v=i.get(y)??[];v.push(p),i.set(y,v)}const r=xO(),c=[r,...n],u=new Map,d=new Map,g=new Map;for(const p of c){u.set(p.id,p),g.set(p.name.toLowerCase(),p.id),p.displayName&&g.set(p.displayName.toLowerCase(),p.id);for(const y of p.skills){const v=y.toUpperCase(),b=d.get(v)??[];b.push(p),d.set(v,b)}}return{recipes:e,recipesById:s,recipesByType:i,ingredients:c,ingredientsById:u,ingredientsBySkill:d,ingredientIdByName:g,noIngredient:r}}async function k0(e){let n=null;for(const s of e)try{const i=await fetch(s,{cache:"force-cache"});if(!i.ok)throw new Error(`HTTP ${i.status} for ${s}`);return await i.json()}catch(i){n=i}throw n instanceof Error?n:new Error("Failed to fetch data")}class wO{snapshotPromise=null;async getCatalog(){return this.snapshotPromise||(this.snapshotPromise=this.load()),this.snapshotPromise}async load(){const n=g=>{if(typeof window>"u")return g;const p=window.location.href.split("?")[0].replace(/\/[^/]*$/,"/")||window.location.origin+"/";return new URL(g,p).href},s=[n("recipes_compress.json"),"./recipes_compress.json","../recipes_compress.json","recipes_compress.json"],i=[n("ingreds_compress.json"),"./ingreds_compress.json","../ingreds_compress.json","ingreds_compress.json"],[r,c]=await Promise.all([k0(s),k0(i)]),u=r.recipes.map(yO),d=c.map(bO);return SO(u,d)}}const _O=new wO,EO={helmet:"helmet",chestplate:"chestplate",leggings:"leggings",boots:"boots",ring:"ring1",bracelet:"bracelet",necklace:"necklace",spear:"weapon",bow:"weapon",wand:"weapon",dagger:"weapon",relik:"weapon"},TO={advancedIds:"Advanced IDs only",balanced:"Balanced",offense:"Offense",defense:"Defense",utility:"Utility / Sustain",skillpoints:"Skill Points"},NO=["advancedIds","balanced","offense","defense","utility","skillpoints"];function MO(e){const n={...gS};switch(e){case"advancedIds":return{offense:.25,defense:.25,utility:.25,skillPoints:.25,reqPenalty:.25};case"offense":return{offense:2,defense:0,utility:0,skillPoints:0,reqPenalty:0};case"defense":return{offense:0,defense:2,utility:0,skillPoints:0,reqPenalty:0};case"utility":return{offense:0,defense:0,utility:2,skillPoints:0,reqPenalty:0};case"skillpoints":return{offense:0,defense:0,utility:0,skillPoints:2,reqPenalty:0};default:return n}}const jO={durability:"Durability",duration:"Duration",sdPct:"Spell Dmg %",sdRaw:"Spell Dmg Raw",mdPct:"Melee Dmg %",mdRaw:"Melee Dmg Raw",damPct:"Damage %",poison:"Poison",hpBonus:"HP Bonus",hprRaw:"HPR Raw",hprPct:"HPR %",mr:"Mana Regen",ms:"Mana Steal",ls:"Life Steal",spd:"Walk Speed",xpb:"XP Bonus",lb:"Loot Bonus",ref:"Reflection",thorns:"Thorns",expd:"Exploding",str:"STR",dex:"DEX",int:"INT",def:"DEF",agi:"AGI",eDamPct:"Earth Dmg %",tDamPct:"Thunder Dmg %",wDamPct:"Water Dmg %",fDamPct:"Fire Dmg %",aDamPct:"Air Dmg %",nDamPct:"Neutral Dmg %",rDamPct:"Elem Dmg %",eDefPct:"Earth Def %",tDefPct:"Thunder Def %",wDefPct:"Water Def %",fDefPct:"Fire Def %",aDefPct:"Air Def %",rDefPct:"Elem Def %",atkTier:"Atk Speed Bonus",spRegen:"Soul Point Regen",eSteal:"Emerald Steal",rSdRaw:"Rainbow Spell Raw",critDamPct:"Crit Damage %",spPct1:"1st Spell Cost %",spRaw1:"1st Spell Cost Raw",spPct2:"2nd Spell Cost %",spRaw2:"2nd Spell Cost Raw",spPct3:"3rd Spell Cost %",spRaw3:"3rd Spell Cost Raw",spPct4:"4th Spell Cost %",spRaw4:"4th Spell Cost Raw",sprint:"Sprint",sprintReg:"Sprint Regen",jh:"Jump Height",lq:"Loot Quality",gXp:"Gather XP",gSpd:"Gather Speed",healPct:"Healing %",kb:"Knockback",weakenEnemy:"Weaken Enemy",slowEnemy:"Slow Enemy",maxMana:"Max Mana",mainAttackRange:"Main Attack Range",eDamRaw:"Earth Dmg Raw",tDamRaw:"Thunder Dmg Raw",wDamRaw:"Water Dmg Raw",fDamRaw:"Fire Dmg Raw",aDamRaw:"Air Dmg Raw",nDamRaw:"Neutral Dmg Raw",damRaw:"Damage Raw",rDamRaw:"Elem Dmg Raw"},A0=["durability","duration","hprPct","mr","sdPct","mdPct","ls","ms","xpb","lb","ref","thorns","expd","spd","atkTier","poison","hpBonus","spRegen","eSteal","hprRaw","sdRaw","mdRaw","fDamPct","wDamPct","aDamPct","tDamPct","eDamPct","nDamPct","rDamPct","damPct","fDefPct","wDefPct","aDefPct","tDefPct","eDefPct","rDefPct","spPct1","spRaw1","spPct2","spRaw2","spPct3","spRaw3","spPct4","spRaw4","rSdRaw","sprint","sprintReg","jh","lq","gXp","gSpd","eDamRaw","tDamRaw","wDamRaw","fDamRaw","aDamRaw","nDamRaw","damRaw","rDamRaw","critDamPct","healPct","maxMana","str","dex","int","def","agi"];function RS(e){return jO[e]??e}const Xo={HELMET:"ARMOURING",CHESTPLATE:"TAILORING",LEGGINGS:"TAILORING",BOOTS:"TAILORING",SPEAR:"WEAPONSMITHING",DAGGER:"WEAPONSMITHING",WAND:"WOODWORKING",BOW:"WOODWORKING",RELIK:"WOODWORKING",RING:"JEWELING",NECKLACE:"JEWELING",BRACELET:"JEWELING",POTION:"ALCHEMISM",SCROLL:"SCRIBING",FOOD:"COOKING"};function CO(e){const n=w.useRef(null);n.current||(n.current=new vO);const[s,i]=w.useState(null),[r,c]=w.useState(null),[u,d]=w.useState("HELMET"),[g,p]=w.useState("103-105"),[y,v]=w.useState("auto"),[b,S]=w.useState(3),[E,T]=w.useState(3),[C,k]=w.useState("auto"),[R,z]=w.useState("FAST"),[B,U]=w.useState("advancedIds"),[M,j]=w.useState(""),[D,K]=w.useState(""),[re,he]=w.useState([]),se=w.useRef(1),[Z,le]=w.useState(Ls.beamWidth),[Q,L]=w.useState(Ls.topKPerSlot),[G,ae]=w.useState(Ls.topN),[A,Y]=w.useState([null,null,null,null,null]),[N,P]=w.useState([]),[ee,oe]=w.useState(""),[ue,ce]=w.useState(!1),[ye,be]=w.useState(null),[ge,_e]=w.useState(null),[Be,it]=w.useState(null),Rt=w.useRef(null),ct=Fh(u.toLowerCase())==="weapon";w.useEffect(()=>{e.open&&(s||_O.getCatalog().then(i).catch(de=>{c(de instanceof Error?de.message:"Failed to load crafting data")}))},[e.open,s]);const Vt=w.useMemo(()=>{if(!s)return 0;const de=Xo[u]??"";return s.ingredientsBySkill.get(de)?.length??0},[s,u]);function ht(de){if(!s)return{ids:[],unknown:[]};const ze=de.split(",").map(je=>je.trim()).filter(Boolean),De=[],We=[];for(const je of ze){const Ft=s.ingredientIdByName.get(je.toLowerCase());Ft==null?We.push(je):De.push(Ft)}return{ids:De,unknown:We}}const Jt=de=>{navigator.clipboard.writeText(de).then(()=>{it(de),setTimeout(()=>it(null),2e3)})},en=async()=>{if(!s)return;be(null),P([]),_e(null);const de=ht(M),ze=ht(D);if(de.unknown.length>0||ze.unknown.length>0){be([de.unknown.length?`Unknown must-include: ${de.unknown.join(", ")}`:"",ze.unknown.length?`Unknown excluded: ${ze.unknown.join(", ")}`:""].filter(Boolean).join(" | "));return}const De=(Xo[u]??"").toUpperCase(),We=[];for(const W of de.ids){const me=s.ingredientsById.get(W);me&&!me.skills.some(Ye=>Ye.toUpperCase()===De)&&We.push(me.displayName||me.name)}if(We.length>0){be(`${We.join(", ")} cannot be used for ${u} (${De})  they require a different profession.`);return}const je={};for(const W of re)W.key&&(W.min==null&&W.max==null||(je[W.key]={min:W.min??void 0,max:W.max??void 0}));const Ft={...Ls,recipeType:u,levelRange:g,matTiers:y==="manual"?[b,E]:null,atkSpd:ct&&C==="manual"?R:null,weights:MO(B),mustIncludeIngredients:de.ids,excludedIngredients:ze.ids,topN:Math.max(1,Math.min(100,G)),topKPerSlot:Math.max(10,Math.min(300,Q)),beamWidth:Math.max(20,Math.min(3e3,Z)),target:je,maxReqs:A};Rt.current?.abort();const Nn=new AbortController;Rt.current=Nn,ce(!0),oe("Starting...");let tn="";try{const W=await n.current.run(s,Ft,{signal:Nn.signal,onProgress:me=>{me.detail&&(tn=me.detail),_e(me),oe(`${me.phase}: ${me.expandedSlots}/${me.totalSlots} slots, beam ${me.beamSize}, states ${me.processedStates}${me.detail?` | ${me.detail}`:""}`)}});P(W),W.length===0?be(tn?`No valid candidates found. ${tn}`:"No valid candidates found. Try relaxing constraints, increasing beam width/top K, or choosing a different recipe."):oe(`Done. ${W.length} candidates found.`)}catch(W){W instanceof DOMException&&W.name==="AbortError"?oe("Cancelled"):(be(W instanceof Error?W.message:"Recipe solver failed"),oe(""))}finally{ce(!1),_e(null)}},Zt=()=>{Rt.current?.abort(),n.current?.cancelCurrent(),ce(!1),oe("Cancelled"),_e(null)};return h.jsxs(Ph,{open:e.open,onOpenChange:e.onOpenChange,title:"Recipe Solver",description:"Find optimal ingredient combinations for crafted items. Uses beam search over the ingredient pool.",className:"!w-[min(95vw,1360px)]",footer:h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsx("div",{className:"text-sm text-[var(--wb-muted)]",children:ee}),h.jsxs("div",{className:"flex gap-2",children:[ue?h.jsx(Ce,{variant:"ghost",onClick:Zt,children:"Cancel"}):null,h.jsx(Ce,{variant:"primary",onClick:en,disabled:!s||ue,children:"Solve Recipe"})]})]}),children:[r?h.jsx("div",{className:"mb-4 rounded-xl border border-rose-400/30 bg-rose-400/5 p-3 text-sm text-rose-200",children:r}):null,ue&&ge?h.jsxs("div",{className:"mb-4 rounded-xl border border-sky-400/30 bg-sky-400/5 p-3",children:[h.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[h.jsx("span",{className:"rounded-md bg-sky-400/20 px-2 py-0.5 text-xs font-medium text-sky-100",children:ge.phase}),ge.totalSlots>0?h.jsxs("span",{className:"text-xs text-[var(--wb-muted)]",children:["Slots ",ge.expandedSlots,"/",ge.totalSlots]}):null]}),h.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-black/20",children:h.jsx("div",{className:"h-full rounded-full bg-sky-400/70 transition-all duration-300",style:{width:ge.totalSlots>0?`${100*ge.expandedSlots/ge.totalSlots}%`:"0%"}})}),h.jsxs("div",{className:"mt-2 flex flex-wrap gap-4 text-xs text-[var(--wb-muted)]",children:[h.jsxs("span",{children:["States: ",ge.processedStates.toLocaleString()]}),h.jsxs("span",{children:["Beam: ",ge.beamSize.toLocaleString()]})]})]}):null,h.jsxs("div",{className:"grid h-[52vh] min-h-0 gap-4 overflow-hidden lg:h-[56vh] lg:grid-cols-[1fr_1fr] lg:items-stretch",children:[h.jsxs("div",{className:"grid h-full min-h-0 min-w-0 gap-3 overflow-auto pr-1 wb-scrollbar",children:[h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Recipe"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{children:[h.jsx(Ie,{children:"Item Type"}),h.jsx("select",{className:"wb-select",value:u,onChange:de=>d(de.target.value),children:HA.map(de=>h.jsxs("option",{value:de,children:[de," (",Xo[de],")"]},de))})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Level Range"}),h.jsx("select",{className:"wb-select",value:g,onChange:de=>p(de.target.value),children:ZA.map(de=>h.jsx("option",{value:de,children:de},de))})]}),s?h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[Vt," compatible ingredients in pool for ",Xo[u]]}):null]})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Material Tiers"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx(et,{active:y==="auto",onClick:()=>v("auto"),children:"Auto-optimize"}),h.jsx(et,{active:y==="manual",onClick:()=>v("manual"),children:"Manual"})]}),y==="manual"?h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx(Ie,{children:"Material 1 Tier"}),h.jsx("div",{className:"flex gap-2",children:[1,2,3].map(de=>h.jsx(et,{active:b===de,onClick:()=>S(de),children:de},de))})]}),h.jsxs("div",{className:"flex-1",children:[h.jsx(Ie,{children:"Material 2 Tier"}),h.jsx("div",{className:"flex gap-2",children:[1,2,3].map(de=>h.jsx(et,{active:E===de,onClick:()=>T(de),children:de},de))})]})]}):null]})]}),ct?h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Attack Speed"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{className:"flex gap-2",children:[h.jsx(et,{active:C==="auto",onClick:()=>k("auto"),children:"Auto-optimize"}),h.jsx(et,{active:C==="manual",onClick:()=>k("manual"),children:"Manual"})]}),C==="manual"?h.jsx("div",{className:"flex gap-2",children:mS.map(de=>h.jsx(et,{active:R===de,onClick:()=>z(de),children:de},de))}):null]})]}):null,h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Optimization Goal"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:NO.map(de=>h.jsx(et,{active:B===de,onClick:()=>U(de),children:TO[de]},de))})]}),h.jsxs("div",{className:"wb-card p-3",children:[h.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Ingredient Constraints"}),h.jsxs("div",{className:"grid gap-3",children:[h.jsxs("div",{children:[h.jsx(Ie,{children:"Must-Include Ingredients (comma-separated)"}),h.jsx("textarea",{className:"wb-textarea min-h-16",value:M,onChange:de=>j(de.target.value),placeholder:"e.g. Blueshift Beacon, Depurinated Genome"})]}),h.jsxs("div",{children:[h.jsx(Ie,{children:"Excluded Ingredients (comma-separated)"}),h.jsx("textarea",{className:"wb-textarea min-h-16",value:D,onChange:de=>K(de.target.value),placeholder:"Blacklist ingredient names"})]})]})]}),h.jsx("div",{className:"wb-card p-3",children:h.jsxs("details",{className:"group",children:[h.jsx("summary",{className:"cursor-pointer text-sm font-semibold",children:"Advanced: Stat Thresholds"}),h.jsxs("div",{className:"mt-3 grid gap-3",children:[h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Set minimum / maximum targets for specific stats on the crafted item."}),re.map(de=>h.jsx("div",{className:"rounded-lg border border-[var(--wb-border-muted)] p-2",children:h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs("div",{children:[h.jsx(Ie,{children:"Stat"}),h.jsx("select",{className:"wb-select w-full",value:de.key,onChange:ze=>he(De=>De.map(We=>We.id===de.id?{...We,key:ze.target.value}:We)),children:A0.map(ze=>h.jsxs("option",{value:ze,children:[RS(ze)," (",ze,")"]},ze))})]}),h.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[h.jsxs("div",{className:"min-w-[80px] flex-1",children:[h.jsx(Ie,{children:"Min"}),h.jsx("input",{className:"wb-input w-full",type:"number",value:de.min??"",onChange:ze=>{const De=ze.target.value.trim();he(We=>We.map(je=>je.id===de.id?{...je,min:De===""?null:Number(De)}:je))}})]}),h.jsxs("div",{className:"min-w-[80px] flex-1",children:[h.jsx(Ie,{children:"Max"}),h.jsx("input",{className:"wb-input w-full",type:"number",value:de.max??"",onChange:ze=>{const De=ze.target.value.trim();he(We=>We.map(je=>je.id===de.id?{...je,max:De===""?null:Number(De)}:je))}})]}),h.jsx(Ce,{variant:"ghost",className:"shrink-0",onClick:()=>he(ze=>ze.filter(De=>De.id!==de.id)),children:"Remove"})]})]})},de.id)),h.jsx("div",{children:h.jsx(Ce,{variant:"ghost",onClick:()=>he(de=>[...de,{id:se.current++,key:A0[0],min:null,max:null}]),children:"Add Threshold"})}),h.jsxs("div",{className:"mt-3 border-t border-[var(--wb-border-muted)] pt-3",children:[h.jsx(Ie,{children:"Max Skill Points (Req Limit)"}),h.jsx("div",{className:"mt-1 text-[11px] text-[var(--wb-muted)]",children:"Exclude recipes that exceed any of these. Leave empty for no limit."}),h.jsx("div",{className:"mt-2 grid grid-cols-5 gap-2",children:["STR","DEX","INT","DEF","AGI"].map((de,ze)=>h.jsxs("div",{children:[h.jsx("label",{className:"mb-0.5 block text-[11px] text-[var(--wb-muted)]",children:de}),h.jsx("input",{className:"wb-input w-full",type:"number",min:0,placeholder:"",value:A[ze]??"",onChange:De=>{const We=De.target.value.trim();Y(je=>{const Ft=[...je];return Ft[ze]=We===""?null:Math.max(0,Number(We)),Ft})}})]},de))})]})]})]})}),h.jsx("div",{className:"wb-card p-3",children:h.jsxs("details",{className:"group",children:[h.jsx("summary",{className:"cursor-pointer text-sm font-semibold",children:"Search Heuristics"}),h.jsxs("div",{className:"mt-3 grid gap-3",children:[h.jsx(za,{label:"Beam Width",value:Z,onChange:de=>le(de??Ls.beamWidth),min:20,max:3e3}),h.jsx(za,{label:"Top K per Slot",value:Q,onChange:de=>L(de??Ls.topKPerSlot),min:10,max:300}),h.jsx(za,{label:"Top N Results",value:G,onChange:de=>ae(de??Ls.topN),min:1,max:100})]})]})})]}),h.jsx("div",{className:"h-full min-h-0 min-w-0",children:h.jsxs("div",{className:"wb-card flex h-full min-h-0 flex-col overflow-hidden p-3",children:[h.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[h.jsx("div",{className:"text-sm font-semibold",children:"Candidates"}),h.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[N.length," shown"]})]}),h.jsx("div",{className:"min-h-0 flex-1 space-y-2 overflow-auto pr-1 wb-scrollbar",children:N.length===0?h.jsx("div",{className:"rounded-xl border border-dashed border-[var(--wb-border)] p-4 text-sm text-[var(--wb-muted)]",children:"Run Recipe Solver to find optimal ingredient combinations."}):N.map((de,ze)=>h.jsx(RO,{candidate:de,index:ze,catalog:s,copiedHash:Be,onCopyHash:Jt,onEquipCraft:e.onEquipCraft},`${de.hash}-${ze}`))}),ye?h.jsx("div",{className:"mt-2 rounded-xl border border-rose-400/30 bg-rose-400/8 p-2 text-xs text-rose-100",children:ye}):null]})})]})]})}function DO(e){const n=e.startsWith("CR-")?e.slice(3):e;return`${typeof window<"u"?new URL("crafter/",window.location.href).href:"crafter/"}#${n}`}function RO(e){const{candidate:n,index:s,catalog:i}=e,{stats:r,scoreBreakdown:c}=n,u=n.ingredientIds.map(v=>{const b=i?.ingredientsById.get(v);return b?.displayName??b?.name??`#${v}`}),d=[];for(const[v,b]of Object.entries(r.maxRolls))b!==0&&d.push({label:RS(v),value:b>0?`+${b}`:`${b}`});d.sort((v,b)=>{const S=typeof v.value=="string"?parseInt(v.value):v.value,E=typeof b.value=="string"?parseInt(b.value):b.value;return Math.abs(E)-Math.abs(S)});const g=()=>{window.open(DO(n.hash),"_blank","noopener,noreferrer")},p=EO[r.type.toLowerCase()]??null,y=()=>{p&&e.onEquipCraft&&e.onEquipCraft(p,{hash:n.hash,type:r.type,category:r.category,lvl:r.lvl})};return h.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3",children:[h.jsxs("div",{className:"flex items-start justify-between gap-3",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"text-sm font-semibold",children:["#",s+1," | Score ",Math.round(n.score)]}),h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Off ",Math.round(c.offense)," | Def ",Math.round(c.defense)," | ","Util ",Math.round(c.utility)," | SP ",Math.round(c.skillPoints),c.reqPenalty>0?` | Req -${Math.round(c.reqPenalty)}`:""]}),h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Mat Tiers: ",n.matTiers[0],"/",n.matTiers[1],r.category==="weapon"?` | Atk Spd: ${n.atkSpd}`:""]})]}),h.jsxs("div",{className:"flex shrink-0 flex-col gap-1",children:[h.jsx(Ce,{className:"px-2 py-1 text-xs",onClick:()=>e.onCopyHash(n.hash),children:e.copiedHash===n.hash?"Copied!":"Copy Hash"}),h.jsx(Ce,{variant:"ghost",className:"px-2 py-1 text-xs",onClick:g,children:"Open in Crafter"}),p?h.jsx(Ce,{className:"border border-emerald-400/40 bg-emerald-400/15 px-2 py-1 text-xs text-emerald-100 hover:bg-emerald-400/25",onClick:y,children:"Use in Build"}):null]})]}),h.jsxs("div",{className:"mt-2",children:[h.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Ingredients (3x2 grid)"}),h.jsx("div",{className:"grid grid-cols-2 gap-1",children:u.map((v,b)=>h.jsxs("div",{className:"rounded-md border border-[var(--wb-border-muted)] bg-black/10 px-2 py-1 text-xs",children:[h.jsx("div",{className:"truncate",children:v}),h.jsxs("div",{className:"text-[10px] text-[var(--wb-muted)]",children:["Eff: ",n.effectiveness[b],"%"]})]},b))})]}),d.length>0?h.jsxs("div",{className:"mt-2",children:[h.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Stats (max rolls)"}),h.jsx("div",{className:"flex flex-wrap gap-1",children:d.slice(0,12).map(({label:v,value:b})=>{const S=typeof b=="string"?b.startsWith("+"):b>0;return h.jsxs("span",{className:`rounded px-1.5 py-0.5 text-[11px] ${S?"bg-emerald-400/15 text-emerald-200":"bg-rose-400/15 text-rose-200"}`,children:[v,": ",b]},v)})})]}):null,r.category==="armor"?h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["HP: ",r.hpLow,"-",r.hp," | Dur: ",r.durability[0],"-",r.durability[1],"| Reqs: [",r.reqs.join(", "),"]"]}):null,r.category==="consumable"?h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Duration: ",r.duration[0],"-",r.duration[1],"s | Charges: ",r.charges]}):null,r.category==="weapon"?h.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["nDam: ",r.nDam," | Dur: ",r.durability[0],"-",r.durability[1],"| Reqs: [",r.reqs.join(", "),"]"]}):null]})}const O0="2.1.6.0";function kO(e){return typeof e=="string"&&/^\d+\.\d+\.\d+\.\d+$/.test(e)}function AO(e){return[...new Set(e)]}class OO{cache=new Map;async getDataset(n){const s=kO(n)?n:O0;return this.cache.has(s)||this.cache.set(s,this.loadDataset(s)),this.cache.get(s)}async loadDataset(n){const s=AO([n,O0]),i=[];for(const r of s){const c=this.buildUrls(r);for(const u of c)try{const d=await fetch(u,{cache:"force-cache"});if(!d.ok)throw new Error(`Failed to fetch ${u}: ${d.status}`);const g=await d.json();return kA(g,r)}catch(d){i.push(d instanceof Error?d.message:`Failed to fetch ${u}`)}}throw new Error(`Unable to load ability tree data. Tried versions: ${s.join(", ")}. ${i.slice(-4).join(" | ")}`)}buildUrls(n){return[(i=>{if(typeof window>"u")return i;const r=window.location.href.split("?")[0].replace(/\/[^/]*$/,"/")||window.location.origin+"/";return new URL(i,r).href})(`data/${n}/atree.json`),`./data/${n}/atree.json`,`../data/${n}/atree.json`,`data/${n}/atree.json`]}}const zO=new OO;class PO{numeric=new Map;maps=new Map;get(n){return this.maps.has(n)?this.maps.get(n):this.numeric.get(n)??0}getNum(n){const s=this.get(n);return typeof s=="number"?s:0}has(n){return this.maps.has(n)||this.numeric.has(n)}add(n,s){!Number.isFinite(s)||s===0||this.numeric.set(n,(this.numeric.get(n)??0)+s)}set(n,s){Number.isFinite(s)&&this.numeric.set(n,s)}getMap(n){let s=this.maps.get(n);return s||(s=new Map,this.maps.set(n,s)),s}addMap(n,s,i){if(!Number.isFinite(i)||i===0)return;const r=this.getMap(n);r.set(s,(r.get(s)??0)+i)}}const z0=["str","dex","int","def","agi"],IO=["e","t","w","f","a"],Pn=["n",...IO],dh=["SUPER_SLOW","VERY_SLOW","SLOW","NORMAL","FAST","VERY_FAST","SUPER_FAST"],fh=[.51,.83,1.5,2.05,2.5,3.1,4.3],BO=[1,1,1,.867,.951],LO=[1,1,.5/Fc(150),.867,.951],qO=["nDam","eDam","tDam","wDam","fDam","aDam"],UO=["Super Slow","Very Slow","Slow","Normal","Fast","Very Fast","Super Fast"],P0=["str","dex","int","def","agi","sdPct","sdRaw","mdPct","mdRaw","atkTier","damPct","damRaw","rSdPct","rSdRaw","rMdPct","rMdRaw","rDamPct","rDamRaw","critDamPct","healPct","spPct1","spPct2","spPct3","spPct4","spRaw1","spRaw2","spRaw3","spRaw4","spPct1Final","spPct2Final","spPct3Final","spPct4Final","nSdPct","eSdPct","tSdPct","wSdPct","fSdPct","aSdPct","nMdPct","eMdPct","tMdPct","wMdPct","fMdPct","aMdPct","nDamPct","eDamPct","tDamPct","wDamPct","fDamPct","aDamPct","nSdRaw","eSdRaw","tSdRaw","wSdRaw","fSdRaw","aSdRaw","nMdRaw","eMdRaw","tMdRaw","wMdRaw","fMdRaw","aMdRaw","nDamRaw","eDamRaw","tDamRaw","wDamRaw","fDamRaw","aDamRaw","nDamAddMin","nDamAddMax","eDamAddMin","eDamAddMax","tDamAddMin","tDamAddMax","wDamAddMin","wDamAddMax","fDamAddMin","fDamAddMax","aDamAddMin","aDamAddMax","rDamAddMin","rDamAddMax","damAddMin","damAddMax","hp","hpBonus","defMult"];function ft(e,n=0){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const s=Number(e);if(Number.isFinite(s))return s}return n}function Fc(e){if(e<=0)return 0;let n=e;n>=150&&(n=150);const s=.9908;return s/(1-s)*(1-Math.pow(s,n))/100}function $O(e){return Math.max(1,Math.min(106,Math.round(e||1)))*5+5}function HO(e){if(Array.isArray(e)&&e.length>=2)return[ft(e[0]),ft(e[1])];if(typeof e=="string"){const n=e.match(/(-?\d+(?:\.\d+)?)\s*-\s*(-?\d+(?:\.\d+)?)/);if(n)return[Number(n[1]),Number(n[2])]}return[0,0]}function ZO(e){if(e.category!=="weapon")return null;const n=e.legacyRaw??{},s=qO.map(r=>HO(n[r])),i=s.map(([r,c])=>r!==0||c!==0);return{atkSpd:typeof n.atkSpd=="string"&&n.atkSpd?n.atkSpd:e.atkSpd,type:e.type,tier:typeof n.tier=="string"?n.tier:e.tier,damages:s,damagePresent:i}}function FO(e){switch(e){case"bow":return{type:"replace_spell",name:"Bow Shot",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Single Shot",parts:[{name:"Single Shot",multipliers:[100,0,0,0,0,0]}]};case"relik":return{type:"replace_spell",name:"Relik Melee",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Total",parts:[{name:"Single Beam",multipliers:[33,0,0,0,0,0]},{name:"Total",hits:{"Single Beam":3}}]};case"wand":return{type:"replace_spell",name:"Wand Melee",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Melee",parts:[{name:"Melee",multipliers:[100,0,0,0,0,0]}]};default:return{type:"replace_spell",name:"Melee",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Melee",parts:[{name:"Melee",multipliers:[100,0,0,0,0,0]}]}}}function $i(e){return structuredClone(e)}function If(e,n){if(typeof n=="string"){const[s,i]=n.split("."),r=Number(s);if(!Number.isFinite(r)||!i)return 0;const c=e.get(r);return ft(c?.properties?.[i])}return ft(n)}function GO(e,n){const s=new Set(n.activeIds),i=new Map,r=c=>{const u={id:c.id,baseAbilityId:c.baseAbilityId??null,properties:$i(c.properties??{}),effects:$i(c.effects??[])};if(u.baseAbilityId!=null&&i.has(u.baseAbilityId)){const d=i.get(u.baseAbilityId);d.effects=d.effects.concat(u.effects);for(const[g,p]of Object.entries(u.properties))d.properties[g]=ft(d.properties[g])+ft(p);return}i.set(u.id,u)};for(const c of e.nodes)s.has(c.id)&&r(c);return i}function YO(e,n=[]){const s=new Map;for(const i of n)s.set(i.base_spell,$i(i));for(const[,i]of e)for(const r of i.effects){if(r.type!=="replace_spell")continue;const c=ft(r.base_spell,Number.NaN);if(!Number.isFinite(c))continue;const u=$i(r);let d=s.get(c);if(!d)d=u,s.set(c,d);else for(const[g,p]of Object.entries(u))d[g]=$i(p);for(const g of d.parts??[]){const p=g.hits;if(p)for(const[y,v]of Object.entries(p))p[y]=If(e,v)}}for(const[,i]of e)for(const r of i.effects){const c=typeof r.type=="string"?r.type:"";if(c!=="replace_spell"){if(c==="add_spell_prop"){const u=ft(r.base_spell,Number.NaN);if(!Number.isFinite(u)||!s.has(u))continue;const d=s.get(u),g=typeof r.target_part=="string"?r.target_part:null,p=typeof r.behavior=="string"?r.behavior:"merge",y=ft(r.cost);if(typeof d.cost=="number"&&(d.cost+=y),!g)continue;let v=!1;for(const b of d.parts)if(b.name===g){if("multipliers"in r&&Array.isArray(r.multipliers)&&"multipliers"in b)for(let S=0;S<r.multipliers.length;S++){const E=ft(r.multipliers[S]);Array.isArray(b.multipliers)&&(p==="overwrite"?b.multipliers[S]=E:b.multipliers[S]=(b.multipliers[S]??0)+E)}else if("power"in r&&"power"in b){const S=ft(r.power);b.power=p==="overwrite"?S:ft(b.power)+S}else if("hits"in r&&typeof r.hits=="object"&&r.hits&&"hits"in b)for(const[S,E]of Object.entries(r.hits)){const T=If(e,E);p==="overwrite"?b.hits[S]=T:b.hits[S]=(b.hits[S]??0)+T}if("hide"in r&&(b.display=!1),"ignored_mults"in r){const S=Array.isArray(r.ignored_mults)?r.ignored_mults.filter(E=>typeof E=="string"):[];"ignored_mults"in b&&Array.isArray(b.ignored_mults)?b.ignored_mults.push(...S):"multipliers"in b&&(b.ignored_mults=S)}v=!0;break}if(!v&&p==="merge"){const b=$i(r);if(b.name=g,typeof b.hits=="object"&&b.hits)for(const[S,E]of Object.entries(b.hits))b.hits[S]=If(e,E);"hide"in r&&(b.display=!1),d.parts.push(b)}typeof r.display=="string"&&(d.display=r.display)}else if(c==="convert_spell_conv"){const u=ft(r.base_spell,Number.NaN);if(!Number.isFinite(u)||!s.has(u))continue;const d=s.get(u),g=typeof r.target_part=="string"?r.target_part:"all",p=typeof r.conversion=="string"?r.conversion:"",y=Pn.indexOf(p);if(y<0)continue;const v=g==="all";for(const b of d.parts){if(!("multipliers"in b)||!v&&b.name!==g)continue;const S=b.multipliers.slice(1).reduce((T,C)=>T+ft(C),0),E=[ft(b.multipliers[0]),0,0,0,0,0];E[y]=S,b.multipliers=E}}}}return s}function VO(e,n,s){let i=!1,r=!1;for(const[,c]of e)for(const u of c.effects){const d=typeof u.type=="string"?u.type:"";if(d==="raw_stat"){if(u.toggle){i=!0;continue}const g=Array.isArray(u.bonuses)?u.bonuses:[];for(const p of g){if(!p||typeof p!="object")continue;const y=typeof p.type=="string"?p.type:"",v=typeof p.name=="string"?p.name:"",b=ft(p.value);!v||b===0||y==="stat"&&(v.startsWith("damMult.")?n.addMap("damMult",v.slice(8),b):v.startsWith("healMult.")?n.addMap("healMult",v.slice(9),b):v.startsWith("defMult.")?n.add("defMult",b):n.add(v,b))}continue}d==="stat_scaling"&&(r=!0)}i&&s.push("Some ability-tree toggle effects are not applied in Workbench spell damage yet."),r&&s.push("Some ability-tree scaling/slider effects are not applied in Workbench spell damage yet.")}function KO(e,n,s){const i=new PO;for(const g of P0)i.set(g,0);i.getMap("damMult"),i.getMap("healMult");let r=0,c=0,u=[0,0,0,0,0];for(const g of tt){const p=e.slots[g];if(p==null)continue;const y=n.itemsById.get(p);if(!y)continue;const v=y.legacyRaw??{};for(const b of P0)i.add(b,ft(v[b]));r+=ft(v.hp),c+=ft(v.hpBonus),u=[u[0]+ft(v.str),u[1]+ft(v.dex),u[2]+ft(v.int),u[3]+ft(v.def),u[4]+ft(v.agi)]}const d=s??[0,0,0,0,0];return i.set("str",u[0]+d[0]),i.set("dex",u[1]+d[1]),i.set("int",u[2]+d[2]),i.set("def",u[3]+d[3]),i.set("agi",u[4]+d[4]),i.set("hp",r+c+$O(e.level)),i}function WO(e,n,s,i,r=!1,c,u=!1,d=[]){const g=n.damages.map(A=>[...A]),p=[...n.damagePresent],y=s.map(A=>ft(A));for(let A=0;A<Pn.length;A++){const Y=c?`:${c}`:"",N=`${Pn[A]}ConvBase${Y}`;c&&e.has(N)&&(y[A]+=e.getNum(N));const P=`${Pn[A]}ConvBase`;e.has(P)&&(y[A]+=e.getNum(P))}const v=[],b=(y[0]??0)/100;if(b===0)for(let A=0;A<p.length;A++)p[A]=!1;let S=0,E=0;for(const A of g)v.push([A[0]*b,A[1]*b]),S+=A[0],E+=A[1];let T=0;for(let A=1;A<=5;A++){const Y=y[A]??0;if(Y>0){const N=Y/100;v[A][0]+=N*S,v[A][1]+=N*E,p[A]=!0,T+=N}}if(T+=b,!r){const A=dh.indexOf(n.atkSpd||"NORMAL"),Y=fh[A>=0?A:3]??fh[3];for(let N=0;N<v.length;N++)v[N][0]*=Y,v[N][1]*=Y}for(let A=0;A<Pn.length;A++){if(!p[A])continue;const Y=Pn[A];v[A][0]+=e.getNum(`${Y}DamAddMin`),v[A][1]+=e.getNum(`${Y}DamAddMax`)}const C=i?"Sd":"Md",k=[0];for(let A=0;A<z0.length;A++)k.push(Fc(e.getNum(z0[A]))*BO[A]);const R=(e.getNum(`${C.toLowerCase()}Pct`)+e.getNum("damPct"))/100;let z=0,B=0;const U=[];for(let A=0;A<Pn.length;A++){U.push([...v[A]]),z+=v[A][0],B+=v[A][1];const Y=Pn[A],N=`${Y}${C}Pct`;let P=1+(k[A]??0)+R+(e.getNum(N)+e.getNum(`${Y}DamPct`))/100;A>0&&(P+=(e.getNum(`r${C}Pct`)+e.getNum("rDamPct"))/100),v[A][0]*=P,v[A][1]*=P}const M=z-U[0][0],j=B-U[0][1],D=e.getNum(`${C.toLowerCase()}Raw`)+e.getNum("damRaw"),K=e.getNum(`r${C}Raw`)+e.getNum("rDamRaw");for(let A=0;A<v.length;A++){const Y=U[A],N=Pn[A];let P=0;p[A]&&(P+=e.getNum(`${N}${C}Raw`)+e.getNum(`${N}DamRaw`));let ee=P,oe=P;B>0&&(ee+=(z===0?Y[1]/B:Y[0]/z)*D,oe+=Y[1]/B*D),A!==0&&j>0&&(ee+=(M===0?Y[1]/j:Y[0]/M)*K,oe+=Y[1]/j*K),v[A][0]+=ee*T,v[A][1]+=oe*T}const re=u?1:1+(k[1]??0),he=e.getMap("damMult");let se=1;const Z=[1,1,1,1,1,1],le=[...y];for(const[A,Y]of he.entries())if(!(A.includes(":")&&A.split(":")[1]!==c)&&!d.includes(A))if(A.includes(";")){const N=Pn.indexOf(A.split(";")[1]);N!==-1&&(Z[N]*=1+Y/100)}else se*=1+Y/100;const Q=u?0:1+e.getNum("critDamPct")/100,L=[0,0],G=[0,0],ae=[];for(let A=0;A<Pn.length;A++){v[A][0]*=Z[A]*se,v[A][1]*=Z[A]*se,le[A]*=Z[A]*se,v[A][0]<0&&(v[A][0]=0),v[A][1]<0&&(v[A][1]=0);const Y=[v[A][0]*re,v[A][1]*re,v[A][0]*(re+Q),v[A][1]*(re+Q)];ae.push(Y),L[0]+=Y[0],L[1]+=Y[1],G[0]+=Y[2],G[1]+=Y[3]}return[L,G,ae,le]}function kS(e,n,s){const i=new Map;for(const p of e.parts)i.set(p.name,{type:"need_eval",store:p});const r="use_atkspd"in e?!!e.use_atkspd:!0,c="scaling"in e?e.scaling==="spell":!0,u=p=>{const y=i.get(p);if(!y)return null;if(y.type!=="need_eval")return y;const v=y.store,b=`${e.base_spell}.${v.name}`;let S;if("multipliers"in v){const E=Array.isArray(v.ignored_mults)?v.ignored_mults:[],T=WO(n,s,v.multipliers.map(C=>ft(C)),c,!r,b,v.use_str===!1,E);S={type:"damage",name:v.name,display:v.display!==!1,normal_total:T[0],crit_total:T[1],damage_results:T[2]}}else if("power"in v){const E=n.getNum("hp"),T=1+n.getNum("healPct")/100;S={type:"heal",name:v.name,display:v.display!==!1,heal_amount:ft(v.power)*E*T}}else{let E=null,T=[0,0],C=[0,0],k=0;for(const[R,z]of Object.entries(v.hits)){const B=u(R);B&&(E&&E!==B.type||(E=B.type,B.type==="damage"?(T=[T[0]+B.normal_total[0]*z,T[1]+B.normal_total[1]*z],C=[C[0]+B.crit_total[0]*z,C[1]+B.crit_total[1]*z]):k+=B.heal_amount*z))}E==="heal"?S={type:"heal",name:v.name,display:v.display!==!1,heal_amount:k}:S={type:"damage",name:v.name,display:v.display!==!1,normal_total:T,crit_total:C}}return i.set(v.name,S),S},d=[],g=Fc(n.getNum("dex"));for(const p of e.parts){const y=u(p.name);if(y)if(y.type==="damage"){const v=(y.normal_total[0]+y.normal_total[1])/2,b=(y.crit_total[0]+y.crit_total[1])/2;let S;if(Array.isArray(y.damage_results)){const E=y.damage_results;let T=0;for(let C=1;C<Pn.length;C++){const k=E[C];if(!k)continue;const R=(k[0]+k[1])/2;R>T&&(T=R,S=Pn[C])}}d.push({type:"damage",name:y.name,display:y.display,normalTotal:y.normal_total,critTotal:y.crit_total,averageNonCrit:v,averageCrit:b,averageTotal:(1-g)*v+g*b,dominantElement:S})}else d.push({type:"heal",name:y.name,display:y.display,healAmount:y.heal_amount,averageTotal:y.heal_amount})}return d}function XO(e){const{spells:n,stats:s,weapon:i}=e,r=n.get(0);if(!r||!Array.isArray(r.parts)||r.parts.length===0)return null;const c=kS(r,s,i);if(c.length===0)return null;const u=(r.display||"").trim(),d=u&&c.find(b=>b.name===u)||c.find(b=>b.display)||c[0];if(!d||d.type!=="damage")return null;const g=d.averageTotal??0,p=dh.indexOf(i.atkSpd||"NORMAL"),y=Math.max(0,Math.min(dh.length-1,(p>=0?p:3)+Math.round(s.getNum("atkTier")))),v=g*fh[y];return{perAttackAverage:g,dps:v,attackSpeedTier:UO[y]}}function QO(e,n){if(typeof n.cost!="number"||n.base_spell<1||n.base_spell>4)return null;const s=n.base_spell;let i=n.cost*(1-Fc(e.getNum("int"))*LO[2]);return i+=e.getNum(`spRaw${s}`),i=i*(1+e.getNum(`spPct${s}`)/100),i=Math.max(1,i*(1+e.getNum(`spPct${s}Final`)/100)),i}function JO(e){const{catalog:n,snapshot:s,abilityTreeTree:i,abilityTreeEvaluation:r}=e;if(!i||!r)return null;const c=s.slots.weapon;if(c==null)return null;const u=n.itemsById.get(c);if(!u)return null;const d=ZO(u);if(!d)return null;const g={...s.slots},p=Ic(g,n,s.level),y=KO(s,n,p.assignedByStat),v=[];p.feasible||v.push("Spell preview uses current build state, but skill-point feasibility is invalid.");const b=GO(i,r);VO(b,y,v);const S=YO(b,[FO(d.type)]),E=XO({spells:S,stats:y,weapon:d});if(S.size===0)return{melee:E,spells:[],notes:v};const T=[];for(const C of[...S.values()].sort((k,R)=>k.base_spell-R.base_spell)){if(!Array.isArray(C.parts)||C.parts.length===0)continue;const k=kS(C,y,d);if(k.length===0)continue;const R=(C.display||"").trim(),z=R&&k.find(M=>M.name===R)||k.find(M=>M.display)||k[0];if(!z)continue;const B=z.type==="heal",U=B?null:z.dominantElement??null;T.push({baseSpell:C.base_spell,name:C.name,displayPartName:z.name,averageDisplayValue:z.averageTotal??0,isHealing:B,manaCost:QO(y,C),dominantElement:U,parts:k})}return r.activeIds.length>0&&T.length===0&&v.push("No spell damage entries found in the selected ability tree nodes."),{melee:E,spells:T,notes:v}}function I0(e){return navigator.clipboard?.writeText?navigator.clipboard.writeText(e):(window.prompt("Copy text:",e),Promise.resolve())}function B0(e){return typeof e!="string"?null:e.startsWith("slot:")?{kind:"slot",slot:e.slice(5)}:e.startsWith("bin:")?{kind:"bin",category:e.slice(4)}:null}function ez(e,n,s){const i=n.itemsById.get(e);if(!i)return null;const r=i.category;if(s.selectedSlot&&fa(s.selectedSlot)===r)return s.selectedSlot;const c=tt.filter(d=>fa(d)===r);return c.find(d=>s.slots[d]==null)??c[0]??null}function tz(e){return{slots:{...e.slots},craftedSlots:{...e.craftedSlots},binsByCategory:{helmet:[...e.binsByCategory.helmet],chestplate:[...e.binsByCategory.chestplate],leggings:[...e.binsByCategory.leggings],boots:[...e.binsByCategory.boots],ring:[...e.binsByCategory.ring],bracelet:[...e.binsByCategory.bracelet],necklace:[...e.binsByCategory.necklace],weapon:[...e.binsByCategory.weapon]},locks:{...e.locks},level:e.level,characterClass:e.characterClass,selectedSlot:e.selectedSlot,comparePreview:{...e.comparePreview},legacyHash:e.legacyHash}}function nz(){const e=w.useRef(null);!e.current&&typeof window<"u"&&(e.current=Zk(window.location));const n=e.current,[s,i]=w.useState(null),[r,c]=w.useState(null),[u,d]=w.useState(n?.search??Oa),[g,p]=w.useState(null),[y,v]=w.useState(!1),[b,S]=w.useState(!1),[E,T]=w.useState(n?.mode==="autobuilder"),[C,k]=w.useState(n?.mode==="abilitytree"),[R,z]=w.useState(!1),[B,U]=w.useState(null),[M,j]=w.useState(!1),[D,K]=w.useState(null),[re,he]=w.useState(n?.abilityTree?.selectedByClass??{}),[se,Z]=w.useState(n?.abilityTree?.version??null),[le,Q]=w.useState(""),[L,G]=w.useState(0),[ae,A]=w.useState(()=>mb()),Y=w.useRef(null),N=w.useRef(null),P=w.useRef(null),ee=Yo(W=>W.hydrateSnapshot),oe=Yo(W=>W.setLegacyHash),ue=Yo(TE(W=>({slots:W.slots,craftedSlots:W.craftedSlots,binsByCategory:W.binsByCategory,locks:W.locks,level:W.level,characterClass:W.characterClass,selectedSlot:W.selectedSlot,comparePreview:W.comparePreview,legacyHash:W.legacyHash,undoStack:W.undoStack,redoStack:W.redoStack,setLevel:W.setLevel,setCharacterClass:W.setCharacterClass,setSelectedSlot:W.setSelectedSlot,setComparePreview:W.setComparePreview,pinItem:W.pinItem,removePinnedItem:W.removePinnedItem,clearCategory:W.clearCategory,clearAll:W.clearAll,equipItem:W.equipItem,equipCraftedItem:W.equipCraftedItem,clearCraftedSlot:W.clearCraftedSlot,moveSlotToBin:W.moveSlotToBin,swapSlots:W.swapSlots,assignDraggedItemToSlot:W.assignDraggedItemToSlot,assignDraggedItemToBin:W.assignDraggedItemToBin,toggleLock:W.toggleLock,undo:W.undo,redo:W.redo,hydrateSnapshot:W.hydrateSnapshot,loadCandidate:W.loadCandidate,setLegacyHash:W.setLegacyHash}))),ce=w.useMemo(()=>tz(ue),[ue]);w.useEffect(()=>{gb(ae),hT(ae)},[ae]),w.useEffect(()=>{n?.workbenchPatch&&ee(n.workbenchPatch)},[n?.workbenchPatch,ee]),w.useEffect(()=>{let W=!1;return(async()=>{try{const me=await TT.getCatalog();if(W)return;S(!1);const Ye=new DC;if(await Ye.init(me.items),W){Ye.dispose();return}if(Y.current=Ye,i(me),S(!0),n?.legacyHash){Q("Importing legacy builder hash...");try{const Ge=await Mf.decodeLegacyHash(n.legacyHash),cn={};for(const[ut,zt]of Object.entries(Ge.slots)){if(!zt)continue;const kt=me.itemIdByName.get(zt.toLowerCase());typeof kt=="number"&&(cn[ut]=kt)}const un=Yo.getState().level;ee({...n.workbenchPatch,slots:{...n.workbenchPatch?.slots??{},...cn},level:Ge.level??n.workbenchPatch?.level??un,legacyHash:Ge.legacyHash}),oe(Ge.legacyHash),Q("Imported legacy builder hash into Workbench.")}catch(Ge){console.error(Ge),Q("Failed to import legacy hash automatically. You can still open it in legacy builder.")}}}catch(me){console.error(me),c(me instanceof Error?me.message:"Failed to load item catalog")}})(),()=>{W=!0,Y.current?.dispose(),N.current&&window.clearTimeout(N.current),P.current&&window.clearTimeout(P.current)}},[n,ee,oe]),w.useEffect(()=>{if(!(!s||!b||!Y.current)){if(!rC(u)&&L===0){p(null),v(!1);return}return N.current&&window.clearTimeout(N.current),v(!0),N.current=window.setTimeout(async()=>{try{const W=await Y.current.search(u);p(W)}catch(W){console.error(W),c(W instanceof Error?W.message:"Search failed")}finally{v(!1)}},180),()=>{N.current&&window.clearTimeout(N.current)}}},[s,b,u,L]),w.useEffect(()=>{if(!C||!s||M||B||D)return;let W=!1;return j(!0),K(null),(async()=>{try{const me=await zO.getDataset(se||s.version);if(W)return;U(me),Z(me.version)}catch(me){if(W)return;console.error(me),K(me instanceof Error?me.message:"Failed to load ability tree data")}finally{W||j(!1)}})(),()=>{W=!0}},[C,B,s,se,D]),w.useEffect(()=>{if(!(typeof window>"u"))return P.current&&window.clearTimeout(P.current),P.current=window.setTimeout(()=>{try{w0({search:u,workbenchSnapshot:ce,mode:E?"autobuilder":C?"abilitytree":null,abilityTreeState:{version:se,selectedByClass:re},replace:!0})}catch(W){console.error(W)}},250),()=>{P.current&&window.clearTimeout(P.current)}},[u,ce,E,C,re,se]);const ye=w.useMemo(()=>s?ur({slots:ce.slots,level:ce.level,characterClass:ce.characterClass},s):null,[s,ce]),be=w.useMemo(()=>{if(!s)return null;const W=ce.slots.weapon;if(W==null)return null;const me=s.itemsById.get(W);return me?me.classReq??cc(me.type):null},[s,ce.slots.weapon]),ge=ce.characterClass??be,_e=w.useMemo(()=>hS(B,ge),[B,ge]),Be=w.useMemo(()=>{if(!_e||!ge)return null;const W=re[ge]??[];return Zc(_e,W,ce.level)},[re,_e,ge,ce.level]),it=w.useMemo(()=>{if(!s||!ye)return null;const W=ce.comparePreview;if(!W.itemId||!W.slot)return null;const me={...ce.slots,[W.slot]:W.itemId};return ur({slots:me,level:ce.level,characterClass:ce.characterClass},s)},[s,ye,ce]),Rt=w.useMemo(()=>s?JO({catalog:s,snapshot:ce,abilityTreeTree:_e,abilityTreeEvaluation:Be}):null,[s,ce,_e,Be]),ct=f_(Kv(Sh,{activationConstraint:{distance:6}}),Kv(bh,{coordinateGetter:SE})),Vt=W=>{const me=W.active.data.current?.dragItem;if(!me)return;const Ye=me.kind==="slot"?me.sourceSlot??null:ce.selectedSlot??null;ue.setComparePreview({itemId:me.itemId,slot:Ye})},ht=W=>{const me=W.active.data.current?.dragItem,Ye=B0(W.over?.id);!me||!Ye||Ye.kind==="slot"&&ue.setComparePreview({itemId:me.itemId,slot:Ye.slot})},Jt=W=>{const me=W.active.data.current?.dragItem,Ye=B0(W.over?.id);if(ue.setComparePreview(null),!s||!me||!Ye)return;const Ge=s.itemsById.get(me.itemId);if(Ge){if(Ye.kind==="slot"){if(fa(Ye.slot)!==Ge.category)return;ue.assignDraggedItemToSlot({targetSlot:Ye.slot,source:me.kind,itemId:me.itemId,sourceCategory:me.sourceCategory,sourceSlot:me.sourceSlot});return}if(Ye.kind==="bin"){if(Ye.category!==Ge.category)return;ue.assignDraggedItemToBin({targetCategory:Ye.category,source:me.kind,itemId:me.itemId,sourceCategory:me.sourceCategory,sourceSlot:me.sourceSlot})}}},en=W=>{if(!s)return;const me=ez(W,s,ce);me&&(ue.equipItem(me,W),ue.setSelectedSlot(me),Q(`Equipped item into ${me}.`))},Zt=W=>{if(!s)return;const me=s.itemsById.get(W);me&&ue.pinItem(me.category,me.id)},de=()=>{const W=iS(ce),me=JSON.stringify(ce,null,2);window.prompt("Copy Workbench export (JSON). URL-safe code is also in the current ?wb= param.",me),Q(`Workbench export ready. Code length: ${W.length}`)},ze=async()=>{const W=window.prompt("Paste a Workbench JSON export, Workbench URL, or legacy builder URL/hash.");if(!W)return;const me=W.trim();try{if(Mf.isSupported(me)&&s){const Ge=await Mf.decodeLegacyHash(me),cn={};for(const[un,ut]of Object.entries(Ge.slots)){const zt=s.itemIdByName.get((ut??"").toLowerCase());zt!=null&&(cn[un]=zt)}ue.hydrateSnapshot({slots:{...ce.slots,...cn},level:Ge.level??ce.level,legacyHash:Ge.legacyHash}),ue.setLegacyHash(Ge.legacyHash),Q("Imported legacy build hash.");return}if(me.startsWith("http://")||me.startsWith("https://")){const Ge=new URL(me),cn=nS(Ge),un=aS(Ge),ut=sS(Ge);d(cn),un&&ue.hydrateSnapshot(un),ut&&(he(ut.selectedByClass??{}),Z(ut.version??null)),Q("Imported Workbench URL state.");return}const Ye=JSON.parse(me);ue.hydrateSnapshot(Ye),Q("Imported Workbench JSON.")}catch(Ye){console.error(Ye),Q("Import failed. Check the pasted JSON/URL/hash.")}},De=async()=>{w0({workbenchSnapshot:ce,mode:E?"autobuilder":C?"abilitytree":null,abilityTreeState:{version:se,selectedByClass:re},replace:!0}),await I0(window.location.href),Q("Workbench link copied.")},We=async()=>{if(!ce.legacyHash){Q("No imported legacy hash is currently available.");return}const W=new URL(u0(ce.legacyHash),window.location.href).href;await I0(W),Q("Legacy builder link copied.")},je=()=>{window.open(u0(ce.legacyHash),"_blank","noopener,noreferrer")},Ft=()=>{K(null),T(!1),k(!0)},Nn=()=>{k(!1),z(!1),T(!0)},tn=()=>{T(!1),k(!1),z(!0)};return r?h.jsx("div",{className:"wb-app-shell flex min-h-screen items-center justify-center p-6",children:h.jsxs("div",{className:"wb-panel max-w-xl rounded-2xl p-6",children:[h.jsx("div",{className:"text-xl font-semibold",children:"Failed to load"}),h.jsx("div",{className:"mt-2 text-sm text-[var(--wb-muted)]",children:r})]})}):!s||!ye?h.jsx("div",{className:"wb-app-shell flex min-h-screen items-center justify-center p-6",children:h.jsxs("div",{className:"wb-panel max-w-xl rounded-2xl p-6",children:[h.jsx("div",{className:"text-xl font-semibold",children:"Loading..."}),h.jsx("div",{className:"mt-2 text-sm text-[var(--wb-muted)]",children:"Preparing item catalog, search index, and build state."})]})}):h.jsxs(gE,{sensors:ct,collisionDetection:m_,onDragStart:Vt,onDragOver:ht,onDragEnd:Jt,children:[h.jsxs("div",{className:"wb-app-shell flex min-h-screen flex-col gap-3 p-3 lg:p-4",children:[h.jsxs("header",{className:"wb-panel wb-hero rounded-2xl px-4 py-3",children:[h.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[h.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:[h.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[h.jsxs("div",{className:"wb-theme-toggle",children:[h.jsx("span",{className:"wb-theme-toggle-label",children:"Theme"}),["minimal","classic"].map(W=>h.jsx("button",{type:"button",className:"wb-theme-toggle-button","data-active":ae===W?"true":"false",onClick:()=>A(W),children:W==="minimal"?"Minimal":"Classic"},W))]}),h.jsx("span",{className:"wb-chip",children:"Legacy-compatible imports"}),Be?h.jsxs("span",{className:"wb-chip","data-tone":"success",children:["Ability Tree ",Be.apUsed,"/",Be.apCap," AP"]}):null]}),h.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Modular loadout planning studio with legacy builder compatibility."})]}),h.jsxs("button",{type:"button",className:"build-solver-logo-btn order-first flex shrink-0 cursor-pointer items-center justify-center gap-2 self-center rounded-xl px-6 py-3 text-lg font-bold tracking-tight shadow-lg sm:px-8 sm:py-4 sm:text-xl lg:order-none",onClick:Nn,title:"Open Build Solver for automated build search",children:[h.jsx(ZE,{size:28,style:{color:"var(--wb-brand-icon)"},strokeWidth:2.5}),"Build Solver"]}),h.jsxs("div",{className:"flex min-w-0 flex-1 flex-wrap items-center justify-end gap-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("label",{className:"text-xs text-[var(--wb-muted)]",children:"Class"}),h.jsxs("select",{className:"wb-select w-36",value:ce.characterClass??"",onChange:W=>ue.setCharacterClass(W.target.value||null),children:[h.jsx("option",{value:"",children:"Auto / Any"}),h.jsx("option",{value:"Warrior",children:"Warrior"}),h.jsx("option",{value:"Assassin",children:"Assassin"}),h.jsx("option",{value:"Mage",children:"Mage"}),h.jsx("option",{value:"Archer",children:"Archer"}),h.jsx("option",{value:"Shaman",children:"Shaman"})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("label",{className:"text-xs text-[var(--wb-muted)]",children:"Level"}),h.jsx("input",{className:"wb-input w-22",type:"number",min:1,max:106,value:ce.level,onChange:W=>ue.setLevel(Number(W.target.value))})]}),h.jsxs(Ce,{variant:"ghost",onClick:De,children:[h.jsx(wh,{size:13,className:"mr-1 inline"}),"Share Session"]}),h.jsxs(Ce,{variant:"ghost",onClick:Ft,children:[h.jsx(db,{size:13,className:"mr-1 inline"}),"Ability Tree"]}),h.jsx(Ce,{variant:"primary",onClick:tn,children:"Recipe Solver"})]})]}),le?h.jsx("div",{className:"mt-3 text-xs wb-text-success",children:le}):null]}),h.jsxs("main",{className:"grid min-h-0 flex-1 grid-cols-1 gap-3 xl:grid-cols-[minmax(300px,22vw)_minmax(0,1fr)_440px] 2xl:grid-cols-[320px_minmax(0,1fr)_480px]",children:[h.jsx(UR,{catalog:s,state:u,setState:d,result:g,loading:y,selectedSlot:ce.selectedSlot,onPin:Zt,onEquip:en,onHover:()=>{},onSearch:()=>G(W=>W+1)}),h.jsx(gk,{catalog:s,store:ue,onHoverItem:(W,me)=>ue.setComparePreview(W&&me?{itemId:W,slot:me}:null),onShareWorkbench:()=>{De()},onExportWorkbench:de,onImportWorkbench:()=>{ze()},searchResults:u.resultsBelowBuild?h.jsx(Zx,{catalog:s,result:g,selectedSlot:ce.selectedSlot,state:u,loading:y,onPin:Zt,onEquip:en,onHover:()=>{},embedded:!0}):void 0}),h.jsx(hk,{catalog:s,snapshot:ce,summary:ye,compareSummary:it,compareSlot:ce.comparePreview.slot,spellPreview:Rt,abilityTreeSummary:Be&&ge?{className:ge,apUsed:Be.apUsed,apCap:Be.apCap,selectedCount:Be.activeIds.length,hasErrors:Be.errors.length>0||Be.apUsed>Be.apCap}:null,actions:{onOpenAbilityTree:Ft,onCopyLegacyLink:()=>{We()},onOpenLegacyBuilder:je}})]})]}),h.jsx(jA,{open:E,onOpenChange:T,catalog:s,snapshot:ce,onLoadCandidate:W=>{ue.loadCandidate(W.slots),T(!1),Q("Loaded Build Solver candidate into Workbench.")}}),h.jsx(LA,{open:C,onOpenChange:W=>{W&&K(null),k(W)},dataset:B,loading:M,error:D,level:ce.level,selectedClass:ce.characterClass,inferredClass:be,selectionsByClass:re,onSelectionsChange:he}),h.jsx(CO,{open:R,onOpenChange:z,onEquipCraft:(W,me)=>{ue.equipCraftedItem(W,me),z(!1),Q(`Crafted ${me.type} equipped to ${W}.`)}})]})}class az extends w.Component{state={hasError:!1,error:void 0};static getDerivedStateFromError(n){return{hasError:!0,error:n}}componentDidCatch(n,s){console.error("App failed to render:",n,s)}render(){return this.state.hasError?h.jsx("div",{className:"flex min-h-screen items-center justify-center p-6",style:{background:"var(--wb-bg-bottom)",color:"var(--wb-text)"},children:h.jsxs("div",{className:"max-w-xl rounded-2xl p-6",style:{background:"var(--wb-panel)",border:"1px solid var(--wb-border)"},children:[h.jsx("div",{className:"text-xl font-semibold",children:"Something went wrong"}),h.jsxs("div",{className:"mt-2 text-sm",style:{color:"var(--wb-muted)"},children:[this.state.error?.message??"Failed to load the app."," Try refreshing the page."]})]})}):this.props.children}}gb(mb());Xw.createRoot(document.getElementById("root")).render(h.jsx(w.StrictMode,{children:h.jsx(az,{children:h.jsx(nz,{})})}));
