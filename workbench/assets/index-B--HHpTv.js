function lw(e,n){for(var l=0;l<n.length;l++){const s=n[l];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in e)){const c=Object.getOwnPropertyDescriptor(s,r);c&&Object.defineProperty(e,r,c.get?c:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function l(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(r){if(r.ep)return;r.ep=!0;const c=l(r);fetch(r.href,c)}})();function u0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Pd={exports:{}},Li={};var fv;function sw(){if(fv)return Li;fv=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function l(s,r,c){var u=null;if(c!==void 0&&(u=""+c),r.key!==void 0&&(u=""+r.key),"key"in r){c={};for(var f in r)f!=="key"&&(c[f]=r[f])}else c=r;return r=c.ref,{$$typeof:e,type:s,key:u,ref:r!==void 0?r:null,props:c}}return Li.Fragment=n,Li.jsx=l,Li.jsxs=l,Li}var hv;function iw(){return hv||(hv=1,Pd.exports=sw()),Pd.exports}var m=iw(),Bd={exports:{}},Te={};var mv;function rw(){if(mv)return Te;mv=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),x=Symbol.iterator;function S(T){return T===null||typeof T!="object"?null:(T=x&&T[x]||T["@@iterator"],typeof T=="function"?T:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,M={};function R(T,q,J){this.props=T,this.context=q,this.refs=M,this.updater=J||N}R.prototype.isReactComponent={},R.prototype.setState=function(T,q){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,q,"setState")},R.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function I(){}I.prototype=R.prototype;function O(T,q,J){this.props=T,this.context=q,this.refs=M,this.updater=J||N}var L=O.prototype=new I;L.constructor=O,_(L,R.prototype),L.isPureReactComponent=!0;var H=Array.isArray;function A(){}var D={H:null,A:null,T:null,S:null},F=Object.prototype.hasOwnProperty;function ie(T,q,J){var ae=J.ref;return{$$typeof:e,type:T,key:q,ref:ae!==void 0?ae:null,props:J}}function re(T,q){return ie(T.type,q,T.props)}function Q(T){return typeof T=="object"&&T!==null&&T.$$typeof===e}function ce(T){var q={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(J){return q[J]})}var z=/\/+/g;function ue(T,q){return typeof T=="object"&&T!==null&&T.key!=null?ce(""+T.key):q.toString(36)}function de(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(A,A):(T.status="pending",T.then(function(q){T.status==="pending"&&(T.status="fulfilled",T.value=q)},function(q){T.status==="pending"&&(T.status="rejected",T.reason=q)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function k(T,q,J,ae,fe){var ge=typeof T;(ge==="undefined"||ge==="boolean")&&(T=null);var be=!1;if(T===null)be=!0;else switch(ge){case"bigint":case"string":case"number":be=!0;break;case"object":switch(T.$$typeof){case e:case n:be=!0;break;case y:return be=T._init,k(be(T._payload),q,J,ae,fe)}}if(be)return fe=fe(T),be=ae===""?"."+ue(T,0):ae,H(fe)?(J="",be!=null&&(J=be.replace(z,"$&/")+"/"),k(fe,q,J,"",function(Ge){return Ge})):fe!=null&&(Q(fe)&&(fe=re(fe,J+(fe.key==null||T&&T.key===fe.key?"":(""+fe.key).replace(z,"$&/")+"/")+be)),q.push(fe)),1;be=0;var ze=ae===""?".":ae+":";if(H(T))for(var Oe=0;Oe<T.length;Oe++)ae=T[Oe],ge=ze+ue(ae,Oe),be+=k(ae,q,J,ge,fe);else if(Oe=S(T),typeof Oe=="function")for(T=Oe.call(T),Oe=0;!(ae=T.next()).done;)ae=ae.value,ge=ze+ue(ae,Oe++),be+=k(ae,q,J,ge,fe);else if(ge==="object"){if(typeof T.then=="function")return k(de(T),q,J,ae,fe);throw q=String(T),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return be}function G(T,q,J){if(T==null)return T;var ae=[],fe=0;return k(T,ae,"","",function(ge){return q.call(J,ge,fe++)}),ae}function le(T){if(T._status===-1){var q=T._result;q=q(),q.then(function(J){(T._status===0||T._status===-1)&&(T._status=1,T._result=J)},function(J){(T._status===0||T._status===-1)&&(T._status=2,T._result=J)}),T._status===-1&&(T._status=0,T._result=q)}if(T._status===1)return T._result.default;throw T._result}var B=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},W={map:G,forEach:function(T,q,J){G(T,function(){q.apply(this,arguments)},J)},count:function(T){var q=0;return G(T,function(){q++}),q},toArray:function(T){return G(T,function(q){return q})||[]},only:function(T){if(!Q(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return Te.Activity=v,Te.Children=W,Te.Component=R,Te.Fragment=l,Te.Profiler=r,Te.PureComponent=O,Te.StrictMode=s,Te.Suspense=g,Te.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Te.__COMPILER_RUNTIME={__proto__:null,c:function(T){return D.H.useMemoCache(T)}},Te.cache=function(T){return function(){return T.apply(null,arguments)}},Te.cacheSignal=function(){return null},Te.cloneElement=function(T,q,J){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var ae=_({},T.props),fe=T.key;if(q!=null)for(ge in q.key!==void 0&&(fe=""+q.key),q)!F.call(q,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&q.ref===void 0||(ae[ge]=q[ge]);var ge=arguments.length-2;if(ge===1)ae.children=J;else if(1<ge){for(var be=Array(ge),ze=0;ze<ge;ze++)be[ze]=arguments[ze+2];ae.children=be}return ie(T.type,fe,ae)},Te.createContext=function(T){return T={$$typeof:u,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:c,_context:T},T},Te.createElement=function(T,q,J){var ae,fe={},ge=null;if(q!=null)for(ae in q.key!==void 0&&(ge=""+q.key),q)F.call(q,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(fe[ae]=q[ae]);var be=arguments.length-2;if(be===1)fe.children=J;else if(1<be){for(var ze=Array(be),Oe=0;Oe<be;Oe++)ze[Oe]=arguments[Oe+2];fe.children=ze}if(T&&T.defaultProps)for(ae in be=T.defaultProps,be)fe[ae]===void 0&&(fe[ae]=be[ae]);return ie(T,ge,fe)},Te.createRef=function(){return{current:null}},Te.forwardRef=function(T){return{$$typeof:f,render:T}},Te.isValidElement=Q,Te.lazy=function(T){return{$$typeof:y,_payload:{_status:-1,_result:T},_init:le}},Te.memo=function(T,q){return{$$typeof:p,type:T,compare:q===void 0?null:q}},Te.startTransition=function(T){var q=D.T,J={};D.T=J;try{var ae=T(),fe=D.S;fe!==null&&fe(J,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(A,B)}catch(ge){B(ge)}finally{q!==null&&J.types!==null&&(q.types=J.types),D.T=q}},Te.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Te.use=function(T){return D.H.use(T)},Te.useActionState=function(T,q,J){return D.H.useActionState(T,q,J)},Te.useCallback=function(T,q){return D.H.useCallback(T,q)},Te.useContext=function(T){return D.H.useContext(T)},Te.useDebugValue=function(){},Te.useDeferredValue=function(T,q){return D.H.useDeferredValue(T,q)},Te.useEffect=function(T,q){return D.H.useEffect(T,q)},Te.useEffectEvent=function(T){return D.H.useEffectEvent(T)},Te.useId=function(){return D.H.useId()},Te.useImperativeHandle=function(T,q,J){return D.H.useImperativeHandle(T,q,J)},Te.useInsertionEffect=function(T,q){return D.H.useInsertionEffect(T,q)},Te.useLayoutEffect=function(T,q){return D.H.useLayoutEffect(T,q)},Te.useMemo=function(T,q){return D.H.useMemo(T,q)},Te.useOptimistic=function(T,q){return D.H.useOptimistic(T,q)},Te.useReducer=function(T,q,J){return D.H.useReducer(T,q,J)},Te.useRef=function(T){return D.H.useRef(T)},Te.useState=function(T){return D.H.useState(T)},Te.useSyncExternalStore=function(T,q,J){return D.H.useSyncExternalStore(T,q,J)},Te.useTransition=function(){return D.H.useTransition()},Te.version="19.2.4",Te}var gv;function Gf(){return gv||(gv=1,Bd.exports=rw()),Bd.exports}var w=Gf();const Ut=u0(w),d0=lw({__proto__:null,default:Ut},[w]);var Id={exports:{}},qi={},Ld={exports:{}},qd={};var pv;function ow(){return pv||(pv=1,(function(e){function n(k,G){var le=k.length;k.push(G);e:for(;0<le;){var B=le-1>>>1,W=k[B];if(0<r(W,G))k[B]=G,k[le]=W,le=B;else break e}}function l(k){return k.length===0?null:k[0]}function s(k){if(k.length===0)return null;var G=k[0],le=k.pop();if(le!==G){k[0]=le;e:for(var B=0,W=k.length,T=W>>>1;B<T;){var q=2*(B+1)-1,J=k[q],ae=q+1,fe=k[ae];if(0>r(J,le))ae<W&&0>r(fe,J)?(k[B]=fe,k[ae]=le,B=ae):(k[B]=J,k[q]=le,B=q);else if(ae<W&&0>r(fe,le))k[B]=fe,k[ae]=le,B=ae;else break e}}return G}function r(k,G){var le=k.sortIndex-G.sortIndex;return le!==0?le:k.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;e.unstable_now=function(){return c.now()}}else{var u=Date,f=u.now();e.unstable_now=function(){return u.now()-f}}var g=[],p=[],y=1,v=null,x=3,S=!1,N=!1,_=!1,M=!1,R=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function L(k){for(var G=l(p);G!==null;){if(G.callback===null)s(p);else if(G.startTime<=k)s(p),G.sortIndex=G.expirationTime,n(g,G);else break;G=l(p)}}function H(k){if(_=!1,L(k),!N)if(l(g)!==null)N=!0,A||(A=!0,ce());else{var G=l(p);G!==null&&de(H,G.startTime-k)}}var A=!1,D=-1,F=5,ie=-1;function re(){return M?!0:!(e.unstable_now()-ie<F)}function Q(){if(M=!1,A){var k=e.unstable_now();ie=k;var G=!0;try{e:{N=!1,_&&(_=!1,I(D),D=-1),S=!0;var le=x;try{t:{for(L(k),v=l(g);v!==null&&!(v.expirationTime>k&&re());){var B=v.callback;if(typeof B=="function"){v.callback=null,x=v.priorityLevel;var W=B(v.expirationTime<=k);if(k=e.unstable_now(),typeof W=="function"){v.callback=W,L(k),G=!0;break t}v===l(g)&&s(g),L(k)}else s(g);v=l(g)}if(v!==null)G=!0;else{var T=l(p);T!==null&&de(H,T.startTime-k),G=!1}}break e}finally{v=null,x=le,S=!1}G=void 0}}finally{G?ce():A=!1}}}var ce;if(typeof O=="function")ce=function(){O(Q)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,ue=z.port2;z.port1.onmessage=Q,ce=function(){ue.postMessage(null)}}else ce=function(){R(Q,0)};function de(k,G){D=R(function(){k(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_next=function(k){switch(x){case 1:case 2:case 3:var G=3;break;default:G=x}var le=x;x=G;try{return k()}finally{x=le}},e.unstable_requestPaint=function(){M=!0},e.unstable_runWithPriority=function(k,G){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var le=x;x=k;try{return G()}finally{x=le}},e.unstable_scheduleCallback=function(k,G,le){var B=e.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?B+le:B):le=B,k){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=le+W,k={id:y++,callback:G,priorityLevel:k,startTime:le,expirationTime:W,sortIndex:-1},le>B?(k.sortIndex=le,n(p,k),l(g)===null&&k===l(p)&&(_?(I(D),D=-1):_=!0,de(H,le-B))):(k.sortIndex=W,n(g,k),N||S||(N=!0,A||(A=!0,ce()))),k},e.unstable_shouldYield=re,e.unstable_wrapCallback=function(k){var G=x;return function(){var le=x;x=G;try{return k.apply(this,arguments)}finally{x=le}}}})(qd)),qd}var vv;function cw(){return vv||(vv=1,Ld.exports=ow()),Ld.exports}var Ud={exports:{}},Xt={};var yv;function uw(){if(yv)return Xt;yv=1;var e=Gf();function n(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var s={d:{f:l,r:function(){throw Error(n(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},r=Symbol.for("react.portal");function c(g,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:v==null?null:""+v,children:g,containerInfo:p,implementation:y}}var u=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Xt.createPortal=function(g,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(n(299));return c(g,p,null,y)},Xt.flushSync=function(g){var p=u.T,y=s.p;try{if(u.T=null,s.p=2,g)return g()}finally{u.T=p,s.p=y,s.d.f()}},Xt.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},Xt.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Xt.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var y=p.as,v=f(y,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,S=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:x,fetchPriority:S}):y==="script"&&s.d.X(g,{crossOrigin:v,integrity:x,fetchPriority:S,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Xt.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},Xt.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=f(y,p.crossOrigin);s.d.L(g,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Xt.preloadModule=function(g,p){if(typeof g=="string")if(p){var y=f(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},Xt.requestFormReset=function(g){s.d.r(g)},Xt.unstable_batchedUpdates=function(g,p){return g(p)},Xt.useFormState=function(g,p,y){return u.H.useFormState(g,p,y)},Xt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Xt.version="19.2.4",Xt}var bv;function f0(){if(bv)return Ud.exports;bv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Ud.exports=uw(),Ud.exports}var xv;function dw(){if(xv)return qi;xv=1;var e=cw(),n=Gf(),l=f0();function s(t){var a="https://react.dev/errors/"+t;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)a+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var a=t,i=t;if(t.alternate)for(;a.return;)a=a.return;else{t=a;do a=t,(a.flags&4098)!==0&&(i=a.return),t=a.return;while(t)}return a.tag===3?i:null}function u(t){if(t.tag===13){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function f(t){if(t.tag===31){var a=t.memoizedState;if(a===null&&(t=t.alternate,t!==null&&(a=t.memoizedState)),a!==null)return a.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(s(188))}function p(t){var a=t.alternate;if(!a){if(a=c(t),a===null)throw Error(s(188));return a!==t?null:t}for(var i=t,o=a;;){var d=i.return;if(d===null)break;var h=d.alternate;if(h===null){if(o=d.return,o!==null){i=o;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===i)return g(d),t;if(h===o)return g(d),a;h=h.sibling}throw Error(s(188))}if(i.return!==o.return)i=d,o=h;else{for(var b=!1,E=d.child;E;){if(E===i){b=!0,i=d,o=h;break}if(E===o){b=!0,o=d,i=h;break}E=E.sibling}if(!b){for(E=h.child;E;){if(E===i){b=!0,i=h,o=d;break}if(E===o){b=!0,o=h,i=d;break}E=E.sibling}if(!b)throw Error(s(189))}}if(i.alternate!==o)throw Error(s(190))}if(i.tag!==3)throw Error(s(188));return i.stateNode.current===i?t:a}function y(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t;for(t=t.child;t!==null;){if(a=y(t),a!==null)return a;t=t.sibling}return null}var v=Object.assign,x=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),O=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),F=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),re=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function ce(t){return t===null||typeof t!="object"?null:(t=Q&&t[Q]||t["@@iterator"],typeof t=="function"?t:null)}var z=Symbol.for("react.client.reference");function ue(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===z?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _:return"Fragment";case R:return"Profiler";case M:return"StrictMode";case H:return"Suspense";case A:return"SuspenseList";case ie:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case N:return"Portal";case O:return t.displayName||"Context";case I:return(t._context.displayName||"Context")+".Consumer";case L:var a=t.render;return t=t.displayName,t||(t=a.displayName||a.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return a=t.displayName||null,a!==null?a:ue(t.type)||"Memo";case F:a=t._payload,t=t._init;try{return ue(t(a))}catch{}}return null}var de=Array.isArray,k=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},B=[],W=-1;function T(t){return{current:t}}function q(t){0>W||(t.current=B[W],B[W]=null,W--)}function J(t,a){W++,B[W]=t.current,t.current=a}var ae=T(null),fe=T(null),ge=T(null),be=T(null);function ze(t,a){switch(J(ge,a),J(fe,t),J(ae,null),a.nodeType){case 9:case 11:t=(t=a.documentElement)&&(t=t.namespaceURI)?Op(t):0;break;default:if(t=a.tagName,a=a.namespaceURI)a=Op(a),t=Pp(a,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}q(ae),J(ae,t)}function Oe(){q(ae),q(fe),q(ge)}function Ge(t){t.memoizedState!==null&&J(be,t);var a=ae.current,i=Pp(a,t.type);a!==i&&(J(fe,t),J(ae,i))}function kt(t){fe.current===t&&(q(ae),q(fe)),be.current===t&&(q(be),Oi._currentValue=le)}var wt,Cn;function pt(t){if(wt===void 0)try{throw Error()}catch(i){var a=i.stack.trim().match(/\n( *(at )?)/);wt=a&&a[1]||"",Cn=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wt+t+Cn}var Kt=!1;function We(t,a){if(!t||Kt)return"";Kt=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(a){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Y){var Z=Y}Reflect.construct(t,[],ne)}else{try{ne.call()}catch(Y){Z=Y}t.call(ne.prototype)}}else{try{throw Error()}catch(Y){Z=Y}(ne=t())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Y){if(Y&&Z&&typeof Y.stack=="string")return[Y.stack,Z.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=o.DetermineComponentFrameRoot(),b=h[0],E=h[1];if(b&&E){var j=b.split(`
`),$=E.split(`
`);for(d=o=0;o<j.length&&!j[o].includes("DetermineComponentFrameRoot");)o++;for(;d<$.length&&!$[d].includes("DetermineComponentFrameRoot");)d++;if(o===j.length||d===$.length)for(o=j.length-1,d=$.length-1;1<=o&&0<=d&&j[o]!==$[d];)d--;for(;1<=o&&0<=d;o--,d--)if(j[o]!==$[d]){if(o!==1||d!==1)do if(o--,d--,0>d||j[o]!==$[d]){var K=`
`+j[o].replace(" at new "," at ");return t.displayName&&K.includes("<anonymous>")&&(K=K.replace("<anonymous>",t.displayName)),K}while(1<=o&&0<=d);break}}}finally{Kt=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?pt(i):""}function Qt(t,a){switch(t.tag){case 26:case 27:case 5:return pt(t.type);case 16:return pt("Lazy");case 13:return t.child!==a&&a!==null?pt("Suspense Fallback"):pt("Suspense");case 19:return pt("SuspenseList");case 0:case 15:return We(t.type,!1);case 11:return We(t.type.render,!1);case 1:return We(t.type,!0);case 31:return pt("Activity");default:return""}}function oe(t){try{var a="",i=null;do a+=Qt(t,i),i=t,t=t.return;while(t);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Pe=Object.prototype.hasOwnProperty,V=e.unstable_scheduleCallback,se=e.unstable_cancelCallback,we=e.unstable_shouldYield,Ee=e.unstable_requestPaint,ke=e.unstable_now,sn=e.unstable_getCurrentPriorityLevel,Jt=e.unstable_ImmediatePriority,zt=e.unstable_UserBlockingPriority,bn=e.unstable_NormalPriority,da=e.unstable_LowPriority,yl=e.unstable_IdlePriority,Rn=e.log,bl=e.unstable_setDisableYieldValue,aa=null,Ze=null;function rn(t){if(typeof Rn=="function"&&bl(t),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(aa,t)}catch{}}var X=Math.clz32?Math.clz32:Xe,he=Math.log,Ae=Math.LN2;function Xe(t){return t>>>=0,t===0?32:31-(he(t)/Ae|0)|0}var _t=256,en=262144,Ne=4194304;function Ce(t){var a=t&42;if(a!==0)return a;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ve(t,a,i){var o=t.pendingLanes;if(o===0)return 0;var d=0,h=t.suspendedLanes,b=t.pingedLanes;t=t.warmLanes;var E=o&134217727;return E!==0?(o=E&~h,o!==0?d=Ce(o):(b&=E,b!==0?d=Ce(b):i||(i=E&~t,i!==0&&(d=Ce(i))))):(E=o&~h,E!==0?d=Ce(E):b!==0?d=Ce(b):i||(i=o&~t,i!==0&&(d=Ce(i)))),d===0?0:a!==0&&a!==d&&(a&h)===0&&(h=d&-d,i=a&-a,h>=i||h===32&&(i&4194048)!==0)?a:d}function it(t,a){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&a)===0}function _e(t,a){switch(t){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Mt(){var t=Ne;return Ne<<=1,(Ne&62914560)===0&&(Ne=4194304),t}function Et(t){for(var a=[],i=0;31>i;i++)a.push(t);return a}function xe(t,a){t.pendingLanes|=a,a!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function nt(t,a,i,o,d,h){var b=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var E=t.entanglements,j=t.expirationTimes,$=t.hiddenUpdates;for(i=b&~i;0<i;){var K=31-X(i),ne=1<<K;E[K]=0,j[K]=-1;var Z=$[K];if(Z!==null)for($[K]=null,K=0;K<Z.length;K++){var Y=Z[K];Y!==null&&(Y.lane&=-536870913)}i&=~ne}o!==0&&Bt(t,o,0),h!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=h&~(b&~a))}function Bt(t,a,i){t.pendingLanes|=a,t.suspendedLanes&=~a;var o=31-X(a);t.entangledLanes|=a,t.entanglements[o]=t.entanglements[o]|1073741824|i&261930}function Wt(t,a){var i=t.entangledLanes|=a;for(t=t.entanglements;i;){var o=31-X(i),d=1<<o;d&a|t[o]&a&&(t[o]|=a),i&=~d}}function tn(t,a){var i=a&-a;return i=(i&42)!==0?1:An(i),(i&(t.suspendedLanes|a))!==0?0:i}function An(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function kn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function on(){var t=G.p;return t!==0?t:(t=window.event,t===void 0?32:sv(t.type))}function Vn(t,a){var i=G.p;try{return G.p=t,a()}finally{G.p=i}}var zn=Math.random().toString(36).slice(2),Ht="__reactFiber$"+zn,cn="__reactProps$"+zn,Fl="__reactContainer$"+zn,Mc="__reactEvents$"+zn,Gx="__reactListeners$"+zn,Vx="__reactHandles$"+zn,wh="__reactResources$"+zn,Ws="__reactMarker$"+zn;function Dc(t){delete t[Ht],delete t[cn],delete t[Mc],delete t[Gx],delete t[Vx]}function Yl(t){var a=t[Ht];if(a)return a;for(var i=t.parentNode;i;){if(a=i[Fl]||i[Ht]){if(i=a.alternate,a.child!==null||i!==null&&i.child!==null)for(t=Hp(t);t!==null;){if(i=t[Ht])return i;t=Hp(t)}return a}t=i,i=t.parentNode}return null}function Gl(t){if(t=t[Ht]||t[Fl]){var a=t.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return t}return null}function Xs(t){var a=t.tag;if(a===5||a===26||a===27||a===6)return t.stateNode;throw Error(s(33))}function Vl(t){var a=t[wh];return a||(a=t[wh]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function It(t){t[Ws]=!0}var _h=new Set,Eh={};function xl(t,a){Kl(t,a),Kl(t+"Capture",a)}function Kl(t,a){for(Eh[t]=a,t=0;t<a.length;t++)_h.add(a[t])}var Kx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nh={},Th={};function Wx(t){return Pe.call(Th,t)?!0:Pe.call(Nh,t)?!1:Kx.test(t)?Th[t]=!0:(Nh[t]=!0,!1)}function cr(t,a,i){if(Wx(a))if(i===null)t.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(a);return;case"boolean":var o=a.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(a);return}}t.setAttribute(a,""+i)}}function ur(t,a,i){if(i===null)t.removeAttribute(a);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttribute(a,""+i)}}function fa(t,a,i,o){if(o===null)t.removeAttribute(i);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(a,i,""+o)}}function On(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Mh(t){var a=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function Xx(t,a,i){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,a);if(!t.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,h=o.set;return Object.defineProperty(t,a,{configurable:!0,get:function(){return d.call(this)},set:function(b){i=""+b,h.call(this,b)}}),Object.defineProperty(t,a,{enumerable:o.enumerable}),{getValue:function(){return i},setValue:function(b){i=""+b},stopTracking:function(){t._valueTracker=null,delete t[a]}}}}function jc(t){if(!t._valueTracker){var a=Mh(t)?"checked":"value";t._valueTracker=Xx(t,a,""+t[a])}}function Dh(t){if(!t)return!1;var a=t._valueTracker;if(!a)return!0;var i=a.getValue(),o="";return t&&(o=Mh(t)?t.checked?"true":"false":t.value),t=o,t!==i?(a.setValue(t),!0):!1}function dr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Qx=/[\n"\\]/g;function Pn(t){return t.replace(Qx,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function Cc(t,a,i,o,d,h,b,E){t.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.type=b:t.removeAttribute("type"),a!=null?b==="number"?(a===0&&t.value===""||t.value!=a)&&(t.value=""+On(a)):t.value!==""+On(a)&&(t.value=""+On(a)):b!=="submit"&&b!=="reset"||t.removeAttribute("value"),a!=null?Rc(t,b,On(a)):i!=null?Rc(t,b,On(i)):o!=null&&t.removeAttribute("value"),d==null&&h!=null&&(t.defaultChecked=!!h),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.name=""+On(E):t.removeAttribute("name")}function jh(t,a,i,o,d,h,b,E){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(t.type=h),a!=null||i!=null){if(!(h!=="submit"&&h!=="reset"||a!=null)){jc(t);return}i=i!=null?""+On(i):"",a=a!=null?""+On(a):i,E||a===t.value||(t.value=a),t.defaultValue=a}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=E?t.checked:!!o,t.defaultChecked=!!o,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.name=b),jc(t)}function Rc(t,a,i){a==="number"&&dr(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function Wl(t,a,i,o){if(t=t.options,a){a={};for(var d=0;d<i.length;d++)a["$"+i[d]]=!0;for(i=0;i<t.length;i++)d=a.hasOwnProperty("$"+t[i].value),t[i].selected!==d&&(t[i].selected=d),d&&o&&(t[i].defaultSelected=!0)}else{for(i=""+On(i),a=null,d=0;d<t.length;d++){if(t[d].value===i){t[d].selected=!0,o&&(t[d].defaultSelected=!0);return}a!==null||t[d].disabled||(a=t[d])}a!==null&&(a.selected=!0)}}function Ch(t,a,i){if(a!=null&&(a=""+On(a),a!==t.value&&(t.value=a),i==null)){t.defaultValue!==a&&(t.defaultValue=a);return}t.defaultValue=i!=null?""+On(i):""}function Rh(t,a,i,o){if(a==null){if(o!=null){if(i!=null)throw Error(s(92));if(de(o)){if(1<o.length)throw Error(s(93));o=o[0]}i=o}i==null&&(i=""),a=i}i=On(a),t.defaultValue=i,o=t.textContent,o===i&&o!==""&&o!==null&&(t.value=o),jc(t)}function Xl(t,a){if(a){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=a;return}}t.textContent=a}var Jx=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ah(t,a,i){var o=a.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?o?t.setProperty(a,""):a==="float"?t.cssFloat="":t[a]="":o?t.setProperty(a,i):typeof i!="number"||i===0||Jx.has(a)?a==="float"?t.cssFloat=i:t[a]=(""+i).trim():t[a]=i+"px"}function kh(t,a,i){if(a!=null&&typeof a!="object")throw Error(s(62));if(t=t.style,i!=null){for(var o in i)!i.hasOwnProperty(o)||a!=null&&a.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var d in a)o=a[d],a.hasOwnProperty(d)&&i[d]!==o&&Ah(t,d,o)}else for(var h in a)a.hasOwnProperty(h)&&Ah(t,h,a[h])}function Ac(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),tS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function fr(t){return tS.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ha(){}var kc=null;function zc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ql=null,Jl=null;function zh(t){var a=Gl(t);if(a&&(t=a.stateNode)){var i=t[cn]||null;e:switch(t=a.stateNode,a.type){case"input":if(Cc(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),a=i.name,i.type==="radio"&&a!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Pn(""+a)+'"][type="radio"]'),a=0;a<i.length;a++){var o=i[a];if(o!==t&&o.form===t.form){var d=o[cn]||null;if(!d)throw Error(s(90));Cc(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(a=0;a<i.length;a++)o=i[a],o.form===t.form&&Dh(o)}break e;case"textarea":Ch(t,i.value,i.defaultValue);break e;case"select":a=i.value,a!=null&&Wl(t,!!i.multiple,a,!1)}}}var Oc=!1;function Oh(t,a,i){if(Oc)return t(a,i);Oc=!0;try{var o=t(a);return o}finally{if(Oc=!1,(Ql!==null||Jl!==null)&&(Jr(),Ql&&(a=Ql,t=Jl,Jl=Ql=null,zh(a),t)))for(a=0;a<t.length;a++)zh(t[a])}}function Qs(t,a){var i=t.stateNode;if(i===null)return null;var o=i[cn]||null;if(o===null)return null;i=o[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(s(231,a,typeof i));return i}var ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pc=!1;if(ma)try{var Js={};Object.defineProperty(Js,"passive",{get:function(){Pc=!0}}),window.addEventListener("test",Js,Js),window.removeEventListener("test",Js,Js)}catch{Pc=!1}var Oa=null,Bc=null,hr=null;function Ph(){if(hr)return hr;var t,a=Bc,i=a.length,o,d="value"in Oa?Oa.value:Oa.textContent,h=d.length;for(t=0;t<i&&a[t]===d[t];t++);var b=i-t;for(o=1;o<=b&&a[i-o]===d[h-o];o++);return hr=d.slice(t,1<o?1-o:void 0)}function mr(t){var a=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&a===13&&(t=13)):t=a,t===10&&(t=13),32<=t||t===13?t:0}function gr(){return!0}function Bh(){return!1}function un(t){function a(i,o,d,h,b){this._reactName=i,this._targetInst=d,this.type=o,this.nativeEvent=h,this.target=b,this.currentTarget=null;for(var E in t)t.hasOwnProperty(E)&&(i=t[E],this[E]=i?i(h):h[E]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?gr:Bh,this.isPropagationStopped=Bh,this}return v(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=gr)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=gr)},persist:function(){},isPersistent:gr}),a}var Sl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pr=un(Sl),ei=v({},Sl,{view:0,detail:0}),nS=un(ei),Ic,Lc,ti,vr=v({},ei,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ti&&(ti&&t.type==="mousemove"?(Ic=t.screenX-ti.screenX,Lc=t.screenY-ti.screenY):Lc=Ic=0,ti=t),Ic)},movementY:function(t){return"movementY"in t?t.movementY:Lc}}),Ih=un(vr),aS=v({},vr,{dataTransfer:0}),lS=un(aS),sS=v({},ei,{relatedTarget:0}),qc=un(sS),iS=v({},Sl,{animationName:0,elapsedTime:0,pseudoElement:0}),rS=un(iS),oS=v({},Sl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),cS=un(oS),uS=v({},Sl,{data:0}),Lh=un(uS),dS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mS(t){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(t):(t=hS[t])?!!a[t]:!1}function Uc(){return mS}var gS=v({},ei,{key:function(t){if(t.key){var a=dS[t.key]||t.key;if(a!=="Unidentified")return a}return t.type==="keypress"?(t=mr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?fS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uc,charCode:function(t){return t.type==="keypress"?mr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pS=un(gS),vS=v({},vr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qh=un(vS),yS=v({},ei,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uc}),bS=un(yS),xS=v({},Sl,{propertyName:0,elapsedTime:0,pseudoElement:0}),SS=un(xS),wS=v({},vr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_S=un(wS),ES=v({},Sl,{newState:0,oldState:0}),NS=un(ES),TS=[9,13,27,32],$c=ma&&"CompositionEvent"in window,ni=null;ma&&"documentMode"in document&&(ni=document.documentMode);var MS=ma&&"TextEvent"in window&&!ni,Uh=ma&&(!$c||ni&&8<ni&&11>=ni),$h=" ",Hh=!1;function Zh(t,a){switch(t){case"keyup":return TS.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fh(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var es=!1;function DS(t,a){switch(t){case"compositionend":return Fh(a);case"keypress":return a.which!==32?null:(Hh=!0,$h);case"textInput":return t=a.data,t===$h&&Hh?null:t;default:return null}}function jS(t,a){if(es)return t==="compositionend"||!$c&&Zh(t,a)?(t=Ph(),hr=Bc=Oa=null,es=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Uh&&a.locale!=="ko"?null:a.data;default:return null}}var CS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yh(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a==="input"?!!CS[t.type]:a==="textarea"}function Gh(t,a,i,o){Ql?Jl?Jl.push(o):Jl=[o]:Ql=o,a=io(a,"onChange"),0<a.length&&(i=new pr("onChange","change",null,i,o),t.push({event:i,listeners:a}))}var ai=null,li=null;function RS(t){jp(t,0)}function yr(t){var a=Xs(t);if(Dh(a))return t}function Vh(t,a){if(t==="change")return a}var Kh=!1;if(ma){var Hc;if(ma){var Zc="oninput"in document;if(!Zc){var Wh=document.createElement("div");Wh.setAttribute("oninput","return;"),Zc=typeof Wh.oninput=="function"}Hc=Zc}else Hc=!1;Kh=Hc&&(!document.documentMode||9<document.documentMode)}function Xh(){ai&&(ai.detachEvent("onpropertychange",Qh),li=ai=null)}function Qh(t){if(t.propertyName==="value"&&yr(li)){var a=[];Gh(a,li,t,zc(t)),Oh(RS,a)}}function AS(t,a,i){t==="focusin"?(Xh(),ai=a,li=i,ai.attachEvent("onpropertychange",Qh)):t==="focusout"&&Xh()}function kS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yr(li)}function zS(t,a){if(t==="click")return yr(a)}function OS(t,a){if(t==="input"||t==="change")return yr(a)}function PS(t,a){return t===a&&(t!==0||1/t===1/a)||t!==t&&a!==a}var xn=typeof Object.is=="function"?Object.is:PS;function si(t,a){if(xn(t,a))return!0;if(typeof t!="object"||t===null||typeof a!="object"||a===null)return!1;var i=Object.keys(t),o=Object.keys(a);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var d=i[o];if(!Pe.call(a,d)||!xn(t[d],a[d]))return!1}return!0}function Jh(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function em(t,a){var i=Jh(t);t=0;for(var o;i;){if(i.nodeType===3){if(o=t+i.textContent.length,t<=a&&o>=a)return{node:i,offset:a-t};t=o}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Jh(i)}}function tm(t,a){return t&&a?t===a?!0:t&&t.nodeType===3?!1:a&&a.nodeType===3?tm(t,a.parentNode):"contains"in t?t.contains(a):t.compareDocumentPosition?!!(t.compareDocumentPosition(a)&16):!1:!1}function nm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var a=dr(t.document);a instanceof t.HTMLIFrameElement;){try{var i=typeof a.contentWindow.location.href=="string"}catch{i=!1}if(i)t=a.contentWindow;else break;a=dr(t.document)}return a}function Fc(t){var a=t&&t.nodeName&&t.nodeName.toLowerCase();return a&&(a==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||a==="textarea"||t.contentEditable==="true")}var BS=ma&&"documentMode"in document&&11>=document.documentMode,ts=null,Yc=null,ii=null,Gc=!1;function am(t,a,i){var o=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Gc||ts==null||ts!==dr(o)||(o=ts,"selectionStart"in o&&Fc(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ii&&si(ii,o)||(ii=o,o=io(Yc,"onSelect"),0<o.length&&(a=new pr("onSelect","select",null,a,i),t.push({event:a,listeners:o}),a.target=ts)))}function wl(t,a){var i={};return i[t.toLowerCase()]=a.toLowerCase(),i["Webkit"+t]="webkit"+a,i["Moz"+t]="moz"+a,i}var ns={animationend:wl("Animation","AnimationEnd"),animationiteration:wl("Animation","AnimationIteration"),animationstart:wl("Animation","AnimationStart"),transitionrun:wl("Transition","TransitionRun"),transitionstart:wl("Transition","TransitionStart"),transitioncancel:wl("Transition","TransitionCancel"),transitionend:wl("Transition","TransitionEnd")},Vc={},lm={};ma&&(lm=document.createElement("div").style,"AnimationEvent"in window||(delete ns.animationend.animation,delete ns.animationiteration.animation,delete ns.animationstart.animation),"TransitionEvent"in window||delete ns.transitionend.transition);function _l(t){if(Vc[t])return Vc[t];if(!ns[t])return t;var a=ns[t],i;for(i in a)if(a.hasOwnProperty(i)&&i in lm)return Vc[t]=a[i];return t}var sm=_l("animationend"),im=_l("animationiteration"),rm=_l("animationstart"),IS=_l("transitionrun"),LS=_l("transitionstart"),qS=_l("transitioncancel"),om=_l("transitionend"),cm=new Map,Kc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Kc.push("scrollEnd");function Kn(t,a){cm.set(t,a),xl(a,[t])}var br=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Bn=[],as=0,Wc=0;function xr(){for(var t=as,a=Wc=as=0;a<t;){var i=Bn[a];Bn[a++]=null;var o=Bn[a];Bn[a++]=null;var d=Bn[a];Bn[a++]=null;var h=Bn[a];if(Bn[a++]=null,o!==null&&d!==null){var b=o.pending;b===null?d.next=d:(d.next=b.next,b.next=d),o.pending=d}h!==0&&um(i,d,h)}}function Sr(t,a,i,o){Bn[as++]=t,Bn[as++]=a,Bn[as++]=i,Bn[as++]=o,Wc|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function Xc(t,a,i,o){return Sr(t,a,i,o),wr(t)}function El(t,a){return Sr(t,null,null,a),wr(t)}function um(t,a,i){t.lanes|=i;var o=t.alternate;o!==null&&(o.lanes|=i);for(var d=!1,h=t.return;h!==null;)h.childLanes|=i,o=h.alternate,o!==null&&(o.childLanes|=i),h.tag===22&&(t=h.stateNode,t===null||t._visibility&1||(d=!0)),t=h,h=h.return;return t.tag===3?(h=t.stateNode,d&&a!==null&&(d=31-X(i),t=h.hiddenUpdates,o=t[d],o===null?t[d]=[a]:o.push(a),a.lane=i|536870912),h):null}function wr(t){if(50<Di)throw Di=0,id=null,Error(s(185));for(var a=t.return;a!==null;)t=a,a=t.return;return t.tag===3?t.stateNode:null}var ls={};function US(t,a,i,o){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(t,a,i,o){return new US(t,a,i,o)}function Qc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ga(t,a){var i=t.alternate;return i===null?(i=Sn(t.tag,a,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=a,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,a=t.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function dm(t,a){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=a,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,a=i.dependencies,t.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),t}function _r(t,a,i,o,d,h){var b=0;if(o=t,typeof t=="function")Qc(t)&&(b=1);else if(typeof t=="string")b=Y1(t,i,ae.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case ie:return t=Sn(31,i,a,d),t.elementType=ie,t.lanes=h,t;case _:return Nl(i.children,d,h,a);case M:b=8,d|=24;break;case R:return t=Sn(12,i,a,d|2),t.elementType=R,t.lanes=h,t;case H:return t=Sn(13,i,a,d),t.elementType=H,t.lanes=h,t;case A:return t=Sn(19,i,a,d),t.elementType=A,t.lanes=h,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case O:b=10;break e;case I:b=9;break e;case L:b=11;break e;case D:b=14;break e;case F:b=16,o=null;break e}b=29,i=Error(s(130,t===null?"null":typeof t,"")),o=null}return a=Sn(b,i,a,d),a.elementType=t,a.type=o,a.lanes=h,a}function Nl(t,a,i,o){return t=Sn(7,t,o,a),t.lanes=i,t}function Jc(t,a,i){return t=Sn(6,t,null,a),t.lanes=i,t}function fm(t){var a=Sn(18,null,null,0);return a.stateNode=t,a}function eu(t,a,i){return a=Sn(4,t.children!==null?t.children:[],t.key,a),a.lanes=i,a.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},a}var hm=new WeakMap;function In(t,a){if(typeof t=="object"&&t!==null){var i=hm.get(t);return i!==void 0?i:(a={value:t,source:a,stack:oe(a)},hm.set(t,a),a)}return{value:t,source:a,stack:oe(a)}}var ss=[],is=0,Er=null,ri=0,Ln=[],qn=0,Pa=null,la=1,sa="";function pa(t,a){ss[is++]=ri,ss[is++]=Er,Er=t,ri=a}function mm(t,a,i){Ln[qn++]=la,Ln[qn++]=sa,Ln[qn++]=Pa,Pa=t;var o=la;t=sa;var d=32-X(o)-1;o&=~(1<<d),i+=1;var h=32-X(a)+d;if(30<h){var b=d-d%5;h=(o&(1<<b)-1).toString(32),o>>=b,d-=b,la=1<<32-X(a)+d|i<<d|o,sa=h+t}else la=1<<h|i<<d|o,sa=t}function tu(t){t.return!==null&&(pa(t,1),mm(t,1,0))}function nu(t){for(;t===Er;)Er=ss[--is],ss[is]=null,ri=ss[--is],ss[is]=null;for(;t===Pa;)Pa=Ln[--qn],Ln[qn]=null,sa=Ln[--qn],Ln[qn]=null,la=Ln[--qn],Ln[qn]=null}function gm(t,a){Ln[qn++]=la,Ln[qn++]=sa,Ln[qn++]=Pa,la=a.id,sa=a.overflow,Pa=t}var Zt=null,ut=null,$e=!1,Ba=null,Un=!1,au=Error(s(519));function Ia(t){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw oi(In(a,t)),au}function pm(t){var a=t.stateNode,i=t.type,o=t.memoizedProps;switch(a[Ht]=t,a[cn]=o,i){case"dialog":Ie("cancel",a),Ie("close",a);break;case"iframe":case"object":case"embed":Ie("load",a);break;case"video":case"audio":for(i=0;i<Ci.length;i++)Ie(Ci[i],a);break;case"source":Ie("error",a);break;case"img":case"image":case"link":Ie("error",a),Ie("load",a);break;case"details":Ie("toggle",a);break;case"input":Ie("invalid",a),jh(a,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ie("invalid",a);break;case"textarea":Ie("invalid",a),Rh(a,o.value,o.defaultValue,o.children)}i=o.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||a.textContent===""+i||o.suppressHydrationWarning===!0||kp(a.textContent,i)?(o.popover!=null&&(Ie("beforetoggle",a),Ie("toggle",a)),o.onScroll!=null&&Ie("scroll",a),o.onScrollEnd!=null&&Ie("scrollend",a),o.onClick!=null&&(a.onclick=ha),a=!0):a=!1,a||Ia(t,!0)}function vm(t){for(Zt=t.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:Un=!1;return;case 27:case 3:Un=!0;return;default:Zt=Zt.return}}function rs(t){if(t!==Zt)return!1;if(!$e)return vm(t),$e=!0,!1;var a=t.tag,i;if((i=a!==3&&a!==27)&&((i=a===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||Sd(t.type,t.memoizedProps)),i=!i),i&&ut&&Ia(t),vm(t),a===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));ut=$p(t)}else if(a===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));ut=$p(t)}else a===27?(a=ut,Qa(t.type)?(t=Td,Td=null,ut=t):ut=a):ut=Zt?Hn(t.stateNode.nextSibling):null;return!0}function Tl(){ut=Zt=null,$e=!1}function lu(){var t=Ba;return t!==null&&(mn===null?mn=t:mn.push.apply(mn,t),Ba=null),t}function oi(t){Ba===null?Ba=[t]:Ba.push(t)}var su=T(null),Ml=null,va=null;function La(t,a,i){J(su,a._currentValue),a._currentValue=i}function ya(t){t._currentValue=su.current,q(su)}function iu(t,a,i){for(;t!==null;){var o=t.alternate;if((t.childLanes&a)!==a?(t.childLanes|=a,o!==null&&(o.childLanes|=a)):o!==null&&(o.childLanes&a)!==a&&(o.childLanes|=a),t===i)break;t=t.return}}function ru(t,a,i,o){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var h=d.dependencies;if(h!==null){var b=d.child;h=h.firstContext;e:for(;h!==null;){var E=h;h=d;for(var j=0;j<a.length;j++)if(E.context===a[j]){h.lanes|=i,E=h.alternate,E!==null&&(E.lanes|=i),iu(h.return,i,t),o||(b=null);break e}h=E.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(s(341));b.lanes|=i,h=b.alternate,h!==null&&(h.lanes|=i),iu(b,i,t),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===t){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function os(t,a,i,o){t=null;for(var d=a,h=!1;d!==null;){if(!h){if((d.flags&524288)!==0)h=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(s(387));if(b=b.memoizedProps,b!==null){var E=d.type;xn(d.pendingProps.value,b.value)||(t!==null?t.push(E):t=[E])}}else if(d===be.current){if(b=d.alternate,b===null)throw Error(s(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Oi):t=[Oi])}d=d.return}t!==null&&ru(a,t,i,o),a.flags|=262144}function Nr(t){for(t=t.firstContext;t!==null;){if(!xn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Dl(t){Ml=t,va=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ft(t){return ym(Ml,t)}function Tr(t,a){return Ml===null&&Dl(t),ym(t,a)}function ym(t,a){var i=a._currentValue;if(a={context:a,memoizedValue:i,next:null},va===null){if(t===null)throw Error(s(308));va=a,t.dependencies={lanes:0,firstContext:a},t.flags|=524288}else va=va.next=a;return i}var $S=typeof AbortController<"u"?AbortController:function(){var t=[],a=this.signal={aborted:!1,addEventListener:function(i,o){t.push(o)}};this.abort=function(){a.aborted=!0,t.forEach(function(i){return i()})}},HS=e.unstable_scheduleCallback,ZS=e.unstable_NormalPriority,Dt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ou(){return{controller:new $S,data:new Map,refCount:0}}function ci(t){t.refCount--,t.refCount===0&&HS(ZS,function(){t.controller.abort()})}var ui=null,cu=0,cs=0,us=null;function FS(t,a){if(ui===null){var i=ui=[];cu=0,cs=fd(),us={status:"pending",value:void 0,then:function(o){i.push(o)}}}return cu++,a.then(bm,bm),a}function bm(){if(--cu===0&&ui!==null){us!==null&&(us.status="fulfilled");var t=ui;ui=null,cs=0,us=null;for(var a=0;a<t.length;a++)(0,t[a])()}}function YS(t,a){var i=[],o={status:"pending",value:null,reason:null,then:function(d){i.push(d)}};return t.then(function(){o.status="fulfilled",o.value=a;for(var d=0;d<i.length;d++)(0,i[d])(a)},function(d){for(o.status="rejected",o.reason=d,d=0;d<i.length;d++)(0,i[d])(void 0)}),o}var xm=k.S;k.S=function(t,a){ap=ke(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&FS(t,a),xm!==null&&xm(t,a)};var jl=T(null);function uu(){var t=jl.current;return t!==null?t:rt.pooledCache}function Mr(t,a){a===null?J(jl,jl.current):J(jl,a.pool)}function Sm(){var t=uu();return t===null?null:{parent:Dt._currentValue,pool:t}}var ds=Error(s(460)),du=Error(s(474)),Dr=Error(s(542)),jr={then:function(){}};function wm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function _m(t,a,i){switch(i=t[i],i===void 0?t.push(a):i!==a&&(a.then(ha,ha),a=i),a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Nm(t),t;default:if(typeof a.status=="string")a.then(ha,ha);else{if(t=rt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=a,t.status="pending",t.then(function(o){if(a.status==="pending"){var d=a;d.status="fulfilled",d.value=o}},function(o){if(a.status==="pending"){var d=a;d.status="rejected",d.reason=o}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw t=a.reason,Nm(t),t}throw Rl=a,ds}}function Cl(t){try{var a=t._init;return a(t._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(Rl=i,ds):i}}var Rl=null;function Em(){if(Rl===null)throw Error(s(459));var t=Rl;return Rl=null,t}function Nm(t){if(t===ds||t===Dr)throw Error(s(483))}var fs=null,di=0;function Cr(t){var a=di;return di+=1,fs===null&&(fs=[]),_m(fs,t,a)}function fi(t,a){a=a.props.ref,t.ref=a!==void 0?a:null}function Rr(t,a){throw a.$$typeof===x?Error(s(525)):(t=Object.prototype.toString.call(a),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":t)))}function Tm(t){function a(P,C){if(t){var U=P.deletions;U===null?(P.deletions=[C],P.flags|=16):U.push(C)}}function i(P,C){if(!t)return null;for(;C!==null;)a(P,C),C=C.sibling;return null}function o(P){for(var C=new Map;P!==null;)P.key!==null?C.set(P.key,P):C.set(P.index,P),P=P.sibling;return C}function d(P,C){return P=ga(P,C),P.index=0,P.sibling=null,P}function h(P,C,U){return P.index=U,t?(U=P.alternate,U!==null?(U=U.index,U<C?(P.flags|=67108866,C):U):(P.flags|=67108866,C)):(P.flags|=1048576,C)}function b(P){return t&&P.alternate===null&&(P.flags|=67108866),P}function E(P,C,U,ee){return C===null||C.tag!==6?(C=Jc(U,P.mode,ee),C.return=P,C):(C=d(C,U),C.return=P,C)}function j(P,C,U,ee){var ve=U.type;return ve===_?K(P,C,U.props.children,ee,U.key):C!==null&&(C.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===F&&Cl(ve)===C.type)?(C=d(C,U.props),fi(C,U),C.return=P,C):(C=_r(U.type,U.key,U.props,null,P.mode,ee),fi(C,U),C.return=P,C)}function $(P,C,U,ee){return C===null||C.tag!==4||C.stateNode.containerInfo!==U.containerInfo||C.stateNode.implementation!==U.implementation?(C=eu(U,P.mode,ee),C.return=P,C):(C=d(C,U.children||[]),C.return=P,C)}function K(P,C,U,ee,ve){return C===null||C.tag!==7?(C=Nl(U,P.mode,ee,ve),C.return=P,C):(C=d(C,U),C.return=P,C)}function ne(P,C,U){if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return C=Jc(""+C,P.mode,U),C.return=P,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case S:return U=_r(C.type,C.key,C.props,null,P.mode,U),fi(U,C),U.return=P,U;case N:return C=eu(C,P.mode,U),C.return=P,C;case F:return C=Cl(C),ne(P,C,U)}if(de(C)||ce(C))return C=Nl(C,P.mode,U,null),C.return=P,C;if(typeof C.then=="function")return ne(P,Cr(C),U);if(C.$$typeof===O)return ne(P,Tr(P,C),U);Rr(P,C)}return null}function Z(P,C,U,ee){var ve=C!==null?C.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ve!==null?null:E(P,C,""+U,ee);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case S:return U.key===ve?j(P,C,U,ee):null;case N:return U.key===ve?$(P,C,U,ee):null;case F:return U=Cl(U),Z(P,C,U,ee)}if(de(U)||ce(U))return ve!==null?null:K(P,C,U,ee,null);if(typeof U.then=="function")return Z(P,C,Cr(U),ee);if(U.$$typeof===O)return Z(P,C,Tr(P,U),ee);Rr(P,U)}return null}function Y(P,C,U,ee,ve){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return P=P.get(U)||null,E(C,P,""+ee,ve);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case S:return P=P.get(ee.key===null?U:ee.key)||null,j(C,P,ee,ve);case N:return P=P.get(ee.key===null?U:ee.key)||null,$(C,P,ee,ve);case F:return ee=Cl(ee),Y(P,C,U,ee,ve)}if(de(ee)||ce(ee))return P=P.get(U)||null,K(C,P,ee,ve,null);if(typeof ee.then=="function")return Y(P,C,U,Cr(ee),ve);if(ee.$$typeof===O)return Y(P,C,U,Tr(C,ee),ve);Rr(C,ee)}return null}function me(P,C,U,ee){for(var ve=null,Fe=null,pe=C,Re=C=0,qe=null;pe!==null&&Re<U.length;Re++){pe.index>Re?(qe=pe,pe=null):qe=pe.sibling;var Ye=Z(P,pe,U[Re],ee);if(Ye===null){pe===null&&(pe=qe);break}t&&pe&&Ye.alternate===null&&a(P,pe),C=h(Ye,C,Re),Fe===null?ve=Ye:Fe.sibling=Ye,Fe=Ye,pe=qe}if(Re===U.length)return i(P,pe),$e&&pa(P,Re),ve;if(pe===null){for(;Re<U.length;Re++)pe=ne(P,U[Re],ee),pe!==null&&(C=h(pe,C,Re),Fe===null?ve=pe:Fe.sibling=pe,Fe=pe);return $e&&pa(P,Re),ve}for(pe=o(pe);Re<U.length;Re++)qe=Y(pe,P,Re,U[Re],ee),qe!==null&&(t&&qe.alternate!==null&&pe.delete(qe.key===null?Re:qe.key),C=h(qe,C,Re),Fe===null?ve=qe:Fe.sibling=qe,Fe=qe);return t&&pe.forEach(function(al){return a(P,al)}),$e&&pa(P,Re),ve}function Se(P,C,U,ee){if(U==null)throw Error(s(151));for(var ve=null,Fe=null,pe=C,Re=C=0,qe=null,Ye=U.next();pe!==null&&!Ye.done;Re++,Ye=U.next()){pe.index>Re?(qe=pe,pe=null):qe=pe.sibling;var al=Z(P,pe,Ye.value,ee);if(al===null){pe===null&&(pe=qe);break}t&&pe&&al.alternate===null&&a(P,pe),C=h(al,C,Re),Fe===null?ve=al:Fe.sibling=al,Fe=al,pe=qe}if(Ye.done)return i(P,pe),$e&&pa(P,Re),ve;if(pe===null){for(;!Ye.done;Re++,Ye=U.next())Ye=ne(P,Ye.value,ee),Ye!==null&&(C=h(Ye,C,Re),Fe===null?ve=Ye:Fe.sibling=Ye,Fe=Ye);return $e&&pa(P,Re),ve}for(pe=o(pe);!Ye.done;Re++,Ye=U.next())Ye=Y(pe,P,Re,Ye.value,ee),Ye!==null&&(t&&Ye.alternate!==null&&pe.delete(Ye.key===null?Re:Ye.key),C=h(Ye,C,Re),Fe===null?ve=Ye:Fe.sibling=Ye,Fe=Ye);return t&&pe.forEach(function(aw){return a(P,aw)}),$e&&pa(P,Re),ve}function st(P,C,U,ee){if(typeof U=="object"&&U!==null&&U.type===_&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case S:e:{for(var ve=U.key;C!==null;){if(C.key===ve){if(ve=U.type,ve===_){if(C.tag===7){i(P,C.sibling),ee=d(C,U.props.children),ee.return=P,P=ee;break e}}else if(C.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===F&&Cl(ve)===C.type){i(P,C.sibling),ee=d(C,U.props),fi(ee,U),ee.return=P,P=ee;break e}i(P,C);break}else a(P,C);C=C.sibling}U.type===_?(ee=Nl(U.props.children,P.mode,ee,U.key),ee.return=P,P=ee):(ee=_r(U.type,U.key,U.props,null,P.mode,ee),fi(ee,U),ee.return=P,P=ee)}return b(P);case N:e:{for(ve=U.key;C!==null;){if(C.key===ve)if(C.tag===4&&C.stateNode.containerInfo===U.containerInfo&&C.stateNode.implementation===U.implementation){i(P,C.sibling),ee=d(C,U.children||[]),ee.return=P,P=ee;break e}else{i(P,C);break}else a(P,C);C=C.sibling}ee=eu(U,P.mode,ee),ee.return=P,P=ee}return b(P);case F:return U=Cl(U),st(P,C,U,ee)}if(de(U))return me(P,C,U,ee);if(ce(U)){if(ve=ce(U),typeof ve!="function")throw Error(s(150));return U=ve.call(U),Se(P,C,U,ee)}if(typeof U.then=="function")return st(P,C,Cr(U),ee);if(U.$$typeof===O)return st(P,C,Tr(P,U),ee);Rr(P,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,C!==null&&C.tag===6?(i(P,C.sibling),ee=d(C,U),ee.return=P,P=ee):(i(P,C),ee=Jc(U,P.mode,ee),ee.return=P,P=ee),b(P)):i(P,C)}return function(P,C,U,ee){try{di=0;var ve=st(P,C,U,ee);return fs=null,ve}catch(pe){if(pe===ds||pe===Dr)throw pe;var Fe=Sn(29,pe,null,P.mode);return Fe.lanes=ee,Fe.return=P,Fe}}}var Al=Tm(!0),Mm=Tm(!1),qa=!1;function fu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hu(t,a){t=t.updateQueue,a.updateQueue===t&&(a.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ua(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function $a(t,a,i){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(Ke&2)!==0){var d=o.pending;return d===null?a.next=a:(a.next=d.next,d.next=a),o.pending=a,a=wr(t),um(t,null,i),a}return Sr(t,o,a,i),wr(t)}function hi(t,a,i){if(a=a.updateQueue,a!==null&&(a=a.shared,(i&4194048)!==0)){var o=a.lanes;o&=t.pendingLanes,i|=o,a.lanes=i,Wt(t,i)}}function mu(t,a){var i=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var d=null,h=null;if(i=i.firstBaseUpdate,i!==null){do{var b={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};h===null?d=h=b:h=h.next=b,i=i.next}while(i!==null);h===null?d=h=a:h=h.next=a}else d=h=a;i={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:o.shared,callbacks:o.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=a:t.next=a,i.lastBaseUpdate=a}var gu=!1;function mi(){if(gu){var t=us;if(t!==null)throw t}}function gi(t,a,i,o){gu=!1;var d=t.updateQueue;qa=!1;var h=d.firstBaseUpdate,b=d.lastBaseUpdate,E=d.shared.pending;if(E!==null){d.shared.pending=null;var j=E,$=j.next;j.next=null,b===null?h=$:b.next=$,b=j;var K=t.alternate;K!==null&&(K=K.updateQueue,E=K.lastBaseUpdate,E!==b&&(E===null?K.firstBaseUpdate=$:E.next=$,K.lastBaseUpdate=j))}if(h!==null){var ne=d.baseState;b=0,K=$=j=null,E=h;do{var Z=E.lane&-536870913,Y=Z!==E.lane;if(Y?(Le&Z)===Z:(o&Z)===Z){Z!==0&&Z===cs&&(gu=!0),K!==null&&(K=K.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var me=t,Se=E;Z=a;var st=i;switch(Se.tag){case 1:if(me=Se.payload,typeof me=="function"){ne=me.call(st,ne,Z);break e}ne=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Se.payload,Z=typeof me=="function"?me.call(st,ne,Z):me,Z==null)break e;ne=v({},ne,Z);break e;case 2:qa=!0}}Z=E.callback,Z!==null&&(t.flags|=64,Y&&(t.flags|=8192),Y=d.callbacks,Y===null?d.callbacks=[Z]:Y.push(Z))}else Y={lane:Z,tag:E.tag,payload:E.payload,callback:E.callback,next:null},K===null?($=K=Y,j=ne):K=K.next=Y,b|=Z;if(E=E.next,E===null){if(E=d.shared.pending,E===null)break;Y=E,E=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);K===null&&(j=ne),d.baseState=j,d.firstBaseUpdate=$,d.lastBaseUpdate=K,h===null&&(d.shared.lanes=0),Ga|=b,t.lanes=b,t.memoizedState=ne}}function Dm(t,a){if(typeof t!="function")throw Error(s(191,t));t.call(a)}function jm(t,a){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)Dm(i[t],a)}var hs=T(null),Ar=T(0);function Cm(t,a){t=Ma,J(Ar,t),J(hs,a),Ma=t|a.baseLanes}function pu(){J(Ar,Ma),J(hs,hs.current)}function vu(){Ma=Ar.current,q(hs),q(Ar)}var wn=T(null),$n=null;function Ha(t){var a=t.alternate;J(Nt,Nt.current&1),J(wn,t),$n===null&&(a===null||hs.current!==null||a.memoizedState!==null)&&($n=t)}function yu(t){J(Nt,Nt.current),J(wn,t),$n===null&&($n=t)}function Rm(t){t.tag===22?(J(Nt,Nt.current),J(wn,t),$n===null&&($n=t)):Za()}function Za(){J(Nt,Nt.current),J(wn,wn.current)}function _n(t){q(wn),$n===t&&($n=null),q(Nt)}var Nt=T(0);function kr(t){for(var a=t;a!==null;){if(a.tag===13){var i=a.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Ed(i)||Nd(i)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var ba=0,De=null,at=null,jt=null,zr=!1,ms=!1,kl=!1,Or=0,pi=0,gs=null,GS=0;function vt(){throw Error(s(321))}function bu(t,a){if(a===null)return!1;for(var i=0;i<a.length&&i<t.length;i++)if(!xn(t[i],a[i]))return!1;return!0}function xu(t,a,i,o,d,h){return ba=h,De=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,k.H=t===null||t.memoizedState===null?mg:Ou,kl=!1,h=i(o,d),kl=!1,ms&&(h=km(a,i,o,d)),Am(t),h}function Am(t){k.H=bi;var a=at!==null&&at.next!==null;if(ba=0,jt=at=De=null,zr=!1,pi=0,gs=null,a)throw Error(s(300));t===null||Ct||(t=t.dependencies,t!==null&&Nr(t)&&(Ct=!0))}function km(t,a,i,o){De=t;var d=0;do{if(ms&&(gs=null),pi=0,ms=!1,25<=d)throw Error(s(301));if(d+=1,jt=at=null,t.updateQueue!=null){var h=t.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}k.H=gg,h=a(i,o)}while(ms);return h}function VS(){var t=k.H,a=t.useState()[0];return a=typeof a.then=="function"?vi(a):a,t=t.useState()[0],(at!==null?at.memoizedState:null)!==t&&(De.flags|=1024),a}function Su(){var t=Or!==0;return Or=0,t}function wu(t,a,i){a.updateQueue=t.updateQueue,a.flags&=-2053,t.lanes&=~i}function _u(t){if(zr){for(t=t.memoizedState;t!==null;){var a=t.queue;a!==null&&(a.pending=null),t=t.next}zr=!1}ba=0,jt=at=De=null,ms=!1,pi=Or=0,gs=null}function nn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jt===null?De.memoizedState=jt=t:jt=jt.next=t,jt}function Tt(){if(at===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var a=jt===null?De.memoizedState:jt.next;if(a!==null)jt=a,at=t;else{if(t===null)throw De.alternate===null?Error(s(467)):Error(s(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},jt===null?De.memoizedState=jt=t:jt=jt.next=t}return jt}function Pr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function vi(t){var a=pi;return pi+=1,gs===null&&(gs=[]),t=_m(gs,t,a),a=De,(jt===null?a.memoizedState:jt.next)===null&&(a=a.alternate,k.H=a===null||a.memoizedState===null?mg:Ou),t}function Br(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return vi(t);if(t.$$typeof===O)return Ft(t)}throw Error(s(438,String(t)))}function Eu(t){var a=null,i=De.updateQueue;if(i!==null&&(a=i.memoCache),a==null){var o=De.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(a={data:o.data.map(function(d){return d.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),i===null&&(i=Pr(),De.updateQueue=i),i.memoCache=a,i=a.data[a.index],i===void 0)for(i=a.data[a.index]=Array(t),o=0;o<t;o++)i[o]=re;return a.index++,i}function xa(t,a){return typeof a=="function"?a(t):a}function Ir(t){var a=Tt();return Nu(a,at,t)}function Nu(t,a,i){var o=t.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var d=t.baseQueue,h=o.pending;if(h!==null){if(d!==null){var b=d.next;d.next=h.next,h.next=b}a.baseQueue=d=h,o.pending=null}if(h=t.baseState,d===null)t.memoizedState=h;else{a=d.next;var E=b=null,j=null,$=a,K=!1;do{var ne=$.lane&-536870913;if(ne!==$.lane?(Le&ne)===ne:(ba&ne)===ne){var Z=$.revertLane;if(Z===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ne===cs&&(K=!0);else if((ba&Z)===Z){$=$.next,Z===cs&&(K=!0);continue}else ne={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},j===null?(E=j=ne,b=h):j=j.next=ne,De.lanes|=Z,Ga|=Z;ne=$.action,kl&&i(h,ne),h=$.hasEagerState?$.eagerState:i(h,ne)}else Z={lane:ne,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},j===null?(E=j=Z,b=h):j=j.next=Z,De.lanes|=ne,Ga|=ne;$=$.next}while($!==null&&$!==a);if(j===null?b=h:j.next=E,!xn(h,t.memoizedState)&&(Ct=!0,K&&(i=us,i!==null)))throw i;t.memoizedState=h,t.baseState=b,t.baseQueue=j,o.lastRenderedState=h}return d===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Tu(t){var a=Tt(),i=a.queue;if(i===null)throw Error(s(311));i.lastRenderedReducer=t;var o=i.dispatch,d=i.pending,h=a.memoizedState;if(d!==null){i.pending=null;var b=d=d.next;do h=t(h,b.action),b=b.next;while(b!==d);xn(h,a.memoizedState)||(Ct=!0),a.memoizedState=h,a.baseQueue===null&&(a.baseState=h),i.lastRenderedState=h}return[h,o]}function zm(t,a,i){var o=De,d=Tt(),h=$e;if(h){if(i===void 0)throw Error(s(407));i=i()}else i=a();var b=!xn((at||d).memoizedState,i);if(b&&(d.memoizedState=i,Ct=!0),d=d.queue,ju(Bm.bind(null,o,d,t),[t]),d.getSnapshot!==a||b||jt!==null&&jt.memoizedState.tag&1){if(o.flags|=2048,ps(9,{destroy:void 0},Pm.bind(null,o,d,i,a),null),rt===null)throw Error(s(349));h||(ba&127)!==0||Om(o,a,i)}return i}function Om(t,a,i){t.flags|=16384,t={getSnapshot:a,value:i},a=De.updateQueue,a===null?(a=Pr(),De.updateQueue=a,a.stores=[t]):(i=a.stores,i===null?a.stores=[t]:i.push(t))}function Pm(t,a,i,o){a.value=i,a.getSnapshot=o,Im(a)&&Lm(t)}function Bm(t,a,i){return i(function(){Im(a)&&Lm(t)})}function Im(t){var a=t.getSnapshot;t=t.value;try{var i=a();return!xn(t,i)}catch{return!0}}function Lm(t){var a=El(t,2);a!==null&&gn(a,t,2)}function Mu(t){var a=nn();if(typeof t=="function"){var i=t;if(t=i(),kl){rn(!0);try{i()}finally{rn(!1)}}}return a.memoizedState=a.baseState=t,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:t},a}function qm(t,a,i,o){return t.baseState=i,Nu(t,at,typeof o=="function"?o:xa)}function KS(t,a,i,o,d){if(Ur(t))throw Error(s(485));if(t=a.action,t!==null){var h={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){h.listeners.push(b)}};k.T!==null?i(!0):h.isTransition=!1,o(h),i=a.pending,i===null?(h.next=a.pending=h,Um(a,h)):(h.next=i.next,a.pending=i.next=h)}}function Um(t,a){var i=a.action,o=a.payload,d=t.state;if(a.isTransition){var h=k.T,b={};k.T=b;try{var E=i(d,o),j=k.S;j!==null&&j(b,E),$m(t,a,E)}catch($){Du(t,a,$)}finally{h!==null&&b.types!==null&&(h.types=b.types),k.T=h}}else try{h=i(d,o),$m(t,a,h)}catch($){Du(t,a,$)}}function $m(t,a,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(o){Hm(t,a,o)},function(o){return Du(t,a,o)}):Hm(t,a,i)}function Hm(t,a,i){a.status="fulfilled",a.value=i,Zm(a),t.state=i,a=t.pending,a!==null&&(i=a.next,i===a?t.pending=null:(i=i.next,a.next=i,Um(t,i)))}function Du(t,a,i){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do a.status="rejected",a.reason=i,Zm(a),a=a.next;while(a!==o)}t.action=null}function Zm(t){t=t.listeners;for(var a=0;a<t.length;a++)(0,t[a])()}function Fm(t,a){return a}function Ym(t,a){if($e){var i=rt.formState;if(i!==null){e:{var o=De;if($e){if(ut){t:{for(var d=ut,h=Un;d.nodeType!==8;){if(!h){d=null;break t}if(d=Hn(d.nextSibling),d===null){d=null;break t}}h=d.data,d=h==="F!"||h==="F"?d:null}if(d){ut=Hn(d.nextSibling),o=d.data==="F!";break e}}Ia(o)}o=!1}o&&(a=i[0])}}return i=nn(),i.memoizedState=i.baseState=a,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fm,lastRenderedState:a},i.queue=o,i=dg.bind(null,De,o),o.dispatch=i,o=Mu(!1),h=zu.bind(null,De,!1,o.queue),o=nn(),d={state:a,dispatch:null,action:t,pending:null},o.queue=d,i=KS.bind(null,De,d,h,i),d.dispatch=i,o.memoizedState=t,[a,i,!1]}function Gm(t){var a=Tt();return Vm(a,at,t)}function Vm(t,a,i){if(a=Nu(t,a,Fm)[0],t=Ir(xa)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var o=vi(a)}catch(b){throw b===ds?Dr:b}else o=a;a=Tt();var d=a.queue,h=d.dispatch;return i!==a.memoizedState&&(De.flags|=2048,ps(9,{destroy:void 0},WS.bind(null,d,i),null)),[o,h,t]}function WS(t,a){t.action=a}function Km(t){var a=Tt(),i=at;if(i!==null)return Vm(a,i,t);Tt(),a=a.memoizedState,i=Tt();var o=i.queue.dispatch;return i.memoizedState=t,[a,o,!1]}function ps(t,a,i,o){return t={tag:t,create:i,deps:o,inst:a,next:null},a=De.updateQueue,a===null&&(a=Pr(),De.updateQueue=a),i=a.lastEffect,i===null?a.lastEffect=t.next=t:(o=i.next,i.next=t,t.next=o,a.lastEffect=t),t}function Wm(){return Tt().memoizedState}function Lr(t,a,i,o){var d=nn();De.flags|=t,d.memoizedState=ps(1|a,{destroy:void 0},i,o===void 0?null:o)}function qr(t,a,i,o){var d=Tt();o=o===void 0?null:o;var h=d.memoizedState.inst;at!==null&&o!==null&&bu(o,at.memoizedState.deps)?d.memoizedState=ps(a,h,i,o):(De.flags|=t,d.memoizedState=ps(1|a,h,i,o))}function Xm(t,a){Lr(8390656,8,t,a)}function ju(t,a){qr(2048,8,t,a)}function XS(t){De.flags|=4;var a=De.updateQueue;if(a===null)a=Pr(),De.updateQueue=a,a.events=[t];else{var i=a.events;i===null?a.events=[t]:i.push(t)}}function Qm(t){var a=Tt().memoizedState;return XS({ref:a,nextImpl:t}),function(){if((Ke&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function Jm(t,a){return qr(4,2,t,a)}function eg(t,a){return qr(4,4,t,a)}function tg(t,a){if(typeof a=="function"){t=t();var i=a(t);return function(){typeof i=="function"?i():a(null)}}if(a!=null)return t=t(),a.current=t,function(){a.current=null}}function ng(t,a,i){i=i!=null?i.concat([t]):null,qr(4,4,tg.bind(null,a,t),i)}function Cu(){}function ag(t,a){var i=Tt();a=a===void 0?null:a;var o=i.memoizedState;return a!==null&&bu(a,o[1])?o[0]:(i.memoizedState=[t,a],t)}function lg(t,a){var i=Tt();a=a===void 0?null:a;var o=i.memoizedState;if(a!==null&&bu(a,o[1]))return o[0];if(o=t(),kl){rn(!0);try{t()}finally{rn(!1)}}return i.memoizedState=[o,a],o}function Ru(t,a,i){return i===void 0||(ba&1073741824)!==0&&(Le&261930)===0?t.memoizedState=a:(t.memoizedState=i,t=sp(),De.lanes|=t,Ga|=t,i)}function sg(t,a,i,o){return xn(i,a)?i:hs.current!==null?(t=Ru(t,i,o),xn(t,a)||(Ct=!0),t):(ba&42)===0||(ba&1073741824)!==0&&(Le&261930)===0?(Ct=!0,t.memoizedState=i):(t=sp(),De.lanes|=t,Ga|=t,a)}function ig(t,a,i,o,d){var h=G.p;G.p=h!==0&&8>h?h:8;var b=k.T,E={};k.T=E,zu(t,!1,a,i);try{var j=d(),$=k.S;if($!==null&&$(E,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var K=YS(j,o);yi(t,a,K,Tn(t))}else yi(t,a,o,Tn(t))}catch(ne){yi(t,a,{then:function(){},status:"rejected",reason:ne},Tn())}finally{G.p=h,b!==null&&E.types!==null&&(b.types=E.types),k.T=b}}function QS(){}function Au(t,a,i,o){if(t.tag!==5)throw Error(s(476));var d=rg(t).queue;ig(t,d,a,le,i===null?QS:function(){return og(t),i(o)})}function rg(t){var a=t.memoizedState;if(a!==null)return a;a={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:le},next:null};var i={};return a.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:i},next:null},t.memoizedState=a,t=t.alternate,t!==null&&(t.memoizedState=a),a}function og(t){var a=rg(t);a.next===null&&(a=t.alternate.memoizedState),yi(t,a.next.queue,{},Tn())}function ku(){return Ft(Oi)}function cg(){return Tt().memoizedState}function ug(){return Tt().memoizedState}function JS(t){for(var a=t.return;a!==null;){switch(a.tag){case 24:case 3:var i=Tn();t=Ua(i);var o=$a(a,t,i);o!==null&&(gn(o,a,i),hi(o,a,i)),a={cache:ou()},t.payload=a;return}a=a.return}}function e1(t,a,i){var o=Tn();i={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},Ur(t)?fg(a,i):(i=Xc(t,a,i,o),i!==null&&(gn(i,t,o),hg(i,a,o)))}function dg(t,a,i){var o=Tn();yi(t,a,i,o)}function yi(t,a,i,o){var d={lane:o,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(Ur(t))fg(a,d);else{var h=t.alternate;if(t.lanes===0&&(h===null||h.lanes===0)&&(h=a.lastRenderedReducer,h!==null))try{var b=a.lastRenderedState,E=h(b,i);if(d.hasEagerState=!0,d.eagerState=E,xn(E,b))return Sr(t,a,d,0),rt===null&&xr(),!1}catch{}if(i=Xc(t,a,d,o),i!==null)return gn(i,t,o),hg(i,a,o),!0}return!1}function zu(t,a,i,o){if(o={lane:2,revertLane:fd(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Ur(t)){if(a)throw Error(s(479))}else a=Xc(t,i,o,2),a!==null&&gn(a,t,2)}function Ur(t){var a=t.alternate;return t===De||a!==null&&a===De}function fg(t,a){ms=zr=!0;var i=t.pending;i===null?a.next=a:(a.next=i.next,i.next=a),t.pending=a}function hg(t,a,i){if((i&4194048)!==0){var o=a.lanes;o&=t.pendingLanes,i|=o,a.lanes=i,Wt(t,i)}}var bi={readContext:Ft,use:Br,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};bi.useEffectEvent=vt;var mg={readContext:Ft,use:Br,useCallback:function(t,a){return nn().memoizedState=[t,a===void 0?null:a],t},useContext:Ft,useEffect:Xm,useImperativeHandle:function(t,a,i){i=i!=null?i.concat([t]):null,Lr(4194308,4,tg.bind(null,a,t),i)},useLayoutEffect:function(t,a){return Lr(4194308,4,t,a)},useInsertionEffect:function(t,a){Lr(4,2,t,a)},useMemo:function(t,a){var i=nn();a=a===void 0?null:a;var o=t();if(kl){rn(!0);try{t()}finally{rn(!1)}}return i.memoizedState=[o,a],o},useReducer:function(t,a,i){var o=nn();if(i!==void 0){var d=i(a);if(kl){rn(!0);try{i(a)}finally{rn(!1)}}}else d=a;return o.memoizedState=o.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},o.queue=t,t=t.dispatch=e1.bind(null,De,t),[o.memoizedState,t]},useRef:function(t){var a=nn();return t={current:t},a.memoizedState=t},useState:function(t){t=Mu(t);var a=t.queue,i=dg.bind(null,De,a);return a.dispatch=i,[t.memoizedState,i]},useDebugValue:Cu,useDeferredValue:function(t,a){var i=nn();return Ru(i,t,a)},useTransition:function(){var t=Mu(!1);return t=ig.bind(null,De,t.queue,!0,!1),nn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,a,i){var o=De,d=nn();if($e){if(i===void 0)throw Error(s(407));i=i()}else{if(i=a(),rt===null)throw Error(s(349));(Le&127)!==0||Om(o,a,i)}d.memoizedState=i;var h={value:i,getSnapshot:a};return d.queue=h,Xm(Bm.bind(null,o,h,t),[t]),o.flags|=2048,ps(9,{destroy:void 0},Pm.bind(null,o,h,i,a),null),i},useId:function(){var t=nn(),a=rt.identifierPrefix;if($e){var i=sa,o=la;i=(o&~(1<<32-X(o)-1)).toString(32)+i,a="_"+a+"R_"+i,i=Or++,0<i&&(a+="H"+i.toString(32)),a+="_"}else i=GS++,a="_"+a+"r_"+i.toString(32)+"_";return t.memoizedState=a},useHostTransitionStatus:ku,useFormState:Ym,useActionState:Ym,useOptimistic:function(t){var a=nn();a.memoizedState=a.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=i,a=zu.bind(null,De,!0,i),i.dispatch=a,[t,a]},useMemoCache:Eu,useCacheRefresh:function(){return nn().memoizedState=JS.bind(null,De)},useEffectEvent:function(t){var a=nn(),i={impl:t};return a.memoizedState=i,function(){if((Ke&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}},Ou={readContext:Ft,use:Br,useCallback:ag,useContext:Ft,useEffect:ju,useImperativeHandle:ng,useInsertionEffect:Jm,useLayoutEffect:eg,useMemo:lg,useReducer:Ir,useRef:Wm,useState:function(){return Ir(xa)},useDebugValue:Cu,useDeferredValue:function(t,a){var i=Tt();return sg(i,at.memoizedState,t,a)},useTransition:function(){var t=Ir(xa)[0],a=Tt().memoizedState;return[typeof t=="boolean"?t:vi(t),a]},useSyncExternalStore:zm,useId:cg,useHostTransitionStatus:ku,useFormState:Gm,useActionState:Gm,useOptimistic:function(t,a){var i=Tt();return qm(i,at,t,a)},useMemoCache:Eu,useCacheRefresh:ug};Ou.useEffectEvent=Qm;var gg={readContext:Ft,use:Br,useCallback:ag,useContext:Ft,useEffect:ju,useImperativeHandle:ng,useInsertionEffect:Jm,useLayoutEffect:eg,useMemo:lg,useReducer:Tu,useRef:Wm,useState:function(){return Tu(xa)},useDebugValue:Cu,useDeferredValue:function(t,a){var i=Tt();return at===null?Ru(i,t,a):sg(i,at.memoizedState,t,a)},useTransition:function(){var t=Tu(xa)[0],a=Tt().memoizedState;return[typeof t=="boolean"?t:vi(t),a]},useSyncExternalStore:zm,useId:cg,useHostTransitionStatus:ku,useFormState:Km,useActionState:Km,useOptimistic:function(t,a){var i=Tt();return at!==null?qm(i,at,t,a):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:Eu,useCacheRefresh:ug};gg.useEffectEvent=Qm;function Pu(t,a,i,o){a=t.memoizedState,i=i(o,a),i=i==null?a:v({},a,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Bu={enqueueSetState:function(t,a,i){t=t._reactInternals;var o=Tn(),d=Ua(o);d.payload=a,i!=null&&(d.callback=i),a=$a(t,d,o),a!==null&&(gn(a,t,o),hi(a,t,o))},enqueueReplaceState:function(t,a,i){t=t._reactInternals;var o=Tn(),d=Ua(o);d.tag=1,d.payload=a,i!=null&&(d.callback=i),a=$a(t,d,o),a!==null&&(gn(a,t,o),hi(a,t,o))},enqueueForceUpdate:function(t,a){t=t._reactInternals;var i=Tn(),o=Ua(i);o.tag=2,a!=null&&(o.callback=a),a=$a(t,o,i),a!==null&&(gn(a,t,i),hi(a,t,i))}};function pg(t,a,i,o,d,h,b){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,h,b):a.prototype&&a.prototype.isPureReactComponent?!si(i,o)||!si(d,h):!0}function vg(t,a,i,o){t=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(i,o),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(i,o),a.state!==t&&Bu.enqueueReplaceState(a,a.state,null)}function zl(t,a){var i=a;if("ref"in a){i={};for(var o in a)o!=="ref"&&(i[o]=a[o])}if(t=t.defaultProps){i===a&&(i=v({},i));for(var d in t)i[d]===void 0&&(i[d]=t[d])}return i}function yg(t){br(t)}function bg(t){console.error(t)}function xg(t){br(t)}function $r(t,a){try{var i=t.onUncaughtError;i(a.value,{componentStack:a.stack})}catch(o){setTimeout(function(){throw o})}}function Sg(t,a,i){try{var o=t.onCaughtError;o(i.value,{componentStack:i.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Iu(t,a,i){return i=Ua(i),i.tag=3,i.payload={element:null},i.callback=function(){$r(t,a)},i}function wg(t){return t=Ua(t),t.tag=3,t}function _g(t,a,i,o){var d=i.type.getDerivedStateFromError;if(typeof d=="function"){var h=o.value;t.payload=function(){return d(h)},t.callback=function(){Sg(a,i,o)}}var b=i.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(t.callback=function(){Sg(a,i,o),typeof d!="function"&&(Va===null?Va=new Set([this]):Va.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})})}function t1(t,a,i,o,d){if(i.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(a=i.alternate,a!==null&&os(a,i,d,!0),i=wn.current,i!==null){switch(i.tag){case 31:case 13:return $n===null?eo():i.alternate===null&&yt===0&&(yt=3),i.flags&=-257,i.flags|=65536,i.lanes=d,o===jr?i.flags|=16384:(a=i.updateQueue,a===null?i.updateQueue=new Set([o]):a.add(o),cd(t,o,d)),!1;case 22:return i.flags|=65536,o===jr?i.flags|=16384:(a=i.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([o])},i.updateQueue=a):(i=a.retryQueue,i===null?a.retryQueue=new Set([o]):i.add(o)),cd(t,o,d)),!1}throw Error(s(435,i.tag))}return cd(t,o,d),eo(),!1}if($e)return a=wn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=d,o!==au&&(t=Error(s(422),{cause:o}),oi(In(t,i)))):(o!==au&&(a=Error(s(423),{cause:o}),oi(In(a,i))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,o=In(o,i),d=Iu(t.stateNode,o,d),mu(t,d),yt!==4&&(yt=2)),!1;var h=Error(s(520),{cause:o});if(h=In(h,i),Mi===null?Mi=[h]:Mi.push(h),yt!==4&&(yt=2),a===null)return!0;o=In(o,i),i=a;do{switch(i.tag){case 3:return i.flags|=65536,t=d&-d,i.lanes|=t,t=Iu(i.stateNode,o,t),mu(i,t),!1;case 1:if(a=i.type,h=i.stateNode,(i.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Va===null||!Va.has(h))))return i.flags|=65536,d&=-d,i.lanes|=d,d=wg(d),_g(d,t,i,o),mu(i,d),!1}i=i.return}while(i!==null);return!1}var Lu=Error(s(461)),Ct=!1;function Yt(t,a,i,o){a.child=t===null?Mm(a,null,i,o):Al(a,t.child,i,o)}function Eg(t,a,i,o,d){i=i.render;var h=a.ref;if("ref"in o){var b={};for(var E in o)E!=="ref"&&(b[E]=o[E])}else b=o;return Dl(a),o=xu(t,a,i,b,h,d),E=Su(),t!==null&&!Ct?(wu(t,a,d),Sa(t,a,d)):($e&&E&&tu(a),a.flags|=1,Yt(t,a,o,d),a.child)}function Ng(t,a,i,o,d){if(t===null){var h=i.type;return typeof h=="function"&&!Qc(h)&&h.defaultProps===void 0&&i.compare===null?(a.tag=15,a.type=h,Tg(t,a,h,o,d)):(t=_r(i.type,null,o,a,a.mode,d),t.ref=a.ref,t.return=a,a.child=t)}if(h=t.child,!Gu(t,d)){var b=h.memoizedProps;if(i=i.compare,i=i!==null?i:si,i(b,o)&&t.ref===a.ref)return Sa(t,a,d)}return a.flags|=1,t=ga(h,o),t.ref=a.ref,t.return=a,a.child=t}function Tg(t,a,i,o,d){if(t!==null){var h=t.memoizedProps;if(si(h,o)&&t.ref===a.ref)if(Ct=!1,a.pendingProps=o=h,Gu(t,d))(t.flags&131072)!==0&&(Ct=!0);else return a.lanes=t.lanes,Sa(t,a,d)}return qu(t,a,i,o,d)}function Mg(t,a,i,o){var d=o.children,h=t!==null?t.memoizedState:null;if(t===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((a.flags&128)!==0){if(h=h!==null?h.baseLanes|i:i,t!==null){for(o=a.child=t.child,d=0;o!==null;)d=d|o.lanes|o.childLanes,o=o.sibling;o=d&~h}else o=0,a.child=null;return Dg(t,a,h,i,o)}if((i&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},t!==null&&Mr(a,h!==null?h.cachePool:null),h!==null?Cm(a,h):pu(),Rm(a);else return o=a.lanes=536870912,Dg(t,a,h!==null?h.baseLanes|i:i,i,o)}else h!==null?(Mr(a,h.cachePool),Cm(a,h),Za(),a.memoizedState=null):(t!==null&&Mr(a,null),pu(),Za());return Yt(t,a,d,i),a.child}function xi(t,a){return t!==null&&t.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function Dg(t,a,i,o,d){var h=uu();return h=h===null?null:{parent:Dt._currentValue,pool:h},a.memoizedState={baseLanes:i,cachePool:h},t!==null&&Mr(a,null),pu(),Rm(a),t!==null&&os(t,a,o,!0),a.childLanes=d,null}function Hr(t,a){return a=Fr({mode:a.mode,children:a.children},t.mode),a.ref=t.ref,t.child=a,a.return=t,a}function jg(t,a,i){return Al(a,t.child,null,i),t=Hr(a,a.pendingProps),t.flags|=2,_n(a),a.memoizedState=null,t}function n1(t,a,i){var o=a.pendingProps,d=(a.flags&128)!==0;if(a.flags&=-129,t===null){if($e){if(o.mode==="hidden")return t=Hr(a,o),a.lanes=536870912,xi(null,t);if(yu(a),(t=ut)?(t=Up(t,Un),t=t!==null&&t.data==="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Pa!==null?{id:la,overflow:sa}:null,retryLane:536870912,hydrationErrors:null},i=fm(t),i.return=a,a.child=i,Zt=a,ut=null)):t=null,t===null)throw Ia(a);return a.lanes=536870912,null}return Hr(a,o)}var h=t.memoizedState;if(h!==null){var b=h.dehydrated;if(yu(a),d)if(a.flags&256)a.flags&=-257,a=jg(t,a,i);else if(a.memoizedState!==null)a.child=t.child,a.flags|=128,a=null;else throw Error(s(558));else if(Ct||os(t,a,i,!1),d=(i&t.childLanes)!==0,Ct||d){if(o=rt,o!==null&&(b=tn(o,i),b!==0&&b!==h.retryLane))throw h.retryLane=b,El(t,b),gn(o,t,b),Lu;eo(),a=jg(t,a,i)}else t=h.treeContext,ut=Hn(b.nextSibling),Zt=a,$e=!0,Ba=null,Un=!1,t!==null&&gm(a,t),a=Hr(a,o),a.flags|=4096;return a}return t=ga(t.child,{mode:o.mode,children:o.children}),t.ref=a.ref,a.child=t,t.return=a,t}function Zr(t,a){var i=a.ref;if(i===null)t!==null&&t.ref!==null&&(a.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(s(284));(t===null||t.ref!==i)&&(a.flags|=4194816)}}function qu(t,a,i,o,d){return Dl(a),i=xu(t,a,i,o,void 0,d),o=Su(),t!==null&&!Ct?(wu(t,a,d),Sa(t,a,d)):($e&&o&&tu(a),a.flags|=1,Yt(t,a,i,d),a.child)}function Cg(t,a,i,o,d,h){return Dl(a),a.updateQueue=null,i=km(a,o,i,d),Am(t),o=Su(),t!==null&&!Ct?(wu(t,a,h),Sa(t,a,h)):($e&&o&&tu(a),a.flags|=1,Yt(t,a,i,h),a.child)}function Rg(t,a,i,o,d){if(Dl(a),a.stateNode===null){var h=ls,b=i.contextType;typeof b=="object"&&b!==null&&(h=Ft(b)),h=new i(o,h),a.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=Bu,a.stateNode=h,h._reactInternals=a,h=a.stateNode,h.props=o,h.state=a.memoizedState,h.refs={},fu(a),b=i.contextType,h.context=typeof b=="object"&&b!==null?Ft(b):ls,h.state=a.memoizedState,b=i.getDerivedStateFromProps,typeof b=="function"&&(Pu(a,i,b,o),h.state=a.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(b=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),b!==h.state&&Bu.enqueueReplaceState(h,h.state,null),gi(a,o,h,d),mi(),h.state=a.memoizedState),typeof h.componentDidMount=="function"&&(a.flags|=4194308),o=!0}else if(t===null){h=a.stateNode;var E=a.memoizedProps,j=zl(i,E);h.props=j;var $=h.context,K=i.contextType;b=ls,typeof K=="object"&&K!==null&&(b=Ft(K));var ne=i.getDerivedStateFromProps;K=typeof ne=="function"||typeof h.getSnapshotBeforeUpdate=="function",E=a.pendingProps!==E,K||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(E||$!==b)&&vg(a,h,o,b),qa=!1;var Z=a.memoizedState;h.state=Z,gi(a,o,h,d),mi(),$=a.memoizedState,E||Z!==$||qa?(typeof ne=="function"&&(Pu(a,i,ne,o),$=a.memoizedState),(j=qa||pg(a,i,j,o,Z,$,b))?(K||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(a.flags|=4194308)):(typeof h.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=o,a.memoizedState=$),h.props=o,h.state=$,h.context=b,o=j):(typeof h.componentDidMount=="function"&&(a.flags|=4194308),o=!1)}else{h=a.stateNode,hu(t,a),b=a.memoizedProps,K=zl(i,b),h.props=K,ne=a.pendingProps,Z=h.context,$=i.contextType,j=ls,typeof $=="object"&&$!==null&&(j=Ft($)),E=i.getDerivedStateFromProps,($=typeof E=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(b!==ne||Z!==j)&&vg(a,h,o,j),qa=!1,Z=a.memoizedState,h.state=Z,gi(a,o,h,d),mi();var Y=a.memoizedState;b!==ne||Z!==Y||qa||t!==null&&t.dependencies!==null&&Nr(t.dependencies)?(typeof E=="function"&&(Pu(a,i,E,o),Y=a.memoizedState),(K=qa||pg(a,i,K,o,Z,Y,j)||t!==null&&t.dependencies!==null&&Nr(t.dependencies))?($||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,Y,j),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,Y,j)),typeof h.componentDidUpdate=="function"&&(a.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof h.componentDidUpdate!="function"||b===t.memoizedProps&&Z===t.memoizedState||(a.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&Z===t.memoizedState||(a.flags|=1024),a.memoizedProps=o,a.memoizedState=Y),h.props=o,h.state=Y,h.context=j,o=K):(typeof h.componentDidUpdate!="function"||b===t.memoizedProps&&Z===t.memoizedState||(a.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||b===t.memoizedProps&&Z===t.memoizedState||(a.flags|=1024),o=!1)}return h=o,Zr(t,a),o=(a.flags&128)!==0,h||o?(h=a.stateNode,i=o&&typeof i.getDerivedStateFromError!="function"?null:h.render(),a.flags|=1,t!==null&&o?(a.child=Al(a,t.child,null,d),a.child=Al(a,null,i,d)):Yt(t,a,i,d),a.memoizedState=h.state,t=a.child):t=Sa(t,a,d),t}function Ag(t,a,i,o){return Tl(),a.flags|=256,Yt(t,a,i,o),a.child}var Uu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function $u(t){return{baseLanes:t,cachePool:Sm()}}function Hu(t,a,i){return t=t!==null?t.childLanes&~i:0,a&&(t|=Nn),t}function kg(t,a,i){var o=a.pendingProps,d=!1,h=(a.flags&128)!==0,b;if((b=h)||(b=t!==null&&t.memoizedState===null?!1:(Nt.current&2)!==0),b&&(d=!0,a.flags&=-129),b=(a.flags&32)!==0,a.flags&=-33,t===null){if($e){if(d?Ha(a):Za(),(t=ut)?(t=Up(t,Un),t=t!==null&&t.data!=="&"?t:null,t!==null&&(a.memoizedState={dehydrated:t,treeContext:Pa!==null?{id:la,overflow:sa}:null,retryLane:536870912,hydrationErrors:null},i=fm(t),i.return=a,a.child=i,Zt=a,ut=null)):t=null,t===null)throw Ia(a);return Nd(t)?a.lanes=32:a.lanes=536870912,null}var E=o.children;return o=o.fallback,d?(Za(),d=a.mode,E=Fr({mode:"hidden",children:E},d),o=Nl(o,d,i,null),E.return=a,o.return=a,E.sibling=o,a.child=E,o=a.child,o.memoizedState=$u(i),o.childLanes=Hu(t,b,i),a.memoizedState=Uu,xi(null,o)):(Ha(a),Zu(a,E))}var j=t.memoizedState;if(j!==null&&(E=j.dehydrated,E!==null)){if(h)a.flags&256?(Ha(a),a.flags&=-257,a=Fu(t,a,i)):a.memoizedState!==null?(Za(),a.child=t.child,a.flags|=128,a=null):(Za(),E=o.fallback,d=a.mode,o=Fr({mode:"visible",children:o.children},d),E=Nl(E,d,i,null),E.flags|=2,o.return=a,E.return=a,o.sibling=E,a.child=o,Al(a,t.child,null,i),o=a.child,o.memoizedState=$u(i),o.childLanes=Hu(t,b,i),a.memoizedState=Uu,a=xi(null,o));else if(Ha(a),Nd(E)){if(b=E.nextSibling&&E.nextSibling.dataset,b)var $=b.dgst;b=$,o=Error(s(419)),o.stack="",o.digest=b,oi({value:o,source:null,stack:null}),a=Fu(t,a,i)}else if(Ct||os(t,a,i,!1),b=(i&t.childLanes)!==0,Ct||b){if(b=rt,b!==null&&(o=tn(b,i),o!==0&&o!==j.retryLane))throw j.retryLane=o,El(t,o),gn(b,t,o),Lu;Ed(E)||eo(),a=Fu(t,a,i)}else Ed(E)?(a.flags|=192,a.child=t.child,a=null):(t=j.treeContext,ut=Hn(E.nextSibling),Zt=a,$e=!0,Ba=null,Un=!1,t!==null&&gm(a,t),a=Zu(a,o.children),a.flags|=4096);return a}return d?(Za(),E=o.fallback,d=a.mode,j=t.child,$=j.sibling,o=ga(j,{mode:"hidden",children:o.children}),o.subtreeFlags=j.subtreeFlags&65011712,$!==null?E=ga($,E):(E=Nl(E,d,i,null),E.flags|=2),E.return=a,o.return=a,o.sibling=E,a.child=o,xi(null,o),o=a.child,E=t.child.memoizedState,E===null?E=$u(i):(d=E.cachePool,d!==null?(j=Dt._currentValue,d=d.parent!==j?{parent:j,pool:j}:d):d=Sm(),E={baseLanes:E.baseLanes|i,cachePool:d}),o.memoizedState=E,o.childLanes=Hu(t,b,i),a.memoizedState=Uu,xi(t.child,o)):(Ha(a),i=t.child,t=i.sibling,i=ga(i,{mode:"visible",children:o.children}),i.return=a,i.sibling=null,t!==null&&(b=a.deletions,b===null?(a.deletions=[t],a.flags|=16):b.push(t)),a.child=i,a.memoizedState=null,i)}function Zu(t,a){return a=Fr({mode:"visible",children:a},t.mode),a.return=t,t.child=a}function Fr(t,a){return t=Sn(22,t,null,a),t.lanes=0,t}function Fu(t,a,i){return Al(a,t.child,null,i),t=Zu(a,a.pendingProps.children),t.flags|=2,a.memoizedState=null,t}function zg(t,a,i){t.lanes|=a;var o=t.alternate;o!==null&&(o.lanes|=a),iu(t.return,a,i)}function Yu(t,a,i,o,d,h){var b=t.memoizedState;b===null?t.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:d,treeForkCount:h}:(b.isBackwards=a,b.rendering=null,b.renderingStartTime=0,b.last=o,b.tail=i,b.tailMode=d,b.treeForkCount=h)}function Og(t,a,i){var o=a.pendingProps,d=o.revealOrder,h=o.tail;o=o.children;var b=Nt.current,E=(b&2)!==0;if(E?(b=b&1|2,a.flags|=128):b&=1,J(Nt,b),Yt(t,a,o,i),o=$e?ri:0,!E&&t!==null&&(t.flags&128)!==0)e:for(t=a.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zg(t,i,a);else if(t.tag===19)zg(t,i,a);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===a)break e;for(;t.sibling===null;){if(t.return===null||t.return===a)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(i=a.child,d=null;i!==null;)t=i.alternate,t!==null&&kr(t)===null&&(d=i),i=i.sibling;i=d,i===null?(d=a.child,a.child=null):(d=i.sibling,i.sibling=null),Yu(a,!1,d,i,h,o);break;case"backwards":case"unstable_legacy-backwards":for(i=null,d=a.child,a.child=null;d!==null;){if(t=d.alternate,t!==null&&kr(t)===null){a.child=d;break}t=d.sibling,d.sibling=i,i=d,d=t}Yu(a,!0,i,null,h,o);break;case"together":Yu(a,!1,null,null,void 0,o);break;default:a.memoizedState=null}return a.child}function Sa(t,a,i){if(t!==null&&(a.dependencies=t.dependencies),Ga|=a.lanes,(i&a.childLanes)===0)if(t!==null){if(os(t,a,i,!1),(i&a.childLanes)===0)return null}else return null;if(t!==null&&a.child!==t.child)throw Error(s(153));if(a.child!==null){for(t=a.child,i=ga(t,t.pendingProps),a.child=i,i.return=a;t.sibling!==null;)t=t.sibling,i=i.sibling=ga(t,t.pendingProps),i.return=a;i.sibling=null}return a.child}function Gu(t,a){return(t.lanes&a)!==0?!0:(t=t.dependencies,!!(t!==null&&Nr(t)))}function a1(t,a,i){switch(a.tag){case 3:ze(a,a.stateNode.containerInfo),La(a,Dt,t.memoizedState.cache),Tl();break;case 27:case 5:Ge(a);break;case 4:ze(a,a.stateNode.containerInfo);break;case 10:La(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,yu(a),null;break;case 13:var o=a.memoizedState;if(o!==null)return o.dehydrated!==null?(Ha(a),a.flags|=128,null):(i&a.child.childLanes)!==0?kg(t,a,i):(Ha(a),t=Sa(t,a,i),t!==null?t.sibling:null);Ha(a);break;case 19:var d=(t.flags&128)!==0;if(o=(i&a.childLanes)!==0,o||(os(t,a,i,!1),o=(i&a.childLanes)!==0),d){if(o)return Og(t,a,i);a.flags|=128}if(d=a.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),J(Nt,Nt.current),o)break;return null;case 22:return a.lanes=0,Mg(t,a,i,a.pendingProps);case 24:La(a,Dt,t.memoizedState.cache)}return Sa(t,a,i)}function Pg(t,a,i){if(t!==null)if(t.memoizedProps!==a.pendingProps)Ct=!0;else{if(!Gu(t,i)&&(a.flags&128)===0)return Ct=!1,a1(t,a,i);Ct=(t.flags&131072)!==0}else Ct=!1,$e&&(a.flags&1048576)!==0&&mm(a,ri,a.index);switch(a.lanes=0,a.tag){case 16:e:{var o=a.pendingProps;if(t=Cl(a.elementType),a.type=t,typeof t=="function")Qc(t)?(o=zl(t,o),a.tag=1,a=Rg(null,a,t,o,i)):(a.tag=0,a=qu(null,a,t,o,i));else{if(t!=null){var d=t.$$typeof;if(d===L){a.tag=11,a=Eg(null,a,t,o,i);break e}else if(d===D){a.tag=14,a=Ng(null,a,t,o,i);break e}}throw a=ue(t)||t,Error(s(306,a,""))}}return a;case 0:return qu(t,a,a.type,a.pendingProps,i);case 1:return o=a.type,d=zl(o,a.pendingProps),Rg(t,a,o,d,i);case 3:e:{if(ze(a,a.stateNode.containerInfo),t===null)throw Error(s(387));o=a.pendingProps;var h=a.memoizedState;d=h.element,hu(t,a),gi(a,o,null,i);var b=a.memoizedState;if(o=b.cache,La(a,Dt,o),o!==h.cache&&ru(a,[Dt],i,!0),mi(),o=b.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:b.cache},a.updateQueue.baseState=h,a.memoizedState=h,a.flags&256){a=Ag(t,a,o,i);break e}else if(o!==d){d=In(Error(s(424)),a),oi(d),a=Ag(t,a,o,i);break e}else for(t=a.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,ut=Hn(t.firstChild),Zt=a,$e=!0,Ba=null,Un=!0,i=Mm(a,null,o,i),a.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Tl(),o===d){a=Sa(t,a,i);break e}Yt(t,a,o,i)}a=a.child}return a;case 26:return Zr(t,a),t===null?(i=Gp(a.type,null,a.pendingProps,null))?a.memoizedState=i:$e||(i=a.type,t=a.pendingProps,o=ro(ge.current).createElement(i),o[Ht]=a,o[cn]=t,Gt(o,i,t),It(o),a.stateNode=o):a.memoizedState=Gp(a.type,t.memoizedProps,a.pendingProps,t.memoizedState),null;case 27:return Ge(a),t===null&&$e&&(o=a.stateNode=Zp(a.type,a.pendingProps,ge.current),Zt=a,Un=!0,d=ut,Qa(a.type)?(Td=d,ut=Hn(o.firstChild)):ut=d),Yt(t,a,a.pendingProps.children,i),Zr(t,a),t===null&&(a.flags|=4194304),a.child;case 5:return t===null&&$e&&((d=o=ut)&&(o=k1(o,a.type,a.pendingProps,Un),o!==null?(a.stateNode=o,Zt=a,ut=Hn(o.firstChild),Un=!1,d=!0):d=!1),d||Ia(a)),Ge(a),d=a.type,h=a.pendingProps,b=t!==null?t.memoizedProps:null,o=h.children,Sd(d,h)?o=null:b!==null&&Sd(d,b)&&(a.flags|=32),a.memoizedState!==null&&(d=xu(t,a,VS,null,null,i),Oi._currentValue=d),Zr(t,a),Yt(t,a,o,i),a.child;case 6:return t===null&&$e&&((t=i=ut)&&(i=z1(i,a.pendingProps,Un),i!==null?(a.stateNode=i,Zt=a,ut=null,t=!0):t=!1),t||Ia(a)),null;case 13:return kg(t,a,i);case 4:return ze(a,a.stateNode.containerInfo),o=a.pendingProps,t===null?a.child=Al(a,null,o,i):Yt(t,a,o,i),a.child;case 11:return Eg(t,a,a.type,a.pendingProps,i);case 7:return Yt(t,a,a.pendingProps,i),a.child;case 8:return Yt(t,a,a.pendingProps.children,i),a.child;case 12:return Yt(t,a,a.pendingProps.children,i),a.child;case 10:return o=a.pendingProps,La(a,a.type,o.value),Yt(t,a,o.children,i),a.child;case 9:return d=a.type._context,o=a.pendingProps.children,Dl(a),d=Ft(d),o=o(d),a.flags|=1,Yt(t,a,o,i),a.child;case 14:return Ng(t,a,a.type,a.pendingProps,i);case 15:return Tg(t,a,a.type,a.pendingProps,i);case 19:return Og(t,a,i);case 31:return n1(t,a,i);case 22:return Mg(t,a,i,a.pendingProps);case 24:return Dl(a),o=Ft(Dt),t===null?(d=uu(),d===null&&(d=rt,h=ou(),d.pooledCache=h,h.refCount++,h!==null&&(d.pooledCacheLanes|=i),d=h),a.memoizedState={parent:o,cache:d},fu(a),La(a,Dt,d)):((t.lanes&i)!==0&&(hu(t,a),gi(a,null,null,i),mi()),d=t.memoizedState,h=a.memoizedState,d.parent!==o?(d={parent:o,cache:o},a.memoizedState=d,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=d),La(a,Dt,o)):(o=h.cache,La(a,Dt,o),o!==d.cache&&ru(a,[Dt],i,!0))),Yt(t,a,a.pendingProps.children,i),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function wa(t){t.flags|=4}function Vu(t,a,i,o,d){if((a=(t.mode&32)!==0)&&(a=!1),a){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(cp())t.flags|=8192;else throw Rl=jr,du}else t.flags&=-16777217}function Bg(t,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Qp(a))if(cp())t.flags|=8192;else throw Rl=jr,du}function Yr(t,a){a!==null&&(t.flags|=4),t.flags&16384&&(a=t.tag!==22?Mt():536870912,t.lanes|=a,xs|=a)}function Si(t,a){if(!$e)switch(t.tailMode){case"hidden":a=t.tail;for(var i=null;a!==null;)a.alternate!==null&&(i=a),a=a.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?a||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function dt(t){var a=t.alternate!==null&&t.alternate.child===t.child,i=0,o=0;if(a)for(var d=t.child;d!==null;)i|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)i|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=o,t.childLanes=i,a}function l1(t,a,i){var o=a.pendingProps;switch(nu(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(a),null;case 1:return dt(a),null;case 3:return i=a.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),ya(Dt),Oe(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(rs(a)?wa(a):t===null||t.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,lu())),dt(a),null;case 26:var d=a.type,h=a.memoizedState;return t===null?(wa(a),h!==null?(dt(a),Bg(a,h)):(dt(a),Vu(a,d,null,o,i))):h?h!==t.memoizedState?(wa(a),dt(a),Bg(a,h)):(dt(a),a.flags&=-16777217):(t=t.memoizedProps,t!==o&&wa(a),dt(a),Vu(a,d,t,o,i)),null;case 27:if(kt(a),i=ge.current,d=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&wa(a);else{if(!o){if(a.stateNode===null)throw Error(s(166));return dt(a),null}t=ae.current,rs(a)?pm(a):(t=Zp(d,o,i),a.stateNode=t,wa(a))}return dt(a),null;case 5:if(kt(a),d=a.type,t!==null&&a.stateNode!=null)t.memoizedProps!==o&&wa(a);else{if(!o){if(a.stateNode===null)throw Error(s(166));return dt(a),null}if(h=ae.current,rs(a))pm(a);else{var b=ro(ge.current);switch(h){case 1:h=b.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:h=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":h=b.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":h=b.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":h=b.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof o.is=="string"?b.createElement("select",{is:o.is}):b.createElement("select"),o.multiple?h.multiple=!0:o.size&&(h.size=o.size);break;default:h=typeof o.is=="string"?b.createElement(d,{is:o.is}):b.createElement(d)}}h[Ht]=a,h[cn]=o;e:for(b=a.child;b!==null;){if(b.tag===5||b.tag===6)h.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===a)break e;for(;b.sibling===null;){if(b.return===null||b.return===a)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}a.stateNode=h;e:switch(Gt(h,d,o),d){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&wa(a)}}return dt(a),Vu(a,a.type,t===null?null:t.memoizedProps,a.pendingProps,i),null;case 6:if(t&&a.stateNode!=null)t.memoizedProps!==o&&wa(a);else{if(typeof o!="string"&&a.stateNode===null)throw Error(s(166));if(t=ge.current,rs(a)){if(t=a.stateNode,i=a.memoizedProps,o=null,d=Zt,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}t[Ht]=a,t=!!(t.nodeValue===i||o!==null&&o.suppressHydrationWarning===!0||kp(t.nodeValue,i)),t||Ia(a,!0)}else t=ro(t).createTextNode(o),t[Ht]=a,a.stateNode=t}return dt(a),null;case 31:if(i=a.memoizedState,t===null||t.memoizedState!==null){if(o=rs(a),i!==null){if(t===null){if(!o)throw Error(s(318));if(t=a.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Ht]=a}else Tl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;dt(a),t=!1}else i=lu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),t=!0;if(!t)return a.flags&256?(_n(a),a):(_n(a),null);if((a.flags&128)!==0)throw Error(s(558))}return dt(a),null;case 13:if(o=a.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=rs(a),o!==null&&o.dehydrated!==null){if(t===null){if(!d)throw Error(s(318));if(d=a.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[Ht]=a}else Tl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;dt(a),d=!1}else d=lu(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return a.flags&256?(_n(a),a):(_n(a),null)}return _n(a),(a.flags&128)!==0?(a.lanes=i,a):(i=o!==null,t=t!==null&&t.memoizedState!==null,i&&(o=a.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool),h=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),h!==d&&(o.flags|=2048)),i!==t&&i&&(a.child.flags|=8192),Yr(a,a.updateQueue),dt(a),null);case 4:return Oe(),t===null&&pd(a.stateNode.containerInfo),dt(a),null;case 10:return ya(a.type),dt(a),null;case 19:if(q(Nt),o=a.memoizedState,o===null)return dt(a),null;if(d=(a.flags&128)!==0,h=o.rendering,h===null)if(d)Si(o,!1);else{if(yt!==0||t!==null&&(t.flags&128)!==0)for(t=a.child;t!==null;){if(h=kr(t),h!==null){for(a.flags|=128,Si(o,!1),t=h.updateQueue,a.updateQueue=t,Yr(a,t),a.subtreeFlags=0,t=i,i=a.child;i!==null;)dm(i,t),i=i.sibling;return J(Nt,Nt.current&1|2),$e&&pa(a,o.treeForkCount),a.child}t=t.sibling}o.tail!==null&&ke()>Xr&&(a.flags|=128,d=!0,Si(o,!1),a.lanes=4194304)}else{if(!d)if(t=kr(h),t!==null){if(a.flags|=128,d=!0,t=t.updateQueue,a.updateQueue=t,Yr(a,t),Si(o,!0),o.tail===null&&o.tailMode==="hidden"&&!h.alternate&&!$e)return dt(a),null}else 2*ke()-o.renderingStartTime>Xr&&i!==536870912&&(a.flags|=128,d=!0,Si(o,!1),a.lanes=4194304);o.isBackwards?(h.sibling=a.child,a.child=h):(t=o.last,t!==null?t.sibling=h:a.child=h,o.last=h)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ke(),t.sibling=null,i=Nt.current,J(Nt,d?i&1|2:i&1),$e&&pa(a,o.treeForkCount),t):(dt(a),null);case 22:case 23:return _n(a),vu(),o=a.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(a.flags|=8192):o&&(a.flags|=8192),o?(i&536870912)!==0&&(a.flags&128)===0&&(dt(a),a.subtreeFlags&6&&(a.flags|=8192)):dt(a),i=a.updateQueue,i!==null&&Yr(a,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==i&&(a.flags|=2048),t!==null&&q(jl),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),a.memoizedState.cache!==i&&(a.flags|=2048),ya(Dt),dt(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function s1(t,a){switch(nu(a),a.tag){case 1:return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 3:return ya(Dt),Oe(),t=a.flags,(t&65536)!==0&&(t&128)===0?(a.flags=t&-65537|128,a):null;case 26:case 27:case 5:return kt(a),null;case 31:if(a.memoizedState!==null){if(_n(a),a.alternate===null)throw Error(s(340));Tl()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 13:if(_n(a),t=a.memoizedState,t!==null&&t.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Tl()}return t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 19:return q(Nt),null;case 4:return Oe(),null;case 10:return ya(a.type),null;case 22:case 23:return _n(a),vu(),t!==null&&q(jl),t=a.flags,t&65536?(a.flags=t&-65537|128,a):null;case 24:return ya(Dt),null;case 25:return null;default:return null}}function Ig(t,a){switch(nu(a),a.tag){case 3:ya(Dt),Oe();break;case 26:case 27:case 5:kt(a);break;case 4:Oe();break;case 31:a.memoizedState!==null&&_n(a);break;case 13:_n(a);break;case 19:q(Nt);break;case 10:ya(a.type);break;case 22:case 23:_n(a),vu(),t!==null&&q(jl);break;case 24:ya(Dt)}}function wi(t,a){try{var i=a.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var d=o.next;i=d;do{if((i.tag&t)===t){o=void 0;var h=i.create,b=i.inst;o=h(),b.destroy=o}i=i.next}while(i!==d)}}catch(E){Je(a,a.return,E)}}function Fa(t,a,i){try{var o=a.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var h=d.next;o=h;do{if((o.tag&t)===t){var b=o.inst,E=b.destroy;if(E!==void 0){b.destroy=void 0,d=a;var j=i,$=E;try{$()}catch(K){Je(d,j,K)}}}o=o.next}while(o!==h)}}catch(K){Je(a,a.return,K)}}function Lg(t){var a=t.updateQueue;if(a!==null){var i=t.stateNode;try{jm(a,i)}catch(o){Je(t,t.return,o)}}}function qg(t,a,i){i.props=zl(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(o){Je(t,a,o)}}function _i(t,a){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof i=="function"?t.refCleanup=i(o):i.current=o}}catch(d){Je(t,a,d)}}function ia(t,a){var i=t.ref,o=t.refCleanup;if(i!==null)if(typeof o=="function")try{o()}catch(d){Je(t,a,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(d){Je(t,a,d)}else i.current=null}function Ug(t){var a=t.type,i=t.memoizedProps,o=t.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":i.autoFocus&&o.focus();break e;case"img":i.src?o.src=i.src:i.srcSet&&(o.srcset=i.srcSet)}}catch(d){Je(t,t.return,d)}}function Ku(t,a,i){try{var o=t.stateNode;M1(o,t.type,i,a),o[cn]=a}catch(d){Je(t,t.return,d)}}function $g(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Qa(t.type)||t.tag===4}function Wu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$g(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Qa(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xu(t,a,i){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,a):(a=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.appendChild(t),i=i._reactRootContainer,i!=null||a.onclick!==null||(a.onclick=ha));else if(o!==4&&(o===27&&Qa(t.type)&&(i=t.stateNode,a=null),t=t.child,t!==null))for(Xu(t,a,i),t=t.sibling;t!==null;)Xu(t,a,i),t=t.sibling}function Gr(t,a,i){var o=t.tag;if(o===5||o===6)t=t.stateNode,a?i.insertBefore(t,a):i.appendChild(t);else if(o!==4&&(o===27&&Qa(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(Gr(t,a,i),t=t.sibling;t!==null;)Gr(t,a,i),t=t.sibling}function Hg(t){var a=t.stateNode,i=t.memoizedProps;try{for(var o=t.type,d=a.attributes;d.length;)a.removeAttributeNode(d[0]);Gt(a,o,i),a[Ht]=t,a[cn]=i}catch(h){Je(t,t.return,h)}}var _a=!1,Rt=!1,Qu=!1,Zg=typeof WeakSet=="function"?WeakSet:Set,Lt=null;function i1(t,a){if(t=t.containerInfo,bd=go,t=nm(t),Fc(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var o=i.getSelection&&i.getSelection();if(o&&o.rangeCount!==0){i=o.anchorNode;var d=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{i.nodeType,h.nodeType}catch{i=null;break e}var b=0,E=-1,j=-1,$=0,K=0,ne=t,Z=null;t:for(;;){for(var Y;ne!==i||d!==0&&ne.nodeType!==3||(E=b+d),ne!==h||o!==0&&ne.nodeType!==3||(j=b+o),ne.nodeType===3&&(b+=ne.nodeValue.length),(Y=ne.firstChild)!==null;)Z=ne,ne=Y;for(;;){if(ne===t)break t;if(Z===i&&++$===d&&(E=b),Z===h&&++K===o&&(j=b),(Y=ne.nextSibling)!==null)break;ne=Z,Z=ne.parentNode}ne=Y}i=E===-1||j===-1?null:{start:E,end:j}}else i=null}i=i||{start:0,end:0}}else i=null;for(xd={focusedElem:t,selectionRange:i},go=!1,Lt=a;Lt!==null;)if(a=Lt,t=a.child,(a.subtreeFlags&1028)!==0&&t!==null)t.return=a,Lt=t;else for(;Lt!==null;){switch(a=Lt,h=a.alternate,t=a.flags,a.tag){case 0:if((t&4)!==0&&(t=a.updateQueue,t=t!==null?t.events:null,t!==null))for(i=0;i<t.length;i++)d=t[i],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&h!==null){t=void 0,i=a,d=h.memoizedProps,h=h.memoizedState,o=i.stateNode;try{var me=zl(i.type,d);t=o.getSnapshotBeforeUpdate(me,h),o.__reactInternalSnapshotBeforeUpdate=t}catch(Se){Je(i,i.return,Se)}}break;case 3:if((t&1024)!==0){if(t=a.stateNode.containerInfo,i=t.nodeType,i===9)_d(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":_d(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=a.sibling,t!==null){t.return=a.return,Lt=t;break}Lt=a.return}}function Fg(t,a,i){var o=i.flags;switch(i.tag){case 0:case 11:case 15:Na(t,i),o&4&&wi(5,i);break;case 1:if(Na(t,i),o&4)if(t=i.stateNode,a===null)try{t.componentDidMount()}catch(b){Je(i,i.return,b)}else{var d=zl(i.type,a.memoizedProps);a=a.memoizedState;try{t.componentDidUpdate(d,a,t.__reactInternalSnapshotBeforeUpdate)}catch(b){Je(i,i.return,b)}}o&64&&Lg(i),o&512&&_i(i,i.return);break;case 3:if(Na(t,i),o&64&&(t=i.updateQueue,t!==null)){if(a=null,i.child!==null)switch(i.child.tag){case 27:case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}try{jm(t,a)}catch(b){Je(i,i.return,b)}}break;case 27:a===null&&o&4&&Hg(i);case 26:case 5:Na(t,i),a===null&&o&4&&Ug(i),o&512&&_i(i,i.return);break;case 12:Na(t,i);break;case 31:Na(t,i),o&4&&Vg(t,i);break;case 13:Na(t,i),o&4&&Kg(t,i),o&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=g1.bind(null,i),O1(t,i))));break;case 22:if(o=i.memoizedState!==null||_a,!o){a=a!==null&&a.memoizedState!==null||Rt,d=_a;var h=Rt;_a=o,(Rt=a)&&!h?Ta(t,i,(i.subtreeFlags&8772)!==0):Na(t,i),_a=d,Rt=h}break;case 30:break;default:Na(t,i)}}function Yg(t){var a=t.alternate;a!==null&&(t.alternate=null,Yg(a)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(a=t.stateNode,a!==null&&Dc(a)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ft=null,dn=!1;function Ea(t,a,i){for(i=i.child;i!==null;)Gg(t,a,i),i=i.sibling}function Gg(t,a,i){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(aa,i)}catch{}switch(i.tag){case 26:Rt||ia(i,a),Ea(t,a,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Rt||ia(i,a);var o=ft,d=dn;Qa(i.type)&&(ft=i.stateNode,dn=!1),Ea(t,a,i),Ai(i.stateNode),ft=o,dn=d;break;case 5:Rt||ia(i,a);case 6:if(o=ft,d=dn,ft=null,Ea(t,a,i),ft=o,dn=d,ft!==null)if(dn)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(i.stateNode)}catch(h){Je(i,a,h)}else try{ft.removeChild(i.stateNode)}catch(h){Je(i,a,h)}break;case 18:ft!==null&&(dn?(t=ft,Lp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),Ds(t)):Lp(ft,i.stateNode));break;case 4:o=ft,d=dn,ft=i.stateNode.containerInfo,dn=!0,Ea(t,a,i),ft=o,dn=d;break;case 0:case 11:case 14:case 15:Fa(2,i,a),Rt||Fa(4,i,a),Ea(t,a,i);break;case 1:Rt||(ia(i,a),o=i.stateNode,typeof o.componentWillUnmount=="function"&&qg(i,a,o)),Ea(t,a,i);break;case 21:Ea(t,a,i);break;case 22:Rt=(o=Rt)||i.memoizedState!==null,Ea(t,a,i),Rt=o;break;default:Ea(t,a,i)}}function Vg(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ds(t)}catch(i){Je(a,a.return,i)}}}function Kg(t,a){if(a.memoizedState===null&&(t=a.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ds(t)}catch(i){Je(a,a.return,i)}}function r1(t){switch(t.tag){case 31:case 13:case 19:var a=t.stateNode;return a===null&&(a=t.stateNode=new Zg),a;case 22:return t=t.stateNode,a=t._retryCache,a===null&&(a=t._retryCache=new Zg),a;default:throw Error(s(435,t.tag))}}function Vr(t,a){var i=r1(t);a.forEach(function(o){if(!i.has(o)){i.add(o);var d=p1.bind(null,t,o);o.then(d,d)}})}function fn(t,a){var i=a.deletions;if(i!==null)for(var o=0;o<i.length;o++){var d=i[o],h=t,b=a,E=b;e:for(;E!==null;){switch(E.tag){case 27:if(Qa(E.type)){ft=E.stateNode,dn=!1;break e}break;case 5:ft=E.stateNode,dn=!1;break e;case 3:case 4:ft=E.stateNode.containerInfo,dn=!0;break e}E=E.return}if(ft===null)throw Error(s(160));Gg(h,b,d),ft=null,dn=!1,h=d.alternate,h!==null&&(h.return=null),d.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Wg(a,t),a=a.sibling}var Wn=null;function Wg(t,a){var i=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:fn(a,t),hn(t),o&4&&(Fa(3,t,t.return),wi(3,t),Fa(5,t,t.return));break;case 1:fn(a,t),hn(t),o&512&&(Rt||i===null||ia(i,i.return)),o&64&&_a&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?o:i.concat(o))));break;case 26:var d=Wn;if(fn(a,t),hn(t),o&512&&(Rt||i===null||ia(i,i.return)),o&4){var h=i!==null?i.memoizedState:null;if(o=t.memoizedState,i===null)if(o===null)if(t.stateNode===null){e:{o=t.type,i=t.memoizedProps,d=d.ownerDocument||d;t:switch(o){case"title":h=d.getElementsByTagName("title")[0],(!h||h[Ws]||h[Ht]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=d.createElement(o),d.head.insertBefore(h,d.querySelector("head > title"))),Gt(h,o,i),h[Ht]=t,It(h),o=h;break e;case"link":var b=Wp("link","href",d).get(o+(i.href||""));if(b){for(var E=0;E<b.length;E++)if(h=b[E],h.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&h.getAttribute("rel")===(i.rel==null?null:i.rel)&&h.getAttribute("title")===(i.title==null?null:i.title)&&h.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){b.splice(E,1);break t}}h=d.createElement(o),Gt(h,o,i),d.head.appendChild(h);break;case"meta":if(b=Wp("meta","content",d).get(o+(i.content||""))){for(E=0;E<b.length;E++)if(h=b[E],h.getAttribute("content")===(i.content==null?null:""+i.content)&&h.getAttribute("name")===(i.name==null?null:i.name)&&h.getAttribute("property")===(i.property==null?null:i.property)&&h.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&h.getAttribute("charset")===(i.charSet==null?null:i.charSet)){b.splice(E,1);break t}}h=d.createElement(o),Gt(h,o,i),d.head.appendChild(h);break;default:throw Error(s(468,o))}h[Ht]=t,It(h),o=h}t.stateNode=o}else Xp(d,t.type,t.stateNode);else t.stateNode=Kp(d,o,t.memoizedProps);else h!==o?(h===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):h.count--,o===null?Xp(d,t.type,t.stateNode):Kp(d,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Ku(t,t.memoizedProps,i.memoizedProps)}break;case 27:fn(a,t),hn(t),o&512&&(Rt||i===null||ia(i,i.return)),i!==null&&o&4&&Ku(t,t.memoizedProps,i.memoizedProps);break;case 5:if(fn(a,t),hn(t),o&512&&(Rt||i===null||ia(i,i.return)),t.flags&32){d=t.stateNode;try{Xl(d,"")}catch(me){Je(t,t.return,me)}}o&4&&t.stateNode!=null&&(d=t.memoizedProps,Ku(t,d,i!==null?i.memoizedProps:d)),o&1024&&(Qu=!0);break;case 6:if(fn(a,t),hn(t),o&4){if(t.stateNode===null)throw Error(s(162));o=t.memoizedProps,i=t.stateNode;try{i.nodeValue=o}catch(me){Je(t,t.return,me)}}break;case 3:if(uo=null,d=Wn,Wn=oo(a.containerInfo),fn(a,t),Wn=d,hn(t),o&4&&i!==null&&i.memoizedState.isDehydrated)try{Ds(a.containerInfo)}catch(me){Je(t,t.return,me)}Qu&&(Qu=!1,Xg(t));break;case 4:o=Wn,Wn=oo(t.stateNode.containerInfo),fn(a,t),hn(t),Wn=o;break;case 12:fn(a,t),hn(t);break;case 31:fn(a,t),hn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Vr(t,o)));break;case 13:fn(a,t),hn(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Wr=ke()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Vr(t,o)));break;case 22:d=t.memoizedState!==null;var j=i!==null&&i.memoizedState!==null,$=_a,K=Rt;if(_a=$||d,Rt=K||j,fn(a,t),Rt=K,_a=$,hn(t),o&8192)e:for(a=t.stateNode,a._visibility=d?a._visibility&-2:a._visibility|1,d&&(i===null||j||_a||Rt||Ol(t)),i=null,a=t;;){if(a.tag===5||a.tag===26){if(i===null){j=i=a;try{if(h=j.stateNode,d)b=h.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{E=j.stateNode;var ne=j.memoizedProps.style,Z=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;E.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(me){Je(j,j.return,me)}}}else if(a.tag===6){if(i===null){j=a;try{j.stateNode.nodeValue=d?"":j.memoizedProps}catch(me){Je(j,j.return,me)}}}else if(a.tag===18){if(i===null){j=a;try{var Y=j.stateNode;d?qp(Y,!0):qp(j.stateNode,!1)}catch(me){Je(j,j.return,me)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===t)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===t)break e;for(;a.sibling===null;){if(a.return===null||a.return===t)break e;i===a&&(i=null),a=a.return}i===a&&(i=null),a.sibling.return=a.return,a=a.sibling}o&4&&(o=t.updateQueue,o!==null&&(i=o.retryQueue,i!==null&&(o.retryQueue=null,Vr(t,i))));break;case 19:fn(a,t),hn(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Vr(t,o)));break;case 30:break;case 21:break;default:fn(a,t),hn(t)}}function hn(t){var a=t.flags;if(a&2){try{for(var i,o=t.return;o!==null;){if($g(o)){i=o;break}o=o.return}if(i==null)throw Error(s(160));switch(i.tag){case 27:var d=i.stateNode,h=Wu(t);Gr(t,h,d);break;case 5:var b=i.stateNode;i.flags&32&&(Xl(b,""),i.flags&=-33);var E=Wu(t);Gr(t,E,b);break;case 3:case 4:var j=i.stateNode.containerInfo,$=Wu(t);Xu(t,$,j);break;default:throw Error(s(161))}}catch(K){Je(t,t.return,K)}t.flags&=-3}a&4096&&(t.flags&=-4097)}function Xg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var a=t;Xg(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),t=t.sibling}}function Na(t,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Fg(t,a.alternate,a),a=a.sibling}function Ol(t){for(t=t.child;t!==null;){var a=t;switch(a.tag){case 0:case 11:case 14:case 15:Fa(4,a,a.return),Ol(a);break;case 1:ia(a,a.return);var i=a.stateNode;typeof i.componentWillUnmount=="function"&&qg(a,a.return,i),Ol(a);break;case 27:Ai(a.stateNode);case 26:case 5:ia(a,a.return),Ol(a);break;case 22:a.memoizedState===null&&Ol(a);break;case 30:Ol(a);break;default:Ol(a)}t=t.sibling}}function Ta(t,a,i){for(i=i&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var o=a.alternate,d=t,h=a,b=h.flags;switch(h.tag){case 0:case 11:case 15:Ta(d,h,i),wi(4,h);break;case 1:if(Ta(d,h,i),o=h,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch($){Je(o,o.return,$)}if(o=h,d=o.updateQueue,d!==null){var E=o.stateNode;try{var j=d.shared.hiddenCallbacks;if(j!==null)for(d.shared.hiddenCallbacks=null,d=0;d<j.length;d++)Dm(j[d],E)}catch($){Je(o,o.return,$)}}i&&b&64&&Lg(h),_i(h,h.return);break;case 27:Hg(h);case 26:case 5:Ta(d,h,i),i&&o===null&&b&4&&Ug(h),_i(h,h.return);break;case 12:Ta(d,h,i);break;case 31:Ta(d,h,i),i&&b&4&&Vg(d,h);break;case 13:Ta(d,h,i),i&&b&4&&Kg(d,h);break;case 22:h.memoizedState===null&&Ta(d,h,i),_i(h,h.return);break;case 30:break;default:Ta(d,h,i)}a=a.sibling}}function Ju(t,a){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(t=a.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&ci(i))}function ed(t,a){t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&ci(t))}function Xn(t,a,i,o){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Qg(t,a,i,o),a=a.sibling}function Qg(t,a,i,o){var d=a.flags;switch(a.tag){case 0:case 11:case 15:Xn(t,a,i,o),d&2048&&wi(9,a);break;case 1:Xn(t,a,i,o);break;case 3:Xn(t,a,i,o),d&2048&&(t=null,a.alternate!==null&&(t=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==t&&(a.refCount++,t!=null&&ci(t)));break;case 12:if(d&2048){Xn(t,a,i,o),t=a.stateNode;try{var h=a.memoizedProps,b=h.id,E=h.onPostCommit;typeof E=="function"&&E(b,a.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(j){Je(a,a.return,j)}}else Xn(t,a,i,o);break;case 31:Xn(t,a,i,o);break;case 13:Xn(t,a,i,o);break;case 23:break;case 22:h=a.stateNode,b=a.alternate,a.memoizedState!==null?h._visibility&2?Xn(t,a,i,o):Ei(t,a):h._visibility&2?Xn(t,a,i,o):(h._visibility|=2,vs(t,a,i,o,(a.subtreeFlags&10256)!==0||!1)),d&2048&&Ju(b,a);break;case 24:Xn(t,a,i,o),d&2048&&ed(a.alternate,a);break;default:Xn(t,a,i,o)}}function vs(t,a,i,o,d){for(d=d&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var h=t,b=a,E=i,j=o,$=b.flags;switch(b.tag){case 0:case 11:case 15:vs(h,b,E,j,d),wi(8,b);break;case 23:break;case 22:var K=b.stateNode;b.memoizedState!==null?K._visibility&2?vs(h,b,E,j,d):Ei(h,b):(K._visibility|=2,vs(h,b,E,j,d)),d&&$&2048&&Ju(b.alternate,b);break;case 24:vs(h,b,E,j,d),d&&$&2048&&ed(b.alternate,b);break;default:vs(h,b,E,j,d)}a=a.sibling}}function Ei(t,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var i=t,o=a,d=o.flags;switch(o.tag){case 22:Ei(i,o),d&2048&&Ju(o.alternate,o);break;case 24:Ei(i,o),d&2048&&ed(o.alternate,o);break;default:Ei(i,o)}a=a.sibling}}var Ni=8192;function ys(t,a,i){if(t.subtreeFlags&Ni)for(t=t.child;t!==null;)Jg(t,a,i),t=t.sibling}function Jg(t,a,i){switch(t.tag){case 26:ys(t,a,i),t.flags&Ni&&t.memoizedState!==null&&G1(i,Wn,t.memoizedState,t.memoizedProps);break;case 5:ys(t,a,i);break;case 3:case 4:var o=Wn;Wn=oo(t.stateNode.containerInfo),ys(t,a,i),Wn=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Ni,Ni=16777216,ys(t,a,i),Ni=o):ys(t,a,i));break;default:ys(t,a,i)}}function ep(t){var a=t.alternate;if(a!==null&&(t=a.child,t!==null)){a.child=null;do a=t.sibling,t.sibling=null,t=a;while(t!==null)}}function Ti(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var o=a[i];Lt=o,np(o,t)}ep(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)tp(t),t=t.sibling}function tp(t){switch(t.tag){case 0:case 11:case 15:Ti(t),t.flags&2048&&Fa(9,t,t.return);break;case 3:Ti(t);break;case 12:Ti(t);break;case 22:var a=t.stateNode;t.memoizedState!==null&&a._visibility&2&&(t.return===null||t.return.tag!==13)?(a._visibility&=-3,Kr(t)):Ti(t);break;default:Ti(t)}}function Kr(t){var a=t.deletions;if((t.flags&16)!==0){if(a!==null)for(var i=0;i<a.length;i++){var o=a[i];Lt=o,np(o,t)}ep(t)}for(t=t.child;t!==null;){switch(a=t,a.tag){case 0:case 11:case 15:Fa(8,a,a.return),Kr(a);break;case 22:i=a.stateNode,i._visibility&2&&(i._visibility&=-3,Kr(a));break;default:Kr(a)}t=t.sibling}}function np(t,a){for(;Lt!==null;){var i=Lt;switch(i.tag){case 0:case 11:case 15:Fa(8,i,a);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var o=i.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ci(i.memoizedState.cache)}if(o=i.child,o!==null)o.return=i,Lt=o;else e:for(i=t;Lt!==null;){o=Lt;var d=o.sibling,h=o.return;if(Yg(o),o===i){Lt=null;break e}if(d!==null){d.return=h,Lt=d;break e}Lt=h}}}var o1={getCacheForType:function(t){var a=Ft(Dt),i=a.data.get(t);return i===void 0&&(i=t(),a.data.set(t,i)),i},cacheSignal:function(){return Ft(Dt).controller.signal}},c1=typeof WeakMap=="function"?WeakMap:Map,Ke=0,rt=null,Be=null,Le=0,Qe=0,En=null,Ya=!1,bs=!1,td=!1,Ma=0,yt=0,Ga=0,Pl=0,nd=0,Nn=0,xs=0,Mi=null,mn=null,ad=!1,Wr=0,ap=0,Xr=1/0,Qr=null,Va=null,Ot=0,Ka=null,Ss=null,Da=0,ld=0,sd=null,lp=null,Di=0,id=null;function Tn(){return(Ke&2)!==0&&Le!==0?Le&-Le:k.T!==null?fd():on()}function sp(){if(Nn===0)if((Le&536870912)===0||$e){var t=en;en<<=1,(en&3932160)===0&&(en=262144),Nn=t}else Nn=536870912;return t=wn.current,t!==null&&(t.flags|=32),Nn}function gn(t,a,i){(t===rt&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)&&(ws(t,0),Wa(t,Le,Nn,!1)),xe(t,i),((Ke&2)===0||t!==rt)&&(t===rt&&((Ke&2)===0&&(Pl|=i),yt===4&&Wa(t,Le,Nn,!1)),ra(t))}function ip(t,a,i){if((Ke&6)!==0)throw Error(s(327));var o=!i&&(a&127)===0&&(a&t.expiredLanes)===0||it(t,a),d=o?f1(t,a):od(t,a,!0),h=o;do{if(d===0){bs&&!o&&Wa(t,a,0,!1);break}else{if(i=t.current.alternate,h&&!u1(i)){d=od(t,a,!1),h=!1;continue}if(d===2){if(h=a,t.errorRecoveryDisabledLanes&h)var b=0;else b=t.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){a=b;e:{var E=t;d=Mi;var j=E.current.memoizedState.isDehydrated;if(j&&(ws(E,b).flags|=256),b=od(E,b,!1),b!==2){if(td&&!j){E.errorRecoveryDisabledLanes|=h,Pl|=h,d=4;break e}h=mn,mn=d,h!==null&&(mn===null?mn=h:mn.push.apply(mn,h))}d=b}if(h=!1,d!==2)continue}}if(d===1){ws(t,0),Wa(t,a,0,!0);break}e:{switch(o=t,h=d,h){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:Wa(o,a,Nn,!Ya);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(d=Wr+300-ke(),10<d)){if(Wa(o,a,Nn,!Ya),Ve(o,0,!0)!==0)break e;Da=a,o.timeoutHandle=Bp(rp.bind(null,o,i,mn,Qr,ad,a,Nn,Pl,xs,Ya,h,"Throttled",-0,0),d);break e}rp(o,i,mn,Qr,ad,a,Nn,Pl,xs,Ya,h,null,-0,0)}}break}while(!0);ra(t)}function rp(t,a,i,o,d,h,b,E,j,$,K,ne,Z,Y){if(t.timeoutHandle=-1,ne=a.subtreeFlags,ne&8192||(ne&16785408)===16785408){ne={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ha},Jg(a,h,ne);var me=(h&62914560)===h?Wr-ke():(h&4194048)===h?ap-ke():0;if(me=V1(ne,me),me!==null){Da=h,t.cancelPendingCommit=me(gp.bind(null,t,a,h,i,o,d,b,E,j,K,ne,null,Z,Y)),Wa(t,h,b,!$);return}}gp(t,a,h,i,o,d,b,E,j)}function u1(t){for(var a=t;;){var i=a.tag;if((i===0||i===11||i===15)&&a.flags&16384&&(i=a.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var o=0;o<i.length;o++){var d=i[o],h=d.getSnapshot;d=d.value;try{if(!xn(h(),d))return!1}catch{return!1}}if(i=a.child,a.subtreeFlags&16384&&i!==null)i.return=a,a=i;else{if(a===t)break;for(;a.sibling===null;){if(a.return===null||a.return===t)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Wa(t,a,i,o){a&=~nd,a&=~Pl,t.suspendedLanes|=a,t.pingedLanes&=~a,o&&(t.warmLanes|=a),o=t.expirationTimes;for(var d=a;0<d;){var h=31-X(d),b=1<<h;o[h]=-1,d&=~b}i!==0&&Bt(t,i,a)}function Jr(){return(Ke&6)===0?(ji(0),!1):!0}function rd(){if(Be!==null){if(Qe===0)var t=Be.return;else t=Be,va=Ml=null,_u(t),fs=null,di=0,t=Be;for(;t!==null;)Ig(t.alternate,t),t=t.return;Be=null}}function ws(t,a){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,C1(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),Da=0,rd(),rt=t,Be=i=ga(t.current,null),Le=a,Qe=0,En=null,Ya=!1,bs=it(t,a),td=!1,xs=Nn=nd=Pl=Ga=yt=0,mn=Mi=null,ad=!1,(a&8)!==0&&(a|=a&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=a;0<o;){var d=31-X(o),h=1<<d;a|=t[d],o&=~h}return Ma=a,xr(),i}function op(t,a){De=null,k.H=bi,a===ds||a===Dr?(a=Em(),Qe=3):a===du?(a=Em(),Qe=4):Qe=a===Lu?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,En=a,Be===null&&(yt=1,$r(t,In(a,t.current)))}function cp(){var t=wn.current;return t===null?!0:(Le&4194048)===Le?$n===null:(Le&62914560)===Le||(Le&536870912)!==0?t===$n:!1}function up(){var t=k.H;return k.H=bi,t===null?bi:t}function dp(){var t=k.A;return k.A=o1,t}function eo(){yt=4,Ya||(Le&4194048)!==Le&&wn.current!==null||(bs=!0),(Ga&134217727)===0&&(Pl&134217727)===0||rt===null||Wa(rt,Le,Nn,!1)}function od(t,a,i){var o=Ke;Ke|=2;var d=up(),h=dp();(rt!==t||Le!==a)&&(Qr=null,ws(t,a)),a=!1;var b=yt;e:do try{if(Qe!==0&&Be!==null){var E=Be,j=En;switch(Qe){case 8:rd(),b=6;break e;case 3:case 2:case 9:case 6:wn.current===null&&(a=!0);var $=Qe;if(Qe=0,En=null,_s(t,E,j,$),i&&bs){b=0;break e}break;default:$=Qe,Qe=0,En=null,_s(t,E,j,$)}}d1(),b=yt;break}catch(K){op(t,K)}while(!0);return a&&t.shellSuspendCounter++,va=Ml=null,Ke=o,k.H=d,k.A=h,Be===null&&(rt=null,Le=0,xr()),b}function d1(){for(;Be!==null;)fp(Be)}function f1(t,a){var i=Ke;Ke|=2;var o=up(),d=dp();rt!==t||Le!==a?(Qr=null,Xr=ke()+500,ws(t,a)):bs=it(t,a);e:do try{if(Qe!==0&&Be!==null){a=Be;var h=En;t:switch(Qe){case 1:Qe=0,En=null,_s(t,a,h,1);break;case 2:case 9:if(wm(h)){Qe=0,En=null,hp(a);break}a=function(){Qe!==2&&Qe!==9||rt!==t||(Qe=7),ra(t)},h.then(a,a);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:wm(h)?(Qe=0,En=null,hp(a)):(Qe=0,En=null,_s(t,a,h,7));break;case 5:var b=null;switch(Be.tag){case 26:b=Be.memoizedState;case 5:case 27:var E=Be;if(b?Qp(b):E.stateNode.complete){Qe=0,En=null;var j=E.sibling;if(j!==null)Be=j;else{var $=E.return;$!==null?(Be=$,to($)):Be=null}break t}}Qe=0,En=null,_s(t,a,h,5);break;case 6:Qe=0,En=null,_s(t,a,h,6);break;case 8:rd(),yt=6;break e;default:throw Error(s(462))}}h1();break}catch(K){op(t,K)}while(!0);return va=Ml=null,k.H=o,k.A=d,Ke=i,Be!==null?0:(rt=null,Le=0,xr(),yt)}function h1(){for(;Be!==null&&!we();)fp(Be)}function fp(t){var a=Pg(t.alternate,t,Ma);t.memoizedProps=t.pendingProps,a===null?to(t):Be=a}function hp(t){var a=t,i=a.alternate;switch(a.tag){case 15:case 0:a=Cg(i,a,a.pendingProps,a.type,void 0,Le);break;case 11:a=Cg(i,a,a.pendingProps,a.type.render,a.ref,Le);break;case 5:_u(a);default:Ig(i,a),a=Be=dm(a,Ma),a=Pg(i,a,Ma)}t.memoizedProps=t.pendingProps,a===null?to(t):Be=a}function _s(t,a,i,o){va=Ml=null,_u(a),fs=null,di=0;var d=a.return;try{if(t1(t,d,a,i,Le)){yt=1,$r(t,In(i,t.current)),Be=null;return}}catch(h){if(d!==null)throw Be=d,h;yt=1,$r(t,In(i,t.current)),Be=null;return}a.flags&32768?($e||o===1?t=!0:bs||(Le&536870912)!==0?t=!1:(Ya=t=!0,(o===2||o===9||o===3||o===6)&&(o=wn.current,o!==null&&o.tag===13&&(o.flags|=16384))),mp(a,t)):to(a)}function to(t){var a=t;do{if((a.flags&32768)!==0){mp(a,Ya);return}t=a.return;var i=l1(a.alternate,a,Ma);if(i!==null){Be=i;return}if(a=a.sibling,a!==null){Be=a;return}Be=a=t}while(a!==null);yt===0&&(yt=5)}function mp(t,a){do{var i=s1(t.alternate,t);if(i!==null){i.flags&=32767,Be=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!a&&(t=t.sibling,t!==null)){Be=t;return}Be=t=i}while(t!==null);yt=6,Be=null}function gp(t,a,i,o,d,h,b,E,j){t.cancelPendingCommit=null;do no();while(Ot!==0);if((Ke&6)!==0)throw Error(s(327));if(a!==null){if(a===t.current)throw Error(s(177));if(h=a.lanes|a.childLanes,h|=Wc,nt(t,i,h,b,E,j),t===rt&&(Be=rt=null,Le=0),Ss=a,Ka=t,Da=i,ld=h,sd=d,lp=o,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,v1(bn,function(){return xp(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||o){o=k.T,k.T=null,d=G.p,G.p=2,b=Ke,Ke|=4;try{i1(t,a,i)}finally{Ke=b,G.p=d,k.T=o}}Ot=1,pp(),vp(),yp()}}function pp(){if(Ot===1){Ot=0;var t=Ka,a=Ss,i=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||i){i=k.T,k.T=null;var o=G.p;G.p=2;var d=Ke;Ke|=4;try{Wg(a,t);var h=xd,b=nm(t.containerInfo),E=h.focusedElem,j=h.selectionRange;if(b!==E&&E&&E.ownerDocument&&tm(E.ownerDocument.documentElement,E)){if(j!==null&&Fc(E)){var $=j.start,K=j.end;if(K===void 0&&(K=$),"selectionStart"in E)E.selectionStart=$,E.selectionEnd=Math.min(K,E.value.length);else{var ne=E.ownerDocument||document,Z=ne&&ne.defaultView||window;if(Z.getSelection){var Y=Z.getSelection(),me=E.textContent.length,Se=Math.min(j.start,me),st=j.end===void 0?Se:Math.min(j.end,me);!Y.extend&&Se>st&&(b=st,st=Se,Se=b);var P=em(E,Se),C=em(E,st);if(P&&C&&(Y.rangeCount!==1||Y.anchorNode!==P.node||Y.anchorOffset!==P.offset||Y.focusNode!==C.node||Y.focusOffset!==C.offset)){var U=ne.createRange();U.setStart(P.node,P.offset),Y.removeAllRanges(),Se>st?(Y.addRange(U),Y.extend(C.node,C.offset)):(U.setEnd(C.node,C.offset),Y.addRange(U))}}}}for(ne=[],Y=E;Y=Y.parentNode;)Y.nodeType===1&&ne.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ne.length;E++){var ee=ne[E];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}go=!!bd,xd=bd=null}finally{Ke=d,G.p=o,k.T=i}}t.current=a,Ot=2}}function vp(){if(Ot===2){Ot=0;var t=Ka,a=Ss,i=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||i){i=k.T,k.T=null;var o=G.p;G.p=2;var d=Ke;Ke|=4;try{Fg(t,a.alternate,a)}finally{Ke=d,G.p=o,k.T=i}}Ot=3}}function yp(){if(Ot===4||Ot===3){Ot=0,Ee();var t=Ka,a=Ss,i=Da,o=lp;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?Ot=5:(Ot=0,Ss=Ka=null,bp(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Va=null),kn(i),a=a.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(aa,a,void 0,(a.current.flags&128)===128)}catch{}if(o!==null){a=k.T,d=G.p,G.p=2,k.T=null;try{for(var h=t.onRecoverableError,b=0;b<o.length;b++){var E=o[b];h(E.value,{componentStack:E.stack})}}finally{k.T=a,G.p=d}}(Da&3)!==0&&no(),ra(t),d=t.pendingLanes,(i&261930)!==0&&(d&42)!==0?t===id?Di++:(Di=0,id=t):Di=0,ji(0)}}function bp(t,a){(t.pooledCacheLanes&=a)===0&&(a=t.pooledCache,a!=null&&(t.pooledCache=null,ci(a)))}function no(){return pp(),vp(),yp(),xp()}function xp(){if(Ot!==5)return!1;var t=Ka,a=ld;ld=0;var i=kn(Da),o=k.T,d=G.p;try{G.p=32>i?32:i,k.T=null,i=sd,sd=null;var h=Ka,b=Da;if(Ot=0,Ss=Ka=null,Da=0,(Ke&6)!==0)throw Error(s(331));var E=Ke;if(Ke|=4,tp(h.current),Qg(h,h.current,b,i),Ke=E,ji(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(aa,h)}catch{}return!0}finally{G.p=d,k.T=o,bp(t,a)}}function Sp(t,a,i){a=In(i,a),a=Iu(t.stateNode,a,2),t=$a(t,a,2),t!==null&&(xe(t,2),ra(t))}function Je(t,a,i){if(t.tag===3)Sp(t,t,i);else for(;a!==null;){if(a.tag===3){Sp(a,t,i);break}else if(a.tag===1){var o=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Va===null||!Va.has(o))){t=In(i,t),i=wg(2),o=$a(a,i,2),o!==null&&(_g(i,o,a,t),xe(o,2),ra(o));break}}a=a.return}}function cd(t,a,i){var o=t.pingCache;if(o===null){o=t.pingCache=new c1;var d=new Set;o.set(a,d)}else d=o.get(a),d===void 0&&(d=new Set,o.set(a,d));d.has(i)||(td=!0,d.add(i),t=m1.bind(null,t,a,i),a.then(t,t))}function m1(t,a,i){var o=t.pingCache;o!==null&&o.delete(a),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,rt===t&&(Le&i)===i&&(yt===4||yt===3&&(Le&62914560)===Le&&300>ke()-Wr?(Ke&2)===0&&ws(t,0):nd|=i,xs===Le&&(xs=0)),ra(t)}function wp(t,a){a===0&&(a=Mt()),t=El(t,a),t!==null&&(xe(t,a),ra(t))}function g1(t){var a=t.memoizedState,i=0;a!==null&&(i=a.retryLane),wp(t,i)}function p1(t,a){var i=0;switch(t.tag){case 31:case 13:var o=t.stateNode,d=t.memoizedState;d!==null&&(i=d.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(a),wp(t,i)}function v1(t,a){return V(t,a)}var ao=null,Es=null,ud=!1,lo=!1,dd=!1,Xa=0;function ra(t){t!==Es&&t.next===null&&(Es===null?ao=Es=t:Es=Es.next=t),lo=!0,ud||(ud=!0,b1())}function ji(t,a){if(!dd&&lo){dd=!0;do for(var i=!1,o=ao;o!==null;){if(t!==0){var d=o.pendingLanes;if(d===0)var h=0;else{var b=o.suspendedLanes,E=o.pingedLanes;h=(1<<31-X(42|t)+1)-1,h&=d&~(b&~E),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(i=!0,Tp(o,h))}else h=Le,h=Ve(o,o===rt?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(h&3)===0||it(o,h)||(i=!0,Tp(o,h));o=o.next}while(i);dd=!1}}function y1(){_p()}function _p(){lo=ud=!1;var t=0;Xa!==0&&j1()&&(t=Xa);for(var a=ke(),i=null,o=ao;o!==null;){var d=o.next,h=Ep(o,a);h===0?(o.next=null,i===null?ao=d:i.next=d,d===null&&(Es=i)):(i=o,(t!==0||(h&3)!==0)&&(lo=!0)),o=d}Ot!==0&&Ot!==5||ji(t),Xa!==0&&(Xa=0)}function Ep(t,a){for(var i=t.suspendedLanes,o=t.pingedLanes,d=t.expirationTimes,h=t.pendingLanes&-62914561;0<h;){var b=31-X(h),E=1<<b,j=d[b];j===-1?((E&i)===0||(E&o)!==0)&&(d[b]=_e(E,a)):j<=a&&(t.expiredLanes|=E),h&=~E}if(a=rt,i=Le,i=Ve(t,t===a?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,i===0||t===a&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&se(o),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||it(t,i)){if(a=i&-i,a===t.callbackPriority)return a;switch(o!==null&&se(o),kn(i)){case 2:case 8:i=zt;break;case 32:i=bn;break;case 268435456:i=yl;break;default:i=bn}return o=Np.bind(null,t),i=V(i,o),t.callbackPriority=a,t.callbackNode=i,a}return o!==null&&o!==null&&se(o),t.callbackPriority=2,t.callbackNode=null,2}function Np(t,a){if(Ot!==0&&Ot!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(no()&&t.callbackNode!==i)return null;var o=Le;return o=Ve(t,t===rt?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(ip(t,o,a),Ep(t,ke()),t.callbackNode!=null&&t.callbackNode===i?Np.bind(null,t):null)}function Tp(t,a){if(no())return null;ip(t,a,!0)}function b1(){R1(function(){(Ke&6)!==0?V(Jt,y1):_p()})}function fd(){if(Xa===0){var t=cs;t===0&&(t=_t,_t<<=1,(_t&261888)===0&&(_t=256)),Xa=t}return Xa}function Mp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:fr(""+t)}function Dp(t,a){var i=a.ownerDocument.createElement("input");return i.name=a.name,i.value=a.value,t.id&&i.setAttribute("form",t.id),a.parentNode.insertBefore(i,a),t=new FormData(t),i.parentNode.removeChild(i),t}function x1(t,a,i,o,d){if(a==="submit"&&i&&i.stateNode===d){var h=Mp((d[cn]||null).action),b=o.submitter;b&&(a=(a=b[cn]||null)?Mp(a.formAction):b.getAttribute("formAction"),a!==null&&(h=a,b=null));var E=new pr("action","action",null,o,d);t.push({event:E,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(Xa!==0){var j=b?Dp(d,b):new FormData(d);Au(i,{pending:!0,data:j,method:d.method,action:h},null,j)}}else typeof h=="function"&&(E.preventDefault(),j=b?Dp(d,b):new FormData(d),Au(i,{pending:!0,data:j,method:d.method,action:h},h,j))},currentTarget:d}]})}}for(var hd=0;hd<Kc.length;hd++){var md=Kc[hd],S1=md.toLowerCase(),w1=md[0].toUpperCase()+md.slice(1);Kn(S1,"on"+w1)}Kn(sm,"onAnimationEnd"),Kn(im,"onAnimationIteration"),Kn(rm,"onAnimationStart"),Kn("dblclick","onDoubleClick"),Kn("focusin","onFocus"),Kn("focusout","onBlur"),Kn(IS,"onTransitionRun"),Kn(LS,"onTransitionStart"),Kn(qS,"onTransitionCancel"),Kn(om,"onTransitionEnd"),Kl("onMouseEnter",["mouseout","mouseover"]),Kl("onMouseLeave",["mouseout","mouseover"]),Kl("onPointerEnter",["pointerout","pointerover"]),Kl("onPointerLeave",["pointerout","pointerover"]),xl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xl("onBeforeInput",["compositionend","keypress","textInput","paste"]),xl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ci="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ci));function jp(t,a){a=(a&4)!==0;for(var i=0;i<t.length;i++){var o=t[i],d=o.event;o=o.listeners;e:{var h=void 0;if(a)for(var b=o.length-1;0<=b;b--){var E=o[b],j=E.instance,$=E.currentTarget;if(E=E.listener,j!==h&&d.isPropagationStopped())break e;h=E,d.currentTarget=$;try{h(d)}catch(K){br(K)}d.currentTarget=null,h=j}else for(b=0;b<o.length;b++){if(E=o[b],j=E.instance,$=E.currentTarget,E=E.listener,j!==h&&d.isPropagationStopped())break e;h=E,d.currentTarget=$;try{h(d)}catch(K){br(K)}d.currentTarget=null,h=j}}}}function Ie(t,a){var i=a[Mc];i===void 0&&(i=a[Mc]=new Set);var o=t+"__bubble";i.has(o)||(Cp(a,t,2,!1),i.add(o))}function gd(t,a,i){var o=0;a&&(o|=4),Cp(i,t,o,a)}var so="_reactListening"+Math.random().toString(36).slice(2);function pd(t){if(!t[so]){t[so]=!0,_h.forEach(function(i){i!=="selectionchange"&&(_1.has(i)||gd(i,!1,t),gd(i,!0,t))});var a=t.nodeType===9?t:t.ownerDocument;a===null||a[so]||(a[so]=!0,gd("selectionchange",!1,a))}}function Cp(t,a,i,o){switch(sv(a)){case 2:var d=X1;break;case 8:d=Q1;break;default:d=Rd}i=d.bind(null,a,i,t),d=void 0,!Pc||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(d=!0),o?d!==void 0?t.addEventListener(a,i,{capture:!0,passive:d}):t.addEventListener(a,i,!0):d!==void 0?t.addEventListener(a,i,{passive:d}):t.addEventListener(a,i,!1)}function vd(t,a,i,o,d){var h=o;if((a&1)===0&&(a&2)===0&&o!==null)e:for(;;){if(o===null)return;var b=o.tag;if(b===3||b===4){var E=o.stateNode.containerInfo;if(E===d)break;if(b===4)for(b=o.return;b!==null;){var j=b.tag;if((j===3||j===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;E!==null;){if(b=Yl(E),b===null)return;if(j=b.tag,j===5||j===6||j===26||j===27){o=h=b;continue e}E=E.parentNode}}o=o.return}Oh(function(){var $=h,K=zc(i),ne=[];e:{var Z=cm.get(t);if(Z!==void 0){var Y=pr,me=t;switch(t){case"keypress":if(mr(i)===0)break e;case"keydown":case"keyup":Y=pS;break;case"focusin":me="focus",Y=qc;break;case"focusout":me="blur",Y=qc;break;case"beforeblur":case"afterblur":Y=qc;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=Ih;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=lS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=bS;break;case sm:case im:case rm:Y=rS;break;case om:Y=SS;break;case"scroll":case"scrollend":Y=nS;break;case"wheel":Y=_S;break;case"copy":case"cut":case"paste":Y=cS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=qh;break;case"toggle":case"beforetoggle":Y=NS}var Se=(a&4)!==0,st=!Se&&(t==="scroll"||t==="scrollend"),P=Se?Z!==null?Z+"Capture":null:Z;Se=[];for(var C=$,U;C!==null;){var ee=C;if(U=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||U===null||P===null||(ee=Qs(C,P),ee!=null&&Se.push(Ri(C,ee,U))),st)break;C=C.return}0<Se.length&&(Z=new Y(Z,me,null,i,K),ne.push({event:Z,listeners:Se}))}}if((a&7)===0){e:{if(Z=t==="mouseover"||t==="pointerover",Y=t==="mouseout"||t==="pointerout",Z&&i!==kc&&(me=i.relatedTarget||i.fromElement)&&(Yl(me)||me[Fl]))break e;if((Y||Z)&&(Z=K.window===K?K:(Z=K.ownerDocument)?Z.defaultView||Z.parentWindow:window,Y?(me=i.relatedTarget||i.toElement,Y=$,me=me?Yl(me):null,me!==null&&(st=c(me),Se=me.tag,me!==st||Se!==5&&Se!==27&&Se!==6)&&(me=null)):(Y=null,me=$),Y!==me)){if(Se=Ih,ee="onMouseLeave",P="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(Se=qh,ee="onPointerLeave",P="onPointerEnter",C="pointer"),st=Y==null?Z:Xs(Y),U=me==null?Z:Xs(me),Z=new Se(ee,C+"leave",Y,i,K),Z.target=st,Z.relatedTarget=U,ee=null,Yl(K)===$&&(Se=new Se(P,C+"enter",me,i,K),Se.target=U,Se.relatedTarget=st,ee=Se),st=ee,Y&&me)t:{for(Se=E1,P=Y,C=me,U=0,ee=P;ee;ee=Se(ee))U++;ee=0;for(var ve=C;ve;ve=Se(ve))ee++;for(;0<U-ee;)P=Se(P),U--;for(;0<ee-U;)C=Se(C),ee--;for(;U--;){if(P===C||C!==null&&P===C.alternate){Se=P;break t}P=Se(P),C=Se(C)}Se=null}else Se=null;Y!==null&&Rp(ne,Z,Y,Se,!1),me!==null&&st!==null&&Rp(ne,st,me,Se,!0)}}e:{if(Z=$?Xs($):window,Y=Z.nodeName&&Z.nodeName.toLowerCase(),Y==="select"||Y==="input"&&Z.type==="file")var Fe=Vh;else if(Yh(Z))if(Kh)Fe=OS;else{Fe=kS;var pe=AS}else Y=Z.nodeName,!Y||Y.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?$&&Ac($.elementType)&&(Fe=Vh):Fe=zS;if(Fe&&(Fe=Fe(t,$))){Gh(ne,Fe,i,K);break e}pe&&pe(t,Z,$),t==="focusout"&&$&&Z.type==="number"&&$.memoizedProps.value!=null&&Rc(Z,"number",Z.value)}switch(pe=$?Xs($):window,t){case"focusin":(Yh(pe)||pe.contentEditable==="true")&&(ts=pe,Yc=$,ii=null);break;case"focusout":ii=Yc=ts=null;break;case"mousedown":Gc=!0;break;case"contextmenu":case"mouseup":case"dragend":Gc=!1,am(ne,i,K);break;case"selectionchange":if(BS)break;case"keydown":case"keyup":am(ne,i,K)}var Re;if($c)e:{switch(t){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else es?Zh(t,i)&&(qe="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(qe="onCompositionStart");qe&&(Uh&&i.locale!=="ko"&&(es||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&es&&(Re=Ph()):(Oa=K,Bc="value"in Oa?Oa.value:Oa.textContent,es=!0)),pe=io($,qe),0<pe.length&&(qe=new Lh(qe,t,null,i,K),ne.push({event:qe,listeners:pe}),Re?qe.data=Re:(Re=Fh(i),Re!==null&&(qe.data=Re)))),(Re=MS?DS(t,i):jS(t,i))&&(qe=io($,"onBeforeInput"),0<qe.length&&(pe=new Lh("onBeforeInput","beforeinput",null,i,K),ne.push({event:pe,listeners:qe}),pe.data=Re)),x1(ne,t,$,i,K)}jp(ne,a)})}function Ri(t,a,i){return{instance:t,listener:a,currentTarget:i}}function io(t,a){for(var i=a+"Capture",o=[];t!==null;){var d=t,h=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||h===null||(d=Qs(t,i),d!=null&&o.unshift(Ri(t,d,h)),d=Qs(t,a),d!=null&&o.push(Ri(t,d,h))),t.tag===3)return o;t=t.return}return[]}function E1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Rp(t,a,i,o,d){for(var h=a._reactName,b=[];i!==null&&i!==o;){var E=i,j=E.alternate,$=E.stateNode;if(E=E.tag,j!==null&&j===o)break;E!==5&&E!==26&&E!==27||$===null||(j=$,d?($=Qs(i,h),$!=null&&b.unshift(Ri(i,$,j))):d||($=Qs(i,h),$!=null&&b.push(Ri(i,$,j)))),i=i.return}b.length!==0&&t.push({event:a,listeners:b})}var N1=/\r\n?/g,T1=/\u0000|\uFFFD/g;function Ap(t){return(typeof t=="string"?t:""+t).replace(N1,`
`).replace(T1,"")}function kp(t,a){return a=Ap(a),Ap(t)===a}function lt(t,a,i,o,d,h){switch(i){case"children":typeof o=="string"?a==="body"||a==="textarea"&&o===""||Xl(t,o):(typeof o=="number"||typeof o=="bigint")&&a!=="body"&&Xl(t,""+o);break;case"className":ur(t,"class",o);break;case"tabIndex":ur(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":ur(t,i,o);break;case"style":kh(t,o,h);break;case"data":if(a!=="object"){ur(t,"data",o);break}case"src":case"href":if(o===""&&(a!=="a"||i!=="href")){t.removeAttribute(i);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(i);break}o=fr(""+o),t.setAttribute(i,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(i==="formAction"?(a!=="input"&&lt(t,a,"name",d.name,d,null),lt(t,a,"formEncType",d.formEncType,d,null),lt(t,a,"formMethod",d.formMethod,d,null),lt(t,a,"formTarget",d.formTarget,d,null)):(lt(t,a,"encType",d.encType,d,null),lt(t,a,"method",d.method,d,null),lt(t,a,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(i);break}o=fr(""+o),t.setAttribute(i,o);break;case"onClick":o!=null&&(t.onclick=ha);break;case"onScroll":o!=null&&Ie("scroll",t);break;case"onScrollEnd":o!=null&&Ie("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=i}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}i=fr(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(i,""+o):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":o===!0?t.setAttribute(i,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(i,o):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(i,o):t.removeAttribute(i);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(i):t.setAttribute(i,o);break;case"popover":Ie("beforetoggle",t),Ie("toggle",t),cr(t,"popover",o);break;case"xlinkActuate":fa(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":fa(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":fa(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":fa(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":fa(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":fa(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":fa(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":fa(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":fa(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":cr(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=eS.get(i)||i,cr(t,i,o))}}function yd(t,a,i,o,d,h){switch(i){case"style":kh(t,o,h);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(i=o.__html,i!=null){if(d.children!=null)throw Error(s(60));t.innerHTML=i}}break;case"children":typeof o=="string"?Xl(t,o):(typeof o=="number"||typeof o=="bigint")&&Xl(t,""+o);break;case"onScroll":o!=null&&Ie("scroll",t);break;case"onScrollEnd":o!=null&&Ie("scrollend",t);break;case"onClick":o!=null&&(t.onclick=ha);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Eh.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(d=i.endsWith("Capture"),a=i.slice(2,d?i.length-7:void 0),h=t[cn]||null,h=h!=null?h[i]:null,typeof h=="function"&&t.removeEventListener(a,h,d),typeof o=="function")){typeof h!="function"&&h!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(a,o,d);break e}i in t?t[i]=o:o===!0?t.setAttribute(i,""):cr(t,i,o)}}}function Gt(t,a,i){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ie("error",t),Ie("load",t);var o=!1,d=!1,h;for(h in i)if(i.hasOwnProperty(h)){var b=i[h];if(b!=null)switch(h){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:lt(t,a,h,b,i,null)}}d&&lt(t,a,"srcSet",i.srcSet,i,null),o&&lt(t,a,"src",i.src,i,null);return;case"input":Ie("invalid",t);var E=h=b=d=null,j=null,$=null;for(o in i)if(i.hasOwnProperty(o)){var K=i[o];if(K!=null)switch(o){case"name":d=K;break;case"type":b=K;break;case"checked":j=K;break;case"defaultChecked":$=K;break;case"value":h=K;break;case"defaultValue":E=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,a));break;default:lt(t,a,o,K,i,null)}}jh(t,h,E,j,$,b,d,!1);return;case"select":Ie("invalid",t),o=b=h=null;for(d in i)if(i.hasOwnProperty(d)&&(E=i[d],E!=null))switch(d){case"value":h=E;break;case"defaultValue":b=E;break;case"multiple":o=E;default:lt(t,a,d,E,i,null)}a=h,i=b,t.multiple=!!o,a!=null?Wl(t,!!o,a,!1):i!=null&&Wl(t,!!o,i,!0);return;case"textarea":Ie("invalid",t),h=d=o=null;for(b in i)if(i.hasOwnProperty(b)&&(E=i[b],E!=null))switch(b){case"value":o=E;break;case"defaultValue":d=E;break;case"children":h=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(s(91));break;default:lt(t,a,b,E,i,null)}Rh(t,o,d,h);return;case"option":for(j in i)i.hasOwnProperty(j)&&(o=i[j],o!=null)&&(j==="selected"?t.selected=o&&typeof o!="function"&&typeof o!="symbol":lt(t,a,j,o,i,null));return;case"dialog":Ie("beforetoggle",t),Ie("toggle",t),Ie("cancel",t),Ie("close",t);break;case"iframe":case"object":Ie("load",t);break;case"video":case"audio":for(o=0;o<Ci.length;o++)Ie(Ci[o],t);break;case"image":Ie("error",t),Ie("load",t);break;case"details":Ie("toggle",t);break;case"embed":case"source":case"link":Ie("error",t),Ie("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in i)if(i.hasOwnProperty($)&&(o=i[$],o!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:lt(t,a,$,o,i,null)}return;default:if(Ac(a)){for(K in i)i.hasOwnProperty(K)&&(o=i[K],o!==void 0&&yd(t,a,K,o,i,void 0));return}}for(E in i)i.hasOwnProperty(E)&&(o=i[E],o!=null&&lt(t,a,E,o,i,null))}function M1(t,a,i,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,h=null,b=null,E=null,j=null,$=null,K=null;for(Y in i){var ne=i[Y];if(i.hasOwnProperty(Y)&&ne!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":j=ne;default:o.hasOwnProperty(Y)||lt(t,a,Y,null,o,ne)}}for(var Z in o){var Y=o[Z];if(ne=i[Z],o.hasOwnProperty(Z)&&(Y!=null||ne!=null))switch(Z){case"type":h=Y;break;case"name":d=Y;break;case"checked":$=Y;break;case"defaultChecked":K=Y;break;case"value":b=Y;break;case"defaultValue":E=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,a));break;default:Y!==ne&&lt(t,a,Z,Y,o,ne)}}Cc(t,b,E,j,$,K,h,d);return;case"select":Y=b=E=Z=null;for(h in i)if(j=i[h],i.hasOwnProperty(h)&&j!=null)switch(h){case"value":break;case"multiple":Y=j;default:o.hasOwnProperty(h)||lt(t,a,h,null,o,j)}for(d in o)if(h=o[d],j=i[d],o.hasOwnProperty(d)&&(h!=null||j!=null))switch(d){case"value":Z=h;break;case"defaultValue":E=h;break;case"multiple":b=h;default:h!==j&&lt(t,a,d,h,o,j)}a=E,i=b,o=Y,Z!=null?Wl(t,!!i,Z,!1):!!o!=!!i&&(a!=null?Wl(t,!!i,a,!0):Wl(t,!!i,i?[]:"",!1));return;case"textarea":Y=Z=null;for(E in i)if(d=i[E],i.hasOwnProperty(E)&&d!=null&&!o.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:lt(t,a,E,null,o,d)}for(b in o)if(d=o[b],h=i[b],o.hasOwnProperty(b)&&(d!=null||h!=null))switch(b){case"value":Z=d;break;case"defaultValue":Y=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==h&&lt(t,a,b,d,o,h)}Ch(t,Z,Y);return;case"option":for(var me in i)Z=i[me],i.hasOwnProperty(me)&&Z!=null&&!o.hasOwnProperty(me)&&(me==="selected"?t.selected=!1:lt(t,a,me,null,o,Z));for(j in o)Z=o[j],Y=i[j],o.hasOwnProperty(j)&&Z!==Y&&(Z!=null||Y!=null)&&(j==="selected"?t.selected=Z&&typeof Z!="function"&&typeof Z!="symbol":lt(t,a,j,Z,o,Y));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in i)Z=i[Se],i.hasOwnProperty(Se)&&Z!=null&&!o.hasOwnProperty(Se)&&lt(t,a,Se,null,o,Z);for($ in o)if(Z=o[$],Y=i[$],o.hasOwnProperty($)&&Z!==Y&&(Z!=null||Y!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,a));break;default:lt(t,a,$,Z,o,Y)}return;default:if(Ac(a)){for(var st in i)Z=i[st],i.hasOwnProperty(st)&&Z!==void 0&&!o.hasOwnProperty(st)&&yd(t,a,st,void 0,o,Z);for(K in o)Z=o[K],Y=i[K],!o.hasOwnProperty(K)||Z===Y||Z===void 0&&Y===void 0||yd(t,a,K,Z,o,Y);return}}for(var P in i)Z=i[P],i.hasOwnProperty(P)&&Z!=null&&!o.hasOwnProperty(P)&&lt(t,a,P,null,o,Z);for(ne in o)Z=o[ne],Y=i[ne],!o.hasOwnProperty(ne)||Z===Y||Z==null&&Y==null||lt(t,a,ne,Z,o,Y)}function zp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function D1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,a=0,i=performance.getEntriesByType("resource"),o=0;o<i.length;o++){var d=i[o],h=d.transferSize,b=d.initiatorType,E=d.duration;if(h&&E&&zp(b)){for(b=0,E=d.responseEnd,o+=1;o<i.length;o++){var j=i[o],$=j.startTime;if($>E)break;var K=j.transferSize,ne=j.initiatorType;K&&zp(ne)&&(j=j.responseEnd,b+=K*(j<E?1:(E-$)/(j-$)))}if(--o,a+=8*(h+b)/(d.duration/1e3),t++,10<t)break}}if(0<t)return a/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var bd=null,xd=null;function ro(t){return t.nodeType===9?t:t.ownerDocument}function Op(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pp(t,a){if(t===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&a==="foreignObject"?0:t}function Sd(t,a){return t==="textarea"||t==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var wd=null;function j1(){var t=window.event;return t&&t.type==="popstate"?t===wd?!1:(wd=t,!0):(wd=null,!1)}var Bp=typeof setTimeout=="function"?setTimeout:void 0,C1=typeof clearTimeout=="function"?clearTimeout:void 0,Ip=typeof Promise=="function"?Promise:void 0,R1=typeof queueMicrotask=="function"?queueMicrotask:typeof Ip<"u"?function(t){return Ip.resolve(null).then(t).catch(A1)}:Bp;function A1(t){setTimeout(function(){throw t})}function Qa(t){return t==="head"}function Lp(t,a){var i=a,o=0;do{var d=i.nextSibling;if(t.removeChild(i),d&&d.nodeType===8)if(i=d.data,i==="/$"||i==="/&"){if(o===0){t.removeChild(d),Ds(a);return}o--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")o++;else if(i==="html")Ai(t.ownerDocument.documentElement);else if(i==="head"){i=t.ownerDocument.head,Ai(i);for(var h=i.firstChild;h;){var b=h.nextSibling,E=h.nodeName;h[Ws]||E==="SCRIPT"||E==="STYLE"||E==="LINK"&&h.rel.toLowerCase()==="stylesheet"||i.removeChild(h),h=b}}else i==="body"&&Ai(t.ownerDocument.body);i=d}while(i);Ds(a)}function qp(t,a){var i=t;t=0;do{var o=i.nextSibling;if(i.nodeType===1?a?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(a?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),o&&o.nodeType===8)if(i=o.data,i==="/$"){if(t===0)break;t--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||t++;i=o}while(i)}function _d(t){var a=t.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var i=a;switch(a=a.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":_d(i),Dc(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function k1(t,a,i,o){for(;t.nodeType===1;){var d=i;if(t.nodeName.toLowerCase()!==a.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Ws])switch(a){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(h=t.getAttribute("rel"),h==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(h!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(h=t.getAttribute("src"),(h!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&h&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(a==="input"&&t.type==="hidden"){var h=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===h)return t}else return t;if(t=Hn(t.nextSibling),t===null)break}return null}function z1(t,a,i){if(a==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Hn(t.nextSibling),t===null))return null;return t}function Up(t,a){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Hn(t.nextSibling),t===null))return null;return t}function Ed(t){return t.data==="$?"||t.data==="$~"}function Nd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function O1(t,a){var i=t.ownerDocument;if(t.data==="$~")t._reactRetry=a;else if(t.data!=="$?"||i.readyState!=="loading")a();else{var o=function(){a(),i.removeEventListener("DOMContentLoaded",o)};i.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Hn(t){for(;t!=null;t=t.nextSibling){var a=t.nodeType;if(a===1||a===3)break;if(a===8){if(a=t.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return t}var Td=null;function $p(t){t=t.nextSibling;for(var a=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"||i==="/&"){if(a===0)return Hn(t.nextSibling);a--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||a++}t=t.nextSibling}return null}function Hp(t){t=t.previousSibling;for(var a=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(a===0)return t;a--}else i!=="/$"&&i!=="/&"||a++}t=t.previousSibling}return null}function Zp(t,a,i){switch(a=ro(i),t){case"html":if(t=a.documentElement,!t)throw Error(s(452));return t;case"head":if(t=a.head,!t)throw Error(s(453));return t;case"body":if(t=a.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ai(t){for(var a=t.attributes;a.length;)t.removeAttributeNode(a[0]);Dc(t)}var Zn=new Map,Fp=new Set;function oo(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ja=G.d;G.d={f:P1,r:B1,D:I1,C:L1,L:q1,m:U1,X:H1,S:$1,M:Z1};function P1(){var t=ja.f(),a=Jr();return t||a}function B1(t){var a=Gl(t);a!==null&&a.tag===5&&a.type==="form"?og(a):ja.r(t)}var Ns=typeof document>"u"?null:document;function Yp(t,a,i){var o=Ns;if(o&&typeof a=="string"&&a){var d=Pn(a);d='link[rel="'+t+'"][href="'+d+'"]',typeof i=="string"&&(d+='[crossorigin="'+i+'"]'),Fp.has(d)||(Fp.add(d),t={rel:t,crossOrigin:i,href:a},o.querySelector(d)===null&&(a=o.createElement("link"),Gt(a,"link",t),It(a),o.head.appendChild(a)))}}function I1(t){ja.D(t),Yp("dns-prefetch",t,null)}function L1(t,a){ja.C(t,a),Yp("preconnect",t,a)}function q1(t,a,i){ja.L(t,a,i);var o=Ns;if(o&&t&&a){var d='link[rel="preload"][as="'+Pn(a)+'"]';a==="image"&&i&&i.imageSrcSet?(d+='[imagesrcset="'+Pn(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(d+='[imagesizes="'+Pn(i.imageSizes)+'"]')):d+='[href="'+Pn(t)+'"]';var h=d;switch(a){case"style":h=Ts(t);break;case"script":h=Ms(t)}Zn.has(h)||(t=v({rel:"preload",href:a==="image"&&i&&i.imageSrcSet?void 0:t,as:a},i),Zn.set(h,t),o.querySelector(d)!==null||a==="style"&&o.querySelector(ki(h))||a==="script"&&o.querySelector(zi(h))||(a=o.createElement("link"),Gt(a,"link",t),It(a),o.head.appendChild(a)))}}function U1(t,a){ja.m(t,a);var i=Ns;if(i&&t){var o=a&&typeof a.as=="string"?a.as:"script",d='link[rel="modulepreload"][as="'+Pn(o)+'"][href="'+Pn(t)+'"]',h=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Ms(t)}if(!Zn.has(h)&&(t=v({rel:"modulepreload",href:t},a),Zn.set(h,t),i.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(zi(h)))return}o=i.createElement("link"),Gt(o,"link",t),It(o),i.head.appendChild(o)}}}function $1(t,a,i){ja.S(t,a,i);var o=Ns;if(o&&t){var d=Vl(o).hoistableStyles,h=Ts(t);a=a||"default";var b=d.get(h);if(!b){var E={loading:0,preload:null};if(b=o.querySelector(ki(h)))E.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":a},i),(i=Zn.get(h))&&Md(t,i);var j=b=o.createElement("link");It(j),Gt(j,"link",t),j._p=new Promise(function($,K){j.onload=$,j.onerror=K}),j.addEventListener("load",function(){E.loading|=1}),j.addEventListener("error",function(){E.loading|=2}),E.loading|=4,co(b,a,o)}b={type:"stylesheet",instance:b,count:1,state:E},d.set(h,b)}}}function H1(t,a){ja.X(t,a);var i=Ns;if(i&&t){var o=Vl(i).hoistableScripts,d=Ms(t),h=o.get(d);h||(h=i.querySelector(zi(d)),h||(t=v({src:t,async:!0},a),(a=Zn.get(d))&&Dd(t,a),h=i.createElement("script"),It(h),Gt(h,"link",t),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(d,h))}}function Z1(t,a){ja.M(t,a);var i=Ns;if(i&&t){var o=Vl(i).hoistableScripts,d=Ms(t),h=o.get(d);h||(h=i.querySelector(zi(d)),h||(t=v({src:t,async:!0,type:"module"},a),(a=Zn.get(d))&&Dd(t,a),h=i.createElement("script"),It(h),Gt(h,"link",t),i.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},o.set(d,h))}}function Gp(t,a,i,o){var d=(d=ge.current)?oo(d):null;if(!d)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(a=Ts(i.href),i=Vl(d).hoistableStyles,o=i.get(a),o||(o={type:"style",instance:null,count:0,state:null},i.set(a,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=Ts(i.href);var h=Vl(d).hoistableStyles,b=h.get(t);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(t,b),(h=d.querySelector(ki(t)))&&!h._p&&(b.instance=h,b.state.loading=5),Zn.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Zn.set(t,i),h||F1(d,t,i,b.state))),a&&o===null)throw Error(s(528,""));return b}if(a&&o!==null)throw Error(s(529,""));return null;case"script":return a=i.async,i=i.src,typeof i=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Ms(i),i=Vl(d).hoistableScripts,o=i.get(a),o||(o={type:"script",instance:null,count:0,state:null},i.set(a,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function Ts(t){return'href="'+Pn(t)+'"'}function ki(t){return'link[rel="stylesheet"]['+t+"]"}function Vp(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function F1(t,a,i,o){t.querySelector('link[rel="preload"][as="style"]['+a+"]")?o.loading=1:(a=t.createElement("link"),o.preload=a,a.addEventListener("load",function(){return o.loading|=1}),a.addEventListener("error",function(){return o.loading|=2}),Gt(a,"link",i),It(a),t.head.appendChild(a))}function Ms(t){return'[src="'+Pn(t)+'"]'}function zi(t){return"script[async]"+t}function Kp(t,a,i){if(a.count++,a.instance===null)switch(a.type){case"style":var o=t.querySelector('style[data-href~="'+Pn(i.href)+'"]');if(o)return a.instance=o,It(o),o;var d=v({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),It(o),Gt(o,"style",d),co(o,i.precedence,t),a.instance=o;case"stylesheet":d=Ts(i.href);var h=t.querySelector(ki(d));if(h)return a.state.loading|=4,a.instance=h,It(h),h;o=Vp(i),(d=Zn.get(d))&&Md(o,d),h=(t.ownerDocument||t).createElement("link"),It(h);var b=h;return b._p=new Promise(function(E,j){b.onload=E,b.onerror=j}),Gt(h,"link",o),a.state.loading|=4,co(h,i.precedence,t),a.instance=h;case"script":return h=Ms(i.src),(d=t.querySelector(zi(h)))?(a.instance=d,It(d),d):(o=i,(d=Zn.get(h))&&(o=v({},i),Dd(o,d)),t=t.ownerDocument||t,d=t.createElement("script"),It(d),Gt(d,"link",o),t.head.appendChild(d),a.instance=d);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(o=a.instance,a.state.loading|=4,co(o,i.precedence,t));return a.instance}function co(t,a,i){for(var o=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,h=d,b=0;b<o.length;b++){var E=o[b];if(E.dataset.precedence===a)h=E;else if(h!==d)break}h?h.parentNode.insertBefore(t,h.nextSibling):(a=i.nodeType===9?i.head:i,a.insertBefore(t,a.firstChild))}function Md(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.title==null&&(t.title=a.title)}function Dd(t,a){t.crossOrigin==null&&(t.crossOrigin=a.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=a.referrerPolicy),t.integrity==null&&(t.integrity=a.integrity)}var uo=null;function Wp(t,a,i){if(uo===null){var o=new Map,d=uo=new Map;d.set(i,o)}else d=uo,o=d.get(i),o||(o=new Map,d.set(i,o));if(o.has(t))return o;for(o.set(t,null),i=i.getElementsByTagName(t),d=0;d<i.length;d++){var h=i[d];if(!(h[Ws]||h[Ht]||t==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var b=h.getAttribute(a)||"";b=t+b;var E=o.get(b);E?E.push(h):o.set(b,[h])}}return o}function Xp(t,a,i){t=t.ownerDocument||t,t.head.insertBefore(i,a==="title"?t.querySelector("head > title"):null)}function Y1(t,a,i){if(i===1||a.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(t=a.disabled,typeof a.precedence=="string"&&t==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Qp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function G1(t,a,i,o){if(i.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var d=Ts(o.href),h=a.querySelector(ki(d));if(h){a=h._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(t.count++,t=fo.bind(t),a.then(t,t)),i.state.loading|=4,i.instance=h,It(h);return}h=a.ownerDocument||a,o=Vp(o),(d=Zn.get(d))&&Md(o,d),h=h.createElement("link"),It(h);var b=h;b._p=new Promise(function(E,j){b.onload=E,b.onerror=j}),Gt(h,"link",o),i.instance=h}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(i,a),(a=i.state.preload)&&(i.state.loading&3)===0&&(t.count++,i=fo.bind(t),a.addEventListener("load",i),a.addEventListener("error",i))}}var jd=0;function V1(t,a){return t.stylesheets&&t.count===0&&mo(t,t.stylesheets),0<t.count||0<t.imgCount?function(i){var o=setTimeout(function(){if(t.stylesheets&&mo(t,t.stylesheets),t.unsuspend){var h=t.unsuspend;t.unsuspend=null,h()}},6e4+a);0<t.imgBytes&&jd===0&&(jd=62500*D1());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&mo(t,t.stylesheets),t.unsuspend)){var h=t.unsuspend;t.unsuspend=null,h()}},(t.imgBytes>jd?50:800)+a);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(d)}}:null}function fo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)mo(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ho=null;function mo(t,a){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ho=new Map,a.forEach(K1,t),ho=null,fo.call(t))}function K1(t,a){if(!(a.state.loading&4)){var i=ho.get(t);if(i)var o=i.get(null);else{i=new Map,ho.set(t,i);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<d.length;h++){var b=d[h];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(i.set(b.dataset.precedence,b),o=b)}o&&i.set(null,o)}d=a.instance,b=d.getAttribute("data-precedence"),h=i.get(b)||o,h===o&&i.set(null,d),i.set(b,d),this.count++,o=fo.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),h?h.parentNode.insertBefore(d,h.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),a.state.loading|=4}}var Oi={$$typeof:O,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function W1(t,a,i,o,d,h,b,E,j){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Et(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Et(0),this.hiddenUpdates=Et(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=h,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function Jp(t,a,i,o,d,h,b,E,j,$,K,ne){return t=new W1(t,a,i,b,j,$,K,ne,E),a=1,h===!0&&(a|=24),h=Sn(3,null,null,a),t.current=h,h.stateNode=t,a=ou(),a.refCount++,t.pooledCache=a,a.refCount++,h.memoizedState={element:o,isDehydrated:i,cache:a},fu(h),t}function ev(t){return t?(t=ls,t):ls}function tv(t,a,i,o,d,h){d=ev(d),o.context===null?o.context=d:o.pendingContext=d,o=Ua(a),o.payload={element:i},h=h===void 0?null:h,h!==null&&(o.callback=h),i=$a(t,o,a),i!==null&&(gn(i,t,a),hi(i,t,a))}function nv(t,a){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<a?i:a}}function Cd(t,a){nv(t,a),(t=t.alternate)&&nv(t,a)}function av(t){if(t.tag===13||t.tag===31){var a=El(t,67108864);a!==null&&gn(a,t,67108864),Cd(t,67108864)}}function lv(t){if(t.tag===13||t.tag===31){var a=Tn();a=An(a);var i=El(t,a);i!==null&&gn(i,t,a),Cd(t,a)}}var go=!0;function X1(t,a,i,o){var d=k.T;k.T=null;var h=G.p;try{G.p=2,Rd(t,a,i,o)}finally{G.p=h,k.T=d}}function Q1(t,a,i,o){var d=k.T;k.T=null;var h=G.p;try{G.p=8,Rd(t,a,i,o)}finally{G.p=h,k.T=d}}function Rd(t,a,i,o){if(go){var d=Ad(o);if(d===null)vd(t,a,o,po,i),iv(t,o);else if(ew(d,t,a,i,o))o.stopPropagation();else if(iv(t,o),a&4&&-1<J1.indexOf(t)){for(;d!==null;){var h=Gl(d);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var b=Ce(h.pendingLanes);if(b!==0){var E=h;for(E.pendingLanes|=2,E.entangledLanes|=2;b;){var j=1<<31-X(b);E.entanglements[1]|=j,b&=~j}ra(h),(Ke&6)===0&&(Xr=ke()+500,ji(0))}}break;case 31:case 13:E=El(h,2),E!==null&&gn(E,h,2),Jr(),Cd(h,2)}if(h=Ad(o),h===null&&vd(t,a,o,po,i),h===d)break;d=h}d!==null&&o.stopPropagation()}else vd(t,a,o,null,i)}}function Ad(t){return t=zc(t),kd(t)}var po=null;function kd(t){if(po=null,t=Yl(t),t!==null){var a=c(t);if(a===null)t=null;else{var i=a.tag;if(i===13){if(t=u(a),t!==null)return t;t=null}else if(i===31){if(t=f(a),t!==null)return t;t=null}else if(i===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;t=null}else a!==t&&(t=null)}}return po=t,null}function sv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(sn()){case Jt:return 2;case zt:return 8;case bn:case da:return 32;case yl:return 268435456;default:return 32}default:return 32}}var zd=!1,Ja=null,el=null,tl=null,Pi=new Map,Bi=new Map,nl=[],J1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iv(t,a){switch(t){case"focusin":case"focusout":Ja=null;break;case"dragenter":case"dragleave":el=null;break;case"mouseover":case"mouseout":tl=null;break;case"pointerover":case"pointerout":Pi.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bi.delete(a.pointerId)}}function Ii(t,a,i,o,d,h){return t===null||t.nativeEvent!==h?(t={blockedOn:a,domEventName:i,eventSystemFlags:o,nativeEvent:h,targetContainers:[d]},a!==null&&(a=Gl(a),a!==null&&av(a)),t):(t.eventSystemFlags|=o,a=t.targetContainers,d!==null&&a.indexOf(d)===-1&&a.push(d),t)}function ew(t,a,i,o,d){switch(a){case"focusin":return Ja=Ii(Ja,t,a,i,o,d),!0;case"dragenter":return el=Ii(el,t,a,i,o,d),!0;case"mouseover":return tl=Ii(tl,t,a,i,o,d),!0;case"pointerover":var h=d.pointerId;return Pi.set(h,Ii(Pi.get(h)||null,t,a,i,o,d)),!0;case"gotpointercapture":return h=d.pointerId,Bi.set(h,Ii(Bi.get(h)||null,t,a,i,o,d)),!0}return!1}function rv(t){var a=Yl(t.target);if(a!==null){var i=c(a);if(i!==null){if(a=i.tag,a===13){if(a=u(i),a!==null){t.blockedOn=a,Vn(t.priority,function(){lv(i)});return}}else if(a===31){if(a=f(i),a!==null){t.blockedOn=a,Vn(t.priority,function(){lv(i)});return}}else if(a===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vo(t){if(t.blockedOn!==null)return!1;for(var a=t.targetContainers;0<a.length;){var i=Ad(t.nativeEvent);if(i===null){i=t.nativeEvent;var o=new i.constructor(i.type,i);kc=o,i.target.dispatchEvent(o),kc=null}else return a=Gl(i),a!==null&&av(a),t.blockedOn=i,!1;a.shift()}return!0}function ov(t,a,i){vo(t)&&i.delete(a)}function tw(){zd=!1,Ja!==null&&vo(Ja)&&(Ja=null),el!==null&&vo(el)&&(el=null),tl!==null&&vo(tl)&&(tl=null),Pi.forEach(ov),Bi.forEach(ov)}function yo(t,a){t.blockedOn===a&&(t.blockedOn=null,zd||(zd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,tw)))}var bo=null;function cv(t){bo!==t&&(bo=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){bo===t&&(bo=null);for(var a=0;a<t.length;a+=3){var i=t[a],o=t[a+1],d=t[a+2];if(typeof o!="function"){if(kd(o||i)===null)continue;break}var h=Gl(i);h!==null&&(t.splice(a,3),a-=3,Au(h,{pending:!0,data:d,method:i.method,action:o},o,d))}}))}function Ds(t){function a(j){return yo(j,t)}Ja!==null&&yo(Ja,t),el!==null&&yo(el,t),tl!==null&&yo(tl,t),Pi.forEach(a),Bi.forEach(a);for(var i=0;i<nl.length;i++){var o=nl[i];o.blockedOn===t&&(o.blockedOn=null)}for(;0<nl.length&&(i=nl[0],i.blockedOn===null);)rv(i),i.blockedOn===null&&nl.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(o=0;o<i.length;o+=3){var d=i[o],h=i[o+1],b=d[cn]||null;if(typeof h=="function")b||cv(i);else if(b){var E=null;if(h&&h.hasAttribute("formAction")){if(d=h,b=h[cn]||null)E=b.formAction;else if(kd(d)!==null)continue}else E=b.action;typeof E=="function"?i[o+1]=E:(i.splice(o,3),o-=3),cv(i)}}}function uv(){function t(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(b){return d=b})},focusReset:"manual",scroll:"manual"})}function a(){d!==null&&(d(),d=null),o||setTimeout(i,20)}function i(){if(!o&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(i,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),d!==null&&(d(),d=null)}}}function Od(t){this._internalRoot=t}xo.prototype.render=Od.prototype.render=function(t){var a=this._internalRoot;if(a===null)throw Error(s(409));var i=a.current,o=Tn();tv(i,o,t,a,null,null)},xo.prototype.unmount=Od.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var a=t.containerInfo;tv(t.current,2,null,t,null,null),Jr(),a[Fl]=null}};function xo(t){this._internalRoot=t}xo.prototype.unstable_scheduleHydration=function(t){if(t){var a=on();t={blockedOn:null,target:t,priority:a};for(var i=0;i<nl.length&&a!==0&&a<nl[i].priority;i++);nl.splice(i,0,t),i===0&&rv(t)}};var dv=n.version;if(dv!=="19.2.4")throw Error(s(527,dv,"19.2.4"));G.findDOMNode=function(t){var a=t._reactInternals;if(a===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(a),t=t!==null?y(t):null,t=t===null?null:t.stateNode,t};var nw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var So=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!So.isDisabled&&So.supportsFiber)try{aa=So.inject(nw),Ze=So}catch{}}return qi.createRoot=function(t,a){if(!r(t))throw Error(s(299));var i=!1,o="",d=yg,h=bg,b=xg;return a!=null&&(a.unstable_strictMode===!0&&(i=!0),a.identifierPrefix!==void 0&&(o=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(h=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError)),a=Jp(t,1,!1,null,null,i,o,null,d,h,b,uv),t[Fl]=a.current,pd(t),new Od(a)},qi.hydrateRoot=function(t,a,i){if(!r(t))throw Error(s(299));var o=!1,d="",h=yg,b=bg,E=xg,j=null;return i!=null&&(i.unstable_strictMode===!0&&(o=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(b=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.formState!==void 0&&(j=i.formState)),a=Jp(t,1,!0,a,i??null,o,d,j,h,b,E,uv),a.context=ev(null),i=a.current,o=Tn(),o=An(o),d=Ua(o),d.callback=null,$a(i,d,o),i=o,a.current.lanes=i,xe(a,i),ra(a),t[Fl]=a.current,pd(t),new xo(a)},qi.version="19.2.4",qi}var Sv;function fw(){if(Sv)return Id.exports;Sv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Id.exports=dw(),Id.exports}var hw=fw(),rl=f0();const mw=u0(rl),cc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Gs(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function Vf(e){return"nodeType"in e}function vn(e){var n,l;return e?Gs(e)?e:Vf(e)&&(n=(l=e.ownerDocument)==null?void 0:l.defaultView)!=null?n:window:window}function Kf(e){const{Document:n}=vn(e);return e instanceof n}function sr(e){return Gs(e)?!1:e instanceof vn(e).HTMLElement}function h0(e){return e instanceof vn(e).SVGElement}function Vs(e){return e?Gs(e)?e.document:Vf(e)?Kf(e)?e:sr(e)||h0(e)?e.ownerDocument:document:document:document}const dl=cc?w.useLayoutEffect:w.useEffect;function Wf(e){const n=w.useRef(e);return dl(()=>{n.current=e}),w.useCallback(function(){for(var l=arguments.length,s=new Array(l),r=0;r<l;r++)s[r]=arguments[r];return n.current==null?void 0:n.current(...s)},[])}function gw(){const e=w.useRef(null),n=w.useCallback((s,r)=>{e.current=setInterval(s,r)},[]),l=w.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,l]}function Ki(e,n){n===void 0&&(n=[e]);const l=w.useRef(e);return dl(()=>{l.current!==e&&(l.current=e)},n),l}function ir(e,n){const l=w.useRef();return w.useMemo(()=>{const s=e(l.current);return l.current=s,s},[...n])}function $o(e){const n=Wf(e),l=w.useRef(null),s=w.useCallback(r=>{r!==l.current&&n?.(r,l.current),l.current=r},[]);return[l,s]}function wf(e){const n=w.useRef();return w.useEffect(()=>{n.current=e},[e]),n.current}let $d={};function uc(e,n){return w.useMemo(()=>{if(n)return n;const l=$d[e]==null?0:$d[e]+1;return $d[e]=l,e+"-"+l},[e,n])}function m0(e){return function(n){for(var l=arguments.length,s=new Array(l>1?l-1:0),r=1;r<l;r++)s[r-1]=arguments[r];return s.reduce((c,u)=>{const f=Object.entries(u);for(const[g,p]of f){const y=c[g];y!=null&&(c[g]=y+e*p)}return c},{...n})}}const Ls=m0(1),Wi=m0(-1);function pw(e){return"clientX"in e&&"clientY"in e}function g0(e){if(!e)return!1;const{KeyboardEvent:n}=vn(e.target);return n&&e instanceof n}function vw(e){if(!e)return!1;const{TouchEvent:n}=vn(e.target);return n&&e instanceof n}function _f(e){if(vw(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:l}=e.touches[0];return{x:n,y:l}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:l}=e.changedTouches[0];return{x:n,y:l}}}return pw(e)?{x:e.clientX,y:e.clientY}:null}const Ho=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:l}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(l?Math.round(l):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:l}=e;return"scaleX("+n+") scaleY("+l+")"}},Transform:{toString(e){if(e)return[Ho.Translate.toString(e),Ho.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:l,easing:s}=e;return n+" "+l+"ms "+s}}}),wv="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function yw(e){return e.matches(wv)?e:e.querySelector(wv)}const bw={display:"none"};function xw(e){let{id:n,value:l}=e;return Ut.createElement("div",{id:n,style:bw},l)}function Sw(e){let{id:n,announcement:l,ariaLiveType:s="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ut.createElement("div",{id:n,style:r,role:"status","aria-live":s,"aria-atomic":!0},l)}function ww(){const[e,n]=w.useState("");return{announce:w.useCallback(s=>{s!=null&&n(s)},[]),announcement:e}}const p0=w.createContext(null);function _w(e){const n=w.useContext(p0);w.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function Ew(){const[e]=w.useState(()=>new Set),n=w.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[w.useCallback(s=>{let{type:r,event:c}=s;e.forEach(u=>{var f;return(f=u[r])==null?void 0:f.call(u,c)})},[e]),n]}const Nw={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Tw={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:l}=e;return l?"Draggable item "+n.id+" was moved over droppable area "+l.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:l}=e;return l?"Draggable item "+n.id+" was dropped over droppable area "+l.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function Mw(e){let{announcements:n=Tw,container:l,hiddenTextDescribedById:s,screenReaderInstructions:r=Nw}=e;const{announce:c,announcement:u}=ww(),f=uc("DndLiveRegion"),[g,p]=w.useState(!1);if(w.useEffect(()=>{p(!0)},[]),_w(w.useMemo(()=>({onDragStart(v){let{active:x}=v;c(n.onDragStart({active:x}))},onDragMove(v){let{active:x,over:S}=v;n.onDragMove&&c(n.onDragMove({active:x,over:S}))},onDragOver(v){let{active:x,over:S}=v;c(n.onDragOver({active:x,over:S}))},onDragEnd(v){let{active:x,over:S}=v;c(n.onDragEnd({active:x,over:S}))},onDragCancel(v){let{active:x,over:S}=v;c(n.onDragCancel({active:x,over:S}))}}),[c,n])),!g)return null;const y=Ut.createElement(Ut.Fragment,null,Ut.createElement(xw,{id:s,value:r.draggable}),Ut.createElement(Sw,{id:f,announcement:u}));return l?rl.createPortal(y,l):y}var Pt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Pt||(Pt={}));function Zo(){}function _v(e,n){return w.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function Dw(){for(var e=arguments.length,n=new Array(e),l=0;l<e;l++)n[l]=arguments[l];return w.useMemo(()=>[...n].filter(s=>s!=null),[...n])}const ta=Object.freeze({x:0,y:0});function v0(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function y0(e,n){let{data:{value:l}}=e,{data:{value:s}}=n;return l-s}function jw(e,n){let{data:{value:l}}=e,{data:{value:s}}=n;return s-l}function Ev(e){let{left:n,top:l,height:s,width:r}=e;return[{x:n,y:l},{x:n+r,y:l},{x:n,y:l+s},{x:n+r,y:l+s}]}function b0(e,n){if(!e||e.length===0)return null;const[l]=e;return l[n]}function Nv(e,n,l){return n===void 0&&(n=e.left),l===void 0&&(l=e.top),{x:n+e.width*.5,y:l+e.height*.5}}const Cw=e=>{let{collisionRect:n,droppableRects:l,droppableContainers:s}=e;const r=Nv(n,n.left,n.top),c=[];for(const u of s){const{id:f}=u,g=l.get(f);if(g){const p=v0(Nv(g),r);c.push({id:f,data:{droppableContainer:u,value:p}})}}return c.sort(y0)},Rw=e=>{let{collisionRect:n,droppableRects:l,droppableContainers:s}=e;const r=Ev(n),c=[];for(const u of s){const{id:f}=u,g=l.get(f);if(g){const p=Ev(g),y=r.reduce((x,S,N)=>x+v0(p[N],S),0),v=Number((y/4).toFixed(4));c.push({id:f,data:{droppableContainer:u,value:v}})}}return c.sort(y0)};function Aw(e,n){const l=Math.max(n.top,e.top),s=Math.max(n.left,e.left),r=Math.min(n.left+n.width,e.left+e.width),c=Math.min(n.top+n.height,e.top+e.height),u=r-s,f=c-l;if(s<r&&l<c){const g=n.width*n.height,p=e.width*e.height,y=u*f,v=y/(g+p-y);return Number(v.toFixed(4))}return 0}const kw=e=>{let{collisionRect:n,droppableRects:l,droppableContainers:s}=e;const r=[];for(const c of s){const{id:u}=c,f=l.get(u);if(f){const g=Aw(f,n);g>0&&r.push({id:u,data:{droppableContainer:c,value:g}})}}return r.sort(jw)};function zw(e,n,l){return{...e,scaleX:n&&l?n.width/l.width:1,scaleY:n&&l?n.height/l.height:1}}function x0(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:ta}function Ow(e){return function(l){for(var s=arguments.length,r=new Array(s>1?s-1:0),c=1;c<s;c++)r[c-1]=arguments[c];return r.reduce((u,f)=>({...u,top:u.top+e*f.y,bottom:u.bottom+e*f.y,left:u.left+e*f.x,right:u.right+e*f.x}),{...l})}}const Pw=Ow(1);function Bw(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function Iw(e,n,l){const s=Bw(n);if(!s)return e;const{scaleX:r,scaleY:c,x:u,y:f}=s,g=e.left-u-(1-r)*parseFloat(l),p=e.top-f-(1-c)*parseFloat(l.slice(l.indexOf(" ")+1)),y=r?e.width/r:e.width,v=c?e.height/c:e.height;return{width:y,height:v,top:p,right:g+y,bottom:p+v,left:g}}const Lw={ignoreTransform:!1};function rr(e,n){n===void 0&&(n=Lw);let l=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:p,transformOrigin:y}=vn(e).getComputedStyle(e);p&&(l=Iw(l,p,y))}const{top:s,left:r,width:c,height:u,bottom:f,right:g}=l;return{top:s,left:r,width:c,height:u,bottom:f,right:g}}function Tv(e){return rr(e,{ignoreTransform:!0})}function qw(e){const n=e.innerWidth,l=e.innerHeight;return{top:0,left:0,right:n,bottom:l,width:n,height:l}}function Uw(e,n){return n===void 0&&(n=vn(e).getComputedStyle(e)),n.position==="fixed"}function $w(e,n){n===void 0&&(n=vn(e).getComputedStyle(e));const l=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const c=n[r];return typeof c=="string"?l.test(c):!1})}function dc(e,n){const l=[];function s(r){if(n!=null&&l.length>=n||!r)return l;if(Kf(r)&&r.scrollingElement!=null&&!l.includes(r.scrollingElement))return l.push(r.scrollingElement),l;if(!sr(r)||h0(r)||l.includes(r))return l;const c=vn(e).getComputedStyle(r);return r!==e&&$w(r,c)&&l.push(r),Uw(r,c)?l:s(r.parentNode)}return e?s(e):l}function S0(e){const[n]=dc(e,1);return n??null}function Hd(e){return!cc||!e?null:Gs(e)?e:Vf(e)?Kf(e)||e===Vs(e).scrollingElement?window:sr(e)?e:null:null}function w0(e){return Gs(e)?e.scrollX:e.scrollLeft}function _0(e){return Gs(e)?e.scrollY:e.scrollTop}function Ef(e){return{x:w0(e),y:_0(e)}}var qt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(qt||(qt={}));function E0(e){return!cc||!e?!1:e===document.scrollingElement}function N0(e){const n={x:0,y:0},l=E0(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-l.width,y:e.scrollHeight-l.height},r=e.scrollTop<=n.y,c=e.scrollLeft<=n.x,u=e.scrollTop>=s.y,f=e.scrollLeft>=s.x;return{isTop:r,isLeft:c,isBottom:u,isRight:f,maxScroll:s,minScroll:n}}const Hw={x:.2,y:.2};function Zw(e,n,l,s,r){let{top:c,left:u,right:f,bottom:g}=l;s===void 0&&(s=10),r===void 0&&(r=Hw);const{isTop:p,isBottom:y,isLeft:v,isRight:x}=N0(e),S={x:0,y:0},N={x:0,y:0},_={height:n.height*r.y,width:n.width*r.x};return!p&&c<=n.top+_.height?(S.y=qt.Backward,N.y=s*Math.abs((n.top+_.height-c)/_.height)):!y&&g>=n.bottom-_.height&&(S.y=qt.Forward,N.y=s*Math.abs((n.bottom-_.height-g)/_.height)),!x&&f>=n.right-_.width?(S.x=qt.Forward,N.x=s*Math.abs((n.right-_.width-f)/_.width)):!v&&u<=n.left+_.width&&(S.x=qt.Backward,N.x=s*Math.abs((n.left+_.width-u)/_.width)),{direction:S,speed:N}}function Fw(e){if(e===document.scrollingElement){const{innerWidth:c,innerHeight:u}=window;return{top:0,left:0,right:c,bottom:u,width:c,height:u}}const{top:n,left:l,right:s,bottom:r}=e.getBoundingClientRect();return{top:n,left:l,right:s,bottom:r,width:e.clientWidth,height:e.clientHeight}}function T0(e){return e.reduce((n,l)=>Ls(n,Ef(l)),ta)}function Yw(e){return e.reduce((n,l)=>n+w0(l),0)}function Gw(e){return e.reduce((n,l)=>n+_0(l),0)}function Vw(e,n){if(n===void 0&&(n=rr),!e)return;const{top:l,left:s,bottom:r,right:c}=n(e);S0(e)&&(r<=0||c<=0||l>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Kw=[["x",["left","right"],Yw],["y",["top","bottom"],Gw]];class Xf{constructor(n,l){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=dc(l),r=T0(s);this.rect={...n},this.width=n.width,this.height=n.height;for(const[c,u,f]of Kw)for(const g of u)Object.defineProperty(this,g,{get:()=>{const p=f(s),y=r[c]-p;return this.rect[g]+y},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Fi{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(l=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...l)})},this.target=n}add(n,l,s){var r;(r=this.target)==null||r.addEventListener(n,l,s),this.listeners.push([n,l,s])}}function Ww(e){const{EventTarget:n}=vn(e);return e instanceof n?e:Vs(e)}function Zd(e,n){const l=Math.abs(e.x),s=Math.abs(e.y);return typeof n=="number"?Math.sqrt(l**2+s**2)>n:"x"in n&&"y"in n?l>n.x&&s>n.y:"x"in n?l>n.x:"y"in n?s>n.y:!1}var Fn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Fn||(Fn={}));function Mv(e){e.preventDefault()}function Xw(e){e.stopPropagation()}var He;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(He||(He={}));const M0={start:[He.Space,He.Enter],cancel:[He.Esc],end:[He.Space,He.Enter,He.Tab]},Qw=(e,n)=>{let{currentCoordinates:l}=n;switch(e.code){case He.Right:return{...l,x:l.x+25};case He.Left:return{...l,x:l.x-25};case He.Down:return{...l,y:l.y+25};case He.Up:return{...l,y:l.y-25}}};class Qf{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:l}}=n;this.props=n,this.listeners=new Fi(Vs(l)),this.windowListeners=new Fi(vn(l)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Fn.Resize,this.handleCancel),this.windowListeners.add(Fn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Fn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:l}=this.props,s=n.node.current;s&&Vw(s),l(ta)}handleKeyDown(n){if(g0(n)){const{active:l,context:s,options:r}=this.props,{keyboardCodes:c=M0,coordinateGetter:u=Qw,scrollBehavior:f="smooth"}=r,{code:g}=n;if(c.end.includes(g)){this.handleEnd(n);return}if(c.cancel.includes(g)){this.handleCancel(n);return}const{collisionRect:p}=s.current,y=p?{x:p.left,y:p.top}:ta;this.referenceCoordinates||(this.referenceCoordinates=y);const v=u(n,{active:l,context:s.current,currentCoordinates:y});if(v){const x=Wi(v,y),S={x:0,y:0},{scrollableAncestors:N}=s.current;for(const _ of N){const M=n.code,{isTop:R,isRight:I,isLeft:O,isBottom:L,maxScroll:H,minScroll:A}=N0(_),D=Fw(_),F={x:Math.min(M===He.Right?D.right-D.width/2:D.right,Math.max(M===He.Right?D.left:D.left+D.width/2,v.x)),y:Math.min(M===He.Down?D.bottom-D.height/2:D.bottom,Math.max(M===He.Down?D.top:D.top+D.height/2,v.y))},ie=M===He.Right&&!I||M===He.Left&&!O,re=M===He.Down&&!L||M===He.Up&&!R;if(ie&&F.x!==v.x){const Q=_.scrollLeft+x.x,ce=M===He.Right&&Q<=H.x||M===He.Left&&Q>=A.x;if(ce&&!x.y){_.scrollTo({left:Q,behavior:f});return}ce?S.x=_.scrollLeft-Q:S.x=M===He.Right?_.scrollLeft-H.x:_.scrollLeft-A.x,S.x&&_.scrollBy({left:-S.x,behavior:f});break}else if(re&&F.y!==v.y){const Q=_.scrollTop+x.y,ce=M===He.Down&&Q<=H.y||M===He.Up&&Q>=A.y;if(ce&&!x.x){_.scrollTo({top:Q,behavior:f});return}ce?S.y=_.scrollTop-Q:S.y=M===He.Down?_.scrollTop-H.y:_.scrollTop-A.y,S.y&&_.scrollBy({top:-S.y,behavior:f});break}}this.handleMove(n,Ls(Wi(v,this.referenceCoordinates),S))}}}handleMove(n,l){const{onMove:s}=this.props;n.preventDefault(),s(l)}handleEnd(n){const{onEnd:l}=this.props;n.preventDefault(),this.detach(),l()}handleCancel(n){const{onCancel:l}=this.props;n.preventDefault(),this.detach(),l()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Qf.activators=[{eventName:"onKeyDown",handler:(e,n,l)=>{let{keyboardCodes:s=M0,onActivation:r}=n,{active:c}=l;const{code:u}=e.nativeEvent;if(s.start.includes(u)){const f=c.activatorNode.current;return f&&e.target!==f?!1:(e.preventDefault(),r?.({event:e.nativeEvent}),!0)}return!1}}];function Dv(e){return!!(e&&"distance"in e)}function jv(e){return!!(e&&"delay"in e)}class Jf{constructor(n,l,s){var r;s===void 0&&(s=Ww(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=l;const{event:c}=n,{target:u}=c;this.props=n,this.events=l,this.document=Vs(u),this.documentListeners=new Fi(this.document),this.listeners=new Fi(s),this.windowListeners=new Fi(vn(u)),this.initialCoordinates=(r=_f(c))!=null?r:ta,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:l,bypassActivationConstraint:s}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(Fn.Resize,this.handleCancel),this.windowListeners.add(Fn.DragStart,Mv),this.windowListeners.add(Fn.VisibilityChange,this.handleCancel),this.windowListeners.add(Fn.ContextMenu,Mv),this.documentListeners.add(Fn.Keydown,this.handleKeydown),l){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(jv(l)){this.timeoutId=setTimeout(this.handleStart,l.delay),this.handlePending(l);return}if(Dv(l)){this.handlePending(l);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,l){const{active:s,onPending:r}=this.props;r(s,n,this.initialCoordinates,l)}handleStart(){const{initialCoordinates:n}=this,{onStart:l}=this.props;n&&(this.activated=!0,this.documentListeners.add(Fn.Click,Xw,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Fn.SelectionChange,this.removeTextSelection),l(n))}handleMove(n){var l;const{activated:s,initialCoordinates:r,props:c}=this,{onMove:u,options:{activationConstraint:f}}=c;if(!r)return;const g=(l=_f(n))!=null?l:ta,p=Wi(r,g);if(!s&&f){if(Dv(f)){if(f.tolerance!=null&&Zd(p,f.tolerance))return this.handleCancel();if(Zd(p,f.distance))return this.handleStart()}if(jv(f)&&Zd(p,f.tolerance))return this.handleCancel();this.handlePending(f,p);return}n.cancelable&&n.preventDefault(),u(g)}handleEnd(){const{onAbort:n,onEnd:l}=this.props;this.detach(),this.activated||n(this.props.active),l()}handleCancel(){const{onAbort:n,onCancel:l}=this.props;this.detach(),this.activated||n(this.props.active),l()}handleKeydown(n){n.code===He.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const Jw={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class eh extends Jf{constructor(n){const{event:l}=n,s=Vs(l.target);super(n,Jw,s)}}eh.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:l}=e,{onActivation:s}=n;return!l.isPrimary||l.button!==0?!1:(s?.({event:l}),!0)}}];const e_={move:{name:"mousemove"},end:{name:"mouseup"}};var Nf;(function(e){e[e.RightClick=2]="RightClick"})(Nf||(Nf={}));class t_ extends Jf{constructor(n){super(n,e_,Vs(n.event.target))}}t_.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:l}=e,{onActivation:s}=n;return l.button===Nf.RightClick?!1:(s?.({event:l}),!0)}}];const Fd={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class n_ extends Jf{constructor(n){super(n,Fd)}static setup(){return window.addEventListener(Fd.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(Fd.move.name,n)};function n(){}}}n_.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:l}=e,{onActivation:s}=n;const{touches:r}=l;return r.length>1?!1:(s?.({event:l}),!0)}}];var Yi;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Yi||(Yi={}));var Fo;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Fo||(Fo={}));function a_(e){let{acceleration:n,activator:l=Yi.Pointer,canScroll:s,draggingRect:r,enabled:c,interval:u=5,order:f=Fo.TreeOrder,pointerCoordinates:g,scrollableAncestors:p,scrollableAncestorRects:y,delta:v,threshold:x}=e;const S=s_({delta:v,disabled:!c}),[N,_]=gw(),M=w.useRef({x:0,y:0}),R=w.useRef({x:0,y:0}),I=w.useMemo(()=>{switch(l){case Yi.Pointer:return g?{top:g.y,bottom:g.y,left:g.x,right:g.x}:null;case Yi.DraggableRect:return r}},[l,r,g]),O=w.useRef(null),L=w.useCallback(()=>{const A=O.current;if(!A)return;const D=M.current.x*R.current.x,F=M.current.y*R.current.y;A.scrollBy(D,F)},[]),H=w.useMemo(()=>f===Fo.TreeOrder?[...p].reverse():p,[f,p]);w.useEffect(()=>{if(!c||!p.length||!I){_();return}for(const A of H){if(s?.(A)===!1)continue;const D=p.indexOf(A),F=y[D];if(!F)continue;const{direction:ie,speed:re}=Zw(A,F,I,n,x);for(const Q of["x","y"])S[Q][ie[Q]]||(re[Q]=0,ie[Q]=0);if(re.x>0||re.y>0){_(),O.current=A,N(L,u),M.current=re,R.current=ie;return}}M.current={x:0,y:0},R.current={x:0,y:0},_()},[n,L,s,_,c,u,JSON.stringify(I),JSON.stringify(S),N,p,H,y,JSON.stringify(x)])}const l_={x:{[qt.Backward]:!1,[qt.Forward]:!1},y:{[qt.Backward]:!1,[qt.Forward]:!1}};function s_(e){let{delta:n,disabled:l}=e;const s=wf(n);return ir(r=>{if(l||!s||!r)return l_;const c={x:Math.sign(n.x-s.x),y:Math.sign(n.y-s.y)};return{x:{[qt.Backward]:r.x[qt.Backward]||c.x===-1,[qt.Forward]:r.x[qt.Forward]||c.x===1},y:{[qt.Backward]:r.y[qt.Backward]||c.y===-1,[qt.Forward]:r.y[qt.Forward]||c.y===1}}},[l,n,s])}function i_(e,n){const l=n!=null?e.get(n):void 0,s=l?l.node.current:null;return ir(r=>{var c;return n==null?null:(c=s??r)!=null?c:null},[s,n])}function r_(e,n){return w.useMemo(()=>e.reduce((l,s)=>{const{sensor:r}=s,c=r.activators.map(u=>({eventName:u.eventName,handler:n(u.handler,s)}));return[...l,...c]},[]),[e,n])}var Xi;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Xi||(Xi={}));var Tf;(function(e){e.Optimized="optimized"})(Tf||(Tf={}));const Cv=new Map;function o_(e,n){let{dragging:l,dependencies:s,config:r}=n;const[c,u]=w.useState(null),{frequency:f,measure:g,strategy:p}=r,y=w.useRef(e),v=M(),x=Ki(v),S=w.useCallback(function(R){R===void 0&&(R=[]),!x.current&&u(I=>I===null?R:I.concat(R.filter(O=>!I.includes(O))))},[x]),N=w.useRef(null),_=ir(R=>{if(v&&!l)return Cv;if(!R||R===Cv||y.current!==e||c!=null){const I=new Map;for(let O of e){if(!O)continue;if(c&&c.length>0&&!c.includes(O.id)&&O.rect.current){I.set(O.id,O.rect.current);continue}const L=O.node.current,H=L?new Xf(g(L),L):null;O.rect.current=H,H&&I.set(O.id,H)}return I}return R},[e,c,l,v,g]);return w.useEffect(()=>{y.current=e},[e]),w.useEffect(()=>{v||S()},[l,v]),w.useEffect(()=>{c&&c.length>0&&u(null)},[JSON.stringify(c)]),w.useEffect(()=>{v||typeof f!="number"||N.current!==null||(N.current=setTimeout(()=>{S(),N.current=null},f))},[f,v,S,...s]),{droppableRects:_,measureDroppableContainers:S,measuringScheduled:c!=null};function M(){switch(p){case Xi.Always:return!1;case Xi.BeforeDragging:return l;default:return!l}}}function D0(e,n){return ir(l=>e?l||(typeof n=="function"?n(e):e):null,[n,e])}function c_(e,n){return D0(e,n)}function u_(e){let{callback:n,disabled:l}=e;const s=Wf(n),r=w.useMemo(()=>{if(l||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:c}=window;return new c(s)},[s,l]);return w.useEffect(()=>()=>r?.disconnect(),[r]),r}function fc(e){let{callback:n,disabled:l}=e;const s=Wf(n),r=w.useMemo(()=>{if(l||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:c}=window;return new c(s)},[l]);return w.useEffect(()=>()=>r?.disconnect(),[r]),r}function d_(e){return new Xf(rr(e),e)}function Rv(e,n,l){n===void 0&&(n=d_);const[s,r]=w.useState(null);function c(){r(g=>{if(!e)return null;if(e.isConnected===!1){var p;return(p=g??l)!=null?p:null}const y=n(e);return JSON.stringify(g)===JSON.stringify(y)?g:y})}const u=u_({callback(g){if(e)for(const p of g){const{type:y,target:v}=p;if(y==="childList"&&v instanceof HTMLElement&&v.contains(e)){c();break}}}}),f=fc({callback:c});return dl(()=>{c(),e?(f?.observe(e),u?.observe(document.body,{childList:!0,subtree:!0})):(f?.disconnect(),u?.disconnect())},[e]),s}function f_(e){const n=D0(e);return x0(e,n)}const Av=[];function h_(e){const n=w.useRef(e),l=ir(s=>e?s&&s!==Av&&e&&n.current&&e.parentNode===n.current.parentNode?s:dc(e):Av,[e]);return w.useEffect(()=>{n.current=e},[e]),l}function m_(e){const[n,l]=w.useState(null),s=w.useRef(e),r=w.useCallback(c=>{const u=Hd(c.target);u&&l(f=>f?(f.set(u,Ef(u)),new Map(f)):null)},[]);return w.useEffect(()=>{const c=s.current;if(e!==c){u(c);const f=e.map(g=>{const p=Hd(g);return p?(p.addEventListener("scroll",r,{passive:!0}),[p,Ef(p)]):null}).filter(g=>g!=null);l(f.length?new Map(f):null),s.current=e}return()=>{u(e),u(c)};function u(f){f.forEach(g=>{const p=Hd(g);p?.removeEventListener("scroll",r)})}},[r,e]),w.useMemo(()=>e.length?n?Array.from(n.values()).reduce((c,u)=>Ls(c,u),ta):T0(e):ta,[e,n])}function kv(e,n){n===void 0&&(n=[]);const l=w.useRef(null);return w.useEffect(()=>{l.current=null},n),w.useEffect(()=>{const s=e!==ta;s&&!l.current&&(l.current=e),!s&&l.current&&(l.current=null)},[e]),l.current?Wi(e,l.current):ta}function g_(e){w.useEffect(()=>{if(!cc)return;const n=e.map(l=>{let{sensor:s}=l;return s.setup==null?void 0:s.setup()});return()=>{for(const l of n)l?.()}},e.map(n=>{let{sensor:l}=n;return l}))}function p_(e,n){return w.useMemo(()=>e.reduce((l,s)=>{let{eventName:r,handler:c}=s;return l[r]=u=>{c(u,n)},l},{}),[e,n])}function j0(e){return w.useMemo(()=>e?qw(e):null,[e])}const zv=[];function v_(e,n){n===void 0&&(n=rr);const[l]=e,s=j0(l?vn(l):null),[r,c]=w.useState(zv);function u(){c(()=>e.length?e.map(g=>E0(g)?s:new Xf(n(g),g)):zv)}const f=fc({callback:u});return dl(()=>{f?.disconnect(),u(),e.forEach(g=>f?.observe(g))},[e]),r}function y_(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return sr(n)?n:e}function b_(e){let{measure:n}=e;const[l,s]=w.useState(null),r=w.useCallback(p=>{for(const{target:y}of p)if(sr(y)){s(v=>{const x=n(y);return v?{...v,width:x.width,height:x.height}:x});break}},[n]),c=fc({callback:r}),u=w.useCallback(p=>{const y=y_(p);c?.disconnect(),y&&c?.observe(y),s(y?n(y):null)},[n,c]),[f,g]=$o(u);return w.useMemo(()=>({nodeRef:f,rect:l,setRef:g}),[l,f,g])}const x_=[{sensor:eh,options:{}},{sensor:Qf,options:{}}],S_={current:{}},Po={draggable:{measure:Tv},droppable:{measure:Tv,strategy:Xi.WhileDragging,frequency:Tf.Optimized},dragOverlay:{measure:rr}};class Gi extends Map{get(n){var l;return n!=null&&(l=super.get(n))!=null?l:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:l}=n;return!l})}getNodeFor(n){var l,s;return(l=(s=this.get(n))==null?void 0:s.node.current)!=null?l:void 0}}const w_={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Gi,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Zo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Po,measureDroppableContainers:Zo,windowRect:null,measuringScheduled:!1},__={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Zo,draggableNodes:new Map,over:null,measureDroppableContainers:Zo},hc=w.createContext(__),E_=w.createContext(w_);function N_(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Gi}}}function T_(e,n){switch(n.type){case Pt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case Pt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case Pt.DragEnd:case Pt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Pt.RegisterDroppable:{const{element:l}=n,{id:s}=l,r=new Gi(e.droppable.containers);return r.set(s,l),{...e,droppable:{...e.droppable,containers:r}}}case Pt.SetDroppableDisabled:{const{id:l,key:s,disabled:r}=n,c=e.droppable.containers.get(l);if(!c||s!==c.key)return e;const u=new Gi(e.droppable.containers);return u.set(l,{...c,disabled:r}),{...e,droppable:{...e.droppable,containers:u}}}case Pt.UnregisterDroppable:{const{id:l,key:s}=n,r=e.droppable.containers.get(l);if(!r||s!==r.key)return e;const c=new Gi(e.droppable.containers);return c.delete(l),{...e,droppable:{...e.droppable,containers:c}}}default:return e}}function M_(e){let{disabled:n}=e;const{active:l,activatorEvent:s,draggableNodes:r}=w.useContext(hc),c=wf(s),u=wf(l?.id);return w.useEffect(()=>{if(!n&&!s&&c&&u!=null){if(!g0(c)||document.activeElement===c.target)return;const f=r.get(u);if(!f)return;const{activatorNode:g,node:p}=f;if(!g.current&&!p.current)return;requestAnimationFrame(()=>{for(const y of[g.current,p.current]){if(!y)continue;const v=yw(y);if(v){v.focus();break}}})}},[s,n,r,u,c]),null}function D_(e,n){let{transform:l,...s}=n;return e!=null&&e.length?e.reduce((r,c)=>c({transform:r,...s}),l):l}function j_(e){return w.useMemo(()=>({draggable:{...Po.draggable,...e?.draggable},droppable:{...Po.droppable,...e?.droppable},dragOverlay:{...Po.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function C_(e){let{activeNode:n,measure:l,initialRect:s,config:r=!0}=e;const c=w.useRef(!1),{x:u,y:f}=typeof r=="boolean"?{x:r,y:r}:r;dl(()=>{if(!u&&!f||!n){c.current=!1;return}if(c.current||!s)return;const p=n?.node.current;if(!p||p.isConnected===!1)return;const y=l(p),v=x0(y,s);if(u||(v.x=0),f||(v.y=0),c.current=!0,Math.abs(v.x)>0||Math.abs(v.y)>0){const x=S0(p);x&&x.scrollBy({top:v.y,left:v.x})}},[n,u,f,s,l])}const C0=w.createContext({...ta,scaleX:1,scaleY:1});var il;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(il||(il={}));const R_=w.memo(function(n){var l,s,r,c;let{id:u,accessibility:f,autoScroll:g=!0,children:p,sensors:y=x_,collisionDetection:v=kw,measuring:x,modifiers:S,...N}=n;const _=w.useReducer(T_,void 0,N_),[M,R]=_,[I,O]=Ew(),[L,H]=w.useState(il.Uninitialized),A=L===il.Initialized,{draggable:{active:D,nodes:F,translate:ie},droppable:{containers:re}}=M,Q=D!=null?F.get(D):null,ce=w.useRef({initial:null,translated:null}),z=w.useMemo(()=>{var Ne;return D!=null?{id:D,data:(Ne=Q?.data)!=null?Ne:S_,rect:ce}:null},[D,Q]),ue=w.useRef(null),[de,k]=w.useState(null),[G,le]=w.useState(null),B=Ki(N,Object.values(N)),W=uc("DndDescribedBy",u),T=w.useMemo(()=>re.getEnabled(),[re]),q=j_(x),{droppableRects:J,measureDroppableContainers:ae,measuringScheduled:fe}=o_(T,{dragging:A,dependencies:[ie.x,ie.y],config:q.droppable}),ge=i_(F,D),be=w.useMemo(()=>G?_f(G):null,[G]),ze=en(),Oe=c_(ge,q.draggable.measure);C_({activeNode:D!=null?F.get(D):null,config:ze.layoutShiftCompensation,initialRect:Oe,measure:q.draggable.measure});const Ge=Rv(ge,q.draggable.measure,Oe),kt=Rv(ge?ge.parentElement:null),wt=w.useRef({activatorEvent:null,active:null,activeNode:ge,collisionRect:null,collisions:null,droppableRects:J,draggableNodes:F,draggingNode:null,draggingNodeRect:null,droppableContainers:re,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Cn=re.getNodeFor((l=wt.current.over)==null?void 0:l.id),pt=b_({measure:q.dragOverlay.measure}),Kt=(s=pt.nodeRef.current)!=null?s:ge,We=A?(r=pt.rect)!=null?r:Ge:null,Qt=!!(pt.nodeRef.current&&pt.rect),oe=f_(Qt?null:Ge),Pe=j0(Kt?vn(Kt):null),V=h_(A?Cn??ge:null),se=v_(V),we=D_(S,{transform:{x:ie.x-oe.x,y:ie.y-oe.y,scaleX:1,scaleY:1},activatorEvent:G,active:z,activeNodeRect:Ge,containerNodeRect:kt,draggingNodeRect:We,over:wt.current.over,overlayNodeRect:pt.rect,scrollableAncestors:V,scrollableAncestorRects:se,windowRect:Pe}),Ee=be?Ls(be,ie):null,ke=m_(V),sn=kv(ke),Jt=kv(ke,[Ge]),zt=Ls(we,sn),bn=We?Pw(We,we):null,da=z&&bn?v({active:z,collisionRect:bn,droppableRects:J,droppableContainers:T,pointerCoordinates:Ee}):null,yl=b0(da,"id"),[Rn,bl]=w.useState(null),aa=Qt?we:Ls(we,Jt),Ze=zw(aa,(c=Rn?.rect)!=null?c:null,Ge),rn=w.useRef(null),X=w.useCallback((Ne,Ce)=>{let{sensor:Ve,options:it}=Ce;if(ue.current==null)return;const _e=F.get(ue.current);if(!_e)return;const Mt=Ne.nativeEvent,Et=new Ve({active:ue.current,activeNode:_e,event:Mt,options:it,context:wt,onAbort(nt){if(!F.get(nt))return;const{onDragAbort:Wt}=B.current,tn={id:nt};Wt?.(tn),I({type:"onDragAbort",event:tn})},onPending(nt,Bt,Wt,tn){if(!F.get(nt))return;const{onDragPending:kn}=B.current,on={id:nt,constraint:Bt,initialCoordinates:Wt,offset:tn};kn?.(on),I({type:"onDragPending",event:on})},onStart(nt){const Bt=ue.current;if(Bt==null)return;const Wt=F.get(Bt);if(!Wt)return;const{onDragStart:tn}=B.current,An={activatorEvent:Mt,active:{id:Bt,data:Wt.data,rect:ce}};rl.unstable_batchedUpdates(()=>{tn?.(An),H(il.Initializing),R({type:Pt.DragStart,initialCoordinates:nt,active:Bt}),I({type:"onDragStart",event:An}),k(rn.current),le(Mt)})},onMove(nt){R({type:Pt.DragMove,coordinates:nt})},onEnd:xe(Pt.DragEnd),onCancel:xe(Pt.DragCancel)});rn.current=Et;function xe(nt){return async function(){const{active:Wt,collisions:tn,over:An,scrollAdjustedTranslate:kn}=wt.current;let on=null;if(Wt&&kn){const{cancelDrop:Vn}=B.current;on={activatorEvent:Mt,active:Wt,collisions:tn,delta:kn,over:An},nt===Pt.DragEnd&&typeof Vn=="function"&&await Promise.resolve(Vn(on))&&(nt=Pt.DragCancel)}ue.current=null,rl.unstable_batchedUpdates(()=>{R({type:nt}),H(il.Uninitialized),bl(null),k(null),le(null),rn.current=null;const Vn=nt===Pt.DragEnd?"onDragEnd":"onDragCancel";if(on){const zn=B.current[Vn];zn?.(on),I({type:Vn,event:on})}})}}},[F]),he=w.useCallback((Ne,Ce)=>(Ve,it)=>{const _e=Ve.nativeEvent,Mt=F.get(it);if(ue.current!==null||!Mt||_e.dndKit||_e.defaultPrevented)return;const Et={active:Mt};Ne(Ve,Ce.options,Et)===!0&&(_e.dndKit={capturedBy:Ce.sensor},ue.current=it,X(Ve,Ce))},[F,X]),Ae=r_(y,he);g_(y),dl(()=>{Ge&&L===il.Initializing&&H(il.Initialized)},[Ge,L]),w.useEffect(()=>{const{onDragMove:Ne}=B.current,{active:Ce,activatorEvent:Ve,collisions:it,over:_e}=wt.current;if(!Ce||!Ve)return;const Mt={active:Ce,activatorEvent:Ve,collisions:it,delta:{x:zt.x,y:zt.y},over:_e};rl.unstable_batchedUpdates(()=>{Ne?.(Mt),I({type:"onDragMove",event:Mt})})},[zt.x,zt.y]),w.useEffect(()=>{const{active:Ne,activatorEvent:Ce,collisions:Ve,droppableContainers:it,scrollAdjustedTranslate:_e}=wt.current;if(!Ne||ue.current==null||!Ce||!_e)return;const{onDragOver:Mt}=B.current,Et=it.get(yl),xe=Et&&Et.rect.current?{id:Et.id,rect:Et.rect.current,data:Et.data,disabled:Et.disabled}:null,nt={active:Ne,activatorEvent:Ce,collisions:Ve,delta:{x:_e.x,y:_e.y},over:xe};rl.unstable_batchedUpdates(()=>{bl(xe),Mt?.(nt),I({type:"onDragOver",event:nt})})},[yl]),dl(()=>{wt.current={activatorEvent:G,active:z,activeNode:ge,collisionRect:bn,collisions:da,droppableRects:J,draggableNodes:F,draggingNode:Kt,draggingNodeRect:We,droppableContainers:re,over:Rn,scrollableAncestors:V,scrollAdjustedTranslate:zt},ce.current={initial:We,translated:bn}},[z,ge,da,bn,F,Kt,We,J,re,Rn,V,zt]),a_({...ze,delta:ie,draggingRect:bn,pointerCoordinates:Ee,scrollableAncestors:V,scrollableAncestorRects:se});const Xe=w.useMemo(()=>({active:z,activeNode:ge,activeNodeRect:Ge,activatorEvent:G,collisions:da,containerNodeRect:kt,dragOverlay:pt,draggableNodes:F,droppableContainers:re,droppableRects:J,over:Rn,measureDroppableContainers:ae,scrollableAncestors:V,scrollableAncestorRects:se,measuringConfiguration:q,measuringScheduled:fe,windowRect:Pe}),[z,ge,Ge,G,da,kt,pt,F,re,J,Rn,ae,V,se,q,fe,Pe]),_t=w.useMemo(()=>({activatorEvent:G,activators:Ae,active:z,activeNodeRect:Ge,ariaDescribedById:{draggable:W},dispatch:R,draggableNodes:F,over:Rn,measureDroppableContainers:ae}),[G,Ae,z,Ge,R,W,F,Rn,ae]);return Ut.createElement(p0.Provider,{value:O},Ut.createElement(hc.Provider,{value:_t},Ut.createElement(E_.Provider,{value:Xe},Ut.createElement(C0.Provider,{value:Ze},p)),Ut.createElement(M_,{disabled:f?.restoreFocus===!1})),Ut.createElement(Mw,{...f,hiddenTextDescribedById:W}));function en(){const Ne=de?.autoScrollEnabled===!1,Ce=typeof g=="object"?g.enabled===!1:g===!1,Ve=A&&!Ne&&!Ce;return typeof g=="object"?{...g,enabled:Ve}:{enabled:Ve}}}),A_=w.createContext(null),Ov="button",k_="Draggable";function R0(e){let{id:n,data:l,disabled:s=!1,attributes:r}=e;const c=uc(k_),{activators:u,activatorEvent:f,active:g,activeNodeRect:p,ariaDescribedById:y,draggableNodes:v,over:x}=w.useContext(hc),{role:S=Ov,roleDescription:N="draggable",tabIndex:_=0}=r??{},M=g?.id===n,R=w.useContext(M?C0:A_),[I,O]=$o(),[L,H]=$o(),A=p_(u,n),D=Ki(l);dl(()=>(v.set(n,{id:n,key:c,node:I,activatorNode:L,data:D}),()=>{const ie=v.get(n);ie&&ie.key===c&&v.delete(n)}),[v,n]);const F=w.useMemo(()=>({role:S,tabIndex:_,"aria-disabled":s,"aria-pressed":M&&S===Ov?!0:void 0,"aria-roledescription":N,"aria-describedby":y.draggable}),[s,S,_,M,N,y.draggable]);return{active:g,activatorEvent:f,activeNodeRect:p,attributes:F,isDragging:M,listeners:s?void 0:A,node:I,over:x,setNodeRef:O,setActivatorNodeRef:H,transform:R}}const z_="Droppable",O_={timeout:25};function A0(e){let{data:n,disabled:l=!1,id:s,resizeObserverConfig:r}=e;const c=uc(z_),{active:u,dispatch:f,over:g,measureDroppableContainers:p}=w.useContext(hc),y=w.useRef({disabled:l}),v=w.useRef(!1),x=w.useRef(null),S=w.useRef(null),{disabled:N,updateMeasurementsFor:_,timeout:M}={...O_,...r},R=Ki(_??s),I=w.useCallback(()=>{if(!v.current){v.current=!0;return}S.current!=null&&clearTimeout(S.current),S.current=setTimeout(()=>{p(Array.isArray(R.current)?R.current:[R.current]),S.current=null},M)},[M]),O=fc({callback:I,disabled:N||!u}),L=w.useCallback((F,ie)=>{O&&(ie&&(O.unobserve(ie),v.current=!1),F&&O.observe(F))},[O]),[H,A]=$o(L),D=Ki(n);return w.useEffect(()=>{!O||!H.current||(O.disconnect(),v.current=!1,O.observe(H.current))},[H,O]),w.useEffect(()=>(f({type:Pt.RegisterDroppable,element:{id:s,key:c,disabled:l,node:H,rect:x,data:D}}),()=>f({type:Pt.UnregisterDroppable,key:c,id:s})),[s]),w.useEffect(()=>{l!==y.current.disabled&&(f({type:Pt.SetDroppableDisabled,id:s,key:c,disabled:l}),y.current.disabled=l)},[s,c,l,f]),{active:u,rect:x,isOver:g?.id===s,node:H,over:g,setNodeRef:A}}function Yo(e){if(!e)return!1;const n=e.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const P_=[He.Down,He.Right,He.Up,He.Left],B_=(e,n)=>{let{context:{active:l,collisionRect:s,droppableRects:r,droppableContainers:c,over:u,scrollableAncestors:f}}=n;if(P_.includes(e.code)){if(e.preventDefault(),!l||!s)return;const g=[];c.getEnabled().forEach(v=>{if(!v||v!=null&&v.disabled)return;const x=r.get(v.id);if(x)switch(e.code){case He.Down:s.top<x.top&&g.push(v);break;case He.Up:s.top>x.top&&g.push(v);break;case He.Left:s.left>x.left&&g.push(v);break;case He.Right:s.left<x.left&&g.push(v);break}});const p=Rw({collisionRect:s,droppableRects:r,droppableContainers:g});let y=b0(p,"id");if(y===u?.id&&p.length>1&&(y=p[1].id),y!=null){const v=c.get(l.id),x=c.get(y),S=x?r.get(x.id):null,N=x?.node.current;if(N&&S&&v&&x){const M=dc(N).some((A,D)=>f[D]!==A),R=k0(v,x),I=I_(v,x),O=M||!R?{x:0,y:0}:{x:I?s.width-S.width:0,y:I?s.height-S.height:0},L={x:S.left,y:S.top};return O.x&&O.y?L:Wi(L,O)}}}};function k0(e,n){return!Yo(e)||!Yo(n)?!1:e.data.current.sortable.containerId===n.data.current.sortable.containerId}function I_(e,n){return!Yo(e)||!Yo(n)||!k0(e,n)?!1:e.data.current.sortable.index<n.data.current.sortable.index}const Pv=e=>Symbol.iterator in e,Bv=e=>"entries"in e,Iv=(e,n)=>{const l=e instanceof Map?e:new Map(e.entries()),s=n instanceof Map?n:new Map(n.entries());if(l.size!==s.size)return!1;for(const[r,c]of l)if(!s.has(r)||!Object.is(c,s.get(r)))return!1;return!0},L_=(e,n)=>{const l=e[Symbol.iterator](),s=n[Symbol.iterator]();let r=l.next(),c=s.next();for(;!r.done&&!c.done;){if(!Object.is(r.value,c.value))return!1;r=l.next(),c=s.next()}return!!r.done&&!!c.done};function q_(e,n){return Object.is(e,n)?!0:typeof e!="object"||e===null||typeof n!="object"||n===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(n)?!1:Pv(e)&&Pv(n)?Bv(e)&&Bv(n)?Iv(e,n):L_(e,n):Iv({entries:()=>Object.entries(e)},{entries:()=>Object.entries(n)})}function U_(e){const n=Ut.useRef(void 0);return l=>{const s=e(l);return q_(n.current,s)?n.current:n.current=s}}const $_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),H_=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,l,s)=>s?s.toUpperCase():l.toLowerCase()),Lv=e=>{const n=H_(e);return n.charAt(0).toUpperCase()+n.slice(1)},z0=(...e)=>e.filter((n,l,s)=>!!n&&n.trim()!==""&&s.indexOf(n)===l).join(" ").trim(),Z_=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};var F_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Y_=w.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:s,className:r="",children:c,iconNode:u,...f},g)=>w.createElement("svg",{ref:g,...F_,width:n,height:n,stroke:e,strokeWidth:s?Number(l)*24/Number(n):l,className:z0("lucide",r),...!c&&!Z_(f)&&{"aria-hidden":"true"},...f},[...u.map(([p,y])=>w.createElement(p,y)),...Array.isArray(c)?c:[c]]));const $t=(e,n)=>{const l=w.forwardRef(({className:s,...r},c)=>w.createElement(Y_,{ref:c,iconNode:n,className:z0(`lucide-${$_(Lv(e))}`,`lucide-${e}`,s),...r}));return l.displayName=Lv(e),l};const G_=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],V_=$t("copy",G_);const K_=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],W_=$t("external-link",K_);const X_=[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]],Q_=$t("git-branch",X_);const J_=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],eE=$t("grip-vertical",J_);const tE=[["path",{d:"m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9",key:"1hayfq"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"15ts47"}]],nE=$t("hammer",tE);const aE=[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]],th=$t("link-2",aE);const lE=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],O0=$t("lock",lE);const sE=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],iE=$t("pin",sE);const rE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],oE=$t("plus",rE);const cE=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],uE=$t("search",cE);const dE=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],qv=$t("sliders-horizontal",dE);const fE=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],hE=$t("sparkles",fE);const mE=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],P0=$t("trash-2",mE);const gE=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]],B0=$t("tree-pine",gE);const pE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],vE=$t("triangle-alert",pE);const yE=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],bE=$t("undo-2",yE);const xE=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],SE=$t("upload",xE);const wE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],_E=$t("x",wE),fl=["helmet","chestplate","leggings","boots","ring","bracelet","necklace","weapon"],tt=["helmet","chestplate","leggings","boots","ring1","ring2","bracelet","necklace","weapon"],ua=e=>e==="ring1"||e==="ring2"?"ring":e,Go=e=>{switch(e){case"ring1":return"Ring 1";case"ring2":return"Ring 2";default:return e.charAt(0).toUpperCase()+e.slice(1)}};function nh(e){return e==="weapon"?"Weapon":e.charAt(0).toUpperCase()+e.slice(1)}const I0={spear:"Warrior",dagger:"Assassin",wand:"Mage",bow:"Archer",relik:"Shaman"};function Vo(e){return I0[e]??null}function EE(e,n){return e in I0?"weapon":fl.includes(e)?e:n==="weapon"?"weapon":e==="ring"?"ring":null}function L0(e,n){return!n||!e.classReq?!0:e.classReq===n}function NE(e,n){return e.level<=n}const TE=["hp","hpBonus","hprRaw","hprPct","mr","ms","ls","sdPct","sdRaw","mdPct","mdRaw","poison","spd","atkTier","averageDps","strReq","dexReq","intReq","defReq","agiReq","str","dex","int","def","agi","eDef","tDef","wDef","fDef","aDef","eDamPct","tDamPct","wDamPct","fDamPct","aDamPct","damPct","rDamPct","nDamPct","slots","lvl","spPct1","spRaw1","spPct2","spRaw2","spPct3","spRaw3","spPct4","spRaw4"];function je(e){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const n=Number(e);if(Number.isFinite(n))return n}return 0}function Mn(e){return typeof e=="string"?e:""}function ME(e){return Array.isArray(e)?e.filter(n=>typeof n=="string"):[]}function DE(e,n){const l=Mn(e).trim();if(!l)return Vo(n);switch(l.toLowerCase()){case"warrior":return"Warrior";case"assassin":return"Assassin";case"mage":return"Mage";case"archer":return"Archer";case"shaman":return"Shaman";default:return Vo(n)}}function jE(e){return{hp:je(e.hp),hpBonus:je(e.hpBonus),hprRaw:je(e.hprRaw),hprPct:je(e.hprPct),mr:je(e.mr),ms:je(e.ms),ls:je(e.ls),sdPct:je(e.sdPct),sdRaw:je(e.sdRaw),mdPct:je(e.mdPct),mdRaw:je(e.mdRaw),poison:je(e.poison),spd:je(e.spd),atkTier:je(e.atkTier),baseDps:je(e.averageDps),reqStr:je(e.strReq),reqDex:je(e.dexReq),reqInt:je(e.intReq),reqDef:je(e.defReq),reqAgi:je(e.agiReq),spStr:je(e.str),spDex:je(e.dex),spInt:je(e.int),spDef:je(e.def),spAgi:je(e.agi),eDef:je(e.eDef),tDef:je(e.tDef),wDef:je(e.wDef),fDef:je(e.fDef),aDef:je(e.aDef),eDamPct:je(e.eDamPct),tDamPct:je(e.tDamPct),wDamPct:je(e.wDamPct),fDamPct:je(e.fDamPct),aDamPct:je(e.aDamPct),damPct:je(e.damPct),rDamPct:je(e.rDamPct),nDamPct:je(e.nDamPct)}}function CE(e){const n={};for(const l of TE)n[l]=je(e[l]);return n.reqTotal=n.strReq+n.dexReq+n.intReq+n.defReq+n.agiReq,n.skillPointTotal=n.str+n.dex+n.int+n.def+n.agi,n.offenseScore=n.averageDps+n.sdPct*1.4+n.mdPct*1.15+n.sdRaw*.12+n.mdRaw*.12+(n.damPct+n.rDamPct+n.nDamPct)*.8+(n.eDamPct+n.tDamPct+n.wDamPct+n.fDamPct+n.aDamPct)*.5+n.atkTier*7+n.poison*.03,n.ehpProxy=n.hp+n.hpBonus+(n.eDef+n.tDef+n.wDef+n.fDef+n.aDef)*.45+n.hprRaw*1.2+n.hprPct*2.5,n.utilityScore=n.spd*1.8+n.mr*8+n.ms*7+n.ls*6,n.sumSpPct=n.spPct1+n.spPct2+n.spPct3+n.spPct4,n.sumSpRaw=n.spRaw1+n.spRaw2+n.spRaw3+n.spRaw4,n}function RE(e){if(typeof e.remapID<"u")return null;const n=Mn(e.type).toLowerCase(),l=Mn(e.category).toLowerCase(),s=EE(n,l);if(!s)return null;const r=Mn(e.displayName)||Mn(e.name),c=Mn(e.tier)||"Normal",u=je(e.lvl),f=ME(e.majorIds),g=jE(e),p=CE(e),y={baseDps:g.baseDps,offense:p.offenseScore,ehpProxy:p.ehpProxy,utility:p.utilityScore,skillPointTotal:p.skillPointTotal,reqTotal:p.reqTotal},v=[r,Mn(e.name),Mn(e.lore),n,c,l,Mn(e.classReq),...f];return{id:je(e.id),name:Mn(e.name),displayName:r,category:s,type:n,sourceCategory:l,tier:c,level:u,classReq:DE(e.classReq,n),majorIds:f,powderSlots:je(e.slots),atkSpd:Mn(e.atkSpd),restricted:Mn(e.restrict)!=="",deprecated:Mn(e.restrict).toUpperCase()==="DEPRECATED",numeric:g,numericIndex:p,searchText:v.filter(Boolean).join(" ").toLowerCase(),majorIdsText:f.join(" ").toLowerCase(),roughScoreFields:y,legacyRaw:e}}function AE(e,n,l){if(!Number.isFinite(l))return;const s=e[n];if(!s){e[n]={min:l,max:l};return}s.min=Math.min(s.min,l),s.max=Math.max(s.max,l)}function kE(e){const n=e.items.map(RE).filter(_=>_!==null);n.sort((_,M)=>_.displayName.localeCompare(M.displayName));const l=new Map,s=new Map,r=new Map,c=new Map(fl.map(_=>[_,[]])),u=new Set,f=new Set,g=new Set,p=new Set,y={},v=new Map;for(const _ of n){l.set(_.id,_),s.set(_.displayName.toLowerCase(),_.id),r.has(_.type)||r.set(_.type,[]),r.get(_.type).push(_.id),c.get(_.category).push(_.id),u.add(_.tier),f.add(_.type),_.classReq&&g.add(_.classReq);for(const M of _.majorIds)M&&p.add(M);for(const[M,R]of Object.entries(_.numericIndex))AE(y,M,R)}const x=e.sets??{},S=new Map;for(const[_,M]of Object.entries(x)){const R=M?.bonuses;if(!Array.isArray(R))continue;const I=[];R.forEach((L,H)=>{L&&typeof L=="object"&&L.illegal&&I.push(H+1)}),I.length>0&&v.set(_,{illegalCounts:I});const O=M?.items;if(Array.isArray(O))for(const L of O)typeof L=="string"&&S.set(L.toLowerCase(),_)}const N=new Map;for(const[_,M]of S){const R=s.get(_);R!=null&&N.set(R,M)}return{version:String(e.version??"unknown"),items:n,itemsById:l,itemIdByName:s,itemsByType:r,itemsByCategory:c,facetsMeta:{categories:[...fl],types:[...f].sort(),tiers:[...u].sort(),classReqs:[...g].sort(),majorIds:[...p].sort(),numericRanges:y},setsMeta:v,itemSetName:N}}class zE{snapshotPromise=null;async getCatalog(){return this.snapshotPromise||(this.snapshotPromise=this.loadCatalog()),this.snapshotPromise}async getItemById(n){return(await this.getCatalog()).itemsById.get(n)}async loadCatalog(){const n=await this.fetchCompressPayload();return kE(n)}async fetchCompressPayload(){const n=["./compress.json","../compress.json","compress.json","/workbench/compress.json","/compress.json"];let l=null;const s=[];for(const r of n)try{const c=await fetch(r,{cache:"force-cache"});if(!c.ok)throw new Error(`Failed to fetch ${r}: ${c.status}`);const u=await c.json();if(!u?.items||!Array.isArray(u.items))throw new Error(`Invalid compress payload from ${r}`);return u}catch(c){l=c,s.push(c instanceof Error?c.message:`Failed to fetch ${r}`)}throw l instanceof Error?new Error(`Unable to load compress.json. Tried: ${n.join(", ")}. Last error: ${l.message}`):new Error(`Unable to load compress.json. Tried: ${n.join(", ")}. Failures: ${s.join(" | ")}`)}}const OE=new zE;function te(e,n,l){function s(f,g){if(f._zod||Object.defineProperty(f,"_zod",{value:{def:g,constr:u,traits:new Set},enumerable:!1}),f._zod.traits.has(e))return;f._zod.traits.add(e),n(f,g);const p=u.prototype,y=Object.keys(p);for(let v=0;v<y.length;v++){const x=y[v];x in f||(f[x]=p[x].bind(f))}}const r=l?.Parent??Object;class c extends r{}Object.defineProperty(c,"name",{value:e});function u(f){var g;const p=l?.Parent?new c:this;s(p,f),(g=p._zod).deferred??(g.deferred=[]);for(const y of p._zod.deferred)y();return p}return Object.defineProperty(u,"init",{value:s}),Object.defineProperty(u,Symbol.hasInstance,{value:f=>l?.Parent&&f instanceof l.Parent?!0:f?._zod?.traits?.has(e)}),Object.defineProperty(u,"name",{value:e}),u}class qs extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class q0 extends Error{constructor(n){super(`Encountered unidirectional transform during encode: ${n}`),this.name="ZodEncodeError"}}const U0={};function hl(e){return U0}function $0(e){const n=Object.values(e).filter(s=>typeof s=="number");return Object.entries(e).filter(([s,r])=>n.indexOf(+s)===-1).map(([s,r])=>r)}function Mf(e,n){return typeof n=="bigint"?n.toString():n}function ah(e){return{get value(){{const n=e();return Object.defineProperty(this,"value",{value:n}),n}}}}function lh(e){return e==null}function sh(e){const n=e.startsWith("^")?1:0,l=e.endsWith("$")?e.length-1:e.length;return e.slice(n,l)}function PE(e,n){const l=(e.toString().split(".")[1]||"").length,s=n.toString();let r=(s.split(".")[1]||"").length;if(r===0&&/\d?e-\d?/.test(s)){const g=s.match(/\d?e-(\d?)/);g?.[1]&&(r=Number.parseInt(g[1]))}const c=l>r?l:r,u=Number.parseInt(e.toFixed(c).replace(".","")),f=Number.parseInt(n.toFixed(c).replace(".",""));return u%f/10**c}const Uv=Symbol("evaluating");function et(e,n,l){let s;Object.defineProperty(e,n,{get(){if(s!==Uv)return s===void 0&&(s=Uv,s=l()),s},set(r){Object.defineProperty(e,n,{value:r})},configurable:!0})}function Hl(e,n,l){Object.defineProperty(e,n,{value:l,writable:!0,enumerable:!0,configurable:!0})}function pl(...e){const n={};for(const l of e){const s=Object.getOwnPropertyDescriptors(l);Object.assign(n,s)}return Object.defineProperties({},n)}function $v(e){return JSON.stringify(e)}function BE(e){return e.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const H0="captureStackTrace"in Error?Error.captureStackTrace:(...e)=>{};function Ko(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const IE=ah(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function Fs(e){if(Ko(e)===!1)return!1;const n=e.constructor;if(n===void 0||typeof n!="function")return!0;const l=n.prototype;return!(Ko(l)===!1||Object.prototype.hasOwnProperty.call(l,"isPrototypeOf")===!1)}function Z0(e){return Fs(e)?{...e}:Array.isArray(e)?[...e]:e}const LE=new Set(["string","number","symbol"]);function mc(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function vl(e,n,l){const s=new e._zod.constr(n??e._zod.def);return(!n||l?.parent)&&(s._zod.parent=e),s}function ye(e){const n=e;if(!n)return{};if(typeof n=="string")return{error:()=>n};if(n?.message!==void 0){if(n?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");n.error=n.message}return delete n.message,typeof n.error=="string"?{...n,error:()=>n.error}:n}function qE(e){return Object.keys(e).filter(n=>e[n]._zod.optin==="optional"&&e[n]._zod.optout==="optional")}const UE={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function $E(e,n){const l=e._zod.def,s=l.checks;if(s&&s.length>0)throw new Error(".pick() cannot be used on object schemas containing refinements");const c=pl(e._zod.def,{get shape(){const u={};for(const f in n){if(!(f in l.shape))throw new Error(`Unrecognized key: "${f}"`);n[f]&&(u[f]=l.shape[f])}return Hl(this,"shape",u),u},checks:[]});return vl(e,c)}function HE(e,n){const l=e._zod.def,s=l.checks;if(s&&s.length>0)throw new Error(".omit() cannot be used on object schemas containing refinements");const c=pl(e._zod.def,{get shape(){const u={...e._zod.def.shape};for(const f in n){if(!(f in l.shape))throw new Error(`Unrecognized key: "${f}"`);n[f]&&delete u[f]}return Hl(this,"shape",u),u},checks:[]});return vl(e,c)}function ZE(e,n){if(!Fs(n))throw new Error("Invalid input to extend: expected a plain object");const l=e._zod.def.checks;if(l&&l.length>0){const c=e._zod.def.shape;for(const u in n)if(Object.getOwnPropertyDescriptor(c,u)!==void 0)throw new Error("Cannot overwrite keys on object schemas containing refinements. Use `.safeExtend()` instead.")}const r=pl(e._zod.def,{get shape(){const c={...e._zod.def.shape,...n};return Hl(this,"shape",c),c}});return vl(e,r)}function FE(e,n){if(!Fs(n))throw new Error("Invalid input to safeExtend: expected a plain object");const l=pl(e._zod.def,{get shape(){const s={...e._zod.def.shape,...n};return Hl(this,"shape",s),s}});return vl(e,l)}function YE(e,n){const l=pl(e._zod.def,{get shape(){const s={...e._zod.def.shape,...n._zod.def.shape};return Hl(this,"shape",s),s},get catchall(){return n._zod.def.catchall},checks:[]});return vl(e,l)}function GE(e,n,l){const r=n._zod.def.checks;if(r&&r.length>0)throw new Error(".partial() cannot be used on object schemas containing refinements");const u=pl(n._zod.def,{get shape(){const f=n._zod.def.shape,g={...f};if(l)for(const p in l){if(!(p in f))throw new Error(`Unrecognized key: "${p}"`);l[p]&&(g[p]=e?new e({type:"optional",innerType:f[p]}):f[p])}else for(const p in f)g[p]=e?new e({type:"optional",innerType:f[p]}):f[p];return Hl(this,"shape",g),g},checks:[]});return vl(n,u)}function VE(e,n,l){const s=pl(n._zod.def,{get shape(){const r=n._zod.def.shape,c={...r};if(l)for(const u in l){if(!(u in c))throw new Error(`Unrecognized key: "${u}"`);l[u]&&(c[u]=new e({type:"nonoptional",innerType:r[u]}))}else for(const u in r)c[u]=new e({type:"nonoptional",innerType:r[u]});return Hl(this,"shape",c),c}});return vl(n,s)}function Ps(e,n=0){if(e.aborted===!0)return!0;for(let l=n;l<e.issues.length;l++)if(e.issues[l]?.continue!==!0)return!0;return!1}function Bs(e,n){return n.map(l=>{var s;return(s=l).path??(s.path=[]),l.path.unshift(e),l})}function wo(e){return typeof e=="string"?e:e?.message}function ml(e,n,l){const s={...e,path:e.path??[]};if(!e.message){const r=wo(e.inst?._zod.def?.error?.(e))??wo(n?.error?.(e))??wo(l.customError?.(e))??wo(l.localeError?.(e))??"Invalid input";s.message=r}return delete s.inst,delete s.continue,n?.reportInput||delete s.input,s}function ih(e){return Array.isArray(e)?"array":typeof e=="string"?"string":"unknown"}function Qi(...e){const[n,l,s]=e;return typeof n=="string"?{message:n,code:"custom",input:l,inst:s}:{...n}}const F0=(e,n)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:n,enumerable:!1}),e.message=JSON.stringify(n,Mf,2),Object.defineProperty(e,"toString",{value:()=>e.message,enumerable:!1})},Y0=te("$ZodError",F0),G0=te("$ZodError",F0,{Parent:Error});function KE(e,n=l=>l.message){const l={},s=[];for(const r of e.issues)r.path.length>0?(l[r.path[0]]=l[r.path[0]]||[],l[r.path[0]].push(n(r))):s.push(n(r));return{formErrors:s,fieldErrors:l}}function WE(e,n=l=>l.message){const l={_errors:[]},s=r=>{for(const c of r.issues)if(c.code==="invalid_union"&&c.errors.length)c.errors.map(u=>s({issues:u}));else if(c.code==="invalid_key")s({issues:c.issues});else if(c.code==="invalid_element")s({issues:c.issues});else if(c.path.length===0)l._errors.push(n(c));else{let u=l,f=0;for(;f<c.path.length;){const g=c.path[f];f===c.path.length-1?(u[g]=u[g]||{_errors:[]},u[g]._errors.push(n(c))):u[g]=u[g]||{_errors:[]},u=u[g],f++}}};return s(e),l}const rh=e=>(n,l,s,r)=>{const c=s?Object.assign(s,{async:!1}):{async:!1},u=n._zod.run({value:l,issues:[]},c);if(u instanceof Promise)throw new qs;if(u.issues.length){const f=new(r?.Err??e)(u.issues.map(g=>ml(g,c,hl())));throw H0(f,r?.callee),f}return u.value},oh=e=>async(n,l,s,r)=>{const c=s?Object.assign(s,{async:!0}):{async:!0};let u=n._zod.run({value:l,issues:[]},c);if(u instanceof Promise&&(u=await u),u.issues.length){const f=new(r?.Err??e)(u.issues.map(g=>ml(g,c,hl())));throw H0(f,r?.callee),f}return u.value},gc=e=>(n,l,s)=>{const r=s?{...s,async:!1}:{async:!1},c=n._zod.run({value:l,issues:[]},r);if(c instanceof Promise)throw new qs;return c.issues.length?{success:!1,error:new(e??Y0)(c.issues.map(u=>ml(u,r,hl())))}:{success:!0,data:c.value}},XE=gc(G0),pc=e=>async(n,l,s)=>{const r=s?Object.assign(s,{async:!0}):{async:!0};let c=n._zod.run({value:l,issues:[]},r);return c instanceof Promise&&(c=await c),c.issues.length?{success:!1,error:new e(c.issues.map(u=>ml(u,r,hl())))}:{success:!0,data:c.value}},QE=pc(G0),JE=e=>(n,l,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return rh(e)(n,l,r)},e2=e=>(n,l,s)=>rh(e)(n,l,s),t2=e=>async(n,l,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return oh(e)(n,l,r)},n2=e=>async(n,l,s)=>oh(e)(n,l,s),a2=e=>(n,l,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return gc(e)(n,l,r)},l2=e=>(n,l,s)=>gc(e)(n,l,s),s2=e=>async(n,l,s)=>{const r=s?Object.assign(s,{direction:"backward"}):{direction:"backward"};return pc(e)(n,l,r)},i2=e=>async(n,l,s)=>pc(e)(n,l,s),r2=/^[cC][^\s-]{8,}$/,o2=/^[0-9a-z]+$/,c2=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,u2=/^[0-9a-vA-V]{20}$/,d2=/^[A-Za-z0-9]{27}$/,f2=/^[a-zA-Z0-9_-]{21}$/,h2=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,m2=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Hv=e=>e?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${e}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,g2=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,p2="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function v2(){return new RegExp(p2,"u")}const y2=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,b2=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,x2=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,S2=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,w2=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,V0=/^[A-Za-z0-9_-]*$/,_2=/^\+[1-9]\d{6,14}$/,K0="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",E2=new RegExp(`^${K0}$`);function W0(e){const n="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof e.precision=="number"?e.precision===-1?`${n}`:e.precision===0?`${n}:[0-5]\\d`:`${n}:[0-5]\\d\\.\\d{${e.precision}}`:`${n}(?::[0-5]\\d(?:\\.\\d+)?)?`}function N2(e){return new RegExp(`^${W0(e)}$`)}function T2(e){const n=W0({precision:e.precision}),l=["Z"];e.local&&l.push(""),e.offset&&l.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const s=`${n}(?:${l.join("|")})`;return new RegExp(`^${K0}T(?:${s})$`)}const M2=e=>{const n=e?`[\\s\\S]{${e?.minimum??0},${e?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${n}$`)},D2=/^-?\d+$/,X0=/^-?\d+(?:\.\d+)?$/,j2=/^(?:true|false)$/i,C2=/^[^A-Z]*$/,R2=/^[^a-z]*$/,yn=te("$ZodCheck",(e,n)=>{var l;e._zod??(e._zod={}),e._zod.def=n,(l=e._zod).onattach??(l.onattach=[])}),Q0={number:"number",bigint:"bigint",object:"date"},J0=te("$ZodCheckLessThan",(e,n)=>{yn.init(e,n);const l=Q0[typeof n.value];e._zod.onattach.push(s=>{const r=s._zod.bag,c=(n.inclusive?r.maximum:r.exclusiveMaximum)??Number.POSITIVE_INFINITY;n.value<c&&(n.inclusive?r.maximum=n.value:r.exclusiveMaximum=n.value)}),e._zod.check=s=>{(n.inclusive?s.value<=n.value:s.value<n.value)||s.issues.push({origin:l,code:"too_big",maximum:typeof n.value=="object"?n.value.getTime():n.value,input:s.value,inclusive:n.inclusive,inst:e,continue:!n.abort})}}),eb=te("$ZodCheckGreaterThan",(e,n)=>{yn.init(e,n);const l=Q0[typeof n.value];e._zod.onattach.push(s=>{const r=s._zod.bag,c=(n.inclusive?r.minimum:r.exclusiveMinimum)??Number.NEGATIVE_INFINITY;n.value>c&&(n.inclusive?r.minimum=n.value:r.exclusiveMinimum=n.value)}),e._zod.check=s=>{(n.inclusive?s.value>=n.value:s.value>n.value)||s.issues.push({origin:l,code:"too_small",minimum:typeof n.value=="object"?n.value.getTime():n.value,input:s.value,inclusive:n.inclusive,inst:e,continue:!n.abort})}}),A2=te("$ZodCheckMultipleOf",(e,n)=>{yn.init(e,n),e._zod.onattach.push(l=>{var s;(s=l._zod.bag).multipleOf??(s.multipleOf=n.value)}),e._zod.check=l=>{if(typeof l.value!=typeof n.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof l.value=="bigint"?l.value%n.value===BigInt(0):PE(l.value,n.value)===0)||l.issues.push({origin:typeof l.value,code:"not_multiple_of",divisor:n.value,input:l.value,inst:e,continue:!n.abort})}}),k2=te("$ZodCheckNumberFormat",(e,n)=>{yn.init(e,n),n.format=n.format||"float64";const l=n.format?.includes("int"),s=l?"int":"number",[r,c]=UE[n.format];e._zod.onattach.push(u=>{const f=u._zod.bag;f.format=n.format,f.minimum=r,f.maximum=c,l&&(f.pattern=D2)}),e._zod.check=u=>{const f=u.value;if(l){if(!Number.isInteger(f)){u.issues.push({expected:s,format:n.format,code:"invalid_type",continue:!1,input:f,inst:e});return}if(!Number.isSafeInteger(f)){f>0?u.issues.push({input:f,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,inclusive:!0,continue:!n.abort}):u.issues.push({input:f,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:e,origin:s,inclusive:!0,continue:!n.abort});return}}f<r&&u.issues.push({origin:"number",input:f,code:"too_small",minimum:r,inclusive:!0,inst:e,continue:!n.abort}),f>c&&u.issues.push({origin:"number",input:f,code:"too_big",maximum:c,inclusive:!0,inst:e,continue:!n.abort})}}),z2=te("$ZodCheckMaxLength",(e,n)=>{var l;yn.init(e,n),(l=e._zod.def).when??(l.when=s=>{const r=s.value;return!lh(r)&&r.length!==void 0}),e._zod.onattach.push(s=>{const r=s._zod.bag.maximum??Number.POSITIVE_INFINITY;n.maximum<r&&(s._zod.bag.maximum=n.maximum)}),e._zod.check=s=>{const r=s.value;if(r.length<=n.maximum)return;const u=ih(r);s.issues.push({origin:u,code:"too_big",maximum:n.maximum,inclusive:!0,input:r,inst:e,continue:!n.abort})}}),O2=te("$ZodCheckMinLength",(e,n)=>{var l;yn.init(e,n),(l=e._zod.def).when??(l.when=s=>{const r=s.value;return!lh(r)&&r.length!==void 0}),e._zod.onattach.push(s=>{const r=s._zod.bag.minimum??Number.NEGATIVE_INFINITY;n.minimum>r&&(s._zod.bag.minimum=n.minimum)}),e._zod.check=s=>{const r=s.value;if(r.length>=n.minimum)return;const u=ih(r);s.issues.push({origin:u,code:"too_small",minimum:n.minimum,inclusive:!0,input:r,inst:e,continue:!n.abort})}}),P2=te("$ZodCheckLengthEquals",(e,n)=>{var l;yn.init(e,n),(l=e._zod.def).when??(l.when=s=>{const r=s.value;return!lh(r)&&r.length!==void 0}),e._zod.onattach.push(s=>{const r=s._zod.bag;r.minimum=n.length,r.maximum=n.length,r.length=n.length}),e._zod.check=s=>{const r=s.value,c=r.length;if(c===n.length)return;const u=ih(r),f=c>n.length;s.issues.push({origin:u,...f?{code:"too_big",maximum:n.length}:{code:"too_small",minimum:n.length},inclusive:!0,exact:!0,input:s.value,inst:e,continue:!n.abort})}}),vc=te("$ZodCheckStringFormat",(e,n)=>{var l,s;yn.init(e,n),e._zod.onattach.push(r=>{const c=r._zod.bag;c.format=n.format,n.pattern&&(c.patterns??(c.patterns=new Set),c.patterns.add(n.pattern))}),n.pattern?(l=e._zod).check??(l.check=r=>{n.pattern.lastIndex=0,!n.pattern.test(r.value)&&r.issues.push({origin:"string",code:"invalid_format",format:n.format,input:r.value,...n.pattern?{pattern:n.pattern.toString()}:{},inst:e,continue:!n.abort})}):(s=e._zod).check??(s.check=()=>{})}),B2=te("$ZodCheckRegex",(e,n)=>{vc.init(e,n),e._zod.check=l=>{n.pattern.lastIndex=0,!n.pattern.test(l.value)&&l.issues.push({origin:"string",code:"invalid_format",format:"regex",input:l.value,pattern:n.pattern.toString(),inst:e,continue:!n.abort})}}),I2=te("$ZodCheckLowerCase",(e,n)=>{n.pattern??(n.pattern=C2),vc.init(e,n)}),L2=te("$ZodCheckUpperCase",(e,n)=>{n.pattern??(n.pattern=R2),vc.init(e,n)}),q2=te("$ZodCheckIncludes",(e,n)=>{yn.init(e,n);const l=mc(n.includes),s=new RegExp(typeof n.position=="number"?`^.{${n.position}}${l}`:l);n.pattern=s,e._zod.onattach.push(r=>{const c=r._zod.bag;c.patterns??(c.patterns=new Set),c.patterns.add(s)}),e._zod.check=r=>{r.value.includes(n.includes,n.position)||r.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:n.includes,input:r.value,inst:e,continue:!n.abort})}}),U2=te("$ZodCheckStartsWith",(e,n)=>{yn.init(e,n);const l=new RegExp(`^${mc(n.prefix)}.*`);n.pattern??(n.pattern=l),e._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(l)}),e._zod.check=s=>{s.value.startsWith(n.prefix)||s.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:n.prefix,input:s.value,inst:e,continue:!n.abort})}}),$2=te("$ZodCheckEndsWith",(e,n)=>{yn.init(e,n);const l=new RegExp(`.*${mc(n.suffix)}$`);n.pattern??(n.pattern=l),e._zod.onattach.push(s=>{const r=s._zod.bag;r.patterns??(r.patterns=new Set),r.patterns.add(l)}),e._zod.check=s=>{s.value.endsWith(n.suffix)||s.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:n.suffix,input:s.value,inst:e,continue:!n.abort})}}),H2=te("$ZodCheckOverwrite",(e,n)=>{yn.init(e,n),e._zod.check=l=>{l.value=n.tx(l.value)}});class Z2{constructor(n=[]){this.content=[],this.indent=0,this&&(this.args=n)}indented(n){this.indent+=1,n(this),this.indent-=1}write(n){if(typeof n=="function"){n(this,{execution:"sync"}),n(this,{execution:"async"});return}const s=n.split(`
`).filter(u=>u),r=Math.min(...s.map(u=>u.length-u.trimStart().length)),c=s.map(u=>u.slice(r)).map(u=>" ".repeat(this.indent*2)+u);for(const u of c)this.content.push(u)}compile(){const n=Function,l=this?.args,r=[...(this?.content??[""]).map(c=>`  ${c}`)];return new n(...l,r.join(`
`))}}const F2={major:4,minor:3,patch:6},xt=te("$ZodType",(e,n)=>{var l;e??(e={}),e._zod.def=n,e._zod.bag=e._zod.bag||{},e._zod.version=F2;const s=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&s.unshift(e);for(const r of s)for(const c of r._zod.onattach)c(e);if(s.length===0)(l=e._zod).deferred??(l.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const r=(u,f,g)=>{let p=Ps(u),y;for(const v of f){if(v._zod.def.when){if(!v._zod.def.when(u))continue}else if(p)continue;const x=u.issues.length,S=v._zod.check(u);if(S instanceof Promise&&g?.async===!1)throw new qs;if(y||S instanceof Promise)y=(y??Promise.resolve()).then(async()=>{await S,u.issues.length!==x&&(p||(p=Ps(u,x)))});else{if(u.issues.length===x)continue;p||(p=Ps(u,x))}}return y?y.then(()=>u):u},c=(u,f,g)=>{if(Ps(u))return u.aborted=!0,u;const p=r(f,s,g);if(p instanceof Promise){if(g.async===!1)throw new qs;return p.then(y=>e._zod.parse(y,g))}return e._zod.parse(p,g)};e._zod.run=(u,f)=>{if(f.skipChecks)return e._zod.parse(u,f);if(f.direction==="backward"){const p=e._zod.parse({value:u.value,issues:[]},{...f,skipChecks:!0});return p instanceof Promise?p.then(y=>c(y,u,f)):c(p,u,f)}const g=e._zod.parse(u,f);if(g instanceof Promise){if(f.async===!1)throw new qs;return g.then(p=>r(p,s,f))}return r(g,s,f)}}et(e,"~standard",()=>({validate:r=>{try{const c=XE(e,r);return c.success?{value:c.data}:{issues:c.error?.issues}}catch{return QE(e,r).then(u=>u.success?{value:u.data}:{issues:u.error?.issues})}},vendor:"zod",version:1}))}),ch=te("$ZodString",(e,n)=>{xt.init(e,n),e._zod.pattern=[...e?._zod.bag?.patterns??[]].pop()??M2(e._zod.bag),e._zod.parse=(l,s)=>{if(n.coerce)try{l.value=String(l.value)}catch{}return typeof l.value=="string"||l.issues.push({expected:"string",code:"invalid_type",input:l.value,inst:e}),l}}),mt=te("$ZodStringFormat",(e,n)=>{vc.init(e,n),ch.init(e,n)}),Y2=te("$ZodGUID",(e,n)=>{n.pattern??(n.pattern=m2),mt.init(e,n)}),G2=te("$ZodUUID",(e,n)=>{if(n.version){const s={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[n.version];if(s===void 0)throw new Error(`Invalid UUID version: "${n.version}"`);n.pattern??(n.pattern=Hv(s))}else n.pattern??(n.pattern=Hv());mt.init(e,n)}),V2=te("$ZodEmail",(e,n)=>{n.pattern??(n.pattern=g2),mt.init(e,n)}),K2=te("$ZodURL",(e,n)=>{mt.init(e,n),e._zod.check=l=>{try{const s=l.value.trim(),r=new URL(s);n.hostname&&(n.hostname.lastIndex=0,n.hostname.test(r.hostname)||l.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:n.hostname.source,input:l.value,inst:e,continue:!n.abort})),n.protocol&&(n.protocol.lastIndex=0,n.protocol.test(r.protocol.endsWith(":")?r.protocol.slice(0,-1):r.protocol)||l.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:n.protocol.source,input:l.value,inst:e,continue:!n.abort})),n.normalize?l.value=r.href:l.value=s;return}catch{l.issues.push({code:"invalid_format",format:"url",input:l.value,inst:e,continue:!n.abort})}}}),W2=te("$ZodEmoji",(e,n)=>{n.pattern??(n.pattern=v2()),mt.init(e,n)}),X2=te("$ZodNanoID",(e,n)=>{n.pattern??(n.pattern=f2),mt.init(e,n)}),Q2=te("$ZodCUID",(e,n)=>{n.pattern??(n.pattern=r2),mt.init(e,n)}),J2=te("$ZodCUID2",(e,n)=>{n.pattern??(n.pattern=o2),mt.init(e,n)}),eN=te("$ZodULID",(e,n)=>{n.pattern??(n.pattern=c2),mt.init(e,n)}),tN=te("$ZodXID",(e,n)=>{n.pattern??(n.pattern=u2),mt.init(e,n)}),nN=te("$ZodKSUID",(e,n)=>{n.pattern??(n.pattern=d2),mt.init(e,n)}),aN=te("$ZodISODateTime",(e,n)=>{n.pattern??(n.pattern=T2(n)),mt.init(e,n)}),lN=te("$ZodISODate",(e,n)=>{n.pattern??(n.pattern=E2),mt.init(e,n)}),sN=te("$ZodISOTime",(e,n)=>{n.pattern??(n.pattern=N2(n)),mt.init(e,n)}),iN=te("$ZodISODuration",(e,n)=>{n.pattern??(n.pattern=h2),mt.init(e,n)}),rN=te("$ZodIPv4",(e,n)=>{n.pattern??(n.pattern=y2),mt.init(e,n),e._zod.bag.format="ipv4"}),oN=te("$ZodIPv6",(e,n)=>{n.pattern??(n.pattern=b2),mt.init(e,n),e._zod.bag.format="ipv6",e._zod.check=l=>{try{new URL(`http://[${l.value}]`)}catch{l.issues.push({code:"invalid_format",format:"ipv6",input:l.value,inst:e,continue:!n.abort})}}}),cN=te("$ZodCIDRv4",(e,n)=>{n.pattern??(n.pattern=x2),mt.init(e,n)}),uN=te("$ZodCIDRv6",(e,n)=>{n.pattern??(n.pattern=S2),mt.init(e,n),e._zod.check=l=>{const s=l.value.split("/");try{if(s.length!==2)throw new Error;const[r,c]=s;if(!c)throw new Error;const u=Number(c);if(`${u}`!==c)throw new Error;if(u<0||u>128)throw new Error;new URL(`http://[${r}]`)}catch{l.issues.push({code:"invalid_format",format:"cidrv6",input:l.value,inst:e,continue:!n.abort})}}});function tb(e){if(e==="")return!0;if(e.length%4!==0)return!1;try{return atob(e),!0}catch{return!1}}const dN=te("$ZodBase64",(e,n)=>{n.pattern??(n.pattern=w2),mt.init(e,n),e._zod.bag.contentEncoding="base64",e._zod.check=l=>{tb(l.value)||l.issues.push({code:"invalid_format",format:"base64",input:l.value,inst:e,continue:!n.abort})}});function fN(e){if(!V0.test(e))return!1;const n=e.replace(/[-_]/g,s=>s==="-"?"+":"/"),l=n.padEnd(Math.ceil(n.length/4)*4,"=");return tb(l)}const hN=te("$ZodBase64URL",(e,n)=>{n.pattern??(n.pattern=V0),mt.init(e,n),e._zod.bag.contentEncoding="base64url",e._zod.check=l=>{fN(l.value)||l.issues.push({code:"invalid_format",format:"base64url",input:l.value,inst:e,continue:!n.abort})}}),mN=te("$ZodE164",(e,n)=>{n.pattern??(n.pattern=_2),mt.init(e,n)});function gN(e,n=null){try{const l=e.split(".");if(l.length!==3)return!1;const[s]=l;if(!s)return!1;const r=JSON.parse(atob(s));return!("typ"in r&&r?.typ!=="JWT"||!r.alg||n&&(!("alg"in r)||r.alg!==n))}catch{return!1}}const pN=te("$ZodJWT",(e,n)=>{mt.init(e,n),e._zod.check=l=>{gN(l.value,n.alg)||l.issues.push({code:"invalid_format",format:"jwt",input:l.value,inst:e,continue:!n.abort})}}),nb=te("$ZodNumber",(e,n)=>{xt.init(e,n),e._zod.pattern=e._zod.bag.pattern??X0,e._zod.parse=(l,s)=>{if(n.coerce)try{l.value=Number(l.value)}catch{}const r=l.value;if(typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r))return l;const c=typeof r=="number"?Number.isNaN(r)?"NaN":Number.isFinite(r)?void 0:"Infinity":void 0;return l.issues.push({expected:"number",code:"invalid_type",input:r,inst:e,...c?{received:c}:{}}),l}}),vN=te("$ZodNumberFormat",(e,n)=>{k2.init(e,n),nb.init(e,n)}),yN=te("$ZodBoolean",(e,n)=>{xt.init(e,n),e._zod.pattern=j2,e._zod.parse=(l,s)=>{if(n.coerce)try{l.value=!!l.value}catch{}const r=l.value;return typeof r=="boolean"||l.issues.push({expected:"boolean",code:"invalid_type",input:r,inst:e}),l}}),bN=te("$ZodUnknown",(e,n)=>{xt.init(e,n),e._zod.parse=l=>l}),xN=te("$ZodNever",(e,n)=>{xt.init(e,n),e._zod.parse=(l,s)=>(l.issues.push({expected:"never",code:"invalid_type",input:l.value,inst:e}),l)});function Zv(e,n,l){e.issues.length&&n.issues.push(...Bs(l,e.issues)),n.value[l]=e.value}const SN=te("$ZodArray",(e,n)=>{xt.init(e,n),e._zod.parse=(l,s)=>{const r=l.value;if(!Array.isArray(r))return l.issues.push({expected:"array",code:"invalid_type",input:r,inst:e}),l;l.value=Array(r.length);const c=[];for(let u=0;u<r.length;u++){const f=r[u],g=n.element._zod.run({value:f,issues:[]},s);g instanceof Promise?c.push(g.then(p=>Zv(p,l,u))):Zv(g,l,u)}return c.length?Promise.all(c).then(()=>l):l}});function Wo(e,n,l,s,r){if(e.issues.length){if(r&&!(l in s))return;n.issues.push(...Bs(l,e.issues))}e.value===void 0?l in s&&(n.value[l]=void 0):n.value[l]=e.value}function ab(e){const n=Object.keys(e.shape);for(const s of n)if(!e.shape?.[s]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${s}": expected a Zod schema`);const l=qE(e.shape);return{...e,keys:n,keySet:new Set(n),numKeys:n.length,optionalKeys:new Set(l)}}function lb(e,n,l,s,r,c){const u=[],f=r.keySet,g=r.catchall._zod,p=g.def.type,y=g.optout==="optional";for(const v in n){if(f.has(v))continue;if(p==="never"){u.push(v);continue}const x=g.run({value:n[v],issues:[]},s);x instanceof Promise?e.push(x.then(S=>Wo(S,l,v,n,y))):Wo(x,l,v,n,y)}return u.length&&l.issues.push({code:"unrecognized_keys",keys:u,input:n,inst:c}),e.length?Promise.all(e).then(()=>l):l}const wN=te("$ZodObject",(e,n)=>{if(xt.init(e,n),!Object.getOwnPropertyDescriptor(n,"shape")?.get){const f=n.shape;Object.defineProperty(n,"shape",{get:()=>{const g={...f};return Object.defineProperty(n,"shape",{value:g}),g}})}const s=ah(()=>ab(n));et(e._zod,"propValues",()=>{const f=n.shape,g={};for(const p in f){const y=f[p]._zod;if(y.values){g[p]??(g[p]=new Set);for(const v of y.values)g[p].add(v)}}return g});const r=Ko,c=n.catchall;let u;e._zod.parse=(f,g)=>{u??(u=s.value);const p=f.value;if(!r(p))return f.issues.push({expected:"object",code:"invalid_type",input:p,inst:e}),f;f.value={};const y=[],v=u.shape;for(const x of u.keys){const S=v[x],N=S._zod.optout==="optional",_=S._zod.run({value:p[x],issues:[]},g);_ instanceof Promise?y.push(_.then(M=>Wo(M,f,x,p,N))):Wo(_,f,x,p,N)}return c?lb(y,p,f,g,s.value,e):y.length?Promise.all(y).then(()=>f):f}}),_N=te("$ZodObjectJIT",(e,n)=>{wN.init(e,n);const l=e._zod.parse,s=ah(()=>ab(n)),r=x=>{const S=new Z2(["shape","payload","ctx"]),N=s.value,_=O=>{const L=$v(O);return`shape[${L}]._zod.run({ value: input[${L}], issues: [] }, ctx)`};S.write("const input = payload.value;");const M=Object.create(null);let R=0;for(const O of N.keys)M[O]=`key_${R++}`;S.write("const newResult = {};");for(const O of N.keys){const L=M[O],H=$v(O),D=x[O]?._zod?.optout==="optional";S.write(`const ${L} = ${_(O)};`),D?S.write(`
        if (${L}.issues.length) {
          if (${H} in input) {
            payload.issues = payload.issues.concat(${L}.issues.map(iss => ({
              ...iss,
              path: iss.path ? [${H}, ...iss.path] : [${H}]
            })));
          }
        }
        
        if (${L}.value === undefined) {
          if (${H} in input) {
            newResult[${H}] = undefined;
          }
        } else {
          newResult[${H}] = ${L}.value;
        }
        
      `):S.write(`
        if (${L}.issues.length) {
          payload.issues = payload.issues.concat(${L}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${H}, ...iss.path] : [${H}]
          })));
        }
        
        if (${L}.value === undefined) {
          if (${H} in input) {
            newResult[${H}] = undefined;
          }
        } else {
          newResult[${H}] = ${L}.value;
        }
        
      `)}S.write("payload.value = newResult;"),S.write("return payload;");const I=S.compile();return(O,L)=>I(x,O,L)};let c;const u=Ko,f=!U0.jitless,p=f&&IE.value,y=n.catchall;let v;e._zod.parse=(x,S)=>{v??(v=s.value);const N=x.value;return u(N)?f&&p&&S?.async===!1&&S.jitless!==!0?(c||(c=r(n.shape)),x=c(x,S),y?lb([],N,x,S,v,e):x):l(x,S):(x.issues.push({expected:"object",code:"invalid_type",input:N,inst:e}),x)}});function Fv(e,n,l,s){for(const c of e)if(c.issues.length===0)return n.value=c.value,n;const r=e.filter(c=>!Ps(c));return r.length===1?(n.value=r[0].value,r[0]):(n.issues.push({code:"invalid_union",input:n.value,inst:l,errors:e.map(c=>c.issues.map(u=>ml(u,s,hl())))}),n)}const EN=te("$ZodUnion",(e,n)=>{xt.init(e,n),et(e._zod,"optin",()=>n.options.some(r=>r._zod.optin==="optional")?"optional":void 0),et(e._zod,"optout",()=>n.options.some(r=>r._zod.optout==="optional")?"optional":void 0),et(e._zod,"values",()=>{if(n.options.every(r=>r._zod.values))return new Set(n.options.flatMap(r=>Array.from(r._zod.values)))}),et(e._zod,"pattern",()=>{if(n.options.every(r=>r._zod.pattern)){const r=n.options.map(c=>c._zod.pattern);return new RegExp(`^(${r.map(c=>sh(c.source)).join("|")})$`)}});const l=n.options.length===1,s=n.options[0]._zod.run;e._zod.parse=(r,c)=>{if(l)return s(r,c);let u=!1;const f=[];for(const g of n.options){const p=g._zod.run({value:r.value,issues:[]},c);if(p instanceof Promise)f.push(p),u=!0;else{if(p.issues.length===0)return p;f.push(p)}}return u?Promise.all(f).then(g=>Fv(g,r,e,c)):Fv(f,r,e,c)}}),NN=te("$ZodIntersection",(e,n)=>{xt.init(e,n),e._zod.parse=(l,s)=>{const r=l.value,c=n.left._zod.run({value:r,issues:[]},s),u=n.right._zod.run({value:r,issues:[]},s);return c instanceof Promise||u instanceof Promise?Promise.all([c,u]).then(([g,p])=>Yv(l,g,p)):Yv(l,c,u)}});function Df(e,n){if(e===n)return{valid:!0,data:e};if(e instanceof Date&&n instanceof Date&&+e==+n)return{valid:!0,data:e};if(Fs(e)&&Fs(n)){const l=Object.keys(n),s=Object.keys(e).filter(c=>l.indexOf(c)!==-1),r={...e,...n};for(const c of s){const u=Df(e[c],n[c]);if(!u.valid)return{valid:!1,mergeErrorPath:[c,...u.mergeErrorPath]};r[c]=u.data}return{valid:!0,data:r}}if(Array.isArray(e)&&Array.isArray(n)){if(e.length!==n.length)return{valid:!1,mergeErrorPath:[]};const l=[];for(let s=0;s<e.length;s++){const r=e[s],c=n[s],u=Df(r,c);if(!u.valid)return{valid:!1,mergeErrorPath:[s,...u.mergeErrorPath]};l.push(u.data)}return{valid:!0,data:l}}return{valid:!1,mergeErrorPath:[]}}function Yv(e,n,l){const s=new Map;let r;for(const f of n.issues)if(f.code==="unrecognized_keys"){r??(r=f);for(const g of f.keys)s.has(g)||s.set(g,{}),s.get(g).l=!0}else e.issues.push(f);for(const f of l.issues)if(f.code==="unrecognized_keys")for(const g of f.keys)s.has(g)||s.set(g,{}),s.get(g).r=!0;else e.issues.push(f);const c=[...s].filter(([,f])=>f.l&&f.r).map(([f])=>f);if(c.length&&r&&e.issues.push({...r,keys:c}),Ps(e))return e;const u=Df(n.value,l.value);if(!u.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(u.mergeErrorPath)}`);return e.value=u.data,e}const TN=te("$ZodRecord",(e,n)=>{xt.init(e,n),e._zod.parse=(l,s)=>{const r=l.value;if(!Fs(r))return l.issues.push({expected:"record",code:"invalid_type",input:r,inst:e}),l;const c=[],u=n.keyType._zod.values;if(u){l.value={};const f=new Set;for(const p of u)if(typeof p=="string"||typeof p=="number"||typeof p=="symbol"){f.add(typeof p=="number"?p.toString():p);const y=n.valueType._zod.run({value:r[p],issues:[]},s);y instanceof Promise?c.push(y.then(v=>{v.issues.length&&l.issues.push(...Bs(p,v.issues)),l.value[p]=v.value})):(y.issues.length&&l.issues.push(...Bs(p,y.issues)),l.value[p]=y.value)}let g;for(const p in r)f.has(p)||(g=g??[],g.push(p));g&&g.length>0&&l.issues.push({code:"unrecognized_keys",input:r,inst:e,keys:g})}else{l.value={};for(const f of Reflect.ownKeys(r)){if(f==="__proto__")continue;let g=n.keyType._zod.run({value:f,issues:[]},s);if(g instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(typeof f=="string"&&X0.test(f)&&g.issues.length){const v=n.keyType._zod.run({value:Number(f),issues:[]},s);if(v instanceof Promise)throw new Error("Async schemas not supported in object keys currently");v.issues.length===0&&(g=v)}if(g.issues.length){n.mode==="loose"?l.value[f]=r[f]:l.issues.push({code:"invalid_key",origin:"record",issues:g.issues.map(v=>ml(v,s,hl())),input:f,path:[f],inst:e});continue}const y=n.valueType._zod.run({value:r[f],issues:[]},s);y instanceof Promise?c.push(y.then(v=>{v.issues.length&&l.issues.push(...Bs(f,v.issues)),l.value[g.value]=v.value})):(y.issues.length&&l.issues.push(...Bs(f,y.issues)),l.value[g.value]=y.value)}}return c.length?Promise.all(c).then(()=>l):l}}),MN=te("$ZodEnum",(e,n)=>{xt.init(e,n);const l=$0(n.entries),s=new Set(l);e._zod.values=s,e._zod.pattern=new RegExp(`^(${l.filter(r=>LE.has(typeof r)).map(r=>typeof r=="string"?mc(r):r.toString()).join("|")})$`),e._zod.parse=(r,c)=>{const u=r.value;return s.has(u)||r.issues.push({code:"invalid_value",values:l,input:u,inst:e}),r}}),DN=te("$ZodTransform",(e,n)=>{xt.init(e,n),e._zod.parse=(l,s)=>{if(s.direction==="backward")throw new q0(e.constructor.name);const r=n.transform(l.value,l);if(s.async)return(r instanceof Promise?r:Promise.resolve(r)).then(u=>(l.value=u,l));if(r instanceof Promise)throw new qs;return l.value=r,l}});function Gv(e,n){return e.issues.length&&n===void 0?{issues:[],value:void 0}:e}const sb=te("$ZodOptional",(e,n)=>{xt.init(e,n),e._zod.optin="optional",e._zod.optout="optional",et(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,void 0]):void 0),et(e._zod,"pattern",()=>{const l=n.innerType._zod.pattern;return l?new RegExp(`^(${sh(l.source)})?$`):void 0}),e._zod.parse=(l,s)=>{if(n.innerType._zod.optin==="optional"){const r=n.innerType._zod.run(l,s);return r instanceof Promise?r.then(c=>Gv(c,l.value)):Gv(r,l.value)}return l.value===void 0?l:n.innerType._zod.run(l,s)}}),jN=te("$ZodExactOptional",(e,n)=>{sb.init(e,n),et(e._zod,"values",()=>n.innerType._zod.values),et(e._zod,"pattern",()=>n.innerType._zod.pattern),e._zod.parse=(l,s)=>n.innerType._zod.run(l,s)}),CN=te("$ZodNullable",(e,n)=>{xt.init(e,n),et(e._zod,"optin",()=>n.innerType._zod.optin),et(e._zod,"optout",()=>n.innerType._zod.optout),et(e._zod,"pattern",()=>{const l=n.innerType._zod.pattern;return l?new RegExp(`^(${sh(l.source)}|null)$`):void 0}),et(e._zod,"values",()=>n.innerType._zod.values?new Set([...n.innerType._zod.values,null]):void 0),e._zod.parse=(l,s)=>l.value===null?l:n.innerType._zod.run(l,s)}),RN=te("$ZodDefault",(e,n)=>{xt.init(e,n),e._zod.optin="optional",et(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(l,s)=>{if(s.direction==="backward")return n.innerType._zod.run(l,s);if(l.value===void 0)return l.value=n.defaultValue,l;const r=n.innerType._zod.run(l,s);return r instanceof Promise?r.then(c=>Vv(c,n)):Vv(r,n)}});function Vv(e,n){return e.value===void 0&&(e.value=n.defaultValue),e}const AN=te("$ZodPrefault",(e,n)=>{xt.init(e,n),e._zod.optin="optional",et(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(l,s)=>(s.direction==="backward"||l.value===void 0&&(l.value=n.defaultValue),n.innerType._zod.run(l,s))}),kN=te("$ZodNonOptional",(e,n)=>{xt.init(e,n),et(e._zod,"values",()=>{const l=n.innerType._zod.values;return l?new Set([...l].filter(s=>s!==void 0)):void 0}),e._zod.parse=(l,s)=>{const r=n.innerType._zod.run(l,s);return r instanceof Promise?r.then(c=>Kv(c,e)):Kv(r,e)}});function Kv(e,n){return!e.issues.length&&e.value===void 0&&e.issues.push({code:"invalid_type",expected:"nonoptional",input:e.value,inst:n}),e}const zN=te("$ZodCatch",(e,n)=>{xt.init(e,n),et(e._zod,"optin",()=>n.innerType._zod.optin),et(e._zod,"optout",()=>n.innerType._zod.optout),et(e._zod,"values",()=>n.innerType._zod.values),e._zod.parse=(l,s)=>{if(s.direction==="backward")return n.innerType._zod.run(l,s);const r=n.innerType._zod.run(l,s);return r instanceof Promise?r.then(c=>(l.value=c.value,c.issues.length&&(l.value=n.catchValue({...l,error:{issues:c.issues.map(u=>ml(u,s,hl()))},input:l.value}),l.issues=[]),l)):(l.value=r.value,r.issues.length&&(l.value=n.catchValue({...l,error:{issues:r.issues.map(c=>ml(c,s,hl()))},input:l.value}),l.issues=[]),l)}}),ON=te("$ZodPipe",(e,n)=>{xt.init(e,n),et(e._zod,"values",()=>n.in._zod.values),et(e._zod,"optin",()=>n.in._zod.optin),et(e._zod,"optout",()=>n.out._zod.optout),et(e._zod,"propValues",()=>n.in._zod.propValues),e._zod.parse=(l,s)=>{if(s.direction==="backward"){const c=n.out._zod.run(l,s);return c instanceof Promise?c.then(u=>_o(u,n.in,s)):_o(c,n.in,s)}const r=n.in._zod.run(l,s);return r instanceof Promise?r.then(c=>_o(c,n.out,s)):_o(r,n.out,s)}});function _o(e,n,l){return e.issues.length?(e.aborted=!0,e):n._zod.run({value:e.value,issues:e.issues},l)}const PN=te("$ZodReadonly",(e,n)=>{xt.init(e,n),et(e._zod,"propValues",()=>n.innerType._zod.propValues),et(e._zod,"values",()=>n.innerType._zod.values),et(e._zod,"optin",()=>n.innerType?._zod?.optin),et(e._zod,"optout",()=>n.innerType?._zod?.optout),e._zod.parse=(l,s)=>{if(s.direction==="backward")return n.innerType._zod.run(l,s);const r=n.innerType._zod.run(l,s);return r instanceof Promise?r.then(Wv):Wv(r)}});function Wv(e){return e.value=Object.freeze(e.value),e}const BN=te("$ZodCustom",(e,n)=>{yn.init(e,n),xt.init(e,n),e._zod.parse=(l,s)=>l,e._zod.check=l=>{const s=l.value,r=n.fn(s);if(r instanceof Promise)return r.then(c=>Xv(c,l,s,e));Xv(r,l,s,e)}});function Xv(e,n,l,s){if(!e){const r={code:"custom",input:l,inst:s,path:[...s._zod.def.path??[]],continue:!s._zod.def.abort};s._zod.def.params&&(r.params=s._zod.def.params),n.issues.push(Qi(r))}}var Qv;class IN{constructor(){this._map=new WeakMap,this._idmap=new Map}add(n,...l){const s=l[0];return this._map.set(n,s),s&&typeof s=="object"&&"id"in s&&this._idmap.set(s.id,n),this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(n){const l=this._map.get(n);return l&&typeof l=="object"&&"id"in l&&this._idmap.delete(l.id),this._map.delete(n),this}get(n){const l=n._zod.parent;if(l){const s={...this.get(l)??{}};delete s.id;const r={...s,...this._map.get(n)};return Object.keys(r).length?r:void 0}return this._map.get(n)}has(n){return this._map.has(n)}}function LN(){return new IN}(Qv=globalThis).__zod_globalRegistry??(Qv.__zod_globalRegistry=LN());const Hi=globalThis.__zod_globalRegistry;function qN(e,n){return new e({type:"string",...ye(n)})}function UN(e,n){return new e({type:"string",format:"email",check:"string_format",abort:!1,...ye(n)})}function Jv(e,n){return new e({type:"string",format:"guid",check:"string_format",abort:!1,...ye(n)})}function $N(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,...ye(n)})}function HN(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...ye(n)})}function ZN(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...ye(n)})}function FN(e,n){return new e({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...ye(n)})}function YN(e,n){return new e({type:"string",format:"url",check:"string_format",abort:!1,...ye(n)})}function GN(e,n){return new e({type:"string",format:"emoji",check:"string_format",abort:!1,...ye(n)})}function VN(e,n){return new e({type:"string",format:"nanoid",check:"string_format",abort:!1,...ye(n)})}function KN(e,n){return new e({type:"string",format:"cuid",check:"string_format",abort:!1,...ye(n)})}function WN(e,n){return new e({type:"string",format:"cuid2",check:"string_format",abort:!1,...ye(n)})}function XN(e,n){return new e({type:"string",format:"ulid",check:"string_format",abort:!1,...ye(n)})}function QN(e,n){return new e({type:"string",format:"xid",check:"string_format",abort:!1,...ye(n)})}function JN(e,n){return new e({type:"string",format:"ksuid",check:"string_format",abort:!1,...ye(n)})}function eT(e,n){return new e({type:"string",format:"ipv4",check:"string_format",abort:!1,...ye(n)})}function tT(e,n){return new e({type:"string",format:"ipv6",check:"string_format",abort:!1,...ye(n)})}function nT(e,n){return new e({type:"string",format:"cidrv4",check:"string_format",abort:!1,...ye(n)})}function aT(e,n){return new e({type:"string",format:"cidrv6",check:"string_format",abort:!1,...ye(n)})}function lT(e,n){return new e({type:"string",format:"base64",check:"string_format",abort:!1,...ye(n)})}function sT(e,n){return new e({type:"string",format:"base64url",check:"string_format",abort:!1,...ye(n)})}function iT(e,n){return new e({type:"string",format:"e164",check:"string_format",abort:!1,...ye(n)})}function rT(e,n){return new e({type:"string",format:"jwt",check:"string_format",abort:!1,...ye(n)})}function oT(e,n){return new e({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...ye(n)})}function cT(e,n){return new e({type:"string",format:"date",check:"string_format",...ye(n)})}function uT(e,n){return new e({type:"string",format:"time",check:"string_format",precision:null,...ye(n)})}function dT(e,n){return new e({type:"string",format:"duration",check:"string_format",...ye(n)})}function fT(e,n){return new e({type:"number",checks:[],...ye(n)})}function hT(e,n){return new e({type:"number",check:"number_format",abort:!1,format:"safeint",...ye(n)})}function mT(e,n){return new e({type:"boolean",...ye(n)})}function gT(e){return new e({type:"unknown"})}function pT(e,n){return new e({type:"never",...ye(n)})}function ey(e,n){return new J0({check:"less_than",...ye(n),value:e,inclusive:!1})}function Yd(e,n){return new J0({check:"less_than",...ye(n),value:e,inclusive:!0})}function ty(e,n){return new eb({check:"greater_than",...ye(n),value:e,inclusive:!1})}function Gd(e,n){return new eb({check:"greater_than",...ye(n),value:e,inclusive:!0})}function ny(e,n){return new A2({check:"multiple_of",...ye(n),value:e})}function ib(e,n){return new z2({check:"max_length",...ye(n),maximum:e})}function Xo(e,n){return new O2({check:"min_length",...ye(n),minimum:e})}function rb(e,n){return new P2({check:"length_equals",...ye(n),length:e})}function vT(e,n){return new B2({check:"string_format",format:"regex",...ye(n),pattern:e})}function yT(e){return new I2({check:"string_format",format:"lowercase",...ye(e)})}function bT(e){return new L2({check:"string_format",format:"uppercase",...ye(e)})}function xT(e,n){return new q2({check:"string_format",format:"includes",...ye(n),includes:e})}function ST(e,n){return new U2({check:"string_format",format:"starts_with",...ye(n),prefix:e})}function wT(e,n){return new $2({check:"string_format",format:"ends_with",...ye(n),suffix:e})}function Ks(e){return new H2({check:"overwrite",tx:e})}function _T(e){return Ks(n=>n.normalize(e))}function ET(){return Ks(e=>e.trim())}function NT(){return Ks(e=>e.toLowerCase())}function TT(){return Ks(e=>e.toUpperCase())}function MT(){return Ks(e=>BE(e))}function DT(e,n,l){return new e({type:"array",element:n,...ye(l)})}function jT(e,n,l){return new e({type:"custom",check:"custom",fn:n,...ye(l)})}function CT(e){const n=RT(l=>(l.addIssue=s=>{if(typeof s=="string")l.issues.push(Qi(s,l.value,n._zod.def));else{const r=s;r.fatal&&(r.continue=!1),r.code??(r.code="custom"),r.input??(r.input=l.value),r.inst??(r.inst=n),r.continue??(r.continue=!n._zod.def.abort),l.issues.push(Qi(r))}},e(l.value,l)));return n}function RT(e,n){const l=new yn({check:"custom",...ye(n)});return l._zod.check=e,l}function ob(e){let n=e?.target??"draft-2020-12";return n==="draft-4"&&(n="draft-04"),n==="draft-7"&&(n="draft-07"),{processors:e.processors??{},metadataRegistry:e?.metadata??Hi,target:n,unrepresentable:e?.unrepresentable??"throw",override:e?.override??(()=>{}),io:e?.io??"output",counter:0,seen:new Map,cycles:e?.cycles??"ref",reused:e?.reused??"inline",external:e?.external??void 0}}function At(e,n,l={path:[],schemaPath:[]}){var s;const r=e._zod.def,c=n.seen.get(e);if(c)return c.count++,l.schemaPath.includes(e)&&(c.cycle=l.path),c.schema;const u={schema:{},count:1,cycle:void 0,path:l.path};n.seen.set(e,u);const f=e._zod.toJSONSchema?.();if(f)u.schema=f;else{const y={...l,schemaPath:[...l.schemaPath,e],path:l.path};if(e._zod.processJSONSchema)e._zod.processJSONSchema(n,u.schema,y);else{const x=u.schema,S=n.processors[r.type];if(!S)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${r.type}`);S(e,n,x,y)}const v=e._zod.parent;v&&(u.ref||(u.ref=v),At(v,n,y),n.seen.get(v).isParent=!0)}const g=n.metadataRegistry.get(e);return g&&Object.assign(u.schema,g),n.io==="input"&&ln(e)&&(delete u.schema.examples,delete u.schema.default),n.io==="input"&&u.schema._prefault&&((s=u.schema).default??(s.default=u.schema._prefault)),delete u.schema._prefault,n.seen.get(e).schema}function cb(e,n){const l=e.seen.get(n);if(!l)throw new Error("Unprocessed schema. This is a bug in Zod.");const s=new Map;for(const u of e.seen.entries()){const f=e.metadataRegistry.get(u[0])?.id;if(f){const g=s.get(f);if(g&&g!==u[0])throw new Error(`Duplicate schema id "${f}" detected during JSON Schema conversion. Two different schemas cannot share the same id when converted together.`);s.set(f,u[0])}}const r=u=>{const f=e.target==="draft-2020-12"?"$defs":"definitions";if(e.external){const v=e.external.registry.get(u[0])?.id,x=e.external.uri??(N=>N);if(v)return{ref:x(v)};const S=u[1].defId??u[1].schema.id??`schema${e.counter++}`;return u[1].defId=S,{defId:S,ref:`${x("__shared")}#/${f}/${S}`}}if(u[1]===l)return{ref:"#"};const p=`#/${f}/`,y=u[1].schema.id??`__schema${e.counter++}`;return{defId:y,ref:p+y}},c=u=>{if(u[1].schema.$ref)return;const f=u[1],{ref:g,defId:p}=r(u);f.def={...f.schema},p&&(f.defId=p);const y=f.schema;for(const v in y)delete y[v];y.$ref=g};if(e.cycles==="throw")for(const u of e.seen.entries()){const f=u[1];if(f.cycle)throw new Error(`Cycle detected: #/${f.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const u of e.seen.entries()){const f=u[1];if(n===u[0]){c(u);continue}if(e.external){const p=e.external.registry.get(u[0])?.id;if(n!==u[0]&&p){c(u);continue}}if(e.metadataRegistry.get(u[0])?.id){c(u);continue}if(f.cycle){c(u);continue}if(f.count>1&&e.reused==="ref"){c(u);continue}}}function ub(e,n){const l=e.seen.get(n);if(!l)throw new Error("Unprocessed schema. This is a bug in Zod.");const s=u=>{const f=e.seen.get(u);if(f.ref===null)return;const g=f.def??f.schema,p={...g},y=f.ref;if(f.ref=null,y){s(y);const x=e.seen.get(y),S=x.schema;if(S.$ref&&(e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0")?(g.allOf=g.allOf??[],g.allOf.push(S)):Object.assign(g,S),Object.assign(g,p),u._zod.parent===y)for(const _ in g)_==="$ref"||_==="allOf"||_ in p||delete g[_];if(S.$ref&&x.def)for(const _ in g)_==="$ref"||_==="allOf"||_ in x.def&&JSON.stringify(g[_])===JSON.stringify(x.def[_])&&delete g[_]}const v=u._zod.parent;if(v&&v!==y){s(v);const x=e.seen.get(v);if(x?.schema.$ref&&(g.$ref=x.schema.$ref,x.def))for(const S in g)S==="$ref"||S==="allOf"||S in x.def&&JSON.stringify(g[S])===JSON.stringify(x.def[S])&&delete g[S]}e.override({zodSchema:u,jsonSchema:g,path:f.path??[]})};for(const u of[...e.seen.entries()].reverse())s(u[0]);const r={};if(e.target==="draft-2020-12"?r.$schema="https://json-schema.org/draft/2020-12/schema":e.target==="draft-07"?r.$schema="http://json-schema.org/draft-07/schema#":e.target==="draft-04"?r.$schema="http://json-schema.org/draft-04/schema#":e.target,e.external?.uri){const u=e.external.registry.get(n)?.id;if(!u)throw new Error("Schema is missing an `id` property");r.$id=e.external.uri(u)}Object.assign(r,l.def??l.schema);const c=e.external?.defs??{};for(const u of e.seen.entries()){const f=u[1];f.def&&f.defId&&(c[f.defId]=f.def)}e.external||Object.keys(c).length>0&&(e.target==="draft-2020-12"?r.$defs=c:r.definitions=c);try{const u=JSON.parse(JSON.stringify(r));return Object.defineProperty(u,"~standard",{value:{...n["~standard"],jsonSchema:{input:Qo(n,"input",e.processors),output:Qo(n,"output",e.processors)}},enumerable:!1,writable:!1}),u}catch{throw new Error("Error converting schema to JSON.")}}function ln(e,n){const l=n??{seen:new Set};if(l.seen.has(e))return!1;l.seen.add(e);const s=e._zod.def;if(s.type==="transform")return!0;if(s.type==="array")return ln(s.element,l);if(s.type==="set")return ln(s.valueType,l);if(s.type==="lazy")return ln(s.getter(),l);if(s.type==="promise"||s.type==="optional"||s.type==="nonoptional"||s.type==="nullable"||s.type==="readonly"||s.type==="default"||s.type==="prefault")return ln(s.innerType,l);if(s.type==="intersection")return ln(s.left,l)||ln(s.right,l);if(s.type==="record"||s.type==="map")return ln(s.keyType,l)||ln(s.valueType,l);if(s.type==="pipe")return ln(s.in,l)||ln(s.out,l);if(s.type==="object"){for(const r in s.shape)if(ln(s.shape[r],l))return!0;return!1}if(s.type==="union"){for(const r of s.options)if(ln(r,l))return!0;return!1}if(s.type==="tuple"){for(const r of s.items)if(ln(r,l))return!0;return!!(s.rest&&ln(s.rest,l))}return!1}const AT=(e,n={})=>l=>{const s=ob({...l,processors:n});return At(e,s),cb(s,e),ub(s,e)},Qo=(e,n,l={})=>s=>{const{libraryOptions:r,target:c}=s??{},u=ob({...r??{},target:c,io:n,processors:l});return At(e,u),cb(u,e),ub(u,e)},kT={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},zT=(e,n,l,s)=>{const r=l;r.type="string";const{minimum:c,maximum:u,format:f,patterns:g,contentEncoding:p}=e._zod.bag;if(typeof c=="number"&&(r.minLength=c),typeof u=="number"&&(r.maxLength=u),f&&(r.format=kT[f]??f,r.format===""&&delete r.format,f==="time"&&delete r.format),p&&(r.contentEncoding=p),g&&g.size>0){const y=[...g];y.length===1?r.pattern=y[0].source:y.length>1&&(r.allOf=[...y.map(v=>({...n.target==="draft-07"||n.target==="draft-04"||n.target==="openapi-3.0"?{type:"string"}:{},pattern:v.source}))])}},OT=(e,n,l,s)=>{const r=l,{minimum:c,maximum:u,format:f,multipleOf:g,exclusiveMaximum:p,exclusiveMinimum:y}=e._zod.bag;typeof f=="string"&&f.includes("int")?r.type="integer":r.type="number",typeof y=="number"&&(n.target==="draft-04"||n.target==="openapi-3.0"?(r.minimum=y,r.exclusiveMinimum=!0):r.exclusiveMinimum=y),typeof c=="number"&&(r.minimum=c,typeof y=="number"&&n.target!=="draft-04"&&(y>=c?delete r.minimum:delete r.exclusiveMinimum)),typeof p=="number"&&(n.target==="draft-04"||n.target==="openapi-3.0"?(r.maximum=p,r.exclusiveMaximum=!0):r.exclusiveMaximum=p),typeof u=="number"&&(r.maximum=u,typeof p=="number"&&n.target!=="draft-04"&&(p<=u?delete r.maximum:delete r.exclusiveMaximum)),typeof g=="number"&&(r.multipleOf=g)},PT=(e,n,l,s)=>{l.type="boolean"},BT=(e,n,l,s)=>{l.not={}},IT=(e,n,l,s)=>{},LT=(e,n,l,s)=>{const r=e._zod.def,c=$0(r.entries);c.every(u=>typeof u=="number")&&(l.type="number"),c.every(u=>typeof u=="string")&&(l.type="string"),l.enum=c},qT=(e,n,l,s)=>{if(n.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},UT=(e,n,l,s)=>{if(n.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},$T=(e,n,l,s)=>{const r=l,c=e._zod.def,{minimum:u,maximum:f}=e._zod.bag;typeof u=="number"&&(r.minItems=u),typeof f=="number"&&(r.maxItems=f),r.type="array",r.items=At(c.element,n,{...s,path:[...s.path,"items"]})},HT=(e,n,l,s)=>{const r=l,c=e._zod.def;r.type="object",r.properties={};const u=c.shape;for(const p in u)r.properties[p]=At(u[p],n,{...s,path:[...s.path,"properties",p]});const f=new Set(Object.keys(u)),g=new Set([...f].filter(p=>{const y=c.shape[p]._zod;return n.io==="input"?y.optin===void 0:y.optout===void 0}));g.size>0&&(r.required=Array.from(g)),c.catchall?._zod.def.type==="never"?r.additionalProperties=!1:c.catchall?c.catchall&&(r.additionalProperties=At(c.catchall,n,{...s,path:[...s.path,"additionalProperties"]})):n.io==="output"&&(r.additionalProperties=!1)},ZT=(e,n,l,s)=>{const r=e._zod.def,c=r.inclusive===!1,u=r.options.map((f,g)=>At(f,n,{...s,path:[...s.path,c?"oneOf":"anyOf",g]}));c?l.oneOf=u:l.anyOf=u},FT=(e,n,l,s)=>{const r=e._zod.def,c=At(r.left,n,{...s,path:[...s.path,"allOf",0]}),u=At(r.right,n,{...s,path:[...s.path,"allOf",1]}),f=p=>"allOf"in p&&Object.keys(p).length===1,g=[...f(c)?c.allOf:[c],...f(u)?u.allOf:[u]];l.allOf=g},YT=(e,n,l,s)=>{const r=l,c=e._zod.def;r.type="object";const u=c.keyType,g=u._zod.bag?.patterns;if(c.mode==="loose"&&g&&g.size>0){const y=At(c.valueType,n,{...s,path:[...s.path,"patternProperties","*"]});r.patternProperties={};for(const v of g)r.patternProperties[v.source]=y}else(n.target==="draft-07"||n.target==="draft-2020-12")&&(r.propertyNames=At(c.keyType,n,{...s,path:[...s.path,"propertyNames"]})),r.additionalProperties=At(c.valueType,n,{...s,path:[...s.path,"additionalProperties"]});const p=u._zod.values;if(p){const y=[...p].filter(v=>typeof v=="string"||typeof v=="number");y.length>0&&(r.required=y)}},GT=(e,n,l,s)=>{const r=e._zod.def,c=At(r.innerType,n,s),u=n.seen.get(e);n.target==="openapi-3.0"?(u.ref=r.innerType,l.nullable=!0):l.anyOf=[c,{type:"null"}]},VT=(e,n,l,s)=>{const r=e._zod.def;At(r.innerType,n,s);const c=n.seen.get(e);c.ref=r.innerType},KT=(e,n,l,s)=>{const r=e._zod.def;At(r.innerType,n,s);const c=n.seen.get(e);c.ref=r.innerType,l.default=JSON.parse(JSON.stringify(r.defaultValue))},WT=(e,n,l,s)=>{const r=e._zod.def;At(r.innerType,n,s);const c=n.seen.get(e);c.ref=r.innerType,n.io==="input"&&(l._prefault=JSON.parse(JSON.stringify(r.defaultValue)))},XT=(e,n,l,s)=>{const r=e._zod.def;At(r.innerType,n,s);const c=n.seen.get(e);c.ref=r.innerType;let u;try{u=r.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}l.default=u},QT=(e,n,l,s)=>{const r=e._zod.def,c=n.io==="input"?r.in._zod.def.type==="transform"?r.out:r.in:r.out;At(c,n,s);const u=n.seen.get(e);u.ref=c},JT=(e,n,l,s)=>{const r=e._zod.def;At(r.innerType,n,s);const c=n.seen.get(e);c.ref=r.innerType,l.readOnly=!0},db=(e,n,l,s)=>{const r=e._zod.def;At(r.innerType,n,s);const c=n.seen.get(e);c.ref=r.innerType},eM=te("ZodISODateTime",(e,n)=>{aN.init(e,n),gt.init(e,n)});function tM(e){return oT(eM,e)}const nM=te("ZodISODate",(e,n)=>{lN.init(e,n),gt.init(e,n)});function aM(e){return cT(nM,e)}const lM=te("ZodISOTime",(e,n)=>{sN.init(e,n),gt.init(e,n)});function sM(e){return uT(lM,e)}const iM=te("ZodISODuration",(e,n)=>{iN.init(e,n),gt.init(e,n)});function rM(e){return dT(iM,e)}const oM=(e,n)=>{Y0.init(e,n),e.name="ZodError",Object.defineProperties(e,{format:{value:l=>WE(e,l)},flatten:{value:l=>KE(e,l)},addIssue:{value:l=>{e.issues.push(l),e.message=JSON.stringify(e.issues,Mf,2)}},addIssues:{value:l=>{e.issues.push(...l),e.message=JSON.stringify(e.issues,Mf,2)}},isEmpty:{get(){return e.issues.length===0}}})},Gn=te("ZodError",oM,{Parent:Error}),cM=rh(Gn),uM=oh(Gn),dM=gc(Gn),fM=pc(Gn),hM=JE(Gn),mM=e2(Gn),gM=t2(Gn),pM=n2(Gn),vM=a2(Gn),yM=l2(Gn),bM=s2(Gn),xM=i2(Gn),St=te("ZodType",(e,n)=>(xt.init(e,n),Object.assign(e["~standard"],{jsonSchema:{input:Qo(e,"input"),output:Qo(e,"output")}}),e.toJSONSchema=AT(e,{}),e.def=n,e.type=n.type,Object.defineProperty(e,"_def",{value:n}),e.check=(...l)=>e.clone(pl(n,{checks:[...n.checks??[],...l.map(s=>typeof s=="function"?{_zod:{check:s,def:{check:"custom"},onattach:[]}}:s)]}),{parent:!0}),e.with=e.check,e.clone=(l,s)=>vl(e,l,s),e.brand=()=>e,e.register=((l,s)=>(l.add(e,s),e)),e.parse=(l,s)=>cM(e,l,s,{callee:e.parse}),e.safeParse=(l,s)=>dM(e,l,s),e.parseAsync=async(l,s)=>uM(e,l,s,{callee:e.parseAsync}),e.safeParseAsync=async(l,s)=>fM(e,l,s),e.spa=e.safeParseAsync,e.encode=(l,s)=>hM(e,l,s),e.decode=(l,s)=>mM(e,l,s),e.encodeAsync=async(l,s)=>gM(e,l,s),e.decodeAsync=async(l,s)=>pM(e,l,s),e.safeEncode=(l,s)=>vM(e,l,s),e.safeDecode=(l,s)=>yM(e,l,s),e.safeEncodeAsync=async(l,s)=>bM(e,l,s),e.safeDecodeAsync=async(l,s)=>xM(e,l,s),e.refine=(l,s)=>e.check(hD(l,s)),e.superRefine=l=>e.check(mD(l)),e.overwrite=l=>e.check(Ks(l)),e.optional=()=>iy(e),e.exactOptional=()=>eD(e),e.nullable=()=>ry(e),e.nullish=()=>iy(ry(e)),e.nonoptional=l=>iD(e,l),e.array=()=>Dn(e),e.or=l=>GM([e,l]),e.and=l=>KM(e,l),e.transform=l=>oy(e,QM(l)),e.default=l=>aD(e,l),e.prefault=l=>sD(e,l),e.catch=l=>oD(e,l),e.pipe=l=>oy(e,l),e.readonly=()=>dD(e),e.describe=l=>{const s=e.clone();return Hi.add(s,{description:l}),s},Object.defineProperty(e,"description",{get(){return Hi.get(e)?.description},configurable:!0}),e.meta=(...l)=>{if(l.length===0)return Hi.get(e);const s=e.clone();return Hi.add(s,l[0]),s},e.isOptional=()=>e.safeParse(void 0).success,e.isNullable=()=>e.safeParse(null).success,e.apply=l=>l(e),e)),fb=te("_ZodString",(e,n)=>{ch.init(e,n),St.init(e,n),e._zod.processJSONSchema=(s,r,c)=>zT(e,s,r);const l=e._zod.bag;e.format=l.format??null,e.minLength=l.minimum??null,e.maxLength=l.maximum??null,e.regex=(...s)=>e.check(vT(...s)),e.includes=(...s)=>e.check(xT(...s)),e.startsWith=(...s)=>e.check(ST(...s)),e.endsWith=(...s)=>e.check(wT(...s)),e.min=(...s)=>e.check(Xo(...s)),e.max=(...s)=>e.check(ib(...s)),e.length=(...s)=>e.check(rb(...s)),e.nonempty=(...s)=>e.check(Xo(1,...s)),e.lowercase=s=>e.check(yT(s)),e.uppercase=s=>e.check(bT(s)),e.trim=()=>e.check(ET()),e.normalize=(...s)=>e.check(_T(...s)),e.toLowerCase=()=>e.check(NT()),e.toUpperCase=()=>e.check(TT()),e.slugify=()=>e.check(MT())}),SM=te("ZodString",(e,n)=>{ch.init(e,n),fb.init(e,n),e.email=l=>e.check(UN(wM,l)),e.url=l=>e.check(YN(_M,l)),e.jwt=l=>e.check(rT(IM,l)),e.emoji=l=>e.check(GN(EM,l)),e.guid=l=>e.check(Jv(ay,l)),e.uuid=l=>e.check($N(Eo,l)),e.uuidv4=l=>e.check(HN(Eo,l)),e.uuidv6=l=>e.check(ZN(Eo,l)),e.uuidv7=l=>e.check(FN(Eo,l)),e.nanoid=l=>e.check(VN(NM,l)),e.guid=l=>e.check(Jv(ay,l)),e.cuid=l=>e.check(KN(TM,l)),e.cuid2=l=>e.check(WN(MM,l)),e.ulid=l=>e.check(XN(DM,l)),e.base64=l=>e.check(lT(OM,l)),e.base64url=l=>e.check(sT(PM,l)),e.xid=l=>e.check(QN(jM,l)),e.ksuid=l=>e.check(JN(CM,l)),e.ipv4=l=>e.check(eT(RM,l)),e.ipv6=l=>e.check(tT(AM,l)),e.cidrv4=l=>e.check(nT(kM,l)),e.cidrv6=l=>e.check(aT(zM,l)),e.e164=l=>e.check(iT(BM,l)),e.datetime=l=>e.check(tM(l)),e.date=l=>e.check(aM(l)),e.time=l=>e.check(sM(l)),e.duration=l=>e.check(rM(l))});function pn(e){return qN(SM,e)}const gt=te("ZodStringFormat",(e,n)=>{mt.init(e,n),fb.init(e,n)}),wM=te("ZodEmail",(e,n)=>{V2.init(e,n),gt.init(e,n)}),ay=te("ZodGUID",(e,n)=>{Y2.init(e,n),gt.init(e,n)}),Eo=te("ZodUUID",(e,n)=>{G2.init(e,n),gt.init(e,n)}),_M=te("ZodURL",(e,n)=>{K2.init(e,n),gt.init(e,n)}),EM=te("ZodEmoji",(e,n)=>{W2.init(e,n),gt.init(e,n)}),NM=te("ZodNanoID",(e,n)=>{X2.init(e,n),gt.init(e,n)}),TM=te("ZodCUID",(e,n)=>{Q2.init(e,n),gt.init(e,n)}),MM=te("ZodCUID2",(e,n)=>{J2.init(e,n),gt.init(e,n)}),DM=te("ZodULID",(e,n)=>{eN.init(e,n),gt.init(e,n)}),jM=te("ZodXID",(e,n)=>{tN.init(e,n),gt.init(e,n)}),CM=te("ZodKSUID",(e,n)=>{nN.init(e,n),gt.init(e,n)}),RM=te("ZodIPv4",(e,n)=>{rN.init(e,n),gt.init(e,n)}),AM=te("ZodIPv6",(e,n)=>{oN.init(e,n),gt.init(e,n)}),kM=te("ZodCIDRv4",(e,n)=>{cN.init(e,n),gt.init(e,n)}),zM=te("ZodCIDRv6",(e,n)=>{uN.init(e,n),gt.init(e,n)}),OM=te("ZodBase64",(e,n)=>{dN.init(e,n),gt.init(e,n)}),PM=te("ZodBase64URL",(e,n)=>{hN.init(e,n),gt.init(e,n)}),BM=te("ZodE164",(e,n)=>{mN.init(e,n),gt.init(e,n)}),IM=te("ZodJWT",(e,n)=>{pN.init(e,n),gt.init(e,n)}),hb=te("ZodNumber",(e,n)=>{nb.init(e,n),St.init(e,n),e._zod.processJSONSchema=(s,r,c)=>OT(e,s,r),e.gt=(s,r)=>e.check(ty(s,r)),e.gte=(s,r)=>e.check(Gd(s,r)),e.min=(s,r)=>e.check(Gd(s,r)),e.lt=(s,r)=>e.check(ey(s,r)),e.lte=(s,r)=>e.check(Yd(s,r)),e.max=(s,r)=>e.check(Yd(s,r)),e.int=s=>e.check(ly(s)),e.safe=s=>e.check(ly(s)),e.positive=s=>e.check(ty(0,s)),e.nonnegative=s=>e.check(Gd(0,s)),e.negative=s=>e.check(ey(0,s)),e.nonpositive=s=>e.check(Yd(0,s)),e.multipleOf=(s,r)=>e.check(ny(s,r)),e.step=(s,r)=>e.check(ny(s,r)),e.finite=()=>e;const l=e._zod.bag;e.minValue=Math.max(l.minimum??Number.NEGATIVE_INFINITY,l.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,e.maxValue=Math.min(l.maximum??Number.POSITIVE_INFINITY,l.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,e.isInt=(l.format??"").includes("int")||Number.isSafeInteger(l.multipleOf??.5),e.isFinite=!0,e.format=l.format??null});function Jn(e){return fT(hb,e)}const LM=te("ZodNumberFormat",(e,n)=>{vN.init(e,n),hb.init(e,n)});function ly(e){return hT(LM,e)}const qM=te("ZodBoolean",(e,n)=>{yN.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>PT(e,l,s)});function Zi(e){return mT(qM,e)}const UM=te("ZodUnknown",(e,n)=>{bN.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>IT()});function sy(){return gT(UM)}const $M=te("ZodNever",(e,n)=>{xN.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>BT(e,l,s)});function HM(e){return pT($M,e)}const ZM=te("ZodArray",(e,n)=>{SN.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>$T(e,l,s,r),e.element=n.element,e.min=(l,s)=>e.check(Xo(l,s)),e.nonempty=l=>e.check(Xo(1,l)),e.max=(l,s)=>e.check(ib(l,s)),e.length=(l,s)=>e.check(rb(l,s)),e.unwrap=()=>e.element});function Dn(e,n){return DT(ZM,e,n)}const FM=te("ZodObject",(e,n)=>{_N.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>HT(e,l,s,r),et(e,"shape",()=>n.shape),e.keyof=()=>Jo(Object.keys(e._zod.def.shape)),e.catchall=l=>e.clone({...e._zod.def,catchall:l}),e.passthrough=()=>e.clone({...e._zod.def,catchall:sy()}),e.loose=()=>e.clone({...e._zod.def,catchall:sy()}),e.strict=()=>e.clone({...e._zod.def,catchall:HM()}),e.strip=()=>e.clone({...e._zod.def,catchall:void 0}),e.extend=l=>ZE(e,l),e.safeExtend=l=>FE(e,l),e.merge=l=>YE(e,l),e.pick=l=>$E(e,l),e.omit=l=>HE(e,l),e.partial=(...l)=>GE(mb,e,l[0]),e.required=(...l)=>VE(gb,e,l[0])});function Ji(e,n){const l={type:"object",shape:e??{},...ye(n)};return new FM(l)}const YM=te("ZodUnion",(e,n)=>{EN.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>ZT(e,l,s,r),e.options=n.options});function GM(e,n){return new YM({type:"union",options:e,...ye(n)})}const VM=te("ZodIntersection",(e,n)=>{NN.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>FT(e,l,s,r)});function KM(e,n){return new VM({type:"intersection",left:e,right:n})}const WM=te("ZodRecord",(e,n)=>{TN.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>YT(e,l,s,r),e.keyType=n.keyType,e.valueType=n.valueType});function Vi(e,n,l){return new WM({type:"record",keyType:e,valueType:n,...ye(l)})}const jf=te("ZodEnum",(e,n)=>{MN.init(e,n),St.init(e,n),e._zod.processJSONSchema=(s,r,c)=>LT(e,s,r),e.enum=n.entries,e.options=Object.values(n.entries);const l=new Set(Object.keys(n.entries));e.extract=(s,r)=>{const c={};for(const u of s)if(l.has(u))c[u]=n.entries[u];else throw new Error(`Key ${u} not found in enum`);return new jf({...n,checks:[],...ye(r),entries:c})},e.exclude=(s,r)=>{const c={...n.entries};for(const u of s)if(l.has(u))delete c[u];else throw new Error(`Key ${u} not found in enum`);return new jf({...n,checks:[],...ye(r),entries:c})}});function Jo(e,n){const l=Array.isArray(e)?Object.fromEntries(e.map(s=>[s,s])):e;return new jf({type:"enum",entries:l,...ye(n)})}const XM=te("ZodTransform",(e,n)=>{DN.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>UT(e,l),e._zod.parse=(l,s)=>{if(s.direction==="backward")throw new q0(e.constructor.name);l.addIssue=c=>{if(typeof c=="string")l.issues.push(Qi(c,l.value,n));else{const u=c;u.fatal&&(u.continue=!1),u.code??(u.code="custom"),u.input??(u.input=l.value),u.inst??(u.inst=e),l.issues.push(Qi(u))}};const r=n.transform(l.value,l);return r instanceof Promise?r.then(c=>(l.value=c,l)):(l.value=r,l)}});function QM(e){return new XM({type:"transform",transform:e})}const mb=te("ZodOptional",(e,n)=>{sb.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>db(e,l,s,r),e.unwrap=()=>e._zod.def.innerType});function iy(e){return new mb({type:"optional",innerType:e})}const JM=te("ZodExactOptional",(e,n)=>{jN.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>db(e,l,s,r),e.unwrap=()=>e._zod.def.innerType});function eD(e){return new JM({type:"optional",innerType:e})}const tD=te("ZodNullable",(e,n)=>{CN.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>GT(e,l,s,r),e.unwrap=()=>e._zod.def.innerType});function ry(e){return new tD({type:"nullable",innerType:e})}const nD=te("ZodDefault",(e,n)=>{RN.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>KT(e,l,s,r),e.unwrap=()=>e._zod.def.innerType,e.removeDefault=e.unwrap});function aD(e,n){return new nD({type:"default",innerType:e,get defaultValue(){return typeof n=="function"?n():Z0(n)}})}const lD=te("ZodPrefault",(e,n)=>{AN.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>WT(e,l,s,r),e.unwrap=()=>e._zod.def.innerType});function sD(e,n){return new lD({type:"prefault",innerType:e,get defaultValue(){return typeof n=="function"?n():Z0(n)}})}const gb=te("ZodNonOptional",(e,n)=>{kN.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>VT(e,l,s,r),e.unwrap=()=>e._zod.def.innerType});function iD(e,n){return new gb({type:"nonoptional",innerType:e,...ye(n)})}const rD=te("ZodCatch",(e,n)=>{zN.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>XT(e,l,s,r),e.unwrap=()=>e._zod.def.innerType,e.removeCatch=e.unwrap});function oD(e,n){return new rD({type:"catch",innerType:e,catchValue:typeof n=="function"?n:()=>n})}const cD=te("ZodPipe",(e,n)=>{ON.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>QT(e,l,s,r),e.in=n.in,e.out=n.out});function oy(e,n){return new cD({type:"pipe",in:e,out:n})}const uD=te("ZodReadonly",(e,n)=>{PN.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>JT(e,l,s,r),e.unwrap=()=>e._zod.def.innerType});function dD(e){return new uD({type:"readonly",innerType:e})}const fD=te("ZodCustom",(e,n)=>{BN.init(e,n),St.init(e,n),e._zod.processJSONSchema=(l,s,r)=>qT(e,l)});function hD(e,n={}){return jT(fD,e,n)}function mD(e){return CT(e)}const gD=["list","grid"],Yn={text:"",categories:[],types:[],tiers:[],classReqs:[],majorIds:[],numericRanges:{},exclusionRanges:{},onlyWearableAtLevel:106,onlyClassCompatible:!1,excludeRestricted:!1,sortKeys:["relevance"],sortDescending:!0,viewMode:"list",resultsBelowBuild:!0},cy=Ji({min:Jn().finite().optional(),max:Jn().finite().optional()}),pD=Ji({text:pn().catch(Yn.text),categories:Dn(pn()).catch([]),types:Dn(pn()).catch([]),tiers:Dn(pn()).catch([]),classReqs:Dn(Jo(["Warrior","Assassin","Mage","Archer","Shaman"])).catch([]),majorIds:Dn(pn()).catch([]),numericRanges:Vi(pn(),cy).catch({}),exclusionRanges:Vi(pn(),cy).catch({}),onlyWearableAtLevel:Jn().int().min(1).max(106).nullable().catch(106),onlyClassCompatible:Zi().catch(!1),excludeRestricted:Zi().catch(!1),sortKeys:Dn(pn()).catch(["relevance"]),sortDescending:Zi().catch(!0),viewMode:Jo(gD).catch("list"),resultsBelowBuild:Zi().catch(!0)});function pb(e){const n=e,l=pD.parse(e),s=Array.isArray(l.sortKeys)&&l.sortKeys.length>0?l.sortKeys:typeof n?.sort=="string"?[n.sort]:["relevance"];return{text:l.text,categories:l.categories,types:l.types,tiers:l.tiers,classReqs:l.classReqs,majorIds:l.majorIds,numericRanges:l.numericRanges,exclusionRanges:l.exclusionRanges??{},onlyWearableAtLevel:l.onlyWearableAtLevel,onlyClassCompatible:l.onlyClassCompatible,excludeRestricted:l.excludeRestricted,sortKeys:s,sortDescending:l.sortDescending,viewMode:l.viewMode,resultsBelowBuild:!!l.resultsBelowBuild}}function vD(e,n){return pb({...e,...n,numericRanges:n.numericRanges!==void 0?n.numericRanges:e.numericRanges,exclusionRanges:n.exclusionRanges!==void 0?n.exclusionRanges:e.exclusionRanges??{}})}const yD="ENTRIES",vb="KEYS",yb="VALUES",Vt="";class Vd{constructor(n,l){const s=n._tree,r=Array.from(s.keys());this.set=n,this._type=l,this._path=r.length>0?[{node:s,keys:r}]:[]}next(){const n=this.dive();return this.backtrack(),n}dive(){if(this._path.length===0)return{done:!0,value:void 0};const{node:n,keys:l}=js(this._path);if(js(l)===Vt)return{done:!1,value:this.result()};const s=n.get(js(l));return this._path.push({node:s,keys:Array.from(s.keys())}),this.dive()}backtrack(){if(this._path.length===0)return;const n=js(this._path).keys;n.pop(),!(n.length>0)&&(this._path.pop(),this.backtrack())}key(){return this.set._prefix+this._path.map(({keys:n})=>js(n)).filter(n=>n!==Vt).join("")}value(){return js(this._path).node.get(Vt)}result(){switch(this._type){case yb:return this.value();case vb:return this.key();default:return[this.key(),this.value()]}}[Symbol.iterator](){return this}}const js=e=>e[e.length-1],bD=(e,n,l)=>{const s=new Map;if(n===void 0)return s;const r=n.length+1,c=r+l,u=new Uint8Array(c*r).fill(l+1);for(let f=0;f<r;++f)u[f]=f;for(let f=1;f<c;++f)u[f*r]=f;return bb(e,n,l,s,u,1,r,""),s},bb=(e,n,l,s,r,c,u,f)=>{const g=c*u;e:for(const p of e.keys())if(p===Vt){const y=r[g-1];y<=l&&s.set(f,[e.get(p),y])}else{let y=c;for(let v=0;v<p.length;++v,++y){const x=p[v],S=u*y,N=S-u;let _=r[S];const M=Math.max(0,y-l-1),R=Math.min(u-1,y+l);for(let I=M;I<R;++I){const O=x!==n[I],L=r[N+I]+ +O,H=r[N+I+1]+1,A=r[S+I]+1,D=r[S+I+1]=Math.min(L,H,A);D<_&&(_=D)}if(_>l)continue e}bb(e.get(p),n,l,s,r,y,u,f+p)}};class ol{constructor(n=new Map,l=""){this._size=void 0,this._tree=n,this._prefix=l}atPrefix(n){if(!n.startsWith(this._prefix))throw new Error("Mismatched prefix");const[l,s]=ec(this._tree,n.slice(this._prefix.length));if(l===void 0){const[r,c]=uh(s);for(const u of r.keys())if(u!==Vt&&u.startsWith(c)){const f=new Map;return f.set(u.slice(c.length),r.get(u)),new ol(f,n)}}return new ol(l,n)}clear(){this._size=void 0,this._tree.clear()}delete(n){return this._size=void 0,xD(this._tree,n)}entries(){return new Vd(this,yD)}forEach(n){for(const[l,s]of this)n(l,s,this)}fuzzyGet(n,l){return bD(this._tree,n,l)}get(n){const l=Cf(this._tree,n);return l!==void 0?l.get(Vt):void 0}has(n){const l=Cf(this._tree,n);return l!==void 0&&l.has(Vt)}keys(){return new Vd(this,vb)}set(n,l){if(typeof n!="string")throw new Error("key must be a string");return this._size=void 0,Kd(this._tree,n).set(Vt,l),this}get size(){if(this._size)return this._size;this._size=0;const n=this.entries();for(;!n.next().done;)this._size+=1;return this._size}update(n,l){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;const s=Kd(this._tree,n);return s.set(Vt,l(s.get(Vt))),this}fetch(n,l){if(typeof n!="string")throw new Error("key must be a string");this._size=void 0;const s=Kd(this._tree,n);let r=s.get(Vt);return r===void 0&&s.set(Vt,r=l()),r}values(){return new Vd(this,yb)}[Symbol.iterator](){return this.entries()}static from(n){const l=new ol;for(const[s,r]of n)l.set(s,r);return l}static fromObject(n){return ol.from(Object.entries(n))}}const ec=(e,n,l=[])=>{if(n.length===0||e==null)return[e,l];for(const s of e.keys())if(s!==Vt&&n.startsWith(s))return l.push([e,s]),ec(e.get(s),n.slice(s.length),l);return l.push([e,n]),ec(void 0,"",l)},Cf=(e,n)=>{if(n.length===0||e==null)return e;for(const l of e.keys())if(l!==Vt&&n.startsWith(l))return Cf(e.get(l),n.slice(l.length))},Kd=(e,n)=>{const l=n.length;e:for(let s=0;e&&s<l;){for(const c of e.keys())if(c!==Vt&&n[s]===c[0]){const u=Math.min(l-s,c.length);let f=1;for(;f<u&&n[s+f]===c[f];)++f;const g=e.get(c);if(f===c.length)e=g;else{const p=new Map;p.set(c.slice(f),g),e.set(n.slice(s,s+f),p),e.delete(c),e=p}s+=f;continue e}const r=new Map;return e.set(n.slice(s),r),r}return e},xD=(e,n)=>{const[l,s]=ec(e,n);if(l!==void 0){if(l.delete(Vt),l.size===0)xb(s);else if(l.size===1){const[r,c]=l.entries().next().value;Sb(s,r,c)}}},xb=e=>{if(e.length===0)return;const[n,l]=uh(e);if(n.delete(l),n.size===0)xb(e.slice(0,-1));else if(n.size===1){const[s,r]=n.entries().next().value;s!==Vt&&Sb(e.slice(0,-1),s,r)}},Sb=(e,n,l)=>{if(e.length===0)return;const[s,r]=uh(e);s.set(r+n,l),s.delete(r)},uh=e=>e[e.length-1],dh="or",wb="and",SD="and_not";class Us{constructor(n){if(n?.fields==null)throw new Error('MiniSearch: option "fields" must be provided');const l=n.autoVacuum==null||n.autoVacuum===!0?Qd:n.autoVacuum;this._options={...Xd,...n,autoVacuum:l,searchOptions:{...uy,...n.searchOptions||{}},autoSuggestOptions:{...TD,...n.autoSuggestOptions||{}}},this._index=new ol,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=Af,this.addFields(this._options.fields)}add(n){const{extractField:l,stringifyField:s,tokenize:r,processTerm:c,fields:u,idField:f}=this._options,g=l(n,f);if(g==null)throw new Error(`MiniSearch: document does not have ID field "${f}"`);if(this._idToShortId.has(g))throw new Error(`MiniSearch: duplicate ID ${g}`);const p=this.addDocumentId(g);this.saveStoredFields(p,n);for(const y of u){const v=l(n,y);if(v==null)continue;const x=r(s(v,y),y),S=this._fieldIds[y],N=new Set(x).size;this.addFieldLength(p,S,this._documentCount-1,N);for(const _ of x){const M=c(_,y);if(Array.isArray(M))for(const R of M)this.addTerm(S,p,R);else M&&this.addTerm(S,p,M)}}}addAll(n){for(const l of n)this.add(l)}addAllAsync(n,l={}){const{chunkSize:s=10}=l,r={chunk:[],promise:Promise.resolve()},{chunk:c,promise:u}=n.reduce(({chunk:f,promise:g},p,y)=>(f.push(p),(y+1)%s===0?{chunk:[],promise:g.then(()=>new Promise(v=>setTimeout(v,0))).then(()=>this.addAll(f))}:{chunk:f,promise:g}),r);return u.then(()=>this.addAll(c))}remove(n){const{tokenize:l,processTerm:s,extractField:r,stringifyField:c,fields:u,idField:f}=this._options,g=r(n,f);if(g==null)throw new Error(`MiniSearch: document does not have ID field "${f}"`);const p=this._idToShortId.get(g);if(p==null)throw new Error(`MiniSearch: cannot remove document with ID ${g}: it is not in the index`);for(const y of u){const v=r(n,y);if(v==null)continue;const x=l(c(v,y),y),S=this._fieldIds[y],N=new Set(x).size;this.removeFieldLength(p,S,this._documentCount,N);for(const _ of x){const M=s(_,y);if(Array.isArray(M))for(const R of M)this.removeTerm(S,p,R);else M&&this.removeTerm(S,p,M)}}this._storedFields.delete(p),this._documentIds.delete(p),this._idToShortId.delete(g),this._fieldLength.delete(p),this._documentCount-=1}removeAll(n){if(n)for(const l of n)this.remove(l);else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new ol,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}}discard(n){const l=this._idToShortId.get(n);if(l==null)throw new Error(`MiniSearch: cannot discard document with ID ${n}: it is not in the index`);this._idToShortId.delete(n),this._documentIds.delete(l),this._storedFields.delete(l),(this._fieldLength.get(l)||[]).forEach((s,r)=>{this.removeFieldLength(l,r,this._documentCount,s)}),this._fieldLength.delete(l),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()}maybeAutoVacuum(){if(this._options.autoVacuum===!1)return;const{minDirtFactor:n,minDirtCount:l,batchSize:s,batchWait:r}=this._options.autoVacuum;this.conditionalVacuum({batchSize:s,batchWait:r},{minDirtCount:l,minDirtFactor:n})}discardAll(n){const l=this._options.autoVacuum;try{this._options.autoVacuum=!1;for(const s of n)this.discard(s)}finally{this._options.autoVacuum=l}this.maybeAutoVacuum()}replace(n){const{idField:l,extractField:s}=this._options,r=s(n,l);this.discard(r),this.add(n)}vacuum(n={}){return this.conditionalVacuum(n)}conditionalVacuum(n,l){return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&l,this._enqueuedVacuum!=null?this._enqueuedVacuum:(this._enqueuedVacuum=this._currentVacuum.then(()=>{const s=this._enqueuedVacuumConditions;return this._enqueuedVacuumConditions=Af,this.performVacuuming(n,s)}),this._enqueuedVacuum)):this.vacuumConditionsMet(l)===!1?Promise.resolve():(this._currentVacuum=this.performVacuuming(n),this._currentVacuum)}async performVacuuming(n,l){const s=this._dirtCount;if(this.vacuumConditionsMet(l)){const r=n.batchSize||Rf.batchSize,c=n.batchWait||Rf.batchWait;let u=1;for(const[f,g]of this._index){for(const[p,y]of g)for(const[v]of y)this._documentIds.has(v)||(y.size<=1?g.delete(p):y.delete(v));this._index.get(f).size===0&&this._index.delete(f),u%r===0&&await new Promise(p=>setTimeout(p,c)),u+=1}this._dirtCount-=s}await null,this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null}vacuumConditionsMet(n){if(n==null)return!0;let{minDirtCount:l,minDirtFactor:s}=n;return l=l||Qd.minDirtCount,s=s||Qd.minDirtFactor,this.dirtCount>=l&&this.dirtFactor>=s}get isVacuuming(){return this._currentVacuum!=null}get dirtCount(){return this._dirtCount}get dirtFactor(){return this._dirtCount/(1+this._documentCount+this._dirtCount)}has(n){return this._idToShortId.has(n)}getStoredFields(n){const l=this._idToShortId.get(n);if(l!=null)return this._storedFields.get(l)}search(n,l={}){const{searchOptions:s}=this._options,r={...s,...l},c=this.executeQuery(n,l),u=[];for(const[f,{score:g,terms:p,match:y}]of c){const v=p.length||1,x={id:this._documentIds.get(f),score:g*v,terms:Object.keys(y),queryTerms:p,match:y};Object.assign(x,this._storedFields.get(f)),(r.filter==null||r.filter(x))&&u.push(x)}return n===Us.wildcard&&r.boostDocument==null||u.sort(fy),u}autoSuggest(n,l={}){l={...this._options.autoSuggestOptions,...l};const s=new Map;for(const{score:c,terms:u}of this.search(n,l)){const f=u.join(" "),g=s.get(f);g!=null?(g.score+=c,g.count+=1):s.set(f,{score:c,terms:u,count:1})}const r=[];for(const[c,{score:u,terms:f,count:g}]of s)r.push({suggestion:c,terms:f,score:u/g});return r.sort(fy),r}get documentCount(){return this._documentCount}get termCount(){return this._index.size}static loadJSON(n,l){if(l==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(n),l)}static async loadJSONAsync(n,l){if(l==null)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJSAsync(JSON.parse(n),l)}static getDefault(n){if(Xd.hasOwnProperty(n))return Wd(Xd,n);throw new Error(`MiniSearch: unknown option "${n}"`)}static loadJS(n,l){const{index:s,documentIds:r,fieldLength:c,storedFields:u,serializationVersion:f}=n,g=this.instantiateMiniSearch(n,l);g._documentIds=No(r),g._fieldLength=No(c),g._storedFields=No(u);for(const[p,y]of g._documentIds)g._idToShortId.set(y,p);for(const[p,y]of s){const v=new Map;for(const x of Object.keys(y)){let S=y[x];f===1&&(S=S.ds),v.set(parseInt(x,10),No(S))}g._index.set(p,v)}return g}static async loadJSAsync(n,l){const{index:s,documentIds:r,fieldLength:c,storedFields:u,serializationVersion:f}=n,g=this.instantiateMiniSearch(n,l);g._documentIds=await To(r),g._fieldLength=await To(c),g._storedFields=await To(u);for(const[y,v]of g._documentIds)g._idToShortId.set(v,y);let p=0;for(const[y,v]of s){const x=new Map;for(const S of Object.keys(v)){let N=v[S];f===1&&(N=N.ds),x.set(parseInt(S,10),await To(N))}++p%1e3===0&&await _b(0),g._index.set(y,x)}return g}static instantiateMiniSearch(n,l){const{documentCount:s,nextId:r,fieldIds:c,averageFieldLength:u,dirtCount:f,serializationVersion:g}=n;if(g!==1&&g!==2)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");const p=new Us(l);return p._documentCount=s,p._nextId=r,p._idToShortId=new Map,p._fieldIds=c,p._avgFieldLength=u,p._dirtCount=f||0,p._index=new ol,p}executeQuery(n,l={}){if(n===Us.wildcard)return this.executeWildcardQuery(l);if(typeof n!="string"){const x={...l,...n,queries:void 0},S=n.queries.map(N=>this.executeQuery(N,x));return this.combineResults(S,x.combineWith)}const{tokenize:s,processTerm:r,searchOptions:c}=this._options,u={tokenize:s,processTerm:r,...c,...l},{tokenize:f,processTerm:g}=u,v=f(n).flatMap(x=>g(x)).filter(x=>!!x).map(ND(u)).map(x=>this.executeQuerySpec(x,u));return this.combineResults(v,u.combineWith)}executeQuerySpec(n,l){const s={...this._options.searchOptions,...l},r=(s.fields||this._options.fields).reduce((_,M)=>({..._,[M]:Wd(s.boost,M)||1}),{}),{boostDocument:c,weights:u,maxFuzzy:f,bm25:g}=s,{fuzzy:p,prefix:y}={...uy.weights,...u},v=this._index.get(n.term),x=this.termResults(n.term,n.term,1,n.termBoost,v,r,c,g);let S,N;if(n.prefix&&(S=this._index.atPrefix(n.term)),n.fuzzy){const _=n.fuzzy===!0?.2:n.fuzzy,M=_<1?Math.min(f,Math.round(n.term.length*_)):_;M&&(N=this._index.fuzzyGet(n.term,M))}if(S)for(const[_,M]of S){const R=_.length-n.term.length;if(!R)continue;N?.delete(_);const I=y*_.length/(_.length+.3*R);this.termResults(n.term,_,I,n.termBoost,M,r,c,g,x)}if(N)for(const _ of N.keys()){const[M,R]=N.get(_);if(!R)continue;const I=p*_.length/(_.length+R);this.termResults(n.term,_,I,n.termBoost,M,r,c,g,x)}return x}executeWildcardQuery(n){const l=new Map,s={...this._options.searchOptions,...n};for(const[r,c]of this._documentIds){const u=s.boostDocument?s.boostDocument(c,"",this._storedFields.get(r)):1;l.set(r,{score:u,terms:[],match:{}})}return l}combineResults(n,l=dh){if(n.length===0)return new Map;const s=l.toLowerCase(),r=wD[s];if(!r)throw new Error(`Invalid combination operator: ${l}`);return n.reduce(r)||new Map}toJSON(){const n=[];for(const[l,s]of this._index){const r={};for(const[c,u]of s)r[c]=Object.fromEntries(u);n.push([l,r])}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:n,serializationVersion:2}}termResults(n,l,s,r,c,u,f,g,p=new Map){if(c==null)return p;for(const y of Object.keys(u)){const v=u[y],x=this._fieldIds[y],S=c.get(x);if(S==null)continue;let N=S.size;const _=this._avgFieldLength[x];for(const M of S.keys()){if(!this._documentIds.has(M)){this.removeTerm(x,M,l),N-=1;continue}const R=f?f(this._documentIds.get(M),l,this._storedFields.get(M)):1;if(!R)continue;const I=S.get(M),O=this._fieldLength.get(M)[x],L=ED(I,N,this._documentCount,O,_,g),H=s*r*v*R*L,A=p.get(M);if(A){A.score+=H,MD(A.terms,n);const D=Wd(A.match,l);D?D.push(y):A.match[l]=[y]}else p.set(M,{score:H,terms:[n],match:{[l]:[y]}})}}return p}addTerm(n,l,s){const r=this._index.fetch(s,hy);let c=r.get(n);if(c==null)c=new Map,c.set(l,1),r.set(n,c);else{const u=c.get(l);c.set(l,(u||0)+1)}}removeTerm(n,l,s){if(!this._index.has(s)){this.warnDocumentChanged(l,n,s);return}const r=this._index.fetch(s,hy),c=r.get(n);c==null||c.get(l)==null?this.warnDocumentChanged(l,n,s):c.get(l)<=1?c.size<=1?r.delete(n):c.delete(l):c.set(l,c.get(l)-1),this._index.get(s).size===0&&this._index.delete(s)}warnDocumentChanged(n,l,s){for(const r of Object.keys(this._fieldIds))if(this._fieldIds[r]===l){this._options.logger("warn",`MiniSearch: document with ID ${this._documentIds.get(n)} has changed before removal: term "${s}" was not present in field "${r}". Removing a document after it has changed can corrupt the index!`,"version_conflict");return}}addDocumentId(n){const l=this._nextId;return this._idToShortId.set(n,l),this._documentIds.set(l,n),this._documentCount+=1,this._nextId+=1,l}addFields(n){for(let l=0;l<n.length;l++)this._fieldIds[n[l]]=l}addFieldLength(n,l,s,r){let c=this._fieldLength.get(n);c==null&&this._fieldLength.set(n,c=[]),c[l]=r;const f=(this._avgFieldLength[l]||0)*s+r;this._avgFieldLength[l]=f/(s+1)}removeFieldLength(n,l,s,r){if(s===1){this._avgFieldLength[l]=0;return}const c=this._avgFieldLength[l]*s-r;this._avgFieldLength[l]=c/(s-1)}saveStoredFields(n,l){const{storeFields:s,extractField:r}=this._options;if(s==null||s.length===0)return;let c=this._storedFields.get(n);c==null&&this._storedFields.set(n,c={});for(const u of s){const f=r(l,u);f!==void 0&&(c[u]=f)}}}Us.wildcard=Symbol("*");const Wd=(e,n)=>Object.prototype.hasOwnProperty.call(e,n)?e[n]:void 0,wD={[dh]:(e,n)=>{for(const l of n.keys()){const s=e.get(l);if(s==null)e.set(l,n.get(l));else{const{score:r,terms:c,match:u}=n.get(l);s.score=s.score+r,s.match=Object.assign(s.match,u),dy(s.terms,c)}}return e},[wb]:(e,n)=>{const l=new Map;for(const s of n.keys()){const r=e.get(s);if(r==null)continue;const{score:c,terms:u,match:f}=n.get(s);dy(r.terms,u),l.set(s,{score:r.score+c,terms:r.terms,match:Object.assign(r.match,f)})}return l},[SD]:(e,n)=>{for(const l of n.keys())e.delete(l);return e}},_D={k:1.2,b:.7,d:.5},ED=(e,n,l,s,r,c)=>{const{k:u,b:f,d:g}=c;return Math.log(1+(l-n+.5)/(n+.5))*(g+e*(u+1)/(e+u*(1-f+f*s/r)))},ND=e=>(n,l,s)=>{const r=typeof e.fuzzy=="function"?e.fuzzy(n,l,s):e.fuzzy||!1,c=typeof e.prefix=="function"?e.prefix(n,l,s):e.prefix===!0,u=typeof e.boostTerm=="function"?e.boostTerm(n,l,s):1;return{term:n,fuzzy:r,prefix:c,termBoost:u}},Xd={idField:"id",extractField:(e,n)=>e[n],stringifyField:(e,n)=>e.toString(),tokenize:e=>e.split(DD),processTerm:e=>e.toLowerCase(),fields:void 0,searchOptions:void 0,storeFields:[],logger:(e,n)=>{typeof console?.[e]=="function"&&console[e](n)},autoVacuum:!0},uy={combineWith:dh,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:_D},TD={combineWith:wb,prefix:(e,n,l)=>n===l.length-1},Rf={batchSize:1e3,batchWait:10},Af={minDirtFactor:.1,minDirtCount:20},Qd={...Rf,...Af},MD=(e,n)=>{e.includes(n)||e.push(n)},dy=(e,n)=>{for(const l of n)e.includes(l)||e.push(l)},fy=({score:e},{score:n})=>n-e,hy=()=>new Map,No=e=>{const n=new Map;for(const l of Object.keys(e))n.set(parseInt(l,10),e[l]);return n},To=async e=>{const n=new Map;let l=0;for(const s of Object.keys(e))n.set(parseInt(s,10),e[s]),++l%1e3===0&&await _b(0);return n},_b=e=>new Promise(n=>setTimeout(n,e)),DD=/[\n\r\p{Z}\p{P}]+/u;function Eb(e,n){return n==="level"?e.level:n==="powderSlots"||n==="slots"?e.powderSlots:n==="baseDps"?e.roughScoreFields.baseDps:e.numericIndex[n]??0}function jD(e,n){return n.length===0||n.includes(e.category)}function my(e,n){return n.length===0?!0:e?n.includes(e):!1}function CD(e,n){for(const[l,s]of Object.entries(n.numericRanges)){if(!s)continue;const r=Eb(e,l);if(typeof s.min=="number"&&r<s.min||typeof s.max=="number"&&r>s.max)return!1}return!0}function RD(e,n){for(const[l,s]of Object.entries(n.exclusionRanges??{})){if(!s)continue;const r=Eb(e,l);if(typeof s.max=="number"&&r>s.max||typeof s.min=="number"&&r<s.min)return!1}return!0}function AD(e,n){if(n.excludeRestricted&&(e.restricted||e.deprecated)||n.onlyWearableAtLevel!==null&&!NE(e,n.onlyWearableAtLevel))return!1;if(n.onlyClassCompatible){const l=n.classReqs[0]??null;if(!L0(e,l))return!1}return!0}function kD(e,n){return n.length===0?!0:e.majorIds.length===0?!1:n.every(l=>e.majorIds.includes(l))}function zD(e,n){return!(!jD(e,n.categories)||!my(e.type,n.types)||!my(e.tier,n.tiers)||n.classReqs.length>0&&(e.classReq===null||!n.classReqs.includes(e.classReq))||!kD(e,n.majorIds)||!CD(e,n)||!RD(e,n)||!AD(e,n))}function gy(e,n){return n==="relevance"?0:n==="level"?e.level:n==="powderSlots"||n==="slots"?e.powderSlots:n==="baseDps"?e.roughScoreFields.baseDps:e.numericIndex[n]??0}function OD(e,n,l){const s=n.trim().toLowerCase();if(!s)return 0;const r=e.displayName.toLowerCase();return r===s?l+5e3:r.startsWith(s)?l+3e3:r.includes(s)?l+1200:e.searchText.includes(s)?l+300:l}function PD(e,n,l){const s=l.sortDescending?-1:1,r=l.sortKeys?.length?l.sortKeys:["relevance"];for(const c of r)if(c==="relevance"){if(e.relevance!==n.relevance)return(e.relevance>n.relevance?-1:1)*(l.sortDescending?1:-1)}else{const u=gy(e.item,c),f=gy(n.item,c);if(u!==f)return u<f?-s:s}return e.item.displayName.localeCompare(n.item.displayName)}function BD(){return{categories:{},types:{},tiers:{},majorIds:{}}}function Jd(e,n){n&&(e[n]=(e[n]??0)+1)}class ID{miniSearch;itemsById;allItems;constructor(n){this.allItems=n,this.itemsById=new Map(n.map(l=>[l.id,l])),this.miniSearch=new Us({fields:["displayName","searchText","majorIdsText"],storeFields:["id"],idField:"id",searchOptions:{boost:{displayName:6,searchText:2,majorIdsText:2},prefix:!0,fuzzy:.2,combineWith:"OR"}}),this.miniSearch.addAll(n.map(l=>({id:l.id,displayName:l.displayName,searchText:l.searchText,majorIdsText:l.majorIdsText})))}search(n){const l=n.text.trim(),s=l?this.miniSearch.search(l,{prefix:!0,fuzzy:.2,boost:{displayName:8,searchText:2,majorIdsText:2}}):[],r=new Map;for(const p of s){const y=this.itemsById.get(p.id);y&&r.set(y.id,OD(y,l,Number(p.score??0)))}const c=l?[...this.allItems]:this.allItems,u=[],f=BD();for(const p of c){const y=r.get(p.id)??0;if(!(l&&y===0&&!p.searchText.includes(l.toLowerCase()))&&zD(p,n)){u.push({item:p,relevance:y}),f.categories[p.category]=(f.categories[p.category]??0)+1,Jd(f.types,p.type),Jd(f.tiers,p.tier);for(const v of p.majorIds)Jd(f.majorIds,v)}}u.sort((p,y)=>PD(p,y,n));const g=u.map(({item:p,relevance:y})=>({id:p.id,relevance:y}));return{total:g.length,rows:g,facetCounts:f}}}class LD{worker=null;fallbackEngine=null;requestId=0;pending=new Map;initialized=!1;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL(""+new URL("search-worker-Dray3ejl.js",import.meta.url).href,import.meta.url),{type:"module"}),this.worker.onmessage=n=>{const l=n.data,s=this.pending.get(l.requestId);s&&(this.pending.delete(l.requestId),l.type==="error"?s.reject(new Error(l.message)):l.type==="ready"?s.resolve(void 0):s.resolve(l.result))},this.worker.onerror=n=>{console.error(n),this.worker?.terminate(),this.worker=null})}async init(n){if(!this.initialized){if(this.worker){await this.send({type:"init",items:n}),this.initialized=!0;return}this.fallbackEngine=new ID(n),this.initialized=!0}}async search(n){if(!this.initialized)throw new Error("SearchWorkerClient.init() must be called before search()");if(this.worker)return this.send({type:"search",state:n});if(!this.fallbackEngine)throw new Error("Fallback search engine unavailable");return this.fallbackEngine.search(n)}dispose(){this.worker?.terminate(),this.worker=null,this.fallbackEngine=null,this.pending.clear()}send(n){if(!this.worker)return Promise.reject(new Error("Search worker unavailable"));const l=++this.requestId;return new Promise((s,r)=>{this.pending.set(l,{resolve:s,reject:r}),this.worker.postMessage({...n,requestId:l})})}}function Cs(e,n,l){let s=l.initialDeps??[],r,c=!0;function u(){var f,g,p;let y;l.key&&((f=l.debug)!=null&&f.call(l))&&(y=Date.now());const v=e();if(!(v.length!==s.length||v.some((N,_)=>s[_]!==N)))return r;s=v;let S;if(l.key&&((g=l.debug)!=null&&g.call(l))&&(S=Date.now()),r=n(...v),l.key&&((p=l.debug)!=null&&p.call(l))){const N=Math.round((Date.now()-y)*100)/100,_=Math.round((Date.now()-S)*100)/100,M=_/16,R=(I,O)=>{for(I=String(I);I.length<O;)I=" "+I;return I};console.info(`%c ${R(_,5)} /${R(N,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*M,120))}deg 100% 31%);`,l?.key)}return l?.onChange&&!(c&&l.skipInitialOnChange)&&l.onChange(r),c=!1,r}return u.updateDeps=f=>{s=f},u}function py(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const qD=(e,n)=>Math.abs(e-n)<1.01,UD=(e,n,l)=>{let s;return function(...r){e.clearTimeout(s),s=e.setTimeout(()=>n.apply(this,r),l)}},vy=e=>{const{offsetWidth:n,offsetHeight:l}=e;return{width:n,height:l}},$D=e=>e,HD=e=>{const n=Math.max(e.startIndex-e.overscan,0),l=Math.min(e.endIndex+e.overscan,e.count-1),s=[];for(let r=n;r<=l;r++)s.push(r);return s},ZD=(e,n)=>{const l=e.scrollElement;if(!l)return;const s=e.targetWindow;if(!s)return;const r=u=>{const{width:f,height:g}=u;n({width:Math.round(f),height:Math.round(g)})};if(r(vy(l)),!s.ResizeObserver)return()=>{};const c=new s.ResizeObserver(u=>{const f=()=>{const g=u[0];if(g?.borderBoxSize){const p=g.borderBoxSize[0];if(p){r({width:p.inlineSize,height:p.blockSize});return}}r(vy(l))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(f):f()});return c.observe(l,{box:"border-box"}),()=>{c.unobserve(l)}},yy={passive:!0},by=typeof window>"u"?!0:"onscrollend"in window,FD=(e,n)=>{const l=e.scrollElement;if(!l)return;const s=e.targetWindow;if(!s)return;let r=0;const c=e.options.useScrollendEvent&&by?()=>{}:UD(s,()=>{n(r,!1)},e.options.isScrollingResetDelay),u=y=>()=>{const{horizontal:v,isRtl:x}=e.options;r=v?l.scrollLeft*(x&&-1||1):l.scrollTop,c(),n(r,y)},f=u(!0),g=u(!1);l.addEventListener("scroll",f,yy);const p=e.options.useScrollendEvent&&by;return p&&l.addEventListener("scrollend",g,yy),()=>{l.removeEventListener("scroll",f),p&&l.removeEventListener("scrollend",g)}},YD=(e,n,l)=>{if(n?.borderBoxSize){const s=n.borderBoxSize[0];if(s)return Math.round(s[l.options.horizontal?"inlineSize":"blockSize"])}return e[l.options.horizontal?"offsetWidth":"offsetHeight"]},GD=(e,{adjustments:n=0,behavior:l},s)=>{var r,c;const u=e+n;(c=(r=s.scrollElement)==null?void 0:r.scrollTo)==null||c.call(r,{[s.options.horizontal?"left":"top"]:u,behavior:l})};class VD{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.currentScrollToIndex=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.laneAssignments=new Map,this.pendingMeasuredCacheIndexes=[],this.prevLanes=void 0,this.lanesChangedFlag=!1,this.lanesSettling=!1,this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let l=null;const s=()=>l||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:l=new this.targetWindow.ResizeObserver(r=>{r.forEach(c=>{const u=()=>{this._measureElement(c.target,c)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(u):u()})}));return{disconnect:()=>{var r;(r=s())==null||r.disconnect(),l=null},observe:r=>{var c;return(c=s())==null?void 0:c.observe(r,{box:"border-box"})},unobserve:r=>{var c;return(c=s())==null?void 0:c.unobserve(r)}}})(),this.range=null,this.setOptions=l=>{Object.entries(l).forEach(([s,r])=>{typeof r>"u"&&delete l[s]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:$D,rangeExtractor:HD,onChange:()=>{},measureElement:YD,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...l}},this.notify=l=>{var s,r;(r=(s=this.options).onChange)==null||r.call(s,this,l)},this.maybeNotify=Cs(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),l=>{this.notify(l)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(l=>l()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var l;const s=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==s){if(this.cleanup(),!s){this.maybeNotify();return}this.scrollElement=s,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((l=this.scrollElement)==null?void 0:l.window)??null,this.elementsCache.forEach(r=>{this.observer.observe(r)}),this.unsubs.push(this.options.observeElementRect(this,r=>{this.scrollRect=r,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(r,c)=>{this.scrollAdjustments=0,this.scrollDirection=c?this.getScrollOffset()<r?"forward":"backward":null,this.scrollOffset=r,this.isScrolling=c,this.maybeNotify()})),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0})}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(l,s)=>{const r=new Map,c=new Map;for(let u=s-1;u>=0;u--){const f=l[u];if(r.has(f.lane))continue;const g=c.get(f.lane);if(g==null||f.end>g.end?c.set(f.lane,f):f.end<g.end&&r.set(f.lane,!0),r.size===this.options.lanes)break}return c.size===this.options.lanes?Array.from(c.values()).sort((u,f)=>u.end===f.end?u.index-f.index:u.end-f.end)[0]:void 0},this.getMeasurementOptions=Cs(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled,this.options.lanes],(l,s,r,c,u,f)=>(this.prevLanes!==void 0&&this.prevLanes!==f&&(this.lanesChangedFlag=!0),this.prevLanes=f,this.pendingMeasuredCacheIndexes=[],{count:l,paddingStart:s,scrollMargin:r,getItemKey:c,enabled:u,lanes:f}),{key:!1}),this.getMeasurements=Cs(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:l,paddingStart:s,scrollMargin:r,getItemKey:c,enabled:u,lanes:f},g)=>{if(!u)return this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),[];if(this.laneAssignments.size>l)for(const x of this.laneAssignments.keys())x>=l&&this.laneAssignments.delete(x);this.lanesChangedFlag&&(this.lanesChangedFlag=!1,this.lanesSettling=!0,this.measurementsCache=[],this.itemSizeCache.clear(),this.laneAssignments.clear(),this.pendingMeasuredCacheIndexes=[]),this.measurementsCache.length===0&&!this.lanesSettling&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(x=>{this.itemSizeCache.set(x.key,x.size)}));const p=this.lanesSettling?0:this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[],this.lanesSettling&&this.measurementsCache.length===l&&(this.lanesSettling=!1);const y=this.measurementsCache.slice(0,p),v=new Array(f).fill(void 0);for(let x=0;x<p;x++){const S=y[x];S&&(v[S.lane]=x)}for(let x=p;x<l;x++){const S=c(x),N=this.laneAssignments.get(x);let _,M;if(N!==void 0&&this.options.lanes>1){_=N;const L=v[_],H=L!==void 0?y[L]:void 0;M=H?H.end+this.options.gap:s+r}else{const L=this.options.lanes===1?y[x-1]:this.getFurthestMeasurement(y,x);M=L?L.end+this.options.gap:s+r,_=L?L.lane:x%this.options.lanes,this.options.lanes>1&&this.laneAssignments.set(x,_)}const R=g.get(S),I=typeof R=="number"?R:this.options.estimateSize(x),O=M+I;y[x]={index:x,start:M,size:I,end:O,key:S,lane:_},v[_]=x}return this.measurementsCache=y,y},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Cs(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(l,s,r,c)=>this.range=l.length>0&&s>0?KD({measurements:l,outerSize:s,scrollOffset:r,lanes:c}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Cs(()=>{let l=null,s=null;const r=this.calculateRange();return r&&(l=r.startIndex,s=r.endIndex),this.maybeNotify.updateDeps([this.isScrolling,l,s]),[this.options.rangeExtractor,this.options.overscan,this.options.count,l,s]},(l,s,r,c,u)=>c===null||u===null?[]:l({startIndex:c,endIndex:u,overscan:s,count:r}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=l=>{const s=this.options.indexAttribute,r=l.getAttribute(s);return r?parseInt(r,10):(console.warn(`Missing attribute name '${s}={index}' on measured element.`),-1)},this._measureElement=(l,s)=>{const r=this.indexFromElement(l),c=this.measurementsCache[r];if(!c)return;const u=c.key,f=this.elementsCache.get(u);f!==l&&(f&&this.observer.unobserve(f),this.observer.observe(l),this.elementsCache.set(u,l)),l.isConnected&&this.resizeItem(r,this.options.measureElement(l,s,this))},this.resizeItem=(l,s)=>{const r=this.measurementsCache[l];if(!r)return;const c=this.itemSizeCache.get(r.key)??r.size,u=s-c;u!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(r,u,this):r.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=u,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(r.index),this.itemSizeCache=new Map(this.itemSizeCache.set(r.key,s)),this.notify(!1))},this.measureElement=l=>{if(!l){this.elementsCache.forEach((s,r)=>{s.isConnected||(this.observer.unobserve(s),this.elementsCache.delete(r))});return}this._measureElement(l,void 0)},this.getVirtualItems=Cs(()=>[this.getVirtualIndexes(),this.getMeasurements()],(l,s)=>{const r=[];for(let c=0,u=l.length;c<u;c++){const f=l[c],g=s[f];r.push(g)}return r},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=l=>{const s=this.getMeasurements();if(s.length!==0)return py(s[Nb(0,s.length-1,r=>py(s[r]).start,l)])},this.getMaxScrollOffset=()=>{if(!this.scrollElement)return 0;if("scrollHeight"in this.scrollElement)return this.options.horizontal?this.scrollElement.scrollWidth-this.scrollElement.clientWidth:this.scrollElement.scrollHeight-this.scrollElement.clientHeight;{const l=this.scrollElement.document.documentElement;return this.options.horizontal?l.scrollWidth-this.scrollElement.innerWidth:l.scrollHeight-this.scrollElement.innerHeight}},this.getOffsetForAlignment=(l,s,r=0)=>{if(!this.scrollElement)return 0;const c=this.getSize(),u=this.getScrollOffset();s==="auto"&&(s=l>=u+c?"end":"start"),s==="center"?l+=(r-c)/2:s==="end"&&(l-=c);const f=this.getMaxScrollOffset();return Math.max(Math.min(f,l),0)},this.getOffsetForIndex=(l,s="auto")=>{l=Math.max(0,Math.min(l,this.options.count-1));const r=this.measurementsCache[l];if(!r)return;const c=this.getSize(),u=this.getScrollOffset();if(s==="auto")if(r.end>=u+c-this.options.scrollPaddingEnd)s="end";else if(r.start<=u+this.options.scrollPaddingStart)s="start";else return[u,s];if(s==="end"&&l===this.options.count-1)return[this.getMaxScrollOffset(),s];const f=s==="end"?r.end+this.options.scrollPaddingEnd:r.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(f,s,r.size),s]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(l,{align:s="start",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(l,s),{adjustments:void 0,behavior:r})},this.scrollToIndex=(l,{align:s="auto",behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),l=Math.max(0,Math.min(l,this.options.count-1)),this.currentScrollToIndex=l;let c=0;const u=10,f=p=>{if(!this.targetWindow)return;const y=this.getOffsetForIndex(l,p);if(!y){console.warn("Failed to get offset for index:",l);return}const[v,x]=y;this._scrollToOffset(v,{adjustments:void 0,behavior:r}),this.targetWindow.requestAnimationFrame(()=>{const S=()=>{if(this.currentScrollToIndex!==l)return;const N=this.getScrollOffset(),_=this.getOffsetForIndex(l,x);if(!_){console.warn("Failed to get offset for index:",l);return}qD(_[0],N)||g(x)};this.isDynamicMode()?this.targetWindow.requestAnimationFrame(S):S()})},g=p=>{this.targetWindow&&this.currentScrollToIndex===l&&(c++,c<u?this.targetWindow.requestAnimationFrame(()=>f(p)):console.warn(`Failed to scroll to index ${l} after ${u} attempts.`))};f(s)},this.scrollBy=(l,{behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+l,{adjustments:void 0,behavior:s})},this.getTotalSize=()=>{var l;const s=this.getMeasurements();let r;if(s.length===0)r=this.options.paddingStart;else if(this.options.lanes===1)r=((l=s[s.length-1])==null?void 0:l.end)??0;else{const c=Array(this.options.lanes).fill(null);let u=s.length-1;for(;u>=0&&c.some(f=>f===null);){const f=s[u];c[f.lane]===null&&(c[f.lane]=f.end),u--}r=Math.max(...c.filter(f=>f!==null))}return Math.max(r-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(l,{adjustments:s,behavior:r})=>{this.options.scrollToFn(l,{behavior:r,adjustments:s},this)},this.measure=()=>{this.itemSizeCache=new Map,this.laneAssignments=new Map,this.notify(!1)},this.setOptions(n)}}const Nb=(e,n,l,s)=>{for(;e<=n;){const r=(e+n)/2|0,c=l(r);if(c<s)e=r+1;else if(c>s)n=r-1;else return r}return e>0?e-1:0};function KD({measurements:e,outerSize:n,scrollOffset:l,lanes:s}){const r=e.length-1,c=g=>e[g].start;if(e.length<=s)return{startIndex:0,endIndex:r};let u=Nb(0,r,c,l),f=u;if(s===1)for(;f<r&&e[f].end<l+n;)f++;else if(s>1){const g=Array(s).fill(0);for(;f<r&&g.some(y=>y<l+n);){const y=e[f];g[y.lane]=y.end,f++}const p=Array(s).fill(l+n);for(;u>=0&&p.some(y=>y>=l);){const y=e[u];p[y.lane]=y.start,u--}u=Math.max(0,u-u%s),f=Math.min(r,f+(s-1-f%s))}return{startIndex:u,endIndex:f}}const xy=typeof document<"u"?w.useLayoutEffect:w.useEffect;function WD({useFlushSync:e=!0,...n}){const l=w.useReducer(()=>({}),{})[1],s={...n,onChange:(c,u)=>{var f;e&&u?rl.flushSync(l):l(),(f=n.onChange)==null||f.call(n,c,u)}},[r]=w.useState(()=>new VD(s));return r.setOptions(s),xy(()=>r._didMount(),[]),xy(()=>r._willUpdate()),r}function XD(e){return WD({observeElementRect:ZD,observeElementOffset:FD,scrollToFn:GD,...e})}const QD={relevance:"Relevance",level:"Combat Level",baseDps:"Base DPS",slots:"Powder Slots",hp:"Health",hpBonus:"Health Bonus",hprRaw:"Raw Health Regen",hprPct:"Health Regen %",mr:"Mana Regen",ms:"Mana Steal",ls:"Life Steal",sdPct:"Spell Damage %",sdRaw:"Spell Damage Raw",mdPct:"Melee Damage %",mdRaw:"Melee Damage Raw",poison:"Poison",spd:"Walk Speed Bonus",atkTier:"Attack Speed Bonus",averageDps:"Average DPS",str:"Strength",dex:"Dexterity",int:"Intelligence",def:"Defense",agi:"Agility",strReq:"Strength Min",dexReq:"Dexterity Min",intReq:"Intelligence Min",defReq:"Defense Min",agiReq:"Agility Min",eDef:"Earth Defense",tDef:"Thunder Defense",wDef:"Water Defense",fDef:"Fire Defense",aDef:"Air Defense",eDamPct:"Earth Damage %",tDamPct:"Thunder Damage %",wDamPct:"Water Damage %",fDamPct:"Fire Damage %",aDamPct:"Air Damage %",damPct:"Damage %",rDamPct:"Elemental Damage %",nDamPct:"Neutral Damage %",lvl:"Combat Level",reqTotal:"Req Total",skillPointTotal:"Skill Point Total",offenseScore:"Offense Score",ehpProxy:"EHP Proxy",utilityScore:"Utility Score",spPct1:"1st Spell Cost %",spRaw1:"1st Spell Cost Raw",spPct2:"2nd Spell Cost %",spRaw2:"2nd Spell Cost Raw",spPct3:"3rd Spell Cost %",spRaw3:"3rd Spell Cost Raw",spPct4:"4th Spell Cost %",spRaw4:"4th Spell Cost Raw",sumSpPct:"Sum Spell Cost %",sumSpRaw:"Sum Spell Cost Raw"};function ll(e){return QD[e]??e}function cl(e,n,{checkForDefaultPrevented:l=!0}={}){return function(r){if(e?.(r),l===!1||!r.defaultPrevented)return n?.(r)}}function Sy(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function Tb(...e){return n=>{let l=!1;const s=e.map(r=>{const c=Sy(r,n);return!l&&typeof c=="function"&&(l=!0),c});if(l)return()=>{for(let r=0;r<s.length;r++){const c=s[r];typeof c=="function"?c():Sy(e[r],null)}}}}function Zl(...e){return w.useCallback(Tb(...e),e)}function JD(e,n){const l=w.createContext(n),s=c=>{const{children:u,...f}=c,g=w.useMemo(()=>f,Object.values(f));return m.jsx(l.Provider,{value:g,children:u})};s.displayName=e+"Provider";function r(c){const u=w.useContext(l);if(u)return u;if(n!==void 0)return n;throw new Error(`\`${c}\` must be used within \`${e}\``)}return[s,r]}function ej(e,n=[]){let l=[];function s(c,u){const f=w.createContext(u),g=l.length;l=[...l,u];const p=v=>{const{scope:x,children:S,...N}=v,_=x?.[e]?.[g]||f,M=w.useMemo(()=>N,Object.values(N));return m.jsx(_.Provider,{value:M,children:S})};p.displayName=c+"Provider";function y(v,x){const S=x?.[e]?.[g]||f,N=w.useContext(S);if(N)return N;if(u!==void 0)return u;throw new Error(`\`${v}\` must be used within \`${c}\``)}return[p,y]}const r=()=>{const c=l.map(u=>w.createContext(u));return function(f){const g=f?.[e]||c;return w.useMemo(()=>({[`__scope${e}`]:{...f,[e]:g}}),[f,g])}};return r.scopeName=e,[s,tj(r,...n)]}function tj(...e){const n=e[0];if(e.length===1)return n;const l=()=>{const s=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(c){const u=s.reduce((f,{useScope:g,scopeName:p})=>{const v=g(c)[`__scope${p}`];return{...f,...v}},{});return w.useMemo(()=>({[`__scope${n.scopeName}`]:u}),[u])}};return l.scopeName=n.scopeName,l}var er=globalThis?.document?w.useLayoutEffect:()=>{},nj=d0[" useId ".trim().toString()]||(()=>{}),aj=0;function ef(e){const[n,l]=w.useState(nj());return er(()=>{l(s=>s??String(aj++))},[e]),e||(n?`radix-${n}`:"")}var lj=d0[" useInsertionEffect ".trim().toString()]||er;function sj({prop:e,defaultProp:n,onChange:l=()=>{},caller:s}){const[r,c,u]=ij({defaultProp:n,onChange:l}),f=e!==void 0,g=f?e:r;{const y=w.useRef(e!==void 0);w.useEffect(()=>{const v=y.current;v!==f&&console.warn(`${s} is changing from ${v?"controlled":"uncontrolled"} to ${f?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),y.current=f},[f,s])}const p=w.useCallback(y=>{if(f){const v=rj(y)?y(e):y;v!==e&&u.current?.(v)}else c(y)},[f,e,c,u]);return[g,p]}function ij({defaultProp:e,onChange:n}){const[l,s]=w.useState(e),r=w.useRef(l),c=w.useRef(n);return lj(()=>{c.current=n},[n]),w.useEffect(()=>{r.current!==l&&(c.current?.(l),r.current=l)},[l,r]),[l,s,c]}function rj(e){return typeof e=="function"}function Mb(e){const n=oj(e),l=w.forwardRef((s,r)=>{const{children:c,...u}=s,f=w.Children.toArray(c),g=f.find(uj);if(g){const p=g.props.children,y=f.map(v=>v===g?w.Children.count(p)>1?w.Children.only(null):w.isValidElement(p)?p.props.children:null:v);return m.jsx(n,{...u,ref:r,children:w.isValidElement(p)?w.cloneElement(p,void 0,y):null})}return m.jsx(n,{...u,ref:r,children:c})});return l.displayName=`${e}.Slot`,l}function oj(e){const n=w.forwardRef((l,s)=>{const{children:r,...c}=l;if(w.isValidElement(r)){const u=fj(r),f=dj(c,r.props);return r.type!==w.Fragment&&(f.ref=s?Tb(s,u):u),w.cloneElement(r,f)}return w.Children.count(r)>1?w.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var cj=Symbol("radix.slottable");function uj(e){return w.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===cj}function dj(e,n){const l={...n};for(const s in n){const r=e[s],c=n[s];/^on[A-Z]/.test(s)?r&&c?l[s]=(...f)=>{const g=c(...f);return r(...f),g}:r&&(l[s]=r):s==="style"?l[s]={...r,...c}:s==="className"&&(l[s]=[r,c].filter(Boolean).join(" "))}return{...e,...l}}function fj(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,l=n&&"isReactWarning"in n&&n.isReactWarning;return l?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,l=n&&"isReactWarning"in n&&n.isReactWarning,l?e.props.ref:e.props.ref||e.ref)}var hj=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],za=hj.reduce((e,n)=>{const l=Mb(`Primitive.${n}`),s=w.forwardRef((r,c)=>{const{asChild:u,...f}=r,g=u?l:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),m.jsx(g,{...f,ref:c})});return s.displayName=`Primitive.${n}`,{...e,[n]:s}},{});function mj(e,n){e&&rl.flushSync(()=>e.dispatchEvent(n))}function tr(e){const n=w.useRef(e);return w.useEffect(()=>{n.current=e}),w.useMemo(()=>(...l)=>n.current?.(...l),[])}function gj(e,n=globalThis?.document){const l=tr(e);w.useEffect(()=>{const s=r=>{r.key==="Escape"&&l(r)};return n.addEventListener("keydown",s,{capture:!0}),()=>n.removeEventListener("keydown",s,{capture:!0})},[l,n])}var pj="DismissableLayer",kf="dismissableLayer.update",vj="dismissableLayer.pointerDownOutside",yj="dismissableLayer.focusOutside",wy,Db=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),jb=w.forwardRef((e,n)=>{const{disableOutsidePointerEvents:l=!1,onEscapeKeyDown:s,onPointerDownOutside:r,onFocusOutside:c,onInteractOutside:u,onDismiss:f,...g}=e,p=w.useContext(Db),[y,v]=w.useState(null),x=y?.ownerDocument??globalThis?.document,[,S]=w.useState({}),N=Zl(n,D=>v(D)),_=Array.from(p.layers),[M]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),R=_.indexOf(M),I=y?_.indexOf(y):-1,O=p.layersWithOutsidePointerEventsDisabled.size>0,L=I>=R,H=Sj(D=>{const F=D.target,ie=[...p.branches].some(re=>re.contains(F));!L||ie||(r?.(D),u?.(D),D.defaultPrevented||f?.())},x),A=wj(D=>{const F=D.target;[...p.branches].some(re=>re.contains(F))||(c?.(D),u?.(D),D.defaultPrevented||f?.())},x);return gj(D=>{I===p.layers.size-1&&(s?.(D),!D.defaultPrevented&&f&&(D.preventDefault(),f()))},x),w.useEffect(()=>{if(y)return l&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(wy=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(y)),p.layers.add(y),_y(),()=>{l&&p.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=wy)}},[y,x,l,p]),w.useEffect(()=>()=>{y&&(p.layers.delete(y),p.layersWithOutsidePointerEventsDisabled.delete(y),_y())},[y,p]),w.useEffect(()=>{const D=()=>S({});return document.addEventListener(kf,D),()=>document.removeEventListener(kf,D)},[]),m.jsx(za.div,{...g,ref:N,style:{pointerEvents:O?L?"auto":"none":void 0,...e.style},onFocusCapture:cl(e.onFocusCapture,A.onFocusCapture),onBlurCapture:cl(e.onBlurCapture,A.onBlurCapture),onPointerDownCapture:cl(e.onPointerDownCapture,H.onPointerDownCapture)})});jb.displayName=pj;var bj="DismissableLayerBranch",xj=w.forwardRef((e,n)=>{const l=w.useContext(Db),s=w.useRef(null),r=Zl(n,s);return w.useEffect(()=>{const c=s.current;if(c)return l.branches.add(c),()=>{l.branches.delete(c)}},[l.branches]),m.jsx(za.div,{...e,ref:r})});xj.displayName=bj;function Sj(e,n=globalThis?.document){const l=tr(e),s=w.useRef(!1),r=w.useRef(()=>{});return w.useEffect(()=>{const c=f=>{if(f.target&&!s.current){let g=function(){Cb(vj,l,p,{discrete:!0})};const p={originalEvent:f};f.pointerType==="touch"?(n.removeEventListener("click",r.current),r.current=g,n.addEventListener("click",r.current,{once:!0})):g()}else n.removeEventListener("click",r.current);s.current=!1},u=window.setTimeout(()=>{n.addEventListener("pointerdown",c)},0);return()=>{window.clearTimeout(u),n.removeEventListener("pointerdown",c),n.removeEventListener("click",r.current)}},[n,l]),{onPointerDownCapture:()=>s.current=!0}}function wj(e,n=globalThis?.document){const l=tr(e),s=w.useRef(!1);return w.useEffect(()=>{const r=c=>{c.target&&!s.current&&Cb(yj,l,{originalEvent:c},{discrete:!1})};return n.addEventListener("focusin",r),()=>n.removeEventListener("focusin",r)},[n,l]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function _y(){const e=new CustomEvent(kf);document.dispatchEvent(e)}function Cb(e,n,l,{discrete:s}){const r=l.originalEvent.target,c=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:l});n&&r.addEventListener(e,n,{once:!0}),s?mj(r,c):r.dispatchEvent(c)}var tf="focusScope.autoFocusOnMount",nf="focusScope.autoFocusOnUnmount",Ey={bubbles:!1,cancelable:!0},_j="FocusScope",Rb=w.forwardRef((e,n)=>{const{loop:l=!1,trapped:s=!1,onMountAutoFocus:r,onUnmountAutoFocus:c,...u}=e,[f,g]=w.useState(null),p=tr(r),y=tr(c),v=w.useRef(null),x=Zl(n,_=>g(_)),S=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(s){let _=function(O){if(S.paused||!f)return;const L=O.target;f.contains(L)?v.current=L:sl(v.current,{select:!0})},M=function(O){if(S.paused||!f)return;const L=O.relatedTarget;L!==null&&(f.contains(L)||sl(v.current,{select:!0}))},R=function(O){if(document.activeElement===document.body)for(const H of O)H.removedNodes.length>0&&sl(f)};document.addEventListener("focusin",_),document.addEventListener("focusout",M);const I=new MutationObserver(R);return f&&I.observe(f,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",_),document.removeEventListener("focusout",M),I.disconnect()}}},[s,f,S.paused]),w.useEffect(()=>{if(f){Ty.add(S);const _=document.activeElement;if(!f.contains(_)){const R=new CustomEvent(tf,Ey);f.addEventListener(tf,p),f.dispatchEvent(R),R.defaultPrevented||(Ej(jj(Ab(f)),{select:!0}),document.activeElement===_&&sl(f))}return()=>{f.removeEventListener(tf,p),setTimeout(()=>{const R=new CustomEvent(nf,Ey);f.addEventListener(nf,y),f.dispatchEvent(R),R.defaultPrevented||sl(_??document.body,{select:!0}),f.removeEventListener(nf,y),Ty.remove(S)},0)}}},[f,p,y,S]);const N=w.useCallback(_=>{if(!l&&!s||S.paused)return;const M=_.key==="Tab"&&!_.altKey&&!_.ctrlKey&&!_.metaKey,R=document.activeElement;if(M&&R){const I=_.currentTarget,[O,L]=Nj(I);O&&L?!_.shiftKey&&R===L?(_.preventDefault(),l&&sl(O,{select:!0})):_.shiftKey&&R===O&&(_.preventDefault(),l&&sl(L,{select:!0})):R===I&&_.preventDefault()}},[l,s,S.paused]);return m.jsx(za.div,{tabIndex:-1,...u,ref:x,onKeyDown:N})});Rb.displayName=_j;function Ej(e,{select:n=!1}={}){const l=document.activeElement;for(const s of e)if(sl(s,{select:n}),document.activeElement!==l)return}function Nj(e){const n=Ab(e),l=Ny(n,e),s=Ny(n.reverse(),e);return[l,s]}function Ab(e){const n=[],l=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const r=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||r?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;l.nextNode();)n.push(l.currentNode);return n}function Ny(e,n){for(const l of e)if(!Tj(l,{upTo:n}))return l}function Tj(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Mj(e){return e instanceof HTMLInputElement&&"select"in e}function sl(e,{select:n=!1}={}){if(e&&e.focus){const l=document.activeElement;e.focus({preventScroll:!0}),e!==l&&Mj(e)&&n&&e.select()}}var Ty=Dj();function Dj(){let e=[];return{add(n){const l=e[0];n!==l&&l?.pause(),e=My(e,n),e.unshift(n)},remove(n){e=My(e,n),e[0]?.resume()}}}function My(e,n){const l=[...e],s=l.indexOf(n);return s!==-1&&l.splice(s,1),l}function jj(e){return e.filter(n=>n.tagName!=="A")}var Cj="Portal",kb=w.forwardRef((e,n)=>{const{container:l,...s}=e,[r,c]=w.useState(!1);er(()=>c(!0),[]);const u=l||r&&globalThis?.document?.body;return u?mw.createPortal(m.jsx(za.div,{...s,ref:n}),u):null});kb.displayName=Cj;function Rj(e,n){return w.useReducer((l,s)=>n[l][s]??l,e)}var yc=e=>{const{present:n,children:l}=e,s=Aj(n),r=typeof l=="function"?l({present:s.isPresent}):w.Children.only(l),c=Zl(s.ref,kj(r));return typeof l=="function"||s.isPresent?w.cloneElement(r,{ref:c}):null};yc.displayName="Presence";function Aj(e){const[n,l]=w.useState(),s=w.useRef(null),r=w.useRef(e),c=w.useRef("none"),u=e?"mounted":"unmounted",[f,g]=Rj(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const p=Mo(s.current);c.current=f==="mounted"?p:"none"},[f]),er(()=>{const p=s.current,y=r.current;if(y!==e){const x=c.current,S=Mo(p);e?g("MOUNT"):S==="none"||p?.display==="none"?g("UNMOUNT"):g(y&&x!==S?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,g]),er(()=>{if(n){let p;const y=n.ownerDocument.defaultView??window,v=S=>{const _=Mo(s.current).includes(CSS.escape(S.animationName));if(S.target===n&&_&&(g("ANIMATION_END"),!r.current)){const M=n.style.animationFillMode;n.style.animationFillMode="forwards",p=y.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=M)})}},x=S=>{S.target===n&&(c.current=Mo(s.current))};return n.addEventListener("animationstart",x),n.addEventListener("animationcancel",v),n.addEventListener("animationend",v),()=>{y.clearTimeout(p),n.removeEventListener("animationstart",x),n.removeEventListener("animationcancel",v),n.removeEventListener("animationend",v)}}else g("ANIMATION_END")},[n,g]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:w.useCallback(p=>{s.current=p?getComputedStyle(p):null,l(p)},[])}}function Mo(e){return e?.animationName||"none"}function kj(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,l=n&&"isReactWarning"in n&&n.isReactWarning;return l?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,l=n&&"isReactWarning"in n&&n.isReactWarning,l?e.props.ref:e.props.ref||e.ref)}var af=0;function zj(){w.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Dy()),document.body.insertAdjacentElement("beforeend",e[1]??Dy()),af++,()=>{af===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),af--}},[])}function Dy(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var ca=function(){return ca=Object.assign||function(n){for(var l,s=1,r=arguments.length;s<r;s++){l=arguments[s];for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&(n[c]=l[c])}return n},ca.apply(this,arguments)};function zb(e,n){var l={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&n.indexOf(s)<0&&(l[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(e);r<s.length;r++)n.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(l[s[r]]=e[s[r]]);return l}function Oj(e,n,l){if(l||arguments.length===2)for(var s=0,r=n.length,c;s<r;s++)(c||!(s in n))&&(c||(c=Array.prototype.slice.call(n,0,s)),c[s]=n[s]);return e.concat(c||Array.prototype.slice.call(n))}var Bo="right-scroll-bar-position",Io="width-before-scroll-bar",Pj="with-scroll-bars-hidden",Bj="--removed-body-scroll-bar-size";function lf(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function Ij(e,n){var l=w.useState(function(){return{value:e,callback:n,facade:{get current(){return l.value},set current(s){var r=l.value;r!==s&&(l.value=s,l.callback(s,r))}}}})[0];return l.callback=n,l.facade}var Lj=typeof window<"u"?w.useLayoutEffect:w.useEffect,jy=new WeakMap;function qj(e,n){var l=Ij(null,function(s){return e.forEach(function(r){return lf(r,s)})});return Lj(function(){var s=jy.get(l);if(s){var r=new Set(s),c=new Set(e),u=l.current;r.forEach(function(f){c.has(f)||lf(f,null)}),c.forEach(function(f){r.has(f)||lf(f,u)})}jy.set(l,e)},[e]),l}function Uj(e){return e}function $j(e,n){n===void 0&&(n=Uj);var l=[],s=!1,r={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return l.length?l[l.length-1]:e},useMedium:function(c){var u=n(c,s);return l.push(u),function(){l=l.filter(function(f){return f!==u})}},assignSyncMedium:function(c){for(s=!0;l.length;){var u=l;l=[],u.forEach(c)}l={push:function(f){return c(f)},filter:function(){return l}}},assignMedium:function(c){s=!0;var u=[];if(l.length){var f=l;l=[],f.forEach(c),u=l}var g=function(){var y=u;u=[],y.forEach(c)},p=function(){return Promise.resolve().then(g)};p(),l={push:function(y){u.push(y),p()},filter:function(y){return u=u.filter(y),l}}}};return r}function Hj(e){e===void 0&&(e={});var n=$j(null);return n.options=ca({async:!0,ssr:!1},e),n}var Ob=function(e){var n=e.sideCar,l=zb(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=n.read();if(!s)throw new Error("Sidecar medium not found");return w.createElement(s,ca({},l))};Ob.isSideCarExport=!0;function Zj(e,n){return e.useMedium(n),Ob}var Pb=Hj(),sf=function(){},bc=w.forwardRef(function(e,n){var l=w.useRef(null),s=w.useState({onScrollCapture:sf,onWheelCapture:sf,onTouchMoveCapture:sf}),r=s[0],c=s[1],u=e.forwardProps,f=e.children,g=e.className,p=e.removeScrollBar,y=e.enabled,v=e.shards,x=e.sideCar,S=e.noRelative,N=e.noIsolation,_=e.inert,M=e.allowPinchZoom,R=e.as,I=R===void 0?"div":R,O=e.gapMode,L=zb(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),H=x,A=qj([l,n]),D=ca(ca({},L),r);return w.createElement(w.Fragment,null,y&&w.createElement(H,{sideCar:Pb,removeScrollBar:p,shards:v,noRelative:S,noIsolation:N,inert:_,setCallbacks:c,allowPinchZoom:!!M,lockRef:l,gapMode:O}),u?w.cloneElement(w.Children.only(f),ca(ca({},D),{ref:A})):w.createElement(I,ca({},D,{className:g,ref:A}),f))});bc.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};bc.classNames={fullWidth:Io,zeroRight:Bo};var Fj=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Yj(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=Fj();return n&&e.setAttribute("nonce",n),e}function Gj(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function Vj(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var Kj=function(){var e=0,n=null;return{add:function(l){e==0&&(n=Yj())&&(Gj(n,l),Vj(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},Wj=function(){var e=Kj();return function(n,l){w.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&l])}},Bb=function(){var e=Wj(),n=function(l){var s=l.styles,r=l.dynamic;return e(s,r),null};return n},Xj={left:0,top:0,right:0,gap:0},rf=function(e){return parseInt(e||"",10)||0},Qj=function(e){var n=window.getComputedStyle(document.body),l=n[e==="padding"?"paddingLeft":"marginLeft"],s=n[e==="padding"?"paddingTop":"marginTop"],r=n[e==="padding"?"paddingRight":"marginRight"];return[rf(l),rf(s),rf(r)]},Jj=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Xj;var n=Qj(e),l=document.documentElement.clientWidth,s=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,s-l+n[2]-n[0])}},eC=Bb(),$s="data-scroll-locked",tC=function(e,n,l,s){var r=e.left,c=e.top,u=e.right,f=e.gap;return l===void 0&&(l="margin"),`
  .`.concat(Pj,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(f,"px ").concat(s,`;
  }
  body[`).concat($s,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(s,";"),l==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(u,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(f,"px ").concat(s,`;
    `),l==="padding"&&"padding-right: ".concat(f,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Bo,` {
    right: `).concat(f,"px ").concat(s,`;
  }
  
  .`).concat(Io,` {
    margin-right: `).concat(f,"px ").concat(s,`;
  }
  
  .`).concat(Bo," .").concat(Bo,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Io," .").concat(Io,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat($s,`] {
    `).concat(Bj,": ").concat(f,`px;
  }
`)},Cy=function(){var e=parseInt(document.body.getAttribute($s)||"0",10);return isFinite(e)?e:0},nC=function(){w.useEffect(function(){return document.body.setAttribute($s,(Cy()+1).toString()),function(){var e=Cy()-1;e<=0?document.body.removeAttribute($s):document.body.setAttribute($s,e.toString())}},[])},aC=function(e){var n=e.noRelative,l=e.noImportant,s=e.gapMode,r=s===void 0?"margin":s;nC();var c=w.useMemo(function(){return Jj(r)},[r]);return w.createElement(eC,{styles:tC(c,!n,r,l?"":"!important")})},zf=!1;if(typeof window<"u")try{var Do=Object.defineProperty({},"passive",{get:function(){return zf=!0,!0}});window.addEventListener("test",Do,Do),window.removeEventListener("test",Do,Do)}catch{zf=!1}var Rs=zf?{passive:!1}:!1,lC=function(e){return e.tagName==="TEXTAREA"},Ib=function(e,n){if(!(e instanceof Element))return!1;var l=window.getComputedStyle(e);return l[n]!=="hidden"&&!(l.overflowY===l.overflowX&&!lC(e)&&l[n]==="visible")},sC=function(e){return Ib(e,"overflowY")},iC=function(e){return Ib(e,"overflowX")},Ry=function(e,n){var l=n.ownerDocument,s=n;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var r=Lb(e,s);if(r){var c=qb(e,s),u=c[1],f=c[2];if(u>f)return!0}s=s.parentNode}while(s&&s!==l.body);return!1},rC=function(e){var n=e.scrollTop,l=e.scrollHeight,s=e.clientHeight;return[n,l,s]},oC=function(e){var n=e.scrollLeft,l=e.scrollWidth,s=e.clientWidth;return[n,l,s]},Lb=function(e,n){return e==="v"?sC(n):iC(n)},qb=function(e,n){return e==="v"?rC(n):oC(n)},cC=function(e,n){return e==="h"&&n==="rtl"?-1:1},uC=function(e,n,l,s,r){var c=cC(e,window.getComputedStyle(n).direction),u=c*s,f=l.target,g=n.contains(f),p=!1,y=u>0,v=0,x=0;do{if(!f)break;var S=qb(e,f),N=S[0],_=S[1],M=S[2],R=_-M-c*N;(N||R)&&Lb(e,f)&&(v+=R,x+=N);var I=f.parentNode;f=I&&I.nodeType===Node.DOCUMENT_FRAGMENT_NODE?I.host:I}while(!g&&f!==document.body||g&&(n.contains(f)||n===f));return(y&&Math.abs(v)<1||!y&&Math.abs(x)<1)&&(p=!0),p},jo=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ay=function(e){return[e.deltaX,e.deltaY]},ky=function(e){return e&&"current"in e?e.current:e},dC=function(e,n){return e[0]===n[0]&&e[1]===n[1]},fC=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},hC=0,As=[];function mC(e){var n=w.useRef([]),l=w.useRef([0,0]),s=w.useRef(),r=w.useState(hC++)[0],c=w.useState(Bb)[0],u=w.useRef(e);w.useEffect(function(){u.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var _=Oj([e.lockRef.current],(e.shards||[]).map(ky),!0).filter(Boolean);return _.forEach(function(M){return M.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),_.forEach(function(M){return M.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var f=w.useCallback(function(_,M){if("touches"in _&&_.touches.length===2||_.type==="wheel"&&_.ctrlKey)return!u.current.allowPinchZoom;var R=jo(_),I=l.current,O="deltaX"in _?_.deltaX:I[0]-R[0],L="deltaY"in _?_.deltaY:I[1]-R[1],H,A=_.target,D=Math.abs(O)>Math.abs(L)?"h":"v";if("touches"in _&&D==="h"&&A.type==="range")return!1;var F=window.getSelection(),ie=F&&F.anchorNode,re=ie?ie===A||ie.contains(A):!1;if(re)return!1;var Q=Ry(D,A);if(!Q)return!0;if(Q?H=D:(H=D==="v"?"h":"v",Q=Ry(D,A)),!Q)return!1;if(!s.current&&"changedTouches"in _&&(O||L)&&(s.current=H),!H)return!0;var ce=s.current||H;return uC(ce,M,_,ce==="h"?O:L)},[]),g=w.useCallback(function(_){var M=_;if(!(!As.length||As[As.length-1]!==c)){var R="deltaY"in M?Ay(M):jo(M),I=n.current.filter(function(H){return H.name===M.type&&(H.target===M.target||M.target===H.shadowParent)&&dC(H.delta,R)})[0];if(I&&I.should){M.cancelable&&M.preventDefault();return}if(!I){var O=(u.current.shards||[]).map(ky).filter(Boolean).filter(function(H){return H.contains(M.target)}),L=O.length>0?f(M,O[0]):!u.current.noIsolation;L&&M.cancelable&&M.preventDefault()}}},[]),p=w.useCallback(function(_,M,R,I){var O={name:_,delta:M,target:R,should:I,shadowParent:gC(R)};n.current.push(O),setTimeout(function(){n.current=n.current.filter(function(L){return L!==O})},1)},[]),y=w.useCallback(function(_){l.current=jo(_),s.current=void 0},[]),v=w.useCallback(function(_){p(_.type,Ay(_),_.target,f(_,e.lockRef.current))},[]),x=w.useCallback(function(_){p(_.type,jo(_),_.target,f(_,e.lockRef.current))},[]);w.useEffect(function(){return As.push(c),e.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:x}),document.addEventListener("wheel",g,Rs),document.addEventListener("touchmove",g,Rs),document.addEventListener("touchstart",y,Rs),function(){As=As.filter(function(_){return _!==c}),document.removeEventListener("wheel",g,Rs),document.removeEventListener("touchmove",g,Rs),document.removeEventListener("touchstart",y,Rs)}},[]);var S=e.removeScrollBar,N=e.inert;return w.createElement(w.Fragment,null,N?w.createElement(c,{styles:fC(r)}):null,S?w.createElement(aC,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function gC(e){for(var n=null;e!==null;)e instanceof ShadowRoot&&(n=e.host,e=e.host),e=e.parentNode;return n}const pC=Zj(Pb,mC);var Ub=w.forwardRef(function(e,n){return w.createElement(bc,ca({},e,{ref:n,sideCar:pC}))});Ub.classNames=bc.classNames;var vC=function(e){if(typeof document>"u")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},ks=new WeakMap,Co=new WeakMap,Ro={},of=0,$b=function(e){return e&&(e.host||$b(e.parentNode))},yC=function(e,n){return n.map(function(l){if(e.contains(l))return l;var s=$b(l);return s&&e.contains(s)?s:(console.error("aria-hidden",l,"in not contained inside",e,". Doing nothing"),null)}).filter(function(l){return!!l})},bC=function(e,n,l,s){var r=yC(n,Array.isArray(e)?e:[e]);Ro[l]||(Ro[l]=new WeakMap);var c=Ro[l],u=[],f=new Set,g=new Set(r),p=function(v){!v||f.has(v)||(f.add(v),p(v.parentNode))};r.forEach(p);var y=function(v){!v||g.has(v)||Array.prototype.forEach.call(v.children,function(x){if(f.has(x))y(x);else try{var S=x.getAttribute(s),N=S!==null&&S!=="false",_=(ks.get(x)||0)+1,M=(c.get(x)||0)+1;ks.set(x,_),c.set(x,M),u.push(x),_===1&&N&&Co.set(x,!0),M===1&&x.setAttribute(l,"true"),N||x.setAttribute(s,"true")}catch(R){console.error("aria-hidden: cannot operate on ",x,R)}})};return y(n),f.clear(),of++,function(){u.forEach(function(v){var x=ks.get(v)-1,S=c.get(v)-1;ks.set(v,x),c.set(v,S),x||(Co.has(v)||v.removeAttribute(s),Co.delete(v)),S||v.removeAttribute(l)}),of--,of||(ks=new WeakMap,ks=new WeakMap,Co=new WeakMap,Ro={})}},xC=function(e,n,l){l===void 0&&(l="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),r=vC(e);return r?(s.push.apply(s,Array.from(r.querySelectorAll("[aria-live], script"))),bC(s,r,l,"aria-hidden")):function(){return null}},xc="Dialog",[Hb]=ej(xc),[SC,na]=Hb(xc),Zb=e=>{const{__scopeDialog:n,children:l,open:s,defaultOpen:r,onOpenChange:c,modal:u=!0}=e,f=w.useRef(null),g=w.useRef(null),[p,y]=sj({prop:s,defaultProp:r??!1,onChange:c,caller:xc});return m.jsx(SC,{scope:n,triggerRef:f,contentRef:g,contentId:ef(),titleId:ef(),descriptionId:ef(),open:p,onOpenChange:y,onOpenToggle:w.useCallback(()=>y(v=>!v),[y]),modal:u,children:l})};Zb.displayName=xc;var Fb="DialogTrigger",wC=w.forwardRef((e,n)=>{const{__scopeDialog:l,...s}=e,r=na(Fb,l),c=Zl(n,r.triggerRef);return m.jsx(za.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":mh(r.open),...s,ref:c,onClick:cl(e.onClick,r.onOpenToggle)})});wC.displayName=Fb;var fh="DialogPortal",[_C,Yb]=Hb(fh,{forceMount:void 0}),Gb=e=>{const{__scopeDialog:n,forceMount:l,children:s,container:r}=e,c=na(fh,n);return m.jsx(_C,{scope:n,forceMount:l,children:w.Children.map(s,u=>m.jsx(yc,{present:l||c.open,children:m.jsx(kb,{asChild:!0,container:r,children:u})}))})};Gb.displayName=fh;var tc="DialogOverlay",Vb=w.forwardRef((e,n)=>{const l=Yb(tc,e.__scopeDialog),{forceMount:s=l.forceMount,...r}=e,c=na(tc,e.__scopeDialog);return c.modal?m.jsx(yc,{present:s||c.open,children:m.jsx(NC,{...r,ref:n})}):null});Vb.displayName=tc;var EC=Mb("DialogOverlay.RemoveScroll"),NC=w.forwardRef((e,n)=>{const{__scopeDialog:l,...s}=e,r=na(tc,l);return m.jsx(Ub,{as:EC,allowPinchZoom:!0,shards:[r.contentRef],children:m.jsx(za.div,{"data-state":mh(r.open),...s,ref:n,style:{pointerEvents:"auto",...s.style}})})}),ql="DialogContent",Kb=w.forwardRef((e,n)=>{const l=Yb(ql,e.__scopeDialog),{forceMount:s=l.forceMount,...r}=e,c=na(ql,e.__scopeDialog);return m.jsx(yc,{present:s||c.open,children:c.modal?m.jsx(TC,{...r,ref:n}):m.jsx(MC,{...r,ref:n})})});Kb.displayName=ql;var TC=w.forwardRef((e,n)=>{const l=na(ql,e.__scopeDialog),s=w.useRef(null),r=Zl(n,l.contentRef,s);return w.useEffect(()=>{const c=s.current;if(c)return xC(c)},[]),m.jsx(Wb,{...e,ref:r,trapFocus:l.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:cl(e.onCloseAutoFocus,c=>{c.preventDefault(),l.triggerRef.current?.focus()}),onPointerDownOutside:cl(e.onPointerDownOutside,c=>{const u=c.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0;(u.button===2||f)&&c.preventDefault()}),onFocusOutside:cl(e.onFocusOutside,c=>c.preventDefault())})}),MC=w.forwardRef((e,n)=>{const l=na(ql,e.__scopeDialog),s=w.useRef(!1),r=w.useRef(!1);return m.jsx(Wb,{...e,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:c=>{e.onCloseAutoFocus?.(c),c.defaultPrevented||(s.current||l.triggerRef.current?.focus(),c.preventDefault()),s.current=!1,r.current=!1},onInteractOutside:c=>{e.onInteractOutside?.(c),c.defaultPrevented||(s.current=!0,c.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const u=c.target;l.triggerRef.current?.contains(u)&&c.preventDefault(),c.detail.originalEvent.type==="focusin"&&r.current&&c.preventDefault()}})}),Wb=w.forwardRef((e,n)=>{const{__scopeDialog:l,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:c,...u}=e,f=na(ql,l),g=w.useRef(null),p=Zl(n,g);return zj(),m.jsxs(m.Fragment,{children:[m.jsx(Rb,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:r,onUnmountAutoFocus:c,children:m.jsx(jb,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":mh(f.open),...u,ref:p,onDismiss:()=>f.onOpenChange(!1)})}),m.jsxs(m.Fragment,{children:[m.jsx(DC,{titleId:f.titleId}),m.jsx(CC,{contentRef:g,descriptionId:f.descriptionId})]})]})}),hh="DialogTitle",Xb=w.forwardRef((e,n)=>{const{__scopeDialog:l,...s}=e,r=na(hh,l);return m.jsx(za.h2,{id:r.titleId,...s,ref:n})});Xb.displayName=hh;var Qb="DialogDescription",Jb=w.forwardRef((e,n)=>{const{__scopeDialog:l,...s}=e,r=na(Qb,l);return m.jsx(za.p,{id:r.descriptionId,...s,ref:n})});Jb.displayName=Qb;var ex="DialogClose",tx=w.forwardRef((e,n)=>{const{__scopeDialog:l,...s}=e,r=na(ex,l);return m.jsx(za.button,{type:"button",...s,ref:n,onClick:cl(e.onClick,()=>r.onOpenChange(!1))})});tx.displayName=ex;function mh(e){return e?"open":"closed"}var nx="DialogTitleWarning",[Uk,ax]=JD(nx,{contentName:ql,titleName:hh,docsSlug:"dialog"}),DC=({titleId:e})=>{const n=ax(nx),l=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return w.useEffect(()=>{e&&(document.getElementById(e)||console.error(l))},[l,e]),null},jC="DialogDescriptionWarning",CC=({contentRef:e,descriptionId:n})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ax(jC).contentName}}.`;return w.useEffect(()=>{const r=e.current?.getAttribute("aria-describedby");n&&r&&(document.getElementById(n)||console.warn(s))},[s,e,n]),null},RC=Zb,AC=Gb,kC=Vb,zC=Kb,OC=Xb,PC=Jb,BC=tx;function lx(e){var n,l,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(n=0;n<r;n++)e[n]&&(l=lx(e[n]))&&(s&&(s+=" "),s+=l)}else for(l in e)e[l]&&(s&&(s+=" "),s+=l);return s}function IC(){for(var e,n,l=0,s="",r=arguments.length;l<r;l++)(e=arguments[l])&&(n=lx(e))&&(s&&(s+=" "),s+=n);return s}function bt(...e){return IC(e)}function Me(e){return m.jsx("button",{type:e.type??"button",onClick:e.onClick,className:bt("wb-button",e.className,e.disabled&&"opacity-50 cursor-not-allowed"),"data-variant":e.variant==="default"?void 0:e.variant,title:e.title,disabled:e.disabled,children:e.children})}function Hs(e){return m.jsxs("section",{className:bt("wb-panel rounded-2xl",e.className),children:[(e.title||e.headerRight)&&m.jsxs("div",{className:"flex items-center justify-between gap-2 border-b border-[var(--wb-border-muted)] px-4 py-3",children:[m.jsx("div",{className:"text-sm font-semibold tracking-wide text-[var(--wb-text)]",children:e.title}),e.headerRight?m.jsx("div",{className:"flex items-center gap-2",children:e.headerRight}):null]}),m.jsx("div",{className:"min-h-0",children:e.children})]})}function Ue(e){return m.jsx("label",{className:bt("mb-1 block text-xs font-medium uppercase tracking-wide text-[var(--wb-muted)]",e.className),children:e.children})}function ot(e){return m.jsx("button",{type:"button",className:bt("wb-chip",e.className,e.disabled&&"opacity-50 cursor-not-allowed"),"data-active":e.active?"true":"false",onClick:e.disabled?void 0:e.onClick,title:e.title,disabled:e.disabled,children:e.children})}function Ao(e){const n=e.delta,l=n==null?"":n>0?"text-emerald-300":n<0?"text-rose-300":"text-slate-300";return m.jsxs("div",{className:bt("wb-card p-3",e.className),children:[m.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:e.label}),m.jsx("div",{className:bt("mt-1 text-lg font-semibold",e.valueClassName),children:e.value}),n!=null?m.jsxs("div",{className:bt("mt-1 text-xs",l),children:[n>0?"+":"",Math.round(n)]}):null]})}function Zs(e){return m.jsx("div",{className:bt("wb-scrollbar min-h-0 overflow-auto",e.className),children:e.children})}function gh(e){return m.jsx(RC,{open:e.open,onOpenChange:e.onOpenChange,children:m.jsxs(AC,{children:[m.jsx(kC,{className:"fixed inset-0 z-40 bg-black/60 backdrop-blur-sm"}),m.jsxs(zC,{className:bt("fixed left-1/2 top-1/2 z-50 w-[min(95vw,1100px)] -translate-x-1/2 -translate-y-1/2 rounded-2xl border border-[var(--wb-border)] bg-[#0d1325] shadow-2xl",e.className),children:[m.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-[var(--wb-border-muted)] px-5 py-4",children:[m.jsxs("div",{children:[m.jsx(OC,{className:"text-base font-semibold",children:e.title}),e.description?m.jsx(PC,{className:"mt-1 text-sm text-[var(--wb-muted)]",children:e.description}):null]}),m.jsx(BC,{asChild:!0,children:m.jsx("button",{className:"rounded-lg border border-[var(--wb-border)] p-2 hover:bg-white/5","aria-label":"Close",children:m.jsx(_E,{size:16})})})]}),m.jsx("div",{className:"max-h-[70vh] overflow-auto px-5 py-4",children:e.children}),e.footer?m.jsx("div",{className:"border-t border-[var(--wb-border-muted)] px-5 py-4",children:e.footer}):null]})]})})}function Aa(e){return m.jsxs("div",{children:[m.jsx(Ue,{children:e.label}),m.jsx("input",{className:"wb-input",type:"number",value:e.value??"",min:e.min,max:e.max,step:e.step??1,placeholder:e.placeholder,onChange:n=>{const l=n.target.value.trim();e.onChange(l===""?null:Number(l))}})]})}const LC={bow:"0 0",spear:"9.090909090909088% 0",wand:"18.181818181818183% 0",dagger:"27.27272727272727% 0",relik:"36.36363636363637% 0",helmet:"45.45454545454546% 0",chestplate:"54.54545454545454% 0",leggings:"63.63636363636363% 0",boots:"72.72727272727272% 0",ring:"81.81818181818181% 0",bracelet:"90.90909090909092% 0",necklace:"100% 0"};function qC(e){return e.category==="weapon"?e.type:e.category}function UC(e){const n=qC(e.item),l=LC[n],s="./media/items/new.png";return l?m.jsx("div",{className:"relative h-9 w-9 shrink-0 overflow-hidden rounded-lg border border-[var(--wb-border-muted)] bg-black/20",title:`${e.item.type} icon`,children:m.jsx("div",{"aria-hidden":!0,className:"absolute inset-[3px] rounded-[6px]",style:{backgroundImage:`url(${s})`,backgroundPosition:l,backgroundSize:"1200% 100%",backgroundRepeat:"no-repeat",imageRendering:"pixelated"}})}):m.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg border border-[var(--wb-border-muted)] bg-black/20 text-xs text-[var(--wb-muted)]",children:"?"})}function $C(e){switch(e){case"Mythic":return"text-violet-300";case"Fabled":return"text-rose-300";case"Legendary":return"text-cyan-300";case"Rare":return"text-fuchsia-300";case"Unique":return"text-amber-300";case"Set":return"text-emerald-300";default:return"text-slate-200"}}function HC(e){const n=[{label:"S",value:e.numeric.reqStr},{label:"D",value:e.numeric.reqDex},{label:"I",value:e.numeric.reqInt},{label:"F",value:e.numeric.reqDef},{label:"A",value:e.numeric.reqAgi}].filter(l=>l.value>0);return n.length===0?null:n.map(l=>`${l.label}${l.value}`).join(" ")}function ZC(e){const n=[{label:"+S",value:e.numeric.spStr},{label:"+D",value:e.numeric.spDex},{label:"+I",value:e.numeric.spInt},{label:"+F",value:e.numeric.spDef},{label:"+A",value:e.numeric.spAgi}].filter(l=>l.value!==0);return n.length===0?null:n.map(l=>`${l.label}${l.value}`).join(" ")}function FC(e){const n=e.legacyRaw,l=[["N",typeof n.nDam=="string"?n.nDam:""],["E",typeof n.eDam=="string"?n.eDam:""],["T",typeof n.tDam=="string"?n.tDam:""],["W",typeof n.wDam=="string"?n.wDam:""],["F",typeof n.fDam=="string"?n.fDam:""],["A",typeof n.aDam=="string"?n.aDam:""]].filter(([,s])=>s&&s!=="0-0");return l.length===0?null:l.map(([s,r])=>`${s}:${r}`).join("  ")}function YC(e){const n=[];return e.numeric.baseDps>0&&n.push(`DPS ${Math.round(e.numeric.baseDps)}`),e.numeric.hp+e.numeric.hpBonus!==0&&n.push(`HP ${Math.round(e.numeric.hp+e.numeric.hpBonus)}`),e.numeric.mr!==0&&n.push(`MR ${e.numeric.mr}`),e.numeric.ms!==0&&n.push(`MS ${e.numeric.ms}`),e.numeric.spd!==0&&n.push(`WS ${e.numeric.spd}`),e.powderSlots>0&&n.push(`Powders ${e.powderSlots}`),e.atkSpd&&n.push(`AS ${e.atkSpd}`),n.slice(0,6)}function Sc(e){const n=R0({id:e.dragData?`drag:${e.dragData.kind}:${e.item.id}:${e.dragData.sourceSlot??e.dragData.sourceCategory??""}`:`item:${e.item.id}`,data:e.dragData?{dragItem:e.dragData}:void 0}),l=e.dragData?{transform:Ho.Translate.toString(n.transform),opacity:n.isDragging?.45:1}:void 0,s=e.showDetails?HC(e.item):null,r=e.showDetails?ZC(e.item):null,c=e.showDetails?FC(e.item):null,u=e.showDetails?YC(e.item):[];return m.jsxs("div",{ref:e.dragData?n.setNodeRef:void 0,style:l,className:bt("wb-card",e.dense?"p-2":e.compact?"p-2.5":"p-3",n.isDragging&&"ring-2 ring-emerald-300/40"),onMouseEnter:()=>e.onHover?.(!0),onMouseLeave:()=>e.onHover?.(!1),children:[m.jsxs("div",{className:bt("flex items-start gap-2",e.dense&&"gap-1.5"),children:[e.dragData?m.jsx("button",{type:"button",...n.listeners,...n.attributes,className:"mt-0.5 rounded-md border border-[var(--wb-border)] p-1 text-[var(--wb-muted)] hover:bg-white/5","aria-label":`Drag ${e.item.displayName}`,children:m.jsx(eE,{size:14})}):null,m.jsx(UC,{item:e.item}),m.jsxs("div",{className:"min-w-0 flex-1",children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[m.jsx("div",{className:bt("truncate text-sm font-semibold leading-tight",$C(e.item.tier)),children:e.item.displayName}),e.badge?m.jsx("span",{className:"wb-chip",children:e.badge}):null,e.locked?m.jsxs("span",{className:"wb-chip inline-flex items-center gap-1",children:[m.jsx(O0,{size:11})," Locked"]}):null]}),m.jsxs("div",{className:bt("mt-1 flex flex-wrap gap-y-1 text-[var(--wb-muted)]",e.dense?"gap-x-2 text-xs":"gap-x-3 text-xs"),children:[m.jsx("span",{children:e.item.type}),m.jsxs("span",{children:["Lv ",e.item.level]}),e.dense?null:m.jsx("span",{children:e.item.tier}),!e.dense&&e.item.classReq?m.jsx("span",{children:e.item.classReq}):null,!e.dense&&e.item.majorIds.length>0?m.jsxs("span",{children:["MID ",e.item.majorIds.length]}):null,e.dense&&e.item.majorIds.length>0?m.jsxs("span",{children:["M",e.item.majorIds.length]}):null]}),e.showDetails?m.jsxs("div",{className:bt("mt-2 space-y-1",e.dense?"text-[11px]":"text-xs"),children:[(s||r)&&m.jsxs("div",{className:"rounded-lg border border-[var(--wb-border-muted)] bg-black/15 px-2 py-1 text-[var(--wb-muted)]",children:[s?m.jsxs("span",{className:"mr-2",children:["Req ",s]}):null,r?m.jsxs("span",{children:["SP ",r]}):null]}),u.length>0?m.jsx("div",{className:"flex flex-wrap gap-1",children:u.map(f=>m.jsx("span",{className:"wb-chip text-[11px]",children:f},f))}):null,c?m.jsx("div",{className:"rounded-lg border border-[var(--wb-border-muted)] bg-black/15 px-2 py-1 font-mono text-[11px] leading-relaxed text-[var(--wb-muted)]",children:c}):null,e.item.majorIds.length>0?m.jsxs("div",{className:"truncate text-[var(--wb-muted)]",children:["Major IDs: ",e.item.majorIds.join(", ")]}):null]}):null,e.compact?null:m.jsxs("div",{className:"mt-2 grid grid-cols-2 gap-2 text-xs",children:[m.jsxs("div",{className:"rounded-lg border border-[var(--wb-border-muted)] bg-black/15 px-2 py-1",children:["DPS ",Math.round(e.item.roughScoreFields.baseDps)]}),m.jsxs("div",{className:"rounded-lg border border-[var(--wb-border-muted)] bg-black/15 px-2 py-1",children:["EHP ",Math.round(e.item.roughScoreFields.ehpProxy)]}),m.jsxs("div",{className:"rounded-lg border border-[var(--wb-border-muted)] bg-black/15 px-2 py-1",children:["Off ",Math.round(e.item.roughScoreFields.offense)]}),m.jsxs("div",{className:"rounded-lg border border-[var(--wb-border-muted)] bg-black/15 px-2 py-1",children:["SP ",Math.round(e.item.roughScoreFields.skillPointTotal)]})]})]})]}),(e.onPin||e.onEquip||e.onRemove)&&m.jsxs("div",{className:bt("mt-2 flex flex-wrap",e.dense?"gap-1":"gap-2"),children:[e.onPin?m.jsxs(Me,{className:bt("text-xs",e.dense?"px-1.5 py-0.5":"px-2 py-1"),variant:"ghost",onClick:e.onPin,children:[m.jsx(iE,{size:12,className:"mr-1 inline"}),"Pin"]}):null,e.onEquip?m.jsxs(Me,{className:bt("text-xs",e.dense?"px-1.5 py-0.5":"px-2 py-1"),onClick:e.onEquip,children:[m.jsx(oE,{size:12,className:"mr-1 inline"}),"Equip"]}):null,e.onRemove?m.jsx(Me,{className:bt("text-xs",e.dense?"px-1.5 py-0.5":"px-2 py-1"),variant:"ghost",onClick:e.onRemove,children:"Remove"}):null]})]})}const sx="workbench-search-presets:v2";function GC(){try{const e=window.localStorage.getItem(sx);if(!e)return[];const n=JSON.parse(e);return Array.isArray(n)?n:[]}catch{return[]}}function VC(e){window.localStorage.setItem(sx,JSON.stringify(e))}function zy(e,n){return e.includes(n)?e.filter(l=>l!==n):[...e,n]}function ix(e){const n=w.useRef(null),l=e.result?.rows??[],s=w.useDeferredValue(l),r=XD({count:s.length,getScrollElement:()=>n.current,estimateSize:()=>e.state.viewMode==="grid"?178:208,overscan:6});return m.jsxs("div",{className:"min-h-0 flex-1",children:[m.jsxs("div",{className:"mb-2 flex items-center justify-between text-xs text-[var(--wb-muted)]",children:[m.jsx("span",{children:e.loading?"Searching...":e.result?`${e.result.total.toLocaleString()} results`:"Loading..."}),m.jsxs("span",{children:[(e.state.sortKeys??["relevance"]).map(c=>ll(c)).join("  "),e.state.sortDescending?" ":" "]})]}),m.jsx("div",{ref:n,className:"wb-scrollbar h-[calc(100vh-26rem)] overflow-auto rounded-xl border border-[var(--wb-border-muted)] bg-black/10",children:m.jsx("div",{style:{height:r.getTotalSize(),position:"relative"},children:r.getVirtualItems().map(c=>{const u=s[c.index],f=e.catalog.itemsById.get(u.id);if(!f)return null;const g=e.selectedSlot!=null&&ua(e.selectedSlot)===f.category;return m.jsx("div",{style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${c.start}px)`,padding:"8px"},children:m.jsx(Sc,{item:f,dragData:{kind:"search",itemId:f.id},onPin:()=>e.onPin(f.id),onEquip:()=>e.onEquip(f.id),onHover:p=>e.onHover(p?f.id:null,p?e.selectedSlot:null),badge:g?`Fits ${e.selectedSlot}`:void 0})},u.id)})})})]})}function KC(e){const[n,l]=w.useState(()=>typeof window>"u"?[]:GC()),s=w.useMemo(()=>e.catalog.facetsMeta.majorIds.slice(0,20),[e.catalog]),r=e.result?.facetCounts,c=w.useMemo(()=>["relevance","level","baseDps",...Object.keys(e.catalog.facetsMeta.numericRanges).filter(y=>!["relevance","level","baseDps"].includes(y)).sort((y,v)=>ll(y).localeCompare(ll(v)))],[e.catalog.facetsMeta.numericRanges]),u=w.useMemo(()=>{const g=Object.keys(e.catalog.facetsMeta.numericRanges);return[...["level","baseDps","slots"].filter(y=>!g.includes(y)),...g].sort((y,v)=>ll(y).localeCompare(ll(v)))},[e.catalog.facetsMeta.numericRanges]);w.useEffect(()=>{typeof window<"u"&&VC(n)},[n]);const f=g=>e.setState(vD(e.state,g));return m.jsx(Hs,{className:"flex min-h-0 flex-col",title:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(uE,{size:15}),"Advanced Item Search"]}),headerRight:null,children:m.jsxs("div",{className:"flex min-h-0 flex-col gap-3 p-3",children:[m.jsxs("div",{children:[m.jsx(Ue,{children:"Search Text"}),m.jsx("input",{className:"wb-input",placeholder:"Name, lore, major ID...",value:e.state.text,onChange:g=>f({text:g.target.value})})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Ue,{className:"mb-0 shrink-0",children:"Results"}),m.jsx(ot,{active:e.state.resultsBelowBuild,onClick:()=>f({resultsBelowBuild:!e.state.resultsBelowBuild}),title:"Toggle: show below Workbench or in sidebar",children:e.state.resultsBelowBuild?"Below build":"In sidebar"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{children:[m.jsx(Ue,{children:"Sort by"}),m.jsxs("div",{className:"flex flex-col gap-1",children:[(e.state.sortKeys??["relevance"]).map((g,p)=>m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("select",{className:"wb-select flex-1",value:g,onChange:y=>{const v=[...e.state.sortKeys??["relevance"]];v[p]=y.target.value,f({sortKeys:v})},children:c.map(y=>m.jsx("option",{value:y,children:ll(y)},y))}),m.jsx(Me,{variant:"ghost",className:"shrink-0 px-1",onClick:()=>{const y=(e.state.sortKeys??["relevance"]).filter((v,x)=>x!==p);y.length===0&&y.push("relevance"),f({sortKeys:y})},title:"Remove sort",children:""})]},p)),m.jsx(Me,{variant:"ghost",className:"self-start text-xs",onClick:()=>{const g=e.state.sortKeys??["relevance"],p=c.find(y=>!g.includes(y))??c[0];f({sortKeys:[...g,p]})},disabled:(e.state.sortKeys??["relevance"]).length>=8,children:"+ Add sort level"})]})]}),m.jsxs("div",{children:[m.jsx(Ue,{children:"View"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(ot,{active:e.state.viewMode==="list",onClick:()=>f({viewMode:"list"}),children:"List"}),m.jsx(ot,{active:e.state.viewMode==="grid",onClick:()=>f({viewMode:"grid"}),children:"Grid"}),m.jsx(ot,{active:e.state.sortDescending,onClick:()=>f({sortDescending:!e.state.sortDescending}),title:"Toggle descending",children:e.state.sortDescending?"Desc":"Asc"})]})]})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"mb-2 flex items-center gap-2 text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:[m.jsx(qv,{size:13}),"Category"]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:fl.map(g=>m.jsxs(ot,{active:e.state.categories.includes(g),onClick:()=>f({categories:zy(e.state.categories,g)}),children:[nh(g),r?.categories[g]?` (${r.categories[g]})`:""]},g))})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs("div",{children:[m.jsx(Ue,{children:"Wearable At Level"}),m.jsx("input",{className:"wb-input",type:"number",min:1,max:106,value:e.state.onlyWearableAtLevel??"",onChange:g=>{const p=g.target.value.trim();f({onlyWearableAtLevel:p?Number(p):null})}})]}),m.jsxs("div",{children:[m.jsx(Ue,{children:"Class Filter"}),m.jsxs("select",{className:"wb-select",value:e.state.classReqs[0]??"",onChange:g=>{const p=g.target.value;f({classReqs:p?[p]:[]})},children:[m.jsx("option",{value:"",children:"Any"}),e.catalog.facetsMeta.classReqs.map(g=>m.jsx("option",{value:g,children:g},g))]})]})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsx(ot,{active:e.state.onlyClassCompatible,onClick:()=>f({onlyClassCompatible:!e.state.onlyClassCompatible}),children:"Only class-compatible"}),m.jsx(ot,{active:e.state.excludeRestricted,onClick:()=>f({excludeRestricted:!e.state.excludeRestricted}),children:"Exclude restricted"})]}),m.jsxs("details",{className:"group",children:[m.jsxs("summary",{className:"cursor-pointer text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)] flex items-center gap-2",children:[m.jsx(qv,{size:13}),"Advanced ID Filters"]}),m.jsxs("div",{className:"mt-3 grid gap-2",children:[m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Set min/max for any ID (e.g. mr, sdPct, ehpProxy). Items outside ranges are excluded."}),Object.entries(e.state.numericRanges).map(([g,p])=>{const y=g==="powderSlots"?"slots":g==="level"?"lvl":g==="baseDps"?"averageDps":g,v=e.catalog.facetsMeta.numericRanges[y],x=p??{};return m.jsxs("div",{className:"flex flex-wrap items-end gap-2 rounded-lg border border-[var(--wb-border-muted)] p-2",children:[m.jsxs("div",{className:"min-w-[120px] flex-1",children:[m.jsx(Ue,{children:"ID"}),m.jsx("select",{className:"wb-select w-full",value:g,onChange:S=>{const N={...e.state.numericRanges};delete N[g],N[S.target.value]=x,f({numericRanges:N})},children:u.map(S=>m.jsx("option",{value:S,disabled:S!==g&&S in e.state.numericRanges,children:ll(S)},S))})]}),m.jsxs("div",{className:"min-w-[70px]",children:[m.jsx(Ue,{children:"Min"}),m.jsx("input",{className:"wb-input w-full",type:"number",placeholder:v?String(Math.floor(v.min)):"min",value:x.min??"",onChange:S=>{const N=S.target.value.trim();f({numericRanges:{...e.state.numericRanges,[g]:{...x,min:N===""?void 0:Number(N)}}})}})]}),m.jsxs("div",{className:"min-w-[70px]",children:[m.jsx(Ue,{children:"Max"}),m.jsx("input",{className:"wb-input w-full",type:"number",placeholder:v?String(Math.ceil(v.max)):"max",value:x.max??"",onChange:S=>{const N=S.target.value.trim();f({numericRanges:{...e.state.numericRanges,[g]:{...x,max:N===""?void 0:Number(N)}}})}})]}),m.jsx(Me,{variant:"ghost",className:"shrink-0",onClick:()=>{const S={...e.state.numericRanges};delete S[g],f({numericRanges:S})},children:"Remove"})]},g)}),m.jsx(Me,{variant:"ghost",onClick:()=>{const g=new Set(Object.keys(e.state.numericRanges)),p=u.find(y=>!g.has(y));p&&f({numericRanges:{...e.state.numericRanges,[p]:{}}})},disabled:u.every(g=>g in e.state.numericRanges),children:"Add ID Filter"})]})]}),m.jsxs("details",{className:"group",children:[m.jsx("summary",{className:"cursor-pointer text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)] flex items-center gap-2",children:"Exclusion (IDs to avoid)"}),m.jsxs("div",{className:"mt-3 grid gap-2",children:[m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Exclude items that exceed max (or are below min). E.g. mr max 20 = exclude items with mana regen > 20."}),Object.entries(e.state.exclusionRanges??{}).map(([g,p])=>{const y=g==="powderSlots"?"slots":g==="level"?"lvl":g==="baseDps"?"averageDps":g,v=e.catalog.facetsMeta.numericRanges[y],x=p??{};return m.jsxs("div",{className:"flex flex-wrap items-end gap-2 rounded-lg border border-[var(--wb-border-muted)] border-amber-500/30 p-2",children:[m.jsxs("div",{className:"min-w-[120px] flex-1",children:[m.jsx(Ue,{children:"Avoid ID"}),m.jsx("select",{className:"wb-select w-full",value:g,onChange:S=>{const N={...e.state.exclusionRanges??{}};delete N[g],N[S.target.value]=x,f({exclusionRanges:N})},children:u.map(S=>m.jsx("option",{value:S,disabled:S!==g&&S in(e.state.exclusionRanges??{}),children:ll(S)},S))})]}),m.jsxs("div",{className:"min-w-[70px]",children:[m.jsx(Ue,{children:"Max (exclude if >)"}),m.jsx("input",{className:"wb-input w-full",type:"number",placeholder:v?String(Math.ceil(v.max)):"max",value:x.max??"",onChange:S=>{const N=S.target.value.trim();f({exclusionRanges:{...e.state.exclusionRanges??{},[g]:{...x,max:N===""?void 0:Number(N)}}})}})]}),m.jsxs("div",{className:"min-w-[70px]",children:[m.jsx(Ue,{children:"Min (exclude if <)"}),m.jsx("input",{className:"wb-input w-full",type:"number",placeholder:"min",value:x.min??"",onChange:S=>{const N=S.target.value.trim();f({exclusionRanges:{...e.state.exclusionRanges??{},[g]:{...x,min:N===""?void 0:Number(N)}}})}})]}),m.jsx(Me,{variant:"ghost",className:"shrink-0",onClick:()=>{const S={...e.state.exclusionRanges??{}};delete S[g],f({exclusionRanges:S})},children:"Remove"})]},g)}),m.jsx(Me,{variant:"ghost",onClick:()=>{const g=new Set(Object.keys(e.state.exclusionRanges??{})),p=u.find(y=>!g.has(y));p&&f({exclusionRanges:{...e.state.exclusionRanges??{},[p]:{}}})},disabled:u.every(g=>g in(e.state.exclusionRanges??{})),children:"Add exclusion"})]})]}),m.jsxs("div",{children:[m.jsx(Ue,{children:"Major IDs (quick picks)"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(g=>m.jsx(ot,{active:e.state.majorIds.includes(g),onClick:()=>f({majorIds:zy(e.state.majorIds,g)}),title:g,children:g},g))})]}),m.jsxs("div",{className:"wb-card p-2",children:[m.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Filter Presets"}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>{const g=window.prompt("Preset name?")?.trim();if(!g)return;const p=[{name:g,state:e.state},...n.filter(y=>y.name.toLowerCase()!==g.toLowerCase())].slice(0,20);l(p)},children:"Save"}),m.jsx(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.setState(Yn),children:"Reset"})]})]}),m.jsx("div",{className:"flex flex-wrap gap-2",children:n.length===0?m.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:"No saved presets yet."}):n.map(g=>m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(ot,{onClick:()=>e.setState(g.state),children:g.name}),m.jsx("button",{className:"rounded-md border border-[var(--wb-border)] px-1.5 py-0.5 text-xs text-[var(--wb-muted)] hover:bg-white/5",onClick:()=>l(p=>p.filter(y=>y.name!==g.name)),title:`Delete ${g.name}`,children:"x"})]},g.name))})]}),e.state.resultsBelowBuild?null:m.jsx(ix,{catalog:e.catalog,result:e.result,selectedSlot:e.selectedSlot,state:e.state,loading:e.loading,onPin:e.onPin,onEquip:e.onEquip,onHover:e.onHover})]})})}const WC={slotStatus:{},warnings:{messages:[]},aggregated:{hpTotal:0,hprTotal:0,mr:0,ms:0,ls:0,speed:0,skillPoints:{str:0,dex:0,int:0,def:0,agi:0},skillReqs:{str:0,dex:0,int:0,def:0,agi:0},defenses:{e:0,t:0,w:0,f:0,a:0},offense:{baseDps:0,spellPct:0,spellRaw:0,meleePct:0,meleeRaw:0,elemDamPct:0,genericDamPct:0,offenseScore:0}},derived:{dpsProxy:0,spellProxy:0,meleeProxy:0,ehpProxy:0,reqTotal:0,skillPointTotal:0,legacyBaseDps:0,legacyEhp:0,legacyEhpNoAgi:0,skillpointFeasible:!0,assignedSkillPointsRequired:0}};function Of(e){let n=Number.isFinite(e)?e:0;if(n<=0)return 0;n>=150&&(n=150);const l=.9908;return l/(1-l)*(1-Math.pow(l,n))/100}const XC=.867,QC=.951,JC=90;function eR(e){return Math.max(1,Math.min(106,Math.round(e||1)))*5+5}function tR(e){const n=Math.max(1,Math.min(106,Math.round(e||1)));return n>=101?200:(n-1)*2}function nR(e){switch(e){case"relik":return .6;case"bow":return .7;case"wand":return .8;case"dagger":case"spear":return 1;default:return 1}}function aR(e){const n=Math.max(5,e.totalHp),l=Of(e.defSkillPoints)*XC,s=Of(e.agiSkillPoints)*QC,c=2-nR(e.weaponType),f=(100-JC)/100*s+(1-s)*(1-l),g=1-l,p=n/Math.max(1e-9,f)/Math.max(1e-9,c),y=n/Math.max(1e-9,g)/Math.max(1e-9,c);return{withAgi:p,noAgi:y}}function lR(e){return[e.numeric.reqStr,e.numeric.reqDex,e.numeric.reqInt,e.numeric.reqDef,e.numeric.reqAgi]}function sR(e){return[e.numeric.spStr,e.numeric.spDex,e.numeric.spInt,e.numeric.spDef,e.numeric.spAgi]}function iR(e,n){return[e[0]+n[0],e[1]+n[1],e[2]+n[2],e[3]+n[3],e[4]+n[4]]}function rR(e){return e[0]+e[1]+e[2]+e[3]+e[4]}function Oy(e,n){for(let l=0;l<5;l++)if(e[l]>n[l])return!1;return!0}function oR(e,n){for(const l of e)if(Oy(l.assigned,n.assigned))return;for(let l=e.length-1;l>=0;l--)Oy(n.assigned,e[l].assigned)&&e.splice(l,1);e.push(n)}function cR(e,n,l={}){if(e.length===0)return{feasible:!0,assignedTotal:0,assignedByStat:[0,0,0,0,0]};const s=tR(n),r=l.extraBaseSkillPoints??[0,0,0,0,0],c=e.length,u=e.map(lR),f=e.map(sR),g=1<<c,p=Array.from({length:g},()=>[0,0,0,0,0]);for(let N=1;N<g;N++){const _=N&-N,M=Math.log2(_)|0;p[N]=iR(p[N^_],f[M])}const y=new Array(g);y[0]=[{assigned:[0,0,0,0,0],assignedTotal:0}];for(let N=0;N<g;N++){const _=y[N];if(!_||_.length===0)continue;const M=p[N];for(const R of _)for(let I=0;I<c;I++){if((N&1<<I)!==0)continue;const O=[...R.assigned];let L=!0;for(let F=0;F<5;F++){const ie=R.assigned[F]+M[F]+(r[F]??0),re=u[I][F];if(re>ie&&(O[F]+=re-ie),O[F]>100){L=!1;break}}if(!L)continue;const H=rR(O);if(H>s)continue;const A=N|1<<I,D=y[A]??=[];oR(D,{assigned:O,assignedTotal:H})}}const v=y[g-1];if(!v||v.length===0)return{feasible:!1,assignedTotal:1/0,assignedByStat:null};let x=1/0,S=null;for(const N of v)N.assignedTotal<x&&(x=N.assignedTotal,S=[...N.assigned]);return{feasible:Number.isFinite(x),assignedTotal:x,assignedByStat:Number.isFinite(x)?S:null}}function ph(e,n,l,s={}){const r=[];for(const c of tt){const u=e[c];if(u==null)continue;const f=n.itemsById.get(u);f&&r.push(f)}return cR(r,l,s)}function uR(e,n){const l={};for(const s of tt){const r=e.slots[s];if(r==null)continue;const c=n.itemsById.get(r);c&&(l[s]=c)}return l}function nc(e,n,l={}){const s=uR(e,n),r=structuredClone(WC),c=r.warnings.messages;let u=null;for(const ce of tt){const z=s[ce];if(!z)continue;ce==="weapon"&&(u=z.type),r.aggregated.hpTotal+=z.numeric.hp+z.numeric.hpBonus,r.aggregated.hprTotal+=z.numeric.hprRaw+z.numeric.hprPct,r.aggregated.mr+=z.numeric.mr,r.aggregated.ms+=z.numeric.ms,r.aggregated.ls+=z.numeric.ls,r.aggregated.speed+=z.numeric.spd,r.aggregated.skillPoints.str+=z.numeric.spStr,r.aggregated.skillPoints.dex+=z.numeric.spDex,r.aggregated.skillPoints.int+=z.numeric.spInt,r.aggregated.skillPoints.def+=z.numeric.spDef,r.aggregated.skillPoints.agi+=z.numeric.spAgi,r.aggregated.skillReqs.str=Math.max(r.aggregated.skillReqs.str,z.numeric.reqStr),r.aggregated.skillReqs.dex=Math.max(r.aggregated.skillReqs.dex,z.numeric.reqDex),r.aggregated.skillReqs.int=Math.max(r.aggregated.skillReqs.int,z.numeric.reqInt),r.aggregated.skillReqs.def=Math.max(r.aggregated.skillReqs.def,z.numeric.reqDef),r.aggregated.skillReqs.agi=Math.max(r.aggregated.skillReqs.agi,z.numeric.reqAgi),r.aggregated.defenses.e+=z.numeric.eDef,r.aggregated.defenses.t+=z.numeric.tDef,r.aggregated.defenses.w+=z.numeric.wDef,r.aggregated.defenses.f+=z.numeric.fDef,r.aggregated.defenses.a+=z.numeric.aDef,r.aggregated.offense.baseDps+=z.numeric.baseDps,r.aggregated.offense.spellPct+=z.numeric.sdPct,r.aggregated.offense.spellRaw+=z.numeric.sdRaw,r.aggregated.offense.meleePct+=z.numeric.mdPct,r.aggregated.offense.meleeRaw+=z.numeric.mdRaw,r.aggregated.offense.elemDamPct+=z.numeric.eDamPct+z.numeric.tDamPct+z.numeric.wDamPct+z.numeric.fDamPct+z.numeric.aDamPct,r.aggregated.offense.genericDamPct+=z.numeric.damPct+z.numeric.rDamPct+z.numeric.nDamPct,r.aggregated.offense.offenseScore+=z.roughScoreFields.offense;const ue=z.classReq,de=!ue||!e.characterClass||ue===e.characterClass,k=z.level<=e.level,G=z.numeric.reqStr<=100&&z.numeric.reqDex<=100&&z.numeric.reqInt<=100&&z.numeric.reqDef<=100&&z.numeric.reqAgi<=100;r.slotStatus[ce]={classOk:de,levelOk:k,skillReqsMet:G}}!e.characterClass&&u&&(e.characterClass=Vo(u));for(const ce of tt){const z=s[ce];z&&(ua(ce)!==z.category&&c.push(`${ce} contains incompatible item type (${z.type}).`),z.level>e.level&&c.push(`${z.displayName} requires level ${z.level}.`),e.characterClass&&z.classReq&&z.classReq!==e.characterClass&&c.push(`${z.displayName} requires ${z.classReq}.`),(z.restricted||z.deprecated)&&c.push(`${z.displayName} is restricted/deprecated.`))}const f=r.aggregated.skillReqs.str+r.aggregated.skillReqs.dex+r.aggregated.skillReqs.int+r.aggregated.skillReqs.def+r.aggregated.skillReqs.agi,g=r.aggregated.skillPoints.str+r.aggregated.skillPoints.dex+r.aggregated.skillPoints.int+r.aggregated.skillPoints.def+r.aggregated.skillPoints.agi,p=ph(e.slots,n,e.level,l.skillpointFeasibility),{spellPct:y,spellRaw:v,meleePct:x,meleeRaw:S,baseDps:N,elemDamPct:_,genericDamPct:M}=r.aggregated.offense,R=r.aggregated.skillPoints,O=1+Of(R.str),L=(N*(1+(y+_+M)/100)+v)*O,H=(N*(1+(x+_+M)/100)+S)*O,A=H+L+r.aggregated.speed*.8,D=r.aggregated.defenses.e+r.aggregated.defenses.t+r.aggregated.defenses.w+r.aggregated.defenses.f+r.aggregated.defenses.a,F=r.aggregated.hpTotal+D*.45+r.aggregated.hprTotal*2+Math.max(0,r.aggregated.skillPoints.def)*12+Math.max(0,r.aggregated.skillPoints.agi)*10,ie=r.aggregated.offense.baseDps,re=eR(e.level)+r.aggregated.hpTotal,Q=aR({totalHp:re,defSkillPoints:r.aggregated.skillPoints.def,agiSkillPoints:r.aggregated.skillPoints.agi,weaponType:u});return r.derived={dpsProxy:A,spellProxy:L,meleeProxy:H,ehpProxy:F,reqTotal:f,skillPointTotal:g,legacyBaseDps:ie,legacyEhp:Q.withAgi,legacyEhpNoAgi:Q.noAgi,skillpointFeasible:p.feasible,assignedSkillPointsRequired:Number.isFinite(p.assignedTotal)?p.assignedTotal:0},p.feasible||c.push(`Skill requirements are not satisfiable at level ${e.level} (estimated assigned SP exceeds available or equip order is invalid).`),r}function dR(e,n){return{dpsProxy:n.derived.dpsProxy-e.derived.dpsProxy,ehpProxy:n.derived.ehpProxy-e.derived.ehpProxy,legacyBaseDps:n.derived.legacyBaseDps-e.derived.legacyBaseDps,legacyEhp:n.derived.legacyEhp-e.derived.legacyEhp,hpTotal:n.aggregated.hpTotal-e.aggregated.hpTotal,speed:n.aggregated.speed-e.aggregated.speed,skillPointTotal:n.derived.skillPointTotal-e.derived.skillPointTotal}}function ht(e){return Number.isFinite(e)?Math.round(e).toLocaleString():"-"}function fR(e){const n=e.snapshot.slots.weapon;return n==null?null:e.catalog.itemsById.get(n)??null}function hR(e){const n=e.snapshot.comparePreview;if(n.itemId!=null){const s=e.catalog.itemsById.get(n.itemId);if(s){const r=n.slot?`Compare Preview  ${Go(n.slot)}`:"Compare Preview";return{item:s,source:r}}}if(e.snapshot.selectedSlot){const s=e.snapshot.slots[e.snapshot.selectedSlot];if(s!=null){const r=e.catalog.itemsById.get(s);if(r)return{item:r,source:`Selected Slot  ${Go(e.snapshot.selectedSlot)}`}}}const l=fR(e);return l?{item:l,source:"Equipped Weapon"}:null}function mR(e){const[n,l]=w.useState(!1),s=e.compareSummary?dR(e.summary,e.compareSummary):null,r=e.spellPreview?.melee??null,c=hR(e);return m.jsx(Hs,{className:"flex min-h-0 flex-col",title:"Live Build Summary",headerRight:null,children:m.jsxs("div",{className:"flex flex-col gap-3 p-3",children:[c?m.jsxs("div",{className:"wb-card p-2.5",children:[m.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-xs uppercase tracking-wide text-[var(--wb-muted)]",children:"Focused Item"}),m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:c.source})]}),m.jsx(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>l(u=>!u),children:n?"Hide Stats":"Show Stats"})]}),m.jsx(Sc,{item:c.item,compact:!0,dense:!0,showDetails:n})]}):m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs text-[var(--wb-muted)]",children:"Select or hover an item to inspect it here."}),e.abilityTreeSummary?m.jsxs("div",{className:["rounded-xl border p-3 text-xs",e.abilityTreeSummary.hasErrors?"border-amber-400/30 bg-amber-400/8 text-amber-100":"border-emerald-400/20 bg-emerald-400/8 text-emerald-100"].join(" "),children:[m.jsxs("div",{className:"mb-1 flex items-center justify-between gap-2",children:[m.jsxs("div",{className:"font-semibold",children:["Ability Tree (",e.abilityTreeSummary.className,")"]}),m.jsx(Me,{variant:"ghost",className:"px-2 py-1 text-xs",onClick:e.actions.onOpenAbilityTree,children:"Edit"})]}),m.jsxs("div",{children:["AP ",e.abilityTreeSummary.apUsed,"/",e.abilityTreeSummary.apCap,"  ",e.abilityTreeSummary.selectedCount," abilities selected"]}),e.abilityTreeSummary.hasErrors?m.jsx("div",{className:"mt-1",children:"Tree has validation issues (dependencies/blockers/AP)."}):null]}):null,m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Melee DPS"}),m.jsxs("div",{className:"mt-1 flex items-end justify-between gap-2",children:[m.jsx("div",{className:"text-xl font-semibold text-amber-200",children:ht(r?.dps??e.summary.derived.legacyBaseDps)}),s?.legacyBaseDps!=null?m.jsxs("div",{className:["text-xs",s.legacyBaseDps>0?"text-emerald-300":s.legacyBaseDps<0?"text-rose-300":"text-[var(--wb-muted)]"].join(" "),children:[s.legacyBaseDps>0?"+":"",Math.round(s.legacyBaseDps).toLocaleString()]}):null]}),m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:[r?`Legacy melee DPS (${r.attackSpeedTier})  Per Attack ${ht(r.perAttackAverage)}`:"Legacy melee DPS preview unavailable (equip a weapon and valid ability tree selection)."," "," Melee % / Raw ",m.jsx("span",{className:"text-amber-200/90",children:ht(e.summary.aggregated.offense.meleePct)})," / ",m.jsx("span",{className:"text-amber-200/90",children:ht(e.summary.aggregated.offense.meleeRaw)})]})]}),e.spellPreview?m.jsxs("div",{className:"wb-card p-3",children:[m.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Spells (ATree)"}),m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[e.spellPreview.spells.length," entries"]})]}),e.spellPreview.notes.length>0?m.jsx("div",{className:"mb-2 rounded-lg border border-amber-400/20 bg-amber-400/5 p-2 text-xs text-amber-100",children:e.spellPreview.notes.join(" ")}):null,e.spellPreview.spells.length===0?m.jsx("div",{className:"rounded-lg border border-dashed border-[var(--wb-border-muted)] p-2 text-xs text-[var(--wb-muted)]",children:"No spell damage entries yet. Select active ability-tree spell nodes (roots / spell upgrades)."}):m.jsx(Zs,{className:"max-h-[36vh] lg:max-h-[44vh]",children:m.jsx("div",{className:"grid gap-2 pr-1",children:e.spellPreview.spells.map(u=>m.jsxs("div",{className:"rounded-lg border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs",children:[m.jsxs("div",{className:"font-semibold",children:[u.name,m.jsxs("span",{className:"ml-1 text-[var(--wb-muted)]",children:["(",u.displayPartName,")"]})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("div",{className:u.isHealing?"text-emerald-200":"text-amber-200",children:[Math.round(u.averageDisplayValue).toLocaleString()," ",u.isHealing?"heal":"avg dmg"]}),u.manaCost!=null?m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[u.manaCost.toFixed(2)," mana"]}):null]})]}),m.jsx("div",{className:"mt-1 grid gap-1 text-xs text-[var(--wb-muted)]",children:u.parts.filter(f=>f.display).map(f=>m.jsxs("div",{className:"flex items-center justify-between gap-2",children:[m.jsx("span",{className:"truncate",children:f.name}),m.jsx("span",{className:f.type==="heal"?"text-emerald-200":"text-amber-200",children:Math.round(f.averageTotal??0).toLocaleString()})]},f.name))})]},`${u.baseSpell}-${u.name}`))})})]}):null,m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsx(Ao,{label:"Base DPS",value:ht(e.summary.derived.legacyBaseDps),delta:s?.legacyBaseDps??null,valueClassName:"text-amber-200"}),m.jsx(Ao,{label:"Effective HP",value:ht(e.summary.derived.legacyEhp),delta:s?.legacyEhp??null,valueClassName:"text-emerald-200"}),m.jsx(Ao,{label:"Req Total",value:ht(e.summary.derived.reqTotal)}),m.jsx(Ao,{label:"SP Total",value:ht(e.summary.derived.skillPointTotal),delta:s?.skillPointTotal??null})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 px-3 py-2",children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"SP Feasibility:"})," ",m.jsx("span",{className:e.summary.derived.skillpointFeasible?"text-emerald-200":"text-rose-200",children:e.summary.derived.skillpointFeasible?"Wearable":"Invalid / Not Wearable"})]}),m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 px-3 py-2",children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Assigned SP Needed:"})," ",m.jsx("span",{children:ht(e.summary.derived.assignedSkillPointsRequired)})]})]}),e.compareSummary&&e.compareSlot?m.jsxs("div",{className:"rounded-xl border border-emerald-400/30 bg-emerald-400/8 p-3 text-xs text-emerald-100",children:["Compare preview for ",m.jsx("b",{children:Go(e.compareSlot)})]}):null,m.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"text-xs uppercase tracking-wide text-[var(--wb-muted)]",children:"Offense"}),m.jsxs("div",{className:"mt-2 grid gap-1 text-xs",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Legacy Base DPS:"})," ",m.jsx("span",{className:"font-medium text-amber-200",children:ht(e.summary.derived.legacyBaseDps)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Heuristic DPS Proxy:"})," ",m.jsx("span",{className:"text-amber-200/90",children:ht(e.summary.derived.dpsProxy)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Spell % / Raw:"})," ",m.jsx("span",{className:"text-amber-200/80",children:ht(e.summary.aggregated.offense.spellPct)})," / ",m.jsx("span",{className:"text-amber-200/80",children:ht(e.summary.aggregated.offense.spellRaw)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Melee % / Raw:"})," ",m.jsx("span",{className:"text-amber-200/80",children:ht(e.summary.aggregated.offense.meleePct)})," / ",m.jsx("span",{className:"text-amber-200/80",children:ht(e.summary.aggregated.offense.meleeRaw)})]})]})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"text-xs uppercase tracking-wide text-[var(--wb-muted)]",children:"Defense & Utility"}),m.jsxs("div",{className:"mt-2 grid gap-1 text-xs",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Legacy EHP (AGI):"})," ",m.jsx("span",{className:"font-medium text-emerald-200",children:ht(e.summary.derived.legacyEhp)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Legacy EHP (No AGI):"})," ",m.jsx("span",{className:"text-emerald-200/90",children:ht(e.summary.derived.legacyEhpNoAgi)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Heuristic EHP Proxy:"})," ",m.jsx("span",{className:"text-emerald-200/80",children:ht(e.summary.derived.ehpProxy)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"HP Total:"})," ",m.jsx("span",{className:"text-emerald-100/80",children:ht(e.summary.aggregated.hpTotal)})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"HPR Total:"})," ",ht(e.summary.aggregated.hprTotal)]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"MR / MS / LS:"})," ",ht(e.summary.aggregated.mr)," / ",ht(e.summary.aggregated.ms)," / ",ht(e.summary.aggregated.ls)]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-[var(--wb-muted)]",children:"Walk Speed:"})," ",ht(e.summary.aggregated.speed)]})]})]})]}),m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs text-[var(--wb-muted)]",children:"Workbench primary KPIs use legacy-compatible metrics (Base DPS + Effective HP). Ability tree editing is now in Workbench, but these summary metrics still exclude ability-tree effects for now. Proxy values are still used internally for search/Build Solver heuristics."}),m.jsxs("div",{className:"grid gap-2",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Warnings"}),e.summary.warnings.messages.length===0?m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs text-emerald-200",children:"No active warnings."}):m.jsx(Zs,{className:"max-h-32",children:m.jsx("div",{className:"grid gap-2",children:e.summary.warnings.messages.map((u,f)=>m.jsx("div",{className:"rounded-xl border border-amber-400/30 bg-amber-400/8 p-2 text-xs text-amber-100",children:u},`${u}-${f}`))})})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsxs(Me,{variant:"ghost",className:"justify-start",onClick:e.actions.onCopyLegacyLink,disabled:!e.snapshot.legacyHash,children:[m.jsx(th,{size:14,className:"mr-2"}),"Legacy Link"]}),m.jsxs(Me,{variant:"ghost",className:"justify-start",onClick:e.actions.onOpenLegacyBuilder,children:[m.jsx(W_,{size:14,className:"mr-2"}),"Open Legacy"]})]})]})})}function gR(e){const{info:n}=e;return m.jsx("div",{className:"rounded-lg border border-violet-400/40 bg-violet-400/8 px-3 py-2",children:m.jsxs("div",{className:"flex items-center justify-between gap-2",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"text-xs font-semibold text-violet-100",children:["Crafted ",n.type.charAt(0).toUpperCase()+n.type.slice(1)]}),m.jsxs("div",{className:"mt-0.5 text-[10px] text-violet-200/60",children:["Lv. ",n.lvl," | ",n.hash.slice(0,20),"..."]})]}),m.jsx(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:e.onClear,title:"Remove crafted item",children:m.jsx(P0,{size:12})})]})})}function Py(e){const{isOver:n,setNodeRef:l}=A0({id:`slot:${e.slot}`,data:{droppableType:"slot",slot:e.slot}}),s=e.store.slots[e.slot],r=s!=null?e.catalog.itemsById.get(s):void 0,c=e.store.craftedSlots[e.slot],u=R0({id:r?`slot-item:${e.slot}:${r.id}`:`slot-empty:${e.slot}`,data:r?{dragItem:{kind:"slot",itemId:r.id,sourceSlot:e.slot}}:void 0,disabled:!r});return m.jsxs("div",{ref:l,className:bt("rounded-xl border p-2",n?"border-emerald-400/70 bg-emerald-400/8":"border-[var(--wb-border-muted)] bg-black/15"),onMouseEnter:()=>e.store.setSelectedSlot(e.slot),children:[m.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:Go(e.slot)}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.toggleLock(e.slot),title:"Lock slot",children:m.jsx(O0,{size:12,className:bt(e.store.locks[e.slot]&&"text-emerald-300")})}),m.jsx(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.moveSlotToBin(e.slot),title:"Move to bin",children:m.jsx(bE,{size:12})})]})]}),r?m.jsx("div",{ref:u.setNodeRef,style:{transform:Ho.Translate.toString(u.transform),opacity:u.isDragging?.45:1},...u.listeners,...u.attributes,children:m.jsx(Sc,{item:r,compact:!0,dense:!0,showDetails:e.showItemDetails,dragData:{kind:"slot",itemId:r.id,sourceSlot:e.slot},locked:e.store.locks[e.slot],onHover:f=>e.onHoverItem?.(f?r.id:null,f?e.slot:null)})}):c?m.jsx(gR,{info:c,onClear:()=>e.store.clearCraftedSlot(e.slot)}):m.jsxs("div",{className:"rounded-lg border border-dashed border-[var(--wb-border)] px-3 py-3 text-center text-xs text-[var(--wb-muted)]",children:["Drop a ",ua(e.slot)," item here"]})]})}function By(e){const{isOver:n,setNodeRef:l}=A0({id:`bin:${e.category}`,data:{droppableType:"bin",category:e.category}}),s=e.store.binsByCategory[e.category].map(r=>e.catalog.itemsById.get(r)).filter(r=>!!r);return m.jsxs("div",{className:"flex min-w-0 flex-col gap-1.5",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2",children:[m.jsxs("div",{className:"text-xs font-semibold",children:[nh(e.category)," Bin"]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:s.length}),m.jsxs(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.clearCategory(e.category),children:[m.jsx(P0,{size:12,className:"mr-1 inline"}),"Clear"]})]})]}),m.jsx("div",{ref:l,className:bt("wb-grid-backdrop min-h-20 rounded-xl border p-1.5",n?"border-emerald-400/70 bg-emerald-400/8":"border-[var(--wb-border-muted)] bg-black/10"),children:s.length===0?m.jsxs("div",{className:"p-2 text-[11px] text-[var(--wb-muted)]",children:["Drop items here for ",e.category,"."]}):m.jsx("div",{className:"grid max-h-40 gap-1.5 overflow-auto pr-0.5 wb-scrollbar",children:s.map(r=>m.jsx(Sc,{item:r,compact:!0,dense:!0,showDetails:e.showItemDetails,dragData:{kind:"bin",itemId:r.id,sourceCategory:e.category},onRemove:()=>e.store.removePinnedItem(e.category,r.id),onHover:c=>{const u=e.store.selectedSlot&&ua(e.store.selectedSlot)===e.category?e.store.selectedSlot:null;e.onHoverItem?.(c?r.id:null,c?u:null)}},`${e.category}-${r.id}`))})})]})}function pR(e){const[n,l]=w.useState(!1),s=w.useMemo(()=>[["helmet","chestplate","leggings","boots"],["ring1","ring2","bracelet","necklace"]],[]),r=w.useMemo(()=>[{key:"armor",title:"Armor Shelf",categories:["helmet","chestplate","leggings","boots"]},{key:"accessories",title:"Accessory Shelf",categories:["ring","bracelet","necklace"]},{key:"weapon",title:"Weapon Shelf",categories:["weapon"]}].filter(c=>c.key!=="weapon"),[]);return m.jsx(Hs,{className:"flex min-h-0 flex-col",title:"Build",headerRight:m.jsxs(m.Fragment,{children:[m.jsx(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.undo(),children:"Undo"}),m.jsx(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.redo(),children:"Redo"}),m.jsx(Me,{className:"px-2 py-1 text-xs",variant:n?"primary":"ghost",onClick:()=>l(c=>!c),children:n?"Hide Details":"Item Details"}),m.jsx(Me,{className:"px-2 py-1 text-xs",variant:"ghost",onClick:()=>e.store.clearAll(),children:"Clear All"})]}),children:m.jsxs("div",{className:"grid min-h-0 flex-1 grid-rows-[auto_1fr_auto] gap-2 p-2.5",children:[m.jsxs("div",{className:"grid gap-1.5 xl:grid-cols-[minmax(0,1fr)_minmax(0,1fr)_minmax(0,1.05fr)]",children:[s.map((c,u)=>m.jsx("div",{className:"grid gap-1.5",children:c.map(f=>m.jsx(Py,{slot:f,catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem},f))},u)),m.jsxs("div",{className:"grid content-start gap-1.5",children:[m.jsx(Py,{slot:"weapon",catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem}),m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[m.jsxs("div",{className:"mb-1.5 flex items-center justify-between gap-2",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:"Weapon Shelf"}),m.jsx("div",{className:"text-[11px] text-[var(--wb-muted)]",children:"Pinned weapon candidates"})]}),m.jsx(By,{category:"weapon",catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem})]})]})]}),m.jsx(Zs,{className:"min-h-0 pr-1",children:m.jsx("div",{className:"grid gap-3",children:r.map(c=>m.jsxs("div",{className:"grid gap-1.5",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2",children:[m.jsx("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--wb-muted)]",children:c.title}),m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:c.categories.map(nh).join("  ")})]}),m.jsx("div",{className:bt("grid gap-2",c.categories.length===1?"grid-cols-1":c.categories.length===3?"lg:grid-cols-3":"md:grid-cols-2 xl:grid-cols-4"),children:c.categories.map(u=>m.jsx(By,{category:u,catalog:e.catalog,store:e.store,showItemDetails:n,onHoverItem:e.onHoverItem},u))})]},c.key))})}),m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:m.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-3",children:[m.jsxs(Me,{variant:"ghost",className:"justify-start",onClick:e.onShareWorkbench,children:[m.jsx(th,{size:14,className:"mr-2"}),"Share"]}),m.jsxs(Me,{variant:"ghost",className:"justify-start",onClick:e.onExportWorkbench,children:[m.jsx(V_,{size:14,className:"mr-2"}),"Export"]}),m.jsxs(Me,{variant:"ghost",className:"justify-start",onClick:e.onImportWorkbench,children:[m.jsx(SE,{size:14,className:"mr-2"}),"Import"]})]})})]})})}function Lo(e){if(!e)return null;const n=e.startsWith("#")?e.slice(1):e;return n.trim()?n:null}function Iy(e){const n=Lo(e),l="../builder/";return n?`${l}#${n}`:l}const vR=[["helmet","helmet-choice"],["chestplate","chestplate-choice"],["leggings","leggings-choice"],["boots","boots-choice"],["ring1","ring1-choice"],["ring2","ring2-choice"],["bracelet","bracelet-choice"],["necklace","necklace-choice"],["weapon","weapon-choice"]];function Ly(e){const n=e.trim();if(!n)return null;if(n.startsWith("#"))return Lo(n);try{const l=new URL(n,window.location.origin);return Lo(l.hash)}catch{return Lo(n)}}class yR{isSupported(n){return Ly(n)!==null}async encodeLegacyHash(n){if(n.legacyHash)return n.legacyHash;throw new Error("Legacy hash encoding is only available for imported legacy builds in Workbench v1. Use Workbench share link or open legacy builder for full encode.")}async decodeLegacyHash(n){const l=Ly(n);if(!l)throw new Error("No legacy hash found to decode");if(typeof document>"u")return{legacyHash:l,level:null,slots:{}};const s=document.createElement("iframe");s.style.position="fixed",s.style.left="-99999px",s.style.width="1200px",s.style.height="900px",s.style.opacity="0",s.src=`../builder/#${l}`,document.body.appendChild(s);const r=3e4,c=Date.now();try{return await new Promise((f,g)=>{const p=window.setInterval(()=>{try{if(!s.contentDocument)return;const y=s.contentDocument,v=y.getElementById("weapon-choice"),x=y.getElementById("level-choice");if(!v||!x){Date.now()-c>r&&(window.clearInterval(p),g(new Error("Timed out waiting for legacy builder UI")));return}const S={};for(const[R,I]of vR){const L=y.getElementById(I)?.value?.trim();L&&(S[R]=L)}if(!S.weapon&&Date.now()-c<2e3)return;const _=x.value?.trim(),M=_?Number(_):null;window.clearInterval(p),f({legacyHash:l,level:Number.isFinite(M??NaN)?M:null,slots:S,sourceUrl:s.src})}catch(y){window.clearInterval(p),g(y)}},250)})}finally{s.remove()}}}const cf=new yR,qy=e=>{let n;const l=new Set,s=(p,y)=>{const v=typeof p=="function"?p(n):p;if(!Object.is(v,n)){const x=n;n=y??(typeof v!="object"||v===null)?v:Object.assign({},n,v),l.forEach(S=>S(n,x))}},r=()=>n,f={setState:s,getState:r,getInitialState:()=>g,subscribe:p=>(l.add(p),()=>l.delete(p))},g=n=e(s,r,f);return f},bR=(e=>e?qy(e):qy),xR=e=>e;function SR(e,n=xR){const l=Ut.useSyncExternalStore(e.subscribe,Ut.useCallback(()=>n(e.getState()),[e,n]),Ut.useCallback(()=>n(e.getInitialState()),[e,n]));return Ut.useDebugValue(l),l}const wR=e=>{const n=bR(e),l=s=>SR(n,s);return Object.assign(l,n),l},_R=(e=>wR);var rx=Symbol.for("immer-nothing"),Uy=Symbol.for("immer-draftable"),jn=Symbol.for("immer-state");function ea(e,...n){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var nr=Object.getPrototypeOf;function Ys(e){return!!e&&!!e[jn]}function Ul(e){return e?ox(e)||Array.isArray(e)||!!e[Uy]||!!e.constructor?.[Uy]||or(e)||_c(e):!1}var ER=Object.prototype.constructor.toString(),$y=new WeakMap;function ox(e){if(!e||typeof e!="object")return!1;const n=Object.getPrototypeOf(e);if(n===null||n===Object.prototype)return!0;const l=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;if(l===Object)return!0;if(typeof l!="function")return!1;let s=$y.get(l);return s===void 0&&(s=Function.toString.call(l),$y.set(l,s)),s===ER}function ac(e,n,l=!0){wc(e)===0?(l?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{n(r,e[r],e)}):e.forEach((s,r)=>n(r,s,e))}function wc(e){const n=e[jn];return n?n.type_:Array.isArray(e)?1:or(e)?2:_c(e)?3:0}function Pf(e,n){return wc(e)===2?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function cx(e,n,l){const s=wc(e);s===2?e.set(n,l):s===3?e.add(l):e[n]=l}function NR(e,n){return e===n?e!==0||1/e===1/n:e!==e&&n!==n}function or(e){return e instanceof Map}function _c(e){return e instanceof Set}function Il(e){return e.copy_||e.base_}function Bf(e,n){if(or(e))return new Map(e);if(_c(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const l=ox(e);if(n===!0||n==="class_only"&&!l){const s=Object.getOwnPropertyDescriptors(e);delete s[jn];let r=Reflect.ownKeys(s);for(let c=0;c<r.length;c++){const u=r[c],f=s[u];f.writable===!1&&(f.writable=!0,f.configurable=!0),(f.get||f.set)&&(s[u]={configurable:!0,writable:!0,enumerable:f.enumerable,value:e[u]})}return Object.create(nr(e),s)}else{const s=nr(e);if(s!==null&&l)return{...e};const r=Object.create(s);return Object.assign(r,e)}}function vh(e,n=!1){return Ec(e)||Ys(e)||!Ul(e)||(wc(e)>1&&Object.defineProperties(e,{set:ko,add:ko,clear:ko,delete:ko}),Object.freeze(e),n&&Object.values(e).forEach(l=>vh(l,!0))),e}function TR(){ea(2)}var ko={value:TR};function Ec(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var MR={};function $l(e){const n=MR[e];return n||ea(0,e),n}var ar;function ux(){return ar}function DR(e,n){return{drafts_:[],parent_:e,immer_:n,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Hy(e,n){n&&($l("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=n)}function If(e){Lf(e),e.drafts_.forEach(jR),e.drafts_=null}function Lf(e){e===ar&&(ar=e.parent_)}function Zy(e){return ar=DR(ar,e)}function jR(e){const n=e[jn];n.type_===0||n.type_===1?n.revoke_():n.revoked_=!0}function Fy(e,n){n.unfinalizedDrafts_=n.drafts_.length;const l=n.drafts_[0];return e!==void 0&&e!==l?(l[jn].modified_&&(If(n),ea(4)),Ul(e)&&(e=lc(n,e),n.parent_||sc(n,e)),n.patches_&&$l("Patches").generateReplacementPatches_(l[jn].base_,e,n.patches_,n.inversePatches_)):e=lc(n,l,[]),If(n),n.patches_&&n.patchListener_(n.patches_,n.inversePatches_),e!==rx?e:void 0}function lc(e,n,l){if(Ec(n))return n;const s=e.immer_.shouldUseStrictIteration(),r=n[jn];if(!r)return ac(n,(c,u)=>Yy(e,r,n,c,u,l),s),n;if(r.scope_!==e)return n;if(!r.modified_)return sc(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const c=r.copy_;let u=c,f=!1;r.type_===3&&(u=new Set(c),c.clear(),f=!0),ac(u,(g,p)=>Yy(e,r,c,g,p,l,f),s),sc(e,c,!1),l&&e.patches_&&$l("Patches").generatePatches_(r,l,e.patches_,e.inversePatches_)}return r.copy_}function Yy(e,n,l,s,r,c,u){if(r==null||typeof r!="object"&&!u)return;const f=Ec(r);if(!(f&&!u)){if(Ys(r)){const g=c&&n&&n.type_!==3&&!Pf(n.assigned_,s)?c.concat(s):void 0,p=lc(e,r,g);if(cx(l,s,p),Ys(p))e.canAutoFreeze_=!1;else return}else u&&l.add(r);if(Ul(r)&&!f){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||n&&n.base_&&n.base_[s]===r&&f)return;lc(e,r),(!n||!n.scope_.parent_)&&typeof s!="symbol"&&(or(l)?l.has(s):Object.prototype.propertyIsEnumerable.call(l,s))&&sc(e,r)}}}function sc(e,n,l=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&vh(n,l)}function CR(e,n){const l=Array.isArray(e),s={type_:l?1:0,scope_:n?n.scope_:ux(),modified_:!1,finalized_:!1,assigned_:{},parent_:n,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=s,c=yh;l&&(r=[s],c=lr);const{revoke:u,proxy:f}=Proxy.revocable(r,c);return s.draft_=f,s.revoke_=u,f}var yh={get(e,n){if(n===jn)return e;const l=Il(e);if(!Pf(l,n))return RR(e,l,n);const s=l[n];return e.finalized_||!Ul(s)?s:s===uf(e.base_,n)?(df(e),e.copy_[n]=Uf(s,e)):s},has(e,n){return n in Il(e)},ownKeys(e){return Reflect.ownKeys(Il(e))},set(e,n,l){const s=dx(Il(e),n);if(s?.set)return s.set.call(e.draft_,l),!0;if(!e.modified_){const r=uf(Il(e),n),c=r?.[jn];if(c&&c.base_===l)return e.copy_[n]=l,e.assigned_[n]=!1,!0;if(NR(l,r)&&(l!==void 0||Pf(e.base_,n)))return!0;df(e),qf(e)}return e.copy_[n]===l&&(l!==void 0||n in e.copy_)||Number.isNaN(l)&&Number.isNaN(e.copy_[n])||(e.copy_[n]=l,e.assigned_[n]=!0),!0},deleteProperty(e,n){return uf(e.base_,n)!==void 0||n in e.base_?(e.assigned_[n]=!1,df(e),qf(e)):delete e.assigned_[n],e.copy_&&delete e.copy_[n],!0},getOwnPropertyDescriptor(e,n){const l=Il(e),s=Reflect.getOwnPropertyDescriptor(l,n);return s&&{writable:!0,configurable:e.type_!==1||n!=="length",enumerable:s.enumerable,value:l[n]}},defineProperty(){ea(11)},getPrototypeOf(e){return nr(e.base_)},setPrototypeOf(){ea(12)}},lr={};ac(yh,(e,n)=>{lr[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}});lr.deleteProperty=function(e,n){return lr.set.call(this,e,n,void 0)};lr.set=function(e,n,l){return yh.set.call(this,e[0],n,l,e[0])};function uf(e,n){const l=e[jn];return(l?Il(l):e)[n]}function RR(e,n,l){const s=dx(n,l);return s?"value"in s?s.value:s.get?.call(e.draft_):void 0}function dx(e,n){if(!(n in e))return;let l=nr(e);for(;l;){const s=Object.getOwnPropertyDescriptor(l,n);if(s)return s;l=nr(l)}}function qf(e){e.modified_||(e.modified_=!0,e.parent_&&qf(e.parent_))}function df(e){e.copy_||(e.copy_=Bf(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var AR=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(n,l,s)=>{if(typeof n=="function"&&typeof l!="function"){const c=l;l=n;const u=this;return function(g=c,...p){return u.produce(g,y=>l.call(this,y,...p))}}typeof l!="function"&&ea(6),s!==void 0&&typeof s!="function"&&ea(7);let r;if(Ul(n)){const c=Zy(this),u=Uf(n,void 0);let f=!0;try{r=l(u),f=!1}finally{f?If(c):Lf(c)}return Hy(c,s),Fy(r,c)}else if(!n||typeof n!="object"){if(r=l(n),r===void 0&&(r=n),r===rx&&(r=void 0),this.autoFreeze_&&vh(r,!0),s){const c=[],u=[];$l("Patches").generateReplacementPatches_(n,r,c,u),s(c,u)}return r}else ea(1,n)},this.produceWithPatches=(n,l)=>{if(typeof n=="function")return(u,...f)=>this.produceWithPatches(u,g=>n(g,...f));let s,r;return[this.produce(n,l,(u,f)=>{s=u,r=f}),s,r]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){Ul(e)||ea(8),Ys(e)&&(e=kR(e));const n=Zy(this),l=Uf(e,void 0);return l[jn].isManual_=!0,Lf(n),l}finishDraft(e,n){const l=e&&e[jn];(!l||!l.isManual_)&&ea(9);const{scope_:s}=l;return Hy(s,n),Fy(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let l;for(l=n.length-1;l>=0;l--){const r=n[l];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}l>-1&&(n=n.slice(l+1));const s=$l("Patches").applyPatches_;return Ys(e)?s(e,n):this.produce(e,r=>s(r,n))}};function Uf(e,n){const l=or(e)?$l("MapSet").proxyMap_(e,n):_c(e)?$l("MapSet").proxySet_(e,n):CR(e,n);return(n?n.scope_:ux()).drafts_.push(l),l}function kR(e){return Ys(e)||ea(10,e),fx(e)}function fx(e){if(!Ul(e)||Ec(e))return e;const n=e[jn];let l,s=!0;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,l=Bf(e,n.scope_.immer_.useStrictShallowCopy_),s=n.scope_.immer_.shouldUseStrictIteration()}else l=Bf(e,!0);return ac(l,(r,c)=>{cx(l,r,fx(c))},s),n&&(n.finalized_=!1),l}var zR=new AR,OR=zR.produce;const PR=e=>(n,l,s)=>(s.setState=(r,c,...u)=>{const f=typeof r=="function"?OR(r):r;return n(f,c,...u)},e(s.setState,l,s)),BR=PR,qo={itemId:null,slot:null};function hx(){return Object.fromEntries(tt.map(e=>[e,null]))}function mx(){return Object.fromEntries(fl.map(e=>[e,[]]))}function IR(){return Object.fromEntries(tt.map(e=>[e,!1]))}function Gy(){return{slots:hx(),craftedSlots:{},binsByCategory:mx(),locks:IR(),level:106,characterClass:null,selectedSlot:"weapon",comparePreview:{...qo},legacyHash:null}}function $f(e){return{slots:{...e.slots},craftedSlots:{...e.craftedSlots},binsByCategory:Object.fromEntries(fl.map(n=>[n,[...e.binsByCategory[n]]])),locks:{...e.locks},level:e.level,characterClass:e.characterClass,selectedSlot:e.selectedSlot,comparePreview:{...e.comparePreview},legacyHash:e.legacyHash}}function an(e){e.undoStack.push($f(e)),e.undoStack.length>100&&e.undoStack.shift(),e.redoStack=[]}function ff(e,n){e.slots={...n.slots},e.craftedSlots={...n.craftedSlots},e.binsByCategory=Object.fromEntries(fl.map(l=>[l,[...n.binsByCategory[l]]])),e.locks={...n.locks},e.level=n.level,e.characterClass=n.characterClass,e.selectedSlot=n.selectedSlot,e.comparePreview={...n.comparePreview},e.legacyHash=n.legacyHash}function hf(e,n){e.includes(n)||e.unshift(n)}const LR=_R()(BR((e,n)=>({...Gy(),undoStack:[],redoStack:[],setLevel(l){e(s=>{an(s),s.level=Math.min(106,Math.max(1,Math.round(l)))})},setCharacterClass(l){e(s=>{an(s),s.characterClass=l})},setSelectedSlot(l){e(s=>{s.selectedSlot=l})},setComparePreview(l){e(s=>{if(!l){s.comparePreview={...qo};return}s.comparePreview={itemId:l.itemId??s.comparePreview.itemId,slot:l.slot??s.comparePreview.slot}})},pinItem(l,s){e(r=>{an(r),hf(r.binsByCategory[l],s)})},removePinnedItem(l,s){e(r=>{an(r),r.binsByCategory[l]=r.binsByCategory[l].filter(c=>c!==s)})},clearCategory(l){e(s=>{an(s),s.binsByCategory[l]=[]})},clearAll(){e(l=>{an(l),l.slots=hx(),l.craftedSlots={},l.binsByCategory=mx(),l.comparePreview={...qo},l.legacyHash=null})},equipItem(l,s){e(r=>{an(r),r.slots[l]=s,delete r.craftedSlots[l],r.selectedSlot=l})},moveSlotToBin(l){e(s=>{const r=s.slots[l];if(r==null)return;an(s);const c=ua(l);hf(s.binsByCategory[c],r),s.slots[l]=null})},swapSlots(l,s){e(r=>{an(r);const c=r.slots[l];r.slots[l]=r.slots[s],r.slots[s]=c})},assignDraggedItemToSlot({targetSlot:l,source:s,itemId:r,sourceCategory:c,sourceSlot:u}){e(f=>{an(f);const g=f.slots[l];f.slots[l]=r,delete f.craftedSlots[l],f.selectedSlot=l,s==="bin"&&c&&(f.binsByCategory[c]=f.binsByCategory[c].filter(p=>p!==r)),s==="slot"&&u&&u!==l&&(f.slots[u]=g??null)})},assignDraggedItemToBin({targetCategory:l,source:s,itemId:r,sourceCategory:c,sourceSlot:u}){e(f=>{an(f),s==="bin"&&c&&(f.binsByCategory[c]=f.binsByCategory[c].filter(g=>g!==r)),s==="slot"&&u&&(f.slots[u]=null),hf(f.binsByCategory[l],r)})},toggleLock(l){e(s=>{an(s),s.locks[l]=!s.locks[l]})},equipCraftedItem(l,s){e(r=>{an(r),r.slots[l]=null,r.craftedSlots[l]=s,r.selectedSlot=l})},clearCraftedSlot(l){e(s=>{an(s),delete s.craftedSlots[l]})},undo(){const l=n(),s=l.undoStack[l.undoStack.length-1];s&&e(r=>{const c=$f(r);r.undoStack.pop(),r.redoStack.push(c),ff(r,s)})},redo(){const l=n(),s=l.redoStack[l.redoStack.length-1];s&&e(r=>{const c=$f(r);r.redoStack.pop(),r.undoStack.push(c),ff(r,s)})},hydrateSnapshot(l){e(s=>{const r=Gy(),c={...r,...l,slots:{...r.slots,...l.slots??{}},craftedSlots:{...r.craftedSlots,...l.craftedSlots??{}},locks:{...r.locks,...l.locks??{}},binsByCategory:{...r.binsByCategory,...l.binsByCategory??{}},comparePreview:{...r.comparePreview,...l.comparePreview??{}}};ff(s,c),s.undoStack=[],s.redoStack=[]})},loadCandidate(l){e(s=>{an(s),s.slots={...l},s.comparePreview={...qo}})},setLegacyHash(l){e(s=>{s.legacyHash=l})}}))),qR=Ji({slots:Vi(pn(),Jn().int().nullable()).optional(),binsByCategory:Vi(pn(),Dn(Jn().int())).optional(),locks:Vi(pn(),Zi()).optional(),level:Jn().int().min(1).max(106).optional(),characterClass:Jo(["Warrior","Assassin","Mage","Archer","Shaman"]).nullable().optional(),selectedSlot:pn().nullable().optional(),legacyHash:pn().nullable().optional()}),UR=Ji({version:pn().nullable().optional(),selectedByClass:Ji({Warrior:Dn(Jn().int()).optional(),Assassin:Dn(Jn().int()).optional(),Mage:Dn(Jn().int()).optional(),Archer:Dn(Jn().int()).optional(),Shaman:Dn(Jn().int()).optional()}).partial().default({})});function gx(e){const n=new TextEncoder().encode(e);let l="";for(const s of n)l+=String.fromCharCode(s);return btoa(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function px(e){const n=e.replace(/-/g,"+").replace(/_/g,"/").padEnd(Math.ceil(e.length/4)*4,"="),l=atob(n),s=Uint8Array.from(l,r=>r.charCodeAt(0));return new TextDecoder().decode(s)}function Vy(e){try{return JSON.parse(e)}catch{return null}}function vx(e){const n=e.searchParams.get("q")??"",l=e.searchParams.get("sort"),s=l?l.split(",").map(R=>R.trim()).filter(Boolean):[],r=e.searchParams.get("sdesc"),c=e.searchParams.get("view"),u=e.searchParams.get("wearLevel"),f=e.searchParams.get("classCompat"),g=e.searchParams.get("excludeRestricted"),p=(e.searchParams.get("cats")??"").split(",").map(R=>R.trim()).filter(Boolean),y=(e.searchParams.get("types")??"").split(",").map(R=>R.trim()).filter(Boolean),v=(e.searchParams.get("tiers")??"").split(",").map(R=>R.trim()).filter(Boolean),x=(e.searchParams.get("classReqs")??"").split(",").map(R=>R.trim()).filter(Boolean),S=(e.searchParams.get("majorIds")??"").split(",").map(R=>R.trim()).filter(Boolean),N=Vy(e.searchParams.get("ranges")??"")??{},_=Vy(e.searchParams.get("excludeRanges")??"")??{},M=e.searchParams.get("resultsBelow");return pb({...Yn,text:n,sortKeys:s.length>0?s:Yn.sortKeys,sortDescending:r===null?Yn.sortDescending:r!=="0",viewMode:c??Yn.viewMode,onlyWearableAtLevel:u?Number(u):Yn.onlyWearableAtLevel,onlyClassCompatible:f==="1",excludeRestricted:g===null?!1:g!=="0",categories:p,types:y,tiers:v,classReqs:x,majorIds:S,numericRanges:N,exclusionRanges:_,resultsBelowBuild:M===null?Yn.resultsBelowBuild:M==="1"})}function yx(e){const n=e.searchParams.get("wb");if(!n)return null;try{const l=px(n),s=qR.parse(JSON.parse(l)),r=Object.fromEntries(tt.map(f=>[f,s.slots?.[f]??null])),c=Object.fromEntries(fl.map(f=>[f,s.binsByCategory?.[f]??[]])),u=Object.fromEntries(tt.map(f=>[f,!!s.locks?.[f]]));return{slots:r,binsByCategory:c,locks:u,level:s.level,characterClass:s.characterClass??null,selectedSlot:s.selectedSlot??void 0,legacyHash:s.legacyHash??null}}catch{return null}}function bx(e){const n=e.searchParams.get("atree");if(!n)return null;try{const l=px(n),s=UR.parse(JSON.parse(l));return{version:s.version??null,selectedByClass:s.selectedByClass}}catch{return null}}function $R(e=window.location){const n=new URL(e.href),l=n.hash?n.hash.slice(1):null;return{search:vx(n),workbenchPatch:yx(n),legacyHash:l||null,mode:n.searchParams.get("mode"),abilityTree:bx(n)}}function xx(e){const n={slots:e.slots,binsByCategory:e.binsByCategory,locks:e.locks,level:e.level,characterClass:e.characterClass,selectedSlot:e.selectedSlot,legacyHash:e.legacyHash};return gx(JSON.stringify(n))}function Ky(e){const n=new URL(window.location.href),{search:l}=e,s=n.searchParams,r=(y,v)=>{v.length===0?s.delete(y):s.set(y,v.join(","))};l.text?s.set("q",l.text):s.delete("q");const c=Yn.sortKeys;!(l.sortKeys?.length===c.length&&l.sortKeys?.every((y,v)=>y===c[v]))&&l.sortKeys?.length?s.set("sort",l.sortKeys.join(",")):s.delete("sort"),l.sortDescending!==Yn.sortDescending?s.set("sdesc",l.sortDescending?"1":"0"):s.delete("sdesc"),l.viewMode!==Yn.viewMode?s.set("view",l.viewMode):s.delete("view"),r("cats",l.categories),r("types",l.types),r("tiers",l.tiers),r("classReqs",l.classReqs),r("majorIds",l.majorIds),l.onlyWearableAtLevel!==null?s.set("wearLevel",String(l.onlyWearableAtLevel)):s.delete("wearLevel"),l.onlyClassCompatible?s.set("classCompat","1"):s.delete("classCompat"),l.excludeRestricted?s.set("excludeRestricted","1"):s.delete("excludeRestricted"),Object.keys(l.numericRanges).length>0?s.set("ranges",JSON.stringify(l.numericRanges)):s.delete("ranges"),Object.keys(l.exclusionRanges??{}).length>0?s.set("excludeRanges",JSON.stringify(l.exclusionRanges)):s.delete("excludeRanges"),l.resultsBelowBuild?s.set("resultsBelow","1"):s.delete("resultsBelow"),s.set("wb",xx(e.workbenchSnapshot)),e.abilityTreeState&&Object.keys(e.abilityTreeState.selectedByClass??{}).length>0?s.set("atree",gx(JSON.stringify({version:e.abilityTreeState.version??null,selectedByClass:e.abilityTreeState.selectedByClass}))):s.delete("atree"),e.mode?s.set("mode",e.mode):s.delete("mode");const p=e.legacyHash??e.workbenchSnapshot.legacyHash;n.hash=p?`#${p}`:"",e.replace?window.history.replaceState({},"",n):window.history.pushState({},"",n)}const oa={legacyBaseDps:1,legacyEhp:.7,dpsProxy:1,spellProxy:0,meleeProxy:0,ehpProxy:.6,speed:.4,sustain:.35,skillPointTotal:.15,reqTotalPenalty:.2},Ca={characterClass:null,level:106,mustIncludeIds:[],excludedIds:[],lockedSlots:{},target:{},allowedTiers:[],requiredMajorIds:[],excludedMajorIds:[],weaponAttackSpeeds:[],minPowderSlots:null,onlyPinnedItems:!1,weights:oa,topN:50,topKPerSlot:80,beamWidth:350,maxStates:12e4,useExhaustiveSmallPool:!0,exhaustiveStateLimit:25e4,allowRestricted:!0};function HR(e){return e.aggregated.hprTotal*.9+e.aggregated.mr*14+e.aggregated.ms*10+e.aggregated.ls*9}function ZR(e,n){let l=0;const{target:s}=n;return typeof s.minLegacyBaseDps=="number"&&e.derived.legacyBaseDps<s.minLegacyBaseDps&&(l+=(s.minLegacyBaseDps-e.derived.legacyBaseDps)*4),typeof s.minLegacyEhp=="number"&&e.derived.legacyEhp<s.minLegacyEhp&&(l+=(s.minLegacyEhp-e.derived.legacyEhp)*.8),typeof s.minDpsProxy=="number"&&e.derived.dpsProxy<s.minDpsProxy&&(l+=(s.minDpsProxy-e.derived.dpsProxy)*4),typeof s.minEhpProxy=="number"&&e.derived.ehpProxy<s.minEhpProxy&&(l+=(s.minEhpProxy-e.derived.ehpProxy)*1.1),typeof s.minMr=="number"&&e.aggregated.mr<s.minMr&&(l+=(s.minMr-e.aggregated.mr)*45),typeof s.minMs=="number"&&e.aggregated.ms<s.minMs&&(l+=(s.minMs-e.aggregated.ms)*35),typeof s.minSpeed=="number"&&e.aggregated.speed<s.minSpeed&&(l+=(s.minSpeed-e.aggregated.speed)*12),typeof s.minSkillPointTotal=="number"&&e.derived.skillPointTotal<s.minSkillPointTotal&&(l+=(s.minSkillPointTotal-e.derived.skillPointTotal)*15),typeof s.maxReqTotal=="number"&&e.derived.reqTotal>s.maxReqTotal&&(l+=(e.derived.reqTotal-s.maxReqTotal)*8),l}function Sx(e,n,l){const s=HR(e),r=e.derived.reqTotal*n.reqTotalPenalty,c=ZR(e,l),u={legacyBaseDps:e.derived.legacyBaseDps*n.legacyBaseDps,legacyEhp:e.derived.legacyEhp*n.legacyEhp,dpsProxy:e.derived.dpsProxy*n.dpsProxy,spellProxy:e.derived.spellProxy*n.spellProxy,meleeProxy:e.derived.meleeProxy*n.meleeProxy,ehpProxy:e.derived.ehpProxy*n.ehpProxy,speed:e.aggregated.speed*n.speed,sustain:s*n.sustain,skillPointTotal:e.derived.skillPointTotal*n.skillPointTotal,reqPenalty:r,thresholdPenalty:c};return{score:u.legacyBaseDps+u.legacyEhp+u.dpsProxy+u.spellProxy+u.meleeProxy+u.ehpProxy+u.speed+u.sustain+u.skillPointTotal-u.reqPenalty-u.thresholdPenalty,breakdown:u}}function FR(e,n){const l=new Map;for(const s of tt){const r=e[s];if(r==null)continue;const c=n.itemSetName.get(r);c&&l.set(c,(l.get(c)??0)+1)}return l}function bh(e,n,l){const s=l.itemSetName.get(e);if(!s)return!1;const r=l.setsMeta.get(s);if(!r)return!1;let c=0;for(const u of tt){const f=n[u];f!=null&&l.itemSetName.get(f)===s&&c++}return r.illegalCounts.includes(c+1)}const mf=[[10,10,10,10,10],[20,20,20,20,20],[30,30,30,30,30]],Wy=["str","dex","int","def","agi"],ka=["SUPER_SLOW","VERY_SLOW","SLOW","NORMAL","FAST","VERY_FAST","SUPER_FAST"];function ul(e){return Math.round(e.numeric.atkTier||0)}function xh(e,n){switch(n){case"str":return Math.max(0,e.numeric.spStr);case"dex":return Math.max(0,e.numeric.spDex);case"int":return Math.max(0,e.numeric.spInt);case"def":return Math.max(0,e.numeric.spDef);case"agi":return Math.max(0,e.numeric.spAgi)}}function YR(e,n){switch(n){case"str":return e.numeric.reqStr;case"dex":return e.numeric.reqDex;case"int":return e.numeric.reqInt;case"def":return e.numeric.reqDef;case"agi":return e.numeric.reqAgi}}function GR(e,n){if(n.length===0)return 0;let l=0;for(const s of n)l+=xh(e,s)*10,l-=Math.max(0,YR(e,s))*.7;return l-=Math.max(0,e.roughScoreFields.reqTotal)*.12,l}function gl(e){return{...e}}function VR(e,n){const l=e.weapon;if(l==null)return null;const s=n.itemsById.get(l);if(!s)return null;const r=ka.indexOf(s.atkSpd);if(r<0)return null;let c=0;for(const f of tt){const g=e[f];if(g==null)continue;const p=n.itemsById.get(g);p&&(c+=ul(p))}const u=Math.max(0,Math.min(ka.length-1,r+c));return ka[u]}function KR(e,n){let l=0;for(const s of tt){const r=e[s];if(r==null)continue;const c=n.itemsById.get(r);c&&(l+=ul(c))}return l}function WR(e,n,l){if(l.weaponAttackSpeeds.length===0)return null;const s=e.weapon;if(s==null)return null;const r=n.itemsById.get(s);if(!r)return null;const c=ka.indexOf(r.atkSpd);if(c<0)return null;const u=[...new Set(l.weaponAttackSpeeds.map(y=>ka.indexOf(y)).filter(y=>y>=0))].sort((y,v)=>y-v);if(u.length===0)return null;const f=KR(e,n),g=Math.max(0,Math.min(ka.length-1,c+f));let p=0;if(!u.includes(g)){const y=u.reduce((v,x)=>Math.abs(x-g)<Math.abs(v-g)?x:v,u[0]);p=y>g?1:y<g?-1:0}return{baseSpeedIndex:c,fixedAtkTierTotal:f,allowedFinalIndices:u,allowedFinalIndexSet:new Set(u),preferredDirection:p}}function wx(e,n,l){const s=new Array(e.length+1).fill(0),r=new Array(e.length+1).fill(0);for(let c=e.length-1;c>=0;c--){const u=n.get(e[c])??[];let f=0,g=0;if(u.length>0){f=1/0,g=-1/0;for(const p of u){const y=l.itemsById.get(p.id),v=y?ul(y):0;v<f&&(f=v),v>g&&(g=v)}Number.isFinite(f)||(f=0),Number.isFinite(g)||(g=0)}s[c]=s[c+1]+f,r[c]=r[c+1]+g}return{minSuffix:s,maxSuffix:r}}function _x(e,n,l,s){const r=e.fixedAtkTierTotal+n+l,c=e.fixedAtkTierTotal+n+s,u=Math.min(r,c),f=Math.max(r,c);for(let g=u;g<=f;g++){const p=Math.max(0,Math.min(ka.length-1,e.baseSpeedIndex+g));if(e.allowedFinalIndexSet.has(p))return!0}return!1}function ic(e,n,l=0,s=0){if(!e||!e.preferredDirection)return 0;const r=e.fixedAtkTierTotal+(n??0),c=Math.max(0,Math.min(ka.length-1,e.baseSpeedIndex+r+l)),u=Math.max(0,Math.min(ka.length-1,e.baseSpeedIndex+r+s)),f=Math.min(c,u),g=Math.max(c,u);let p=1/0,y=0;for(let x=f;x<=g;x++){let S=1/0;for(const N of e.allowedFinalIndices){const _=Math.abs(N-x);_<S&&(S=_)}S<p&&(p=S),S>y&&(y=S)}if(!Number.isFinite(p)||y===0)return 0;const v=e.preferredDirection>0?f:-g;return-y*1e3-p*100+v}function XR(e,n,l,s){const{target:r}=n,c=[];if(typeof r.minLegacyBaseDps=="number"&&e.derived.legacyBaseDps<r.minLegacyBaseDps&&c.push(`minLegacyBaseDps (${e.derived.legacyBaseDps} < ${r.minLegacyBaseDps})`),typeof r.minLegacyEhp=="number"&&e.derived.legacyEhp<r.minLegacyEhp&&c.push(`minLegacyEhp (${e.derived.legacyEhp} < ${r.minLegacyEhp})`),typeof r.minDpsProxy=="number"&&e.derived.dpsProxy<r.minDpsProxy&&c.push(`minDpsProxy (${e.derived.dpsProxy} < ${r.minDpsProxy})`),typeof r.minEhpProxy=="number"&&e.derived.ehpProxy<r.minEhpProxy&&c.push(`minEhpProxy (${e.derived.ehpProxy} < ${r.minEhpProxy})`),typeof r.minMr=="number"&&e.aggregated.mr<r.minMr&&c.push(`minMr (${e.aggregated.mr} < ${r.minMr})`),typeof r.minMs=="number"&&e.aggregated.ms<r.minMs&&c.push(`minMs (${e.aggregated.ms} < ${r.minMs})`),typeof r.minSpeed=="number"&&e.aggregated.speed<r.minSpeed&&c.push(`minSpeed (${e.aggregated.speed} < ${r.minSpeed})`),typeof r.minSkillPointTotal=="number"&&e.derived.skillPointTotal<r.minSkillPointTotal&&c.push(`minSkillPointTotal (${e.derived.skillPointTotal} < ${r.minSkillPointTotal})`),typeof r.maxReqTotal=="number"&&e.derived.reqTotal>r.maxReqTotal&&c.push(`maxReqTotal (${e.derived.reqTotal} > ${r.maxReqTotal})`),(r.customNumericRanges?.length??0)>0&&l&&s)for(const u of r.customNumericRanges??[]){const f=u.key?.trim();if(!f)continue;let g=0;for(const p of tt){const y=l[p];if(y==null)continue;const v=s.itemsById.get(y);v&&(g+=v.numericIndex[f]??0)}typeof u.min=="number"&&g<u.min&&c.push(`${f} (${g} < ${u.min})`),typeof u.max=="number"&&g>u.max&&c.push(`${f} (${g} > ${u.max})`)}return c.length>0?{ok:!1,failedChecks:c}:{ok:!0}}function Ex(e,n,l,s){for(const u of tt){const f=e[u];if(f==null)continue;const g=n.itemsById.get(f);if(!g)return{ok:!1,reason:"item"};if(!Nx(g,l))return{ok:!1,reason:"item"}}const r=FR(e,n);for(const[u,f]of r){const g=n.setsMeta.get(u);if(g&&g.illegalCounts.includes(f))return{ok:!1,reason:"item"}}if(l.weaponAttackSpeeds.length>0){const u=VR(e,n);if(!u||!l.weaponAttackSpeeds.includes(u))return{ok:!1,reason:"attackSpeed"}}const c=XR(s,l,e,n);return c.ok?{ok:!0}:{ok:!1,reason:"thresholds",failedChecks:c.failedChecks}}function Nx(e,n){return!(!n.allowRestricted&&(e.restricted||e.deprecated)||e.level>n.level||!L0(e,n.characterClass)||n.excludedIds.includes(e.id)||n.allowedTiers.length>0&&!n.allowedTiers.includes(e.tier)||n.minPowderSlots!=null&&e.powderSlots<n.minPowderSlots||n.excludedMajorIds.length>0&&n.excludedMajorIds.some(l=>e.majorIds.includes(l)))}const Ra=2.5;function Hf(e,n){const l={...n};return typeof e.minLegacyBaseDps=="number"&&(l.legacyBaseDps=Math.max(l.legacyBaseDps,oa.legacyBaseDps*Ra)),typeof e.minLegacyEhp=="number"&&(l.legacyEhp=Math.max(l.legacyEhp,oa.legacyEhp*Ra)),typeof e.minDpsProxy=="number"&&(l.dpsProxy=Math.max(l.dpsProxy,oa.dpsProxy*Ra)),typeof e.minEhpProxy=="number"&&(l.ehpProxy=Math.max(l.ehpProxy,oa.ehpProxy*Ra)),(typeof e.minMr=="number"||typeof e.minMs=="number")&&(l.sustain=Math.max(l.sustain,oa.sustain*Ra)),typeof e.minSpeed=="number"&&(l.speed=Math.max(l.speed,oa.speed*Ra)),typeof e.minSkillPointTotal=="number"&&(l.skillPointTotal=Math.max(l.skillPointTotal,oa.skillPointTotal*Ra)),typeof e.maxReqTotal=="number"&&(l.reqTotalPenalty=Math.max(l.reqTotalPenalty,oa.reqTotalPenalty*Ra)),(e.customNumericRanges?.length??0)>0&&(l.sustain=Math.max(l.sustain,oa.sustain*Ra)),l}const QR=3,JR=2,eA=14;function tA(e,n){let l=e.numeric.baseDps*n.weights.legacyBaseDps+e.roughScoreFields.ehpProxy*n.weights.legacyEhp+e.roughScoreFields.offense*n.weights.dpsProxy+e.roughScoreFields.ehpProxy*n.weights.ehpProxy+e.numeric.spd*n.weights.speed+e.roughScoreFields.utility*n.weights.sustain+e.roughScoreFields.skillPointTotal*n.weights.skillPointTotal-e.roughScoreFields.reqTotal*n.weights.reqTotalPenalty;const s=n.target.customNumericRanges??[],c=s.some(u=>typeof u.min=="number")?eA:QR;for(const u of s){const f=u.key?.trim();if(!f)continue;const g=e.numericIndex[f]??0;typeof u.min=="number"&&(l+=g*c),typeof u.max=="number"&&(l-=g*JR)}return l}function Tx(e){const n=e.ring1??0,l=e.ring2??0,[s,r]=n<=l?[n,l]:[l,n];return[e.helmet??0,e.chestplate??0,e.leggings??0,e.boots??0,s,r,e.bracelet??0,e.necklace??0,e.weapon??0].join("|")}function Mx(e,n){return ua(n)===e.category}function nA(e,n,l){const s=gl(e),r=new Set(tt.filter(c=>s[c]!=null));for(const c of l.mustIncludeIds){const u=n.itemsById.get(c);if(!u)continue;const g=tt.filter(p=>!r.has(p)&&Mx(u,p))[0];g&&(s[g]=u.id,r.add(g))}return s}function aA(e,n){const l={str:0,dex:0,int:0,def:0,agi:0};for(const r of tt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);u&&(l.str=Math.max(l.str,u.numeric.reqStr),l.dex=Math.max(l.dex,u.numeric.reqDex),l.int=Math.max(l.int,u.numeric.reqInt),l.def=Math.max(l.def,u.numeric.reqDef),l.agi=Math.max(l.agi,u.numeric.reqAgi))}const s=Wy.filter(r=>l[r]>100).sort((r,c)=>l[c]-l[r]);return s.length>0?s:Wy.filter(r=>l[r]>=70).sort((r,c)=>l[c]-l[r]).slice(0,2)}function lA(e,n,l){if(l.length===0)return[];const s={str:0,dex:0,int:0,def:0,agi:0};for(const r of tt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);u&&(s.str=Math.max(s.str,u.numeric.reqStr),s.dex=Math.max(s.dex,u.numeric.reqDex),s.int=Math.max(s.int,u.numeric.reqInt),s.def=Math.max(s.def,u.numeric.reqDef),s.agi=Math.max(s.agi,u.numeric.reqAgi))}return l.map(r=>Math.max(0,s[r]-100))}function Xy(e,n){return n.map(l=>xh(e,l))}function Uo(e,n){if(e.length===0)return n.slice();const l=new Array(e.length);for(let s=0;s<e.length;s++)l[s]=(e[s]??0)+(n[s]??0);return l}function sA(e,n,l){for(let s=0;s<l.length;s++)if((e[s]??0)+(n[s]??0)<l[s])return!1;return!0}function Qy(e,n){let l=0;for(let s=0;s<n.length;s++)l+=Math.max(0,n[s]-(e[s]??0));return l}function Jy(e,n,l,s){if(s.length===0)return 0;const r=n.get(e)??[];let c=0;for(const u of r){const f=l.itemsById.get(u.id);if(!f)continue;let g=0;for(const p of s)g+=xh(f,p);g>c&&(c=g)}return c}function rc(e){return(e.target.customNumericRanges??[]).map(n=>({key:(n.key??"").trim(),min:typeof n.min=="number"?n.min:void 0,max:typeof n.max=="number"?n.max:void 0})).filter(n=>n.key&&(typeof n.min=="number"||typeof n.max=="number"))}function zo(e,n,l){const s=n.itemsById.get(e.id);return s?s.numericIndex[l]??0:0}function Dx(e,n,l){const s=l.map(()=>0);if(l.length===0)return s;for(const r of tt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);if(u)for(let f=0;f<l.length;f++)s[f]+=u.numericIndex[l[f]]??0}return s}function jx(e){const{slotOrder:n,candidatePools:l,catalog:s,keys:r}=e,c=Array.from({length:n.length+1},()=>r.map(()=>0)),u=Array.from({length:n.length+1},()=>r.map(()=>0));if(r.length===0)return{maxSuffix:c,minSuffix:u};for(let f=n.length-1;f>=0;f--){const g=l.get(n[f])??[],p=r.map(()=>Number.NEGATIVE_INFINITY),y=r.map(()=>Number.POSITIVE_INFINITY);for(const v of g){const x=s.itemsById.get(v.id);if(x)for(let S=0;S<r.length;S++){const N=x.numericIndex[r[S]]??0;N>p[S]&&(p[S]=N),N<y[S]&&(y[S]=N)}}for(let v=0;v<r.length;v++){const x=Number.isFinite(p[v])?p[v]:0,S=Number.isFinite(y[v])?y[v]:0;c[f][v]=c[f+1][v]+x,u[f][v]=u[f+1][v]+S}}return{maxSuffix:c,minSuffix:u}}function iA(e,n,l,s,r=[]){const c=[],u=rc(l);for(const A of n.items)Mx(A,e)&&(s&&!s.has(A.id)||Nx(A,l)&&c.push({id:A.id,rough:tA(A,l),reqTotal:A.roughScoreFields.reqTotal,skillPointTotal:A.roughScoreFields.skillPointTotal,utility:A.roughScoreFields.utility+A.numeric.spd*.8,level:A.level,atkTier:ul(A),spStr:A.numeric.spStr,spDex:A.numeric.spDex,spInt:A.numeric.spInt,spDef:A.numeric.spDef,spAgi:A.numeric.spAgi,supportFocus:GR(A,r)}));const f=[...c].sort((A,D)=>A.rough!==D.rough?D.rough-A.rough:A.id-D.id),g=[...c].sort((A,D)=>A.reqTotal!==D.reqTotal?A.reqTotal-D.reqTotal:A.level!==D.level?A.level-D.level:A.id-D.id),p=[...c].sort((A,D)=>A.skillPointTotal!==D.skillPointTotal?D.skillPointTotal-A.skillPointTotal:A.reqTotal!==D.reqTotal?A.reqTotal-D.reqTotal:A.id-D.id),y=[...c].sort((A,D)=>A.utility!==D.utility?D.utility-A.utility:A.reqTotal!==D.reqTotal?A.reqTotal-D.reqTotal:A.id-D.id),v=l.weaponAttackSpeeds.length>0?[...c].sort((A,D)=>{const F=Math.max(0,A.atkTier),ie=Math.max(0,D.atkTier);return F!==ie?ie-F:A.atkTier!==D.atkTier?D.atkTier-A.atkTier:A.reqTotal!==D.reqTotal?A.reqTotal-D.reqTotal:A.skillPointTotal!==D.skillPointTotal?D.skillPointTotal-A.skillPointTotal:A.id-D.id}):[],x=r.length>0?[...c].sort((A,D)=>A.supportFocus!==D.supportFocus?D.supportFocus-A.supportFocus:A.reqTotal!==D.reqTotal?A.reqTotal-D.reqTotal:A.skillPointTotal!==D.skillPointTotal?D.skillPointTotal-A.skillPointTotal:A.id-D.id):[],S=r.map(A=>[...c].sort((D,F)=>{const ie=A==="str"?D.spStr:A==="dex"?D.spDex:A==="int"?D.spInt:A==="def"?D.spDef:D.spAgi,re=A==="str"?F.spStr:A==="dex"?F.spDex:A==="int"?F.spInt:A==="def"?F.spDef:F.spAgi;return ie!==re?re-ie:D.reqTotal!==F.reqTotal?D.reqTotal-F.reqTotal:D.supportFocus!==F.supportFocus?F.supportFocus-D.supportFocus:D.id-F.id})),N=u.filter(A=>typeof A.min=="number").map(A=>[...c].sort((D,F)=>{const ie=zo(D,n,A.key),re=zo(F,n,A.key);return ie!==re?re-ie:D.reqTotal!==F.reqTotal?D.reqTotal-F.reqTotal:D.skillPointTotal!==F.skillPointTotal?F.skillPointTotal-D.skillPointTotal:D.id-F.id})),_=u.filter(A=>typeof A.max=="number").map(A=>[...c].sort((D,F)=>{const ie=zo(D,n,A.key),re=zo(F,n,A.key);return ie!==re?ie-re:D.reqTotal!==F.reqTotal?D.reqTotal-F.reqTotal:D.skillPointTotal!==F.skillPointTotal?F.skillPointTotal-D.skillPointTotal:D.id-F.id})),M=Math.max(10,l.topKPerSlot),R=Math.min(140,Math.max(40,Math.floor(M*.8))),I=Math.min(c.length,M+R+(r.length>0?Math.min(60,r.length*12):0)+Math.min(80,u.length*14)),O=new Map,L=Math.min(12,Math.floor(M*.4),f.length);for(let A=0;A<L;A++){const D=f[A];O.set(D.id,{id:D.id,rough:D.rough})}const H=[{list:f,remaining:Math.max(0,M-L),cursor:0},{list:g,remaining:Math.floor(R*.28),cursor:0},{list:p,remaining:Math.floor(R*.24),cursor:0},{list:y,remaining:Math.floor(R*.18),cursor:0}];v.length>0&&H.push({list:v,remaining:Math.max(18,Math.floor(R*.22)),cursor:0}),x.length>0&&H.push({list:x,remaining:Math.max(16,Math.floor(R*.2)),cursor:0});for(const A of S)H.push({list:A,remaining:10,cursor:0});for(const A of N)H.push({list:A,remaining:35,cursor:0});for(const A of _)H.push({list:A,remaining:20,cursor:0});for(;O.size<I;){let A=!1;for(const D of H)if(!(D.remaining<=0))for(;D.cursor<D.list.length;){const F=D.list[D.cursor++];if(!O.has(F.id)){O.set(F.id,{id:F.id,rough:F.rough}),D.remaining--,A=!0;break}}if(!A)break}if(O.size<I)for(const A of f){if(O.size>=I)break;O.has(A.id)||O.set(A.id,{id:A.id,rough:A.rough})}return[...O.values()]}function rA(e){const n={};for(const l of tt){const s=ua(l),r=new Set(e.binsByCategory[s]??[]),c=e.slots[l];c!=null&&r.add(c),n[l]=r}return n}function Cx(e,n,l){if(l.length===0)return!0;const s=new Set;for(const r of tt){const c=e[r];if(c==null)continue;const u=n.itemsById.get(c);if(u)for(const f of u.majorIds)l.includes(f)&&s.add(f)}return l.every(r=>s.has(r))}function Rx(e,n){const l=new Array(e.length+1).fill(0);for(let s=e.length-1;s>=0;s--){const r=e[s],c=n.get(r)??[];let u=0;for(const f of c)f.rough>u&&(u=f.rough);l[s]=l[s+1]+u}return l}function Ax(e){const{poolSize:n,beamSize:l,remainingStages:s,processedStates:r,maxStates:c}=e;if(n<=0)return 0;const u=Math.max(0,c-r),f=Math.max(1,l*Math.max(1,s)),g=Math.floor(u/f),p=Math.max(8,Math.min(96,g));return Math.min(n,p)}function oA(e,n,l){let s=1;for(const r of e){const c=n.get(r)?.length??0;if(c===0)return 0;if(s*=c,s>l)return s}return s}function gf(e){const{beam:n,catalog:l,constraints:s,skillpointAssist:r,signal:c}=e,u=[],f=new Set,g={majorIds:0,spInvalid:0,duplicate:0,hardConstraints:0,hardAttackSpeed:0,hardThresholds:0,hardItem:0,thresholdFailureExample:void 0};for(const p of n){if(c?.aborted)throw new DOMException("Auto build cancelled","AbortError");if(!Cx(p.slots,l,s.requiredMajorIds)){g.majorIds++;continue}const y=nc({slots:p.slots,level:s.level,characterClass:s.characterClass},l,r?{skillpointFeasibility:{extraBaseSkillPoints:r}}:void 0);if(!y.derived.skillpointFeasible){g.spInvalid++;continue}const v=Ex(p.slots,l,s,y);if(!v.ok){g.hardConstraints++,v.reason==="attackSpeed"?g.hardAttackSpeed++:v.reason==="thresholds"?(g.hardThresholds++,g.thresholdFailureExample===void 0&&v.failedChecks?.length&&(g.thresholdFailureExample=v.failedChecks[0])):g.hardItem++;continue}const x=Tx(p.slots);if(f.has(x)){g.duplicate++;continue}const{score:S,breakdown:N}=Sx(y,s.weights,s);f.add(x),u.push({slots:gl(p.slots),score:S,scoreBreakdown:N,summary:y})}return u.sort((p,y)=>{if(p.score!==y.score)return y.score-p.score;for(const v of tt){const x=p.slots[v]??0,S=y.slots[v]??0;if(x!==S)return x-S}return 0}),{candidates:u,rejectStats:g}}function cA(e){const{slotOrder:n,candidatePools:l,baseSlots:s,catalog:r,constraints:c,focusStats:u,attackSpeedCtx:f,onProgress:g,signal:p}=e,y=Rx(n,l),v=f?wx(n,l,r):null,x=lA(s,r,u),S=Array.from({length:n.length+1},()=>u.map(()=>0));for(let H=n.length-1;H>=0;H--){const A=l.get(n[H])??[],D=u.map(()=>0);for(const F of A){const ie=r.itemsById.get(F.id);if(!ie)continue;const re=Xy(ie,u);for(let Q=0;Q<re.length;Q++)re[Q]>D[Q]&&(D[Q]=re[Q])}S[H]=Uo(S[H+1],D)}const N=rc(c),_=N.map(H=>H.key),M=jx({slotOrder:n,candidatePools:l,catalog:r,keys:_}),R=Dx(s,r,_);let I=[{slots:gl(s),orderIndex:0,roughScore:0,optimisticBound:y[0],feasibilityAssigned:0,focusSupport:u.map(()=>0),atkTierAssigned:0,customTotals:R}],O=0,L=!1;for(let H=0;H<n.length;H++){if(p?.aborted)throw new DOMException("Auto build cancelled","AbortError");const A=n[H],D=l.get(A)??[],F=[],ie=Ax({poolSize:D.length,beamSize:I.length,remainingStages:n.length-H,processedStates:O,maxStates:c.maxStates});ie<=0&&(L=!0);for(const ce of I){let z=0;for(const ue of D){if(z>=ie)break;if(O>=c.maxStates){L=!0;break}if(O++,z++,bh(ue.id,ce.slots,r))continue;const de=gl(ce.slots);de[A]=ue.id;const k=r.itemsById.get(ue.id),G=(ce.atkTierAssigned??0)+(k?ul(k):0),le=Uo(ce.focusSupport??u.map(()=>0),k?Xy(k,u):u.map(()=>0)),B=_.length>0?Uo(ce.customTotals??_.map(()=>0),_.map(q=>k?k.numericIndex[q]??0:0)):void 0;if(f&&v&&!_x(f,G,v.minSuffix[H+1],v.maxSuffix[H+1])||u.length>0&&!sA(le,S[H+1],x))continue;if(N.length>0&&B){let q=!0;for(let J=0;J<N.length;J++){const ae=N[J],fe=B[J];if(typeof ae.min=="number"&&fe+M.maxSuffix[H+1][J]<ae.min){q=!1;break}if(typeof ae.max=="number"&&fe+M.minSuffix[H+1][J]>ae.max){q=!1;break}}if(!q)continue}const W=ph(de,r,c.level),T=ce.roughScore+ue.rough;F.push({slots:de,orderIndex:H+1,roughScore:T,optimisticBound:T+y[H+1],feasibilityAssigned:W.feasible?W.assignedTotal:1/0,focusSupport:le,atkTierAssigned:G,customTotals:B})}if(L)break}if(F.length===0)return g?.({phase:"diagnostics",processedStates:O,beamSize:I.length,totalSlots:n.length,expandedSlots:H,detail:L?`Feasibility-first search exhausted state budget before completing slot ${A}.`:`Feasibility-first search found no branches that can still satisfy high-skill requirements by slot ${A}.`}),{beam:[],processedStates:O,stateBudgetHit:L};const re=v?v.minSuffix[H+1]:0,Q=v?v.maxSuffix[H+1]:0;F.sort((ce,z)=>{if(f){const k=ic(f,ce.atkTierAssigned,re,Q),G=ic(f,z.atkTierAssigned,re,Q);if(k!==G)return G-k}if(u.length>0){const k=Qy(ce.focusSupport??[],x),G=Qy(z.focusSupport??[],x);if(k!==G)return k-G}const ue=ce.feasibilityAssigned??1/0,de=z.feasibilityAssigned??1/0;return ue!==de?ue-de:ce.optimisticBound!==z.optimisticBound?z.optimisticBound-ce.optimisticBound:ce.roughScore!==z.roughScore?z.roughScore-ce.roughScore:0}),I=F.slice(0,Math.max(40,c.beamWidth)),g?.({phase:"beam-search",processedStates:O,beamSize:I.length,totalSlots:n.length,expandedSlots:H+1,detail:`feasibility-first | branchCap=${ie}${u.length>0?` | focus=${u.join("/")}`:""}${f?` | atkSpeed=${c.weaponAttackSpeeds.join("/")}`:""}`})}return{beam:I,processedStates:O,stateBudgetHit:L}}function uA(e){const{slotOrder:n,candidatePools:l,baseSlots:s,catalog:r,constraints:c,signal:u,onProgress:f}=e,g=[],p=new Set;let y=0,v=0,x=0,S=0,N=0,_=0,M=0,R=0;const I=(O,L)=>{if(u?.aborted)throw new DOMException("Auto build cancelled","AbortError");if(y>c.maxStates)return;if(O>=n.length){if(!Cx(L,r,c.requiredMajorIds)){v++;return}const D=nc({slots:L,level:c.level,characterClass:c.characterClass},r);if(!D.derived.skillpointFeasible){x++;return}const F=Ex(L,r,c,D);if(!F.ok){N++,F.reason==="attackSpeed"?_++:F.reason==="thresholds"?M++:R++;return}const ie=Tx(L);if(p.has(ie)){S++;return}p.add(ie);const{score:re,breakdown:Q}=Sx(D,c.weights,c);g.push({slots:gl(L),score:re,scoreBreakdown:Q,summary:D});return}const H=n[O],A=l.get(H)??[];for(const D of A){if(y++,y>c.maxStates)break;bh(D.id,L,r)||(L[H]=D.id,y%2e3===0&&f?.({phase:"exact-search",processedStates:y,beamSize:0,totalSlots:n.length,expandedSlots:O+1}),I(O+1,L))}L[H]=null};return I(0,gl(s)),f?.({phase:"diagnostics",processedStates:y,beamSize:0,totalSlots:n.length,expandedSlots:n.length,detail:g.length>0?`Exact search produced ${g.length} valid builds. Rejected duplicates=${S}, SP-invalid=${x}, majorID=${v}, hard=${N} (speed=${_}, thresholds=${M}, item=${R}).`:`Exact search produced 0 valid builds. Rejected SP-invalid=${x}, majorID=${v}, duplicates=${S}, hard=${N} (speed=${_}, thresholds=${M}, item=${R}).`}),g.sort((O,L)=>{if(O.score!==L.score)return L.score-O.score;for(const H of tt){const A=O.slots[H]??0,D=L.slots[H]??0;if(A!==D)return A-D}return 0}),g.slice(0,Math.max(1,c.topN))}function kx(e){const{catalog:n,baseWorkbench:l,constraints:s,onProgress:r,signal:c,alreadyThresholdRescue:u}=e;if(c?.aborted)throw new DOMException("Auto build cancelled","AbortError");let f=gl(l.slots);for(const z of tt)s.lockedSlots[z]||(f[z]=null);f=nA(f,n,s);const g=aA(f,n),p=tt.filter(z=>f[z]==null),y=s.onlyPinnedItems?rA(l):null,v=new Map;for(const z of p)v.set(z,iA(z,n,s,y?.[z]??null,g));const x=WR(f,n,s),N=rc(s).some(z=>typeof z.min=="number"),_=[...p].sort((z,ue)=>{if(x?.preferredDirection){const G=v.get(z)??[],le=v.get(ue)??[],B=G.reduce((T,q)=>{const J=n.itemsById.get(q.id);if(!J)return T;const ae=ul(J),fe=x.preferredDirection>0?Math.max(0,ae):Math.max(0,-ae);return Math.max(T,fe)},0),W=le.reduce((T,q)=>{const J=n.itemsById.get(q.id);if(!J)return T;const ae=ul(J),fe=x.preferredDirection>0?Math.max(0,ae):Math.max(0,-ae);return Math.max(T,fe)},0);if(B!==W)return W-B}if(g.length>0){const G=Jy(z,v,n,g),le=Jy(ue,v,n,g);if(G!==le)return le-G}if(N){const G=["ring1","ring2","bracelet","necklace"],le=G.includes(z),B=G.includes(ue);if(le!==B)return le?-1:1}const de=v.get(z)?.length??0,k=v.get(ue)?.length??0;return de!==k?de-k:z.localeCompare(ue)}),M=Rx(_,v);if(_.some(z=>(v.get(z)?.length??0)===0)){const z=_.find(ue=>(v.get(ue)?.length??0)===0);return r?.({phase:"diagnostics",processedStates:0,beamSize:0,totalSlots:_.length,expandedSlots:0,detail:z?`No candidate items available for slot ${z} under current hard filters.`:"One or more slots have empty candidate pools."}),[]}const R=oA(_,v,s.exhaustiveStateLimit+1);if(s.useExhaustiveSmallPool&&_.length>0&&R>0&&R<=s.exhaustiveStateLimit){r?.({phase:"exact-search",processedStates:0,beamSize:0,totalSlots:_.length,expandedSlots:0});const z={...s,maxStates:Math.max(s.maxStates,s.exhaustiveStateLimit)};return uA({slotOrder:_,candidatePools:v,baseSlots:f,catalog:n,constraints:z,signal:c,onProgress:r})}const I=rc(s),O=I.map(z=>z.key),L=jx({slotOrder:_,candidatePools:v,catalog:n,keys:O});let H=[{slots:f,orderIndex:0,roughScore:0,optimisticBound:M[0],atkTierAssigned:0,customTotals:Dx(f,n,O)}];const A=x?wx(_,v,n):null;let D=0,F=!1;for(let z=0;z<_.length;z++){if(c?.aborted)throw new DOMException("Auto build cancelled","AbortError");const ue=_[z],de=v.get(ue),k=[],G=Ax({poolSize:de.length,beamSize:H.length,remainingStages:_.length-z,processedStates:D,maxStates:s.maxStates});G<=0&&(F=!0);for(const W of H){let T=0;for(const q of de){if(T>=G)break;if(D>=s.maxStates){F=!0;break}if(D++,T++,bh(q.id,W.slots,n))continue;const J=gl(W.slots);J[ue]=q.id;const ae=W.roughScore+q.rough,fe=n.itemsById.get(q.id),ge=(W.atkTierAssigned??0)+(fe?ul(fe):0),be=O.length>0?Uo(W.customTotals??O.map(()=>0),O.map(ze=>fe?fe.numericIndex[ze]??0:0)):void 0;if(!(x&&A&&!_x(x,ge,A.minSuffix[z+1],A.maxSuffix[z+1]))){if(I.length>0&&be){let ze=!0;for(let Oe=0;Oe<I.length;Oe++){const Ge=I[Oe],kt=be[Oe];if(typeof Ge.min=="number"&&kt+L.maxSuffix[z+1][Oe]<Ge.min){ze=!1;break}if(typeof Ge.max=="number"&&kt+L.minSuffix[z+1][Oe]>Ge.max){ze=!1;break}}if(!ze)continue}k.push({slots:J,orderIndex:z+1,roughScore:ae,optimisticBound:ae+M[z+1],atkTierAssigned:ge,customTotals:be})}}if(F)break}if(k.length===0)return r?.({phase:"diagnostics",processedStates:D,beamSize:H.length,totalSlots:_.length,expandedSlots:z,detail:F?`Search state budget exhausted before completing slot ${ue}. Try enabling deep fallback/exact mode or reduce hard filters.`:`No expansions produced at slot ${ue}.`}),[];const le=A?A.minSuffix[z+1]:0,B=A?A.maxSuffix[z+1]:0;k.sort((W,T)=>{if(x){const q=ic(x,W.atkTierAssigned,le,B),J=ic(x,T.atkTierAssigned,le,B);if(q!==J)return J-q}return W.optimisticBound!==T.optimisticBound?T.optimisticBound-W.optimisticBound:T.roughScore-W.roughScore}),H=k.slice(0,Math.max(20,s.beamWidth)),r?.({phase:"beam-search",processedStates:D,beamSize:H.length,totalSlots:_.length,expandedSlots:z+1,detail:`branchCap=${G}${x?.preferredDirection?` | atkSpeedTarget=${s.weaponAttackSpeeds.join("/")}`:""}`})}let ie=H,{candidates:re,rejectStats:Q}=gf({beam:H,catalog:n,constraints:s,signal:c});const ce=Q.thresholdFailureExample?` Example failure: ${Q.thresholdFailureExample}.`:"";if(r?.({phase:"diagnostics",processedStates:D,beamSize:H.length,totalSlots:_.length,expandedSlots:_.length,detail:re.length>0?`Final eval: ${re.length} valid builds. Rejected duplicates=${Q.duplicate}, SP-invalid=${Q.spInvalid}, majorID=${Q.majorIds}, hard=${Q.hardConstraints}.`:`Final eval found 0 valid builds. Rejected SP-invalid=${Q.spInvalid}, majorID=${Q.majorIds}, duplicates=${Q.duplicate}, hard=${Q.hardConstraints} (speed=${Q.hardAttackSpeed}, thresholds=${Q.hardThresholds}, item=${Q.hardItem}).${ce}`}),re.length===0&&_.length>0&&(Q.spInvalid>0||s.weaponAttackSpeeds.length>0&&Q.hardAttackSpeed>0||Q.hardThresholds>0)){const z=Q.hardThresholds>0;r?.({phase:"diagnostics",processedStates:D,beamSize:H.length,totalSlots:_.length,expandedSlots:_.length,detail:z&&s.target.customNumericRanges?.length?"Retrying with threshold-aware rescue (advanced ID constraints + support-aware feasibility search).":Q.hardAttackSpeed>0?"Retrying with feasibility-first beam search (support-aware rescue + attack-speed target reachability).":"Retrying with feasibility-first beam search (support-aware rescue for high-skill requirements)."});const ue={...s,maxStates:Math.max(s.maxStates,z?Math.min(18e6,s.maxStates*5):s.weaponAttackSpeeds.length>0?Math.min(16e6,s.maxStates*4):Math.min(8e6,s.maxStates*2)),beamWidth:Math.max(s.beamWidth,z?3600:s.weaponAttackSpeeds.length>0?3200:1800)};z&&(ue.weights=Hf(s.target,s.weights));const de=cA({slotOrder:_,candidatePools:v,baseSlots:f,catalog:n,constraints:ue,focusStats:g,attackSpeedCtx:x,onProgress:r,signal:c});if(de.beam.length>0){ie=de.beam;const k=gf({beam:de.beam,catalog:n,constraints:s,signal:c});re=k.candidates,Q=k.rejectStats;const G=Q.thresholdFailureExample?` Example failure: ${Q.thresholdFailureExample}.`:"";r?.({phase:"diagnostics",processedStates:de.processedStates,beamSize:de.beam.length,totalSlots:_.length,expandedSlots:_.length,detail:re.length>0?`Feasibility-first eval: ${re.length} valid builds. Rejected duplicates=${Q.duplicate}, SP-invalid=${Q.spInvalid}, majorID=${Q.majorIds}, hard=${Q.hardConstraints}.`:`Feasibility-first eval still found 0 valid builds. Rejected SP-invalid=${Q.spInvalid}, majorID=${Q.majorIds}, duplicates=${Q.duplicate}, hard=${Q.hardConstraints} (speed=${Q.hardAttackSpeed}, thresholds=${Q.hardThresholds}, item=${Q.hardItem}).${G}`})}}if(re.length===0&&Q.hardThresholds>0&&!u){const z=s.target;if(typeof z.minLegacyBaseDps=="number"||typeof z.minLegacyEhp=="number"||typeof z.minDpsProxy=="number"||typeof z.minEhpProxy=="number"||typeof z.minMr=="number"||typeof z.minMs=="number"||typeof z.minSpeed=="number"||typeof z.minSkillPointTotal=="number"||typeof z.maxReqTotal=="number"||(z.customNumericRanges?.length??0)>0){r?.({phase:"diagnostics",processedStates:D,beamSize:ie.length,totalSlots:_.length,expandedSlots:_.length,detail:"Retrying with threshold-biased beam search (weights tuned to target min/max)."});const de={...s,weights:Hf(s.target,s.weights),beamWidth:Math.max(s.beamWidth,3600),maxStates:Math.max(s.maxStates,Math.min(18e6,s.maxStates*5))},k=kx({catalog:n,baseWorkbench:l,constraints:de,onProgress:r,signal:c,alreadyThresholdRescue:!0});if(k.length>0)return r?.({phase:"diagnostics",processedStates:D,beamSize:k.length,totalSlots:_.length,expandedSlots:_.length,detail:`Threshold rescue: ${k.length} valid builds.`}),k.slice(0,Math.max(1,s.topN))}}if(re.length===0&&Q.spInvalid>0&&Q.hardConstraints===0){let z=!1;for(const ue of mf){r?.({phase:"diagnostics",processedStates:D,beamSize:ie.length,totalSlots:_.length,expandedSlots:_.length,detail:`Retrying final evaluation with tome-assisted SP feasibility (+${ue[0]} per stat).`});const de=gf({beam:ie,catalog:n,constraints:s,skillpointAssist:ue,signal:c});if(de.candidates.length>0){re=de.candidates,Q=de.rejectStats,z=!0,r?.({phase:"diagnostics",processedStates:D,beamSize:ie.length,totalSlots:_.length,expandedSlots:_.length,detail:`Tome-assisted final eval recovered ${re.length} valid builds (+${ue[0]} per stat feasibility assist).`});break}Q=de.rejectStats}z||r?.({phase:"diagnostics",processedStates:D,beamSize:ie.length,totalSlots:_.length,expandedSlots:_.length,detail:`Tome-assisted final eval still found 0 valid builds after +${mf[mf.length-1][0]} per stat assist. Rejected SP-invalid=${Q.spInvalid}, majorID=${Q.majorIds}, duplicates=${Q.duplicate}, hard=${Q.hardConstraints} (speed=${Q.hardAttackSpeed}, thresholds=${Q.hardThresholds}, item=${Q.hardItem}).${Q.thresholdFailureExample?` Example failure: ${Q.thresholdFailureExample}.`:""}`})}return re.slice(0,Math.max(1,s.topN))}class dA{worker=null;requestId=0;currentReject=null;currentRequestId=null;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL(""+new URL("worker-runtime-Cst6v3_l.js",import.meta.url).href,import.meta.url),{type:"module"}))}async run(n,l,s,r={}){if(!this.worker)return kx({catalog:n,baseWorkbench:l,constraints:s,onProgress:r.onProgress,signal:r.signal});const c=++this.requestId;return this.currentRequestId=c,new Promise((u,f)=>{this.currentReject=f;const g=()=>{this.worker?.postMessage({type:"cancel",requestId:c}),f(new DOMException("Auto build cancelled","AbortError"))};r.signal?.addEventListener("abort",g,{once:!0});const p=y=>{const v=y.data;if(v.requestId===c){if(v.type==="progress"){r.onProgress?.(v.progress);return}if(this.worker?.removeEventListener("message",p),r.signal?.removeEventListener("abort",g),this.currentReject=null,this.currentRequestId=null,v.type==="error"){f(new Error(v.message));return}u(v.candidates)}};this.worker.addEventListener("message",p),this.worker.postMessage({type:"run",requestId:c,catalog:n,baseWorkbench:l,constraints:s})})}cancelCurrent(){this.currentRequestId!==null&&(this.worker?.postMessage({type:"cancel",requestId:this.currentRequestId}),this.currentReject?.(new DOMException("Auto build cancelled","AbortError")),this.currentReject=null,this.currentRequestId=null)}dispose(){this.worker?.terminate(),this.worker=null}}function e0(e,n){const l=e.split(",").map(c=>c.trim()).filter(Boolean),s=[],r=[];for(const c of l){const u=n.itemIdByName.get(c.toLowerCase());u==null?r.push(c):s.push(u)}return{ids:s,unknown:r}}function zs(e,n){return e.split(",").map(l=>l.trim()).filter(Boolean).map(l=>n?n(l):l)}function Oo(e,n){return e.includes(n)?e.filter(l=>l!==n):[...e,n]}function fA(e){if(!e)return null;const n=/SP-invalid=(\d+)/i.exec(e),l=/majorID=(\d+)/i.exec(e),s=/duplicates?=(\d+)/i.exec(e),r=/hard=(\d+)/i.exec(e),c=/speed=(\d+)/i.exec(e),u=/thresholds=(\d+)/i.exec(e),f=/item=(\d+)/i.exec(e);return r?{spInvalid:n?Number(n[1]):0,majorIds:l?Number(l[1]):0,duplicate:s?Number(s[1]):0,hard:Number(r[1]),speed:c?Number(c[1]):0,thresholds:u?Number(u[1]):0,item:f?Number(f[1]):0}:null}const hA=["SUPER_SLOW","VERY_SLOW","SLOW","NORMAL","FAST","VERY_FAST","SUPER_FAST"],mA={constraints:"Advanced IDs only",spell:"Spell Damage",melee:"Melee",mobility:"Mobility",tank:"Tank / EHP"},gA=["constraints","spell","melee","mobility","tank"],t0={auto:"All",fast:"Fast",constraint:"Constraint-first",exhaustive:"Exhaustive-ish"},pA=["auto","fast","constraint","exhaustive"],vA={hp:"Health",hpBonus:"Health Bonus",hprRaw:"Raw Health Regen",hprPct:"Health Regen %",mr:"Mana Regen",ms:"Mana Steal",ls:"Life Steal",sdPct:"Spell Damage %",sdRaw:"Spell Damage Raw",mdPct:"Melee Damage %",mdRaw:"Melee Damage Raw",poison:"Poison",spd:"Walk Speed Bonus",atkTier:"Attack Speed Bonus",averageDps:"Average DPS",str:"Strength",dex:"Dexterity",int:"Intelligence",def:"Defense",agi:"Agility",strReq:"Strength Min",dexReq:"Dexterity Min",intReq:"Intelligence Min",defReq:"Defense Min",agiReq:"Agility Min",eDef:"Earth Defense",tDef:"Thunder Defense",wDef:"Water Defense",fDef:"Fire Defense",aDef:"Air Defense",eDamPct:"Earth Damage %",tDamPct:"Thunder Damage %",wDamPct:"Water Damage %",fDamPct:"Fire Damage %",aDamPct:"Air Damage %",damPct:"Damage %",rDamPct:"Elemental Damage %",nDamPct:"Neutral Damage %",slots:"Powder Slots",lvl:"Combat Level",reqTotal:"Req Total",skillPointTotal:"Skill Point Total",offenseScore:"Offense Score",ehpProxy:"EHP Proxy",utilityScore:"Utility Score",spPct1:"1st Spell Cost %",spRaw1:"1st Spell Cost Raw",spPct2:"2nd Spell Cost %",spRaw2:"2nd Spell Cost Raw",spPct3:"3rd Spell Cost %",spRaw3:"3rd Spell Cost Raw",spPct4:"4th Spell Cost %",spRaw4:"4th Spell Cost Raw",sumSpPct:"Sum Spell Cost %",sumSpRaw:"Sum Spell Cost Raw"};function pf(e){return vA[e]??e}const Os={legacyBaseDps:0,legacyEhp:0,dpsProxy:0,spellProxy:0,meleeProxy:0,ehpProxy:0,speed:0,sustain:0,skillPointTotal:0,reqTotalPenalty:0};function yA(e){switch(e){case"spell":return{...Os,spellProxy:2};case"melee":return{...Os,meleeProxy:2};case"mobility":return{...Os,speed:2};case"tank":return{...Os,legacyEhp:2};case"constraints":return{...Os,legacyBaseDps:.25,legacyEhp:.25,dpsProxy:.25,spellProxy:.25,meleeProxy:.25,ehpProxy:.25,speed:.25,sustain:.25,skillPointTotal:.25,reqTotalPenalty:.25};default:return{...Os,spellProxy:2}}}function bA(e,n){return yA(e)}function xA(e){const n=w.useRef(null);n.current||(n.current=new dA);const[l,s]=w.useState(""),[r,c]=w.useState(""),[u,f]=w.useState(""),[g,p]=w.useState(""),[y,v]=w.useState([]),[x,S]=w.useState("constraints"),[N,_]=w.useState(e.snapshot.characterClass),[M,R]=w.useState(e.snapshot.level),[I,O]=w.useState([]),[L,H]=w.useState([]),[A,D]=w.useState(null),[F,ie]=w.useState(!1),[re,Q]=w.useState(Ca.beamWidth),[ce,z]=w.useState(Ca.topKPerSlot),[ue,de]=w.useState(Ca.topN),[k,G]=w.useState(["auto"]),[le,B]=w.useState([]),[W,T]=w.useState(""),[q,J]=w.useState(!1),[ae,fe]=w.useState(null),[ge,be]=w.useState(!1),[ze,Oe]=w.useState(!0),[Ge,kt]=w.useState(!0),[wt,Cn]=w.useState(Ca.exhaustiveStateLimit),[pt,Kt]=w.useState(null),[We,Qt]=w.useState(null),oe=w.useRef(null),Pe=w.useRef(null),V=y.some(X=>X.key&&X.min!=null&&X.max!=null),se=w.useRef(1),we=w.useMemo(()=>{const X={};for(const he of tt)e.snapshot.locks[he]&&(X[he]=!0);return X},[e.snapshot.locks]),Ee=e.catalog?.facetsMeta.tiers??[],ke=(e.catalog?.facetsMeta.majorIds??[]).slice(0,24),sn=w.useMemo(()=>Object.keys(e.catalog?.facetsMeta.numericRanges??{}).sort((he,Ae)=>pf(he).localeCompare(pf(Ae))),[e.catalog]);w.useEffect(()=>{e.open&&(_(e.snapshot.characterClass),R(e.snapshot.level))},[e.open,e.snapshot.characterClass,e.snapshot.level]);const Jt=()=>{v(X=>[...X,{id:se.current++,key:sn[0]??"",min:null,max:null}])},zt=(X,he)=>{v(Ae=>Ae.map(Xe=>Xe.id===X?{...Xe,...he}:Xe))},bn=X=>{v(he=>he.filter(Ae=>Ae.id!==X))},da=async(X,he,Ae,Xe)=>{const _t=(()=>{const Ne={label:"Fast pass",topKPerSlot:he.topKPerSlot,beamWidth:he.beamWidth,maxStates:he.maxStates,rescueWeights:!1},Ce={label:"Deep pass",topKPerSlot:Math.max(he.topKPerSlot,140),beamWidth:Math.max(he.beamWidth,700),maxStates:Math.max(he.maxStates,9e5),rescueWeights:!1},Ve={label:"Bruteforce-ish pass",topKPerSlot:Math.max(he.topKPerSlot,220),beamWidth:Math.max(he.beamWidth,1200),maxStates:Math.max(he.maxStates,4e6),rescueWeights:!1},it={label:"Feasibility rescue",topKPerSlot:Math.max(he.topKPerSlot,260),beamWidth:Math.max(he.beamWidth,1400),maxStates:Math.max(he.maxStates,45e5),rescueWeights:!0},_e={label:"Constraint-first pass",topKPerSlot:Math.max(he.topKPerSlot,180),beamWidth:Math.max(he.beamWidth,1200),maxStates:Math.max(he.maxStates,22e5),rescueWeights:!0},Mt={label:"Constraint rescue deep",topKPerSlot:Math.max(he.topKPerSlot,280),beamWidth:Math.max(he.beamWidth,2200),maxStates:Math.max(he.maxStates,9e6),rescueWeights:!0,useExhaustiveSmallPool:!0,exhaustiveStateLimit:Math.max(he.exhaustiveStateLimit,12e5)},Et={label:"Exhaustive-ish pass",topKPerSlot:Math.max(he.topKPerSlot,300),beamWidth:Math.max(he.beamWidth,2600),maxStates:Math.max(he.maxStates,12e6),rescueWeights:!0,useExhaustiveSmallPool:!0,exhaustiveStateLimit:Math.max(he.exhaustiveStateLimit,2e6)},xe=Bt=>{switch(Bt){case"fast":return[Ne];case"constraint":return ze?[_e,Mt,Et]:[_e];case"exhaustive":return ze?[_e,Et]:[Et];default:return[Ne,...ze?[Ce,Ve,it]:[]]}},nt=k.length>0?k:["auto"];return nt.length===1&&nt[0]==="auto"?xe("auto"):nt.flatMap(Bt=>xe(Bt))})();let en=[];for(let Ne=0;Ne<_t.length;Ne++){if(Xe.aborted)throw new DOMException("Auto build cancelled","AbortError");const Ce=_t[Ne],Ve={...he,topKPerSlot:Ce.topKPerSlot,beamWidth:Ce.beamWidth,maxStates:Ce.maxStates,useExhaustiveSmallPool:Ce.useExhaustiveSmallPool??he.useExhaustiveSmallPool,exhaustiveStateLimit:Ce.exhaustiveStateLimit??he.exhaustiveStateLimit,weights:Ce.rescueWeights?{...he.weights,legacyBaseDps:he.weights.legacyBaseDps*.6,dpsProxy:he.weights.dpsProxy*.55,legacyEhp:Math.max(he.weights.legacyEhp,1),ehpProxy:Math.max(he.weights.ehpProxy,1),sustain:Math.max(he.weights.sustain,.8),skillPointTotal:Math.max(he.weights.skillPointTotal,.8),reqTotalPenalty:Math.max(he.weights.reqTotalPenalty,1.8)}:he.weights};T(`${Ce.label} (${Ne+1}/${_t.length})  topK ${Ve.topKPerSlot}, beam ${Ve.beamWidth}, maxStates ${Ve.maxStates}`);const it=await n.current.run(X,Ae,Ve,{signal:Xe,onProgress:_e=>{Qt(_e),_e.phase==="diagnostics"&&_e.detail&&(oe.current=_e.detail,Kt(_e.detail)),T(`${Ce.label} (${Ne+1}/${_t.length})  ${_e.phase}: ${_e.expandedSlots}/${_e.totalSlots} slots, beam ${_e.beamSize}, states ${_e.processedStates}${_e.detail?`  ${_e.detail}`:""}`)}});if(it.length>0)return it;en=it}if(en.length===0){const Ne=he.target;if(typeof Ne.minDpsProxy=="number"||typeof Ne.minEhpProxy=="number"||typeof Ne.minSkillPointTotal=="number"||(Ne.customNumericRanges?.length??0)>0){T("Threshold rescue pass  topK 180, beam 3600, maxStates 2200000");const Ve={...he,weights:Hf(he.target,he.weights),topKPerSlot:Math.max(he.topKPerSlot,180),beamWidth:Math.max(he.beamWidth,3600),maxStates:Math.max(he.maxStates,22e5)},it=await n.current.run(X,Ae,Ve,{signal:Xe,onProgress:_e=>{Qt(_e),_e.phase==="diagnostics"&&_e.detail&&(oe.current=_e.detail,Kt(_e.detail)),T(`Threshold rescue pass  ${_e.phase}: ${_e.expandedSlots}/${_e.totalSlots} slots, beam ${_e.beamSize}, states ${_e.processedStates}${_e.detail?`  ${_e.detail}`:""}`)}});if(it.length>0)return it}}return en},yl=async()=>{if(!e.catalog)return;fe(null),B([]),Kt(null),Qt(null),oe.current=null;const X=e0(l,e.catalog),he=e0(r,e.catalog),Ae=zs(u,xe=>xe.toUpperCase()),Xe=zs(g,xe=>xe.toUpperCase()),_t=new Set(e.catalog.facetsMeta.majorIds.map(xe=>xe.toUpperCase())),en=Ae.filter(xe=>!_t.has(xe)),Ne=Xe.filter(xe=>!_t.has(xe)),Ce=y.map(xe=>({key:xe.key.trim(),min:xe.min??void 0,max:xe.max??void 0})).filter(xe=>xe.key&&(typeof xe.min=="number"||typeof xe.max=="number")),Ve=new Set(Object.keys(e.catalog.facetsMeta.numericRanges)),it=Ce.map(xe=>xe.key).filter(xe=>!Ve.has(xe)),_e=Ce.filter(xe=>typeof xe.min=="number"&&typeof xe.max=="number"&&xe.min>xe.max);if(X.unknown.length>0||he.unknown.length>0||en.length>0||Ne.length>0||it.length>0||_e.length>0){fe([X.unknown.length?`Unknown must-include items: ${X.unknown.join(", ")}`:"",he.unknown.length?`Unknown excluded items: ${he.unknown.join(", ")}`:"",en.length?`Unknown required major IDs: ${en.join(", ")}`:"",Ne.length?`Unknown excluded major IDs: ${Ne.join(", ")}`:"",it.length?`Unknown advanced ID keys: ${it.join(", ")}`:"",_e.length?`Invalid advanced ID ranges (min > max): ${_e.map(xe=>xe.key).join(", ")}`:""].filter(Boolean).join(" | "));return}const Mt={...Ca,characterClass:N,level:Math.max(1,Math.min(106,Math.round(M||e.snapshot.level||106))),mustIncludeIds:X.ids,excludedIds:he.ids,lockedSlots:we,target:{customNumericRanges:Ce},allowedTiers:[...I],requiredMajorIds:Ae,excludedMajorIds:Xe,weaponAttackSpeeds:[...L],minPowderSlots:A,onlyPinnedItems:F,useExhaustiveSmallPool:Ge,exhaustiveStateLimit:Math.max(1e3,Math.min(5e6,wt)),weights:bA(x),topN:Math.max(1,Math.min(150,ue)),topKPerSlot:Math.max(10,Math.min(300,ce)),beamWidth:Math.max(20,Math.min(5e3,re))};Pe.current?.abort();const Et=new AbortController;Pe.current=Et,J(!0),T("Starting...");try{const xe=await da(e.catalog,Mt,e.snapshot,Et.signal);if(B(xe),xe.length===0){T(""),Qt(null);const nt=oe.current??"",Bt=/SP-invalid=(\d+)/i.exec(nt),Wt=Bt?Number(Bt[1]):0,tn=/hard=.*?\(speed=(\d+)/i.exec(nt),An=tn?Number(tn[1]):0,kn=/hard=.*?\(speed=\d+,\s*thresholds=(\d+)/i.exec(nt),on=kn?Number(kn[1]):0,Vn=/Tome-assisted final eval still found 0 valid builds/i.test(nt);fe(["No valid candidates found.",oe.current?`Diagnostics: ${oe.current}`:"",Vn?"Even after a tome-assisted feasibility retry, the explored candidate builds still failed skill-point/equip-order feasibility.":Wt>0?"The engine found many full builds, but they failed skill-point/equip-order feasibility. This is not just a UI filter issue.":An>0?"The engine found many full builds, but they failed the final attack-speed target. This usually means the search is missing enough +atkTier support for the selected weapon/target combination.":on>0&&Ce.length>0?"The engine found many full builds, but they failed advanced ID min/max thresholds. This usually means the search is not preserving enough support items for those IDs.":"This usually means your hard constraints are too strict (pinned-only, major IDs, must-includes, attack-speed, or thresholds), or the selected objective conflicts with them.",Vn?"This usually means the current search still is not surfacing enough requirement-support gear for the chosen weapon/goal combination. Try Exact Search + Deep Fallback, Balanced/Tank objective, and pin a few known requirement/attack-speed support items.":Wt>0?"Try switching Primary Goal to Balanced or Tank and keeping Exact Search + Deep Fallback enabled.":An>0?"Tip: keep Exact Search + Deep Fallback enabled, lower thresholds, and try adding/pinning known +Attack Speed Bonus support items for the target speed.":on>0&&Ce.length>0?"Tip: switch Solver Strategy to Constraint-first or Exhaustive-ish and keep Deep Fallback enabled. For strict advanced IDs, add only the most important thresholds first.":"Tip: disable pinned-only first, remove major-ID constraints, then try again."].join(" "))}else T(`Completed. ${xe.length} valid candidates.`)}catch(xe){fe(xe instanceof Error?xe.message:"Auto builder failed"),T("")}finally{J(!1),Qt(null)}},Rn=()=>{Pe.current?.abort(),n.current?.cancelCurrent(),J(!1),T("Cancelled"),Qt(null)},bl=ae??pt,aa=!!ae,Ze=fA(We?.detail),rn=Ze?Ze.spInvalid+Ze.majorIds+Ze.duplicate+Ze.hard:0;return m.jsxs(gh,{open:e.open,onOpenChange:e.onOpenChange,title:"Build Solver",description:"Beam search over item combinations. Uses Workbench summary metrics (legacy-style Base DPS / EHP, ability tree excluded).",className:"!w-[min(95vw,1360px)]",footer:m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("div",{className:"text-sm text-[var(--wb-muted)]",children:W}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(Me,{variant:"ghost",onClick:()=>be(X=>!X),children:ge?"Hide Tips":"Tips"}),q?m.jsx(Me,{variant:"ghost",onClick:Rn,children:"Cancel"}):null,m.jsx(Me,{variant:"primary",onClick:yl,disabled:!e.catalog||q,children:"Generate Candidates"})]})]}),children:[q&&We?m.jsxs("div",{className:"mb-4 rounded-xl border border-sky-400/30 bg-sky-400/5 p-3",children:[m.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:"rounded-md bg-sky-400/20 px-2 py-0.5 text-xs font-medium text-sky-100",children:We.phase==="exact-search"?"Exact search":We.phase==="beam-search"?"Beam search":We.phase==="diagnostics"?"Finalize / diagnostics":We.phase}),We.totalSlots>0?m.jsxs("span",{className:"text-xs text-[var(--wb-muted)]",children:["Slots ",We.expandedSlots,"/",We.totalSlots]}):null]}),m.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-black/20",children:m.jsx("div",{className:"h-full rounded-full bg-sky-400/70 transition-all duration-300",style:{width:We.totalSlots>0?`${100*We.expandedSlots/We.totalSlots}%`:"0%"}})}),m.jsxs("div",{className:"mt-2 flex flex-wrap gap-4 text-xs text-[var(--wb-muted)]",children:[m.jsxs("span",{children:["States: ",We.processedStates.toLocaleString()]}),m.jsxs("span",{children:["Beam: ",We.beamSize.toLocaleString()]})]}),Ze&&rn>0?m.jsxs("div",{className:"mt-3 border-t border-sky-400/20 pt-2",children:[m.jsx("div",{className:"mb-1 text-[11px] font-medium uppercase tracking-wide text-[var(--wb-muted)]",children:"Rejected builds (this pass)"}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ze.spInvalid>0?m.jsxs("span",{className:"rounded bg-rose-400/20 px-1.5 py-0.5 text-[11px] text-rose-200",title:"Skill point / equip feasibility",children:["SP: ",Ze.spInvalid]}):null,Ze.majorIds>0?m.jsxs("span",{className:"rounded bg-amber-400/20 px-1.5 py-0.5 text-[11px] text-amber-200",title:"Major ID requirement",children:["Major ID: ",Ze.majorIds]}):null,Ze.duplicate>0?m.jsxs("span",{className:"rounded bg-slate-400/20 px-1.5 py-0.5 text-[11px] text-slate-200",title:"Duplicate build",children:["Dup: ",Ze.duplicate]}):null,Ze.speed>0?m.jsxs("span",{className:"rounded bg-orange-400/20 px-1.5 py-0.5 text-[11px] text-orange-200",title:"Attack speed",children:["Speed: ",Ze.speed]}):null,Ze.thresholds>0?m.jsxs("span",{className:"rounded bg-amber-400/20 px-1.5 py-0.5 text-[11px] text-amber-200",title:"Min/max thresholds",children:["Thresholds: ",Ze.thresholds]}):null,Ze.item>0?m.jsxs("span",{className:"rounded bg-slate-400/20 px-1.5 py-0.5 text-[11px] text-slate-200",title:"Item constraint",children:["Item: ",Ze.item]}):null]})]}):null]}):null,m.jsxs("div",{className:"grid h-[52vh] min-h-0 gap-4 overflow-hidden lg:h-[56vh] lg:grid-cols-[1fr_1fr] lg:items-stretch",children:[m.jsxs("div",{className:"grid h-full min-h-0 min-w-0 gap-3 overflow-auto pr-1 wb-scrollbar",children:[ge?m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-2 text-sm font-semibold",children:"Tips (New Players)"}),m.jsxs("div",{className:"grid gap-2 text-xs text-[var(--wb-muted)]",children:[m.jsxs("div",{children:["1. Start with a Primary Goal like ",m.jsx("b",{children:"Damage"})," or ",m.jsx("b",{children:"Tank / EHP"}),". Leave most constraints empty."]}),m.jsx("div",{children:"2. Add only a few hard constraints first: class/level, maybe one must-include item."}),m.jsxs("div",{children:["3. If you get 0 candidates, turn off ",m.jsx("b",{children:"Only use pinned items in bins"})," and clear major-ID constraints."]}),m.jsx("div",{children:"4. Build Solver filters out builds that fail skill requirements / equip order feasibility."}),m.jsx("div",{children:"5. Use Workbench bins to guide it: pin good options, then rerun with pinned-only once you have enough items in each slot category."})]})]}):null,m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Optimization"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{children:[m.jsx(Ue,{children:"Primary Goal"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:gA.map(X=>m.jsx(ot,{active:x===X,onClick:()=>S(X),children:mA[X]},X))})]}),m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2 text-xs text-[var(--wb-muted)]",children:"Build Solver always filters out builds that fail skill point/equip-order feasibility. You do not need to set a minimum SP total."})]})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Hard Constraints (Optional)"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{children:[m.jsx(Ue,{children:"Character Class"}),m.jsxs("select",{className:"wb-select",value:N??"",onChange:X=>_(X.target.value||null),children:[m.jsx("option",{value:"",children:"Auto / Any"}),m.jsx("option",{value:"Warrior",children:"Warrior"}),m.jsx("option",{value:"Assassin",children:"Assassin"}),m.jsx("option",{value:"Mage",children:"Mage"}),m.jsx("option",{value:"Archer",children:"Archer"}),m.jsx("option",{value:"Shaman",children:"Shaman"})]})]}),m.jsx(Aa,{label:"Level",value:M,onChange:X=>R(X??e.snapshot.level),min:1,max:106}),m.jsxs("div",{children:[m.jsx(Ue,{children:"Must-Include Items (comma-separated names)"}),m.jsx("textarea",{className:"wb-textarea min-h-20",value:l,onChange:X=>s(X.target.value),placeholder:"Example: Cancer, Stardew"})]}),m.jsxs("div",{children:[m.jsx(Ue,{children:"Excluded Items (comma-separated names)"}),m.jsx("textarea",{className:"wb-textarea min-h-20",value:r,onChange:X=>c(X.target.value),placeholder:"Blacklist item names"})]}),m.jsxs("details",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-medium",children:"Advanced: Specific ID Min / Max"}),m.jsxs("div",{className:"mt-3 grid gap-3",children:[m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Set build-wide min/max totals for any numeric ID (e.g. `mr`, `ms`, `spd`, `reqTotal`, `sdPct`, `poison`, `atkTier`). These are hard constraints."}),y.length===0?m.jsx("div",{className:"rounded-lg border border-dashed border-[var(--wb-border-muted)] px-3 py-2 text-xs text-[var(--wb-muted)]",children:"No advanced ID thresholds yet."}):null,y.map(X=>{const he=e.catalog?.facetsMeta.numericRanges[X.key];return m.jsxs("div",{className:"rounded-lg border border-[var(--wb-border-muted)] p-2",children:[m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsxs("div",{children:[m.jsx(Ue,{children:"ID"}),m.jsx("select",{className:"wb-select w-full",value:X.key,onChange:Ae=>zt(X.id,{key:Ae.target.value}),children:sn.map(Ae=>m.jsxs("option",{value:Ae,children:[pf(Ae)," (",Ae,")"]},Ae))})]}),m.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[m.jsxs("div",{className:"min-w-[80px] flex-1",children:[m.jsx(Ue,{children:"Min"}),m.jsx("input",{className:"wb-input w-full",type:"number",value:X.min??"",onChange:Ae=>{const Xe=Ae.target.value.trim();zt(X.id,{min:Xe===""?null:Number(Xe)})}})]}),m.jsxs("div",{className:"min-w-[80px] flex-1",children:[m.jsx(Ue,{children:"Max"}),m.jsx("input",{className:"wb-input w-full",type:"number",value:X.max??"",onChange:Ae=>{const Xe=Ae.target.value.trim();zt(X.id,{max:Xe===""?null:Number(Xe)})}})]}),m.jsx(Me,{variant:"ghost",className:"shrink-0",onClick:()=>bn(X.id),children:"Remove"})]})]}),he?m.jsxs("div",{className:"mt-1 text-[11px] text-[var(--wb-muted)]",children:["Catalog item range: ",he.min," to ",he.max," (per item)"]}):null]},X.id)}),m.jsx("div",{children:m.jsx(Me,{variant:"ghost",onClick:Jt,disabled:sn.length===0,children:"Add ID Threshold"})}),x==="constraints"&&!V?m.jsx("div",{className:"mt-1 rounded-lg border border-amber-400/40 bg-amber-400/10 p-2 text-[11px] text-amber-50",children:"Advanced IDs preset is selected as Primary Goal, but no ID has both Min and Max set. Add at least one ID with a Min and Max, or switch primary goal. You can still run the solver without this."}):null]})]})]})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Solver Strategy"}),m.jsx("div",{className:"grid gap-3",children:m.jsxs("div",{children:[m.jsx(Ue,{children:"Strategies (select one or more; All is exclusive)"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:pA.map(X=>{const he=X==="auto",Ae=k.length===1&&k[0]==="auto",Xe=he?Ae:k.includes(X),_t=he&&!Ae;return m.jsx(ot,{active:Xe,disabled:_t,onClick:()=>{if(_t)return;if(he){G(["auto"]);return}if(Ae){G([X]);return}const Ne=k.includes(X)?k.filter(Ve=>Ve!==X):[...k,X],Ce=Ne.length===3&&Ne.includes("fast")&&Ne.includes("constraint")&&Ne.includes("exhaustive");G(Ne.length>0?Ce?["auto"]:Ne:["auto"])},children:t0[X]},X)})}),m.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:k.length===1&&k[0]==="auto"?"Starts fast, then retries deeper if needed.":k.includes("fast")&&!k.includes("constraint")&&!k.includes("exhaustive")?"Single fast pass. Lowest wait time, weakest fallback.":k.includes("constraint")?"Constraint-first helps strict attack-speed or advanced ID min/max.":k.includes("exhaustive")?"Exhaustive-ish: highest search budget, strongest fallback.":"Selected strategies run in order (fast  constraint  exhaustive)."})]})})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Pool Filters"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsx(Aa,{label:"Min Powder Slots",value:A,onChange:D,min:0,max:6}),m.jsxs("div",{children:[m.jsx(Ue,{children:"Allowed Tiers (optional)"}),m.jsxs("div",{className:"flex flex-wrap gap-2",children:[Ee.map(X=>m.jsx(ot,{active:I.includes(X),onClick:()=>O(he=>Oo(he,X)),children:X},X)),Ee.length===0?m.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:"Catalog not loaded."}):null]})]}),m.jsxs("div",{children:[m.jsx(Ue,{children:"Final Weapon Attack Speed (optional hard constraint)"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:hA.map(X=>m.jsx(ot,{active:L.includes(X),onClick:()=>H(he=>Oo(he,X)),children:X},X))}),m.jsx("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:"Matches the completed build attack speed (weapon base speed plus total Attack Speed Bonus / `atkTier`)."})]}),m.jsx(ot,{active:F,onClick:()=>ie(X=>!X),children:"Only use pinned items in bins"}),m.jsxs("div",{children:[m.jsx(Ue,{children:"Required Major IDs (build must include all)"}),m.jsx("textarea",{className:"wb-textarea min-h-16",value:u,onChange:X=>f(X.target.value),placeholder:"Example: HAWKEYE, GREED"})]}),m.jsxs("div",{children:[m.jsx(Ue,{children:"Excluded Major IDs (avoid any item with these)"}),m.jsx("textarea",{className:"wb-textarea min-h-16",value:g,onChange:X=>p(X.target.value),placeholder:"Example: NAPALM"})]}),ke.length>0?m.jsxs("div",{children:[m.jsx(Ue,{children:"Major ID Quick Picks"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:ke.map(X=>{const he=zs(u,Xe=>Xe.toUpperCase()),Ae=zs(g,Xe=>Xe.toUpperCase());return m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsxs(ot,{active:he.includes(X.toUpperCase()),onClick:()=>{f(Xe=>Oo(zs(Xe,_t=>_t.toUpperCase()),X.toUpperCase()).join(", "))},title:`Require ${X}`,children:["+",X]}),m.jsxs(ot,{active:Ae.includes(X.toUpperCase()),onClick:()=>{p(Xe=>Oo(zs(Xe,_t=>_t.toUpperCase()),X.toUpperCase()).join(", "))},title:`Exclude ${X}`,children:["-",X]})]},X)})})]}):null]})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Search Heuristics"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsx(ot,{active:ze,onClick:()=>Oe(X=>!X),children:"Deep fallback if 0 results"}),m.jsx(ot,{active:Ge,onClick:()=>kt(X=>!X),children:"Exact search for small pools"}),m.jsx(Aa,{label:"Exact Search Combination Limit",value:wt,onChange:X=>Cn(X??Ca.exhaustiveStateLimit),min:1e3,max:5e6}),m.jsx(Aa,{label:"Beam Width",value:re,onChange:X=>Q(X??Ca.beamWidth),min:20,max:5e3}),m.jsx(Aa,{label:"Top K per Slot",value:ce,onChange:X=>z(X??Ca.topKPerSlot),min:10,max:300}),m.jsx(Aa,{label:"Top N Results",value:ue,onChange:X=>de(X??Ca.topN),min:1,max:150}),m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2 text-xs text-[var(--wb-muted)]",children:["Locked slots from the Workbench will be preserved. Current locks: ",Object.values(we).filter(Boolean).length,F?" | Candidate pools restricted to pinned bins.":"",k.length>0&&!(k.length===1&&k[0]==="auto")?` | Strategy: ${k.map(X=>t0[X]).join("  ")}.`:"",ze?" | Auto retries with deeper search if fast pass finds 0 candidates.":"",Ge?` | Exact enumeration is used automatically when pool combinations are <= ${Math.round(wt).toLocaleString()}.`:""]})]})]})]}),m.jsx("div",{className:"h-full min-h-0 min-w-0",children:m.jsxs("div",{className:"wb-card flex h-full min-h-0 flex-col overflow-hidden p-3",children:[m.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[m.jsx("div",{className:"text-sm font-semibold",children:"Candidates"}),m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[le.length," shown"]})]}),m.jsx("div",{className:"min-h-0 flex-1 space-y-2 overflow-auto pr-1 wb-scrollbar",children:le.length===0?m.jsx("div",{className:"rounded-xl border border-dashed border-[var(--wb-border)] p-4 text-sm text-[var(--wb-muted)]",children:"Run Build Solver to generate candidate builds."}):le.map((X,he)=>m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3",children:[m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"text-sm font-semibold",children:["#",he+1," | Score ",Math.round(X.score).toLocaleString()]}),m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Base DPS ",Math.round(X.summary.derived.legacyBaseDps)," | EHP ",Math.round(X.summary.derived.legacyEhp)," | Req ",X.summary.derived.reqTotal," | MR ",X.summary.aggregated.mr]}),m.jsxs("div",{className:"mt-1 text-xs text-emerald-200",children:["SP Valid | Assigned SP ",Math.round(X.summary.derived.assignedSkillPointsRequired)]})]}),m.jsx(Me,{className:"px-2 py-1 text-xs",onClick:()=>e.onLoadCandidate(X),children:"Load into Workbench"})]}),m.jsx("div",{className:"mt-2 grid grid-cols-1 gap-1 text-xs sm:grid-cols-2 xl:grid-cols-3",children:tt.map(Ae=>m.jsxs("div",{className:"min-w-0 rounded-md border border-[var(--wb-border-muted)] bg-black/10 px-2 py-1",children:[m.jsx("div",{className:"text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:Ae}),m.jsx("div",{className:"truncate",children:X.slots[Ae]!=null?e.catalog?.itemsById.get(X.slots[Ae])?.displayName??X.slots[Ae]:"Empty"})]},Ae))})]},`${X.score}-${he}`))}),bl?m.jsxs("details",{className:`mt-2 rounded-xl border p-2 ${aa?"border-rose-400/30 bg-rose-400/8 text-rose-100":"border-sky-400/20 bg-sky-400/5 text-sky-100"}`,children:[m.jsx("summary",{className:"cursor-pointer list-none text-xs font-medium",children:aa?"Run issue (click to expand)":"Diagnostics (click to expand)"}),m.jsx("div",{className:"mt-2 text-xs leading-relaxed",children:bl})]}):null]})})]})]})}const SA=["Warrior","Assassin","Mage","Archer","Shaman"],vf=[0,1,2,2,3,3,4,4,5,5,6,6,7,8,8,9,9,10,11,11,12,12,13,14,14,15,16,16,17,17,18,18,19,19,20,20,20,21,21,22,22,23,23,23,24,24,25,25,26,26,27,27,28,28,29,29,30,30,31,31,32,32,33,33,34,34,34,35,35,35,36,36,36,37,37,37,38,38,38,38,39,39,39,39,40,40,40,40,41,41,41,41,42,42,42,42,43,43,43,43,44,44,44,44,45,45,45];function Ll(e,n=0){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const l=Number(e);if(Number.isFinite(l))return l}return n}function Ui(e){return typeof e=="string"?e:""}function yf(e){return Array.isArray(e)?e.map(n=>Ll(n,Number.NaN)).filter(n=>Number.isFinite(n)).map(n=>Math.trunc(n)):[]}function wA(e){const n=Ll(e.id,Number.NaN);if(!Number.isFinite(n))return null;const l=Ll(e.display?.row,0),s=Ll(e.display?.col,0);return{id:Math.trunc(n),displayName:Ui(e.display_name)||`Ability ${n}`,descriptionHtml:Ui(e.desc),parents:yf(e.parents),dependencies:yf(e.dependencies),blockers:yf(e.blockers),cost:Math.max(0,Math.trunc(Ll(e.cost,1))),archetype:Ui(e.archetype).trim()||null,archetypeReq:Math.max(0,Math.trunc(Ll(e.archetype_req,0))),reqArchetype:Ui(e.req_archetype).trim()||null,baseAbilityId:e.base_abil==null?null:Math.trunc(Ll(e.base_abil,Number.NaN)),display:{row:Math.max(0,Math.trunc(l)),col:Math.max(0,Math.trunc(s)),icon:Ui(e.display?.icon)||"node_0"},properties:typeof e.properties=="object"&&e.properties?e.properties:{},effects:Array.isArray(e.effects)?e.effects.filter(r=>!!r&&typeof r=="object"):[]}}function _A(e,n){const l=n.map(wA).filter(u=>u!==null).sort((u,f)=>{const g=u.display.row-f.display.row;if(g!==0)return g;const p=u.display.col-f.display.col;return p!==0?p:u.id-f.id}),s=new Map;let r=0,c=0;for(const u of l)s.set(u.id,u),r=Math.max(r,u.display.row),c=Math.max(c,u.display.col);return{className:e,nodes:l,nodeById:s,maxRow:r,maxCol:c}}function EA(e,n){const l={};for(const s of SA){const r=Array.isArray(e[s])?e[s]:[];l[s]=_A(s,r)}return{version:n,classes:l}}function NA(e){if(!Number.isFinite(e))return 45;const n=Math.trunc(e);return n>=vf.length?45:n<1?vf[1]:vf[n]??45}function bf(e,n,l,s,r){if(e.parents.length===0)return e.cost>r?{ok:!1,hardBlocked:!1,reason:"not enough ability points left"}:{ok:!0,hardBlocked:!1,reason:""};const c=e.dependencies.filter(g=>!l.has(g));if(c.length>0)return{ok:!1,hardBlocked:!0,reason:`missing dep: ${c.map(p=>`"${n.nodeById.get(p)?.displayName??p}"`).join(", ")}`};const u=e.blockers.filter(g=>l.has(g));if(u.length>0)return{ok:!1,hardBlocked:!0,reason:`blocked by: ${u.map(p=>`"${n.nodeById.get(p)?.displayName??p}"`).join(", ")}`};if(!e.parents.some(g=>l.has(g)))return{ok:!1,hardBlocked:!1,reason:"not reachable"};if(e.archetypeReq>0){const g=e.reqArchetype||e.archetype,p=g?s.get(g)??0:0;if(!g||p<e.archetypeReq)return{ok:!1,hardBlocked:!1,reason:`${g??"Archetype"}: ${p} < ${e.archetypeReq}`}}return e.cost>r?{ok:!1,hardBlocked:!1,reason:"not enough ability points left"}:{ok:!0,hardBlocked:!1,reason:""}}function TA(e,n,l){const s=new Set(n.filter(M=>e.nodeById.has(M)));let r=new Set(s),c=e.nodes.filter(M=>r.has(M.id));const u=new Set,f=new Map;let g=0;const p=new Map;for(;;){let M=!1;const R=[];for(const I of c){const O=bf(I,e,u,f,9999);if(!O.ok){R.push(I),p.set(I.id,{reason:O.reason,hardBlocked:O.hardBlocked});continue}p.delete(I.id),u.add(I.id),r.delete(I.id),g+=I.cost,I.archetype&&f.set(I.archetype,(f.get(I.archetype)??0)+1),M=!0}if(c=R,!M)break}const y=NA(l),v=y-g,x=[];for(const M of e.nodes){if(u.has(M.id))continue;bf(M,e,u,f,v).ok&&x.push(M.id)}const S={};for(const M of e.nodes){if(u.has(M.id)){S[M.id]={active:!0,selectable:!0,hardBlocked:!1,reason:null};continue}const R=p.get(M.id);if(R){S[M.id]={active:!1,selectable:!1,hardBlocked:R.hardBlocked,reason:R.reason};continue}const I=bf(M,e,u,f,v);S[M.id]={active:!1,selectable:I.ok,hardBlocked:I.hardBlocked,reason:I.ok?null:I.reason}}const N=[];let _=!1;g>y&&N.push(`too many ability points assigned! (${g} > ${y})`);for(const M of c){const R=p.get(M.id);R&&(R.hardBlocked&&(_=!0),N.push(`${M.displayName}: ${R.reason}`))}return{apCap:y,apUsed:g,apRemaining:v,reachable:u,pending:c,unresolved:p,availableIds:x,errors:N,hardErrors:_,archetypeCounts:f,nodeStatusById:S}}function Nc(e,n,l){const s=TA(e,n,l),r=e.nodes.filter(f=>s.reachable.has(f.id)).map(f=>f.id),c=s.pending.map(f=>f.id),u=Object.fromEntries([...s.archetypeCounts.entries()].sort((f,g)=>f[0].localeCompare(g[0])));return{className:e.className,level:l,apCap:s.apCap,apUsed:s.apUsed,apRemaining:s.apRemaining,selectedIdsInput:[...n],activeIds:r,unresolvedIds:c,availableIds:s.availableIds,hardErrors:s.hardErrors,errors:s.errors,archetypeCounts:u,nodeStatusById:s.nodeStatusById}}function MA(e,n,l){let s=[...new Set(n)].filter(r=>e.nodeById.has(r));for(;;){const r=Nc(e,s,l);if(r.unresolvedIds.length===0&&r.apUsed<=r.apCap)return r.activeIds;const c=new Set(r.activeIds),u=s.filter(f=>c.has(f));if(u.length===s.length)return u;s=u}}function DA(e,n,l,s){if(!e.nodeById.has(l))return[...n];const r=new Set(n);return r.has(l)?(r.delete(l),MA(e,[...r],s)):Nc(e,n,s).nodeStatusById[l]?.selectable?(r.add(l),e.nodes.filter(f=>r.has(f.id)).map(f=>f.id)):[...n]}function zx(e,n){return!e||!n?null:e.classes[n]??null}function jA(e){return e.length>20?`${e.slice(0,19)}`:e}function CA(e,n){return e??n??null}function RA(e){const n=CA(e.selectedClass,e.inferredClass),l=w.useMemo(()=>zx(e.dataset,n),[e.dataset,n]),s=w.useMemo(()=>n?e.selectionsByClass[n]??[]:[],[e.selectionsByClass,n]),r=w.useMemo(()=>l?Nc(l,s,e.level):null,[l,s,e.level]),[c,u]=w.useState(null);w.useEffect(()=>{if(!l){u(null);return}c!=null&&l.nodeById.has(c)||u(r?.activeIds[0]??l.nodes[0]?.id??null)},[l,c,r]);const f=w.useMemo(()=>!l||c==null?null:l.nodeById.get(c)??null,[l,c]),g=S=>{n&&e.onSelectionsChange({...e.selectionsByClass,[n]:S})},p=S=>{if(!l||!n)return;const N=DA(l,s,S,e.level);g(N),u(S)},y=()=>{n&&e.onSelectionsChange({...e.selectionsByClass,[n]:[]})},v=r?.activeIds.length??0,x=l?{gridTemplateColumns:`repeat(${Math.max(1,l.maxCol+1)}, minmax(56px, 1fr))`,gridTemplateRows:`repeat(${Math.max(1,l.maxRow+1)}, minmax(56px, auto))`}:void 0;return m.jsx(gh,{open:e.open,onOpenChange:e.onOpenChange,title:"Ability Tree",description:"Legacy ability tree data and activation rules integrated into Workbench. Effects are tracked here, but Workbench DPS/EHP still excludes ability-tree math for now.",className:"w-[min(97vw,1320px)]",footer:m.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:n?`Editing ${n} tree at level ${e.level}.`:"Select a class (or equip a class weapon) to start editing an ability tree."}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx(Me,{variant:"ghost",onClick:y,disabled:!n||v===0,children:"Reset Tree"}),m.jsx(Me,{onClick:()=>e.onOpenChange(!1),children:"Done"})]})]}),children:e.loading?m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-4 text-sm text-[var(--wb-muted)]",children:"Loading ability tree data..."}):e.error?m.jsx("div",{className:"rounded-xl border border-rose-400/30 bg-rose-400/8 p-4 text-sm text-rose-100",children:e.error}):n?!l||!r?m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-4 text-sm text-[var(--wb-muted)]",children:["No ability tree data available for ",n,"."]}):m.jsxs("div",{className:"grid min-h-0 grid-cols-1 gap-3 xl:grid-cols-[minmax(0,1fr)_360px]",children:[m.jsxs("div",{className:"min-h-0 space-y-3",children:[m.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-4",children:[m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"AP"}),m.jsxs("div",{className:"mt-1 text-lg font-semibold",children:[r.apUsed," / ",r.apCap]}),m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[r.apRemaining," left"]})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Selected"}),m.jsx("div",{className:"mt-1 text-lg font-semibold",children:r.activeIds.length}),m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[r.availableIds.length," available next"]})]}),m.jsxs("div",{className:"wb-card p-3 sm:col-span-2",children:[m.jsxs("div",{className:"mb-2 flex items-center gap-2 text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:[m.jsx(hE,{size:12}),"Archetypes"]}),m.jsx("div",{className:"flex flex-wrap gap-1",children:Object.keys(r.archetypeCounts).length===0?m.jsx("span",{className:"text-xs text-[var(--wb-muted)]",children:"No archetype points yet."}):Object.entries(r.archetypeCounts).map(([S,N])=>m.jsxs("span",{className:"wb-chip",children:[S,": ",N]},S))})]})]}),r.errors.length>0?m.jsxs("div",{className:"rounded-xl border border-amber-400/25 bg-amber-400/8 p-3",children:[m.jsxs("div",{className:"mb-2 flex items-center gap-2 text-xs font-semibold text-amber-100",children:[m.jsx(vE,{size:14}),"Tree Validation (",r.hardErrors?"hard":"soft"," issues)"]}),m.jsx(Zs,{className:"max-h-28",children:m.jsx("div",{className:"grid gap-1",children:r.errors.map((S,N)=>m.jsx("div",{className:"text-xs text-amber-100/95",children:S},`${S}-${N}`))})})]}):null,m.jsx(Hs,{title:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(B0,{size:14}),n," Tree"]}),headerRight:m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:e.selectedClass?"Using selected class":e.inferredClass?"Using weapon-inferred class":""}),className:"min-h-0",children:m.jsx(Zs,{className:"max-h-[52vh] p-3",children:m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/15 p-2",children:m.jsx("div",{className:"grid gap-2",style:x,children:l.nodes.map(S=>{const N=r.nodeStatusById[S.id],_=!!N?.active,M=!!N?.selectable,R=!!N?.hardBlocked;return m.jsxs("button",{type:"button",className:["rounded-xl border p-2 text-left transition",_?"border-cyan-300/40 bg-cyan-300/12 shadow-[0_0_0_1px_rgba(34,211,238,.15)]":M?"border-emerald-400/30 bg-emerald-400/7 hover:bg-emerald-400/12":R?"border-rose-400/25 bg-rose-400/7":"border-[var(--wb-border-muted)] bg-black/15"].join(" "),style:{gridColumnStart:S.display.col+1,gridRowStart:S.display.row+1},title:N?.reason??"",onClick:()=>p(S.id),onMouseEnter:()=>u(S.id),onFocus:()=>u(S.id),children:[m.jsxs("div",{className:"text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:["#",S.id]}),m.jsx("div",{className:"mt-1 text-xs font-semibold leading-tight",children:jA(S.displayName)}),m.jsxs("div",{className:"mt-1 flex items-center justify-between gap-2 text-[10px]",children:[m.jsxs("span",{className:"text-[var(--wb-muted)]",children:["AP ",S.cost]}),S.archetype?m.jsx("span",{className:"wb-chip px-1.5 py-0.5",children:S.archetype}):null]})]},S.id)})})})})})]}),m.jsxs("div",{className:"min-h-0 space-y-3",children:[m.jsx(Hs,{title:m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(Q_,{size:14}),"Node Details"]}),className:"min-h-0",children:m.jsx("div",{className:"space-y-3 p-3",children:f?m.jsxs(m.Fragment,{children:[m.jsxs("div",{children:[m.jsx("div",{className:"text-base font-semibold",children:f.displayName}),m.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[m.jsxs("span",{className:"wb-chip",children:["AP ",f.cost]}),f.archetype?m.jsx("span",{className:"wb-chip",children:f.archetype}):null,f.archetypeReq>0?m.jsxs("span",{className:"wb-chip",children:["Req ",f.reqArchetype||f.archetype||"Archetype",": ",f.archetypeReq]}):null,r.nodeStatusById[f.id]?.reason?m.jsx("span",{className:"wb-chip text-amber-100",children:r.nodeStatusById[f.id]?.reason}):null]})]}),m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs leading-relaxed text-[var(--wb-text)] [&_br]:block [&_br]:content-[''] [&_span]:text-inherit",dangerouslySetInnerHTML:{__html:f.descriptionHtml||'<span class="text-slate-400">No description.</span>'}}),m.jsxs("div",{className:"grid gap-2 text-xs",children:[m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[m.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Parents"}),m.jsx("div",{className:"mt-1",children:f.parents.length===0?"Root node":f.parents.map(S=>l.nodeById.get(S)?.displayName??`#${S}`).join("  ")})]}),f.dependencies.length>0?m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[m.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Dependencies"}),m.jsx("div",{className:"mt-1",children:f.dependencies.map(S=>l.nodeById.get(S)?.displayName??`#${S}`).join("  ")})]}):null,f.blockers.length>0?m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-2",children:[m.jsx("div",{className:"text-[11px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Blockers"}),m.jsx("div",{className:"mt-1",children:f.blockers.map(S=>l.nodeById.get(S)?.displayName??`#${S}`).join("  ")})]}):null]})]}):m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs text-[var(--wb-muted)]",children:"Hover or focus an ability node to inspect it here."})})}),m.jsx(Hs,{title:"Selected Abilities",className:"min-h-0",children:m.jsx(Zs,{className:"max-h-[28vh] p-3",children:r.activeIds.length===0?m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3 text-xs text-[var(--wb-muted)]",children:"No abilities selected yet."}):m.jsx("div",{className:"grid gap-1",children:r.activeIds.map(S=>{const N=l.nodeById.get(S);return N?m.jsx(ot,{className:"justify-start text-left",active:c===S,onClick:()=>u(S),title:`AP ${N.cost}`,children:N.displayName},S):null})})})})]})]}):m.jsx("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-4 text-sm text-[var(--wb-muted)]",children:"Pick a class in the Workbench header, or equip a weapon so Workbench can infer the class and load the correct ability tree."})})}const AA=["helmet","chestplate","leggings","boots"],kA=["spear","wand","dagger","bow","relik"],zA=["ring","bracelet","necklace"],OA=["HELMET","CHESTPLATE","LEGGINGS","BOOTS","RELIK","WAND","SPEAR","DAGGER","BOW","RING","NECKLACE","BRACELET","POTION","SCROLL","FOOD"],PA=["1-3","3-5","5-7","7-9","10-13","13-15","15-17","17-19","20-23","23-25","25-27","27-29","30-33","33-35","35-37","37-39","40-43","43-45","45-47","47-49","50-53","53-55","55-57","57-59","60-63","63-65","65-67","67-69","70-73","73-75","75-77","77-79","80-83","83-85","85-87","87-89","90-93","93-95","95-97","97-99","100-103","103-105"],Ox=["SLOW","NORMAL","FAST"];function Sh(e){const n=e.toLowerCase();return AA.includes(n)?"armor":kA.includes(n)?"weapon":zA.includes(n)?"accessory":"consumable"}const Px={offense:1,defense:.6,utility:.4,skillPoints:.3,reqPenalty:.5},Bl={recipeType:"HELMET",levelRange:"103-105",matTiers:null,atkSpd:null,weights:Px,mustIncludeIngredients:[],excludedIngredients:[],topN:30,topKPerSlot:120,beamWidth:400,target:{}},oc=4e3,n0=[0,1,1.25,1.4],Zf=["e","t","w","f","a"],BA=[{min:3,max:6,convert:17,defPlus:2,defMinus:1},{min:5,max:8,convert:21,defPlus:4,defMinus:2},{min:6,max:10,convert:25,defPlus:8,defMinus:3},{min:7,max:10,convert:31,defPlus:14,defMinus:5},{min:9,max:11,convert:38,defPlus:22,defMinus:9},{min:11,max:13,convert:46,defPlus:30,defMinus:13},{min:1,max:8,convert:9,defPlus:3,defMinus:1},{min:1,max:12,convert:11,defPlus:5,defMinus:1},{min:2,max:15,convert:13,defPlus:9,defMinus:2},{min:3,max:15,convert:17,defPlus:14,defMinus:4},{min:4,max:17,convert:22,defPlus:20,defMinus:7},{min:5,max:20,convert:28,defPlus:28,defMinus:10},{min:3,max:4,convert:13,defPlus:3,defMinus:1},{min:4,max:6,convert:15,defPlus:6,defMinus:1},{min:5,max:8,convert:17,defPlus:11,defMinus:2},{min:6,max:8,convert:21,defPlus:18,defMinus:4},{min:7,max:10,convert:26,defPlus:28,defMinus:7},{min:9,max:11,convert:32,defPlus:40,defMinus:10},{min:2,max:5,convert:14,defPlus:3,defMinus:1},{min:4,max:8,convert:16,defPlus:5,defMinus:2},{min:5,max:9,convert:19,defPlus:9,defMinus:3},{min:6,max:9,convert:24,defPlus:16,defMinus:5},{min:8,max:10,convert:30,defPlus:25,defMinus:9},{min:10,max:12,convert:37,defPlus:36,defMinus:13},{min:2,max:6,convert:11,defPlus:3,defMinus:1},{min:3,max:10,convert:14,defPlus:6,defMinus:2},{min:4,max:11,convert:17,defPlus:10,defMinus:3},{min:5,max:11,convert:22,defPlus:16,defMinus:5},{min:7,max:12,convert:28,defPlus:24,defMinus:9},{min:8,max:14,convert:35,defPlus:34,defMinus:13}];function IA(e){return e/6|0}function LA(e){return Zf[IA(e)]}function qA(e){const n=[[100,100],[100,100],[100,100]];for(let l=0;l<6;l++){const r=e[l].posMods,c=Math.floor(l/2),u=l%2;if(r.above!==0)for(let f=c-1;f>=0;f--)n[f][u]+=r.above;if(r.under!==0)for(let f=c+1;f<3;f++)n[f][u]+=r.under;if(r.left!==0&&u===1&&(n[c][u-1]+=r.left),r.right!==0&&u===0&&(n[c][u+1]+=r.right),r.touching!==0)for(let f=0;f<3;f++)for(let g=0;g<2;g++)(Math.abs(f-c)===1&&g===u||f===c&&Math.abs(g-u)===1)&&(n[f][g]+=r.touching);if(r.notTouching!==0)for(let f=0;f<3;f++)for(let g=0;g<2;g++)(Math.abs(f-c)>1||Math.abs(f-c)===1&&Math.abs(g-u)===1)&&(n[f][g]+=r.notTouching)}return n.flat()}function Bx(e,n,l,s){const r=e.type.toLowerCase(),c=Sh(r);let u=!0;for(const z of l)if(z.id!==oc){u=!1;break}let f=0,g=0;(c==="weapon"||c==="armor")&&(e.lvl[0]<30?f=1:e.lvl[0]<70?f=2:f=3),c==="consumable"&&(e.lvl[0]<30?g=1:e.lvl[0]<70?g=2:g=3,u&&(g=3));const p=e.materials.map(z=>z.amount),y=(n0[n[0]]*p[0]+n0[n[1]]*p[1])/(p[0]+p[1]);let v=[e.durability[0],e.durability[1]],x=[e.duration[0],e.duration[1]];c==="consumable"?(u&&(x=[e.basicDuration[0],e.basicDuration[1]]),x=[Math.round(x[0]*y),Math.round(x[1]*y)]):v=[Math.round(v[0]*y),Math.round(v[1]*y)];const S=e.healthOrDamage[0],N=e.healthOrDamage[1];let _=0,M=0,R="0-0",I="0-0";const O={e:0,t:0,w:0,f:0,a:0};if(c==="armor")_=Math.floor(N*y),M=Math.floor(S*y);else if(c==="weapon"){let z=2.05;s==="SLOW"?z/=1.5:s==="NORMAL"?z=1:s==="FAST"&&(z/=2.5);const ue=Math.floor(Math.floor(S*y)*z),de=Math.floor(Math.floor(N*y)*z);I=`${Math.floor(ue*.9)}-${Math.floor(ue*1.1)}`,R=`${Math.floor(de*.9)}-${Math.floor(de*1.1)}`}else c==="consumable"&&u&&(_=Math.floor(N*y),M=Math.floor(S*y));if(c==="armor"||c==="accessory"){for(const z of l)if(z.isPowder&&z.pid!=null){const ue=BA[z.pid],de=LA(z.pid),k=Zf[(Zf.indexOf(de)+4)%5];O[de]=(O[de]||0)+ue.defPlus,O[k]=(O[k]||0)-ue.defMinus}}const L=qA(l),H=[0,0,0,0,0],A={},D={};for(let z=0;z<6;z++){const ue=l[z],de=L[z]/100,k=ue.itemIDs;if(c!=="consumable"){const G=["strReq","dexReq","intReq","defReq","agiReq"];for(let le=0;le<G.length;le++){const B=k[G[le]];B!==0&&(ue.isPowder?H[le]+=Math.round(B):H[le]+=Math.round(B*de))}}k.dura!==0&&(v[0]+=k.dura,v[1]+=k.dura),ue.consumableIDs.dura!==0&&(x[0]+=ue.consumableIDs.dura,x[1]+=ue.consumableIDs.dura),ue.consumableIDs.charges!==0&&(g+=ue.consumableIDs.charges);for(const[G,le]of Object.entries(ue.ids)){if(le.max===0&&le.min===0)continue;let B=le.min,W=le.max;const T=[Math.floor(B*de),Math.floor(W*de)].sort((q,J)=>q-J);B=T[0],W=T[1],D[G]=(D[G]??0)+B,A[G]=(A[G]??0)+W}}return v[0]=Math.max(1,Math.floor(v[0])),v[1]=Math.max(1,Math.floor(v[1])),u||(x[0]=Math.max(10,x[0]),x[1]=Math.max(10,x[1])),g=Math.max(g,c==="consumable"?1:0),{category:c,type:r,lvl:e.lvl[1],hp:_,hpLow:M,nDam:R,nDamLow:I,eDam:"0-0",tDam:"0-0",wDam:"0-0",fDam:"0-0",aDam:"0-0",eDef:O.e,tDef:O.t,wDef:O.w,fDef:O.f,aDef:O.a,atkSpd:s,durability:v,duration:x,charges:g,slots:f,reqs:[H[0],H[1],H[2],H[3],H[4]],effectiveness:L,maxRolls:A,minRolls:D}}function UA(e,n,l,s,r){const c={SLOW:0,NORMAL:1,FAST:2},u=[];function f(v,x){for(let S=x-1;S>=0;S--)u.push(v>>S&1)}f(0,1),f(2,7);for(const v of e)f(v,12);f(n,12),f(l[0]-1,3),f(l[1]-1,3),r==="weapon"&&f(c[s]??0,4);const g=u.length%6;if(g!==0)for(let v=0;v<6-g;v++)u.push(0);const p="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz+-";let y="";for(let v=0;v<u.length;v+=6){let x=0;for(let S=0;S<6;S++)x=x<<1|(u[v+S]??0);y+=p[x]}return"CR-"+y}const Ix=["sdPct","sdRaw","mdPct","mdRaw","damPct","poison","fDamPct","wDamPct","aDamPct","tDamPct","eDamPct","spPct1","spRaw1","spPct2","spRaw2","spPct3","spRaw3","spPct4","spRaw4","rSdRaw","critDamPct"],Lx=["hpBonus","hprRaw","hprPct","fDefPct","wDefPct","aDefPct","tDefPct","eDefPct"],qx=["mr","ms","ls","spd","xpb","lb","ref","thorns","spRegen","eSteal","sprint","sprintReg","jh","lq","gXp","gSpd"],Ux=["str","dex","int","def","agi"];function $x(e,n){let l=0;for(const s of n){const r=e.maxRolls[s]??0;r>0&&(l+=r)}return l}function $A(e,n){let l=0;for(const s of n)l+=e.maxRolls[s]??0;return l}function HA(e){let n=$x(e,Ix);return e.category==="armor"&&(n+=e.hp*.02),n}function ZA(e){let n=$x(e,Lx);return e.category==="armor"&&(n+=e.hp*.15),n+=Math.max(0,e.eDef)+Math.max(0,e.tDef)+Math.max(0,e.wDef)+Math.max(0,e.fDef)+Math.max(0,e.aDef),n}function FA(e){let n=0;const l=e.maxRolls.mr??0,s=e.maxRolls.ms??0,r=e.maxRolls.ls??0,c=e.maxRolls.spd??0;n+=l*12+s*8+r*6+c*3;for(const u of qx){if(u==="mr"||u==="ms"||u==="ls"||u==="spd")continue;const f=e.maxRolls[u]??0;f>0&&(n+=f)}return n}function YA(e){return $A(e,Ux)}function GA(e){let n=0;for(const l of e.reqs)n+=Math.max(0,l);return n}function Hx(e,n){if(n==="durability")return[e.durability[0],e.durability[1]];if(n==="duration")return[e.duration[0],e.duration[1]];const l=e.maxRolls[n]??0;return[l,l]}function VA(e,n){let l=0;for(const[s,r]of Object.entries(n)){const[c,u]=Hx(e,s);if(typeof r.min=="number"&&c<r.min){const f=r.min-c;l+=f*200+f*f}if(typeof r.max=="number"&&u>r.max){const f=u-r.max;l+=f*200+f*f}}return l}function KA(e,n){for(const[l,s]of Object.entries(n)){const[r,c]=Hx(e,l);if(typeof s.min=="number"&&r<s.min||typeof s.max=="number"&&c>s.max)return!1}return!0}function Zx(e,n,l){const s=HA(e)*n.offense,r=ZA(e)*n.defense,c=FA(e)*n.utility,u=YA(e)*n.skillPoints,f=GA(e)*n.reqPenalty,g=VA(e,l.target),p={offense:s,defense:r,utility:c,skillPoints:u,reqPenalty:f,thresholdPenalty:g};return{score:s+r+c+u-f-g,breakdown:p}}function WA(e,n,l){let s=0;for(const[c,u]of Object.entries(e.ids)){const f=u.max;Ix.includes(c)&&f>0?s+=f*n.offense:Lx.includes(c)&&f>0?s+=f*n.defense:qx.includes(c)?c==="mr"?s+=f*12*n.utility:c==="ms"?s+=f*8*n.utility:c==="ls"?s+=f*6*n.utility:c==="spd"?s+=f*3*n.utility:f>0&&(s+=f*n.utility):Ux.includes(c)&&(s+=f*n.skillPoints),l?.has(c)&&f>0&&(s+=f*50)}const r=Math.max(0,e.itemIDs.strReq)+Math.max(0,e.itemIDs.dexReq)+Math.max(0,e.itemIDs.intReq)+Math.max(0,e.itemIDs.defReq)+Math.max(0,e.itemIDs.agiReq);return s-=r*n.reqPenalty*.5,s}function XA(e,n,l){const s=e.recipesByType.get(n.toUpperCase());if(!s)return null;const r=`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()}-${l}`;return s.find(c=>c.name===r)??null}function QA(e,n,l){const s=n.skill.toUpperCase(),r=n.lvl[1],c=new Set(l.excludedIngredients),u=new Set(l.mustIncludeIngredients),f=new Set(Object.keys(l.target)),g=f.size>0,p=[];for(const _ of e.ingredients)_.id===oc||c.has(_.id)||!u.has(_.id)&&(!_.skills.some(I=>I.toUpperCase()===s)||_.lvl>r)||p.push(_);const y=p.map(_=>({ing:_,score:WA(_,l.weights,g?f:void 0)}));y.sort((_,M)=>M.score-_.score);const v=l.topKPerSlot,x=new Set,S=[e.noIngredient];x.add(oc);let N=0;for(const{ing:_}of y)u.has(_.id)&&!x.has(_.id)&&(x.add(_.id),S.push(_));for(const{ing:_}of y)if(!x.has(_.id)&&(x.add(_.id),S.push(_),N++,N>=v))break;if(g){const _=p.filter(R=>!x.has(R.id)).map(R=>{let I=0;for(const O of f){const L=R.ids[O]?.max??0;L>0&&(I+=L)}return{ing:R,tScore:I}}).filter(({tScore:R})=>R>0);_.sort((R,I)=>I.tScore-R.tScore);const M=Math.min(_.length,Math.max(30,Math.floor(v/2)));for(let R=0;R<M;R++){const{ing:I}=_[R];x.has(I.id)||(x.add(I.id),S.push(I))}}return S}function JA(e,n,l,s,r,c){const u=[];for(let p=0;p<6;p++)p<n.length?u.push(l.ingredientsById.get(n[p])??l.noIngredient):u.push(l.noIngredient);const f=Bx(e,r,u,c),{score:g}=Zx(f,s.weights,s);return g}function ek(e){const{catalog:n,constraints:l,signal:s,onProgress:r}=e,c=XA(n,l.recipeType,l.levelRange);if(!c)return[];const u=Sh(c.type.toLowerCase()),f=QA(n,c,l);if(f.length===0)return[];const g=l.matTiers?[l.matTiers]:[[1,1],[1,2],[1,3],[2,1],[2,2],[2,3],[3,1],[3,2],[3,3]],p=u==="weapon"?l.atkSpd?[l.atkSpd]:[...Ox]:["SLOW"],y=g[g.length-1],v=p[0],x=l.beamWidth,S=6;let N=0,_=[{ingredientIds:[],score:0}];for(let F=0;F<S;F++){if(s?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");const ie=[];for(const Q of _)for(const ce of f){if(s?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");const z=[...Q.ingredientIds,ce.id],ue=JA(c,z,n,l,y,v);ie.push({ingredientIds:z,score:ue}),N++}ie.sort((Q,ce)=>ce.score-Q.score),_=ie.slice(0,x);const re=new Set;_=_.filter(Q=>{const ce=Q.ingredientIds.join(",");return re.has(ce)?!1:(re.add(ce),!0)}),r?.({phase:"beam-search",processedStates:N,beamSize:_.length,expandedSlots:F+1,totalSlots:S})}r?.({phase:"material-sweep",processedStates:N,beamSize:_.length,expandedSlots:S,totalSlots:S,detail:`Sweeping ${g.length} tier combos  ${p.length} atk speeds`});const M=new Map;for(const F of _){if(s?.aborted)throw new DOMException("Recipe solver cancelled","AbortError");const ie=F.ingredientIds,re=ie.map(Q=>n.ingredientsById.get(Q)??n.noIngredient);for(const Q of g)for(const ce of p){const z=Bx(c,Q,re,ce),{score:ue,breakdown:de}=Zx(z,l.weights,l),k=UA(ie,c.id,Q,ce,u),G=ie.join(",")+"|"+Q.join(",")+"|"+ce,le=M.get(G);(!le||ue>le.score)&&M.set(G,{recipeId:c.id,ingredientIds:ie,matTiers:Q,atkSpd:ce,effectiveness:z.effectiveness,stats:z,score:ue,scoreBreakdown:de,hash:k}),N++}}const R=Array.from(M.values());R.sort((F,ie)=>ie.score-F.score);const I=Object.keys(l.target).length>0,O=new Set,L=[],H=[];for(const F of R)O.has(F.hash)||(O.add(F.hash),I&&KA(F.stats,l.target)?L.push(F):H.push(F));const A=L.length>0?L.slice(0,l.topN):H.slice(0,l.topN),D=L.length;return r?.({phase:"complete",processedStates:N,beamSize:A.length,expandedSlots:S,totalSlots:S,detail:I?`Found ${A.length} candidates (${D} satisfy thresholds) from ${N} states`:`Found ${A.length} candidates from ${N} states`}),A}class tk{worker=null;requestId=0;currentReject=null;currentRequestId=null;constructor(){typeof Worker<"u"&&(this.worker=new Worker(new URL(""+new URL("worker-runtime-DhSPl4f5.js",import.meta.url).href,import.meta.url),{type:"module"}))}async run(n,l,s={}){if(!this.worker)return ek({catalog:n,constraints:l,onProgress:s.onProgress,signal:s.signal});const r=++this.requestId;return this.currentRequestId=r,new Promise((c,u)=>{this.currentReject=u;const f=()=>{this.worker?.postMessage({type:"cancel",requestId:r}),u(new DOMException("Recipe solver cancelled","AbortError"))};s.signal?.addEventListener("abort",f,{once:!0});const g=p=>{const y=p.data;if(y.requestId===r){if(y.type==="progress"){s.onProgress?.(y.progress);return}if(this.worker?.removeEventListener("message",g),s.signal?.removeEventListener("abort",f),this.currentReject=null,this.currentRequestId=null,y.type==="error"){u(new Error(y.message));return}c(y.candidates)}};this.worker.addEventListener("message",g),this.worker.postMessage({type:"run",requestId:r,catalog:n,constraints:l})})}cancelCurrent(){this.currentRequestId!==null&&(this.worker?.postMessage({type:"cancel",requestId:this.currentRequestId}),this.currentReject?.(new DOMException("Recipe solver cancelled","AbortError")),this.currentReject=null,this.currentRequestId=null)}dispose(){this.worker?.terminate(),this.worker=null}}function $i(e){return e?[e.minimum,e.maximum]:[0,0]}function nk(e){const n={item:e.materials[0].item,amount:e.materials[0].amount},l={item:e.materials[1].item,amount:e.materials[1].amount};return{id:e.id,name:e.name,type:e.type,skill:e.skill,materials:[n,l],healthOrDamage:$i(e.healthOrDamage),durability:$i(e.durability),duration:$i(e.duration),basicDuration:$i(e.basicDuration),lvl:$i(e.lvl)}}function ak(e){const n={};if(e.ids)for(const[c,u]of Object.entries(e.ids))u&&typeof u=="object"&&"minimum"in u&&(n[c]={min:u.minimum,max:u.maximum});const l={left:e.posMods?.left??0,right:e.posMods?.right??0,above:e.posMods?.above??0,under:e.posMods?.under??0,touching:e.posMods?.touching??0,notTouching:e.posMods?.notTouching??0},s={dura:e.itemIDs?.dura??0,strReq:e.itemIDs?.strReq??0,dexReq:e.itemIDs?.dexReq??0,intReq:e.itemIDs?.intReq??0,defReq:e.itemIDs?.defReq??0,agiReq:e.itemIDs?.agiReq??0},r={dura:e.consumableIDs?.dura??0,charges:e.consumableIDs?.charges??0};return{id:e.id,name:e.name,displayName:e.displayName??e.name,lvl:e.lvl,tier:e.tier,skills:e.skills??[],ids:n,itemIDs:s,consumableIDs:r,posMods:l,isPowder:e.isPowder,pid:e.pid}}function lk(){return{id:oc,name:"No Ingredient",displayName:"No Ingredient",lvl:0,tier:0,skills:[],ids:{},itemIDs:{dura:0,strReq:0,dexReq:0,intReq:0,defReq:0,agiReq:0},consumableIDs:{dura:0,charges:0},posMods:{left:0,right:0,above:0,under:0,touching:0,notTouching:0}}}function sk(e,n){const l=new Map,s=new Map;for(const p of e){l.set(p.id,p);const y=p.type.toUpperCase(),v=s.get(y)??[];v.push(p),s.set(y,v)}const r=lk(),c=[r,...n],u=new Map,f=new Map,g=new Map;for(const p of c){u.set(p.id,p),g.set(p.name.toLowerCase(),p.id),p.displayName&&g.set(p.displayName.toLowerCase(),p.id);for(const y of p.skills){const v=y.toUpperCase(),x=f.get(v)??[];x.push(p),f.set(v,x)}}return{recipes:e,recipesById:l,recipesByType:s,ingredients:c,ingredientsById:u,ingredientsBySkill:f,ingredientIdByName:g,noIngredient:r}}async function a0(e){let n=null;for(const l of e)try{const s=await fetch(l,{cache:"force-cache"});if(!s.ok)throw new Error(`HTTP ${s.status} for ${l}`);return await s.json()}catch(s){n=s}throw n instanceof Error?n:new Error("Failed to fetch data")}class ik{snapshotPromise=null;async getCatalog(){return this.snapshotPromise||(this.snapshotPromise=this.load()),this.snapshotPromise}async load(){const n=["./recipes_compress.json","../recipes_compress.json","/workbench/recipes_compress.json","/recipes_compress.json"],l=["./ingreds_compress.json","../ingreds_compress.json","/workbench/ingreds_compress.json","/ingreds_compress.json"],[s,r]=await Promise.all([a0(n),a0(l)]),c=s.recipes.map(nk),u=r.map(ak);return sk(c,u)}}const rk=new ik,ok={helmet:"helmet",chestplate:"chestplate",leggings:"leggings",boots:"boots",ring:"ring1",bracelet:"bracelet",necklace:"necklace",spear:"weapon",bow:"weapon",wand:"weapon",dagger:"weapon",relik:"weapon"},ck={advancedIds:"Advanced IDs only",balanced:"Balanced",offense:"Offense",defense:"Defense",utility:"Utility / Sustain",skillpoints:"Skill Points"},uk=["advancedIds","balanced","offense","defense","utility","skillpoints"];function dk(e){const n={...Px};switch(e){case"advancedIds":return{offense:.25,defense:.25,utility:.25,skillPoints:.25,reqPenalty:.25};case"offense":return{offense:2,defense:0,utility:0,skillPoints:0,reqPenalty:0};case"defense":return{offense:0,defense:2,utility:0,skillPoints:0,reqPenalty:0};case"utility":return{offense:0,defense:0,utility:2,skillPoints:0,reqPenalty:0};case"skillpoints":return{offense:0,defense:0,utility:0,skillPoints:2,reqPenalty:0};default:return n}}const fk={durability:"Durability",duration:"Duration",sdPct:"Spell Dmg %",sdRaw:"Spell Dmg Raw",mdPct:"Melee Dmg %",mdRaw:"Melee Dmg Raw",damPct:"Damage %",poison:"Poison",hpBonus:"HP Bonus",hprRaw:"HPR Raw",hprPct:"HPR %",mr:"Mana Regen",ms:"Mana Steal",ls:"Life Steal",spd:"Walk Speed",xpb:"XP Bonus",lb:"Loot Bonus",ref:"Reflection",thorns:"Thorns",expd:"Exploding",str:"STR",dex:"DEX",int:"INT",def:"DEF",agi:"AGI",eDamPct:"Earth Dmg %",tDamPct:"Thunder Dmg %",wDamPct:"Water Dmg %",fDamPct:"Fire Dmg %",aDamPct:"Air Dmg %",nDamPct:"Neutral Dmg %",rDamPct:"Elem Dmg %",eDefPct:"Earth Def %",tDefPct:"Thunder Def %",wDefPct:"Water Def %",fDefPct:"Fire Def %",aDefPct:"Air Def %",rDefPct:"Elem Def %",atkTier:"Atk Speed Bonus",spRegen:"Soul Point Regen",eSteal:"Emerald Steal",rSdRaw:"Rainbow Spell Raw",critDamPct:"Crit Damage %",spPct1:"1st Spell Cost %",spRaw1:"1st Spell Cost Raw",spPct2:"2nd Spell Cost %",spRaw2:"2nd Spell Cost Raw",spPct3:"3rd Spell Cost %",spRaw3:"3rd Spell Cost Raw",spPct4:"4th Spell Cost %",spRaw4:"4th Spell Cost Raw",sprint:"Sprint",sprintReg:"Sprint Regen",jh:"Jump Height",lq:"Loot Quality",gXp:"Gather XP",gSpd:"Gather Speed",healPct:"Healing %",kb:"Knockback",weakenEnemy:"Weaken Enemy",slowEnemy:"Slow Enemy",maxMana:"Max Mana",mainAttackRange:"Main Attack Range",eDamRaw:"Earth Dmg Raw",tDamRaw:"Thunder Dmg Raw",wDamRaw:"Water Dmg Raw",fDamRaw:"Fire Dmg Raw",aDamRaw:"Air Dmg Raw",nDamRaw:"Neutral Dmg Raw",damRaw:"Damage Raw",rDamRaw:"Elem Dmg Raw"},l0=["durability","duration","hprPct","mr","sdPct","mdPct","ls","ms","xpb","lb","ref","thorns","expd","spd","atkTier","poison","hpBonus","spRegen","eSteal","hprRaw","sdRaw","mdRaw","fDamPct","wDamPct","aDamPct","tDamPct","eDamPct","nDamPct","rDamPct","damPct","fDefPct","wDefPct","aDefPct","tDefPct","eDefPct","rDefPct","spPct1","spRaw1","spPct2","spRaw2","spPct3","spRaw3","spPct4","spRaw4","rSdRaw","sprint","sprintReg","jh","lq","gXp","gSpd","eDamRaw","tDamRaw","wDamRaw","fDamRaw","aDamRaw","nDamRaw","damRaw","rDamRaw","critDamPct","healPct","maxMana","str","dex","int","def","agi"];function Fx(e){return fk[e]??e}const xf={HELMET:"ARMOURING",CHESTPLATE:"TAILORING",LEGGINGS:"TAILORING",BOOTS:"TAILORING",SPEAR:"WEAPONSMITHING",DAGGER:"WEAPONSMITHING",WAND:"WOODWORKING",BOW:"WOODWORKING",RELIK:"WOODWORKING",RING:"JEWELING",NECKLACE:"JEWELING",BRACELET:"JEWELING",POTION:"ALCHEMISM",SCROLL:"SCRIBING",FOOD:"COOKING"};function hk(e){const n=w.useRef(null);n.current||(n.current=new tk);const[l,s]=w.useState(null),[r,c]=w.useState(null),[u,f]=w.useState("HELMET"),[g,p]=w.useState("103-105"),[y,v]=w.useState("auto"),[x,S]=w.useState(3),[N,_]=w.useState(3),[M,R]=w.useState("auto"),[I,O]=w.useState("FAST"),[L,H]=w.useState("advancedIds"),[A,D]=w.useState(""),[F,ie]=w.useState(""),[re,Q]=w.useState([]),ce=w.useRef(1),[z,ue]=w.useState(Bl.beamWidth),[de,k]=w.useState(Bl.topKPerSlot),[G,le]=w.useState(Bl.topN),[B,W]=w.useState([]),[T,q]=w.useState(""),[J,ae]=w.useState(!1),[fe,ge]=w.useState(null),[be,ze]=w.useState(null),[Oe,Ge]=w.useState(null),kt=w.useRef(null),wt=Sh(u.toLowerCase())==="weapon";w.useEffect(()=>{e.open&&(l||rk.getCatalog().then(s).catch(oe=>{c(oe instanceof Error?oe.message:"Failed to load crafting data")}))},[e.open,l]);const Cn=w.useMemo(()=>{if(!l)return 0;const oe=xf[u]??"";return l.ingredientsBySkill.get(oe)?.length??0},[l,u]);function pt(oe){if(!l)return{ids:[],unknown:[]};const Pe=oe.split(",").map(we=>we.trim()).filter(Boolean),V=[],se=[];for(const we of Pe){const Ee=l.ingredientIdByName.get(we.toLowerCase());Ee==null?se.push(we):V.push(Ee)}return{ids:V,unknown:se}}const Kt=oe=>{navigator.clipboard.writeText(oe).then(()=>{Ge(oe),setTimeout(()=>Ge(null),2e3)})},We=async()=>{if(!l)return;ge(null),W([]),ze(null);const oe=pt(A),Pe=pt(F);if(oe.unknown.length>0||Pe.unknown.length>0){ge([oe.unknown.length?`Unknown must-include: ${oe.unknown.join(", ")}`:"",Pe.unknown.length?`Unknown excluded: ${Pe.unknown.join(", ")}`:""].filter(Boolean).join(" | "));return}const V={};for(const Ee of re)Ee.key&&(Ee.min==null&&Ee.max==null||(V[Ee.key]={min:Ee.min??void 0,max:Ee.max??void 0}));const se={...Bl,recipeType:u,levelRange:g,matTiers:y==="manual"?[x,N]:null,atkSpd:wt&&M==="manual"?I:null,weights:dk(L),mustIncludeIngredients:oe.ids,excludedIngredients:Pe.ids,topN:Math.max(1,Math.min(100,G)),topKPerSlot:Math.max(10,Math.min(300,de)),beamWidth:Math.max(20,Math.min(3e3,z)),target:V};kt.current?.abort();const we=new AbortController;kt.current=we,ae(!0),q("Starting...");try{const Ee=await n.current.run(l,se,{signal:we.signal,onProgress:ke=>{ze(ke),q(`${ke.phase}: ${ke.expandedSlots}/${ke.totalSlots} slots, beam ${ke.beamSize}, states ${ke.processedStates}${ke.detail?` | ${ke.detail}`:""}`)}});W(Ee),Ee.length===0?ge("No valid candidates found. Try relaxing constraints, increasing beam width/top K, or choosing a different recipe."):q(`Done. ${Ee.length} candidates found.`)}catch(Ee){Ee instanceof DOMException&&Ee.name==="AbortError"?q("Cancelled"):(ge(Ee instanceof Error?Ee.message:"Recipe solver failed"),q(""))}finally{ae(!1),ze(null)}},Qt=()=>{kt.current?.abort(),n.current?.cancelCurrent(),ae(!1),q("Cancelled"),ze(null)};return m.jsxs(gh,{open:e.open,onOpenChange:e.onOpenChange,title:"Recipe Solver",description:"Find optimal ingredient combinations for crafted items. Uses beam search over the ingredient pool.",className:"!w-[min(95vw,1360px)]",footer:m.jsxs("div",{className:"flex items-center justify-between gap-3",children:[m.jsx("div",{className:"text-sm text-[var(--wb-muted)]",children:T}),m.jsxs("div",{className:"flex gap-2",children:[J?m.jsx(Me,{variant:"ghost",onClick:Qt,children:"Cancel"}):null,m.jsx(Me,{variant:"primary",onClick:We,disabled:!l||J,children:"Solve Recipe"})]})]}),children:[r?m.jsx("div",{className:"mb-4 rounded-xl border border-rose-400/30 bg-rose-400/5 p-3 text-sm text-rose-200",children:r}):null,J&&be?m.jsxs("div",{className:"mb-4 rounded-xl border border-sky-400/30 bg-sky-400/5 p-3",children:[m.jsxs("div",{className:"mb-2 flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:"rounded-md bg-sky-400/20 px-2 py-0.5 text-xs font-medium text-sky-100",children:be.phase}),be.totalSlots>0?m.jsxs("span",{className:"text-xs text-[var(--wb-muted)]",children:["Slots ",be.expandedSlots,"/",be.totalSlots]}):null]}),m.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-black/20",children:m.jsx("div",{className:"h-full rounded-full bg-sky-400/70 transition-all duration-300",style:{width:be.totalSlots>0?`${100*be.expandedSlots/be.totalSlots}%`:"0%"}})}),m.jsxs("div",{className:"mt-2 flex flex-wrap gap-4 text-xs text-[var(--wb-muted)]",children:[m.jsxs("span",{children:["States: ",be.processedStates.toLocaleString()]}),m.jsxs("span",{children:["Beam: ",be.beamSize.toLocaleString()]})]})]}):null,m.jsxs("div",{className:"grid h-[52vh] min-h-0 gap-4 overflow-hidden lg:h-[56vh] lg:grid-cols-[1fr_1fr] lg:items-stretch",children:[m.jsxs("div",{className:"grid h-full min-h-0 min-w-0 gap-3 overflow-auto pr-1 wb-scrollbar",children:[m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Recipe"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{children:[m.jsx(Ue,{children:"Item Type"}),m.jsx("select",{className:"wb-select",value:u,onChange:oe=>f(oe.target.value),children:OA.map(oe=>m.jsxs("option",{value:oe,children:[oe," (",xf[oe],")"]},oe))})]}),m.jsxs("div",{children:[m.jsx(Ue,{children:"Level Range"}),m.jsx("select",{className:"wb-select",value:g,onChange:oe=>p(oe.target.value),children:PA.map(oe=>m.jsx("option",{value:oe,children:oe},oe))})]}),l?m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[Cn," compatible ingredients in pool for ",xf[u]]}):null]})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Material Tiers"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx(ot,{active:y==="auto",onClick:()=>v("auto"),children:"Auto-optimize"}),m.jsx(ot,{active:y==="manual",onClick:()=>v("manual"),children:"Manual"})]}),y==="manual"?m.jsxs("div",{className:"flex gap-3",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx(Ue,{children:"Material 1 Tier"}),m.jsx("div",{className:"flex gap-2",children:[1,2,3].map(oe=>m.jsx(ot,{active:x===oe,onClick:()=>S(oe),children:oe},oe))})]}),m.jsxs("div",{className:"flex-1",children:[m.jsx(Ue,{children:"Material 2 Tier"}),m.jsx("div",{className:"flex gap-2",children:[1,2,3].map(oe=>m.jsx(ot,{active:N===oe,onClick:()=>_(oe),children:oe},oe))})]})]}):null]})]}),wt?m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Attack Speed"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx(ot,{active:M==="auto",onClick:()=>R("auto"),children:"Auto-optimize"}),m.jsx(ot,{active:M==="manual",onClick:()=>R("manual"),children:"Manual"})]}),M==="manual"?m.jsx("div",{className:"flex gap-2",children:Ox.map(oe=>m.jsx(ot,{active:I===oe,onClick:()=>O(oe),children:oe},oe))}):null]})]}):null,m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Optimization Goal"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:uk.map(oe=>m.jsx(ot,{active:L===oe,onClick:()=>H(oe),children:ck[oe]},oe))})]}),m.jsxs("div",{className:"wb-card p-3",children:[m.jsx("div",{className:"mb-3 text-sm font-semibold",children:"Ingredient Constraints"}),m.jsxs("div",{className:"grid gap-3",children:[m.jsxs("div",{children:[m.jsx(Ue,{children:"Must-Include Ingredients (comma-separated)"}),m.jsx("textarea",{className:"wb-textarea min-h-16",value:A,onChange:oe=>D(oe.target.value),placeholder:"e.g. Blueshift Beacon, Depurinated Genome"})]}),m.jsxs("div",{children:[m.jsx(Ue,{children:"Excluded Ingredients (comma-separated)"}),m.jsx("textarea",{className:"wb-textarea min-h-16",value:F,onChange:oe=>ie(oe.target.value),placeholder:"Blacklist ingredient names"})]})]})]}),m.jsx("div",{className:"wb-card p-3",children:m.jsxs("details",{className:"group",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-semibold",children:"Advanced: Stat Thresholds"}),m.jsxs("div",{className:"mt-3 grid gap-3",children:[m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Set minimum / maximum targets for specific stats on the crafted item."}),re.map(oe=>m.jsx("div",{className:"rounded-lg border border-[var(--wb-border-muted)] p-2",children:m.jsxs("div",{className:"flex flex-col gap-2",children:[m.jsxs("div",{children:[m.jsx(Ue,{children:"Stat"}),m.jsx("select",{className:"wb-select w-full",value:oe.key,onChange:Pe=>Q(V=>V.map(se=>se.id===oe.id?{...se,key:Pe.target.value}:se)),children:l0.map(Pe=>m.jsxs("option",{value:Pe,children:[Fx(Pe)," (",Pe,")"]},Pe))})]}),m.jsxs("div",{className:"flex flex-wrap items-end gap-2",children:[m.jsxs("div",{className:"min-w-[80px] flex-1",children:[m.jsx(Ue,{children:"Min"}),m.jsx("input",{className:"wb-input w-full",type:"number",value:oe.min??"",onChange:Pe=>{const V=Pe.target.value.trim();Q(se=>se.map(we=>we.id===oe.id?{...we,min:V===""?null:Number(V)}:we))}})]}),m.jsxs("div",{className:"min-w-[80px] flex-1",children:[m.jsx(Ue,{children:"Max"}),m.jsx("input",{className:"wb-input w-full",type:"number",value:oe.max??"",onChange:Pe=>{const V=Pe.target.value.trim();Q(se=>se.map(we=>we.id===oe.id?{...we,max:V===""?null:Number(V)}:we))}})]}),m.jsx(Me,{variant:"ghost",className:"shrink-0",onClick:()=>Q(Pe=>Pe.filter(V=>V.id!==oe.id)),children:"Remove"})]})]})},oe.id)),m.jsx("div",{children:m.jsx(Me,{variant:"ghost",onClick:()=>Q(oe=>[...oe,{id:ce.current++,key:l0[0],min:null,max:null}]),children:"Add Threshold"})})]})]})}),m.jsx("div",{className:"wb-card p-3",children:m.jsxs("details",{className:"group",children:[m.jsx("summary",{className:"cursor-pointer text-sm font-semibold",children:"Search Heuristics"}),m.jsxs("div",{className:"mt-3 grid gap-3",children:[m.jsx(Aa,{label:"Beam Width",value:z,onChange:oe=>ue(oe??Bl.beamWidth),min:20,max:3e3}),m.jsx(Aa,{label:"Top K per Slot",value:de,onChange:oe=>k(oe??Bl.topKPerSlot),min:10,max:300}),m.jsx(Aa,{label:"Top N Results",value:G,onChange:oe=>le(oe??Bl.topN),min:1,max:100})]})]})})]}),m.jsx("div",{className:"h-full min-h-0 min-w-0",children:m.jsxs("div",{className:"wb-card flex h-full min-h-0 flex-col overflow-hidden p-3",children:[m.jsxs("div",{className:"mb-3 flex items-center justify-between",children:[m.jsx("div",{className:"text-sm font-semibold",children:"Candidates"}),m.jsxs("div",{className:"text-xs text-[var(--wb-muted)]",children:[B.length," shown"]})]}),m.jsx("div",{className:"min-h-0 flex-1 space-y-2 overflow-auto pr-1 wb-scrollbar",children:B.length===0?m.jsx("div",{className:"rounded-xl border border-dashed border-[var(--wb-border)] p-4 text-sm text-[var(--wb-muted)]",children:"Run Recipe Solver to find optimal ingredient combinations."}):B.map((oe,Pe)=>m.jsx(gk,{candidate:oe,index:Pe,catalog:l,copiedHash:Oe,onCopyHash:Kt,onEquipCraft:e.onEquipCraft},`${oe.hash}-${Pe}`))}),fe?m.jsx("div",{className:"mt-2 rounded-xl border border-rose-400/30 bg-rose-400/8 p-2 text-xs text-rose-100",children:fe}):null]})})]})]})}function mk(e){return`../crafter/#${e.startsWith("CR-")?e.slice(3):e}`}function gk(e){const{candidate:n,index:l,catalog:s}=e,{stats:r,scoreBreakdown:c}=n,u=n.ingredientIds.map(v=>{const x=s?.ingredientsById.get(v);return x?.displayName??x?.name??`#${v}`}),f=[];for(const[v,x]of Object.entries(r.maxRolls))x!==0&&f.push({label:Fx(v),value:x>0?`+${x}`:`${x}`});f.sort((v,x)=>{const S=typeof v.value=="string"?parseInt(v.value):v.value,N=typeof x.value=="string"?parseInt(x.value):x.value;return Math.abs(N)-Math.abs(S)});const g=()=>{window.open(mk(n.hash),"_blank","noopener,noreferrer")},p=ok[r.type.toLowerCase()]??null,y=()=>{p&&e.onEquipCraft&&e.onEquipCraft(p,{hash:n.hash,type:r.type,category:r.category,lvl:r.lvl})};return m.jsxs("div",{className:"rounded-xl border border-[var(--wb-border-muted)] bg-black/10 p-3",children:[m.jsxs("div",{className:"flex items-start justify-between gap-3",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"text-sm font-semibold",children:["#",l+1," | Score ",Math.round(n.score)]}),m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Off ",Math.round(c.offense)," | Def ",Math.round(c.defense)," | ","Util ",Math.round(c.utility)," | SP ",Math.round(c.skillPoints),c.reqPenalty>0?` | Req -${Math.round(c.reqPenalty)}`:""]}),m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Mat Tiers: ",n.matTiers[0],"/",n.matTiers[1],r.category==="weapon"?` | Atk Spd: ${n.atkSpd}`:""]})]}),m.jsxs("div",{className:"flex shrink-0 flex-col gap-1",children:[m.jsx(Me,{className:"px-2 py-1 text-xs",onClick:()=>e.onCopyHash(n.hash),children:e.copiedHash===n.hash?"Copied!":"Copy Hash"}),m.jsx(Me,{variant:"ghost",className:"px-2 py-1 text-xs",onClick:g,children:"Open in Crafter"}),p?m.jsx(Me,{className:"border border-emerald-400/40 bg-emerald-400/15 px-2 py-1 text-xs text-emerald-100 hover:bg-emerald-400/25",onClick:y,children:"Use in Build"}):null]})]}),m.jsxs("div",{className:"mt-2",children:[m.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Ingredients (3x2 grid)"}),m.jsx("div",{className:"grid grid-cols-2 gap-1",children:u.map((v,x)=>m.jsxs("div",{className:"rounded-md border border-[var(--wb-border-muted)] bg-black/10 px-2 py-1 text-xs",children:[m.jsx("div",{className:"truncate",children:v}),m.jsxs("div",{className:"text-[10px] text-[var(--wb-muted)]",children:["Eff: ",n.effectiveness[x],"%"]})]},x))})]}),f.length>0?m.jsxs("div",{className:"mt-2",children:[m.jsx("div",{className:"mb-1 text-[10px] uppercase tracking-wide text-[var(--wb-muted)]",children:"Stats (max rolls)"}),m.jsx("div",{className:"flex flex-wrap gap-1",children:f.slice(0,12).map(({label:v,value:x})=>{const S=typeof x=="string"?x.startsWith("+"):x>0;return m.jsxs("span",{className:`rounded px-1.5 py-0.5 text-[11px] ${S?"bg-emerald-400/15 text-emerald-200":"bg-rose-400/15 text-rose-200"}`,children:[v,": ",x]},v)})})]}):null,r.category==="armor"?m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["HP: ",r.hpLow,"-",r.hp," | Dur: ",r.durability[0],"-",r.durability[1],"| Reqs: [",r.reqs.join(", "),"]"]}):null,r.category==="consumable"?m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["Duration: ",r.duration[0],"-",r.duration[1],"s | Charges: ",r.charges]}):null,r.category==="weapon"?m.jsxs("div",{className:"mt-1 text-xs text-[var(--wb-muted)]",children:["nDam: ",r.nDam," | Dur: ",r.durability[0],"-",r.durability[1],"| Reqs: [",r.reqs.join(", "),"]"]}):null]})}const s0="2.1.6.0";function pk(e){return typeof e=="string"&&/^\d+\.\d+\.\d+\.\d+$/.test(e)}function vk(e){return[...new Set(e)]}class yk{cache=new Map;async getDataset(n){const l=pk(n)?n:s0;return this.cache.has(l)||this.cache.set(l,this.loadDataset(l)),this.cache.get(l)}async loadDataset(n){const l=vk([n,s0]),s=[];for(const r of l){const c=this.buildUrls(r);for(const u of c)try{const f=await fetch(u,{cache:"force-cache"});if(!f.ok)throw new Error(`Failed to fetch ${u}: ${f.status}`);const g=await f.json();return EA(g,r)}catch(f){s.push(f instanceof Error?f.message:`Failed to fetch ${u}`)}}throw new Error(`Unable to load ability tree data. Tried versions: ${l.join(", ")}. ${s.slice(-4).join(" | ")}`)}buildUrls(n){return[`./data/${n}/atree.json`,`../data/${n}/atree.json`,`data/${n}/atree.json`,`/workbench/data/${n}/atree.json`,`/data/${n}/atree.json`]}}const bk=new yk;class xk{numeric=new Map;maps=new Map;get(n){return this.maps.has(n)?this.maps.get(n):this.numeric.get(n)??0}getNum(n){const l=this.get(n);return typeof l=="number"?l:0}has(n){return this.maps.has(n)||this.numeric.has(n)}add(n,l){!Number.isFinite(l)||l===0||this.numeric.set(n,(this.numeric.get(n)??0)+l)}set(n,l){Number.isFinite(l)&&this.numeric.set(n,l)}getMap(n){let l=this.maps.get(n);return l||(l=new Map,this.maps.set(n,l)),l}addMap(n,l,s){if(!Number.isFinite(s)||s===0)return;const r=this.getMap(n);r.set(l,(r.get(l)??0)+s)}}const i0=["str","dex","int","def","agi"],Sk=["e","t","w","f","a"],Qn=["n",...Sk],Ff=["SUPER_SLOW","VERY_SLOW","SLOW","NORMAL","FAST","VERY_FAST","SUPER_FAST"],Yf=[.51,.83,1.5,2.05,2.5,3.1,4.3],wk=[1,1,1,.867,.951],_k=[1,1,.5/Tc(150),.867,.951],Ek=["nDam","eDam","tDam","wDam","fDam","aDam"],Nk=["Super Slow","Very Slow","Slow","Normal","Fast","Very Fast","Super Fast"],r0=["str","dex","int","def","agi","sdPct","sdRaw","mdPct","mdRaw","atkTier","damPct","damRaw","rSdPct","rSdRaw","rMdPct","rMdRaw","rDamPct","rDamRaw","critDamPct","healPct","spPct1","spPct2","spPct3","spPct4","spRaw1","spRaw2","spRaw3","spRaw4","spPct1Final","spPct2Final","spPct3Final","spPct4Final","nSdPct","eSdPct","tSdPct","wSdPct","fSdPct","aSdPct","nMdPct","eMdPct","tMdPct","wMdPct","fMdPct","aMdPct","nDamPct","eDamPct","tDamPct","wDamPct","fDamPct","aDamPct","nSdRaw","eSdRaw","tSdRaw","wSdRaw","fSdRaw","aSdRaw","nMdRaw","eMdRaw","tMdRaw","wMdRaw","fMdRaw","aMdRaw","nDamRaw","eDamRaw","tDamRaw","wDamRaw","fDamRaw","aDamRaw","nDamAddMin","nDamAddMax","eDamAddMin","eDamAddMax","tDamAddMin","tDamAddMax","wDamAddMin","wDamAddMax","fDamAddMin","fDamAddMax","aDamAddMin","aDamAddMax","rDamAddMin","rDamAddMax","damAddMin","damAddMax","hp","hpBonus","defMult"];function ct(e,n=0){if(typeof e=="number"&&Number.isFinite(e))return e;if(typeof e=="string"){const l=Number(e);if(Number.isFinite(l))return l}return n}function Tc(e){if(e<=0)return 0;let n=e;n>=150&&(n=150);const l=.9908;return l/(1-l)*(1-Math.pow(l,n))/100}function Tk(e){return Math.max(1,Math.min(106,Math.round(e||1)))*5+5}function Mk(e){if(Array.isArray(e)&&e.length>=2)return[ct(e[0]),ct(e[1])];if(typeof e=="string"){const n=e.match(/(-?\d+(?:\.\d+)?)\s*-\s*(-?\d+(?:\.\d+)?)/);if(n)return[Number(n[1]),Number(n[2])]}return[0,0]}function Dk(e){if(e.category!=="weapon")return null;const n=e.legacyRaw??{},l=Ek.map(r=>Mk(n[r])),s=l.map(([r,c])=>r!==0||c!==0);return{atkSpd:typeof n.atkSpd=="string"&&n.atkSpd?n.atkSpd:e.atkSpd,type:e.type,tier:typeof n.tier=="string"?n.tier:e.tier,damages:l,damagePresent:s}}function jk(e){switch(e){case"bow":return{type:"replace_spell",name:"Bow Shot",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Single Shot",parts:[{name:"Single Shot",multipliers:[100,0,0,0,0,0]}]};case"relik":return{type:"replace_spell",name:"Relik Melee",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Total",parts:[{name:"Single Beam",multipliers:[33,0,0,0,0,0]},{name:"Total",hits:{"Single Beam":3}}]};case"wand":return{type:"replace_spell",name:"Wand Melee",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Melee",parts:[{name:"Melee",multipliers:[100,0,0,0,0,0]}]};default:return{type:"replace_spell",name:"Melee",base_spell:0,scaling:"melee",use_atkspd:!1,display:"Melee",parts:[{name:"Melee",multipliers:[100,0,0,0,0,0]}]}}}function Is(e){return structuredClone(e)}function Sf(e,n){if(typeof n=="string"){const[l,s]=n.split("."),r=Number(l);if(!Number.isFinite(r)||!s)return 0;const c=e.get(r);return ct(c?.properties?.[s])}return ct(n)}function Ck(e,n){const l=new Set(n.activeIds),s=new Map,r=c=>{const u={id:c.id,baseAbilityId:c.baseAbilityId??null,properties:Is(c.properties??{}),effects:Is(c.effects??[])};if(u.baseAbilityId!=null&&s.has(u.baseAbilityId)){const f=s.get(u.baseAbilityId);f.effects=f.effects.concat(u.effects);for(const[g,p]of Object.entries(u.properties))f.properties[g]=ct(f.properties[g])+ct(p);return}s.set(u.id,u)};for(const c of e.nodes)l.has(c.id)&&r(c);return s}function Rk(e,n=[]){const l=new Map;for(const s of n)l.set(s.base_spell,Is(s));for(const[,s]of e)for(const r of s.effects){if(r.type!=="replace_spell")continue;const c=ct(r.base_spell,Number.NaN);if(!Number.isFinite(c))continue;const u=Is(r);let f=l.get(c);if(!f)f=u,l.set(c,f);else for(const[g,p]of Object.entries(u))f[g]=Is(p);for(const g of f.parts??[]){const p=g.hits;if(p)for(const[y,v]of Object.entries(p))p[y]=Sf(e,v)}}for(const[,s]of e)for(const r of s.effects){const c=typeof r.type=="string"?r.type:"";if(c!=="replace_spell"){if(c==="add_spell_prop"){const u=ct(r.base_spell,Number.NaN);if(!Number.isFinite(u)||!l.has(u))continue;const f=l.get(u),g=typeof r.target_part=="string"?r.target_part:null,p=typeof r.behavior=="string"?r.behavior:"merge",y=ct(r.cost);if(typeof f.cost=="number"&&(f.cost+=y),!g)continue;let v=!1;for(const x of f.parts)if(x.name===g){if("multipliers"in r&&Array.isArray(r.multipliers)&&"multipliers"in x)for(let S=0;S<r.multipliers.length;S++){const N=ct(r.multipliers[S]);Array.isArray(x.multipliers)&&(p==="overwrite"?x.multipliers[S]=N:x.multipliers[S]=(x.multipliers[S]??0)+N)}else if("power"in r&&"power"in x){const S=ct(r.power);x.power=p==="overwrite"?S:ct(x.power)+S}else if("hits"in r&&typeof r.hits=="object"&&r.hits&&"hits"in x)for(const[S,N]of Object.entries(r.hits)){const _=Sf(e,N);p==="overwrite"?x.hits[S]=_:x.hits[S]=(x.hits[S]??0)+_}if("hide"in r&&(x.display=!1),"ignored_mults"in r){const S=Array.isArray(r.ignored_mults)?r.ignored_mults.filter(N=>typeof N=="string"):[];"ignored_mults"in x&&Array.isArray(x.ignored_mults)?x.ignored_mults.push(...S):"multipliers"in x&&(x.ignored_mults=S)}v=!0;break}if(!v&&p==="merge"){const x=Is(r);if(x.name=g,typeof x.hits=="object"&&x.hits)for(const[S,N]of Object.entries(x.hits))x.hits[S]=Sf(e,N);"hide"in r&&(x.display=!1),f.parts.push(x)}typeof r.display=="string"&&(f.display=r.display)}else if(c==="convert_spell_conv"){const u=ct(r.base_spell,Number.NaN);if(!Number.isFinite(u)||!l.has(u))continue;const f=l.get(u),g=typeof r.target_part=="string"?r.target_part:"all",p=typeof r.conversion=="string"?r.conversion:"",y=Qn.indexOf(p);if(y<0)continue;const v=g==="all";for(const x of f.parts){if(!("multipliers"in x)||!v&&x.name!==g)continue;const S=x.multipliers.slice(1).reduce((_,M)=>_+ct(M),0),N=[ct(x.multipliers[0]),0,0,0,0,0];N[y]=S,x.multipliers=N}}}}return l}function Ak(e,n,l){let s=!1,r=!1;for(const[,c]of e)for(const u of c.effects){const f=typeof u.type=="string"?u.type:"";if(f==="raw_stat"){if(u.toggle){s=!0;continue}const g=Array.isArray(u.bonuses)?u.bonuses:[];for(const p of g){if(!p||typeof p!="object")continue;const y=typeof p.type=="string"?p.type:"",v=typeof p.name=="string"?p.name:"",x=ct(p.value);!v||x===0||y==="stat"&&(v.startsWith("damMult.")?n.addMap("damMult",v.slice(8),x):v.startsWith("healMult.")?n.addMap("healMult",v.slice(9),x):v.startsWith("defMult.")?n.add("defMult",x):n.add(v,x))}continue}f==="stat_scaling"&&(r=!0)}s&&l.push("Some ability-tree toggle effects are not applied in Workbench spell damage yet."),r&&l.push("Some ability-tree scaling/slider effects are not applied in Workbench spell damage yet.")}function kk(e,n,l){const s=new xk;for(const g of r0)s.set(g,0);s.getMap("damMult"),s.getMap("healMult");let r=0,c=0,u=[0,0,0,0,0];for(const g of tt){const p=e.slots[g];if(p==null)continue;const y=n.itemsById.get(p);if(!y)continue;const v=y.legacyRaw??{};for(const x of r0)s.add(x,ct(v[x]));r+=ct(v.hp),c+=ct(v.hpBonus),u=[u[0]+ct(v.str),u[1]+ct(v.dex),u[2]+ct(v.int),u[3]+ct(v.def),u[4]+ct(v.agi)]}const f=l??[0,0,0,0,0];return s.set("str",u[0]+f[0]),s.set("dex",u[1]+f[1]),s.set("int",u[2]+f[2]),s.set("def",u[3]+f[3]),s.set("agi",u[4]+f[4]),s.set("hp",r+c+Tk(e.level)),s}function zk(e,n,l,s,r=!1,c,u=!1,f=[]){const g=n.damages.map(B=>[...B]),p=[...n.damagePresent],y=l.map(B=>ct(B));for(let B=0;B<Qn.length;B++){const W=c?`:${c}`:"",T=`${Qn[B]}ConvBase${W}`;c&&e.has(T)&&(y[B]+=e.getNum(T));const q=`${Qn[B]}ConvBase`;e.has(q)&&(y[B]+=e.getNum(q))}const v=[],x=(y[0]??0)/100;if(x===0)for(let B=0;B<p.length;B++)p[B]=!1;let S=0,N=0;for(const B of g)v.push([B[0]*x,B[1]*x]),S+=B[0],N+=B[1];let _=0;for(let B=1;B<=5;B++){const W=y[B]??0;if(W>0){const T=W/100;v[B][0]+=T*S,v[B][1]+=T*N,p[B]=!0,_+=T}}if(_+=x,!r){const B=Ff.indexOf(n.atkSpd||"NORMAL"),W=Yf[B>=0?B:3]??Yf[3];for(let T=0;T<v.length;T++)v[T][0]*=W,v[T][1]*=W}for(let B=0;B<Qn.length;B++){if(!p[B])continue;const W=Qn[B];v[B][0]+=e.getNum(`${W}DamAddMin`),v[B][1]+=e.getNum(`${W}DamAddMax`)}const M=s?"Sd":"Md",R=[0];for(let B=0;B<i0.length;B++)R.push(Tc(e.getNum(i0[B]))*wk[B]);const I=(e.getNum(`${M.toLowerCase()}Pct`)+e.getNum("damPct"))/100;let O=0,L=0;const H=[];for(let B=0;B<Qn.length;B++){H.push([...v[B]]),O+=v[B][0],L+=v[B][1];const W=Qn[B],T=`${W}${M}Pct`;let q=1+(R[B]??0)+I+(e.getNum(T)+e.getNum(`${W}DamPct`))/100;B>0&&(q+=(e.getNum(`r${M}Pct`)+e.getNum("rDamPct"))/100),v[B][0]*=q,v[B][1]*=q}const A=O-H[0][0],D=L-H[0][1],F=e.getNum(`${M.toLowerCase()}Raw`)+e.getNum("damRaw"),ie=e.getNum(`r${M}Raw`)+e.getNum("rDamRaw");for(let B=0;B<v.length;B++){const W=H[B],T=Qn[B];let q=0;p[B]&&(q+=e.getNum(`${T}${M}Raw`)+e.getNum(`${T}DamRaw`));let J=q,ae=q;L>0&&(J+=(O===0?W[1]/L:W[0]/O)*F,ae+=W[1]/L*F),B!==0&&D>0&&(J+=(A===0?W[1]/D:W[0]/A)*ie,ae+=W[1]/D*ie),v[B][0]+=J*_,v[B][1]+=ae*_}const re=u?1:1+(R[1]??0),Q=e.getMap("damMult");let ce=1;const z=[1,1,1,1,1,1],ue=[...y];for(const[B,W]of Q.entries())if(!(B.includes(":")&&B.split(":")[1]!==c)&&!f.includes(B))if(B.includes(";")){const T=Qn.indexOf(B.split(";")[1]);T!==-1&&(z[T]*=1+W/100)}else ce*=1+W/100;const de=u?0:1+e.getNum("critDamPct")/100,k=[0,0],G=[0,0],le=[];for(let B=0;B<Qn.length;B++){v[B][0]*=z[B]*ce,v[B][1]*=z[B]*ce,ue[B]*=z[B]*ce,v[B][0]<0&&(v[B][0]=0),v[B][1]<0&&(v[B][1]=0);const W=[v[B][0]*re,v[B][1]*re,v[B][0]*(re+de),v[B][1]*(re+de)];le.push(W),k[0]+=W[0],k[1]+=W[1],G[0]+=W[2],G[1]+=W[3]}return[k,G,le,ue]}function Yx(e,n,l){const s=new Map;for(const p of e.parts)s.set(p.name,{type:"need_eval",store:p});const r="use_atkspd"in e?!!e.use_atkspd:!0,c="scaling"in e?e.scaling==="spell":!0,u=p=>{const y=s.get(p);if(!y)return null;if(y.type!=="need_eval")return y;const v=y.store,x=`${e.base_spell}.${v.name}`;let S;if("multipliers"in v){const N=Array.isArray(v.ignored_mults)?v.ignored_mults:[],_=zk(n,l,v.multipliers.map(M=>ct(M)),c,!r,x,v.use_str===!1,N);S={type:"damage",name:v.name,display:v.display!==!1,normal_total:_[0],crit_total:_[1]}}else if("power"in v){const N=n.getNum("hp"),_=1+n.getNum("healPct")/100;S={type:"heal",name:v.name,display:v.display!==!1,heal_amount:ct(v.power)*N*_}}else{let N=null,_=[0,0],M=[0,0],R=0;for(const[I,O]of Object.entries(v.hits)){const L=u(I);L&&(N&&N!==L.type||(N=L.type,L.type==="damage"?(_=[_[0]+L.normal_total[0]*O,_[1]+L.normal_total[1]*O],M=[M[0]+L.crit_total[0]*O,M[1]+L.crit_total[1]*O]):R+=L.heal_amount*O))}N==="heal"?S={type:"heal",name:v.name,display:v.display!==!1,heal_amount:R}:S={type:"damage",name:v.name,display:v.display!==!1,normal_total:_,crit_total:M}}return s.set(v.name,S),S},f=[],g=Tc(n.getNum("dex"));for(const p of e.parts){const y=u(p.name);if(y)if(y.type==="damage"){const v=(y.normal_total[0]+y.normal_total[1])/2,x=(y.crit_total[0]+y.crit_total[1])/2;f.push({type:"damage",name:y.name,display:y.display,normalTotal:y.normal_total,critTotal:y.crit_total,averageNonCrit:v,averageCrit:x,averageTotal:(1-g)*v+g*x})}else f.push({type:"heal",name:y.name,display:y.display,healAmount:y.heal_amount,averageTotal:y.heal_amount})}return f}function Ok(e){const{spells:n,stats:l,weapon:s}=e,r=n.get(0);if(!r||!Array.isArray(r.parts)||r.parts.length===0)return null;const c=Yx(r,l,s);if(c.length===0)return null;const u=(r.display||"").trim(),f=u&&c.find(x=>x.name===u)||c.find(x=>x.display)||c[0];if(!f||f.type!=="damage")return null;const g=f.averageTotal??0,p=Ff.indexOf(s.atkSpd||"NORMAL"),y=Math.max(0,Math.min(Ff.length-1,(p>=0?p:3)+Math.round(l.getNum("atkTier")))),v=g*Yf[y];return{perAttackAverage:g,dps:v,attackSpeedTier:Nk[y]}}function Pk(e,n){if(typeof n.cost!="number"||n.base_spell<1||n.base_spell>4)return null;const l=n.base_spell;let s=n.cost*(1-Tc(e.getNum("int"))*_k[2]);return s+=e.getNum(`spRaw${l}`),s=s*(1+e.getNum(`spPct${l}`)/100),s=Math.max(1,s*(1+e.getNum(`spPct${l}Final`)/100)),s}function Bk(e){const{catalog:n,snapshot:l,abilityTreeTree:s,abilityTreeEvaluation:r}=e;if(!s||!r)return null;const c=l.slots.weapon;if(c==null)return null;const u=n.itemsById.get(c);if(!u)return null;const f=Dk(u);if(!f)return null;const g={...l.slots},p=ph(g,n,l.level),y=kk(l,n,p.assignedByStat),v=[];p.feasible||v.push("Spell preview uses current build state, but skill-point feasibility is invalid.");const x=Ck(s,r);Ak(x,y,v);const S=Rk(x,[jk(f.type)]),N=Ok({spells:S,stats:y,weapon:f});if(S.size===0)return{melee:N,spells:[],notes:v};const _=[];for(const M of[...S.values()].sort((R,I)=>R.base_spell-I.base_spell)){if(!Array.isArray(M.parts)||M.parts.length===0)continue;const R=Yx(M,y,f);if(R.length===0)continue;const I=(M.display||"").trim(),O=I&&R.find(H=>H.name===I)||R.find(H=>H.display)||R[0];if(!O)continue;const L=O.type==="heal";_.push({baseSpell:M.base_spell,name:M.name,displayPartName:O.name,averageDisplayValue:O.averageTotal??0,isHealing:L,manaCost:Pk(y,M),parts:R})}return r.activeIds.length>0&&_.length===0&&v.push("No spell damage entries found in the selected ability tree nodes."),{melee:N,spells:_,notes:v}}function o0(e){return navigator.clipboard?.writeText?navigator.clipboard.writeText(e):(window.prompt("Copy text:",e),Promise.resolve())}function c0(e){return typeof e!="string"?null:e.startsWith("slot:")?{kind:"slot",slot:e.slice(5)}:e.startsWith("bin:")?{kind:"bin",category:e.slice(4)}:null}function Ik(e,n,l){const s=n.itemsById.get(e);if(!s)return null;const r=s.category;if(l.selectedSlot&&ua(l.selectedSlot)===r)return l.selectedSlot;const c=tt.filter(f=>ua(f)===r);return c.find(f=>l.slots[f]==null)??c[0]??null}function Lk(e){return{slots:{...e.slots},craftedSlots:{...e.craftedSlots},binsByCategory:{helmet:[...e.binsByCategory.helmet],chestplate:[...e.binsByCategory.chestplate],leggings:[...e.binsByCategory.leggings],boots:[...e.binsByCategory.boots],ring:[...e.binsByCategory.ring],bracelet:[...e.binsByCategory.bracelet],necklace:[...e.binsByCategory.necklace],weapon:[...e.binsByCategory.weapon]},locks:{...e.locks},level:e.level,characterClass:e.characterClass,selectedSlot:e.selectedSlot,comparePreview:{...e.comparePreview},legacyHash:e.legacyHash}}function qk(){const e=w.useRef(null);!e.current&&typeof window<"u"&&(e.current=$R(window.location)),w.useEffect(()=>{if(typeof window>"u")return;const{pathname:V,search:se,hash:we}=window.location;if(V.endsWith("/workbench")||V.endsWith("/workbench/")){const ke=(V.replace(/\/workbench\/?$/,"")||"/")+se+we;window.history.replaceState({},"",ke)}},[]);const n=e.current,[l,s]=w.useState(null),[r,c]=w.useState(null),[u,f]=w.useState(n?.search??Yn),[g,p]=w.useState(null),[y,v]=w.useState(!1),[x,S]=w.useState(!1),[N,_]=w.useState(n?.mode==="autobuilder"),[M,R]=w.useState(n?.mode==="abilitytree"),[I,O]=w.useState(!1),[L,H]=w.useState(null),[A,D]=w.useState(!1),[F,ie]=w.useState(null),[re,Q]=w.useState(n?.abilityTree?.selectedByClass??{}),[ce,z]=w.useState(n?.abilityTree?.version??null),[ue,de]=w.useState(""),k=w.useRef(null),G=w.useRef(null),le=w.useRef(null),B=LR(U_(V=>({slots:V.slots,craftedSlots:V.craftedSlots,binsByCategory:V.binsByCategory,locks:V.locks,level:V.level,characterClass:V.characterClass,selectedSlot:V.selectedSlot,comparePreview:V.comparePreview,legacyHash:V.legacyHash,undoStack:V.undoStack,redoStack:V.redoStack,setLevel:V.setLevel,setCharacterClass:V.setCharacterClass,setSelectedSlot:V.setSelectedSlot,setComparePreview:V.setComparePreview,pinItem:V.pinItem,removePinnedItem:V.removePinnedItem,clearCategory:V.clearCategory,clearAll:V.clearAll,equipItem:V.equipItem,equipCraftedItem:V.equipCraftedItem,clearCraftedSlot:V.clearCraftedSlot,moveSlotToBin:V.moveSlotToBin,swapSlots:V.swapSlots,assignDraggedItemToSlot:V.assignDraggedItemToSlot,assignDraggedItemToBin:V.assignDraggedItemToBin,toggleLock:V.toggleLock,undo:V.undo,redo:V.redo,hydrateSnapshot:V.hydrateSnapshot,loadCandidate:V.loadCandidate,setLegacyHash:V.setLegacyHash}))),W=w.useMemo(()=>Lk(B),[B]);w.useEffect(()=>{n?.workbenchPatch&&B.hydrateSnapshot(n.workbenchPatch)},[n,B]),w.useEffect(()=>{let V=!1;return(async()=>{try{const se=await OE.getCatalog();if(V)return;S(!1);const we=new LD;if(await we.init(se.items),V){we.dispose();return}if(k.current=we,s(se),S(!0),n?.legacyHash){de("Importing legacy builder hash...");try{const Ee=await cf.decodeLegacyHash(n.legacyHash),ke={};for(const[sn,Jt]of Object.entries(Ee.slots)){if(!Jt)continue;const zt=se.itemIdByName.get(Jt.toLowerCase());typeof zt=="number"&&(ke[sn]=zt)}B.hydrateSnapshot({...n.workbenchPatch,slots:{...n.workbenchPatch?.slots??{},...ke},level:Ee.level??n.workbenchPatch?.level??B.level,legacyHash:Ee.legacyHash}),B.setLegacyHash(Ee.legacyHash),de("Imported legacy builder hash into Workbench.")}catch(Ee){console.error(Ee),de("Failed to import legacy hash automatically. You can still open it in legacy builder.")}}}catch(se){console.error(se),c(se instanceof Error?se.message:"Failed to load item catalog")}})(),()=>{V=!0,k.current?.dispose(),G.current&&window.clearTimeout(G.current),le.current&&window.clearTimeout(le.current)}},[n,B]),w.useEffect(()=>{if(!(!l||!x||!k.current))return G.current&&window.clearTimeout(G.current),v(!0),G.current=window.setTimeout(async()=>{try{const V=await k.current.search(u);p(V)}catch(V){console.error(V),c(V instanceof Error?V.message:"Search failed")}finally{v(!1)}},180),()=>{G.current&&window.clearTimeout(G.current)}},[l,x,u]),w.useEffect(()=>{if(!M||!l||A||L||F)return;let V=!1;return D(!0),ie(null),(async()=>{try{const se=await bk.getDataset(ce||l.version);if(V)return;H(se),z(se.version)}catch(se){if(V)return;console.error(se),ie(se instanceof Error?se.message:"Failed to load ability tree data")}finally{V||D(!1)}})(),()=>{V=!0}},[M,L,l,ce,F]),w.useEffect(()=>{if(!(typeof window>"u"))return le.current&&window.clearTimeout(le.current),le.current=window.setTimeout(()=>{try{Ky({search:u,workbenchSnapshot:W,mode:N?"autobuilder":M?"abilitytree":null,abilityTreeState:{version:ce,selectedByClass:re},replace:!0})}catch(V){console.error(V)}},250),()=>{le.current&&window.clearTimeout(le.current)}},[u,W,N,M,re,ce]);const T=w.useMemo(()=>l?nc({slots:W.slots,level:W.level,characterClass:W.characterClass},l):null,[l,W]),q=w.useMemo(()=>{if(!l)return null;const V=W.slots.weapon;if(V==null)return null;const se=l.itemsById.get(V);return se?se.classReq??Vo(se.type):null},[l,W.slots.weapon]),J=W.characterClass??q,ae=w.useMemo(()=>zx(L,J),[L,J]),fe=w.useMemo(()=>{if(!ae||!J)return null;const V=re[J]??[];return Nc(ae,V,W.level)},[re,ae,J,W.level]),ge=w.useMemo(()=>{if(!l||!T)return null;const V=W.comparePreview;if(!V.itemId||!V.slot)return null;const se={...W.slots,[V.slot]:V.itemId};return nc({slots:se,level:W.level,characterClass:W.characterClass},l)},[l,T,W]),be=w.useMemo(()=>l?Bk({catalog:l,snapshot:W,abilityTreeTree:ae,abilityTreeEvaluation:fe}):null,[l,W,ae,fe]),ze=Dw(_v(eh,{activationConstraint:{distance:6}}),_v(Qf,{coordinateGetter:B_})),Oe=V=>{const se=V.active.data.current?.dragItem;if(!se)return;const we=se.kind==="slot"?se.sourceSlot??null:W.selectedSlot??null;B.setComparePreview({itemId:se.itemId,slot:we})},Ge=V=>{const se=V.active.data.current?.dragItem,we=c0(V.over?.id);!se||!we||we.kind==="slot"&&B.setComparePreview({itemId:se.itemId,slot:we.slot})},kt=V=>{const se=V.active.data.current?.dragItem,we=c0(V.over?.id);if(B.setComparePreview(null),!l||!se||!we)return;const Ee=l.itemsById.get(se.itemId);if(Ee){if(we.kind==="slot"){if(ua(we.slot)!==Ee.category)return;B.assignDraggedItemToSlot({targetSlot:we.slot,source:se.kind,itemId:se.itemId,sourceCategory:se.sourceCategory,sourceSlot:se.sourceSlot});return}if(we.kind==="bin"){if(we.category!==Ee.category)return;B.assignDraggedItemToBin({targetCategory:we.category,source:se.kind,itemId:se.itemId,sourceCategory:se.sourceCategory,sourceSlot:se.sourceSlot})}}},wt=V=>{if(!l)return;const se=Ik(V,l,W);se&&(B.equipItem(se,V),B.setSelectedSlot(se),de(`Equipped item into ${se}.`))},Cn=V=>{if(!l)return;const se=l.itemsById.get(V);se&&B.pinItem(se.category,se.id)},pt=()=>{const V=xx(W),se=JSON.stringify(W,null,2);window.prompt("Copy Workbench export (JSON). URL-safe code is also in the current ?wb= param.",se),de(`Workbench export ready. Code length: ${V.length}`)},Kt=async()=>{const V=window.prompt("Paste a Workbench JSON export, Workbench URL, or legacy builder URL/hash.");if(!V)return;const se=V.trim();try{if(cf.isSupported(se)&&l){const Ee=await cf.decodeLegacyHash(se),ke={};for(const[sn,Jt]of Object.entries(Ee.slots)){const zt=l.itemIdByName.get((Jt??"").toLowerCase());zt!=null&&(ke[sn]=zt)}B.hydrateSnapshot({slots:{...W.slots,...ke},level:Ee.level??W.level,legacyHash:Ee.legacyHash}),B.setLegacyHash(Ee.legacyHash),de("Imported legacy build hash.");return}if(se.startsWith("http://")||se.startsWith("https://")){const Ee=new URL(se),ke=vx(Ee),sn=yx(Ee),Jt=bx(Ee);f(ke),sn&&B.hydrateSnapshot(sn),Jt&&(Q(Jt.selectedByClass??{}),z(Jt.version??null)),de("Imported Workbench URL state.");return}const we=JSON.parse(se);B.hydrateSnapshot(we),de("Imported Workbench JSON.")}catch(we){console.error(we),de("Import failed. Check the pasted JSON/URL/hash.")}},We=async()=>{Ky({search:u,workbenchSnapshot:W,mode:N?"autobuilder":M?"abilitytree":null,abilityTreeState:{version:ce,selectedByClass:re},replace:!0}),await o0(window.location.href),de("Workbench link copied.")},Qt=async()=>{if(!W.legacyHash){de("No imported legacy hash is currently available.");return}const V=new URL(Iy(W.legacyHash),window.location.href).href;await o0(V),de("Legacy builder link copied.")},oe=()=>{window.open(Iy(W.legacyHash),"_blank","noopener,noreferrer")},Pe=()=>{ie(null),_(!1),R(!0)};return r?m.jsx("div",{className:"flex min-h-full items-center justify-center p-6",children:m.jsxs("div",{className:"wb-panel max-w-xl rounded-2xl p-6",children:[m.jsx("div",{className:"text-xl font-semibold",children:"Failed to load"}),m.jsx("div",{className:"mt-2 text-sm text-[var(--wb-muted)]",children:r})]})}):!l||!T?m.jsx("div",{className:"flex min-h-full items-center justify-center p-6",children:m.jsxs("div",{className:"wb-panel max-w-xl rounded-2xl p-6",children:[m.jsx("div",{className:"text-xl font-semibold",children:"Loading..."}),m.jsx("div",{className:"mt-2 text-sm text-[var(--wb-muted)]",children:"Preparing item catalog, search index, and build state."})]})}):m.jsxs(R_,{sensors:ze,collisionDetection:Cw,onDragStart:Oe,onDragOver:Ge,onDragEnd:kt,children:[m.jsxs("div",{className:"flex min-h-full flex-col gap-3 p-3 lg:p-4",children:[m.jsxs("header",{className:"wb-panel wb-hero rounded-2xl px-4 py-3",children:[m.jsxs("div",{className:"flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between",children:[m.jsxs("div",{className:"flex min-w-0 flex-1 flex-col gap-1",children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[m.jsx("span",{className:"wb-chip border-cyan-300/30 bg-cyan-300/8 text-cyan-100",children:"Standalone Alpha"}),m.jsx("span",{className:"wb-chip",children:"Legacy-compatible imports"}),fe?m.jsxs("span",{className:"wb-chip border-emerald-300/30 bg-emerald-300/8 text-emerald-100",children:["Ability Tree ",fe.apUsed,"/",fe.apCap," AP"]}):null]}),m.jsx("div",{className:"text-xs text-[var(--wb-muted)]",children:"Modular loadout planning studio with legacy builder compatibility."})]}),m.jsxs("button",{type:"button",className:"build-solver-logo-btn order-first flex shrink-0 cursor-pointer items-center justify-center gap-2 self-center rounded-xl px-6 py-3 text-lg font-bold tracking-tight text-cyan-50 shadow-lg sm:px-8 sm:py-4 sm:text-xl lg:order-none",onClick:()=>{R(!1),O(!1),_(!0)},title:"Open Build Solver  beam search over item combinations",children:[m.jsx(nE,{size:28,className:"text-amber-200/90",strokeWidth:2.5}),"Build Solver"]}),m.jsxs("div",{className:"flex min-w-0 flex-1 flex-wrap items-center justify-end gap-2",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:"text-xs text-[var(--wb-muted)]",children:"Class"}),m.jsxs("select",{className:"wb-select w-36",value:W.characterClass??"",onChange:V=>B.setCharacterClass(V.target.value||null),children:[m.jsx("option",{value:"",children:"Auto / Any"}),m.jsx("option",{value:"Warrior",children:"Warrior"}),m.jsx("option",{value:"Assassin",children:"Assassin"}),m.jsx("option",{value:"Mage",children:"Mage"}),m.jsx("option",{value:"Archer",children:"Archer"}),m.jsx("option",{value:"Shaman",children:"Shaman"})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("label",{className:"text-xs text-[var(--wb-muted)]",children:"Level"}),m.jsx("input",{className:"wb-input w-22",type:"number",min:1,max:106,value:W.level,onChange:V=>B.setLevel(Number(V.target.value))})]}),m.jsxs(Me,{variant:"ghost",onClick:We,children:[m.jsx(th,{size:13,className:"mr-1 inline"}),"Share Session"]}),m.jsxs(Me,{variant:"ghost",onClick:Pe,children:[m.jsx(B0,{size:13,className:"mr-1 inline"}),"Ability Tree"]}),m.jsx(Me,{className:"rounded-lg border border-violet-400/40 bg-violet-400/15 px-4 py-2 text-sm font-semibold text-violet-100 hover:bg-violet-400/25",onClick:()=>{_(!1),R(!1),O(!0)},children:"Recipe Solver"})]})]}),ue?m.jsx("div",{className:"mt-2 text-xs text-emerald-200",children:ue}):null]}),m.jsxs("main",{className:`grid min-h-0 flex-1 grid-cols-1 gap-3 xl:grid-cols-[minmax(300px,22vw)_minmax(0,1fr)_440px] 2xl:grid-cols-[320px_minmax(0,1fr)_480px] ${u.resultsBelowBuild?"xl:grid-rows-[1fr_auto]":""}`,children:[m.jsx(KC,{catalog:l,state:u,setState:f,result:g,loading:y,selectedSlot:W.selectedSlot,onPin:Cn,onEquip:wt,onHover:(V,se)=>B.setComparePreview(V&&se?{itemId:V,slot:se}:null)}),m.jsx(pR,{catalog:l,store:B,onHoverItem:(V,se)=>B.setComparePreview(V&&se?{itemId:V,slot:se}:null),onShareWorkbench:()=>{We()},onExportWorkbench:pt,onImportWorkbench:()=>{Kt()}}),m.jsx(mR,{catalog:l,snapshot:W,summary:T,compareSummary:ge,compareSlot:W.comparePreview.slot,spellPreview:be,abilityTreeSummary:fe&&J?{className:J,apUsed:fe.apUsed,apCap:fe.apCap,selectedCount:fe.activeIds.length,hasErrors:fe.errors.length>0||fe.apUsed>fe.apCap}:null,actions:{onOpenAbilityTree:Pe,onCopyLegacyLink:()=>{Qt()},onOpenLegacyBuilder:oe}}),u.resultsBelowBuild?m.jsx("div",{className:"xl:col-start-2 flex min-h-[240px] flex-col overflow-hidden rounded-xl border border-zinc-600/60 bg-zinc-800/80",children:m.jsx(ix,{catalog:l,result:g,selectedSlot:W.selectedSlot,state:u,loading:y,onPin:Cn,onEquip:wt,onHover:(V,se)=>B.setComparePreview(V&&se?{itemId:V,slot:se}:null)})}):null]})]}),m.jsx(xA,{open:N,onOpenChange:_,catalog:l,snapshot:W,onLoadCandidate:V=>{B.loadCandidate(V.slots),_(!1),de("Loaded Build Solver candidate into Workbench.")}}),m.jsx(RA,{open:M,onOpenChange:V=>{V&&ie(null),R(V)},dataset:L,loading:A,error:F,level:W.level,selectedClass:W.characterClass,inferredClass:q,selectionsByClass:re,onSelectionsChange:Q}),m.jsx(hk,{open:I,onOpenChange:O,onEquipCraft:(V,se)=>{B.equipCraftedItem(V,se),O(!1),de(`Crafted ${se.type} equipped to ${V}.`)}})]})}hw.createRoot(document.getElementById("root")).render(m.jsx(w.StrictMode,{children:m.jsx(qk,{})}));
